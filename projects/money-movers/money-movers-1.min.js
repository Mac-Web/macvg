!function(e){var t;"object"==typeof exports?module.exports=e():("undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.p2=e())}(function(){return function r(o,a,s){function p(t,e){if(!a[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);throw new Error("Cannot find module '"+t+"'")}var n=a[t]={exports:{}};o[t][0].call(n.exports,function(e){return p(o[t][1][e]||e)},n,n.exports,r,o,a,s)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)p(s[e]);return p}({1:[function(e,t,i){function n(){}var u=e("./Scalar");(t.exports=n).lineInt=function(e,t,i){i=i||0;var n,r,o,a,s,p,l,h=[0,0];return n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],o=n*e[0][0]+r*e[0][1],a=t[1][1]-t[0][1],s=t[0][0]-t[1][0],p=a*t[0][0]+s*t[0][1],l=n*s-a*r,u.eq(l,0,i)||(h[0]=(s*o-r*p)/l,h[1]=(n*p-a*o)/l),h},n.segmentsIntersect=function(e,t,i,n){var r=t[0]-e[0],o=t[1]-e[1],a=n[0]-i[0],s=n[1]-i[1];if(a*o-s*r==0)return!1;var p=(r*(i[1]-e[1])+o*(e[0]-i[0]))/(a*o-s*r),l=(a*(e[1]-i[1])+s*(i[0]-e[0]))/(s*r-a*o);return 0<=p&&p<=1&&0<=l&&l<=1}},{"./Scalar":4}],2:[function(e,t,i){function l(){}(t.exports=l).area=function(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])},l.left=function(e,t,i){return 0<l.area(e,t,i)},l.leftOn=function(e,t,i){return 0<=l.area(e,t,i)},l.right=function(e,t,i){return l.area(e,t,i)<0},l.rightOn=function(e,t,i){return l.area(e,t,i)<=0};var h=[],u=[];l.collinear=function(e,t,i,n){if(n){var r=h,o=u;r[0]=t[0]-e[0],r[1]=t[1]-e[1],o[0]=i[0]-t[0],o[1]=i[1]-t[1];var a=r[0]*o[0]+r[1]*o[1],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),p=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(a/(s*p))<n}return 0==l.area(e,t,i)},l.sqdist=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}},{}],3:[function(e,t,i){function b(){this.vertices=[]}function w(e,t,i,n,r){r=r||0;var o=t[1]-e[1],a=e[0]-t[0],s=o*e[0]+a*e[1],p=n[1]-i[1],l=i[0]-n[0],h=p*i[0]+l*i[1],u=o*l-p*a;return d.eq(u,0,r)?[0,0]:[(l*s-a*h)/u,(o*h-p*s)/u]}var s=e("./Line"),S=e("./Point"),d=e("./Scalar");(t.exports=b).prototype.at=function(e){var t=this.vertices,i=t.length;return t[e<0?e%i+i:e%i]},b.prototype.first=function(){return this.vertices[0]},b.prototype.last=function(){return this.vertices[this.vertices.length-1]},b.prototype.clear=function(){this.vertices.length=0},b.prototype.append=function(e,t,i){if(void 0===t)throw new Error("From is not given!");if(void 0===i)throw new Error("To is not given!");if(i-1<t)throw new Error("lol1");if(i>e.vertices.length)throw new Error("lol2");if(t<0)throw new Error("lol3");for(var n=t;n<i;n++)this.vertices.push(e.vertices[n])},b.prototype.makeCCW=function(){for(var e=0,t=this.vertices,i=1;i<this.vertices.length;++i)(t[i][1]<t[e][1]||t[i][1]==t[e][1]&&t[i][0]>t[e][0])&&(e=i);S.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},b.prototype.reverse=function(){for(var e=[],t=0,i=this.vertices.length;t!==i;t++)e.push(this.vertices.pop());this.vertices=e},b.prototype.isReflex=function(e){return S.right(this.at(e-1),this.at(e),this.at(e+1))};var p=[],l=[];b.prototype.canSee=function(e,t){var i,n,r=p,o=l;if(S.leftOn(this.at(e+1),this.at(e),this.at(t))&&S.rightOn(this.at(e-1),this.at(e),this.at(t)))return!1;n=S.sqdist(this.at(e),this.at(t));for(var a=0;a!==this.vertices.length;++a)if((a+1)%this.vertices.length!==e&&a!==e&&S.leftOn(this.at(e),this.at(t),this.at(a+1))&&S.rightOn(this.at(e),this.at(t),this.at(a))&&(r[0]=this.at(e),r[1]=this.at(t),o[0]=this.at(a),o[1]=this.at(a+1),i=s.lineInt(r,o),S.sqdist(this.at(e),i)<n))return!1;return!0},b.prototype.copy=function(e,t,i){var n=i||new b;if(n.clear(),e<t)for(var r=e;r<=t;r++)n.vertices.push(this.vertices[r]);else{for(r=0;r<=t;r++)n.vertices.push(this.vertices[r]);for(r=e;r<this.vertices.length;r++)n.vertices.push(this.vertices[r])}return n},b.prototype.getCutEdges=function(){for(var e=[],t=[],i=[],n=new b,r=Number.MAX_VALUE,o=0;o<this.vertices.length;++o)if(this.isReflex(o))for(var a=0;a<this.vertices.length;++a)if(this.canSee(o,a)){t=this.copy(o,a,n).getCutEdges(),i=this.copy(a,o,n).getCutEdges();for(var s=0;s<i.length;s++)t.push(i[s]);t.length<r&&(r=(e=t).length,e.push([this.at(o),this.at(a)]))}return e},b.prototype.decomp=function(){var e=this.getCutEdges();return 0<e.length?this.slice(e):[this]},b.prototype.slice=function(e){if(0==e.length)return[this];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2==e[0].length&&e[0][0]instanceof Array){for(var t=[this],i=0;i<e.length;i++)for(var n=e[i],r=0;r<t.length;r++){var o=t[r].slice(n);if(o){t.splice(r,1),t.push(o[0],o[1]);break}}return t}n=e,i=this.vertices.indexOf(n[0]),r=this.vertices.indexOf(n[1]);return-1!=i&&-1!=r&&[this.copy(i,r),this.copy(r,i)]},b.prototype.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var i=0;i<t-1;i++)if(s.segmentsIntersect(e[t],e[t+1],e[i],e[i+1]))return!1;for(t=1;t<e.length-2;t++)if(s.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},b.prototype.quickDecomp=function(e,t,i,n,r,o){r=r||100,o=o||0,n=n||25,e=void 0!==e?e:[],t=t||[],i=i||[];var a=[0,0],s=[0,0],p=[0,0],l=0,h=0,u=0,d=0,c=0,_=0,y=0,x=new b,m=new b,f=this,v=this.vertices;if(v.length<3)return e;if(++o>r)return e;for(var g=0;g<this.vertices.length;++g)if(f.isReflex(g)){t.push(f.vertices[g]),l=h=Number.MAX_VALUE;for(var z=0;z<this.vertices.length;++z)S.left(f.at(g-1),f.at(g),f.at(z))&&S.rightOn(f.at(g-1),f.at(g),f.at(z-1))&&(p=w(f.at(g-1),f.at(g),f.at(z),f.at(z-1)),S.right(f.at(g+1),f.at(g),p)&&(u=S.sqdist(f.vertices[g],p))<h&&(h=u,s=p,_=z)),S.left(f.at(g+1),f.at(g),f.at(z+1))&&S.rightOn(f.at(g+1),f.at(g),f.at(z))&&(p=w(f.at(g+1),f.at(g),f.at(z),f.at(z+1)),S.left(f.at(g-1),f.at(g),p)&&(u=S.sqdist(f.vertices[g],p))<l&&(l=u,a=p,c=z));if(_==(c+1)%this.vertices.length)p[0]=(s[0]+a[0])/2,p[1]=(s[1]+a[1])/2,i.push(p),g<c?(x.append(f,g,c+1),x.vertices.push(p),m.vertices.push(p),0!=_&&m.append(f,_,f.vertices.length),m.append(f,0,g+1)):(0!=g&&x.append(f,g,f.vertices.length),x.append(f,0,c+1),x.vertices.push(p),m.vertices.push(p),m.append(f,_,g+1));else{if(c<_&&(c+=this.vertices.length),d=Number.MAX_VALUE,c<_)return e;for(z=_;z<=c;++z)S.leftOn(f.at(g-1),f.at(g),f.at(z))&&S.rightOn(f.at(g+1),f.at(g),f.at(z))&&(u=S.sqdist(f.at(g),f.at(z)))<d&&(d=u,y=z%this.vertices.length);g<y?(x.append(f,g,y+1),0!=y&&m.append(f,y,v.length),m.append(f,0,g+1)):(0!=g&&x.append(f,g,v.length),x.append(f,0,y+1),m.append(f,y,g+1))}return x.vertices.length<m.vertices.length?(x.quickDecomp(e,t,i,n,r,o),m.quickDecomp(e,t,i,n,r,o)):(m.quickDecomp(e,t,i,n,r,o),x.quickDecomp(e,t,i,n,r,o)),e}return e.push(this),e},b.prototype.removeCollinearPoints=function(e){for(var t=0,i=this.vertices.length-1;3<this.vertices.length&&0<=i;--i)S.collinear(this.at(i-1),this.at(i),this.at(i+1),e)&&(this.vertices.splice(i%this.vertices.length,1),i--,t++);return t}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(e,t,i){function n(){}(t.exports=n).eq=function(e,t,i){return i=i||0,Math.abs(e-t)<i}},{}],5:[function(e,t,i){t.exports={Polygon:e("./Polygon"),Point:e("./Point")}},{"./Point":2,"./Polygon":3}],6:[function(e,t,i){t.exports={name:"p2",version:"0.7.0",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"}}},{}],7:[function(e,t,i){function n(e){this.lowerBound=c.create(),e&&e.lowerBound&&c.copy(this.lowerBound,e.lowerBound),this.upperBound=c.create(),e&&e.upperBound&&c.copy(this.upperBound,e.upperBound)}var c=e("../math/vec2");e("../utils/Utils"),t.exports=n;var _=c.create();n.prototype.setFromPoints=function(e,t,i,n){var r=this.lowerBound,o=this.upperBound;"number"!=typeof i&&(i=0),0!==i?c.rotate(r,e[0],i):c.copy(r,e[0]),c.copy(o,r);for(var a=Math.cos(i),s=Math.sin(i),p=1;p<e.length;p++){var l=e[p];if(0!==i){var h=l[0],u=l[1];_[0]=a*h-s*u,_[1]=s*h+a*u,l=_}for(var d=0;d<2;d++)l[d]>o[d]&&(o[d]=l[d]),l[d]<r[d]&&(r[d]=l[d])}t&&(c.add(this.lowerBound,this.lowerBound,t),c.add(this.upperBound,this.upperBound,t)),n&&(this.lowerBound[0]-=n,this.lowerBound[1]-=n,this.upperBound[0]+=n,this.upperBound[1]+=n)},n.prototype.copy=function(e){c.copy(this.lowerBound,e.lowerBound),c.copy(this.upperBound,e.upperBound)},n.prototype.extend=function(e){for(var t=2;t--;){var i=e.lowerBound[t];this.lowerBound[t]>i&&(this.lowerBound[t]=i);var n=e.upperBound[t];this.upperBound[t]<n&&(this.upperBound[t]=n)}},n.prototype.overlaps=function(e){var t=this.lowerBound,i=this.upperBound,n=e.lowerBound,r=e.upperBound;return(n[0]<=i[0]&&i[0]<=r[0]||t[0]<=r[0]&&r[0]<=i[0])&&(n[1]<=i[1]&&i[1]<=r[1]||t[1]<=r[1]&&r[1]<=i[1])},n.prototype.containsPoint=function(e){var t=this.lowerBound,i=this.upperBound;return t[0]<=e[0]&&e[0]<=i[0]&&t[1]<=e[1]&&e[1]<=i[1]},n.prototype.overlapsRay=function(e){var t=1/e.direction[0],i=1/e.direction[1],n=(this.lowerBound[0]-e.from[0])*t,r=(this.upperBound[0]-e.from[0])*t,o=(this.lowerBound[1]-e.from[1])*i,a=(this.upperBound[1]-e.from[1])*i,s=Math.max(Math.max(Math.min(n,r),Math.min(o,a))),p=Math.min(Math.min(Math.max(n,r),Math.max(o,a)));return p<0?-1:p<s?-1:s}},{"../math/vec2":30,"../utils/Utils":57}],8:[function(e,t,i){function n(e){this.type=e,this.result=[],this.world=null,this.boundingVolumeType=n.AABB}var r=e("../math/vec2"),o=e("../objects/Body");(t.exports=n).AABB=1,n.BOUNDING_CIRCLE=2,n.prototype.setWorld=function(e){this.world=e},n.prototype.getCollisionPairs=function(e){};var a=r.create();n.boundingRadiusCheck=function(e,t){r.sub(a,e.position,t.position);var i=r.squaredLength(a),n=e.boundingRadius+t.boundingRadius;return i<=n*n},n.aabbCheck=function(e,t){return e.getAABB().overlaps(t.getAABB())},n.prototype.boundingVolumeCheck=function(e,t){var i;switch(this.boundingVolumeType){case n.BOUNDING_CIRCLE:i=n.boundingRadiusCheck(e,t);break;case n.AABB:i=n.aabbCheck(e,t);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return i},n.canCollide=function(e,t){var i=o.KINEMATIC,n=o.STATIC;return!(e.type===n&&t.type===n||e.type===i&&t.type===n||e.type===n&&t.type===i||e.type===i&&t.type===i||e.sleepState===o.SLEEPING&&t.sleepState===o.SLEEPING||e.sleepState===o.SLEEPING&&t.type===n||t.sleepState===o.SLEEPING&&e.type===n)},n.NAIVE=1,n.SAP=2},{"../math/vec2":30,"../objects/Body":31}],9:[function(e,t,i){function n(){p.call(this,p.NAIVE)}var p=(e("../shapes/Circle"),e("../shapes/Plane"),e("../shapes/Shape"),e("../shapes/Particle"),e("../collision/Broadphase"));e("../math/vec2"),(((t.exports=n).prototype=new p).constructor=n).prototype.getCollisionPairs=function(e){for(var t=e.bodies,i=this.result,n=i.length=0,r=t.length;n!==r;n++)for(var o=t[n],a=0;a<n;a++){var s=t[a];p.canCollide(o,s)&&this.boundingVolumeCheck(o,s)&&i.push(o,s)}return i},n.prototype.aabbQuery=function(e,t,i){i=i||[];for(var n=e.bodies,r=0;r<n.length;r++){var o=n[r];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(t)&&i.push(o)}return i}},{"../collision/Broadphase":8,"../math/vec2":30,"../shapes/Circle":39,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45}],10:[function(e,t,i){function N(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new n({size:32}),this.frictionEquationPool=new r({size:64}),this.restitution=0,this.stiffness=a.DEFAULT_STIFFNESS,this.relaxation=a.DEFAULT_RELAXATION,this.frictionStiffness=a.DEFAULT_STIFFNESS,this.frictionRelaxation=a.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new o,this.contactSkinSize=.01}function v(e,t){U.set(e.vertices[0],.5*-t.length,-t.radius),U.set(e.vertices[1],.5*t.length,-t.radius),U.set(e.vertices[2],.5*t.length,t.radius),U.set(e.vertices[3],.5*-t.length,t.radius)}function G(e,t,i,n){for(var r=y,o=x,a=m,s=f,p=e,l=t.vertices,h=null,u=0;u!==l.length+1;u++){var d=l[u%l.length],c=l[(u+1)%l.length];U.rotate(r,d,n),U.rotate(o,c,n),V(r,r,i),V(o,o,i),H(a,r,p),H(s,o,p);var _=U.crossLength(a,s);if(null===h&&(h=_),_*h<=0)return!1;h=_}return!0}var U=e("../math/vec2"),H=U.sub,V=U.add,W=U.dot,n=(e("../utils/Utils"),e("../utils/ContactEquationPool")),r=e("../utils/FrictionEquationPool"),o=e("../utils/TupleDictionary"),a=e("../equations/Equation"),s=(e("../equations/ContactEquation"),e("../equations/FrictionEquation"),e("../shapes/Circle")),p=e("../shapes/Convex"),l=e("../shapes/Shape"),w=(e("../objects/Body"),e("../shapes/Box"));t.exports=N;var S=U.fromValues(0,1),X=U.fromValues(0,0),q=U.fromValues(0,0),Y=U.fromValues(0,0),Z=U.fromValues(0,0),K=U.fromValues(0,0),I=U.fromValues(0,0),J=U.fromValues(0,0),Q=U.fromValues(0,0),$=U.fromValues(0,0),B=U.fromValues(0,0),L=U.fromValues(0,0),D=U.fromValues(0,0),R=U.fromValues(0,0),F=U.fromValues(0,0),O=U.fromValues(0,0),A=U.fromValues(0,0),k=U.fromValues(0,0),T=U.fromValues(0,0),j=[],h=U.create(),u=U.create();N.prototype.bodiesOverlap=function(e,t){for(var i=h,n=u,r=0,o=e.shapes.length;r!==o;r++){var a=e.shapes[r];e.toWorldFrame(i,a.position);for(var s=0,p=t.shapes.length;s!==p;s++){var l=t.shapes[s];if(t.toWorldFrame(n,l.position),this[a.type|l.type](e,a,i,a.angle+e.angle,t,l,n,l.angle+t.angle,!0))return!0}}return!1},N.prototype.collidedLastStep=function(e,t){var i=0|e.id,n=0|t.id;return!!this.collidingBodiesLastStep.get(i,n)},N.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var e=this.contactEquations,t=e.length;t--;){var i=e[t],n=i.bodyA.id,r=i.bodyB.id;this.collidingBodiesLastStep.set(n,r,!0)}for(var o=this.contactEquations,a=this.frictionEquations,s=0;s<o.length;s++)this.contactEquationPool.release(o[s]);for(s=0;s<a.length;s++)this.frictionEquationPool.release(a[s]);this.contactEquations.length=this.frictionEquations.length=0},N.prototype.createContactEquation=function(e,t,i,n){var r=this.contactEquationPool.get();return r.bodyA=e,r.bodyB=t,r.shapeA=i,r.shapeB=n,r.restitution=this.restitution,r.firstImpact=!this.collidedLastStep(e,t),r.stiffness=this.stiffness,r.relaxation=this.relaxation,r.needsUpdate=!0,r.enabled=this.enabledEquations,r.offset=this.contactSkinSize,r},N.prototype.createFrictionEquation=function(e,t,i,n){var r=this.frictionEquationPool.get();return r.bodyA=e,r.bodyB=t,r.shapeA=i,r.shapeB=n,r.setSlipForce(this.slipForce),r.frictionCoefficient=this.frictionCoefficient,r.relativeVelocity=this.surfaceVelocity,r.enabled=this.enabledEquations,r.needsUpdate=!0,r.stiffness=this.frictionStiffness,r.relaxation=this.frictionRelaxation,r.contactEquations.length=0,r},N.prototype.createFrictionFromContact=function(e){var t=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB);return U.copy(t.contactPointA,e.contactPointA),U.copy(t.contactPointB,e.contactPointB),U.rotate90cw(t.t,e.normalA),t.contactEquations.push(e),t},N.prototype.createFrictionFromAverage=function(e){var t=this.contactEquations[this.contactEquations.length-1],i=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB),n=t.bodyA;t.bodyB,U.set(i.contactPointA,0,0),U.set(i.contactPointB,0,0),U.set(i.t,0,0);for(var r=0;r!==e;r++)(t=this.contactEquations[this.contactEquations.length-1-r]).bodyA===n?(U.add(i.t,i.t,t.normalA),U.add(i.contactPointA,i.contactPointA,t.contactPointA),U.add(i.contactPointB,i.contactPointB,t.contactPointB)):(U.sub(i.t,i.t,t.normalA),U.add(i.contactPointA,i.contactPointA,t.contactPointB),U.add(i.contactPointB,i.contactPointB,t.contactPointA)),i.contactEquations.push(t);var o=1/e;return U.scale(i.contactPointA,i.contactPointA,o),U.scale(i.contactPointB,i.contactPointB,o),U.normalize(i.t,i.t),U.rotate90cw(i.t,i.t),i},N.prototype[l.LINE|l.CONVEX]=N.prototype.convexLine=function(e,t,i,n,r,o,a,s,p){return!p&&0},N.prototype[l.LINE|l.BOX]=N.prototype.lineBox=function(e,t,i,n,r,o,a,s,p){return!p&&0};var c=new w({width:1,height:1}),_=U.create();N.prototype[l.CAPSULE|l.CONVEX]=N.prototype[l.CAPSULE|l.BOX]=N.prototype.convexCapsule=function(e,t,i,n,r,o,a,s,p){var l=_;U.set(l,o.length/2,0),U.rotate(l,l,s),U.add(l,l,a);var h=this.circleConvex(r,o,l,s,e,t,i,n,p,o.radius);U.set(l,-o.length/2,0),U.rotate(l,l,s),U.add(l,l,a);var u=this.circleConvex(r,o,l,s,e,t,i,n,p,o.radius);if(p&&(h||u))return!0;var d=c;return v(d,o),this.convexConvex(e,t,i,n,r,d,a,s,p)+h+u},N.prototype[l.CAPSULE|l.LINE]=N.prototype.lineCapsule=function(e,t,i,n,r,o,a,s,p){return!p&&0};var g=U.create(),z=U.create(),b=new w({width:1,height:1});N.prototype[l.CAPSULE|l.CAPSULE]=N.prototype.capsuleCapsule=function(e,t,i,n,r,o,a,s,p){for(var l=g,h=z,u=0,d=0;d<2;d++){U.set(l,(0===d?-1:1)*t.length/2,0),U.rotate(l,l,n),U.add(l,l,i);for(var c=0;c<2;c++){U.set(h,(0===c?-1:1)*o.length/2,0),U.rotate(h,h,s),U.add(h,h,a),this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var _=this.circleCircle(e,t,l,n,r,o,h,s,p,t.radius,o.radius);if(this.enableFrictionReduction&&(this.enableFriction=m),p&&_)return!0;u+=_}}this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var y=b;v(y,t);var x=this.convexCapsule(e,y,i,n,r,o,a,s,p);if(this.enableFrictionReduction&&(this.enableFriction=m),p&&x)return!0;if(u+=x,this.enableFrictionReduction){var m=this.enableFriction;this.enableFriction=!1}v(y,o);var f=this.convexCapsule(r,y,a,s,e,t,i,n,p);return this.enableFrictionReduction&&(this.enableFriction=m),!(!p||!f)||(u+=f,this.enableFrictionReduction&&u&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(u)),u)},N.prototype[l.LINE|l.LINE]=N.prototype.lineLine=function(e,t,i,n,r,o,a,s,p){return!p&&0},N.prototype[l.PLANE|l.LINE]=N.prototype.planeLine=function(e,t,i,n,r,o,a,s,p){var l=X,h=q,u=Y,d=Z,c=K,_=I,y=J,x=Q,m=$,f=j,v=0;U.set(l,-o.length/2,0),U.set(h,o.length/2,0),U.rotate(u,l,s),U.rotate(d,h,s),V(u,u,a),V(d,d,a),U.copy(l,u),U.copy(h,d),H(c,h,l),U.normalize(_,c),U.rotate90cw(m,_),U.rotate(x,S,n),f[0]=l,f[1]=h;for(var g=0;g<f.length;g++){var z=f[g];H(y,z,i);var b=W(y,x);if(b<0){if(p)return!0;var w=this.createContactEquation(e,r,t,o);v++,U.copy(w.normalA,x),U.normalize(w.normalA,w.normalA),U.scale(y,x,b),H(w.contactPointA,z,y),H(w.contactPointA,w.contactPointA,e.position),H(w.contactPointB,z,a),V(w.contactPointB,w.contactPointB,a),H(w.contactPointB,w.contactPointB,r.position),this.contactEquations.push(w),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(w))}}return!p&&(this.enableFrictionReduction||v&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(v)),v)},N.prototype[l.PARTICLE|l.CAPSULE]=N.prototype.particleCapsule=function(e,t,i,n,r,o,a,s,p){return this.circleLine(e,t,i,n,r,o,a,s,p,o.radius,0)},N.prototype[l.CIRCLE|l.LINE]=N.prototype.circleLine=function(e,t,i,n,r,o,a,s,p,l,h){l=l||0,h=void 0!==h?h:t.radius;var u=X,d=q,c=Y,_=Z,y=K,x=I,m=J,f=Q,v=$,g=B,z=L,b=D,w=R,S=F,C=j;U.set(f,-o.length/2,0),U.set(v,o.length/2,0),U.rotate(g,f,s),U.rotate(z,v,s),V(g,g,a),V(z,z,a),U.copy(f,g),U.copy(v,z),H(x,v,f),U.normalize(m,x),U.rotate90cw(y,m),H(b,i,f);var M=W(b,y);H(_,f,a),H(w,i,a);var P=h+l;if(Math.abs(M)<P){U.scale(u,y,M),H(c,i,u),U.scale(d,y,W(y,w)),U.normalize(d,d),U.scale(d,d,l),V(c,c,d);var k=W(m,c),T=W(m,f),G=W(m,v);if(T<k&&k<G){if(p)return!0;var O=this.createContactEquation(e,r,t,o);return U.scale(O.normalA,u,-1),U.normalize(O.normalA,O.normalA),U.scale(O.contactPointA,O.normalA,h),V(O.contactPointA,O.contactPointA,i),H(O.contactPointA,O.contactPointA,e.position),H(O.contactPointB,c,a),V(O.contactPointB,O.contactPointB,a),H(O.contactPointB,O.contactPointB,r.position),this.contactEquations.push(O),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(O)),1}}C[0]=f,C[1]=v;for(var A=0;A<C.length;A++){var E=C[A];if(H(b,E,i),U.squaredLength(b)<Math.pow(P,2)){if(p)return!0;O=this.createContactEquation(e,r,t,o);return U.copy(O.normalA,b),U.normalize(O.normalA,O.normalA),U.scale(O.contactPointA,O.normalA,h),V(O.contactPointA,O.contactPointA,i),H(O.contactPointA,O.contactPointA,e.position),H(O.contactPointB,E,a),U.scale(S,O.normalA,-l),V(O.contactPointB,O.contactPointB,S),V(O.contactPointB,O.contactPointB,a),H(O.contactPointB,O.contactPointB,r.position),this.contactEquations.push(O),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(O)),1}}return 0},N.prototype[l.CIRCLE|l.CAPSULE]=N.prototype.circleCapsule=function(e,t,i,n,r,o,a,s,p){return this.circleLine(e,t,i,n,r,o,a,s,p,o.radius)},N.prototype[l.CIRCLE|l.CONVEX]=N.prototype[l.CIRCLE|l.BOX]=N.prototype.circleConvex=function(e,t,i,n,r,o,a,s,p,l){l="number"==typeof l?l:t.radius;for(var h=X,u=q,d=Y,c=Z,_=K,y=B,x=L,m=R,f=F,v=O,g=A,z=!1,b=Number.MAX_VALUE,w=o.vertices,S=0;S!==w.length+1;S++){var C=w[S%w.length],M=w[(S+1)%w.length];if(U.rotate(h,C,s),U.rotate(u,M,s),V(h,h,a),V(u,u,a),H(d,u,h),U.normalize(c,d),U.rotate90cw(_,c),U.scale(f,_,-t.radius),V(f,f,i),G(f,o,a,s)){U.sub(v,h,f);var P=Math.abs(U.dot(v,_));P<b&&(U.copy(g,f),b=P,U.scale(m,_,P),U.add(m,m,f),z=!0)}}if(z){if(p)return!0;var k=this.createContactEquation(e,r,t,o);return U.sub(k.normalA,g,i),U.normalize(k.normalA,k.normalA),U.scale(k.contactPointA,k.normalA,l),V(k.contactPointA,k.contactPointA,i),H(k.contactPointA,k.contactPointA,e.position),H(k.contactPointB,m,a),V(k.contactPointB,k.contactPointB,a),H(k.contactPointB,k.contactPointB,r.position),this.contactEquations.push(k),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(k)),1}if(0<l)for(S=0;S<w.length;S++){var T=w[S];if(U.rotate(x,T,s),V(x,x,a),H(y,x,i),U.squaredLength(y)<Math.pow(l,2)){if(p)return!0;k=this.createContactEquation(e,r,t,o);return U.copy(k.normalA,y),U.normalize(k.normalA,k.normalA),U.scale(k.contactPointA,k.normalA,l),V(k.contactPointA,k.contactPointA,i),H(k.contactPointA,k.contactPointA,e.position),H(k.contactPointB,x,a),V(k.contactPointB,k.contactPointB,a),H(k.contactPointB,k.contactPointB,r.position),this.contactEquations.push(k),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(k)),1}}return 0};var y=U.create(),x=U.create(),m=U.create(),f=U.create();N.prototype[l.PARTICLE|l.CONVEX]=N.prototype[l.PARTICLE|l.BOX]=N.prototype.particleConvex=function(e,t,i,n,r,o,a,s,p){var l=X,h=q,u=Y,d=Z,c=K,_=I,y=J,x=B,m=R,f=k,v=T,g=Number.MAX_VALUE,z=!1,b=o.vertices;if(!G(i,o,a,s))return 0;if(p)return!0;for(var w=0;w!==b.length+1;w++){var S=b[w%b.length],C=b[(w+1)%b.length];U.rotate(l,S,s),U.rotate(h,C,s),V(l,l,a),V(h,h,a),H(u,h,l),U.normalize(d,u),U.rotate90cw(c,d),H(x,i,l),W(x,c),H(_,l,a),H(y,i,a),U.sub(f,l,i);var M=Math.abs(U.dot(f,c));M<g&&(g=M,U.scale(m,c,M),U.add(m,m,i),U.copy(v,c),z=!0)}if(z){var P=this.createContactEquation(e,r,t,o);return U.scale(P.normalA,v,-1),U.normalize(P.normalA,P.normalA),U.set(P.contactPointA,0,0),V(P.contactPointA,P.contactPointA,i),H(P.contactPointA,P.contactPointA,e.position),H(P.contactPointB,m,a),V(P.contactPointB,P.contactPointB,a),H(P.contactPointB,P.contactPointB,r.position),this.contactEquations.push(P),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(P)),1}return 0},N.prototype[l.CIRCLE]=N.prototype.circleCircle=function(e,t,i,n,r,o,a,s,p,l,h){var u=X;l=l||t.radius,h=h||o.radius;H(u,i,a);var d=l+h;if(U.squaredLength(u)>Math.pow(d,2))return 0;if(p)return!0;var c=this.createContactEquation(e,r,t,o);return H(c.normalA,a,i),U.normalize(c.normalA,c.normalA),U.scale(c.contactPointA,c.normalA,l),U.scale(c.contactPointB,c.normalA,-h),V(c.contactPointA,c.contactPointA,i),H(c.contactPointA,c.contactPointA,e.position),V(c.contactPointB,c.contactPointB,a),H(c.contactPointB,c.contactPointB,r.position),this.contactEquations.push(c),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(c)),1},N.prototype[l.PLANE|l.CONVEX]=N.prototype[l.PLANE|l.BOX]=N.prototype.planeConvex=function(e,t,i,n,r,o,a,s,p){var l=X,h=q,u=Y,d=0;U.rotate(h,S,n);for(var c=0;c!==o.vertices.length;c++){var _=o.vertices[c];if(U.rotate(l,_,s),V(l,l,a),H(u,l,i),W(u,h)<=0){if(p)return!0;d++;var y=this.createContactEquation(e,r,t,o);H(u,l,i),U.copy(y.normalA,h);var x=W(u,y.normalA);U.scale(u,y.normalA,x),H(y.contactPointB,l,r.position),H(y.contactPointA,l,u),H(y.contactPointA,y.contactPointA,e.position),this.contactEquations.push(y),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(y))}}return this.enableFrictionReduction&&this.enableFriction&&d&&this.frictionEquations.push(this.createFrictionFromAverage(d)),d},N.prototype[l.PARTICLE|l.PLANE]=N.prototype.particlePlane=function(e,t,i,n,r,o,a,s,p){var l=X,h=q;s=s||0,H(l,i,a),U.rotate(h,S,s);var u=W(l,h);if(0<u)return 0;if(p)return!0;var d=this.createContactEquation(r,e,o,t);return U.copy(d.normalA,h),U.scale(l,d.normalA,u),H(d.contactPointA,i,l),H(d.contactPointA,d.contactPointA,r.position),H(d.contactPointB,i,e.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1},N.prototype[l.CIRCLE|l.PARTICLE]=N.prototype.circleParticle=function(e,t,i,n,r,o,a,s,p){var l=X;if(H(l,a,i),U.squaredLength(l)>Math.pow(t.radius,2))return 0;if(p)return!0;var h=this.createContactEquation(e,r,t,o);return U.copy(h.normalA,l),U.normalize(h.normalA,h.normalA),U.scale(h.contactPointA,h.normalA,t.radius),V(h.contactPointA,h.contactPointA,i),H(h.contactPointA,h.contactPointA,e.position),H(h.contactPointB,a,r.position),this.contactEquations.push(h),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(h)),1};var C=new s({radius:1}),M=U.create(),P=U.create();U.create(),N.prototype[l.PLANE|l.CAPSULE]=N.prototype.planeCapsule=function(e,t,i,n,r,o,a,s,p){var l,h=M,u=P,d=C;U.set(h,-o.length/2,0),U.rotate(h,h,s),V(h,h,a),U.set(u,o.length/2,0),U.rotate(u,u,s),V(u,u,a),d.radius=o.radius,this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var c=this.circlePlane(r,d,h,0,e,t,i,n,p),_=this.circlePlane(r,d,u,0,e,t,i,n,p);if(this.enableFrictionReduction&&(this.enableFriction=l),p)return c||_;var y=c+_;return this.enableFrictionReduction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},N.prototype[l.CIRCLE|l.PLANE]=N.prototype.circlePlane=function(e,t,i,n,r,o,a,s,p){var l=e,h=t,u=i,d=r,c=a,_=s;_=_||0;var y=X,x=q,m=Y;H(y,u,c),U.rotate(x,S,_);var f=W(x,y);if(f>h.radius)return 0;if(p)return!0;var v=this.createContactEquation(d,l,o,t);return U.copy(v.normalA,x),U.scale(v.contactPointB,v.normalA,-h.radius),V(v.contactPointB,v.contactPointB,u),H(v.contactPointB,v.contactPointB,l.position),U.scale(m,v.normalA,f),H(v.contactPointA,y,m),V(v.contactPointA,v.contactPointA,c),H(v.contactPointA,v.contactPointA,d.position),this.contactEquations.push(v),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(v)),1},N.prototype[l.CONVEX]=N.prototype[l.CONVEX|l.BOX]=N.prototype[l.BOX]=N.prototype.convexConvex=function(e,t,i,n,r,o,a,s,p,l){var h=X,u=q,d=Y,c=Z,_=K,y=J,x=Q,m=$,f=0;l="number"==typeof l?l:0;if(!N.findSeparatingAxis(t,i,n,o,a,s,h))return 0;H(x,a,i),0<W(h,x)&&U.scale(h,h,-1);var v=N.getClosestEdge(t,n,h,!0),g=N.getClosestEdge(o,s,h);if(-1===v||-1===g)return 0;for(var z=0;z<2;z++){var b,w=v,S=g,C=t,M=o,P=i,k=a,T=n,G=s,O=e,A=r;if(0===z)b=w,w=S,S=b,b=C,C=M,M=b,b=P,P=k,k=b,b=T,T=G,G=b,b=O,O=A,A=b;for(var E=S;E<S+2;E++){var I=M.vertices[(E+M.vertices.length)%M.vertices.length];U.rotate(u,I,G),V(u,u,k);for(var B=0,L=w-1;L<w+2;L++){var D=C.vertices[(L+C.vertices.length)%C.vertices.length],R=C.vertices[(L+1+C.vertices.length)%C.vertices.length];U.rotate(d,D,T),U.rotate(c,R,T),V(d,d,P),V(c,c,P),H(_,c,d),U.rotate90cw(m,_),U.normalize(m,m),H(x,u,d);var F=W(m,x);(L===w&&F<=l||L!==w&&F<=0)&&B++}if(3<=B){if(p)return!0;var j=this.createContactEquation(O,A,C,M);f++;D=C.vertices[w%C.vertices.length],R=C.vertices[(w+1)%C.vertices.length];U.rotate(d,D,T),U.rotate(c,R,T),V(d,d,P),V(c,c,P),H(_,c,d),U.rotate90cw(j.normalA,_),U.normalize(j.normalA,j.normalA),H(x,u,d);F=W(j.normalA,x);U.scale(y,j.normalA,F),H(j.contactPointA,u,P),H(j.contactPointA,j.contactPointA,y),V(j.contactPointA,j.contactPointA,P),H(j.contactPointA,j.contactPointA,O.position),H(j.contactPointB,u,k),V(j.contactPointB,j.contactPointB,k),H(j.contactPointB,j.contactPointB,A.position),this.contactEquations.push(j),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(j))}}}return this.enableFrictionReduction&&this.enableFriction&&f&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f};var E=U.fromValues(0,0);N.projectConvexOntoAxis=function(e,t,i,n,r){var o,a,s=null,p=null,l=E;U.rotate(l,n,-i);for(var h=0;h<e.vertices.length;h++)o=e.vertices[h],a=W(o,l),(null===s||s<a)&&(s=a),(null===p||a<p)&&(p=a);if(s<p){var u=p;p=s,s=u}var d=W(t,n);U.set(r,p+d,s+d)};var ee=U.fromValues(0,0),te=U.fromValues(0,0),ie=U.fromValues(0,0),ne=U.fromValues(0,0),re=U.fromValues(0,0),oe=U.fromValues(0,0);N.findSeparatingAxis=function(e,t,i,n,r,o,a){var s=null,p=!1,l=!1,h=ee,u=te,d=ie,c=ne,_=re,y=oe;if(e instanceof w&&n instanceof w)for(var x=0;2!==x;x++){var m=e,f=i;1===x&&(m=n,f=o);for(var v=0;2!==v;v++){0===v?U.set(c,0,1):1===v&&U.set(c,1,0),0!==f&&U.rotate(c,c,f),N.projectConvexOntoAxis(e,t,i,c,_),N.projectConvexOntoAxis(n,r,o,c,y);var g=_,z=y;_[0]>y[0]&&(z=_,g=y),p=(b=z[0]-g[1])<=0,(null===s||s<b)&&(U.copy(a,c),s=b,l=p)}}else for(x=0;2!==x;x++){m=e,f=i;1===x&&(m=n,f=o);for(v=0;v!==m.vertices.length;v++){U.rotate(u,m.vertices[v],f),U.rotate(d,m.vertices[(v+1)%m.vertices.length],f),H(h,d,u),U.rotate90cw(c,h),U.normalize(c,c),N.projectConvexOntoAxis(e,t,i,c,_),N.projectConvexOntoAxis(n,r,o,c,y);var b;g=_,z=y;_[0]>y[0]&&(z=_,g=y),p=(b=z[0]-g[1])<=0,(null===s||s<b)&&(U.copy(a,c),s=b,l=p)}}return l};var d=U.fromValues(0,0),ae=U.fromValues(0,0),se=U.fromValues(0,0);N.getClosestEdge=function(e,t,i,n){var r=d,o=ae,a=se;U.rotate(r,i,-t),n&&U.scale(r,r,-1);for(var s=-1,p=e.vertices.length,l=-1,h=0;h!==p;h++){H(o,e.vertices[(h+1)%p],e.vertices[h%p]),U.rotate90cw(a,o),U.normalize(a,a);var u=W(a,r);(-1===s||l<u)&&(s=h%p,l=u)}return s};var pe=U.create(),le=U.create(),he=U.create(),ue=U.create(),de=U.create(),ce=U.create(),_e=U.create();N.prototype[l.CIRCLE|l.HEIGHTFIELD]=N.prototype.circleHeightfield=function(e,t,i,n,r,o,a,s,p,l){var h=o.heights,u=(l=l||t.radius,o.elementWidth),d=le,c=pe,_=de,y=_e,x=ce,m=he,f=ue,v=Math.floor((i[0]-l-a[0])/u),g=Math.ceil((i[0]+l-a[0])/u);v<0&&(v=0),g>=h.length&&(g=h.length-1);for(var z=h[v],b=h[g],w=v;w<g;w++)h[w]<b&&(b=h[w]),h[w]>z&&(z=h[w]);if(i[1]-l>z)return!p&&0;var S=!1;for(w=v;w<g;w++){U.set(m,w*u,h[w]),U.set(f,(w+1)*u,h[w+1]),U.add(m,m,a),U.add(f,f,a),U.sub(x,f,m),U.rotate(x,x,Math.PI/2),U.normalize(x,x),U.scale(c,x,-l),U.add(c,c,i),U.sub(d,c,m);var C=U.dot(d,x);if(c[0]>=m[0]&&c[0]<f[0]&&C<=0){if(p)return!0;S=!0,U.scale(d,x,-C),U.add(_,c,d),U.copy(y,x);var M=this.createContactEquation(r,e,o,t);U.copy(M.normalA,y),U.scale(M.contactPointB,M.normalA,-l),V(M.contactPointB,M.contactPointB,i),H(M.contactPointB,M.contactPointB,e.position),U.copy(M.contactPointA,_),U.sub(M.contactPointA,M.contactPointA,r.position),this.contactEquations.push(M),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}}if(S=!1,0<l)for(w=v;w<=g;w++)if(U.set(m,w*u,h[w]),U.add(m,m,a),U.sub(d,i,m),U.squaredLength(d)<Math.pow(l,2)){if(p)return!0;S=!0;M=this.createContactEquation(r,e,o,t);U.copy(M.normalA,d),U.normalize(M.normalA,M.normalA),U.scale(M.contactPointB,M.normalA,-l),V(M.contactPointB,M.contactPointB,i),H(M.contactPointB,M.contactPointB,e.position),H(M.contactPointA,m,a),V(M.contactPointA,M.contactPointA,a),H(M.contactPointA,M.contactPointA,r.position),this.contactEquations.push(M),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}return S?1:0};var ye=U.create(),xe=U.create(),me=U.create(),fe=new p({vertices:[U.create(),U.create(),U.create(),U.create()]});N.prototype[l.BOX|l.HEIGHTFIELD]=N.prototype[l.CONVEX|l.HEIGHTFIELD]=N.prototype.convexHeightfield=function(e,t,i,n,r,o,a,s,p){var l=o.heights,h=o.elementWidth,u=ye,d=xe,c=me,_=fe,y=Math.floor((e.aabb.lowerBound[0]-a[0])/h),x=Math.ceil((e.aabb.upperBound[0]-a[0])/h);y<0&&(y=0),x>=l.length&&(x=l.length-1);for(var m=l[y],f=l[x],v=y;v<x;v++)l[v]<f&&(f=l[v]),l[v]>m&&(m=l[v]);if(e.aabb.lowerBound[1]>m)return!p&&0;var g=0;for(v=y;v<x;v++){U.set(u,v*h,l[v]),U.set(d,(v+1)*h,l[v+1]),U.add(u,u,a),U.add(d,d,a);U.set(c,.5*(d[0]+u[0]),.5*(d[1]+u[1]-100)),U.sub(_.vertices[0],d,c),U.sub(_.vertices[1],u,c),U.copy(_.vertices[2],_.vertices[1]),U.copy(_.vertices[3],_.vertices[0]),_.vertices[2][1]-=100,_.vertices[3][1]-=100,g+=this.convexConvex(e,t,i,n,r,_,c,0,p)}return g}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../shapes/Box":37,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Shape":45,"../utils/ContactEquationPool":48,"../utils/FrictionEquationPool":49,"../utils/TupleDictionary":56,"../utils/Utils":57}],11:[function(e,t,i){function a(e){e=e||{},this.from=e.from?p.fromValues(e.from[0],e.from[1]):p.create(),this.to=e.to?p.fromValues(e.to[0],e.to[1]):p.create(),this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,this.skipBackfaces=!!e.skipBackfaces,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:-1,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:-1,this.mode=void 0!==e.mode?e.mode:a.ANY,this.callback=e.callback||function(e){},this.direction=p.create(),this.length=1,this.update()}t.exports=a;var p=e("../math/vec2");e("../collision/RaycastResult"),e("../shapes/Shape"),e("../collision/AABB"),(a.prototype.constructor=a).CLOSEST=1,a.ANY=2,a.ALL=4,a.prototype.update=function(){var e=this.direction;p.sub(e,this.to,this.from),this.length=p.length(e),p.normalize(e,e)},a.prototype.intersectBodies=function(e,t){for(var i=0,n=t.length;!e.shouldStop(this)&&i<n;i++){var r=t[i],o=r.getAABB();(0<=o.overlapsRay(this)||o.containsPoint(this.from))&&this.intersectBody(e,r)}};var l=p.create();a.prototype.intersectBody=function(e,t){var i=this.checkCollisionResponse;if(!i||t.collisionResponse)for(var n=l,r=0,o=t.shapes.length;r<o;r++){var a=t.shapes[r];if((!i||a.collisionResponse)&&0!=(this.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&this.collisionMask)){p.rotate(n,a.position,t.angle),p.add(n,n,t.position);var s=a.angle+t.angle;if(this.intersectShape(e,a,s,n,t),e.shouldStop(this))break}}},a.prototype.intersectShape=function(e,t,i,n,r){(function(e,t,i){p.sub(o,i,e);var n=p.dot(o,t);return p.scale(s,t,n),p.add(s,s,e),p.squaredDistance(i,s)})(this.from,this.direction,n)>t.boundingRadius*t.boundingRadius||(this._currentBody=r,(this._currentShape=t).raycast(e,this,n,i),this._currentBody=this._currentShape=null)},a.prototype.getAABB=function(e){var t=this.to,i=this.from;p.set(e.lowerBound,Math.min(t[0],i[0]),Math.min(t[1],i[1])),p.set(e.upperBound,Math.max(t[0],i[0]),Math.max(t[1],i[1]))},p.create(),a.prototype.reportIntersection=function(e,t,i,n){var r=(this.from,this.to,this._currentShape),o=this._currentBody;if(!(this.skipBackfaces&&0<p.dot(i,this.direction)))switch(this.mode){case a.ALL:e.set(i,r,o,t,n),this.callback(e);break;case a.CLOSEST:(t<e.fraction||!e.hasHit())&&e.set(i,r,o,t,n);break;case a.ANY:e.set(i,r,o,t,n)}};var o=p.create(),s=p.create()},{"../collision/AABB":7,"../collision/RaycastResult":12,"../math/vec2":30,"../shapes/Shape":45}],12:[function(e,t,i){function n(){this.normal=o.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}var o=e("../math/vec2"),r=e("../collision/Ray");(t.exports=n).prototype.reset=function(){o.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},n.prototype.getHitDistance=function(e){return o.distance(e.from,e.to)*this.fraction},n.prototype.hasHit=function(){return-1!==this.fraction},n.prototype.getHitPoint=function(e,t){o.lerp(e,t.from,t.to,this.fraction)},n.prototype.stop=function(){this.isStopped=!0},n.prototype.shouldStop=function(e){return this.isStopped||-1!==this.fraction&&e.mode===r.ANY},n.prototype.set=function(e,t,i,n,r){o.copy(this.normal,e),this.shape=t,this.body=i,this.fraction=n,this.faceIndex=r}},{"../collision/Ray":11,"../math/vec2":30}],13:[function(e,t,i){function n(){u.call(this,u.SAP),this.axisList=[],this.axisIndex=0;var i=this;this._addBodyHandler=function(e){i.axisList.push(e.body)},this._removeBodyHandler=function(e){var t=i.axisList.indexOf(e.body);-1!==t&&i.axisList.splice(t,1)}}var r=e("../utils/Utils"),u=e("../collision/Broadphase");(((t.exports=n).prototype=new u).constructor=n).prototype.setWorld=function(e){this.axisList.length=0,r.appendArray(this.axisList,e.bodies),e.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),e.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=e},n.sortAxisList=function(e,t){t|=0;for(var i=1,n=e.length;i<n;i++){for(var r=e[i],o=i-1;0<=o&&!(e[o].aabb.lowerBound[t]<=r.aabb.lowerBound[t]);o--)e[o+1]=e[o];e[o+1]=r}return e},n.prototype.sortList=function(){var e=this.axisList,t=this.axisIndex;n.sortAxisList(e,t)},n.prototype.getCollisionPairs=function(e){var t=this.axisList,i=this.result,n=this.axisIndex;i.length=0;for(var r=t.length;r--;){var o=t[r];o.aabbNeedsUpdate&&o.updateAABB()}this.sortList();for(var a=0,s=0|t.length;a!==s;a++)for(var p=t[a],l=a+1;l<s;l++){var h=t[l];if(!(h.aabb.lowerBound[n]<=p.aabb.upperBound[n]))break;u.canCollide(p,h)&&this.boundingVolumeCheck(p,h)&&i.push(p,h)}return i},n.prototype.aabbQuery=function(e,t,i){i=i||[],this.sortList();var n=this.axisIndex,r="x";1===n&&(r="y"),2===n&&(r="z");for(var o=this.axisList,a=(t.lowerBound[r],t.upperBound[r],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(t)&&i.push(s)}return i}},{"../collision/Broadphase":8,"../utils/Utils":57}],14:[function(e,t,i){function n(e,t,i,n){this.type=i,n=r.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}t.exports=n;var r=e("../utils/Utils");n.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},n.DISTANCE=1,n.GEAR=2,n.LOCK=3,n.PRISMATIC=4,n.REVOLUTE=5,n.prototype.setStiffness=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var n=t[i];n.stiffness=e,n.needsUpdate=!0}},n.prototype.setRelaxation=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var n=t[i];n.relaxation=e,n.needsUpdate=!0}}},{"../utils/Utils":57}],15:[function(e,t,i){function n(e,t,i){i=x.defaults(i,{localAnchorA:[0,0],localAnchorB:[0,0]}),c.call(this,e,t,c.DISTANCE,i),this.localAnchorA=y.fromValues(i.localAnchorA[0],i.localAnchorA[1]),this.localAnchorB=y.fromValues(i.localAnchorB[0],i.localAnchorB[1]);var n,r=this.localAnchorA,o=this.localAnchorB;if(this.distance=0,"number"==typeof i.distance)this.distance=i.distance;else{var a=y.create(),s=y.create(),p=y.create();y.rotate(a,r,e.angle),y.rotate(s,o,t.angle),y.add(p,t.position,s),y.sub(p,p,a),y.sub(p,p,e.position),this.distance=y.length(p)}n=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce;var l=new _(e,t,-n,n);this.equations=[l],this.maxForce=n;p=y.create();var h=y.create(),u=y.create(),d=this;l.computeGq=function(){var e=this.bodyA,t=this.bodyB,i=e.position,n=t.position;return y.rotate(h,r,e.angle),y.rotate(u,o,t.angle),y.add(p,n,u),y.sub(p,p,h),y.sub(p,p,i),y.length(p)-d.distance},this.setMaxForce(n),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var c=e("./Constraint"),_=e("../equations/Equation"),y=e("../math/vec2"),x=e("../utils/Utils");((t.exports=n).prototype=new c).constructor=n;var h=y.create(),u=y.create(),d=y.create();n.prototype.update=function(){var e=this.equations[0],t=this.bodyA,i=this.bodyB,n=(this.distance,t.position),r=i.position,o=this.equations[0],a=e.G;y.rotate(u,this.localAnchorA,t.angle),y.rotate(d,this.localAnchorB,i.angle),y.add(h,r,d),y.sub(h,h,u),y.sub(h,h,n),this.position=y.length(h);var s=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(o.maxForce=0,o.minForce=-this.maxForce,this.distance=this.upperLimit,s=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(o.maxForce=this.maxForce,o.minForce=0,this.distance=this.lowerLimit,s=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||s){o.enabled=!0,y.normalize(h,h);var p=y.crossLength(u,h),l=y.crossLength(d,h);a[0]=-h[0],a[1]=-h[1],a[2]=-p,a[3]=h[0],a[4]=h[1],a[5]=l}else o.enabled=!1},n.prototype.setMaxForce=function(e){var t=this.equations[0];t.minForce=-e,t.maxForce=e},n.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"../equations/Equation":22,"../math/vec2":30,"../utils/Utils":57,"./Constraint":14}],16:[function(e,t,i){function n(e,t,i){i=i||{},r.call(this,e,t,r.GEAR,i),this.ratio=void 0!==i.ratio?i.ratio:1,this.angle=void 0!==i.angle?i.angle:t.angle-this.ratio*e.angle,i.angle=this.angle,i.ratio=this.ratio,this.equations=[new o(e,t,i)],void 0!==i.maxTorque&&this.setMaxTorque(i.maxTorque)}var r=e("./Constraint"),o=(e("../equations/Equation"),e("../equations/AngleLockEquation"));e("../math/vec2"),(((t.exports=n).prototype=new r).constructor=n).prototype.update=function(){var e=this.equations[0];e.ratio!==this.ratio&&e.setRatio(this.ratio),e.angle=this.angle},n.prototype.setMaxTorque=function(e){this.equations[0].setMaxTorque(e)},n.prototype.getMaxTorque=function(e){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":20,"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],17:[function(e,t,i){function n(e,t,i){i=i||{},d.call(this,e,t,d.LOCK,i);var n=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce,r=(i.localAngleB,new _(e,t,-n,n)),o=new _(e,t,-n,n),a=new _(e,t,-n,n),s=c.create(),p=c.create(),l=this;r.computeGq=function(){return c.rotate(s,l.localOffsetB,e.angle),c.sub(p,t.position,e.position),c.sub(p,p,s),p[0]},o.computeGq=function(){return c.rotate(s,l.localOffsetB,e.angle),c.sub(p,t.position,e.position),c.sub(p,p,s),p[1]};var h=c.create(),u=c.create();a.computeGq=function(){return c.rotate(h,l.localOffsetB,t.angle-l.localAngleB),c.scale(h,h,-1),c.sub(p,e.position,t.position),c.add(p,p,h),c.rotate(u,h,-Math.PI/2),c.normalize(u,u),c.dot(p,u)},this.localOffsetB=c.create(),i.localOffsetB?c.copy(this.localOffsetB,i.localOffsetB):(c.sub(this.localOffsetB,t.position,e.position),c.rotate(this.localOffsetB,this.localOffsetB,-e.angle)),this.localAngleB=0,"number"==typeof i.localAngleB?this.localAngleB=i.localAngleB:this.localAngleB=t.angle-e.angle,this.equations.push(r,o,a),this.setMaxForce(n)}var d=e("./Constraint"),c=e("../math/vec2"),_=e("../equations/Equation");(((t.exports=n).prototype=new d).constructor=n).prototype.setMaxForce=function(e){for(var t=this.equations,i=0;i<this.equations.length;i++)t[i].maxForce=e,t[i].minForce=-e},n.prototype.getMaxForce=function(){return this.equations[0].maxForce};var o=c.create(),a=c.create(),s=c.create(),p=c.fromValues(1,0),l=c.fromValues(0,1);n.prototype.update=function(){var e=this.equations[0],t=this.equations[1],i=this.equations[2],n=this.bodyA,r=this.bodyB;c.rotate(o,this.localOffsetB,n.angle),c.rotate(a,this.localOffsetB,r.angle-this.localAngleB),c.scale(a,a,-1),c.rotate(s,a,Math.PI/2),c.normalize(s,s),e.G[0]=-1,e.G[1]=0,e.G[2]=-c.crossLength(o,p),e.G[3]=1,t.G[0]=0,t.G[1]=-1,t.G[2]=-c.crossLength(o,l),t.G[4]=1,i.G[0]=-s[0],i.G[1]=-s[1],i.G[3]=s[0],i.G[4]=s[1],i.G[5]=c.crossLength(a,s)}},{"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],18:[function(e,t,i){function n(n,r,e){e=e||{},y.call(this,n,r,y.PRISMATIC,e);var o=f.fromValues(0,0),a=f.fromValues(1,0),s=f.fromValues(0,0);e.localAnchorA&&f.copy(o,e.localAnchorA),e.localAxisA&&f.copy(a,e.localAxisA),e.localAnchorB&&f.copy(s,e.localAnchorB),this.localAnchorA=o,this.localAnchorB=s,this.localAxisA=a;var t=this.maxForce=void 0!==e.maxForce?e.maxForce:Number.MAX_VALUE,i=new m(n,r,-t,t),p=new f.create,l=new f.create,h=new f.create,u=new f.create;if(i.computeGq=function(){return f.dot(h,u)},i.updateJacobian=function(){var e=this.G,t=n.position,i=r.position;f.rotate(p,o,n.angle),f.rotate(l,s,r.angle),f.add(h,i,l),f.sub(h,h,t),f.sub(h,h,p),f.rotate(u,a,n.angle+Math.PI/2),e[0]=-u[0],e[1]=-u[1],e[2]=-f.crossLength(p,u)+f.crossLength(u,h),e[3]=u[0],e[4]=u[1],e[5]=f.crossLength(l,u)},this.equations.push(i),!e.disableRotationalLock){var d=new v(n,r,-t,t);this.equations.push(d)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==e.lowerLimit,this.upperLimitEnabled=void 0!==e.upperLimit,this.lowerLimit=void 0!==e.lowerLimit?e.lowerLimit:0,this.upperLimit=void 0!==e.upperLimit?e.upperLimit:1,this.upperLimitEquation=new x(n,r),this.lowerLimitEquation=new x(n,r),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=t,this.motorEquation=new m(n,r),this.motorEnabled=!1,this.motorSpeed=0;var c=this,_=this.motorEquation;_.computeGW,_.computeGq=function(){return 0},_.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.velocity,r=i.velocity,o=t.angularVelocity,a=i.angularVelocity;return this.gmult(e,n,o,r,a)+c.motorSpeed}}var y=e("./Constraint"),x=e("../equations/ContactEquation"),m=e("../equations/Equation"),f=e("../math/vec2"),v=e("../equations/RotationalLockEquation");((t.exports=n).prototype=new y).constructor=n;var _=f.create(),g=f.create(),z=f.create(),b=f.create(),w=f.create(),S=f.create();n.prototype.update=function(){var e=this.equations,t=e[0],i=this.upperLimit,n=this.lowerLimit,r=this.upperLimitEquation,o=this.lowerLimitEquation,a=this.bodyA,s=this.bodyB,p=this.localAxisA,l=this.localAnchorA,h=this.localAnchorB;t.updateJacobian(),f.rotate(_,p,a.angle),f.rotate(b,l,a.angle),f.add(g,b,a.position),f.rotate(w,h,s.angle),f.add(z,w,s.position);var u,d=this.position=f.dot(z,_)-f.dot(g,_);if(this.motorEnabled){var c=this.motorEquation.G;c[0]=_[0],c[1]=_[1],c[2]=f.crossLength(_,w),c[3]=-_[0],c[4]=-_[1],c[5]=-f.crossLength(_,b)}this.upperLimitEnabled&&i<d?(f.scale(r.normalA,_,-1),f.sub(r.contactPointA,g,a.position),f.sub(r.contactPointB,z,s.position),f.scale(S,_,i),f.add(r.contactPointA,r.contactPointA,S),-1===e.indexOf(r)&&e.push(r)):-1!==(u=e.indexOf(r))&&e.splice(u,1);this.lowerLimitEnabled&&d<n?(f.scale(o.normalA,_,1),f.sub(o.contactPointA,g,a.position),f.sub(o.contactPointB,z,s.position),f.scale(S,_,n),f.sub(o.contactPointB,o.contactPointB,S),-1===e.indexOf(o)&&e.push(o)):-1!==(u=e.indexOf(o))&&e.splice(u,1)},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},n.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../math/vec2":30,"./Constraint":14}],19:[function(e,t,i){function n(e,t,i){i=i||{},p.call(this,e,t,p.REVOLUTE,i);var n=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE;this.pivotA=c.create(),this.pivotB=c.create(),i.worldPivot?(c.sub(this.pivotA,i.worldPivot,e.position),c.sub(this.pivotB,i.worldPivot,t.position),c.rotate(this.pivotA,this.pivotA,-e.angle),c.rotate(this.pivotB,this.pivotB,-t.angle)):(c.copy(this.pivotA,i.localPivotA),c.copy(this.pivotB,i.localPivotB));var r=this.equations=[new l(e,t,-n,n),new l(e,t,-n,n)],o=r[0],a=r[1],s=this;o.computeGq=function(){return c.rotate(_,s.pivotA,e.angle),c.rotate(y,s.pivotB,t.angle),c.add(d,t.position,y),c.sub(d,d,e.position),c.sub(d,d,_),c.dot(d,x)},a.computeGq=function(){return c.rotate(_,s.pivotA,e.angle),c.rotate(y,s.pivotB,t.angle),c.add(d,t.position,y),c.sub(d,d,e.position),c.sub(d,d,_),c.dot(d,m)},a.minForce=o.minForce=-n,a.maxForce=o.maxForce=n,this.motorEquation=new h(e,t),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new u(e,t),this.lowerLimitEquation=new u(e,t),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var p=e("./Constraint"),l=e("../equations/Equation"),h=e("../equations/RotationalVelocityEquation"),u=e("../equations/RotationalLockEquation"),c=e("../math/vec2");t.exports=n;var _=c.create(),y=c.create(),x=c.fromValues(1,0),m=c.fromValues(0,1),d=c.create();((n.prototype=new p).constructor=n).prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)},n.prototype.update=function(){var e,t=this.bodyA,i=this.bodyB,n=this.pivotA,r=this.pivotB,o=this.equations,a=(o[0],o[1],o[0]),s=o[1],p=this.upperLimit,l=this.lowerLimit,h=this.upperLimitEquation,u=this.lowerLimitEquation,d=this.angle=i.angle-t.angle;this.upperLimitEnabled&&p<d?(h.angle=p,-1===o.indexOf(h)&&o.push(h)):-1!==(e=o.indexOf(h))&&o.splice(e,1);this.lowerLimitEnabled&&d<l?(u.angle=l,-1===o.indexOf(u)&&o.push(u)):-1!==(e=o.indexOf(u))&&o.splice(e,1);c.rotate(_,n,t.angle),c.rotate(y,r,i.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-c.crossLength(_,x),a.G[3]=1,a.G[4]=0,a.G[5]=c.crossLength(y,x),s.G[0]=0,s.G[1]=-1,s.G[2]=-c.crossLength(_,m),s.G[3]=0,s.G[4]=1,s.G[5]=c.crossLength(y,m)},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},n.prototype.motorIsEnabled=function(){return!!this.motorEnabled},n.prototype.setMotorSpeed=function(e){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations[t].relativeVelocity=e}},n.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../equations/RotationalVelocityEquation":25,"../math/vec2":30,"./Constraint":14}],20:[function(e,t,i){function n(e,t,i){i=i||{},r.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0,this.ratio="number"==typeof i.ratio?i.ratio:1,this.setRatio(this.ratio)}var r=e("./Equation");e("../math/vec2"),(((t.exports=n).prototype=new r).constructor=n).prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},n.prototype.setRatio=function(e){var t=this.G;t[2]=e,t[5]=-1,this.ratio=e},n.prototype.setMaxTorque=function(e){this.maxForce=e,this.minForce=-e}},{"../math/vec2":30,"./Equation":22}],21:[function(e,t,i){function n(e,t){r.call(this,e,t,0,Number.MAX_VALUE),this.contactPointA=x.create(),this.penetrationVec=x.create(),this.contactPointB=x.create(),this.normalA=x.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var r=e("./Equation"),x=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeB=function(e,t,i){var n,r,o=this.bodyA,a=this.bodyB,s=this.contactPointA,p=this.contactPointB,l=o.position,h=a.position,u=this.penetrationVec,d=this.normalA,c=this.G,_=x.crossLength(s,d),y=x.crossLength(p,d);return c[0]=-d[0],c[1]=-d[1],c[2]=-_,c[3]=d[0],c[4]=d[1],c[5]=y,x.add(u,h,p),x.sub(u,u,l),x.sub(u,u,s),n=this.firstImpact&&0!==this.restitution?(r=0,1/t*(1+this.restitution)*this.computeGW()):(r=x.dot(d,u)+this.offset,this.computeGW()),-r*e-n*t-i*this.computeGiMf()}},{"../math/vec2":30,"./Equation":22}],22:[function(e,t,i){function o(e,t,i,n){this.minForce=void 0===i?-Number.MAX_VALUE:i,this.maxForce=void 0===n?Number.MAX_VALUE:n,this.bodyA=e,this.bodyB=t,this.stiffness=o.DEFAULT_STIFFNESS,this.relaxation=o.DEFAULT_RELAXATION,this.G=new a.ARRAY_TYPE(6);for(var r=0;r<6;r++)this.G[r]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}t.exports=o;var u=e("../math/vec2"),a=e("../utils/Utils");e("../objects/Body"),(o.prototype.constructor=o).DEFAULT_STIFFNESS=1e6,o.DEFAULT_RELAXATION=4,o.prototype.update=function(){var e=this.stiffness,t=this.relaxation,i=this.timeStep;this.a=4/(i*(1+4*t)),this.b=4*t/(1+4*t),this.epsilon=4/(i*i*e*(1+4*t)),this.needsUpdate=!1},o.prototype.gmult=function(e,t,i,n,r){return e[0]*t[0]+e[1]*t[1]+e[2]*i+e[3]*n[0]+e[4]*n[1]+e[5]*r},o.prototype.computeB=function(e,t,i){var n=this.computeGW();return-this.computeGq()*e-n*t-this.computeGiMf()*i};var s=u.create(),p=u.create();o.prototype.computeGq=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=(t.position,i.position,t.angle),r=i.angle;return this.gmult(e,s,n,p,r)+this.offset},o.prototype.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.velocity,r=i.velocity,o=t.angularVelocity,a=i.angularVelocity;return this.gmult(e,n,o,r,a)+this.relativeVelocity},o.prototype.computeGWlambda=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.vlambda,r=i.vlambda,o=t.wlambda,a=i.wlambda;return this.gmult(e,n,o,r,a)};var d=u.create(),c=u.create();o.prototype.computeGiMf=function(){var e=this.bodyA,t=this.bodyB,i=e.force,n=e.angularForce,r=t.force,o=t.angularForce,a=e.invMassSolve,s=t.invMassSolve,p=e.invInertiaSolve,l=t.invInertiaSolve,h=this.G;return u.scale(d,i,a),u.multiply(d,e.massMultiplier,d),u.scale(c,r,s),u.multiply(c,t.massMultiplier,c),this.gmult(h,d,n*p,c,o*l)},o.prototype.computeGiMGt=function(){var e=this.bodyA,t=this.bodyB,i=e.invMassSolve,n=t.invMassSolve,r=e.invInertiaSolve,o=t.invInertiaSolve,a=this.G;return a[0]*a[0]*i*e.massMultiplier[0]+a[1]*a[1]*i*e.massMultiplier[1]+a[2]*a[2]*r+a[3]*a[3]*n*t.massMultiplier[0]+a[4]*a[4]*n*t.massMultiplier[1]+a[5]*a[5]*o};var _=u.create(),y=u.create(),x=u.create();u.create(),u.create(),u.create(),o.prototype.addToWlambda=function(e){var t=this.bodyA,i=this.bodyB,n=_,r=y,o=x,a=t.invMassSolve,s=i.invMassSolve,p=t.invInertiaSolve,l=i.invInertiaSolve,h=this.G;r[0]=h[0],r[1]=h[1],o[0]=h[3],o[1]=h[4],u.scale(n,r,a*e),u.multiply(n,n,t.massMultiplier),u.add(t.vlambda,t.vlambda,n),t.wlambda+=p*h[2]*e,u.scale(n,o,s*e),u.multiply(n,n,i.massMultiplier),u.add(i.vlambda,i.vlambda,n),i.wlambda+=l*h[5]*e},o.prototype.computeInvC=function(e){return 1/(this.computeGiMGt()+e)}},{"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],23:[function(e,t,i){function n(e,t,i){r.call(this,e,t,-i,i),this.contactPointA=s.create(),this.contactPointB=s.create(),this.t=s.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}var s=e("../math/vec2"),r=e("./Equation");e("../utils/Utils"),(((t.exports=n).prototype=new r).constructor=n).prototype.setSlipForce=function(e){this.maxForce=e,this.minForce=-e},n.prototype.getSlipForce=function(){return this.maxForce},n.prototype.computeB=function(e,t,i){var n=(this.bodyA,this.bodyB,this.contactPointA),r=this.contactPointB,o=this.t,a=this.G;return a[0]=-o[0],a[1]=-o[1],a[2]=-s.crossLength(n,o),a[3]=o[0],a[4]=o[1],a[5]=s.crossLength(r,o),-this.computeGW()*t-i*this.computeGiMf()}},{"../math/vec2":30,"../utils/Utils":57,"./Equation":22}],24:[function(e,t,i){function n(e,t,i){i=i||{},r.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0;var n=this.G;n[2]=1,n[5]=-1}var r=e("./Equation"),o=e("../math/vec2");((t.exports=n).prototype=new r).constructor=n;var a=o.create(),s=o.create(),p=o.fromValues(1,0),l=o.fromValues(0,1);n.prototype.computeGq=function(){return o.rotate(a,p,this.bodyA.angle+this.angle),o.rotate(s,l,this.bodyB.angle),o.dot(a,s)}},{"../math/vec2":30,"./Equation":22}],25:[function(e,t,i){function n(e,t){r.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}var r=e("./Equation");e("../math/vec2"),(((t.exports=n).prototype=new r).constructor=n).prototype.computeB=function(e,t,i){var n=this.G;n[2]=-1,n[5]=this.ratio;var r=this.computeGiMf();return-this.computeGW()*t-i*r}},{"../math/vec2":30,"./Equation":22}],26:[function(e,t,i){var n=function(){};(t.exports=n).prototype={constructor:n,on:function(e,t,i){t.context=i||this,void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this},has:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;if(t){if(void 0!==i[e]&&-1!==i[e].indexOf(t))return!0}else if(void 0!==i[e])return!0;return!1},off:function(e,t){if(void 0===this._listeners)return this;var i=this._listeners,n=i[e].indexOf(t);return-1!==n&&i[e].splice(n,1),this},emit:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=0,n=t.length;i<n;i++){var r=t[i];r.call(r.context,e)}}return this}}},{}],27:[function(e,t,i){function n(e,t,i){if(i=i||{},!(e instanceof r&&t instanceof r))throw new Error("First two arguments must be Material instances.");this.id=n.idCounter++,this.materialA=e,this.materialB=t,this.friction=void 0!==i.friction?Number(i.friction):.3,this.restitution=void 0!==i.restitution?Number(i.restitution):0,this.stiffness=void 0!==i.stiffness?Number(i.stiffness):o.DEFAULT_STIFFNESS,this.relaxation=void 0!==i.relaxation?Number(i.relaxation):o.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==i.frictionStiffness?Number(i.frictionStiffness):o.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==i.frictionRelaxation?Number(i.frictionRelaxation):o.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}var r=e("./Material"),o=e("../equations/Equation");(t.exports=n).idCounter=0},{"../equations/Equation":22,"./Material":28}],28:[function(e,t,i){function n(e){this.id=e||n.idCounter++}(t.exports=n).idCounter=0},{}],29:[function(e,t,i){var f={GetArea:function(e){if(e.length<6)return 0;for(var t=e.length-2,i=0,n=0;n<t;n+=2)i+=(e[n+2]-e[n])*(e[n+1]+e[n+3]);return.5*-(i+=(e[0]-e[t])*(e[t+1]+e[1]))},Triangulate:function(e){var t=e.length>>1;if(t<3)return[];for(var i=[],n=[],r=0;r<t;r++)n.push(r);r=0;for(var o=t;3<o;){var a=n[(r+0)%o],s=n[(r+1)%o],p=n[(r+2)%o],l=e[2*a],h=e[2*a+1],u=e[2*s],d=e[2*s+1],c=e[2*p],_=e[2*p+1],y=!1;if(f._convex(l,h,u,d,c,_)){y=!0;for(var x=0;x<o;x++){var m=n[x];if(m!=a&&m!=s&&m!=p&&f._PointInTriangle(e[2*m],e[2*m+1],l,h,u,d,c,_)){y=!1;break}}}if(y)i.push(a,s,p),n.splice((r+1)%o,1),o--,r=0;else if(r++>3*o)break}return i.push(n[0],n[1],n[2]),i},_PointInTriangle:function(e,t,i,n,r,o,a,s){var p=a-i,l=s-n,h=r-i,u=o-n,d=e-i,c=t-n,_=p*p+l*l,y=p*h+l*u,x=p*d+l*c,m=h*h+u*u,f=h*d+u*c,v=1/(_*m-y*y),g=(m*x-y*f)*v,z=(_*f-y*x)*v;return 0<=g&&0<=z&&g+z<1},_convex:function(e,t,i,n,r,o){return 0<=(t-n)*(r-i)+(i-e)*(o-n)}};t.exports=f},{}],30:[function(e,t,i){var a=t.exports={},n=e("../utils/Utils");a.crossLength=function(e,t){return e[0]*t[1]-e[1]*t[0]},a.crossVZ=function(e,t,i){return a.rotate(e,t,-Math.PI/2),a.scale(e,e,i),e},a.crossZV=function(e,t,i){return a.rotate(e,i,Math.PI/2),a.scale(e,e,t),e},a.rotate=function(e,t,i){if(0!==i){var n=Math.cos(i),r=Math.sin(i),o=t[0],a=t[1];e[0]=n*o-r*a,e[1]=r*o+n*a}else e[0]=t[0],e[1]=t[1]},a.rotate90cw=function(e,t){var i=t[0],n=t[1];e[0]=n,e[1]=-i},a.toLocalFrame=function(e,t,i,n){a.copy(e,t),a.sub(e,e,i),a.rotate(e,e,-n)},a.toGlobalFrame=function(e,t,i,n){a.copy(e,t),a.rotate(e,e,n),a.add(e,e,i)},a.vectorToLocalFrame=function(e,t,i){a.rotate(e,t,-i)},a.vectorToGlobalFrame=function(e,t,i){a.rotate(e,t,i)},a.centroid=function(e,t,i,n){return a.add(e,t,i),a.add(e,e,n),a.scale(e,e,1/3),e},a.create=function(){var e=new n.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var i=new n.ARRAY_TYPE(2);return i[0]=e,i[1]=t,i},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,i){return e[0]=t,e[1]=i,e},a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e},a.subtract=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e},a.sub=a.subtract,a.multiply=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e},a.mul=a.multiply,a.divide=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e},a.div=a.divide,a.scale=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e},a.distance=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)},a.dist=a.distance,a.squaredDistance=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],i=e[1];return Math.sqrt(t*t+i*i)},a.len=a.length,a.squaredLength=function(e){var t=e[0],i=e[1];return t*t+i*i},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.normalize=function(e,t){var i=t[0],n=t[1],r=i*i+n*n;return 0<r&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},a.lerp=function(e,t,i,n){var r=t[0],o=t[1];return e[0]=r+n*(i[0]-r),e[1]=o+n*(i[1]-o),e},a.reflect=function(e,t,i){var n=t[0]*i[0]+t[1]*i[1];e[0]=t[0]-2*i[0]*n,e[1]=t[1]-2*i[1]*n},a.getLineSegmentsIntersection=function(e,t,i,n,r){var o=a.getLineSegmentsIntersectionFraction(t,i,n,r);return!(o<0||(e[0]=t[0]+o*(i[0]-t[0]),e[1]=t[1]+o*(i[1]-t[1]),0))},a.getLineSegmentsIntersectionFraction=function(e,t,i,n){var r,o,a=t[0]-e[0],s=t[1]-e[1],p=n[0]-i[0],l=n[1]-i[1];return r=(-s*(e[0]-i[0])+a*(e[1]-i[1]))/(-p*s+a*l),o=(p*(e[1]-i[1])-l*(e[0]-i[0]))/(-p*s+a*l),0<=r&&r<=1&&0<=o&&o<=1?o:-1}},{"../utils/Utils":57}],31:[function(e,t,i){function s(e){e=e||{},a.call(this),this.id=e.id||++s._idCounter,this.world=null,this.shapes=[],this.mass=e.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!e.fixedRotation,this.fixedX=!!e.fixedX,this.fixedY=!!e.fixedY,this.massMultiplier=u.create(),this.position=u.fromValues(0,0),e.position&&u.copy(this.position,e.position),this.interpolatedPosition=u.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=u.fromValues(0,0),this.previousAngle=0,this.velocity=u.fromValues(0,0),e.velocity&&u.copy(this.velocity,e.velocity),this.vlambda=u.fromValues(0,0),this.wlambda=0,this.angle=e.angle||0,this.angularVelocity=e.angularVelocity||0,this.force=u.create(),e.force&&u.copy(this.force,e.force),this.angularForce=e.angularForce||0,this.damping="number"==typeof e.damping?e.damping:.1,this.angularDamping="number"==typeof e.angularDamping?e.angularDamping:.1,this.type=s.STATIC,void 0!==e.type?this.type=e.type:e.mass?this.type=s.DYNAMIC:this.type=s.STATIC,this.boundingRadius=0,this.aabb=new o,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.wantsToSleep=!1,this.sleepState=s.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.gravityScale=void 0!==e.gravityScale?e.gravityScale:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==e.ccdSpeedThreshold?e.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==e.ccdIterations?e.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var u=e("../math/vec2"),l=e("poly-decomp"),h=e("../shapes/Convex"),n=e("../collision/RaycastResult"),r=e("../collision/Ray"),o=e("../collision/AABB"),a=e("../events/EventEmitter");(((t.exports=s).prototype=new a).constructor=s)._idCounter=0,s.prototype.updateSolveMassProperties=function(){this.sleepState===s.SLEEPING||this.type===s.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},s.prototype.setDensity=function(e){var t=this.getArea();this.mass=t*e,this.updateMassProperties()},s.prototype.getArea=function(){for(var e=0,t=0;t<this.shapes.length;t++)e+=this.shapes[t].area;return e},s.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var p=new o,d=u.create();s.prototype.updateAABB=function(){for(var e=this.shapes,t=e.length,i=d,n=this.angle,r=0;r!==t;r++){var o=e[r],a=o.angle+n;u.rotate(i,o.position,n),u.add(i,i,this.position),o.computeAABB(p,i,a),0===r?this.aabb.copy(p):this.aabb.extend(p)}this.aabbNeedsUpdate=!1},s.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=e.length,i=0,n=0;n!==t;n++){var r=e[n],o=u.length(r.position),a=r.boundingRadius;i<o+a&&(i=o+a)}this.boundingRadius=i},s.prototype.addShape=function(e,t,i){if(e.body)throw new Error("A shape can only be added to one body.");e.body=this,t?u.copy(e.position,t):u.set(e.position,0,0),e.angle=i||0,this.shapes.push(e),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},s.prototype.removeShape=function(e){var t=this.shapes.indexOf(e);return-1!==t&&(this.shapes.splice(t,1),this.aabbNeedsUpdate=!0,!(e.body=null))},s.prototype.updateMassProperties=function(){if(this.type===s.STATIC||this.type===s.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var e=this.shapes,t=e.length,i=this.mass/t,n=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var r=0;r<t;r++){var o=e[r],a=u.squaredLength(o.position);n+=o.computeMomentOfInertia(i)+i*a}this.inertia=n,this.invInertia=0<n?1/n:0}this.invMass=1/this.mass,u.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}},u.create(),s.prototype.applyForce=function(e,t){if(u.add(this.force,this.force,e),t){var i=u.crossLength(t,e);this.angularForce+=i}};var c=u.create(),_=u.create(),y=u.create();s.prototype.applyForceLocal=function(e,t){t=t||y;var i=c,n=_;this.vectorToWorldFrame(i,e),this.vectorToWorldFrame(n,t),this.applyForce(i,n)};var x=u.create();s.prototype.applyImpulse=function(e,t){if(this.type===s.DYNAMIC){var i=x;if(u.scale(i,e,this.invMass),u.multiply(i,this.massMultiplier,i),u.add(this.velocity,i,this.velocity),t){var n=u.crossLength(t,e);n*=this.invInertia,this.angularVelocity+=n}}};var m=u.create(),f=u.create(),v=u.create();s.prototype.applyImpulseLocal=function(e,t){t=t||v;var i=m,n=f;this.vectorToWorldFrame(i,e),this.vectorToWorldFrame(n,t),this.applyImpulse(i,n)},s.prototype.toLocalFrame=function(e,t){u.toLocalFrame(e,t,this.position,this.angle)},s.prototype.toWorldFrame=function(e,t){u.toGlobalFrame(e,t,this.position,this.angle)},s.prototype.vectorToLocalFrame=function(e,t){u.vectorToLocalFrame(e,t,this.angle)},s.prototype.vectorToWorldFrame=function(e,t){u.vectorToGlobalFrame(e,t,this.angle)},s.prototype.fromPolygon=function(e,t){t=t||{};for(var i=this.shapes.length;0<=i;--i)this.removeShape(this.shapes[i]);var n,r=new l.Polygon;if(r.vertices=e,r.makeCCW(),"number"==typeof t.removeCollinearPoints&&r.removeCollinearPoints(t.removeCollinearPoints),void 0===t.skipSimpleCheck&&!r.isSimple())return!1;this.concavePath=r.vertices.slice(0);for(i=0;i<this.concavePath.length;i++){var o=[0,0];u.copy(o,this.concavePath[i]),this.concavePath[i]=o}n=t.optimalDecomp?r.decomp():r.quickDecomp();var a=u.create();for(i=0;i!==n.length;i++){for(var s=new h({vertices:n[i].vertices}),p=0;p!==s.vertices.length;p++){o=s.vertices[p];u.sub(o,o,s.centerOfMass)}u.scale(a,s.centerOfMass,1),s.updateTriangles(),s.updateCenterOfMass(),s.updateBoundingRadius(),this.addShape(s,a)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0};var g=(u.fromValues(0,0),u.fromValues(0,0)),z=u.fromValues(0,0),b=u.fromValues(0,0);s.prototype.adjustCenterOfMass=function(){var e=g,t=z,i=b,n=0;u.set(t,0,0);for(var r=0;r!==this.shapes.length;r++){var o=this.shapes[r];u.scale(e,o.position,o.area),u.add(t,t,e),n+=o.area}u.scale(i,t,1/n);for(r=0;r!==this.shapes.length;r++){o=this.shapes[r];u.sub(o.position,o.position,i)}u.add(this.position,this.position,i);for(r=0;this.concavePath&&r<this.concavePath.length;r++)u.sub(this.concavePath[r],this.concavePath[r],i);this.updateMassProperties(),this.updateBoundingRadius()},s.prototype.setZeroForce=function(){u.set(this.force,0,0),this.angularForce=0},s.prototype.resetConstraintVelocity=function(){var e=this.vlambda;u.set(e,0,0),this.wlambda=0},s.prototype.addConstraintVelocity=function(){var e=this.velocity;u.add(e,e,this.vlambda),this.angularVelocity+=this.wlambda},s.prototype.applyDamping=function(e){if(this.type===s.DYNAMIC){var t=this.velocity;u.scale(t,t,Math.pow(1-this.damping,e)),this.angularVelocity*=Math.pow(1-this.angularDamping,e)}},s.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=s.AWAKE,this.idleTime=0,e!==s.AWAKE&&this.emit(s.wakeUpEvent)},s.prototype.sleep=function(){this.sleepState=s.SLEEPING,this.angularVelocity=0,this.angularForce=0,u.set(this.velocity,0,0),u.set(this.force,0,0),this.emit(s.sleepEvent)},s.prototype.sleepTick=function(e,t,i){this.allowSleep&&this.type!==s.SLEEPING&&(this.wantsToSleep=!1,this.sleepState,u.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=s.AWAKE):(this.idleTime+=i,this.sleepState=s.SLEEPY),this.idleTime>this.sleepTimeLimit&&(t?this.wantsToSleep=!0:this.sleep()))},s.prototype.overlaps=function(e){return this.world.overlapKeeper.bodiesAreOverlapping(this,e)};var w=u.create(),S=u.create();s.prototype.integrate=function(e){var t=this.invMass,i=this.force,n=this.position,r=this.velocity;u.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*e),u.scale(w,i,e*t),u.multiply(w,this.massMultiplier,w),u.add(r,w,r),this.integrateToTimeOfImpact(e)||(u.scale(S,r,e),u.add(n,n,S),this.fixedRotation||(this.angle+=this.angularVelocity*e)),this.aabbNeedsUpdate=!0};var C=new n,M=new r({mode:r.ALL}),P=u.create(),k=u.create(),T=u.create(),G=u.create();s.prototype.integrateToTimeOfImpact=function(e){if(this.ccdSpeedThreshold<0||u.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;u.normalize(P,this.velocity),u.scale(k,this.velocity,e),u.add(k,k,this.position),u.sub(T,k,this.position);var t,i=this.angularVelocity*e,n=u.length(T),r=1,o=this;if(C.reset(),M.callback=function(e){e.body!==o&&(t=e.body,e.getHitPoint(k,M),u.sub(T,k,o.position),r=u.length(T)/n,e.stop())},u.copy(M.from,this.position),u.copy(M.to,k),M.update(),this.world.raycast(C,M),!t)return!1;var a=this.angle;u.copy(G,this.position);for(var s=0,p=0,l=0,h=r;p<=h&&s<this.ccdIterations;)s++,l=(h-p)/2,u.scale(S,T,r),u.add(this.position,G,S),this.angle=a+i*r,this.updateAABB(),this.aabb.overlaps(t.aabb)&&this.world.narrowphase.bodiesOverlap(this,t)?p=l:h=l;return r=l,u.copy(this.position,G),this.angle=a,u.scale(S,T,r),u.add(this.position,this.position,S),this.fixedRotation||(this.angle+=i*r),!0},s.prototype.getVelocityAtPoint=function(e,t){return u.crossVZ(e,t,this.angularVelocity),u.subtract(e,this.velocity,e),e},s.sleepyEvent={type:"sleepy"},s.sleepEvent={type:"sleep"},s.wakeUpEvent={type:"wakeup"},s.DYNAMIC=1,s.STATIC=2,s.KINEMATIC=4,s.AWAKE=0,s.SLEEPY=1,s.SLEEPING=2},{"../collision/AABB":7,"../collision/Ray":11,"../collision/RaycastResult":12,"../events/EventEmitter":26,"../math/vec2":30,"../shapes/Convex":40,"poly-decomp":5}],32:[function(e,t,i){function n(e,t,i){i=i||{},a.call(this,e,t,i),this.localAnchorA=m.fromValues(0,0),this.localAnchorB=m.fromValues(0,0),i.localAnchorA&&m.copy(this.localAnchorA,i.localAnchorA),i.localAnchorB&&m.copy(this.localAnchorB,i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB);var n=m.create(),r=m.create();this.getWorldAnchorA(n),this.getWorldAnchorB(r);var o=m.distance(n,r);this.restLength="number"==typeof i.restLength?i.restLength:o}var m=e("../math/vec2"),a=e("./Spring");e("../utils/Utils"),(((t.exports=n).prototype=new a).constructor=n).prototype.setWorldAnchorA=function(e){this.bodyA.toLocalFrame(this.localAnchorA,e)},n.prototype.setWorldAnchorB=function(e){this.bodyB.toLocalFrame(this.localAnchorB,e)},n.prototype.getWorldAnchorA=function(e){this.bodyA.toWorldFrame(e,this.localAnchorA)},n.prototype.getWorldAnchorB=function(e){this.bodyB.toWorldFrame(e,this.localAnchorB)};var f=m.create(),v=m.create(),g=m.create(),z=m.create(),b=m.create(),w=m.create(),S=m.create(),C=m.create(),M=m.create();n.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restLength,n=this.bodyA,r=this.bodyB,o=f,a=v,s=g,p=z,l=M,h=b,u=w,d=S,c=C;this.getWorldAnchorA(h),this.getWorldAnchorB(u),m.sub(d,h,n.position),m.sub(c,u,r.position),m.sub(o,u,h);var _=m.len(o);m.normalize(a,o),m.sub(s,r.velocity,n.velocity),m.crossZV(l,r.angularVelocity,c),m.add(s,s,l),m.crossZV(l,n.angularVelocity,d),m.sub(s,s,l),m.scale(p,a,-e*(_-i)-t*m.dot(s,a)),m.sub(n.force,n.force,p),m.add(r.force,r.force,p);var y=m.crossLength(d,p),x=m.crossLength(c,p);n.angularForce-=y,r.angularForce+=x}},{"../math/vec2":30,"../utils/Utils":57,"./Spring":34}],33:[function(e,t,i){function n(e,t,i){i=i||{},r.call(this,e,t,i),this.restAngle="number"==typeof i.restAngle?i.restAngle:t.angle-e.angle}var r=(e("../math/vec2"),e("./Spring"));(((t.exports=n).prototype=new r).constructor=n).prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restAngle,n=this.bodyA,r=this.bodyB,o=-e*(r.angle-n.angle-i)-t*(r.angularVelocity-n.angularVelocity)*0;n.angularForce-=o,r.angularForce+=o}},{"../math/vec2":30,"./Spring":34}],34:[function(e,t,i){function n(e,t,i){i=r.defaults(i,{stiffness:100,damping:1}),this.stiffness=i.stiffness,this.damping=i.damping,this.bodyA=e,this.bodyB=t}var r=(e("../math/vec2"),e("../utils/Utils"));(t.exports=n).prototype.applyForce=function(){}},{"../math/vec2":30,"../utils/Utils":57}],35:[function(e,t,i){function n(e,t){t=t||{},this.chassisBody=e,this.wheels=[],this.groundBody=new p({mass:0}),this.world=null;var i=this;this.preStepCallback=function(){i.update()}}function r(e,t){t=t||{},this.vehicle=e,this.forwardEquation=new s(e.chassisBody,e.groundBody),this.sideEquation=new s(e.chassisBody,e.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==t.sideFriction?t.sideFriction:5),this.localForwardVector=o.fromValues(0,1),t.localForwardVector&&o.copy(this.localForwardVector,t.localForwardVector),this.localPosition=o.fromValues(0,0),t.localPosition&&o.copy(this.localPosition,t.localPosition),a.apply(this,e.chassisBody,e.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}var o=e("../math/vec2"),a=(e("../utils/Utils"),e("../constraints/Constraint")),s=e("../equations/FrictionEquation"),p=e("../objects/Body");(t.exports=n).prototype.addToWorld=function(e){(this.world=e).addBody(this.groundBody),e.on("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.addConstraint(i)}},n.prototype.removeFromWorld=function(){var e=this.world;e.removeBody(this.groundBody),e.off("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.removeConstraint(i)}this.world=null},n.prototype.addWheel=function(e){var t=new r(this,e);return this.wheels.push(t),t},n.prototype.update=function(){for(var e=0;e<this.wheels.length;e++)this.wheels[e].update()},(r.prototype=new a).setBrakeForce=function(e){this.forwardEquation.setSlipForce(e)},r.prototype.setSideFriction=function(e){this.sideEquation.setSlipForce(e)};var l=o.create(),h=o.create();r.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(h,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(l,h),o.dot(l,h)};var u=o.create();r.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),o.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),o.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),o.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),o.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),o.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),o.normalize(u,this.forwardEquation.t),o.scale(u,u,this.engineForce),this.vehicle.chassisBody.applyForce(u,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":14,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],36:[function(e,t,i){var n=t.exports={AABB:e("./collision/AABB"),AngleLockEquation:e("./equations/AngleLockEquation"),Body:e("./objects/Body"),Broadphase:e("./collision/Broadphase"),Capsule:e("./shapes/Capsule"),Circle:e("./shapes/Circle"),Constraint:e("./constraints/Constraint"),ContactEquation:e("./equations/ContactEquation"),ContactEquationPool:e("./utils/ContactEquationPool"),ContactMaterial:e("./material/ContactMaterial"),Convex:e("./shapes/Convex"),DistanceConstraint:e("./constraints/DistanceConstraint"),Equation:e("./equations/Equation"),EventEmitter:e("./events/EventEmitter"),FrictionEquation:e("./equations/FrictionEquation"),FrictionEquationPool:e("./utils/FrictionEquationPool"),GearConstraint:e("./constraints/GearConstraint"),GSSolver:e("./solver/GSSolver"),Heightfield:e("./shapes/Heightfield"),Line:e("./shapes/Line"),LockConstraint:e("./constraints/LockConstraint"),Material:e("./material/Material"),Narrowphase:e("./collision/Narrowphase"),NaiveBroadphase:e("./collision/NaiveBroadphase"),Particle:e("./shapes/Particle"),Plane:e("./shapes/Plane"),Pool:e("./utils/Pool"),RevoluteConstraint:e("./constraints/RevoluteConstraint"),PrismaticConstraint:e("./constraints/PrismaticConstraint"),Ray:e("./collision/Ray"),RaycastResult:e("./collision/RaycastResult"),Box:e("./shapes/Box"),RotationalVelocityEquation:e("./equations/RotationalVelocityEquation"),SAPBroadphase:e("./collision/SAPBroadphase"),Shape:e("./shapes/Shape"),Solver:e("./solver/Solver"),Spring:e("./objects/Spring"),TopDownVehicle:e("./objects/TopDownVehicle"),LinearSpring:e("./objects/LinearSpring"),RotationalSpring:e("./objects/RotationalSpring"),Utils:e("./utils/Utils"),World:e("./world/World"),vec2:e("./math/vec2"),version:e("../package.json").version};Object.defineProperty(n,"Rectangle",{get:function(){return this.Box}})},{"../package.json":6,"./collision/AABB":7,"./collision/Broadphase":8,"./collision/NaiveBroadphase":9,"./collision/Narrowphase":10,"./collision/Ray":11,"./collision/RaycastResult":12,"./collision/SAPBroadphase":13,"./constraints/Constraint":14,"./constraints/DistanceConstraint":15,"./constraints/GearConstraint":16,"./constraints/LockConstraint":17,"./constraints/PrismaticConstraint":18,"./constraints/RevoluteConstraint":19,"./equations/AngleLockEquation":20,"./equations/ContactEquation":21,"./equations/Equation":22,"./equations/FrictionEquation":23,"./equations/RotationalVelocityEquation":25,"./events/EventEmitter":26,"./material/ContactMaterial":27,"./material/Material":28,"./math/vec2":30,"./objects/Body":31,"./objects/LinearSpring":32,"./objects/RotationalSpring":33,"./objects/Spring":34,"./objects/TopDownVehicle":35,"./shapes/Box":37,"./shapes/Capsule":38,"./shapes/Circle":39,"./shapes/Convex":40,"./shapes/Heightfield":41,"./shapes/Line":42,"./shapes/Particle":43,"./shapes/Plane":44,"./shapes/Shape":45,"./solver/GSSolver":46,"./solver/Solver":47,"./utils/ContactEquationPool":48,"./utils/FrictionEquationPool":49,"./utils/Pool":55,"./utils/Utils":57,"./world/World":61}],37:[function(e,t,i){function n(e){"number"==typeof e&&"number"==typeof arguments[1]&&(e={width:e,height:arguments[1]}),e=e||{};var t=this.width=e.width||1,i=this.height=e.height||1,n=[o.fromValues(-t/2,-i/2),o.fromValues(t/2,-i/2),o.fromValues(t/2,i/2),o.fromValues(-t/2,i/2)],r=[o.fromValues(1,0),o.fromValues(0,1)];e.vertices=n,e.axes=r,e.type=a.BOX,s.call(this,e)}var o=e("../math/vec2"),a=e("./Shape"),s=e("./Convex");(((t.exports=n).prototype=new s).constructor=n).prototype.computeMomentOfInertia=function(e){var t=this.width,i=this.height;return e*(i*i+t*t)/12},n.prototype.updateBoundingRadius=function(){var e=this.width,t=this.height;this.boundingRadius=Math.sqrt(e*e+t*t)/2},o.create(),o.create(),o.create(),o.create(),n.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)},n.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":30,"./Convex":40,"./Shape":45}],38:[function(e,t,i){function n(e){"number"==typeof e&&"number"==typeof arguments[1]&&(e={length:e,radius:arguments[1]}),e=e||{},this.length=e.length||1,this.radius=e.radius||1,e.type=r.CAPSULE,r.call(this,e)}var r=e("./Shape"),b=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){var t=this.radius,i=this.length+t,n=2*t;return e*(n*n+i*i)/12},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},n.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var o=b.create();n.prototype.computeAABB=function(e,t,i){var n=this.radius;b.set(o,this.length/2,0),0!==i&&b.rotate(o,o,i),b.set(e.upperBound,Math.max(o[0]+n,-o[0]+n),Math.max(o[1]+n,-o[1]+n)),b.set(e.lowerBound,Math.min(o[0]-n,-o[0]-n),Math.min(o[1]-n,-o[1]-n)),b.add(e.lowerBound,e.lowerBound,t),b.add(e.upperBound,e.upperBound,t)};var w=b.create(),S=b.create(),C=b.create(),M=b.create(),P=b.fromValues(0,1);n.prototype.raycast=function(e,t,i,n){for(var r=t.from,o=t.to,a=(t.direction,w),s=S,p=C,l=M,h=this.length/2,u=0;u<2;u++){var d=this.radius*(2*u-1);if(b.set(p,-h,d),b.set(l,h,d),b.toGlobalFrame(p,p,i,n),b.toGlobalFrame(l,l,i,n),0<=(_=b.getLineSegmentsIntersectionFraction(r,o,p,l))&&(b.rotate(s,P,n),b.scale(s,s,2*u-1),t.reportIntersection(e,_,s,-1),e.shouldStop(t)))return}var c=Math.pow(this.radius,2)+Math.pow(h,2);for(u=0;u<2;u++){b.set(p,h*(2*u-1),0),b.toGlobalFrame(p,p,i,n);var _,y=Math.pow(o[0]-r[0],2)+Math.pow(o[1]-r[1],2),x=2*((o[0]-r[0])*(r[0]-p[0])+(o[1]-r[1])*(r[1]-p[1])),m=Math.pow(r[0]-p[0],2)+Math.pow(r[1]-p[1],2)-Math.pow(this.radius,2);if(!((_=Math.pow(x,2)-4*y*m)<0))if(0===_){if(b.lerp(a,r,o,_),b.squaredDistance(a,i)>c&&(b.sub(s,a,p),b.normalize(s,s),t.reportIntersection(e,_,s,-1),e.shouldStop(t)))return}else{var f=Math.sqrt(_),v=1/(2*y),g=(-x-f)*v,z=(-x+f)*v;if(0<=g&&g<=1&&(b.lerp(a,r,o,g),b.squaredDistance(a,i)>c&&(b.sub(s,a,p),b.normalize(s,s),t.reportIntersection(e,g,s,-1),e.shouldStop(t))))return;if(0<=z&&z<=1&&(b.lerp(a,r,o,z),b.squaredDistance(a,i)>c&&(b.sub(s,a,p),b.normalize(s,s),t.reportIntersection(e,z,s,-1),e.shouldStop(t))))return}}}},{"../math/vec2":30,"./Shape":45}],39:[function(e,t,i){function n(e){"number"==typeof e&&(e={radius:e}),e=e||{},this.radius=e.radius||1,e.type=r.CIRCLE,r.call(this,e)}var r=e("./Shape"),m=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){var t=this.radius;return e*t*t/2},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},n.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},n.prototype.computeAABB=function(e,t,i){var n=this.radius;m.set(e.upperBound,n,n),m.set(e.lowerBound,-n,-n),t&&(m.add(e.lowerBound,e.lowerBound,t),m.add(e.upperBound,e.upperBound,t))};var f=m.create(),v=m.create();n.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=this.radius,s=Math.pow(o[0]-r[0],2)+Math.pow(o[1]-r[1],2),p=2*((o[0]-r[0])*(r[0]-i[0])+(o[1]-r[1])*(r[1]-i[1])),l=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)-Math.pow(a,2),h=Math.pow(p,2)-4*s*l,u=f,d=v;if(!(h<0))if(0===h)m.lerp(u,r,o,h),m.sub(d,u,i),m.normalize(d,d),t.reportIntersection(e,h,d,-1);else{var c=Math.sqrt(h),_=1/(2*s),y=(-p-c)*_,x=(-p+c)*_;if(0<=y&&y<=1&&(m.lerp(u,r,o,y),m.sub(d,u,i),m.normalize(d,d),t.reportIntersection(e,y,d,-1),e.shouldStop(t)))return;0<=x&&x<=1&&(m.lerp(u,r,o,x),m.sub(d,u,i),m.normalize(d,d),t.reportIntersection(e,x,d,-1))}}},{"../math/vec2":30,"./Shape":45}],40:[function(e,t,i){function d(e){Array.isArray(e)&&(e={vertices:e,axes:arguments[1]}),e=e||{},this.vertices=[];for(var t=void 0!==e.vertices?e.vertices:[],i=0;i<t.length;i++){var n=c.create();c.copy(n,t[i]),this.vertices.push(n)}if(this.axes=[],e.axes)for(i=0;i<e.axes.length;i++){var r=c.create();c.copy(r,e.axes[i]),this.axes.push(r)}else for(i=0;i<this.vertices.length;i++){var o=this.vertices[i],a=this.vertices[(i+1)%this.vertices.length],s=c.create();c.sub(s,a,o),c.rotate90cw(s,s),c.normalize(s,s),this.axes.push(s)}if(this.centerOfMass=c.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,e.type=p.CONVEX,p.call(this,e),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}var p=e("./Shape"),c=e("../math/vec2"),s=e("../math/polyk");e("poly-decomp"),((t.exports=d).prototype=new p).constructor=d;var l=c.create(),a=c.create();d.prototype.projectOntoLocalAxis=function(e,t){for(var i,n,r=null,o=null,a=(e=l,0);a<this.vertices.length;a++)i=this.vertices[a],n=c.dot(i,e),(null===r||r<n)&&(r=n),(null===o||n<o)&&(o=n);if(r<o){var s=o;o=r,r=s}c.set(t,o,r)},d.prototype.projectOntoWorldAxis=function(e,t,i,n){var r=a;this.projectOntoLocalAxis(e,n),0!==i?c.rotate(r,e,i):r=e;var o=c.dot(t,r);c.set(n,n[0]+o,n[1]+o)},d.prototype.updateTriangles=function(){for(var e=[],t=this.triangles.length=0;t<this.vertices.length;t++){var i=this.vertices[t];e.push(i[0],i[1])}var n=s.Triangulate(e);for(t=0;t<n.length;t+=3){var r=n[t],o=n[t+1],a=n[t+2];this.triangles.push([r,o,a])}};var _=c.create(),y=c.create(),x=c.create(),m=c.create(),f=c.create();c.create(),c.create(),c.create(),c.create(),d.prototype.updateCenterOfMass=function(){var e=this.triangles,t=this.vertices,i=this.centerOfMass,n=_,r=x,o=m,a=f,s=y;c.set(i,0,0);for(var p=0,l=0;l!==e.length;l++){var h=e[l];r=t[h[0]],o=t[h[1]],a=t[h[2]];c.centroid(n,r,o,a);var u=d.triangleArea(r,o,a);p+=u,c.scale(s,n,u),c.add(i,i,s)}c.scale(i,i,1/p)},d.prototype.computeMomentOfInertia=function(e){for(var t=0,i=0,n=this.vertices.length,r=n-1,o=0;o<n;r=o,o++){var a=this.vertices[r],s=this.vertices[o],p=Math.abs(c.crossLength(a,s));t+=p*(c.dot(s,s)+c.dot(s,a)+c.dot(a,a)),i+=p}return e/6*(t/i)},d.prototype.updateBoundingRadius=function(){for(var e=this.vertices,t=0,i=0;i!==e.length;i++){var n=c.squaredLength(e[i]);t<n&&(t=n)}this.boundingRadius=Math.sqrt(t)},d.triangleArea=function(e,t,i){return.5*((t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1]))},d.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var e=this.triangles,t=this.vertices,i=0;i!==e.length;i++){var n=e[i],r=t[n[0]],o=t[n[1]],a=t[n[2]],s=d.triangleArea(r,o,a);this.area+=s}},d.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)};var v=c.create(),g=c.create(),z=c.create();d.prototype.raycast=function(e,t,i,n){var r=v,o=g,a=z,s=this.vertices;c.toLocalFrame(r,t.from,i,n),c.toLocalFrame(o,t.to,i,n);for(var p=s.length,l=0;l<p&&!e.shouldStop(t);l++){var h=s[l],u=s[(l+1)%p],d=c.getLineSegmentsIntersectionFraction(r,o,h,u);0<=d&&(c.sub(a,u,h),c.rotate(a,a,-Math.PI/2+n),c.normalize(a,a),t.reportIntersection(e,d,a,l))}}},{"../math/polyk":29,"../math/vec2":30,"./Shape":45,"poly-decomp":5}],41:[function(e,t,i){function n(e){if(Array.isArray(e)&&(e={heights:e},"object"==typeof arguments[1]))for(var t in arguments[1])e[t]=arguments[1][t];e=e||{},this.heights=e.heights?e.heights.slice(0):[],this.maxValue=e.maxValue||null,this.minValue=e.minValue||null,this.elementWidth=e.elementWidth||.1,void 0!==e.maxValue&&void 0!==e.minValue||this.updateMaxMinValues(),e.type=r.HEIGHTFIELD,r.call(this,e)}var r=e("./Shape"),x=e("../math/vec2");e("../utils/Utils"),(((t.exports=n).prototype=new r).constructor=n).prototype.updateMaxMinValues=function(){for(var e=this.heights,t=e[0],i=e[0],n=0;n!==e.length;n++){var r=e[n];t<r&&(t=r),r<i&&(i=r)}this.maxValue=t,this.minValue=i},n.prototype.computeMomentOfInertia=function(e){return Number.MAX_VALUE},n.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},n.prototype.updateArea=function(){for(var e=this.heights,t=0,i=0;i<e.length-1;i++)t+=(e[i]+e[i+1])/2*this.elementWidth;this.area=t};var o=[x.create(),x.create(),x.create(),x.create()];n.prototype.computeAABB=function(e,t,i){x.set(o[0],0,this.maxValue),x.set(o[1],this.elementWidth*this.heights.length,this.maxValue),x.set(o[2],this.elementWidth*this.heights.length,this.minValue),x.set(o[3],0,this.minValue),e.setFromPoints(o,t,i)},n.prototype.getLineSegment=function(e,t,i){var n=this.heights,r=this.elementWidth;x.set(e,i*r,n[i]),x.set(t,(i+1)*r,n[i+1])},n.prototype.getSegmentIndex=function(e){return Math.floor(e[0]/this.elementWidth)},n.prototype.getClampedSegmentIndex=function(e){var t=this.getSegmentIndex(e);return Math.min(this.heights.length,Math.max(t,0))};var m=(x.create(),x.create()),f=x.create(),v=x.create(),g=x.create(),z=x.create();x.fromValues(0,1),n.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=(t.direction,m),s=f,p=v,l=g,h=z;x.toLocalFrame(l,r,i,n),x.toLocalFrame(h,o,i,n);var u=this.getClampedSegmentIndex(l),d=this.getClampedSegmentIndex(h);if(d<u){var c=u;u=d,d=c}for(var _=0;_<this.heights.length-1;_++){this.getLineSegment(s,p,_);var y=x.getLineSegmentsIntersectionFraction(l,h,s,p);if(0<=y&&(x.sub(a,p,s),x.rotate(a,a,n+Math.PI/2),x.normalize(a,a),t.reportIntersection(e,y,a,-1),e.shouldStop(t)))return}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],42:[function(e,t,i){function n(e){"number"==typeof e&&(e={length:e}),e=e||{},this.length=e.length||1,e.type=r.LINE,r.call(this,e)}var r=e("./Shape"),u=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){return e*Math.pow(this.length,2)/12},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var o=[u.create(),u.create()];n.prototype.computeAABB=function(e,t,i){var n=this.length/2;u.set(o[0],-n,0),u.set(o[1],n,0),e.setFromPoints(o,t,i,0)};var d=(u.create(),u.create()),c=u.create(),_=u.create(),y=u.fromValues(0,1);n.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=c,s=_,p=this.length/2;u.set(a,-p,0),u.set(s,p,0),u.toGlobalFrame(a,a,i,n),u.toGlobalFrame(s,s,i,n);var l=u.getLineSegmentsIntersectionFraction(a,s,r,o);if(0<=l){var h=d;u.rotate(h,y,n),t.reportIntersection(e,l,h,-1)}}},{"../math/vec2":30,"./Shape":45}],43:[function(e,t,i){function n(e){(e=e||{}).type=r.PARTICLE,r.call(this,e)}var r=e("./Shape"),o=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){return 0},n.prototype.updateBoundingRadius=function(){this.boundingRadius=0},n.prototype.computeAABB=function(e,t,i){o.copy(e.lowerBound,t),o.copy(e.upperBound,t)}},{"../math/vec2":30,"./Shape":45}],44:[function(e,t,i){function n(e){(e=e||{}).type=r.PLANE,r.call(this,e)}var r=e("./Shape"),c=e("../math/vec2");e("../utils/Utils"),(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){return 0},n.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},n.prototype.computeAABB=function(e,t,i){var n=i%(2*Math.PI),r=c.set,o=Number.MAX_VALUE,a=e.lowerBound,s=e.upperBound;0===n?(r(a,-o,-o),r(s,o,0)):n===Math.PI/2?(r(a,0,-o),r(s,o,o)):n===Math.PI?(r(a,-o,0),r(s,o,o)):n===3*Math.PI/2?(r(a,-o,-o),r(s,0,o)):(r(a,-o,-o),r(s,o,o)),c.add(a,a,t),c.add(s,s,t)},n.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var _=c.create(),y=(c.create(),c.create(),c.create()),x=c.create();n.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=t.direction,s=_,p=y,l=x;c.set(p,0,1),c.rotate(p,p,n),c.sub(l,r,i);var h=c.dot(l,p);if(c.sub(l,o,i),!(0<h*c.dot(l,p)||c.squaredDistance(r,o)<h*h)){var u=c.dot(p,a);c.sub(s,r,i);var d=-c.dot(p,s)/u/t.length;t.reportIntersection(e,d,p,-1)}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],45:[function(e,t,i){function n(e){e=e||{},this.body=null,this.position=r.fromValues(0,0),e.position&&r.copy(this.position,e.position),this.angle=e.angle||0,this.type=e.type||0,this.id=n.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:1,this.material=e.material||null,this.area=0,this.sensor=void 0!==e.sensor&&e.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}t.exports=n;var r=e("../math/vec2");n.idCounter=0,n.CIRCLE=1,n.PARTICLE=2,n.PLANE=4,n.CONVEX=8,n.LINE=16,n.BOX=32,Object.defineProperty(n,"RECTANGLE",{get:function(){return n.BOX}}),n.CAPSULE=64,n.HEIGHTFIELD=128,n.prototype.computeMomentOfInertia=function(e){},n.prototype.updateBoundingRadius=function(){},n.prototype.updateArea=function(){},n.prototype.computeAABB=function(e,t,i){},n.prototype.raycast=function(e,t,i,n){}},{"../math/vec2":30}],46:[function(e,t,i){function b(e){n.call(this,e,n.GS),e=e||{},this.iterations=e.iterations||10,this.tolerance=e.tolerance||1e-7,this.arrayStep=30,this.lambda=new S.ARRAY_TYPE(this.arrayStep),this.Bs=new S.ARRAY_TYPE(this.arrayStep),this.invCs=new S.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}var w=e("../math/vec2"),n=e("./Solver"),S=e("../utils/Utils"),C=e("../equations/FrictionEquation");(((t.exports=b).prototype=new n).constructor=b).prototype.solve=function(e,t){this.sortEquations();var i,n,r=0,o=this.iterations,a=this.frictionIterations,s=this.equations,p=s.length,l=Math.pow(this.tolerance*p,2),h=t.bodies,u=t.bodies.length,d=(w.add,w.set,this.useZeroRHS),c=this.lambda;if(this.usedIterations=0,p)for(var _=0;_!==u;_++){h[_].updateSolveMassProperties()}c.length<p&&(c=this.lambda=new S.ARRAY_TYPE(p+this.arrayStep),this.Bs=new S.ARRAY_TYPE(p+this.arrayStep),this.invCs=new S.ARRAY_TYPE(p+this.arrayStep)),function(e){for(var t=e.length;t--;)e[t]=0}(c);for(var y=this.invCs,x=this.Bs,_=(c=this.lambda,0);_!==s.length;_++){var m;((m=s[_]).timeStep!==e||m.needsUpdate)&&(m.timeStep=e,m.update()),x[_]=m.computeB(m.a,m.b,e),y[_]=m.computeInvC(m.epsilon)}if(0!==p){for(_=0;_!==u;_++){h[_].resetConstraintVelocity()}if(a){for(r=0;r!==a;r++){for(n=i=0;n!==p;n++){m=s[n];var f=b.iterateEquation(n,m,m.epsilon,x,y,c,d,e,r);i+=Math.abs(f)}if(this.usedIterations++,i*i<=l)break}for(b.updateMultipliers(s,c,1/e),n=0;n!==p;n++){var v=s[n];if(v instanceof C){for(var g=0,z=0;z!==v.contactEquations.length;z++)g+=v.contactEquations[z].multiplier;g*=v.frictionCoefficient/v.contactEquations.length,v.maxForce=g,v.minForce=-g}}}for(r=0;r!==o;r++){for(n=i=0;n!==p;n++){m=s[n];f=b.iterateEquation(n,m,m.epsilon,x,y,c,d,e,r);i+=Math.abs(f)}if(this.usedIterations++,i*i<=l)break}for(_=0;_!==u;_++)h[_].addConstraintVelocity();b.updateMultipliers(s,c,1/e)}},b.updateMultipliers=function(e,t,i){for(var n=e.length;n--;)e[n].multiplier=t[n]*i},b.iterateEquation=function(e,t,i,n,r,o,a,s,p){var l=n[e],h=r[e],u=o[e],d=t.computeGWlambda(),c=t.maxForce,_=t.minForce;a&&(l=0);var y=h*(l-d-i*u),x=u+y;return x<_*s?y=_*s-u:c*s<x&&(y=c*s-u),o[e]+=y,t.addToWlambda(y),y}},{"../equations/FrictionEquation":23,"../math/vec2":30,"../utils/Utils":57,"./Solver":47}],47:[function(e,t,i){function n(e,t){e=e||{},r.call(this),this.type=t,this.equations=[],this.equationSortFunction=e.equationSortFunction||!1}var r=(e("../utils/Utils"),e("../events/EventEmitter"));(((t.exports=n).prototype=new r).constructor=n).prototype.solve=function(e,t){throw new Error("Solver.solve should be implemented by subclasses!")};var o={bodies:[]};n.prototype.solveIsland=function(e,t){this.removeAllEquations(),t.equations.length&&(this.addEquations(t.equations),o.bodies.length=0,t.getBodies(o.bodies),o.bodies.length&&this.solve(e,o))},n.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},n.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},n.prototype.addEquations=function(e){for(var t=0,i=e.length;t!==i;t++){var n=e[t];n.enabled&&this.equations.push(n)}},n.prototype.removeEquation=function(e){var t=this.equations.indexOf(e);-1!==t&&this.equations.splice(t,1)},n.prototype.removeAllEquations=function(){this.equations.length=0},n.GS=1,n.ISLAND=2},{"../events/EventEmitter":26,"../utils/Utils":57}],48:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("../equations/ContactEquation"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"../equations/ContactEquation":21,"./Pool":55}],49:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("../equations/FrictionEquation"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"../equations/FrictionEquation":23,"./Pool":55}],50:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("../world/IslandNode"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.reset(),this}},{"../world/IslandNode":60,"./Pool":55}],51:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("../world/Island"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.reset(),this}},{"../world/Island":58,"./Pool":55}],52:[function(e,t,i){function n(){this.overlappingShapesLastState=new r,this.overlappingShapesCurrentState=new r,this.recordPool=new o({size:16}),this.tmpDict=new r,this.tmpArray1=[]}var r=e("./TupleDictionary"),o=(e("./OverlapKeeperRecord"),e("./OverlapKeeperRecordPool"));e("./Utils"),(t.exports=n).prototype.tick=function(){for(var e=this.overlappingShapesLastState,t=this.overlappingShapesCurrentState,i=e.keys.length;i--;){var n=e.keys[i],r=e.getByKey(n);t.getByKey(n),r&&this.recordPool.release(r)}e.reset(),e.copy(t),t.reset()},n.prototype.setOverlapping=function(e,t,i,n){var r=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!r.get(t.id,n.id)){var o=this.recordPool.get();o.set(e,t,i,n),r.set(t.id,n.id,o)}},n.prototype.getNewOverlaps=function(e){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,e)},n.prototype.getEndOverlaps=function(e){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,e)},n.prototype.bodiesAreOverlapping=function(e,t){for(var i=this.overlappingShapesCurrentState,n=i.keys.length;n--;){var r=i.keys[n],o=i.data[r];if(o.bodyA===e&&o.bodyB===t||o.bodyA===t&&o.bodyB===e)return!0}return!1},n.prototype.getDiff=function(e,t,i){var n=e,r=t;(i=i||[]).length=0;for(var o=r.keys.length;o--;){var a=r.keys[o],s=r.data[a];if(!s)throw new Error("Key "+a+" had no data!");n.data[a]||i.push(s)}return i},n.prototype.isNewOverlap=function(e,t){var i=0|e.id,n=0|t.id,r=this.overlappingShapesLastState,o=this.overlappingShapesCurrentState;return!r.get(i,n)&&!!o.get(i,n)},n.prototype.getNewBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},n.prototype.getEndBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},n.prototype.getBodyDiff=function(e,t){t=t||[];for(var i=this.tmpDict,n=e.length;n--;){var r=e[n];i.set(0|r.bodyA.id,0|r.bodyB.id,r)}for(n=i.keys.length;n--;){(r=i.getByKey(i.keys[n]))&&t.push(r.bodyA,r.bodyB)}return i.reset(),t}},{"./OverlapKeeperRecord":53,"./OverlapKeeperRecordPool":54,"./TupleDictionary":56,"./Utils":57}],53:[function(e,t,i){function r(e,t,i,n){this.shapeA=t,this.shapeB=n,this.bodyA=e,this.bodyB=i}(t.exports=r).prototype.set=function(e,t,i,n){r.call(this,e,t,i,n)}},{}],54:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("./OverlapKeeperRecord"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.bodyA=e.bodyB=e.shapeA=e.shapeB=null,this}},{"./OverlapKeeperRecord":53,"./Pool":55}],55:[function(e,t,i){function n(e){e=e||{},this.objects=[],void 0!==e.size&&this.resize(e.size)}(t.exports=n).prototype.resize=function(e){for(var t=this.objects;t.length>e;)t.pop();for(;t.length<e;)t.push(this.create());return this},n.prototype.get=function(){var e=this.objects;return e.length?e.pop():this.create()},n.prototype.release=function(e){return this.destroy(e),this.objects.push(e),this}},{}],56:[function(e,t,i){function n(){this.data={},this.keys=[]}var r=e("./Utils");(t.exports=n).prototype.getKey=function(e,t){return(0|(e|=0))==(0|(t|=0))?-1:0|((0|t)<(0|e)?e<<16|65535&t:t<<16|65535&e)},n.prototype.getByKey=function(e){return e|=0,this.data[e]},n.prototype.get=function(e,t){return this.data[this.getKey(e,t)]},n.prototype.set=function(e,t,i){if(!i)throw new Error("No data!");var n=this.getKey(e,t);return this.data[n]||this.keys.push(n),this.data[n]=i,n},n.prototype.reset=function(){for(var e=this.data,t=this.keys,i=t.length;i--;)delete e[t[i]];t.length=0},n.prototype.copy=function(e){this.reset(),r.appendArray(this.keys,e.keys);for(var t=e.keys.length;t--;){var i=e.keys[t];this.data[i]=e.data[i]}}},{"./Utils":57}],57:[function(e,t,i){function n(){}(t.exports=n).appendArray=function(e,t){if(t.length<15e4)e.push.apply(e,t);else for(var i=0,n=t.length;i!==n;++i)e.push(t[i])},n.splice=function(e,t,i){i=i||1;for(var n=t,r=e.length-i;n<r;n++)e[n]=e[n+i];e.length=r},n.ARRAY_TYPE="undefined"!=typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?Float32Array:Array,n.extend=function(e,t){for(var i in t)e[i]=t[i]},n.defaults=function(e,t){for(var i in e=e||{},t)i in e||(e[i]=t[i]);return e}},{}],58:[function(e,t,i){function n(){this.equations=[],this.bodies=[]}var r=e("../objects/Body");(t.exports=n).prototype.reset=function(){this.equations.length=this.bodies.length=0};var o=[];n.prototype.getBodies=function(e){for(var t=e||[],i=this.equations,n=o.length=0;n!==i.length;n++){var r=i[n];-1===o.indexOf(r.bodyA.id)&&(t.push(r.bodyA),o.push(r.bodyA.id)),-1===o.indexOf(r.bodyB.id)&&(t.push(r.bodyB),o.push(r.bodyB.id))}return t},n.prototype.wantsToSleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];if(t.type===r.DYNAMIC&&!t.wantsToSleep)return!1}return!0},n.prototype.sleep=function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].sleep();return!0}},{"../objects/Body":31}],59:[function(e,t,i){function _(e){this.nodePool=new n({size:16}),this.islandPool=new r({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var n=(e("../math/vec2"),e("./Island"),e("./IslandNode"),e("./../utils/IslandNodePool")),r=e("./../utils/IslandPool"),a=e("../objects/Body");(t.exports=_).getUnvisitedNode=function(e){for(var t=e.length,i=0;i!==t;i++){var n=e[i];if(!n.visited&&n.body.type===a.DYNAMIC)return n}return!1},_.prototype.visit=function(e,t,i){t.push(e.body);for(var n=e.equations.length,r=0;r!==n;r++){var o=e.equations[r];-1===i.indexOf(o)&&i.push(o)}},_.prototype.bfs=function(e,t,i){var n=this.queue;for(n.length=0,n.push(e),e.visited=!0,this.visit(e,t,i);n.length;)for(var r,o=n.pop();r=_.getUnvisitedNode(o.neighbors);)r.visited=!0,this.visit(r,t,i),r.body.type===a.DYNAMIC&&n.push(r)},_.prototype.split=function(e){for(var t=e.bodies,i=this.nodes,n=this.equations;i.length;)this.nodePool.release(i.pop());for(var r=0;r!==t.length;r++){var o=this.nodePool.get();o.body=t[r],i.push(o)}for(var a=0;a!==n.length;a++){var s=n[a],p=(r=t.indexOf(s.bodyA),t.indexOf(s.bodyB)),l=i[r],h=i[p];l.neighbors.push(h),h.neighbors.push(l),l.equations.push(s),h.equations.push(s)}var u=this.islands;for(r=0;r<u.length;r++)this.islandPool.release(u[r]);u.length=0;for(var d;d=_.getUnvisitedNode(i);){var c=this.islandPool.get();this.bfs(d,c.bodies,c.equations),u.push(c)}return u}},{"../math/vec2":30,"../objects/Body":31,"./../utils/IslandNodePool":50,"./../utils/IslandPool":51,"./Island":58,"./IslandNode":60}],60:[function(e,t,i){function n(e){this.body=e,this.neighbors=[],this.equations=[],this.visited=!1}(t.exports=n).prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],61:[function(e,t,i){function W(e){r.apply(this),e=e||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=e.solver||new n,this.narrowphase=new l(this),this.islandManager=new u,this.gravity=X.fromValues(0,-9.78),e.gravity&&X.copy(this.gravity,e.gravity),this.frictionGravity=X.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=e.broadphase||new p,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new o,this.defaultContactMaterial=new a(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===e.islandSplit||!!e.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=W.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new h}var n=e("../solver/GSSolver"),X=(e("../solver/Solver"),e("../collision/Ray"),e("../math/vec2")),m=e("../shapes/Circle"),f=e("../shapes/Convex"),v=(e("../shapes/Line"),e("../shapes/Plane")),g=e("../shapes/Capsule"),z=e("../shapes/Particle"),r=e("../events/EventEmitter"),q=e("../objects/Body"),o=(e("../shapes/Shape"),e("../objects/LinearSpring"),e("../material/Material")),a=e("../material/ContactMaterial"),s=(e("../constraints/DistanceConstraint"),e("../constraints/Constraint"),e("../constraints/LockConstraint"),e("../constraints/RevoluteConstraint"),e("../constraints/PrismaticConstraint"),e("../constraints/GearConstraint"),e("../../package.json"),e("../collision/Broadphase"),e("../collision/AABB")),p=e("../collision/SAPBroadphase"),l=e("../collision/Narrowphase"),Y=e("../utils/Utils"),h=e("../utils/OverlapKeeper"),u=e("./IslandManager");e("../objects/RotationalSpring"),(((t.exports=W).prototype=new Object(r.prototype)).constructor=W).NO_SLEEPING=1,W.BODY_SLEEPING=2,W.ISLAND_SLEEPING=4,W.prototype.addConstraint=function(e){this.constraints.push(e)},W.prototype.addContactMaterial=function(e){this.contactMaterials.push(e)},W.prototype.removeContactMaterial=function(e){var t=this.contactMaterials.indexOf(e);-1!==t&&Y.splice(this.contactMaterials,t,1)},W.prototype.getContactMaterial=function(e,t){for(var i=this.contactMaterials,n=0,r=i.length;n!==r;n++){var o=i[n];if(o.materialA.id===e.id&&o.materialB.id===t.id||o.materialA.id===t.id&&o.materialB.id===e.id)return o}return!1},W.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);-1!==t&&Y.splice(this.constraints,t,1)};var Z=(X.create(),X.create(),X.create(),X.create(),X.create(),X.create(),X.create()),b=X.fromValues(0,0),w=X.fromValues(0,0);X.fromValues(0,0),X.fromValues(0,0),W.prototype.step=function(e,t,i){if(i=i||10,0===(t=t||0))this.internalStep(e),this.time+=e;else{this.accumulator+=t;for(var n=0;this.accumulator>=e&&n<i;)this.internalStep(e),this.time+=e,this.accumulator-=e,n++;for(var r=this.accumulator%e/e,o=0;o!==this.bodies.length;o++){var a=this.bodies[o];X.lerp(a.interpolatedPosition,a.previousPosition,a.position,r),a.interpolatedAngle=a.previousAngle+r*(a.angle-a.previousAngle)}}};var K=[];W.prototype.internalStep=function(e){this.stepping=!0;var t=this.springs.length,i=this.springs,n=this.bodies,r=this.gravity,o=this.solver,a=this.bodies.length,s=this.broadphase,p=this.narrowphase,l=this.constraints,h=Z,u=(X.scale,X.add),d=(X.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=e,this.useWorldGravityAsFrictionGravity){var c=X.length(this.gravity);0===c&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=c)}if(this.applyGravity)for(var _=0;_!==a;_++){var y=(x=n[_]).force;x.type===q.DYNAMIC&&x.sleepState!==q.SLEEPING&&(X.scale(h,r,x.mass*x.gravityScale),u(y,y,h))}if(this.applySpringForces)for(_=0;_!==t;_++){i[_].applyForce()}if(this.applyDamping)for(_=0;_!==a;_++){var x;(x=n[_]).type===q.DYNAMIC&&x.applyDamping(e)}var m=s.getCollisionPairs(this),f=this.disabledBodyCollisionPairs;for(_=f.length-2;0<=_;_-=2)for(var v=m.length-2;0<=v;v-=2)(f[_]===m[v]&&f[_+1]===m[v+1]||f[_+1]===m[v]&&f[_]===m[v+1])&&m.splice(v,2);var g=l.length;for(_=0;_!==g;_++){var z=l[_];if(!z.collideConnected)for(v=m.length-2;0<=v;v-=2)(z.bodyA===m[v]&&z.bodyB===m[v+1]||z.bodyB===m[v]&&z.bodyA===m[v+1])&&m.splice(v,2)}this.postBroadphaseEvent.pairs=m,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,p.reset(this);_=0;for(var b=m.length;_!==b;_+=2)for(var w=m[_],S=m[_+1],C=0,M=w.shapes.length;C!==M;C++)for(var P=w.shapes[C],k=P.position,T=P.angle,G=0,O=S.shapes.length;G!==O;G++){var A=S.shapes[G],E=A.position,I=A.angle,B=this.defaultContactMaterial;if(P.material&&A.material){var L=this.getContactMaterial(P.material,A.material);L&&(B=L)}this.runNarrowphase(p,w,P,k,T,S,A,E,I,B,this.frictionGravity)}for(_=0;_!==a;_++){(j=n[_])._wakeUpAfterNarrowphase&&(j.wakeUp(),j._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(K);var D=this.endContactEvent;for(G=K.length;G--;){var R=K[G];D.shapeA=R.shapeA,D.shapeB=R.shapeB,D.bodyA=R.bodyA,D.bodyB=R.bodyB,this.emit(D)}K.length=0}var F=this.preSolveEvent;F.contactEquations=p.contactEquations,F.frictionEquations=p.frictionEquations,this.emit(F),F.contactEquations=F.frictionEquations=null;g=l.length;for(_=0;_!==g;_++)l[_].update();if(p.contactEquations.length||p.frictionEquations.length||g)if(this.islandSplit){for(d.equations.length=0,Y.appendArray(d.equations,p.contactEquations),Y.appendArray(d.equations,p.frictionEquations),_=0;_!==g;_++)Y.appendArray(d.equations,l[_].equations);d.split(this);for(_=0;_!==d.islands.length;_++){(H=d.islands[_]).equations.length&&o.solveIsland(e,H)}}else{for(o.addEquations(p.contactEquations),o.addEquations(p.frictionEquations),_=0;_!==g;_++)o.addEquations(l[_].equations);this.solveConstraints&&o.solve(e,this),o.removeAllEquations()}for(_=0;_!==a;_++){var j;(j=n[_]).integrate(e)}for(_=0;_!==a;_++)n[_].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var N=this.impactEvent;for(_=0;_!==p.contactEquations.length;_++){var U=p.contactEquations[_];U.firstImpact&&(N.bodyA=U.bodyA,N.bodyB=U.bodyB,N.shapeA=U.shapeA,N.shapeB=U.shapeB,N.contactEquation=U,this.emit(N))}}if(this.sleepMode===W.BODY_SLEEPING)for(_=0;_!==a;_++)n[_].sleepTick(this.time,!1,e);else if(this.sleepMode===W.ISLAND_SLEEPING&&this.islandSplit){for(_=0;_!==a;_++)n[_].sleepTick(this.time,!0,e);for(_=0;_<this.islandManager.islands.length;_++){var H;(H=this.islandManager.islands[_]).wantsToSleep()&&H.sleep()}}this.stepping=!1;var V=this.bodiesToBeRemoved;for(_=0;_!==V.length;_++)this.removeBody(V[_]);V.length=0,this.emit(this.postStepEvent)},W.prototype.runNarrowphase=function(e,t,i,n,r,o,a,s,p,l,h){if(0!=(i.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&i.collisionMask)){X.rotate(b,n,t.angle),X.rotate(w,s,o.angle),X.add(b,b,t.position),X.add(w,w,o.position);var u,d=r+t.angle,c=p+o.angle;e.enableFriction=0<l.friction,e.frictionCoefficient=l.friction,u=t.type===q.STATIC||t.type===q.KINEMATIC?o.mass:o.type===q.STATIC||o.type===q.KINEMATIC?t.mass:t.mass*o.mass/(t.mass+o.mass),e.slipForce=l.friction*h*u,e.restitution=l.restitution,e.surfaceVelocity=l.surfaceVelocity,e.frictionStiffness=l.frictionStiffness,e.frictionRelaxation=l.frictionRelaxation,e.stiffness=l.stiffness,e.relaxation=l.relaxation,e.contactSkinSize=l.contactSkinSize,e.enabledEquations=t.collisionResponse&&o.collisionResponse&&i.collisionResponse&&a.collisionResponse;var _=e[i.type|a.type],y=0;if(_){var x=i.sensor||a.sensor,m=e.frictionEquations.length;y=i.type<a.type?_.call(e,t,i,b,d,o,a,w,c,x):_.call(e,o,a,w,c,t,i,b,d,x);var f=e.frictionEquations.length-m;if(y){if(t.allowSleep&&t.type===q.DYNAMIC&&t.sleepState===q.SLEEPING&&o.sleepState===q.AWAKE&&o.type!==q.STATIC&&X.squaredLength(o.velocity)+Math.pow(o.angularVelocity,2)>=2*Math.pow(o.sleepSpeedLimit,2)&&(t._wakeUpAfterNarrowphase=!0),o.allowSleep&&o.type===q.DYNAMIC&&o.sleepState===q.SLEEPING&&t.sleepState===q.AWAKE&&t.type!==q.STATIC&&X.squaredLength(t.velocity)+Math.pow(t.angularVelocity,2)>=2*Math.pow(t.sleepSpeedLimit,2)&&(o._wakeUpAfterNarrowphase=!0),this.overlapKeeper.setOverlapping(t,i,o,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(i,a)){var v=this.beginContactEvent;if(v.shapeA=i,v.shapeB=a,v.bodyA=t,v.bodyB=o,v.contactEquations.length=0,"number"==typeof y)for(var g=e.contactEquations.length-y;g<e.contactEquations.length;g++)v.contactEquations.push(e.contactEquations[g]);this.emit(v)}if("number"==typeof y&&1<f)for(g=e.frictionEquations.length-f;g<e.frictionEquations.length;g++){var z=e.frictionEquations[g];z.setSlipForce(z.getSlipForce()/f)}}}}},W.prototype.addSpring=function(e){this.springs.push(e);var t=this.addSpringEvent;t.spring=e,this.emit(t),t.spring=null},W.prototype.removeSpring=function(e){var t=this.springs.indexOf(e);-1!==t&&Y.splice(this.springs,t,1)},W.prototype.addBody=function(e){if(-1===this.bodies.indexOf(e)){this.bodies.push(e);var t=(e.world=this).addBodyEvent;t.body=e,this.emit(t),t.body=null}},W.prototype.removeBody=function(e){if(this.stepping)this.bodiesToBeRemoved.push(e);else{e.world=null;var t=this.bodies.indexOf(e);-1!==t&&(Y.splice(this.bodies,t,1),(this.removeBodyEvent.body=e).resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},W.prototype.getBodyById=function(e){for(var t=this.bodies,i=0;i<t.length;i++){var n=t[i];if(n.id===e)return n}return!1},W.prototype.disableBodyCollision=function(e,t){this.disabledBodyCollisionPairs.push(e,t)},W.prototype.enableBodyCollision=function(e,t){for(var i=this.disabledBodyCollisionPairs,n=0;n<i.length;n+=2)if(i[n]===e&&i[n+1]===t||i[n+1]===e&&i[n]===t)return void i.splice(n,2)},W.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var e=this.constraints,t=e.length-1;0<=t;t--)this.removeConstraint(e[t]);var i=this.bodies;for(t=i.length-1;0<=t;t--)this.removeBody(i[t]);var n=this.springs;for(t=n.length-1;0<=t;t--)this.removeSpring(n[t]);var r=this.contactMaterials;for(t=r.length-1;0<=t;t--)this.removeContactMaterial(r[t]);W.apply(this)};var S=X.create(),C=(X.fromValues(0,0),X.fromValues(0,0));W.prototype.hitTest=function(e,t,i){i=i||0;var n=new q({position:e}),r=new z,o=e,a=S,s=C;n.addShape(r);for(var p=this.narrowphase,l=[],h=0,u=t.length;h!==u;h++)for(var d=t[h],c=0,_=d.shapes.length;c!==_;c++){var y=d.shapes[c];X.rotate(a,y.position,d.angle),X.add(a,a,d.position);var x=y.angle+d.angle;(y instanceof m&&p.circleParticle(d,y,a,x,n,r,o,0,!0)||y instanceof f&&p.particleConvex(n,r,o,0,d,y,a,x,!0)||y instanceof v&&p.particlePlane(n,r,o,0,d,y,a,x,!0)||y instanceof g&&p.particleCapsule(n,r,o,0,d,y,a,x,!0)||y instanceof z&&X.squaredLength(X.sub(s,a,e))<i*i)&&l.push(d)}return l},W.prototype.setGlobalStiffness=function(e){for(var t=this.constraints,i=0;i!==t.length;i++)for(var n=t[i],r=0;r!==n.equations.length;r++){var o=n.equations[r];o.stiffness=e,o.needsUpdate=!0}var a=this.contactMaterials;for(i=0;i!==a.length;i++){(n=a[i]).stiffness=n.frictionStiffness=e}(n=this.defaultContactMaterial).stiffness=n.frictionStiffness=e},W.prototype.setGlobalRelaxation=function(e){for(var t=0;t!==this.constraints.length;t++)for(var i=this.constraints[t],n=0;n!==i.equations.length;n++){var r=i.equations[n];r.relaxation=e,r.needsUpdate=!0}for(t=0;t!==this.contactMaterials.length;t++){(i=this.contactMaterials[t]).relaxation=i.frictionRelaxation=e}(i=this.defaultContactMaterial).relaxation=i.frictionRelaxation=e};var d=new s,c=[];W.prototype.raycast=function(e,t){return t.getAABB(d),this.broadphase.aabbQuery(this,d,c),t.intersectBodies(e,c),c.length=0,e.hasHit()}},{"../../package.json":6,"../collision/AABB":7,"../collision/Broadphase":8,"../collision/Narrowphase":10,"../collision/Ray":11,"../collision/SAPBroadphase":13,"../constraints/Constraint":14,"../constraints/DistanceConstraint":15,"../constraints/GearConstraint":16,"../constraints/LockConstraint":17,"../constraints/PrismaticConstraint":18,"../constraints/RevoluteConstraint":19,"../events/EventEmitter":26,"../material/ContactMaterial":27,"../material/Material":28,"../math/vec2":30,"../objects/Body":31,"../objects/LinearSpring":32,"../objects/RotationalSpring":33,"../shapes/Capsule":38,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Line":42,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45,"../solver/GSSolver":46,"../solver/Solver":47,"../utils/OverlapKeeper":52,"../utils/Utils":57,"./IslandManager":59}]},{},[36])(36)}),function(){var e=this,I=I||{};return I.game=null,I.WEBGL_RENDERER=0,I.CANVAS_RENDERER=1,I.VERSION="v2.2.9",I._UID=0,"undefined"!=typeof Float32Array?(I.Float32Array=Float32Array,I.Uint16Array=Uint16Array,I.Uint32Array=Uint32Array,I.ArrayBuffer=ArrayBuffer):(I.Float32Array=Array,I.Uint16Array=Array),I.PI_2=2*Math.PI,I.RAD_TO_DEG=180/Math.PI,I.DEG_TO_RAD=Math.PI/180,I.RETINA_PREFIX="@2x",I.DisplayObject=function(){this.position=new I.Point(0,0),this.scale=new I.Point(1,1),this.pivot=new I.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.renderable=!1,this.parent=null,this.worldAlpha=1,this.worldTransform=new I.Matrix,this.worldPosition=new I.Point(0,0),this.worldScale=new I.Point(1,1),this.worldRotation=0,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new I.Rectangle(0,0,0,0),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},I.DisplayObject.prototype.constructor=I.DisplayObject,I.DisplayObject.prototype={destroy:function(){if(this.children){for(var e=this.children.length;e--;)this.children[e].destroy();this.children=[]}this.hitArea=null,this.parent=null,this.worldTransform=null,this.filterArea=null,this.renderable=!1,this._bounds=null,this._currentBounds=null,this._mask=null,this._destroyCachedSprite()},updateTransform:function(e){if(!e&&!this.parent&&!this.game)return this;var t=this.parent;e?t=e:this.parent||(t=this.game.world);var i,n,r,o,a,s,p=t.worldTransform,l=this.worldTransform;return this.rotation%I.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),i=this._cr*this.scale.x,n=this._sr*this.scale.x,r=-this._sr*this.scale.y,o=this._cr*this.scale.y,a=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(a-=this.pivot.x*i+this.pivot.y*r,s-=this.pivot.x*n+this.pivot.y*o),l.a=i*p.a+n*p.c,l.b=i*p.b+n*p.d,l.c=r*p.a+o*p.c,l.d=r*p.b+o*p.d):(i=this.scale.x,o=this.scale.y,a=this.position.x-this.pivot.x*i,s=this.position.y-this.pivot.y*o,l.a=i*p.a,l.b=i*p.b,l.c=o*p.c,l.d=o*p.d),l.tx=a*p.a+s*p.c+p.tx,l.ty=a*p.b+s*p.d+p.ty,this.worldAlpha=this.alpha*t.worldAlpha,this.worldPosition.set(l.tx,l.ty),this.worldScale.set(this.scale.x*Math.sqrt(l.a*l.a+l.c*l.c),this.scale.y*Math.sqrt(l.b*l.b+l.d*l.d)),this.worldRotation=Math.atan2(-l.c,l.d),this._currentBounds=null,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,l,p),this},preUpdate:function(){},generateTexture:function(e,t,i){var n=this.getLocalBounds(),r=new I.RenderTexture(0|n.width,0|n.height,i,t,e);return I.DisplayObject._tempMatrix.tx=-n.x,I.DisplayObject._tempMatrix.ty=-n.y,r.render(this,I.DisplayObject._tempMatrix),r},updateCache:function(){return this._generateCachedSprite(),this},toGlobal:function(e){return this.updateTransform(),this.worldTransform.apply(e)},toLocal:function(e,t){return t&&(e=t.toGlobal(e)),this.updateTransform(),this.worldTransform.applyInverse(e)},_renderCachedSprite:function(e){this._cachedSprite.worldAlpha=this.worldAlpha,e.gl?I.Sprite.prototype._renderWebGL.call(this._cachedSprite,e):I.Sprite.prototype._renderCanvas.call(this._cachedSprite,e)},_generateCachedSprite:function(){this._cacheAsBitmap=!1;var e=this.getLocalBounds();if(e.width=Math.max(1,Math.ceil(e.width)),e.height=Math.max(1,Math.ceil(e.height)),this.updateTransform(),this._cachedSprite)this._cachedSprite.texture.resize(e.width,e.height);else{var t=new I.RenderTexture(e.width,e.height);this._cachedSprite=new I.Sprite(t),this._cachedSprite.worldTransform=this.worldTransform}var i=this._filters;this._filters=null,this._cachedSprite.filters=i,I.DisplayObject._tempMatrix.tx=-e.x,I.DisplayObject._tempMatrix.ty=-e.y,this._cachedSprite.texture.render(this,I.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this._filters=i,this._cacheAsBitmap=!0},_destroyCachedSprite:function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)}},I.DisplayObject.prototype.displayObjectUpdateTransform=I.DisplayObject.prototype.updateTransform,Object.defineProperties(I.DisplayObject.prototype,{x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},worldVisible:{get:function(){if(this.visible){var e=this.parent;if(!e)return this.visible;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}return!1}},mask:{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),(this._mask=e)&&(this._mask.isMask=!0)}},filters:{get:function(){return this._filters},set:function(e){if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i++)for(var n=e[i].passes,r=0;r<n.length;r++)t.push(n[r]);this._filterBlock={target:this,filterPasses:t}}this._filters=e,this.blendMode&&this.blendMode===I.blendModes.MULTIPLY&&(this.blendMode=I.blendModes.NORMAL)}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(e?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=e)}}}),I.DisplayObjectContainer=function(){I.DisplayObject.call(this),this.children=[],this.ignoreChildInput=!1},I.DisplayObjectContainer.prototype=Object.create(I.DisplayObject.prototype),I.DisplayObjectContainer.prototype.constructor=I.DisplayObjectContainer,I.DisplayObjectContainer.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},I.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(0<=t&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),(e.parent=this).children.splice(t,0,e),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},I.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e!==t){var i=this.getChildIndex(e),n=this.getChildIndex(t);if(i<0||n<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=t,this.children[n]=e}},I.DisplayObjectContainer.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},I.DisplayObjectContainer.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(e);this.children.splice(i,1),this.children.splice(t,0,e)},I.DisplayObjectContainer.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[e]},I.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(-1!==t)return this.removeChildAt(t)},I.DisplayObjectContainer.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t&&(t.parent=void 0,this.children.splice(e,1)),t},I.DisplayObjectContainer.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var i=t-e;if(0<i&&i<=t){for(var n=this.children.splice(e,i),r=0;r<n.length;r++)n[r].parent=void 0;return n}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},I.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var e=0;e<this.children.length;e++)this.children[e].updateTransform()},I.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=I.DisplayObjectContainer.prototype.updateTransform,I.DisplayObjectContainer.prototype.getBounds=function(e){var t,i=e&&e instanceof I.DisplayObject,n=!0;if(i?n=e instanceof I.DisplayObjectContainer&&e.contains(this):e=this,i){var r=e.worldTransform;for(e.worldTransform=I.identityMatrix,t=0;t<e.children.length;t++)e.children[t].updateTransform()}var o,a,s,p=1/0,l=1/0,h=-1/0,u=-1/0,d=!1;for(t=0;t<this.children.length;t++)this.children[t].visible&&(d=!0,p=p<(o=this.children[t].getBounds()).x?p:o.x,l=l<o.y?l:o.y,h=(a=o.width+o.x)<h?h:a,u=(s=o.height+o.y)<u?u:s);var c=this._bounds;if(!d){var _=(c=new I.Rectangle).x,y=c.width+c.x,x=c.y,m=c.height+c.y,f=this.worldTransform,v=f.a,g=f.b,z=f.c,b=f.d,w=f.tx,S=f.ty,C=v*y+z*m+w,M=b*m+g*y+S,P=v*_+z*m+w,k=b*m+g*_+S,T=v*_+z*x+w,G=b*x+g*_+S,O=v*y+z*x+w,A=b*x+g*y+S;p=O<(p=T<(p=P<(p=h=C)?P:p)?T:p)?O:p,l=A<(l=G<(l=k<(l=u=M)?k:l)?G:l)?A:l,h=(h=(h=h<P?P:h)<T?T:h)<O?O:h,u=(u=(u=u<k?k:u)<G?G:u)<A?A:u}if(c.x=p,c.y=l,c.width=h-p,c.height=u-l,i)for(e.worldTransform=r,t=0;t<e.children.length;t++)e.children[t].updateTransform();if(!n){var E=e.getBounds();c.x-=E.x,c.y-=E.y}return c},I.DisplayObjectContainer.prototype.getLocalBounds=function(){return this.getBounds(this)},I.DisplayObjectContainer.prototype.contains=function(e){return!!e&&(e===this||this.contains(e.parent))},I.DisplayObjectContainer.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);var t;if(this._mask||this._filters){for(this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),e.spriteBatch.start()}else for(t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e)}},I.DisplayObjectContainer.prototype._renderCanvas=function(e){if(!1!==this.visible&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);this._mask&&e.maskManager.pushMask(this._mask,e);for(var t=0;t<this.children.length;t++)this.children[t]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},Object.defineProperty(I.DisplayObjectContainer.prototype,"width",{get:function(){return this.getLocalBounds().width*this.scale.x},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}}),Object.defineProperty(I.DisplayObjectContainer.prototype,"height",{get:function(){return this.getLocalBounds().height*this.scale.y},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}),I.Sprite=function(e){I.DisplayObjectContainer.call(this),this.anchor=new I.Point,this.texture=e||I.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.cachedTint=-1,this.tintedTexture=null,this.blendMode=I.blendModes.NORMAL,this.shader=null,this.exists=!0,this.texture.baseTexture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},I.Sprite.prototype=Object.create(I.DisplayObjectContainer.prototype),I.Sprite.prototype.constructor=I.Sprite,Object.defineProperty(I.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(I.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),I.Sprite.prototype.setTexture=function(e,t){void 0!==t&&this.texture.baseTexture.destroy(),this.texture.baseTexture.skipRender=!1,this.texture=e,this.texture.valid=!0,this.cachedTint=-1},I.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},I.Sprite.prototype.getBounds=function(e){var t=this.texture.frame.width,i=this.texture.frame.height,n=t*(1-this.anchor.x),r=t*-this.anchor.x,o=i*(1-this.anchor.y),a=i*-this.anchor.y,s=e||this.worldTransform,p=s.a,l=s.b,h=s.c,u=s.d,d=s.tx,c=s.ty,_=-1/0,y=-1/0,x=1/0,m=1/0;if(0===l&&0===h){if(p<0){p*=-1;var f=n;n=-r,r=-f}if(u<0){u*=-1;f=o;o=-a,a=-f}x=p*r+d,_=p*n+d,m=u*a+c,y=u*o+c}else{var v=p*r+h*a+d,g=u*a+l*r+c,z=p*n+h*a+d,b=u*a+l*n+c,w=p*n+h*o+d,S=u*o+l*n+c,C=p*r+h*o+d,M=u*o+l*r+c;x=C<(x=w<(x=z<(x=v<x?v:x)?z:x)?w:x)?C:x,m=M<(m=S<(m=b<(m=g<m?g:m)?b:m)?S:m)?M:m,_=(_=(_=(_=_<v?v:_)<z?z:_)<w?w:_)<C?C:_,y=(y=(y=(y=y<g?g:y)<b?b:y)<S?S:y)<M?M:y}var P=this._bounds;return P.x=x,P.width=_-x,P.y=m,P.height=y-m,this._currentBounds=P},I.Sprite.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=I.identityMatrix;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform();var i=this.getBounds();for(this.worldTransform=e,t=0;t<this.children.length;t++)this.children[t].updateTransform();return i},I.Sprite.prototype._renderWebGL=function(e,t){if(this.visible&&!(this.alpha<=0)&&this.renderable){var i=this.worldTransform;if(t&&(i=t),this._mask||this._filters){var n=e.spriteBatch;this._filters&&(n.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(n.stop(),e.maskManager.pushMask(this.mask,e),n.start()),n.render(this);for(var r=0;r<this.children.length;r++)this.children[r]._renderWebGL(e);n.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),n.start()}else{e.spriteBatch.render(this);for(r=0;r<this.children.length;r++)this.children[r]._renderWebGL(e,i)}}},I.Sprite.prototype._renderCanvas=function(e,t){if(!(!this.visible||0===this.alpha||!this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){var i=this.worldTransform;if(t&&(i=t),this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=I.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e),this.texture.valid){var n=this.texture.baseTexture.resolution/e.resolution;e.context.globalAlpha=this.worldAlpha,e.smoothProperty&&e.scaleMode!==this.texture.baseTexture.scaleMode&&(e.scaleMode=this.texture.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===I.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,o=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height,a=i.tx*e.resolution+e.shakeX,s=i.ty*e.resolution+e.shakeY;e.roundPixels?(e.context.setTransform(i.a,i.b,i.c,i.d,0|a,0|s),r|=0,o|=0):e.context.setTransform(i.a,i.b,i.c,i.d,a,s);var p=this.texture.crop.width,l=this.texture.crop.height;if(r/=n,o/=n,16777215!==this.tint)(this.texture.requiresReTint||this.cachedTint!==this.tint)&&(this.tintedTexture=I.CanvasTinter.getTintedTexture(this,this.tint),this.cachedTint=this.tint,this.texture.requiresReTint=!1),e.context.drawImage(this.tintedTexture,0,0,p,l,r,o,p/n,l/n);else{var h=this.texture.crop.x,u=this.texture.crop.y;e.context.drawImage(this.texture.baseTexture.source,h,u,p,l,r,o,p/n,l/n)}}for(var d=0;d<this.children.length;d++)this.children[d]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},I.SpriteBatch=function(e){I.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},I.SpriteBatch.prototype=Object.create(I.DisplayObjectContainer.prototype),I.SpriteBatch.prototype.constructor=I.SpriteBatch,I.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new I.WebGLFastSpriteBatch(e),this.ready=!0},I.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},I.SpriteBatch.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(e.gl),this.fastSpriteBatch.gl!==e.gl&&this.fastSpriteBatch.setContext(e.gl),e.spriteBatch.stop(),e.shaderManager.setShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.spriteBatch.start())},I.SpriteBatch.prototype._renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.children.length){var t=e.context;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var i=this.worldTransform,n=!0,r=0;r<this.children.length;r++){var o=this.children[r];if(o.visible){var a=o.texture,s=a.frame;if(t.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)==0)n&&(t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),n=!1),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*(-s.width*o.scale.x)+o.position.x+.5+e.shakeX|0,o.anchor.y*(-s.height*o.scale.y)+o.position.y+.5+e.shakeY|0,s.width*o.scale.x,s.height*o.scale.y);else{n||(n=!0),o.displayObjectUpdateTransform();var p=o.worldTransform,l=p.tx*e.resolution+e.shakeX,h=p.ty*e.resolution+e.shakeY;e.roundPixels?t.setTransform(p.a,p.b,p.c,p.d,0|l,0|h):t.setTransform(p.a,p.b,p.c,p.d,l,h),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width+.5|0,o.anchor.y*-s.height+.5|0,s.width,s.height)}}}}},I.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},I.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},I.canUseNewCanvasBlendModes=function(){if(void 0===document)return!1;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=e+"AP804Oa6"+t;var n=new Image;n.src=e+"/wCKxvRF"+t;var r=I.CanvasPool.create(this,6,1).getContext("2d");if(r.globalCompositeOperation="multiply",r.drawImage(i,0,0),r.drawImage(n,2,0),!r.getImageData(2,0,1,1))return!1;var o=r.getImageData(2,0,1,1).data;return I.CanvasPool.remove(this),255===o[0]&&0===o[1]&&0===o[2]},I.getNextPowerOfTwo=function(e){if(0<e&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t},I.isPowerOfTwo=function(e,t){return 0<e&&0==(e&e-1)&&0<t&&0==(t&t-1)},I.CanvasPool={create:function(e,t,i){var n,r=I.CanvasPool.getFirst();if(-1===r){var o={parent:e,canvas:document.createElement("canvas")};I.CanvasPool.pool.push(o),n=o.canvas}else I.CanvasPool.pool[r].parent=e,n=I.CanvasPool.pool[r].canvas;return void 0!==t&&(n.width=t,n.height=i),n},getFirst:function(){for(var e=I.CanvasPool.pool,t=0;t<e.length;t++)if(!e[t].parent)return t;return-1},remove:function(e){for(var t=I.CanvasPool.pool,i=0;i<t.length;i++)t[i].parent===e&&(t[i].parent=null,t[i].canvas.width=1,t[i].canvas.height=1)},removeByCanvas:function(e){for(var t=I.CanvasPool.pool,i=0;i<t.length;i++)t[i].canvas===e&&(t[i].parent=null,t[i].canvas.width=1,t[i].canvas.height=1)},getTotal:function(){for(var e=I.CanvasPool.pool,t=0,i=0;i<e.length;i++)e[i].parent&&t++;return t},getFree:function(){for(var e=I.CanvasPool.pool,t=0,i=0;i<e.length;i++)e[i].parent||t++;return t}},I.CanvasPool.pool=[],I.initDefaultShaders=function(){},I.CompileVertexShader=function(e,t){return I._CompileShader(e,t,e.VERTEX_SHADER)},I.CompileFragmentShader=function(e,t){return I._CompileShader(e,t,e.FRAGMENT_SHADER)},I._CompileShader=function(e,t,i){var n=t;Array.isArray(t)&&(n=t.join("\n"));var r=e.createShader(i);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(window.console.log(e.getShaderInfoLog(r)),null)},I.compileProgram=function(e,t,i){var n=I.CompileFragmentShader(e,i),r=I.CompileVertexShader(e,t),o=e.createProgram();return e.attachShader(o,r),e.attachShader(o,n),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||(window.console.log(e.getProgramInfoLog(o)),window.console.log("Could not initialise shaders")),o},I.PixiShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},I.PixiShader.prototype.constructor=I.PixiShader,I.PixiShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc||I.PixiShader.defaultVertexSrc,this.fragmentSrc);for(var i in e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute],this.uniforms)this.uniforms[i].uniformLocation=e.getUniformLocation(t,i);this.initUniforms(),this.program=t},I.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var i in this.uniforms){var n=(e=this.uniforms[i]).type;"sampler2D"===n?(e._init=!1,null!==e.value&&this.initSampler2D(e)):"mat2"===n||"mat3"===n||"mat4"===n?(e.glMatrix=!0,e.glValueLength=1,"mat2"===n?e.glFunc=t.uniformMatrix2fv:"mat3"===n?e.glFunc=t.uniformMatrix3fv:"mat4"===n&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+n],e.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}},I.PixiShader.prototype.initSampler2D=function(e){if(e.value&&e.value.baseTexture&&e.value.baseTexture.hasLoaded){var t=this.gl;if(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),e.textureData){var i=e.textureData,n=i.magFilter?i.magFilter:t.LINEAR,r=i.minFilter?i.minFilter:t.LINEAR,o=i.wrapS?i.wrapS:t.CLAMP_TO_EDGE,a=i.wrapT?i.wrapT:t.CLAMP_TO_EDGE,s=i.luminance?t.LUMINANCE:t.RGBA;if(i.repeat&&(o=t.REPEAT,a=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var p=i.width?i.width:512,l=i.height?i.height:2,h=i.border?i.border:0;t.texImage2D(t.TEXTURE_2D,0,s,p,l,h,s,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,s,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++}},I.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var i in this.uniforms)1===(e=this.uniforms[i]).glValueLength?!0===e.glMatrix?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):"sampler2D"===e.type&&(e._init?(t.activeTexture(t["TEXTURE"+this.textureCount]),e.value.baseTexture._dirty[t.id]?I.instances[t.id].updateTexture(e.value.baseTexture):t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),t.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},I.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},I.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],I.PixiFastShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},I.PixiFastShader.prototype.constructor=I.PixiFastShader,I.PixiFastShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.uMatrix=e.getUniformLocation(t,"uMatrix"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(t,"aPositionCoord"),this.aScale=e.getAttribLocation(t,"aScale"),this.aRotation=e.getAttribLocation(t,"aRotation"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=t},I.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},I.StripShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},I.StripShader.prototype.constructor=I.StripShader,I.StripShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},I.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},I.PrimitiveShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},I.PrimitiveShader.prototype.constructor=I.PrimitiveShader,I.PrimitiveShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},I.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},I.ComplexPrimitiveShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},I.ComplexPrimitiveShader.prototype.constructor=I.ComplexPrimitiveShader,I.ComplexPrimitiveShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.color=e.getUniformLocation(t,"color"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},I.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},I.glContexts=[],I.instances=[],I.WebGLRenderer=function(e){this.game=e,I.defaultRenderer||(I.defaultRenderer=this),this.type=I.WEBGL_RENDERER,this.resolution=e.resolution,this.transparent=e.transparent,this.autoResize=!1,this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.clearBeforeRender=e.clearBeforeRender,this.width=e.width,this.height=e.height,this.view=e.canvas,this._contextOptions={alpha:this.transparent,antialias:e.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:this.preserveDrawingBuffer},this.projection=new I.Point,this.offset=new I.Point,this.shaderManager=new I.WebGLShaderManager,this.spriteBatch=new I.WebGLSpriteBatch,this.maskManager=new I.WebGLMaskManager,this.filterManager=new I.WebGLFilterManager,this.stencilManager=new I.WebGLStencilManager,this.blendModeManager=new I.WebGLBlendModeManager,this.renderSession={},this.renderSession.game=this.game,this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,(this.renderSession.renderer=this).renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},I.WebGLRenderer.prototype.constructor=I.WebGLRenderer,I.WebGLRenderer.prototype.initContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(!(this.gl=e))throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=e.id=I.WebGLRenderer.glContextId++,I.glContexts[this.glContextId]=e,I.instances[this.glContextId]=this,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.shaderManager.setContext(e),this.spriteBatch.setContext(e),this.maskManager.setContext(e),this.filterManager.setContext(e),this.blendModeManager.setContext(e),this.stencilManager.setContext(e),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},I.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){var t=this.gl;t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),this.game.clearBeforeRender&&(t.clearColor(e._bgColor.r,e._bgColor.g,e._bgColor.b,e._bgColor.a),t.clear(t.COLOR_BUFFER_BIT)),this.offset.x=this.game.camera._shake.x,this.offset.y=this.game.camera._shake.y,this.renderDisplayObject(e,this.projection)}},I.WebGLRenderer.prototype.renderDisplayObject=function(e,t,i,n){this.renderSession.blendModeManager.setBlendMode(I.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=i?-1:1,this.renderSession.projection=t,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,i),e._renderWebGL(this.renderSession,n),this.spriteBatch.end()},I.WebGLRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},I.WebGLRenderer.prototype.updateTexture=function(e){if(!e.hasLoaded)return!1;var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===I.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&I.isPowerOfTwo(e.width,e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===I.scaleModes.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===I.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),!(e._dirty[t.id]=!1)},I.WebGLRenderer.prototype.destroy=function(){I.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null,I.CanvasPool.remove(this),I.instances[this.glContextId]=null,I.WebGLRenderer.glContextId--},I.WebGLRenderer.prototype.mapBlendModes=function(){var e=this.gl;if(!I.blendModesWebGL){var t=[],i=I.blendModes;t[i.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],t[i.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[i.SCREEN]=[e.SRC_ALPHA,e.ONE],t[i.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],I.blendModesWebGL=t}},I.WebGLRenderer.glContextId=0,I.WebGLBlendModeManager=function(){this.currentBlendMode=99999},I.WebGLBlendModeManager.prototype.constructor=I.WebGLBlendModeManager,I.WebGLBlendModeManager.prototype.setContext=function(e){this.gl=e},I.WebGLBlendModeManager.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=I.blendModesWebGL[this.currentBlendMode];return t&&this.gl.blendFunc(t[0],t[1]),!0},I.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},I.WebGLMaskManager=function(){},I.WebGLMaskManager.prototype.constructor=I.WebGLMaskManager,I.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},I.WebGLMaskManager.prototype.pushMask=function(e,t){var i=t.gl;e.dirty&&I.WebGLGraphics.updateGraphics(e,i),void 0!==e._webGL[i.id]&&void 0!==e._webGL[i.id].data&&0!==e._webGL[i.id].data.length&&t.stencilManager.pushStencil(e,e._webGL[i.id].data[0],t)},I.WebGLMaskManager.prototype.popMask=function(e,t){var i=this.gl;void 0!==e._webGL[i.id]&&void 0!==e._webGL[i.id].data&&0!==e._webGL[i.id].data.length&&t.stencilManager.popStencil(e,e._webGL[i.id].data[0],t)},I.WebGLMaskManager.prototype.destroy=function(){this.gl=null},I.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},I.WebGLStencilManager.prototype.setContext=function(e){this.gl=e},I.WebGLStencilManager.prototype.pushStencil=function(e,t,i){var n=this.gl;this.bindGraphics(e,t,i),0===this.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(t);var r=this.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===t.mode?(n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?(n.stencilFunc(n.EQUAL,255-r,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),this.reverse?n.stencilFunc(n.EQUAL,255-(r+1),255):n.stencilFunc(n.EQUAL,r+1,255),this.reverse=!this.reverse):(this.reverse?(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-r,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,r+1,255):n.stencilFunc(n.EQUAL,255-(r+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.count++},I.WebGLStencilManager.prototype.bindGraphics=function(e,t,i){this._currentGraphics=e;var n,r=this.gl,o=i.projection,a=i.offset;1===t.mode?(n=i.shaderManager.complexPrimitiveShader,i.shaderManager.setShader(n),r.uniform1f(n.flipY,i.flipY),r.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),r.uniform2f(n.projectionVector,o.x,-o.y),r.uniform2f(n.offsetVector,-a.x,-a.y),r.uniform3fv(n.tintColor,I.hex2rgb(e.tint)),r.uniform3fv(n.color,t.color),r.uniform1f(n.alpha,e.worldAlpha*t.alpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(n.aVertexPosition,2,r.FLOAT,!1,8,0)):(n=i.shaderManager.primitiveShader,i.shaderManager.setShader(n),r.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),r.uniform1f(n.flipY,i.flipY),r.uniform2f(n.projectionVector,o.x,-o.y),r.uniform2f(n.offsetVector,-a.x,-a.y),r.uniform3fv(n.tintColor,I.hex2rgb(e.tint)),r.uniform1f(n.alpha,e.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(n.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(n.colorAttribute,4,r.FLOAT,!1,24,8)),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer)},I.WebGLStencilManager.prototype.popStencil=function(e,t,i){var n=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)n.disable(n.STENCIL_TEST);else{var r=this.count;this.bindGraphics(e,t,i),n.colorMask(!1,!1,!1,!1),1===t.mode?(this.reverse=!this.reverse,this.reverse?(n.stencilFunc(n.EQUAL,255-(r+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0)):(this.reverse?(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(r+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0)),this.reverse?n.stencilFunc(n.EQUAL,r,255):n.stencilFunc(n.EQUAL,255-r,255),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},I.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},I.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[]},I.WebGLShaderManager.prototype.constructor=I.WebGLShaderManager,I.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new I.PrimitiveShader(e),this.complexPrimitiveShader=new I.ComplexPrimitiveShader(e),this.defaultShader=new I.PixiShader(e),this.fastShader=new I.PixiFastShader(e),this.stripShader=new I.StripShader(e),this.setShader(this.defaultShader)},I.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var i=e[t];this.tempAttribState[i]=!0}var n=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},I.WebGLShaderManager.prototype.setShader=function(e){return this._currentId!==e._UID&&(this._currentId=e._UID,this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},I.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},I.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var e=4*this.size*4*this.vertSize,t=6*this.size;this.vertices=new I.ArrayBuffer(e),this.positions=new I.Float32Array(this.vertices),this.colors=new I.Uint32Array(this.vertices),this.indices=new I.Uint16Array(t);for(var i=this.lastIndexCount=0,n=0;i<t;i+=6,n+=4)this.indices[i+0]=n+0,this.indices[i+1]=n+1,this.indices[i+2]=n+2,this.indices[i+3]=n+0,this.indices[i+4]=n+2,this.indices[i+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new I.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},I.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999;var t=new I.PixiShader(e);t.fragmentSrc=this.defaultShader.fragmentSrc,t.uniforms={},t.init(),this.defaultShader.shaders[e.id]=t},I.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},I.WebGLSpriteBatch.prototype.end=function(){this.flush()},I.WebGLSpriteBatch.prototype.render=function(e,t){var i=e.texture,n=e.worldTransform;t&&(n=t),this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=i.baseTexture);var r=i._uvs;if(r){var o,a,s,p,l=e.anchor.x,h=e.anchor.y;if(i.trim){var u=i.trim;o=(a=u.x-l*u.width)+i.crop.width,s=(p=u.y-h*u.height)+i.crop.height}else o=i.frame.width*(1-l),a=i.frame.width*-l,s=i.frame.height*(1-h),p=i.frame.height*-h;var d=4*this.currentBatchSize*this.vertSize,c=i.baseTexture.resolution,_=n.a/c,y=n.b/c,x=n.c/c,m=n.d/c,f=n.tx,v=n.ty,g=this.colors,z=this.positions;this.renderSession.roundPixels?(z[d]=_*a+x*p+f|0,z[d+1]=m*p+y*a+v|0,z[d+5]=_*o+x*p+f|0,z[d+6]=m*p+y*o+v|0,z[d+10]=_*o+x*s+f|0,z[d+11]=m*s+y*o+v|0,z[d+15]=_*a+x*s+f|0,z[d+16]=m*s+y*a+v|0):(z[d]=_*a+x*p+f,z[d+1]=m*p+y*a+v,z[d+5]=_*o+x*p+f,z[d+6]=m*p+y*o+v,z[d+10]=_*o+x*s+f,z[d+11]=m*s+y*o+v,z[d+15]=_*a+x*s+f,z[d+16]=m*s+y*a+v),z[d+2]=r.x0,z[d+3]=r.y0,z[d+7]=r.x1,z[d+8]=r.y1,z[d+12]=r.x2,z[d+13]=r.y2,z[d+17]=r.x3,z[d+18]=r.y3;var b=e.tint;g[d+4]=g[d+9]=g[d+14]=g[d+19]=(b>>16)+(65280&b)+((255&b)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},I.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var t=e.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture),e._uvs||(e._uvs=new I.TextureUvs);var i=e._uvs,n=t.baseTexture.width,r=t.baseTexture.height;e.tilePosition.x%=n*e.tileScaleOffset.x,e.tilePosition.y%=r*e.tileScaleOffset.y;var o=e.tilePosition.x/(n*e.tileScaleOffset.x),a=e.tilePosition.y/(r*e.tileScaleOffset.y),s=e.width/n/(e.tileScale.x*e.tileScaleOffset.x),p=e.height/r/(e.tileScale.y*e.tileScaleOffset.y);i.x0=0-o,i.y0=0-a,i.x1=1*s-o,i.y1=0-a,i.x2=1*s-o,i.y2=1*p-a,i.x3=0-o,i.y3=1*p-a;var l=e.tint,h=(l>>16)+(65280&l)+((255&l)<<16)+(255*e.worldAlpha<<24),u=this.positions,d=this.colors,c=e.width,_=e.height,y=e.anchor.x,x=e.anchor.y,m=c*(1-y),f=c*-y,v=_*(1-x),g=_*-x,z=4*this.currentBatchSize*this.vertSize,b=t.baseTexture.resolution,w=e.worldTransform,S=w.a/b,C=w.b/b,M=w.c/b,P=w.d/b,k=w.tx,T=w.ty;u[z++]=S*f+M*g+k,u[z++]=P*g+C*f+T,u[z++]=i.x0,u[z++]=i.y0,d[z++]=h,u[z++]=S*m+M*g+k,u[z++]=P*g+C*m+T,u[z++]=i.x1,u[z++]=i.y1,d[z++]=h,u[z++]=S*m+M*v+k,u[z++]=P*v+C*m+T,u[z++]=i.x2,u[z++]=i.y2,d[z++]=h,u[z++]=S*f+M*v+k,u[z++]=P*v+C*f+T,u[z++]=i.x3,u[z++]=i.y3,d[z++]=h,this.sprites[this.currentBatchSize++]=e},I.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t=this.gl;if(this.dirty){this.dirty=!1,t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e=this.defaultShader.shaders[t.id];var i=4*this.vertSize;t.vertexAttribPointer(e.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(e.aTextureCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(e.colorAttribute,4,t.UNSIGNED_BYTE,!0,i,16)}if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var n=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,n)}for(var r,o,a,s,p=0,l=0,h=null,u=this.renderSession.blendModeManager.currentBlendMode,d=null,c=!1,_=!1,y=0,x=this.currentBatchSize;y<x;y++){r=(s=this.sprites[y]).tilingTexture?s.tilingTexture.baseTexture:s.texture.baseTexture,c=u!==(o=s.blendMode),_=d!==(a=s.shader||this.defaultShader);var m=r.skipRender;if(m&&0<s.children.length&&(m=!1),(h!==r&&!m||c||_)&&(this.renderBatch(h,p,l),l=y,p=0,h=r,c&&(u=o,this.renderSession.blendModeManager.setBlendMode(u)),_)){(e=(d=a).shaders[t.id])||((e=new I.PixiShader(t)).fragmentSrc=d.fragmentSrc,e.uniforms=d.uniforms,e.init(),d.shaders[t.id]=e),this.renderSession.shaderManager.setShader(e),e.dirty&&e.syncUniforms();var f=this.renderSession.projection;t.uniform2f(e.projectionVector,f.x,f.y);var v=this.renderSession.offset;t.uniform2f(e.offsetVector,v.x,v.y)}p++}this.renderBatch(h,p,l),this.currentBatchSize=0}},I.WebGLSpriteBatch.prototype.renderBatch=function(e,t,i){if(0!==t){var n=this.gl;if(e._dirty[n.id]){if(!this.renderSession.renderer.updateTexture(e))return}else n.bindTexture(n.TEXTURE_2D,e._glTextures[n.id]);n.drawElements(n.TRIANGLES,6*t,n.UNSIGNED_SHORT,6*i*2),this.renderSession.drawCount++}},I.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},I.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},I.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},I.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var t=4*this.size*this.vertSize,i=6*this.maxSize;this.vertices=new I.Float32Array(t),this.indices=new I.Uint16Array(i),this.vertexBuffer=null,this.indexBuffer=null;for(var n=this.lastIndexCount=0,r=0;n<i;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(e)},I.WebGLFastSpriteBatch.prototype.constructor=I.WebGLFastSpriteBatch,I.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW)},I.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=e.worldTransform.toArray(!0),this.start()},I.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},I.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,i=t[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var n=0,r=t.length;n<r;n++)this.renderSprite(t[n]);this.flush()}},I.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(e.visible&&(e.texture.baseTexture===this.currentBaseTexture||e.texture.baseTexture.skipRender||(this.flush(),this.currentBaseTexture=e.texture.baseTexture,e.texture._uvs))){var t,i,n,r,o,a,s=this.vertices;if(t=e.texture._uvs,e.texture.frame.width,e.texture.frame.height,e.texture.trim){var p=e.texture.trim;i=(n=p.x-e.anchor.x*p.width)+e.texture.crop.width,r=(o=p.y-e.anchor.y*p.height)+e.texture.crop.height}else i=e.texture.frame.width*(1-e.anchor.x),n=e.texture.frame.width*-e.anchor.x,r=e.texture.frame.height*(1-e.anchor.y),o=e.texture.frame.height*-e.anchor.y;a=4*this.currentBatchSize*this.vertSize,s[a++]=n,s[a++]=o,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x0,s[a++]=t.y1,s[a++]=e.alpha,s[a++]=i,s[a++]=o,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x1,s[a++]=t.y1,s[a++]=e.alpha,s[a++]=i,s[a++]=r,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x2,s[a++]=t.y2,s[a++]=e.alpha,s[a++]=n,s[a++]=r,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x3,s[a++]=t.y3,s[a++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},I.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(this.currentBaseTexture._glTextures[e.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},I.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},I.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,i,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,i,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,i,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,i,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,i,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,i,36)},I.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},I.WebGLFilterManager.prototype.constructor=I.WebGLFilterManager,I.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},I.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=t},I.WebGLFilterManager.prototype.pushFilter=function(e){var t=this.gl,i=this.renderSession.projection,n=this.renderSession.offset;e._filterArea=e.target.filterArea||e.target.getBounds(),e._previous_stencil_mgr=this.renderSession.stencilManager,this.renderSession.stencilManager=new I.WebGLStencilManager,this.renderSession.stencilManager.setContext(t),t.disable(t.STENCIL_TEST),this.filterStack.push(e);var r=e.filterPasses[0];this.offsetX+=e._filterArea.x,this.offsetY+=e._filterArea.y;var o=this.texturePool.pop();o?o.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution):o=new I.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution),t.bindTexture(t.TEXTURE_2D,o.texture);var a=e._filterArea,s=r.padding;a.x-=s,a.y-=s,a.width+=2*s,a.height+=2*s,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),t.bindFramebuffer(t.FRAMEBUFFER,o.frameBuffer),t.viewport(0,0,a.width*this.renderSession.resolution,a.height*this.renderSession.resolution),i.x=a.width/2,i.y=-a.height/2,n.x=-a.x,n.y=-a.y,t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e._glFilterTexture=o},I.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,t=this.filterStack.pop(),i=t._filterArea,n=t._glFilterTexture,r=this.renderSession.projection,o=this.renderSession.offset;if(1<t.filterPasses.length){e.viewport(0,0,i.width*this.renderSession.resolution,i.height*this.renderSession.resolution),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=i.height,this.vertexArray[2]=i.width,this.vertexArray[3]=i.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=i.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var a=n,s=this.texturePool.pop();s||(s=new I.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution)),s.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution),e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var p=0;p<t.filterPasses.length-1;p++){var l=t.filterPasses[p];e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.texture),this.applyFilterPass(l,i,i.width,i.height);var h=a;a=s,s=h}e.enable(e.BLEND),n=a,this.texturePool.push(s)}var u=t.filterPasses[t.filterPasses.length-1];this.offsetX-=i.x,this.offsetY-=i.y;var d=this.width,c=this.height,_=0,y=0,x=this.buffer;if(0===this.filterStack.length)e.colorMask(!0,!0,!0,!0);else{var m=this.filterStack[this.filterStack.length-1];d=(i=m._filterArea).width,c=i.height,_=i.x,y=i.y,x=m._glFilterTexture.frameBuffer}r.x=d/2,r.y=-c/2,o.x=_,o.y=y;var f=(i=t._filterArea).x-_,v=i.y-y;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=f,this.vertexArray[1]=v+i.height,this.vertexArray[2]=f+i.width,this.vertexArray[3]=v+i.height,this.vertexArray[4]=f,this.vertexArray[5]=v,this.vertexArray[6]=f+i.width,this.vertexArray[7]=v,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,d*this.renderSession.resolution,c*this.renderSession.resolution),e.bindFramebuffer(e.FRAMEBUFFER,x),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.texture),this.renderSession.stencilManager&&this.renderSession.stencilManager.destroy(),this.renderSession.stencilManager=t._previous_stencil_mgr,t._previous_stencil_mgr=null,0<this.renderSession.stencilManager.count?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.applyFilterPass(u,i,d,c),this.texturePool.push(n),t._glFilterTexture=null},I.WebGLFilterManager.prototype.applyFilterPass=function(e,t,i,n){var r=this.gl,o=e.shaders[r.id];o||((o=new I.PixiShader(r)).fragmentSrc=e.fragmentSrc,o.uniforms=e.uniforms,o.init(),e.shaders[r.id]=o),this.renderSession.shaderManager.setShader(o),r.uniform2f(o.projectionVector,i/2,-n/2),r.uniform2f(o.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),o.syncUniforms(),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),r.vertexAttribPointer(o.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.uvBuffer),r.vertexAttribPointer(o.aTextureCoord,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.colorBuffer),r.vertexAttribPointer(o.colorAttribute,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),this.renderSession.drawCount++},I.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new I.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new I.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new I.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},I.WebGLFilterManager.prototype.destroy=function(){var e=this.gl;this.filterStack=null,this.offsetX=0;for(var t=this.offsetY=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null,e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.uvBuffer),e.deleteBuffer(this.colorBuffer),e.deleteBuffer(this.indexBuffer)},I.FilterTexture=function(e,t,i,n){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),n=n||I.scaleModes.DEFAULT,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n===I.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n===I.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer),this.resize(t,i)},I.FilterTexture.prototype.constructor=I.FilterTexture,I.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},I.FilterTexture.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,t)}},I.FilterTexture.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},I.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=I.CanvasPool.create(this,this.width,this.height),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},I.CanvasBuffer.prototype.constructor=I.CanvasBuffer,I.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},I.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},I.CanvasBuffer.prototype.destroy=function(){I.CanvasPool.remove(this)},I.CanvasMaskManager=function(){},I.CanvasMaskManager.prototype.constructor=I.CanvasMaskManager,I.CanvasMaskManager.prototype.pushMask=function(e,t){var i=t.context;i.save();var n=e.alpha,r=e.worldTransform,o=t.resolution;i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),I.CanvasGraphics.renderGraphicsMask(e,i),i.clip(),e.worldAlpha=n},I.CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},I.CanvasTinter=function(){},I.CanvasTinter.getTintedTexture=function(e,t){var i=e.tintedTexture||I.CanvasPool.create(this);return I.CanvasTinter.tintMethod(e.texture,t,i),i},I.CanvasTinter.tintWithMultiply=function(e,t,i){var n=i.getContext("2d"),r=e.crop;i.width===r.width&&i.height===r.height||(i.width=r.width,i.height=r.height),n.clearRect(0,0,r.width,r.height),n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},I.CanvasTinter.tintWithPerPixel=function(e,t,i){var n=i.getContext("2d"),r=e.crop;i.width=r.width,i.height=r.height,n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height);for(var o=I.hex2rgb(t),a=o[0],s=o[1],p=o[2],l=n.getImageData(0,0,r.width,r.height),h=l.data,u=0;u<h.length;u+=4)if(h[u+0]*=a,h[u+1]*=s,h[u+2]*=p,!I.CanvasTinter.canHandleAlpha){var d=h[u+3];h[u+0]/=255/d,h[u+1]/=255/d,h[u+2]/=255/d}n.putImageData(l,0,0)},I.CanvasTinter.checkInverseAlpha=function(){var e=new I.CanvasBuffer(2,1);e.context.fillStyle="rgba(10, 20, 30, 0.5)",e.context.fillRect(0,0,1,1);var t=e.context.getImageData(0,0,1,1);if(null===t)return!1;e.context.putImageData(t,1,0);var i=e.context.getImageData(1,0,1,1);return i.data[0]===t.data[0]&&i.data[1]===t.data[1]&&i.data[2]===t.data[2]&&i.data[3]===t.data[3]},I.CanvasTinter.canHandleAlpha=I.CanvasTinter.checkInverseAlpha(),I.CanvasTinter.canUseMultiply=I.canUseNewCanvasBlendModes(),I.CanvasTinter.tintMethod=I.CanvasTinter.canUseMultiply?I.CanvasTinter.tintWithMultiply:I.CanvasTinter.tintWithPerPixel,I.CanvasRenderer=function(e){this.game=e,I.defaultRenderer||(I.defaultRenderer=this),this.type=I.CANVAS_RENDERER,this.resolution=e.resolution,this.clearBeforeRender=e.clearBeforeRender,this.transparent=e.transparent,this.autoResize=!1,this.width=e.width*this.resolution,this.height=e.height*this.resolution,this.view=e.canvas,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.count=0,this.maskManager=new I.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:Phaser.Canvas.getSmoothingPrefix(this.context),roundPixels:!1},this.mapBlendModes(),this.resize(this.width,this.height)},I.CanvasRenderer.prototype.constructor=I.CanvasRenderer,I.CanvasRenderer.prototype.render=function(e){this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=0,this.renderSession.shakeX=this.game.camera._shake.x,this.renderSession.shakeY=this.game.camera._shake.y,this.context.globalCompositeOperation="source-over",navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):e._bgColor&&(this.context.fillStyle=e._bgColor.rgba,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e)},I.CanvasRenderer.prototype.destroy=function(e){void 0===e&&(e=!0),e&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},I.CanvasRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.renderSession.smoothProperty&&(this.context[this.renderSession.smoothProperty]=this.renderSession.scaleMode===I.scaleModes.LINEAR)},I.CanvasRenderer.prototype.renderDisplayObject=function(e,t,i){this.renderSession.context=t||this.context,this.renderSession.resolution=this.resolution,e._renderCanvas(this.renderSession,i)},I.CanvasRenderer.prototype.mapBlendModes=function(){if(!I.blendModesCanvas){var e=[],t=I.blendModes,i=I.canUseNewCanvasBlendModes();e[t.NORMAL]="source-over",e[t.ADD]="lighter",e[t.MULTIPLY]=i?"multiply":"source-over",e[t.SCREEN]=i?"screen":"source-over",e[t.OVERLAY]=i?"overlay":"source-over",e[t.DARKEN]=i?"darken":"source-over",e[t.LIGHTEN]=i?"lighten":"source-over",e[t.COLOR_DODGE]=i?"color-dodge":"source-over",e[t.COLOR_BURN]=i?"color-burn":"source-over",e[t.HARD_LIGHT]=i?"hard-light":"source-over",e[t.SOFT_LIGHT]=i?"soft-light":"source-over",e[t.DIFFERENCE]=i?"difference":"source-over",e[t.EXCLUSION]=i?"exclusion":"source-over",e[t.HUE]=i?"hue":"source-over",e[t.SATURATION]=i?"saturation":"source-over",e[t.COLOR]=i?"color":"source-over",e[t.LUMINOSITY]=i?"luminosity":"source-over",I.blendModesCanvas=e}},I.BaseTexture=function(e,t){this.resolution=1,this.width=100,this.height=100,this.scaleMode=t||I.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=e,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],e&&((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height&&(this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty()),this.skipRender=!1,this._powerOf2=!1)},I.BaseTexture.prototype.constructor=I.BaseTexture,I.BaseTexture.prototype.forceLoaded=function(e,t){this.hasLoaded=!0,this.width=e,this.height=t,this.dirty()},I.BaseTexture.prototype.destroy=function(){this.source&&I.CanvasPool.removeByCanvas(this.source),this.source=null,this.unloadFromGPU()},I.BaseTexture.prototype.updateSourceImage=function(e){},I.BaseTexture.prototype.dirty=function(){for(var e=0;e<this._glTextures.length;e++)this._dirty[e]=!0},I.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var e=this._glTextures.length-1;0<=e;e--){var t=this._glTextures[e],i=I.glContexts[e];i&&t&&i.deleteTexture(t)}this._glTextures.length=0,this.dirty()},I.BaseTexture.fromCanvas=function(e,t){return 0===e.width&&(e.width=1),0===e.height&&(e.height=1),new I.BaseTexture(e,t)},I.TextureSilentFail=!1,I.Texture=function(e,t,i,n){this.noFrame=!1,t||(this.noFrame=!0,t=new I.Rectangle(0,0,1,1)),e instanceof I.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=t,this.trim=n,this.valid=!1,this.isTiling=!1,this.requiresUpdate=!1,this.requiresReTint=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||new I.Rectangle(0,0,1,1),e.hasLoaded&&(this.noFrame&&(t=new I.Rectangle(0,0,e.width,e.height)),this.setFrame(t))},I.Texture.prototype.constructor=I.Texture,I.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;this.noFrame&&(this.frame=new I.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame)},I.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy(),this.valid=!1},I.Texture.prototype.setFrame=function(e){if(this.noFrame=!1,this.frame=e,this.width=e.width,this.height=e.height,this.crop.x=e.x,this.crop.y=e.y,this.crop.width=e.width,this.crop.height=e.height,this.trim||!(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))this.valid=e&&e.width&&e.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs();else{if(!I.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=!1}},I.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new I.TextureUvs);var e=this.crop,t=this.baseTexture.width,i=this.baseTexture.height;this._uvs.x0=e.x/t,this._uvs.y0=e.y/i,this._uvs.x1=(e.x+e.width)/t,this._uvs.y1=e.y/i,this._uvs.x2=(e.x+e.width)/t,this._uvs.y2=(e.y+e.height)/i,this._uvs.x3=e.x/t,this._uvs.y3=(e.y+e.height)/i},I.Texture.fromCanvas=function(e,t){var i=I.BaseTexture.fromCanvas(e,t);return new I.Texture(i)},I.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},I.RenderTexture=function(e,t,i,n,r){if(this.width=e||100,this.height=t||100,this.resolution=r||1,this.frame=new I.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new I.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new I.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=n||I.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,I.Texture.call(this,this.baseTexture,new I.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution)),this.renderer=i||I.defaultRenderer,this.renderer.type===I.WEBGL_RENDERER){var o=this.renderer.gl;this.baseTexture._dirty[o.id]=!1,this.textureBuffer=new I.FilterTexture(o,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[o.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new I.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new I.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this.tempMatrix=new Phaser.Matrix,this._updateUvs()},I.RenderTexture.prototype=Object.create(I.Texture.prototype),I.RenderTexture.prototype.constructor=I.RenderTexture,I.RenderTexture.prototype.resize=function(e,t,i){e===this.width&&t===this.height||(this.valid=0<e&&0<t,this.width=e,this.height=t,this.frame.width=this.crop.width=e*this.resolution,this.frame.height=this.crop.height=t*this.resolution,i&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===I.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},I.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===I.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},I.RenderTexture.prototype.renderWebGL=function(e,t,i){if(this.valid&&0!==e.alpha){var n=e.worldTransform;n.identity(),n.translate(0,2*this.projection.y),t&&n.append(t),n.scale(1,-1);for(var r=0;r<e.children.length;r++)e.children[r].updateTransform();var o=this.renderer.gl;o.viewport(0,0,this.width*this.resolution,this.height*this.resolution),o.bindFramebuffer(o.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer,t),this.renderer.spriteBatch.dirty=!0}},I.RenderTexture.prototype.renderCanvas=function(e,t,i){if(this.valid&&0!==e.alpha){var n=e.worldTransform;n.identity(),t&&n.append(t);for(var r=0;r<e.children.length;r++)e.children[r].updateTransform();i&&this.textureBuffer.clear();var o=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,this.textureBuffer.context,t),this.renderer.resolution=o}},I.RenderTexture.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},I.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},I.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type!==I.WEBGL_RENDERER)return this.textureBuffer.canvas;var e=this.renderer.gl,t=this.textureBuffer.width,i=this.textureBuffer.height,n=new Uint8Array(4*t*i);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,i,e.RGBA,e.UNSIGNED_BYTE,n),e.bindFramebuffer(e.FRAMEBUFFER,null);var r=new I.CanvasBuffer(t,i),o=r.context.getImageData(0,0,t,i);return o.data.set(n),r.context.putImageData(o,0,0),r.canvas},I.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},I.AbstractFilter.prototype.constructor=I.AbstractFilter,I.AbstractFilter.prototype.syncUniforms=function(){for(var e=0,t=this.shaders.length;e<t;e++)this.shaders[e].dirty=!0},I.Strip=function(e){I.DisplayObjectContainer.call(this),this.texture=e,this.uvs=new I.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new I.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new I.Float32Array([1,1,1,1]),this.indices=new I.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=I.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=I.Strip.DrawModes.TRIANGLE_STRIP},I.Strip.prototype=Object.create(I.DisplayObjectContainer.prototype),I.Strip.prototype.constructor=I.Strip,I.Strip.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||(e.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(e),e.shaderManager.setShader(e.shaderManager.stripShader),this._renderStrip(e),e.spriteBatch.start())},I.Strip.prototype._initWebGL=function(e){var t=e.gl;this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._uvBuffer=t.createBuffer(),this._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},I.Strip.prototype._renderStrip=function(e){var t=e.gl,i=e.projection,n=e.offset,r=e.shaderManager.stripShader,o=this.drawMode===I.Strip.DrawModes.TRIANGLE_STRIP?t.TRIANGLE_STRIP:t.TRIANGLES;e.blendModeManager.setBlendMode(this.blendMode),t.uniformMatrix3fv(r.translationMatrix,!1,this.worldTransform.toArray(!0)),t.uniform2f(r.projectionVector,i.x,-i.y),t.uniform2f(r.offsetVector,-n.x,-n.y),t.uniform1f(r.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.STATIC_DRAW),t.vertexAttribPointer(r.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.vertexAttribPointer(r.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)):(t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.vertexAttribPointer(r.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.vertexAttribPointer(r.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),t.drawElements(o,this.indices.length,t.UNSIGNED_SHORT,0)},I.Strip.prototype._renderCanvas=function(e){var t=e.context,i=this.worldTransform,n=i.tx*e.resolution+e.shakeX,r=i.ty*e.resolution+e.shakeY;e.roundPixels?t.setTransform(i.a,i.b,i.c,i.d,0|n,0|r):t.setTransform(i.a,i.b,i.c,i.d,n,r),this.drawMode===I.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(t):this._renderCanvasTriangles(t)},I.Strip.prototype._renderCanvasTriangleStrip=function(e){var t=this.vertices,i=this.uvs,n=t.length/2;this.count++;for(var r=0;r<n-2;r++){var o=2*r;this._renderCanvasDrawTriangle(e,t,i,o,o+2,o+4)}},I.Strip.prototype._renderCanvasTriangles=function(e){var t=this.vertices,i=this.uvs,n=this.indices,r=n.length;this.count++;for(var o=0;o<r;o+=3){var a=2*n[o],s=2*n[o+1],p=2*n[o+2];this._renderCanvasDrawTriangle(e,t,i,a,s,p)}},I.Strip.prototype._renderCanvasDrawTriangle=function(e,t,i,n,r,o){var a=this.texture.baseTexture.source,s=this.texture.width,p=this.texture.height,l=t[n],h=t[r],u=t[o],d=t[n+1],c=t[r+1],_=t[o+1],y=i[n]*s,x=i[r]*s,m=i[o]*s,f=i[n+1]*p,v=i[r+1]*p,g=i[o+1]*p;if(0<this.canvasPadding){var z=this.canvasPadding/this.worldTransform.a,b=this.canvasPadding/this.worldTransform.d,w=(l+h+u)/3,S=(d+c+_)/3,C=l-w,M=d-S,P=Math.sqrt(C*C+M*M);l=w+C/P*(P+z),d=S+M/P*(P+b),M=c-S,h=w+(C=h-w)/(P=Math.sqrt(C*C+M*M))*(P+z),c=S+M/P*(P+b),M=_-S,u=w+(C=u-w)/(P=Math.sqrt(C*C+M*M))*(P+z),_=S+M/P*(P+b)}e.save(),e.beginPath(),e.moveTo(l,d),e.lineTo(h,c),e.lineTo(u,_),e.closePath(),e.clip();var k=y*v+f*m+x*g-v*m-f*x-y*g,T=l*v+f*u+h*g-v*u-f*h-l*g,G=y*h+l*m+x*u-h*m-l*x-y*u,O=y*v*u+f*h*m+l*x*g-l*v*m-f*x*u-y*h*g,A=d*v+f*_+c*g-v*_-f*c-d*g,E=y*c+d*m+x*_-c*m-d*x-y*_,I=y*v*_+f*c*m+d*x*g-d*v*m-f*x*_-y*c*g;e.transform(T/k,A/k,G/k,E/k,O/k,I/k),e.drawImage(a,0,0),e.restore()},I.Strip.prototype.renderStripFlat=function(e){var t=this.context,i=e.vertices,n=i.length/2;this.count++,t.beginPath();for(var r=1;r<n-2;r++){var o=2*r,a=i[o],s=i[o+2],p=i[o+4],l=i[o+1],h=i[o+3],u=i[o+5];t.moveTo(a,l),t.lineTo(s,h),t.lineTo(p,u)}t.fillStyle="#FF0000",t.fill(),t.closePath()},I.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},I.Strip.prototype.getBounds=function(e){for(var t=e||this.worldTransform,i=t.a,n=t.b,r=t.c,o=t.d,a=t.tx,s=t.ty,p=-1/0,l=-1/0,h=1/0,u=1/0,d=this.vertices,c=0,_=d.length;c<_;c+=2){var y=d[c],x=d[c+1],m=i*y+r*x+a,f=o*x+n*y+s;h=m<h?m:h,u=f<u?f:u,p=p<m?m:p,l=l<f?f:l}if(h===-1/0||l===1/0)return I.EmptyRectangle;var v=this._bounds;return v.x=h,v.width=p-h,v.y=u,v.height=l-u,this._currentBounds=v},I.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},I.Rope=function(e,t){I.Strip.call(this,e),this.points=t,this.vertices=new I.Float32Array(4*t.length),this.uvs=new I.Float32Array(4*t.length),this.colors=new I.Float32Array(2*t.length),this.indices=new I.Uint16Array(2*t.length),this.refresh()},I.Rope.prototype=Object.create(I.Strip.prototype),I.Rope.prototype.constructor=I.Rope,I.Rope.prototype.refresh=function(){var e=this.points;if(!(e.length<1)){var t=this.uvs,i=(e[0],this.indices),n=this.colors;this.count-=.2,t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r,o,a=e.length,s=1;s<a;s++)e[s],o=s/(a-1),t[r=4*s]=o,t[r+1]=0,t[r+2]=o,t[r+3]=1,n[r=2*s]=1,n[r+1]=1,i[r=2*s]=r,i[r+1]=r+1}},I.Rope.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){var t,i=e[0],n={x:0,y:0};this.count-=.2;for(var r,o,a,s,p=this.vertices,l=e.length,h=0;h<l;h++)r=e[h],o=4*h,t=h<e.length-1?e[h+1]:r,n.y=-(t.x-i.x),n.x=t.y-i.y,1<10*(1-h/(l-1))&&1,a=Math.sqrt(n.x*n.x+n.y*n.y),s=this.texture.height/2,n.x/=a,n.y/=a,n.x*=s,n.y*=s,p[o]=r.x+n.x,p[o+1]=r.y+n.y,p[o+2]=r.x-n.x,p[o+3]=r.y-n.y,i=r;I.DisplayObjectContainer.prototype.updateTransform.call(this)}},I.Rope.prototype.setTexture=function(e){this.texture=e},I.TilingSprite=function(e,t,i){I.Sprite.call(this,e),this._width=t||128,this._height=i||128,this.tileScale=new I.Point(1,1),this.tileScaleOffset=new I.Point(1,1),this.tilePosition=new I.Point,this.renderable=!0,this.tint=16777215,this.textureDebug=!1,this.blendMode=I.blendModes.NORMAL,this.canvasBuffer=null,this.tilingTexture=null,this.tilePattern=null,this.refreshTexture=!0,this.frameWidth=0,this.frameHeight=0},I.TilingSprite.prototype=Object.create(I.Sprite.prototype),I.TilingSprite.prototype.constructor=I.TilingSprite,I.TilingSprite.prototype.setTexture=function(e){this.texture!==e&&(this.texture=e,this.refreshTexture=!0,this.cachedTint=16777215)},I.TilingSprite.prototype._renderWebGL=function(e){if(this.visible&&this.renderable&&0!==this.alpha){if(this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this.refreshTexture){if(this.generateTilingTexture(!0,e),!this.tilingTexture)return;this.tilingTexture.needsUpdate&&(e.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)}e.spriteBatch.renderTilingSprite(this);for(var t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this._mask,e),e.spriteBatch.start()}},I.TilingSprite.prototype._renderCanvas=function(e){if(this.visible&&this.renderable&&0!==this.alpha){var t=e.context;this._mask&&e.maskManager.pushMask(this._mask,e),t.globalAlpha=this.worldAlpha;var i=this.worldTransform,n=e.resolution,r=i.tx*n+e.shakeX,o=i.ty*n+e.shakeY;if(t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,r,o),this.refreshTexture){if(this.generateTilingTexture(!1,e),!this.tilingTexture)return;this.tilePattern=t.createPattern(this.tilingTexture.baseTexture.source,"repeat")}var a=e.currentBlendMode;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=I.blendModesCanvas[e.currentBlendMode]);var s=this.tilePosition,p=this.tileScale;s.x%=this.tilingTexture.baseTexture.width,s.y%=this.tilingTexture.baseTexture.height,t.scale(p.x,p.y),t.translate(s.x+this.anchor.x*-this._width,s.y+this.anchor.y*-this._height),t.fillStyle=this.tilePattern;r=-s.x,o=-s.y;var l=this._width/p.x,h=this._height/p.y;e.roundPixels&&(r|=0,o|=0,l|=0,h|=0),t.fillRect(r,o,l,h),t.scale(1/p.x,1/p.y),t.translate(-s.x+this.anchor.x*this._width,-s.y+this.anchor.y*this._height),this._mask&&e.maskManager.popMask(e);for(var u=0;u<this.children.length;u++)this.children[u]._renderCanvas(e);a!==this.blendMode&&(e.currentBlendMode=a,t.globalCompositeOperation=I.blendModesCanvas[a])}},I.TilingSprite.prototype.onTextureUpdate=function(){},I.TilingSprite.prototype.generateTilingTexture=function(e,t){if(this.texture.baseTexture.hasLoaded){var i=this.texture,n=i.frame,r=this._frame.sourceSizeW||this._frame.width,o=this._frame.sourceSizeH||this._frame.height,a=0,s=0;this._frame.trimmed&&(a=this._frame.spriteSourceSizeX,s=this._frame.spriteSourceSizeY),e&&(r=I.getNextPowerOfTwo(r),o=I.getNextPowerOfTwo(o)),this.canvasBuffer?(this.canvasBuffer.resize(r,o),this.tilingTexture.baseTexture.width=r,this.tilingTexture.baseTexture.height=o):(this.canvasBuffer=new I.CanvasBuffer(r,o),this.tilingTexture=I.Texture.fromCanvas(this.canvasBuffer.canvas),this.tilingTexture.isTiling=!0),this.tilingTexture.needsUpdate=!0,this.textureDebug&&(this.canvasBuffer.context.strokeStyle="#00ff00",this.canvasBuffer.context.strokeRect(0,0,r,o));var p=i.crop.width,l=i.crop.height;p===r&&l===o||(p=r,l=o),this.canvasBuffer.context.drawImage(i.baseTexture.source,i.crop.x,i.crop.y,i.crop.width,i.crop.height,a,s,p,l),this.tileScaleOffset.x=n.width/r,this.tileScaleOffset.y=n.height/o,this.refreshTexture=!1,this.tilingTexture.baseTexture._powerOf2=!0}},I.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,i=e*(1-this.anchor.x),n=e*-this.anchor.x,r=t*(1-this.anchor.y),o=t*-this.anchor.y,a=this.worldTransform,s=a.a,p=a.b,l=a.c,h=a.d,u=a.tx,d=a.ty,c=s*n+l*o+u,_=h*o+p*n+d,y=s*i+l*o+u,x=h*o+p*i+d,m=s*i+l*r+u,f=h*r+p*i+d,v=s*n+l*r+u,g=h*r+p*n+d,z=-1/0,b=-1/0,w=1/0,S=1/0;w=v<(w=m<(w=y<(w=c<w?c:w)?y:w)?m:w)?v:w,S=g<(S=f<(S=x<(S=_<S?_:S)?x:S)?f:S)?g:S,z=(z=(z=(z=z<c?c:z)<y?y:z)<m?m:z)<v?v:z,b=(b=(b=(b=b<_?_:b)<x?x:b)<f?f:b)<g?g:b;var C=this._bounds;return C.x=w,C.width=z-w,C.y=S,C.height=b-S,this._currentBounds=C},I.TilingSprite.prototype.destroy=function(){I.Sprite.prototype.destroy.call(this),this.canvasBuffer&&(this.canvasBuffer.destroy(),this.canvasBuffer=null),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture&&(this.tilingTexture.destroy(!0),this.tilingTexture=null)},Object.defineProperty(I.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(I.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=I),exports.PIXI=I):"undefined"!=typeof define&&define.amd?define("PIXI",e.PIXI=I):e.PIXI=I,I}.call(this),function(){function n(e,t){this._scaleFactor=e,this._deltaMode=t,this.originalEvent=null}var o,e=this,U=U||{VERSION:"2.6.15",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,ROPE:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,CREATURE:27,VIDEO:28,PENDING_ATLAS:-1,HORIZONTAL:0,VERTICAL:1,LANDSCAPE:0,PORTRAIT:1,ANGLE_UP:270,ANGLE_DOWN:90,ANGLE_LEFT:180,ANGLE_RIGHT:0,ANGLE_NORTH_EAST:315,ANGLE_NORTH_WEST:225,ANGLE_SOUTH_EAST:45,ANGLE_SOUTH_WEST:135,TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12,blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1},PIXI:PIXI||{}};if(Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Function.prototype.bind||(Function.prototype.bind=(o=Array.prototype.slice,function(t){function i(){var e=r.concat(o.call(arguments));n.apply(this instanceof i?this:t,e)}var n=this,r=o.call(arguments,1);if("function"!=typeof n)throw new TypeError;return i.prototype=function e(t){if(t&&(e.prototype=t),!(this instanceof e))return new e}(n.prototype),i})),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=2<=arguments.length?arguments[1]:void 0,r=0;r<i;r++)r in t&&e.call(n,t[r],r,t)}),"function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array){var t=function(e){var t=new Array;window[e]=function(e){if("number"==typeof e){Array.call(this,e),this.length=e;for(var t=0;t<this.length;t++)this[t]=0}else{Array.call(this,e.length),this.length=e.length;for(t=0;t<this.length;t++)this[t]=e[t]}},window[e].prototype=t,window[e].constructor=window[e]};t("Uint32Array"),t("Int16Array")}for(var i in window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){}),/firefox/i.test(navigator.userAgent)&&(window.oldGetComputedStyle=window.getComputedStyle,window.getComputedStyle=function(e,t){var i=window.oldGetComputedStyle(e,t);return null===i?{getPropertyValue:function(){}}:i}),U.Utils={reverseString:function(e){return e.split("").reverse().join("")},getProperty:function(e,t){for(var i=t.split("."),n=i.pop(),r=i.length,o=1,a=i[0];o<r&&(e=e[a]);)a=i[o],o++;return e?e[n]:null},setProperty:function(e,t,i){for(var n=t.split("."),r=n.pop(),o=n.length,a=1,s=n[0];a<o&&(e=e[s]);)s=n[a],a++;return e&&(e[r]=i),e},chanceRoll:function(e){return void 0===e&&(e=50),0<e&&100*Math.random()<=e},randomChoice:function(e,t){return Math.random()<.5?e:t},parseDimension:function(e,t){var i=0;return"string"==typeof e?"%"===e.substr(-1)?(i=parseInt(e,10)/100,0===t?window.innerWidth*i:window.innerHeight*i):parseInt(e,10):e},pad:function(e,t,i,n){if(void 0===t)t=0;if(void 0===i)i=" ";if(void 0===n)n=3;var r=0;if(t+1>=(e=e.toString()).length)switch(n){case 1:e=new Array(t+1-e.length).join(i)+e;break;case 3:var o=Math.ceil((r=t-e.length)/2);e=new Array(r-o+1).join(i)+e+new Array(o+1).join(i);break;default:e+=new Array(t+1-e.length).join(i)}return e},isPlainObject:function(e){if("object"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},extend:function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,p=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},s=2),p===s&&(a=this,--s);s<p;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],a!==(n=e[t])&&(l&&n&&(U.Utils.isPlainObject(n)||(r=Array.isArray(n)))?(o=r?(r=!1,i&&Array.isArray(i)?i:[]):i&&U.Utils.isPlainObject(i)?i:{},a[t]=U.Utils.extend(l,o,n)):void 0!==n&&(a[t]=n));return a},mixinPrototype:function(e,t,i){void 0===i&&(i=!1);for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r],a=t[o];!i&&o in e||(!a||"function"!=typeof a.get&&"function"!=typeof a.set?e[o]=a:"function"==typeof a.clone?e[o]=a.clone():Object.defineProperty(e,o,a))}},mixin:function(e,t){if(!e||"object"!=typeof e)return t;for(var i in e){var n=e[i];if(!n.childNodes&&!n.cloneNode){var r=typeof e[i];e[i]&&"object"===r?typeof t[i]===r?t[i]=U.Utils.mixin(e[i],t[i]):t[i]=U.Utils.mixin(e[i],new n.constructor):t[i]=e[i]}}return t}},U.Circle=function(e,t,i){e=e||0,t=t||0,i=i||0,this.x=e,this.y=t,this._diameter=i,(this._radius=0)<i&&(this._radius=.5*i),this.type=U.CIRCLE},U.Circle.prototype={circumference:function(){return Math.PI*this._radius*2},random:function(e){void 0===e&&(e=new U.Point);var t=2*Math.PI*Math.random(),i=Math.random()+Math.random(),n=1<i?2-i:i,r=n*Math.cos(t),o=n*Math.sin(t);return e.x=this.x+r*this.radius,e.y=this.y+o*this.radius,e},getBounds:function(){return new U.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(e,t,i){return this.x=e,this.y=t,this._diameter=i,this._radius=.5*i,this},copyFrom:function(e){return this.setTo(e.x,e.y,e.diameter)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.diameter=this._diameter,e},distance:function(e,t){var i=U.Math.distance(this.x,this.y,e.x,e.y);return t?Math.round(i):i},clone:function(e){return null==e?e=new U.Circle(this.x,this.y,this.diameter):e.setTo(this.x,this.y,this.diameter),e},contains:function(e,t){return U.Circle.contains(this,e,t)},circumferencePoint:function(e,t,i){return U.Circle.circumferencePoint(this,e,t,i)},offset:function(e,t){return this.x+=e,this.y+=t,this},offsetPoint:function(e){return this.offset(e.x,e.y)},toString:function(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},U.Circle.prototype.constructor=U.Circle,Object.defineProperty(U.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(e){0<e&&(this._diameter=e,this._radius=.5*e)}}),Object.defineProperty(U.Circle.prototype,"radius",{get:function(){return this._radius},set:function(e){0<e&&(this._radius=e,this._diameter=2*e)}}),Object.defineProperty(U.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(e){e>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-e}}),Object.defineProperty(U.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(e){e<this.x?(this._radius=0,this._diameter=0):this.radius=e-this.x}}),Object.defineProperty(U.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(e){e>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-e}}),Object.defineProperty(U.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(e){e<this.y?(this._radius=0,this._diameter=0):this.radius=e-this.y}}),Object.defineProperty(U.Circle.prototype,"area",{get:function(){return 0<this._radius?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(U.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(e){!0===e&&this.setTo(0,0,0)}}),U.Circle.contains=function(e,t,i){return 0<e.radius&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom&&(e.x-t)*(e.x-t)+(e.y-i)*(e.y-i)<=e.radius*e.radius},U.Circle.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.diameter===t.diameter},U.Circle.intersects=function(e,t){return U.Math.distance(e.x,e.y,t.x,t.y)<=e.radius+t.radius},U.Circle.circumferencePoint=function(e,t,i,n){return void 0===i&&(i=!1),void 0===n&&(n=new U.Point),!0===i&&(t=U.Math.degToRad(t)),n.x=e.x+e.radius*Math.cos(t),n.y=e.y+e.radius*Math.sin(t),n},U.Circle.intersectsRectangle=function(e,t){var i=Math.abs(e.x-t.x-t.halfWidth);if(i>t.halfWidth+e.radius)return!1;var n=Math.abs(e.y-t.y-t.halfHeight);if(n>t.halfHeight+e.radius)return!1;if(i<=t.halfWidth||n<=t.halfHeight)return!0;var r=i-t.halfWidth,o=n-t.halfHeight;return r*r+o*o<=e.radius*e.radius},PIXI.Circle=U.Circle,U.Ellipse=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.x=e,this.y=t,this.width=i,this.height=n,this.type=U.ELLIPSE},U.Ellipse.prototype={setTo:function(e,t,i,n){return this.x=e,this.y=t,this.width=i,this.height=n,this},getBounds:function(){return new U.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(e){return this.setTo(e.x,e.y,e.width,e.height)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},clone:function(e){return null==e?e=new U.Ellipse(this.x,this.y,this.width,this.height):e.setTo(this.x,this.y,this.width,this.height),e},contains:function(e,t){return U.Ellipse.contains(this,e,t)},random:function(e){void 0===e&&(e=new U.Point);var t=Math.random()*Math.PI*2,i=Math.random();return e.x=Math.sqrt(i)*Math.cos(t),e.y=Math.sqrt(i)*Math.sin(t),e.x=this.x+e.x*this.width/2,e.y=this.y+e.y*this.height/2,e},toString:function(){return"[{Phaser.Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},U.Ellipse.prototype.constructor=U.Ellipse,Object.defineProperty(U.Ellipse.prototype,"left",{get:function(){return this.x},set:function(e){this.x=e}}),Object.defineProperty(U.Ellipse.prototype,"right",{get:function(){return this.x+this.width},set:function(e){e<this.x?this.width=0:this.width=e-this.x}}),Object.defineProperty(U.Ellipse.prototype,"top",{get:function(){return this.y},set:function(e){this.y=e}}),Object.defineProperty(U.Ellipse.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){e<this.y?this.height=0:this.height=e-this.y}}),Object.defineProperty(U.Ellipse.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(e){!0===e&&this.setTo(0,0,0,0)}}),U.Ellipse.contains=function(e,t,i){if(e.width<=0||e.height<=0)return!1;var n=(t-e.x)/e.width-.5,r=(i-e.y)/e.height-.5;return(n*=n)+(r*=r)<.25},PIXI.Ellipse=U.Ellipse,U.Line=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.start=new U.Point(e,t),this.end=new U.Point(i,n),this.type=U.LINE},U.Line.prototype={setTo:function(e,t,i,n){return this.start.setTo(e,t),this.end.setTo(i,n),this},fromSprite:function(e,t,i){return void 0===i&&(i=!1),i?this.setTo(e.center.x,e.center.y,t.center.x,t.center.y):this.setTo(e.x,e.y,t.x,t.y)},fromAngle:function(e,t,i,n){return this.start.setTo(e,t),this.end.setTo(e+Math.cos(i)*n,t+Math.sin(i)*n),this},rotate:function(e,t){var i=(this.start.x+this.end.x)/2,n=(this.start.y+this.end.y)/2;return this.start.rotate(i,n,e,t),this.end.rotate(i,n,e,t),this},rotateAround:function(e,t,i,n){return this.start.rotate(e,t,i,n),this.end.rotate(e,t,i,n),this},intersects:function(e,t,i){return U.Line.intersectsPoints(this.start,this.end,e.start,e.end,t,i)},reflect:function(e){return U.Line.reflect(this,e)},midPoint:function(e){return void 0===e&&(e=new U.Point),e.x=(this.start.x+this.end.x)/2,e.y=(this.start.y+this.end.y)/2,e},centerOn:function(e,t){var i=e-(this.start.x+this.end.x)/2,n=t-(this.start.y+this.end.y)/2;this.start.add(i,n),this.end.add(i,n)},pointOnLine:function(e,t){return(e-this.start.x)*(this.end.y-this.start.y)==(this.end.x-this.start.x)*(t-this.start.y)},pointOnSegment:function(e,t){var i=Math.min(this.start.x,this.end.x),n=Math.max(this.start.x,this.end.x),r=Math.min(this.start.y,this.end.y),o=Math.max(this.start.y,this.end.y);return this.pointOnLine(e,t)&&i<=e&&e<=n&&r<=t&&t<=o},random:function(e){void 0===e&&(e=new U.Point);var t=Math.random();return e.x=this.start.x+t*(this.end.x-this.start.x),e.y=this.start.y+t*(this.end.y-this.start.y),e},coordinatesOnLine:function(e,t){void 0===e&&(e=1),void 0===t&&(t=[]);var i=Math.round(this.start.x),n=Math.round(this.start.y),r=Math.round(this.end.x),o=Math.round(this.end.y),a=Math.abs(r-i),s=Math.abs(o-n),p=i<r?1:-1,l=n<o?1:-1,h=a-s;t.push([i,n]);for(var u=1;i!==r||n!==o;){var d=h<<1;-s<d&&(h-=s,i+=p),d<a&&(h+=a,n+=l),u%e==0&&t.push([i,n]),u++}return t},clone:function(e){return null==e?e=new U.Line(this.start.x,this.start.y,this.end.x,this.end.y):e.setTo(this.start.x,this.start.y,this.end.x,this.end.y),e}},Object.defineProperty(U.Line.prototype,"length",{get:function(){return Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(U.Line.prototype,"angle",{get:function(){return Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}}),Object.defineProperty(U.Line.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(U.Line.prototype,"perpSlope",{get:function(){return-(this.end.x-this.start.x)/(this.end.y-this.start.y)}}),Object.defineProperty(U.Line.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(U.Line.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)}}),Object.defineProperty(U.Line.prototype,"normalX",{get:function(){return Math.cos(this.angle-1.5707963267948966)}}),Object.defineProperty(U.Line.prototype,"normalY",{get:function(){return Math.sin(this.angle-1.5707963267948966)}}),Object.defineProperty(U.Line.prototype,"normalAngle",{get:function(){return U.Math.wrap(this.angle-1.5707963267948966,-Math.PI,Math.PI)}}),U.Line.intersectsPoints=function(e,t,i,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=new U.Point);var a=t.y-e.y,s=n.y-i.y,p=e.x-t.x,l=i.x-n.x,h=t.x*e.y-e.x*t.y,u=n.x*i.y-i.x*n.y,d=a*l-s*p;if(0===d)return null;if(o.x=(p*u-l*h)/d,o.y=(s*h-a*u)/d,r){var c=(n.y-i.y)*(t.x-e.x)-(n.x-i.x)*(t.y-e.y),_=((n.x-i.x)*(e.y-i.y)-(n.y-i.y)*(e.x-i.x))/c,y=((t.x-e.x)*(e.y-i.y)-(t.y-e.y)*(e.x-i.x))/c;return 0<=_&&_<=1&&0<=y&&y<=1?o:null}return o},U.Line.intersects=function(e,t,i,n){return U.Line.intersectsPoints(e.start,e.end,t.start,t.end,i,n)},U.Line.intersectsRectangle=function(e,t){if(!U.Rectangle.intersects(e,t))return!1;var i=e.start.x,n=e.start.y,r=e.end.x,o=e.end.y,a=t.x,s=t.y,p=t.right,l=t.bottom,h=0;if(a<=i&&i<=p&&s<=n&&n<=l||a<=r&&r<=p&&s<=o&&o<=l)return!0;if(i<a&&a<=r){if((h=n+(o-n)*(a-i)/(r-i))>s&&h<=l)return!0}else if(p<i&&r<=p&&(h=n+(o-n)*(p-i)/(r-i))>=s&&h<=l)return!0;if(n<s&&s<=o){if((h=i+(r-i)*(s-n)/(o-n))>=a&&h<=p)return!0}else if(l<n&&o<=l&&(h=i+(r-i)*(l-n)/(o-n))>=a&&h<=p)return!0;return!1},U.Line.reflect=function(e,t){return 2*t.normalAngle-3.141592653589793-e.angle},U.Matrix=function(e,t,i,n,r,o){null!=e||(e=1),null!=t||(t=0),null!=i||(i=0),null!=n||(n=1),null!=r||(r=0),null!=o||(o=0),this.a=e,this.b=t,this.c=i,this.d=n,this.tx=r,this.ty=o,this.type=U.MATRIX},U.Matrix.prototype={fromArray:function(e){return this.setTo(e[0],e[1],e[3],e[4],e[2],e[5])},setTo:function(e,t,i,n,r,o){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=r,this.ty=o,this},clone:function(e){return null==e?e=new U.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty):(e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty),e},copyTo:function(e){return e.copyFrom(this),e},copyFrom:function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},toArray:function(e,t){return void 0===t&&(t=new PIXI.Float32Array(9)),e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0),t[8]=1,t},apply:function(e,t){return void 0===t&&(t=new U.Point),t.x=this.a*e.x+this.c*e.y+this.tx,t.y=this.b*e.x+this.d*e.y+this.ty,t},applyInverse:function(e,t){void 0===t&&(t=new U.Point);var i=1/(this.a*this.d+this.c*-this.b),n=e.x,r=e.y;return t.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t},translate:function(e,t){return this.tx+=e,this.ty+=t,this},scale:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,r=this.c,o=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=r*t-this.d*i,this.d=r*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this},append:function(e){var t=this.a,i=this.b,n=this.c,r=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*r,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*r,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*r+this.ty,this},identity:function(){return this.setTo(1,0,0,1,0,0)}},U.identityMatrix=new U.Matrix,PIXI.Matrix=U.Matrix,PIXI.identityMatrix=U.identityMatrix,U.Point=function(e,t){e=e||0,t=t||0,this.x=e,this.y=t,this.type=U.POINT},U.Point.prototype={copyFrom:function(e){return this.setTo(e.x,e.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(e,t){return this.x=e||0,this.y=t||(0!==t?this.x:0),this},set:function(e,t){return this.x=e||0,this.y=t||(0!==t?this.x:0),this},add:function(e,t){return this.x+=e,this.y+=t,this},subtract:function(e,t){return this.x-=e,this.y-=t,this},multiply:function(e,t){return this.x*=e,this.y*=t,this},divide:function(e,t){return this.x/=e,this.y/=t,this},clampX:function(e,t){return this.x=U.Math.clamp(this.x,e,t),this},clampY:function(e,t){return this.y=U.Math.clamp(this.y,e,t),this},clamp:function(e,t){return this.x=U.Math.clamp(this.x,e,t),this.y=U.Math.clamp(this.y,e,t),this},clone:function(e){return null==e?e=new U.Point(this.x,this.y):e.setTo(this.x,this.y),e},copyTo:function(e){return e.x=this.x,e.y=this.y,e},distance:function(e,t){return U.Point.distance(this,e,t)},equals:function(e){return e.x===this.x&&e.y===this.y},angle:function(e,t){return void 0===t&&(t=!1),t?U.Math.radToDeg(Math.atan2(e.y-this.y,e.x-this.x)):Math.atan2(e.y-this.y,e.x-this.x)},rotate:function(e,t,i,n,r){return U.Point.rotate(this,e,t,i,n,r)},getMagnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(e){return this.normalize().multiply(e,e)},normalize:function(){if(!this.isZero()){var e=this.getMagnitude();this.x/=e,this.y/=e}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},floor:function(){return this.setTo(Math.floor(this.x),Math.floor(this.y))},ceil:function(){return this.setTo(Math.ceil(this.x),Math.ceil(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},U.Point.prototype.constructor=U.Point,U.Point.add=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x+t.x,i.y=e.y+t.y,i},U.Point.subtract=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x-t.x,i.y=e.y-t.y,i},U.Point.multiply=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x*t.x,i.y=e.y*t.y,i},U.Point.divide=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x/t.x,i.y=e.y/t.y,i},U.Point.equals=function(e,t){return e.x===t.x&&e.y===t.y},U.Point.angle=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)},U.Point.negative=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-e.x,-e.y)},U.Point.multiplyAdd=function(e,t,i,n){return void 0===n&&(n=new U.Point),n.setTo(e.x+t.x*i,e.y+t.y*i)},U.Point.interpolate=function(e,t,i,n){return void 0===n&&(n=new U.Point),n.setTo(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i)},U.Point.perp=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-e.y,e.x)},U.Point.rperp=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(e.y,-e.x)},U.Point.distance=function(e,t,i){var n=U.Math.distance(e.x,e.y,t.x,t.y);return i?Math.round(n):n},U.Point.project=function(e,t,i){void 0===i&&(i=new U.Point);var n=e.dot(t)/t.getMagnitudeSq();return 0!==n&&i.setTo(n*t.x,n*t.y),i},U.Point.projectUnit=function(e,t,i){void 0===i&&(i=new U.Point);var n=e.dot(t);return 0!==n&&i.setTo(n*t.x,n*t.y),i},U.Point.normalRightHand=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-1*e.y,e.x)},U.Point.normalize=function(e,t){void 0===t&&(t=new U.Point);var i=e.getMagnitude();return 0!==i&&t.setTo(e.x/i,e.y/i),t},U.Point.rotate=function(e,t,i,n,r,o){if(r&&(n=U.Math.degToRad(n)),void 0===o){e.subtract(t,i);var a=Math.sin(n),s=Math.cos(n),p=s*e.x-a*e.y,l=a*e.x+s*e.y;e.x=p+t,e.y=l+i}else{var h=n+Math.atan2(e.y-i,e.x-t);e.x=t+o*Math.cos(h),e.y=i+o*Math.sin(h)}return e},U.Point.centroid=function(e,t){if(void 0===t&&(t=new U.Point),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("Phaser.Point. Parameter 'points' must be an array");var i=e.length;if(i<1)throw new Error("Phaser.Point. Parameter 'points' array must not be empty");if(1===i)return t.copyFrom(e[0]),t;for(var n=0;n<i;n++)U.Point.add(t,e[n],t);return t.divide(i,i),t},U.Point.parse=function(e,t,i){t=t||"x",i=i||"y";var n=new U.Point;return e[t]&&(n.x=parseInt(e[t],10)),e[i]&&(n.y=parseInt(e[i],10)),n},PIXI.Point=U.Point,U.Polygon=function(){this.area=0,this._points=[],0<arguments.length&&this.setTo.apply(this,arguments),this.closed=!0,this.flattened=!1,this.type=U.POLYGON},U.Polygon.prototype={toNumberArray:function(e){void 0===e&&(e=[]);for(var t=0;t<this._points.length;t++)"number"==typeof this._points[t]?(e.push(this._points[t]),e.push(this._points[t+1]),t++):(e.push(this._points[t].x),e.push(this._points[t].y));return e},flatten:function(){return this._points=this.toNumberArray(),this.flattened=!0,this},clone:function(e){var t=this._points.slice();return null==e?e=new U.Polygon(t):e.setTo(t),e},contains:function(e,t){var i=!1;if(this.flattened)for(var n=-2,r=this._points.length-2;(n+=2)<this._points.length;r=n){var o=this._points[n],a=this._points[n+1],s=this._points[r],p=this._points[r+1];(a<=t&&t<p||p<=t&&t<a)&&e<(s-o)*(t-a)/(p-a)+o&&(i=!i)}else for(n=-1,r=this._points.length-1;++n<this._points.length;r=n){o=this._points[n].x,a=this._points[n].y,s=this._points[r].x,p=this._points[r].y;(a<=t&&t<p||p<=t&&t<a)&&e<(s-o)*(t-a)/(p-a)+o&&(i=!i)}return i},setTo:function(e){if(this.area=0,this._points=[],0<arguments.length){Array.isArray(e)||(e=Array.prototype.slice.call(arguments));for(var t=Number.MAX_VALUE,i=0,n=e.length;i<n;i++){if("number"==typeof e[i]){var r=new PIXI.Point(e[i],e[i+1]);i++}else if(Array.isArray(e[i]))r=new PIXI.Point(e[i][0],e[i][1]);else r=new PIXI.Point(e[i].x,e[i].y);this._points.push(r),r.y<t&&(t=r.y)}this.calculateArea(t)}return this},calculateArea:function(e){for(var t,i,n,r,o=0,a=this._points.length;o<a;o++)t=this._points[o],i=o===a-1?this._points[0]:this._points[o+1],n=(t.y-e+(i.y-e))/2,r=t.x-i.x,this.area+=n*r;return this.area}},U.Polygon.prototype.constructor=U.Polygon,Object.defineProperty(U.Polygon.prototype,"points",{get:function(){return this._points},set:function(e){null!=e?this.setTo(e):this.setTo()}}),PIXI.Polygon=U.Polygon,U.Rectangle=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.x=e,this.y=t,this.width=i,this.height=n,this.type=U.RECTANGLE},U.Rectangle.prototype={offset:function(e,t){return this.x+=e,this.y+=t,this},offsetPoint:function(e){return this.offset(e.x,e.y)},setTo:function(e,t,i,n){return this.x=e,this.y=t,this.width=i,this.height=n,this},scale:function(e,t){return void 0===t&&(t=e),this.width*=e,this.height*=t,this},centerOn:function(e,t){return this.centerX=e,this.centerY=t,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},copyFrom:function(e){return this.setTo(e.x,e.y,e.width,e.height)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},inflate:function(e,t){return U.Rectangle.inflate(this,e,t)},size:function(e){return U.Rectangle.size(this,e)},resize:function(e,t){return this.width=e,this.height=t,this},clone:function(e){return U.Rectangle.clone(this,e)},contains:function(e,t){return U.Rectangle.contains(this,e,t)},containsRect:function(e){return U.Rectangle.containsRect(e,this)},equals:function(e){return U.Rectangle.equals(this,e)},intersection:function(e,t){return U.Rectangle.intersection(this,e,t)},intersects:function(e){return U.Rectangle.intersects(this,e)},intersectsRaw:function(e,t,i,n,r){return U.Rectangle.intersectsRaw(this,e,t,i,n,r)},union:function(e,t){return U.Rectangle.union(this,e,t)},random:function(e){return void 0===e&&(e=new U.Point),e.x=this.randomX,e.y=this.randomY,e},getPoint:function(e,t){switch(void 0===t&&(t=new U.Point),e){default:case U.TOP_LEFT:return t.set(this.x,this.y);case U.TOP_CENTER:return t.set(this.centerX,this.y);case U.TOP_RIGHT:return t.set(this.right,this.y);case U.LEFT_CENTER:return t.set(this.x,this.centerY);case U.CENTER:return t.set(this.centerX,this.centerY);case U.RIGHT_CENTER:return t.set(this.right,this.centerY);case U.BOTTOM_LEFT:return t.set(this.x,this.bottom);case U.BOTTOM_CENTER:return t.set(this.centerX,this.bottom);case U.BOTTOM_RIGHT:return t.set(this.right,this.bottom)}},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(U.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(U.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(U.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){e<=this.y?this.height=0:this.height=e-this.y}}),Object.defineProperty(U.Rectangle.prototype,"bottomLeft",{get:function(){return new U.Point(this.x,this.bottom)},set:function(e){this.x=e.x,this.bottom=e.y}}),Object.defineProperty(U.Rectangle.prototype,"bottomRight",{get:function(){return new U.Point(this.right,this.bottom)},set:function(e){this.right=e.x,this.bottom=e.y}}),Object.defineProperty(U.Rectangle.prototype,"left",{get:function(){return this.x},set:function(e){e>=this.right?this.width=0:this.width=this.right-e,this.x=e}}),Object.defineProperty(U.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(e){e<=this.x?this.width=0:this.width=e-this.x}}),Object.defineProperty(U.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(U.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(U.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(e){this.x=e-this.halfWidth}}),Object.defineProperty(U.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(e){this.y=e-this.halfHeight}}),Object.defineProperty(U.Rectangle.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(U.Rectangle.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(U.Rectangle.prototype,"top",{get:function(){return this.y},set:function(e){e>=this.bottom?(this.height=0,this.y=e):this.height=this.bottom-e}}),Object.defineProperty(U.Rectangle.prototype,"topLeft",{get:function(){return new U.Point(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}}),Object.defineProperty(U.Rectangle.prototype,"topRight",{get:function(){return new U.Point(this.x+this.width,this.y)},set:function(e){this.right=e.x,this.y=e.y}}),Object.defineProperty(U.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(e){!0===e&&this.setTo(0,0,0,0)}}),U.Rectangle.prototype.constructor=U.Rectangle,U.Rectangle.inflate=function(e,t,i){return e.x-=t,e.width+=2*t,e.y-=i,e.height+=2*i,e},U.Rectangle.inflatePoint=function(e,t){return U.Rectangle.inflate(e,t.x,t.y)},U.Rectangle.size=function(e,t){return null==t?t=new U.Point(e.width,e.height):t.setTo(e.width,e.height),t},U.Rectangle.clone=function(e,t){return null==t?t=new U.Rectangle(e.x,e.y,e.width,e.height):t.setTo(e.x,e.y,e.width,e.height),t},U.Rectangle.contains=function(e,t,i){return!(e.width<=0||e.height<=0)&&t>=e.x&&t<e.right&&i>=e.y&&i<e.bottom},U.Rectangle.containsRaw=function(e,t,i,n,r,o){return e<=r&&r<e+i&&t<=o&&o<t+n},U.Rectangle.containsPoint=function(e,t){return U.Rectangle.contains(e,t.x,t.y)},U.Rectangle.containsRect=function(e,t){return!(e.volume>t.volume)&&e.x>=t.x&&e.y>=t.y&&e.right<t.right&&e.bottom<t.bottom},U.Rectangle.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},U.Rectangle.sameDimensions=function(e,t){return e.width===t.width&&e.height===t.height},U.Rectangle.intersection=function(e,t,i){return void 0===i&&(i=new U.Rectangle),U.Rectangle.intersects(e,t)&&(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y),i},U.Rectangle.intersects=function(e,t){return!(e.width<=0||e.height<=0||t.width<=0||t.height<=0||e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)},U.Rectangle.intersectsRaw=function(e,t,i,n,r,o){return void 0===o&&(o=0),!(t>e.right+o||i<e.left-o||n>e.bottom+o||r<e.top-o)},U.Rectangle.union=function(e,t,i){return void 0===i&&(i=new U.Rectangle),i.setTo(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.max(e.right,t.right)-Math.min(e.left,t.left),Math.max(e.bottom,t.bottom)-Math.min(e.top,t.top))},U.Rectangle.aabb=function(e,t){void 0===t&&(t=new U.Rectangle);var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return e.forEach(function(e){e.x>i&&(i=e.x),e.x<n&&(n=e.x),e.y>r&&(r=e.y),e.y<o&&(o=e.y)}),t.setTo(n,o,i-n,r-o),t},PIXI.Rectangle=U.Rectangle,PIXI.EmptyRectangle=new U.Rectangle(0,0,0,0),U.RoundedRectangle=function(e,t,i,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=20),this.x=e,this.y=t,this.width=i,this.height=n,this.radius=r||20,this.type=U.ROUNDEDRECTANGLE},U.RoundedRectangle.prototype={clone:function(){return new U.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},contains:function(e,t){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(i<=e&&e<=i+this.width){var n=this.y;if(n<=t&&t<=n+this.height)return!0}return!1}},U.RoundedRectangle.prototype.constructor=U.RoundedRectangle,PIXI.RoundedRectangle=U.RoundedRectangle,U.Camera=function(e,t,i,n,r,o){this.game=e,this.world=e.world,this.id=0,this.view=new U.Rectangle(i,n,r,o),this.bounds=new U.Rectangle(i,n,r,o),this.deadzone=null,this.visible=!0,this.roundPx=!0,this.atLimit={x:!1,y:!1},this.target=null,this.displayObject=null,this.scale=null,this.totalInView=0,this.lerp=new U.Point(1,1),this.onShakeComplete=new U.Signal,this.onFlashComplete=new U.Signal,this.onFadeComplete=new U.Signal,this.fx=null,this._targetPosition=new U.Point,this._edge=0,this._position=new U.Point,this._shake={intensity:0,duration:0,horizontal:!1,vertical:!1,shakeBounds:!0,x:0,y:0},this._fxDuration=0,this._fxType=0},U.Camera.FOLLOW_LOCKON=0,U.Camera.FOLLOW_PLATFORMER=1,U.Camera.FOLLOW_TOPDOWN=2,U.Camera.FOLLOW_TOPDOWN_TIGHT=3,U.Camera.SHAKE_BOTH=4,U.Camera.SHAKE_HORIZONTAL=5,U.Camera.SHAKE_VERTICAL=6,U.Camera.ENABLE_FX=!0,U.Camera.prototype={boot:function(){this.displayObject=this.game.world,this.scale=this.game.world.scale,this.game.camera=this,U.Graphics&&U.Camera.ENABLE_FX&&(this.fx=new U.Graphics(this.game),this.game.stage.addChild(this.fx))},preUpdate:function(){this.totalInView=0},follow:function(e,t,i,n){var r;switch(void 0===t&&(t=U.Camera.FOLLOW_LOCKON),void 0===i&&(i=1),void 0===n&&(n=1),this.target=e,this.lerp.set(i,n),t){case U.Camera.FOLLOW_PLATFORMER:var o=this.width/8,a=this.height/3;this.deadzone=new U.Rectangle((this.width-o)/2,(this.height-a)/2-.25*a,o,a);break;case U.Camera.FOLLOW_TOPDOWN:r=Math.max(this.width,this.height)/4,this.deadzone=new U.Rectangle((this.width-r)/2,(this.height-r)/2,r,r);break;case U.Camera.FOLLOW_TOPDOWN_TIGHT:r=Math.max(this.width,this.height)/8,this.deadzone=new U.Rectangle((this.width-r)/2,(this.height-r)/2,r,r);break;case U.Camera.FOLLOW_LOCKON:default:this.deadzone=null}},unfollow:function(){this.target=null},focusOn:function(e){this.setPosition(Math.round(e.x-this.view.halfWidth),Math.round(e.y-this.view.halfHeight))},focusOnXY:function(e,t){this.setPosition(Math.round(e-this.view.halfWidth),Math.round(t-this.view.halfHeight))},shake:function(e,t,i,n,r){return void 0===e&&(e=.05),void 0===t&&(t=500),void 0===i&&(i=!0),void 0===n&&(n=U.Camera.SHAKE_BOTH),void 0===r&&(r=!0),!(!i&&0<this._shake.duration||(this._shake.intensity=e,this._shake.duration=t,this._shake.shakeBounds=r,this._shake.x=0,this._shake.y=0,this._shake.horizontal=n===U.Camera.SHAKE_BOTH||n===U.Camera.SHAKE_HORIZONTAL,this._shake.vertical=n===U.Camera.SHAKE_BOTH||n===U.Camera.SHAKE_VERTICAL,0))},flash:function(e,t,i){return void 0===e&&(e=16777215),void 0===t&&(t=500),void 0===i&&(i=!1),!(!this.fx||!i&&0<this._fxDuration||(this.fx.clear(),this.fx.beginFill(e),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=1,this._fxDuration=t,this._fxType=0))},fade:function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=500),void 0===i&&(i=!1),!(!this.fx||!i&&0<this._fxDuration||(this.fx.clear(),this.fx.beginFill(e),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=0,this._fxDuration=t,this._fxType=1,0))},update:function(){0<this._fxDuration&&this.updateFX(),0<this._shake.duration&&this.updateShake(),this.bounds&&this.checkBounds(),this.roundPx&&(this.view.floor(),this._shake.x=Math.floor(this._shake.x),this._shake.y=Math.floor(this._shake.y)),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},updateFX:function(){0===this._fxType?(this.fx.alpha-=this.game.time.elapsedMS/this._fxDuration,this.fx.alpha<=0&&(this._fxDuration=0,this.fx.alpha=0,this.onFlashComplete.dispatch())):(this.fx.alpha+=this.game.time.elapsedMS/this._fxDuration,1<=this.fx.alpha&&(this._fxDuration=0,this.fx.alpha=1,this.onFadeComplete.dispatch()))},updateShake:function(){this._shake.duration-=this.game.time.elapsedMS,this._shake.duration<=0?(this.onShakeComplete.dispatch(),this._shake.x=0,this._shake.y=0):(this._shake.horizontal&&(this._shake.x=this.game.rnd.frac()*this._shake.intensity*this.view.width*2-this._shake.intensity*this.view.width),this._shake.vertical&&(this._shake.y=this.game.rnd.frac()*this._shake.intensity*this.view.height*2-this._shake.intensity*this.view.height))},updateTarget:function(){this._targetPosition.x=this.view.x+this.target.worldPosition.x,this._targetPosition.y=this.view.y+this.target.worldPosition.y,this.deadzone?(this._edge=this._targetPosition.x-this.view.x,this._edge<this.deadzone.left?this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.left,this.lerp.x):this._edge>this.deadzone.right&&(this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.right,this.lerp.x)),this._edge=this._targetPosition.y-this.view.y,this._edge<this.deadzone.top?this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.top,this.lerp.y):this._edge>this.deadzone.bottom&&(this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.bottom,this.lerp.y))):(this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.view.halfWidth,this.lerp.x),this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.view.halfHeight,this.lerp.y)),this.bounds&&this.checkBounds(),this.roundPx&&this.view.floor(),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},setBoundsToWorld:function(){this.bounds&&this.bounds.copyFrom(this.game.world.bounds)},checkBounds:function(){this.atLimit.x=!1,this.atLimit.y=!1;var e=this.view.x+this._shake.x,t=this.view.right+this._shake.x,i=this.view.y+this._shake.y,n=this.view.bottom+this._shake.y;e<=this.bounds.x*this.scale.x&&(this.atLimit.x=!0,this.view.x=this.bounds.x*this.scale.x,this._shake.shakeBounds||(this._shake.x=0)),t>=this.bounds.right*this.scale.x&&(this.atLimit.x=!0,this.view.x=this.bounds.right*this.scale.x-this.width,this._shake.shakeBounds||(this._shake.x=0)),i<=this.bounds.top*this.scale.y&&(this.atLimit.y=!0,this.view.y=this.bounds.top*this.scale.y,this._shake.shakeBounds||(this._shake.y=0)),n>=this.bounds.bottom*this.scale.y&&(this.atLimit.y=!0,this.view.y=this.bounds.bottom*this.scale.y-this.height,this._shake.shakeBounds||(this._shake.y=0))},setPosition:function(e,t){this.view.x=e,this.view.y=t,this.bounds&&this.checkBounds()},setSize:function(e,t){this.view.width=e,this.view.height=t},reset:function(){this.target=null,this.view.x=0,this.view.y=0,this._shake.duration=0,this.resetFX()},resetFX:function(){this.fx&&(this.fx.clear(),this.fx.alpha=0,this._fxDuration=0)}},U.Camera.prototype.constructor=U.Camera,Object.defineProperty(U.Camera.prototype,"x",{get:function(){return this.view.x},set:function(e){this.view.x=e,this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"y",{get:function(){return this.view.y},set:function(e){this.view.y=e,this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"position",{get:function(){return this._position.set(this.view.x,this.view.y),this._position},set:function(e){void 0!==e.x&&(this.view.x=e.x),void 0!==e.y&&(this.view.y=e.y),this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"width",{get:function(){return this.view.width},set:function(e){this.view.width=e}}),Object.defineProperty(U.Camera.prototype,"height",{get:function(){return this.view.height},set:function(e){this.view.height=e}}),Object.defineProperty(U.Camera.prototype,"shakeIntensity",{get:function(){return this._shake.intensity},set:function(e){this._shake.intensity=e}}),U.State=function(){this.game=null,this.key="",this.add=null,this.make=null,this.camera=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.sound=null,this.scale=null,this.stage=null,this.state=null,this.time=null,this.tweens=null,this.world=null,this.particles=null,this.physics=null,this.rnd=null},U.State.prototype={init:function(){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},render:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}},U.State.prototype.constructor=U.State,U.StateManager=function(e,t){this.game=e,this.states={},(this._pendingState=null)!=t&&(this._pendingState=t),this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.current="",this.onStateChange=new U.Signal,this.onInitCallback=null,this.onPreloadCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onResizeCallback=null,this.onPreRenderCallback=null,this.onLoadUpdateCallback=null,this.onLoadRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.onShutDownCallback=null},U.StateManager.prototype={boot:function(){this.game.onPause.add(this.pause,this),this.game.onResume.add(this.resume,this),null!==this._pendingState&&"string"!=typeof this._pendingState&&this.add("default",this._pendingState,!0)},add:function(e,t,i){var n;return void 0===i&&(i=!1),t instanceof U.State?n=t:"object"==typeof t?(n=t).game=this.game:"function"==typeof t&&(n=new t(this.game)),this.states[e]=n,i&&(this.game.isBooted?this.start(e):this._pendingState=e),n},remove:function(e){this.current===e&&(this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onPreRenderCallback=null,this.onRenderCallback=null,this.onResizeCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null),delete this.states[e]},start:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1),this.checkState(e)&&(this._pendingState=e,this._clearWorld=t,this._clearCache=i,3<arguments.length&&(this._args=Array.prototype.splice.call(arguments,3)))},restart:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),this._pendingState=this.current,this._clearWorld=e,this._clearCache=t,2<arguments.length&&(this._args=Array.prototype.slice.call(arguments,2))},dummy:function(){},preUpdate:function(){if(this._pendingState&&this.game.isBooted){var e=this.current;if(this.clearCurrentState(),this.setCurrentState(this._pendingState),this.onStateChange.dispatch(this.current,e),this.current!==this._pendingState)return;this._pendingState=null,this.onPreloadCallback?(this.game.load.reset(!0),this.onPreloadCallback.call(this.callbackContext,this.game),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.loadComplete():this.game.load.start()):this.loadComplete()}},clearCurrentState:function(){this.current&&(this.onShutDownCallback&&this.onShutDownCallback.call(this.callbackContext,this.game),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.physics.clear(),this.game.time.removeAll(),this.game.scale.reset(this._clearWorld),this.game.debug&&this.game.debug.reset(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache&&this.game.cache.destroy()))},checkState:function(e){return this.states[e]&&!!(this.states[e].preload||this.states[e].create||this.states[e].update||this.states[e].render)||!1},link:function(e){this.states[e].game=this.game,this.states[e].add=this.game.add,this.states[e].make=this.game.make,this.states[e].camera=this.game.camera,this.states[e].cache=this.game.cache,this.states[e].input=this.game.input,this.states[e].load=this.game.load,this.states[e].math=this.game.math,this.states[e].sound=this.game.sound,this.states[e].scale=this.game.scale,(this.states[e].state=this).states[e].stage=this.game.stage,this.states[e].time=this.game.time,this.states[e].tweens=this.game.tweens,this.states[e].world=this.game.world,this.states[e].particles=this.game.particles,this.states[e].rnd=this.game.rnd,this.states[e].physics=this.game.physics,this.states[e].key=e},unlink:function(e){this.states[e]&&(this.states[e].game=null,this.states[e].add=null,this.states[e].make=null,this.states[e].camera=null,this.states[e].cache=null,this.states[e].input=null,this.states[e].load=null,this.states[e].math=null,this.states[e].sound=null,this.states[e].scale=null,this.states[e].state=null,this.states[e].stage=null,this.states[e].time=null,this.states[e].tweens=null,this.states[e].world=null,this.states[e].particles=null,this.states[e].rnd=null,this.states[e].physics=null)},setCurrentState:function(e){this.callbackContext=this.states[e],this.link(e),this.onInitCallback=this.states[e].init||this.dummy,this.onPreloadCallback=this.states[e].preload||null,this.onLoadRenderCallback=this.states[e].loadRender||null,this.onLoadUpdateCallback=this.states[e].loadUpdate||null,this.onCreateCallback=this.states[e].create||null,this.onUpdateCallback=this.states[e].update||null,this.onPreRenderCallback=this.states[e].preRender||null,this.onRenderCallback=this.states[e].render||null,this.onResizeCallback=this.states[e].resize||null,this.onPausedCallback=this.states[e].paused||null,this.onResumedCallback=this.states[e].resumed||null,this.onPauseUpdateCallback=this.states[e].pauseUpdate||null,this.onShutDownCallback=this.states[e].shutdown||this.dummy,""!==this.current&&this.game.physics.reset(),this.current=e,this._created=!1,this.onInitCallback.apply(this.callbackContext,this._args),e===this._pendingState&&(this._args=[]),this.game._kickstart=!0},getCurrentState:function(){return this.states[this.current]},loadComplete:function(){!1===this._created&&this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game),!1===this._created&&this.onCreateCallback?(this._created=!0,this.onCreateCallback.call(this.callbackContext,this.game)):this._created=!0},pause:function(){this._created&&this.onPausedCallback&&this.onPausedCallback.call(this.callbackContext,this.game)},resume:function(){this._created&&this.onResumedCallback&&this.onResumedCallback.call(this.callbackContext,this.game)},update:function(){this._created?this.onUpdateCallback&&this.onUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},pauseUpdate:function(){this._created?this.onPauseUpdateCallback&&this.onPauseUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},preRender:function(e){this._created&&this.onPreRenderCallback&&this.onPreRenderCallback.call(this.callbackContext,this.game,e)},resize:function(e,t){this.onResizeCallback&&this.onResizeCallback.call(this.callbackContext,e,t)},render:function(){this._created?this.onRenderCallback&&(this.game.renderType===U.CANVAS?(this.game.context.save(),this.game.context.setTransform(1,0,0,1,0,0),this.onRenderCallback.call(this.callbackContext,this.game),this.game.context.restore()):this.onRenderCallback.call(this.callbackContext,this.game)):this.onLoadRenderCallback&&this.onLoadRenderCallback.call(this.callbackContext,this.game)},destroy:function(){this._clearWorld=!0,this._clearCache=!0,this.clearCurrentState(),this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.game=null,this.states={},this._pendingState=null,this.current=""}},U.StateManager.prototype.constructor=U.StateManager,Object.defineProperty(U.StateManager.prototype,"created",{get:function(){return this._created}}),U.Signal=function(){},U.Signal.prototype={_bindings:null,_prevParams:null,memorize:!1,_shouldPropagate:!0,active:!0,_boundDispatch:!1,validateListener:function(e,t){if("function"!=typeof e)throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))},_registerListener:function(e,t,i,n,r){var o,a=this._indexOfListener(e,i);if(-1!==a){if((o=this._bindings[a]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else o=new U.SignalBinding(this,e,t,i,n,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){this._bindings||(this._bindings=[]);for(var t=this._bindings.length;t--,this._bindings[t]&&e._priority<=this._bindings[t]._priority;);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){if(!this._bindings)return-1;void 0===t&&(t=null);for(var i,n=this._bindings.length;n--;)if((i=this._bindings[n])._listener===e&&i.context===t)return n;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,i){this.validateListener(e,"add");var n=[];if(3<arguments.length)for(var r=3;r<arguments.length;r++)n.push(arguments[r]);return this._registerListener(e,!1,t,i,n)},addOnce:function(e,t,i){this.validateListener(e,"addOnce");var n=[];if(3<arguments.length)for(var r=3;r<arguments.length;r++)n.push(arguments[r]);return this._registerListener(e,!0,t,i,n)},remove:function(e,t){this.validateListener(e,"remove");var i=this._indexOfListener(e,t);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(e){if(void 0===e&&(e=null),this._bindings){for(var t=this._bindings.length;t--;)e?this._bindings[t].context===e&&(this._bindings[t]._destroy(),this._bindings.splice(t,1)):this._bindings[t]._destroy();e||(this._bindings.length=0)}},getNumListeners:function(){return this._bindings?this._bindings.length:0},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active&&this._bindings){var e,t=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=t),i)for(e=this._bindings.slice(),this._shouldPropagate=!0;e[--i]&&this._shouldPropagate&&!1!==e[i].execute(t););}},forget:function(){this._prevParams&&(this._prevParams=null)},dispose:function(){this.removeAll(),this._bindings=null,this._prevParams&&(this._prevParams=null)},toString:function(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},Object.defineProperty(U.Signal.prototype,"boundDispatch",{get:function(){var e=this;return this._boundDispatch||(this._boundDispatch=function(){return e.dispatch.apply(e,arguments)})}}),U.Signal.prototype.constructor=U.Signal,U.SignalBinding=function(e,t,i,n,r,o){this._listener=t,i&&(this._isOnce=!0),null!=n&&(this.context=n),this._signal=e,r&&(this._priority=r),o&&o.length&&(this._args=o)},U.SignalBinding.prototype={context:null,_isOnce:!1,_priority:0,_args:null,callCount:0,active:!0,params:null,execute:function(e){var t,i;return this.active&&this._listener&&(i=this.params?this.params.concat(e):e,this._args&&(i=i.concat(this._args)),t=this._listener.apply(this.context,i),this.callCount++,this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},U.SignalBinding.prototype.constructor=U.SignalBinding,U.Filter=function(e,t,i){this.game=e,this.type=U.WEBGL_FILTER,this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.prevPoint=new U.Point;var n=new Date;if(this.uniforms={resolution:{type:"2f",value:{x:256,y:256}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:0,y:0}},date:{type:"4fv",value:[n.getFullYear(),n.getMonth(),n.getDate(),60*n.getHours()*60+60*n.getMinutes()+n.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}},t)for(var r in t)this.uniforms[r]=t[r];this.fragmentSrc=i||""},U.Filter.prototype={init:function(){},setResolution:function(e,t){this.uniforms.resolution.value.x=e,this.uniforms.resolution.value.y=t},update:function(e){if(void 0!==e){var t=e.x/this.game.width,i=1-e.y/this.game.height;t===this.prevPoint.x&&i===this.prevPoint.y||(this.uniforms.mouse.value.x=t.toFixed(2),this.uniforms.mouse.value.y=i.toFixed(2),this.prevPoint.set(t,i))}this.uniforms.time.value=this.game.time.totalElapsedSeconds()},addToWorld:function(e,t,i,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0),null!=i?this.width=i:i=this.width,null!=n?this.height=n:n=this.height;var a=this.game.add.image(e,t,"__default");return a.width=i,a.height=n,a.anchor.set(r,o),a.filters=[this],a},destroy:function(){this.game=null}},U.Filter.prototype.constructor=U.Filter,Object.defineProperty(U.Filter.prototype,"width",{get:function(){return this.uniforms.resolution.value.x},set:function(e){this.uniforms.resolution.value.x=e}}),Object.defineProperty(U.Filter.prototype,"height",{get:function(){return this.uniforms.resolution.value.y},set:function(e){this.uniforms.resolution.value.y=e}}),U.Plugin=function(e,t){void 0===t&&(t=null),this.game=e,this.parent=t,this.active=!1,this.visible=!1,this.hasPreUpdate=!1,this.hasUpdate=!1,this.hasPostUpdate=!1,this.hasRender=!1,this.hasPostRender=!1},U.Plugin.prototype={preUpdate:function(){},update:function(){},render:function(){},postRender:function(){},destroy:function(){this.game=null,this.parent=null,this.active=!1,this.visible=!1}},U.Plugin.prototype.constructor=U.Plugin,U.PluginManager=function(e){this.game=e,this.plugins=[],this._len=0,this._i=0},U.PluginManager.prototype={add:function(e){var t=Array.prototype.slice.call(arguments,1),i=!1;return"function"==typeof e?e=new e(this.game,this):(e.game=this.game,e.parent=this),"function"==typeof e.preUpdate&&(i=e.hasPreUpdate=!0),"function"==typeof e.update&&(i=e.hasUpdate=!0),"function"==typeof e.postUpdate&&(i=e.hasPostUpdate=!0),"function"==typeof e.render&&(i=e.hasRender=!0),"function"==typeof e.postRender&&(i=e.hasPostRender=!0),i?((e.hasPreUpdate||e.hasUpdate||e.hasPostUpdate)&&(e.active=!0),(e.hasRender||e.hasPostRender)&&(e.visible=!0),this._len=this.plugins.push(e),"function"==typeof e.init&&e.init.apply(e,t),e):null},remove:function(e,t){for(void 0===t&&(t=!0),this._i=this._len;this._i--;)if(this.plugins[this._i]===e)return t&&e.destroy(),this.plugins.splice(this._i,1),void this._len--},removeAll:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].destroy();this.plugins.length=0,this._len=0},preUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPreUpdate&&this.plugins[this._i].preUpdate()},update:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasUpdate&&this.plugins[this._i].update()},postUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPostUpdate&&this.plugins[this._i].postUpdate()},render:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasRender&&this.plugins[this._i].render()},postRender:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasPostRender&&this.plugins[this._i].postRender()},destroy:function(){this.removeAll(),this.game=null}},U.PluginManager.prototype.constructor=U.PluginManager,U.Stage=function(e){this.game=e,PIXI.DisplayObjectContainer.call(this),this.name="_stage_root",this.disableVisibilityChange=!1,this.exists=!0,this.worldTransform=new PIXI.Matrix,(this.stage=this).currentRenderOrderID=0,this._hiddenVar="hidden",this._onChange=null,this._bgColor={r:0,g:0,b:0,a:0,color:0,rgba:"#000000"},this.game.transparent||(this._bgColor.a=1),e.config&&this.parseConfig(e.config)},U.Stage.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.Stage.prototype.constructor=U.Stage,U.Stage.prototype.parseConfig=function(e){e.disableVisibilityChange&&(this.disableVisibilityChange=e.disableVisibilityChange),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor)},U.Stage.prototype.boot=function(){U.DOM.getOffset(this.game.canvas,this.offset),U.Canvas.setUserSelect(this.game.canvas,"none"),U.Canvas.setTouchAction(this.game.canvas,"none"),this.checkVisibility()},U.Stage.prototype.preUpdate=function(){for(var e=this.currentRenderOrderID=0;e<this.children.length;){var t=this.children[e];t.preUpdate(),this===t.parent&&e++}},U.Stage.prototype.update=function(){for(var e=this.children.length;e--;)this.children[e].update()},U.Stage.prototype.postUpdate=function(){this.game.camera.update(),this.game.camera.target&&(this.game.camera.target.postUpdate(),this.updateTransform(),this.game.camera.updateTarget());for(var e=0;e<this.children.length;e++)this.children[e].postUpdate();this.updateTransform()},U.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0;e<this.children.length;e++)this.children[e].updateTransform()},U.Stage.prototype.checkVisibility=function(){void 0!==document.hidden?this._hiddenVar="visibilitychange":void 0!==document.webkitHidden?this._hiddenVar="webkitvisibilitychange":void 0!==document.mozHidden?this._hiddenVar="mozvisibilitychange":void 0!==document.msHidden?this._hiddenVar="msvisibilitychange":this._hiddenVar=null;var t=this;this._onChange=function(e){return t.visibilityChange(e)},this._onClick=function(e){document.hasFocus()||t.visibilityChange(e)},this._hiddenVar&&document.addEventListener(this._hiddenVar,this._onChange,!1),window.onblur=this._onChange,window.onfocus=this._onChange,window.onpagehide=this._onChange,window.onpageshow=this._onChange,window.addEventListener("click",this._onClick),this.game.device.cocoonJSApp&&(CocoonJS.App.onSuspended.addEventListener(function(){U.Stage.prototype.visibilityChange.call(t,{type:"pause"})}),CocoonJS.App.onActivated.addEventListener(function(){U.Stage.prototype.visibilityChange.call(t,{type:"resume"})}))},U.Stage.prototype.visibilityChange=function(e){switch(e.type){case"blur":case"pagehide":return void this.game.focusLoss(e);case"click":case"focus":case"pageshow":return void this.game.focusGain(e)}this.disableVisibilityChange||(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||"pause"===e.type?this.game.gamePaused(e):this.game.gameResumed(e))},U.Stage.prototype.setBackgroundColor=function(e){this.game.transparent||(U.Color.valueToColor(e,this._bgColor),U.Color.updateColor(this._bgColor),this._bgColor.r/=255,this._bgColor.g/=255,this._bgColor.b/=255,this._bgColor.a=1)},U.Stage.prototype.destroy=function(){this._hiddenVar&&document.removeEventListener(this._hiddenVar,this._onChange,!1),window.onpagehide=null,window.onpageshow=null,window.onblur=null,window.onfocus=null,window.removeEventListener("click",this._onClick)},Object.defineProperty(U.Stage.prototype,"backgroundColor",{get:function(){return this._bgColor.color},set:function(e){this.setBackgroundColor(e)}}),Object.defineProperty(U.Stage.prototype,"smoothed",{get:function(){return PIXI.scaleModes.DEFAULT===PIXI.scaleModes.LINEAR},set:function(e){PIXI.scaleModes.DEFAULT=e?PIXI.scaleModes.LINEAR:PIXI.scaleModes.NEAREST}}),U.Group=function(e,t,i,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=U.Physics.ARCADE),this.game=e,void 0===t&&(t=e.world),this.name=i||"group",this.z=0,PIXI.DisplayObjectContainer.call(this),n?(this.game.stage.addChild(this),this.z=this.game.stage.children.length):t&&(t.addChild(this),this.z=t.children.length),this.type=U.GROUP,this.physicsType=U.GROUP,this.alive=!0,this.exists=!0,this.ignoreDestroy=!1,this.pendingDestroy=!1,this.classType=U.Sprite,this.cursor=null,this.inputEnableChildren=!1,this.onChildInputDown=new U.Signal,this.onChildInputUp=new U.Signal,this.onChildInputOver=new U.Signal,this.onChildInputOut=new U.Signal,this.enableBody=r,this.enableBodyDebug=!1,this.physicsBodyType=o,this.physicsSortDirection=null,this.onDestroy=new U.Signal,this.cursorIndex=0,this.fixedToCamera=!1,this.cameraOffset=new U.Point,this.hash=[],this._sortProperty="z"},U.Group.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.Group.prototype.constructor=U.Group,U.Group.RETURN_NONE=0,U.Group.RETURN_TOTAL=1,U.Group.RETURN_CHILD=2,U.Group.RETURN_ALL=3,U.Group.SORT_ASCENDING=-1,U.Group.SORT_DESCENDING=1,U.Group.prototype.add=function(e,t,i){return void 0===t&&(t=!1),e.parent===this||(e.body&&e.parent&&e.parent.hash&&e.parent.removeFromHash(e),void 0===i?(e.z=this.children.length,this.addChild(e)):(this.addChildAt(e,i),this.updateZ()),this.enableBody&&e.hasOwnProperty("body")&&null===e.body?this.game.physics.enable(e,this.physicsBodyType):e.body&&this.addToHash(e),!this.inputEnableChildren||e.input&&!e.inputEnabled||(e.inputEnabled=!0),!t&&e.events&&e.events.onAddedToGroup$dispatch(e,this),null===this.cursor&&(this.cursor=e)),e},U.Group.prototype.addAt=function(e,t,i){this.add(e,i,t)},U.Group.prototype.addToHash=function(e){return e.parent===this&&-1===this.hash.indexOf(e)&&(this.hash.push(e),!0)},U.Group.prototype.removeFromHash=function(e){if(e){var t=this.hash.indexOf(e);if(-1!==t)return this.hash.splice(t,1),!0}return!1},U.Group.prototype.addMultiple=function(e,t){if(e instanceof U.Group)e.moveAll(this,t);else if(Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return e},U.Group.prototype.getAt=function(e){return e<0||e>=this.children.length?-1:this.getChildAt(e)},U.Group.prototype.create=function(e,t,i,n,r,o){void 0===r&&(r=!0);var a=new this.classType(this.game,e,t,i,n);return a.exists=r,a.visible=r,a.alive=r,this.add(a,!1,o)},U.Group.prototype.createMultiple=function(n,e,t,r){void 0===t&&(t=0),void 0===r&&(r=!1),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);var o=this,a=[];return e.forEach(function(i){t.forEach(function(e){for(var t=0;t<n;t++)a.push(o.create(0,0,i,e,r))})}),a},U.Group.prototype.updateZ=function(){for(var e=this.children.length;e--;)this.children[e].z=e},U.Group.prototype.align=function(e,t,i,n,r,o){if(void 0===r&&(r=U.TOP_LEFT),void 0===o&&(o=0),0===this.children.length||o>this.children.length||-1===e&&-1===t)return!1;for(var a=new U.Rectangle(0,0,i,n),s=e*i,p=t*n,l=o;l<this.children.length;l++){var h=this.children[l];if(h.alignIn)if(h.alignIn(a,r),-1===e)a.y+=n,a.y===p&&(a.x+=i,a.y=0);else if(-1===t)a.x+=i,a.x===s&&(a.x=0,a.y+=n);else if(a.x+=i,a.x===s&&(a.x=0,a.y+=n,a.y===p))return!0}return!0},U.Group.prototype.resetCursor=function(e){if(void 0===e&&(e=0),e>this.children.length-1&&(e=0),this.cursor)return this.cursorIndex=e,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.next=function(){if(this.cursor)return this.cursorIndex>=this.children.length-1?this.cursorIndex=0:this.cursorIndex++,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.previous=function(){if(this.cursor)return 0===this.cursorIndex?this.cursorIndex=this.children.length-1:this.cursorIndex--,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.swap=function(e,t){this.swapChildren(e,t),this.updateZ()},U.Group.prototype.bringToTop=function(e){return e.parent===this&&this.getIndex(e)<this.children.length&&(this.remove(e,!1,!0),this.add(e,!0)),e},U.Group.prototype.sendToBack=function(e){return e.parent===this&&0<this.getIndex(e)&&(this.remove(e,!1,!0),this.addAt(e,0,!0)),e},U.Group.prototype.moveUp=function(e){if(e.parent===this&&this.getIndex(e)<this.children.length-1){var t=this.getIndex(e),i=this.getAt(t+1);i&&this.swap(e,i)}return e},U.Group.prototype.moveDown=function(e){if(e.parent===this&&0<this.getIndex(e)){var t=this.getIndex(e),i=this.getAt(t-1);i&&this.swap(e,i)}return e},U.Group.prototype.xy=function(e,t,i){if(e<0||e>this.children.length)return-1;this.getChildAt(e).x=t,this.getChildAt(e).y=i},U.Group.prototype.reverse=function(){this.children.reverse(),this.updateZ()},U.Group.prototype.getIndex=function(e){return this.children.indexOf(e)},U.Group.prototype.getByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null},U.Group.prototype.replace=function(e,t){var i=this.getIndex(e);if(-1!==i)return t.parent&&(t.parent instanceof U.Group?t.parent.remove(t):t.parent.removeChild(t)),this.remove(e),this.addAt(t,i),e},U.Group.prototype.hasProperty=function(e,t){var i=t.length;return 1===i&&t[0]in e||2===i&&t[0]in e&&t[1]in e[t[0]]||3===i&&t[0]in e&&t[1]in e[t[0]]&&t[2]in e[t[0]][t[1]]||4===i&&t[0]in e&&t[1]in e[t[0]]&&t[2]in e[t[0]][t[1]]&&t[3]in e[t[0]][t[1]][t[2]]},U.Group.prototype.setProperty=function(e,t,i,n,r){if(void 0===r&&(r=!1),n=n||0,!this.hasProperty(e,t)&&(!r||0<n))return!1;var o=t.length;return 1===o?0===n?e[t[0]]=i:1===n?e[t[0]]+=i:2===n?e[t[0]]-=i:3===n?e[t[0]]*=i:4===n&&(e[t[0]]/=i):2===o?0===n?e[t[0]][t[1]]=i:1===n?e[t[0]][t[1]]+=i:2===n?e[t[0]][t[1]]-=i:3===n?e[t[0]][t[1]]*=i:4===n&&(e[t[0]][t[1]]/=i):3===o?0===n?e[t[0]][t[1]][t[2]]=i:1===n?e[t[0]][t[1]][t[2]]+=i:2===n?e[t[0]][t[1]][t[2]]-=i:3===n?e[t[0]][t[1]][t[2]]*=i:4===n&&(e[t[0]][t[1]][t[2]]/=i):4===o&&(0===n?e[t[0]][t[1]][t[2]][t[3]]=i:1===n?e[t[0]][t[1]][t[2]][t[3]]+=i:2===n?e[t[0]][t[1]][t[2]][t[3]]-=i:3===n?e[t[0]][t[1]][t[2]][t[3]]*=i:4===n&&(e[t[0]][t[1]][t[2]][t[3]]/=i)),!0},U.Group.prototype.checkProperty=function(e,t,i,n){return void 0===n&&(n=!1),!(!U.Utils.getProperty(e,t)&&n)&&U.Utils.getProperty(e,t)===i},U.Group.prototype.set=function(e,t,i,n,r,o,a){if(void 0===a&&(a=!1),t=t.split("."),void 0===n&&(n=!1),void 0===r&&(r=!1),(!1===n||n&&e.alive)&&(!1===r||r&&e.visible))return this.setProperty(e,t,i,o,a)},U.Group.prototype.setAll=function(e,t,i,n,r,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),e=e.split("."),r=r||0;for(var a=0;a<this.children.length;a++)(!i||i&&this.children[a].alive)&&(!n||n&&this.children[a].visible)&&this.setProperty(this.children[a],e,t,r,o)},U.Group.prototype.setAllChildren=function(e,t,i,n,r,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),r=r||0;for(var a=0;a<this.children.length;a++)(!i||i&&this.children[a].alive)&&(!n||n&&this.children[a].visible)&&(this.children[a]instanceof U.Group?this.children[a].setAllChildren(e,t,i,n,r,o):this.setProperty(this.children[a],e.split("."),t,r,o))},U.Group.prototype.checkAll=function(e,t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=!1);for(var o=0;o<this.children.length;o++)if((!i||i&&this.children[o].alive)&&(!n||n&&this.children[o].visible)&&!this.checkProperty(this.children[o],e,t,r))return!1;return!0},U.Group.prototype.addAll=function(e,t,i,n){this.setAll(e,t,i,n,1)},U.Group.prototype.subAll=function(e,t,i,n){this.setAll(e,t,i,n,2)},U.Group.prototype.multiplyAll=function(e,t,i,n){this.setAll(e,t,i,n,3)},U.Group.prototype.divideAll=function(e,t,i,n){this.setAll(e,t,i,n,4)},U.Group.prototype.callAllExists=function(e,t){var i;if(2<arguments.length){i=[];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}for(n=0;n<this.children.length;n++)this.children[n].exists===t&&this.children[n][e]&&this.children[n][e].apply(this.children[n],i)},U.Group.prototype.callbackFromArray=function(e,t,i){if(1===i){if(e[t[0]])return e[t[0]]}else if(2===i){if(e[t[0]][t[1]])return e[t[0]][t[1]]}else if(3===i){if(e[t[0]][t[1]][t[2]])return e[t[0]][t[1]][t[2]]}else if(4===i){if(e[t[0]][t[1]][t[2]][t[3]])return e[t[0]][t[1]][t[2]][t[3]]}else if(e[t])return e[t];return!1},U.Group.prototype.callAll=function(e,t){if(void 0!==e){var i,n=(e=e.split(".")).length;if(null==t||""===t)t=null;else if("string"==typeof t)var r=(t=t.split(".")).length;if(2<arguments.length){i=[];for(var o=2;o<arguments.length;o++)i.push(arguments[o])}var a=null,s=null;for(o=0;o<this.children.length;o++)a=this.callbackFromArray(this.children[o],e,n),t&&a?(s=this.callbackFromArray(this.children[o],t,r),a&&a.apply(s,i)):a&&a.apply(this.children[o],i)}},U.Group.prototype.preUpdate=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return!(this.renderOrderID=-1);for(var e=0;e<this.children.length;e++)this.children[e].preUpdate();return!0},U.Group.prototype.update=function(){for(var e=this.children.length;e--;)this.children[e].update()},U.Group.prototype.postUpdate=function(){this.fixedToCamera&&(this.x=this.game.camera.view.x+this.cameraOffset.x,this.y=this.game.camera.view.y+this.cameraOffset.y);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()},U.Group.prototype.filter=function(e,t){for(var i=-1,n=this.children.length,r=[];++i<n;){var o=this.children[i];(!t||t&&o.exists)&&e(o,i,this.children)&&r.push(o)}return new U.ArraySet(r)},U.Group.prototype.forEach=function(e,t,i){if(void 0===i&&(i=!1),arguments.length<=3)for(var n=0;n<this.children.length;n++)(!i||i&&this.children[n].exists)&&e.call(t,this.children[n]);else{var r=[null];for(n=3;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<this.children.length;n++)(!i||i&&this.children[n].exists)&&(r[0]=this.children[n],e.apply(t,r))}},U.Group.prototype.forEachExists=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("exists",!0,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.forEachAlive=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("alive",!0,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.forEachDead=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("alive",!1,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.sort=function(e,t){this.children.length<2||(void 0===e&&(e="z"),void 0===t&&(t=U.Group.SORT_ASCENDING),this._sortProperty=e,t===U.Group.SORT_ASCENDING?this.children.sort(this.ascendingSortHandler.bind(this)):this.children.sort(this.descendingSortHandler.bind(this)),this.updateZ())},U.Group.prototype.customSort=function(e,t){this.children.length<2||(this.children.sort(e.bind(t)),this.updateZ())},U.Group.prototype.ascendingSortHandler=function(e,t){return e[this._sortProperty]<t[this._sortProperty]?-1:e[this._sortProperty]>t[this._sortProperty]?1:e.z<t.z?-1:1},U.Group.prototype.descendingSortHandler=function(e,t){return e[this._sortProperty]<t[this._sortProperty]?1:e[this._sortProperty]>t[this._sortProperty]?-1:0},U.Group.prototype.iterate=function(e,t,i,n,r,o){if(0===this.children.length){if(i===U.Group.RETURN_TOTAL)return 0;if(i===U.Group.RETURN_ALL)return[]}var a=0;if(i===U.Group.RETURN_ALL)var s=[];for(var p=0;p<this.children.length;p++)if(this.children[p][e]===t){if(a++,n&&(o?(o[0]=this.children[p],n.apply(r,o)):n.call(r,this.children[p])),i===U.Group.RETURN_CHILD)return this.children[p];i===U.Group.RETURN_ALL&&s.push(this.children[p])}return i===U.Group.RETURN_TOTAL?a:i===U.Group.RETURN_ALL?s:null},U.Group.prototype.getFirstExists=function(e,t,i,n,r,o){void 0===t&&(t=!1),"boolean"!=typeof e&&(e=!0);var a=this.iterate("exists",e,U.Group.RETURN_CHILD);return null===a&&t?this.create(i,n,r,o):this.resetChild(a,i,n,r,o)},U.Group.prototype.getFirstAlive=function(e,t,i,n,r){void 0===e&&(e=!1);var o=this.iterate("alive",!0,U.Group.RETURN_CHILD);return null===o&&e?this.create(t,i,n,r):this.resetChild(o,t,i,n,r)},U.Group.prototype.getFirstDead=function(e,t,i,n,r){void 0===e&&(e=!1);var o=this.iterate("alive",!1,U.Group.RETURN_CHILD);return null===o&&e?this.create(t,i,n,r):this.resetChild(o,t,i,n,r)},U.Group.prototype.resetChild=function(e,t,i,n,r){return null===e?null:(void 0===t&&(t=null),void 0===i&&(i=null),null!==t&&null!==i&&e.reset(t,i),void 0!==n&&e.loadTexture(n,r),e)},U.Group.prototype.getTop=function(){if(0<this.children.length)return this.children[this.children.length-1]},U.Group.prototype.getBottom=function(){if(0<this.children.length)return this.children[0]},U.Group.prototype.getClosestTo=function(e,t,i){for(var n=Number.MAX_VALUE,r=0,o=null,a=0;a<this.children.length;a++){var s=this.children[a];s.exists&&(r=Math.abs(U.Point.distance(e,s)))<n&&(!t||t.call(i,s,r))&&(n=r,o=s)}return o},U.Group.prototype.getFurthestFrom=function(e,t,i){for(var n=0,r=0,o=null,a=0;a<this.children.length;a++){var s=this.children[a];s.exists&&(r=Math.abs(U.Point.distance(e,s)))>n&&(!t||t.call(i,s,r))&&(n=r,o=s)}return o},U.Group.prototype.countLiving=function(){return this.iterate("alive",!0,U.Group.RETURN_TOTAL)},U.Group.prototype.countDead=function(){return this.iterate("alive",!1,U.Group.RETURN_TOTAL)},U.Group.prototype.getRandom=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.children.length),0===t?null:U.ArrayUtils.getRandomItem(this.children,e,t)},U.Group.prototype.getRandomExists=function(e,t){var i=this.getAll("exists",!0,e,t);return this.game.rnd.pick(i)},U.Group.prototype.getAll=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=this.children.length);for(var r=[],o=i;o<n;o++){var a=this.children[o];e&&a[e]===t&&r.push(a)}return r},U.Group.prototype.remove=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),0===this.children.length||-1===this.children.indexOf(e))return!1;i||!e.events||e.destroyPhase||e.events.onRemovedFromGroup$dispatch(e,this);var n=this.removeChild(e);return this.removeFromHash(e),this.updateZ(),this.cursor===e&&this.next(),t&&n&&n.destroy(!0),!0},U.Group.prototype.moveAll=function(e,t){if(void 0===t&&(t=!1),0<this.children.length&&e instanceof U.Group){for(;e.add(this.children[0],t),0<this.children.length;);this.hash=[],this.cursor=null}return e},U.Group.prototype.removeAll=function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),0!==this.children.length){do{!t&&this.children[0].events&&this.children[0].events.onRemovedFromGroup$dispatch(this.children[0],this);var n=this.removeChild(this.children[0]);this.removeFromHash(n),e&&n&&n.destroy(!0,i)}while(0<this.children.length);this.hash=[],this.cursor=null}},U.Group.prototype.removeBetween=function(e,t,i,n){if(void 0===t&&(t=this.children.length-1),void 0===i&&(i=!1),void 0===n&&(n=!1),0!==this.children.length){if(t<e||e<0||t>this.children.length)return!1;for(var r=t;e<=r;){!n&&this.children[r].events&&this.children[r].events.onRemovedFromGroup$dispatch(this.children[r],this);var o=this.removeChild(this.children[r]);this.removeFromHash(o),i&&o&&o.destroy(!0),this.cursor===this.children[r]&&(this.cursor=null),r--}this.updateZ()}},U.Group.prototype.destroy=function(e,t){null===this.game||this.ignoreDestroy||(void 0===e&&(e=!0),void 0===t&&(t=!1),this.onDestroy.dispatch(this,e,t),this.removeAll(e),this.cursor=null,this.filters=null,this.pendingDestroy=!1,t||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},Object.defineProperty(U.Group.prototype,"total",{get:function(){return this.iterate("exists",!0,U.Group.RETURN_TOTAL)}}),Object.defineProperty(U.Group.prototype,"length",{get:function(){return this.children.length}}),Object.defineProperty(U.Group.prototype,"angle",{get:function(){return U.Math.radToDeg(this.rotation)},set:function(e){this.rotation=U.Math.degToRad(e)}}),Object.defineProperty(U.Group.prototype,"centerX",{get:function(){return this.getBounds(this.parent).centerX},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i-t.halfWidth}}),Object.defineProperty(U.Group.prototype,"centerY",{get:function(){return this.getBounds(this.parent).centerY},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i-t.halfHeight}}),Object.defineProperty(U.Group.prototype,"left",{get:function(){return this.getBounds(this.parent).left},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i}}),Object.defineProperty(U.Group.prototype,"right",{get:function(){return this.getBounds(this.parent).right},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i-t.width}}),Object.defineProperty(U.Group.prototype,"top",{get:function(){return this.getBounds(this.parent).top},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i}}),Object.defineProperty(U.Group.prototype,"bottom",{get:function(){return this.getBounds(this.parent).bottom},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i-t.height}}),U.World=function(e){U.Group.call(this,e,null,"__world",!1),this.bounds=new U.Rectangle(0,0,e.width,e.height),this.camera=null,this._definedSize=!1,this._width=e.width,this._height=e.height,this.game.state.onStateChange.add(this.stateChange,this)},U.World.prototype=Object.create(U.Group.prototype),U.World.prototype.constructor=U.World,U.World.prototype.boot=function(){this.camera=new U.Camera(this.game,0,0,0,this.game.width,this.game.height),this.game.stage.addChild(this),this.camera.boot()},U.World.prototype.stateChange=function(){this.x=0,this.y=0,this.camera.reset()},U.World.prototype.setBounds=function(e,t,i,n){this._definedSize=!0,this._width=i,this._height=n,this.bounds.setTo(e,t,i,n),this.x=e,this.y=t,this.camera.bounds&&this.camera.bounds.setTo(e,t,Math.max(i,this.game.width),Math.max(n,this.game.height)),this.game.physics.setBoundsToWorld()},U.World.prototype.resize=function(e,t){this._definedSize&&(e<this._width&&(e=this._width),t<this._height&&(t=this._height)),this.bounds.width=e,this.bounds.height=t,this.game.camera.setBoundsToWorld(),this.game.physics.setBoundsToWorld()},U.World.prototype.shutdown=function(){this.destroy(!0,!0)},U.World.prototype.wrap=function(e,t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=!1),void 0===n&&(n=!0),void 0===r&&(r=!0),i?(e.getBounds(),n&&(e.x+e._currentBounds.width<this.bounds.x?e.x=this.bounds.right:e.x>this.bounds.right&&(e.x=this.bounds.left)),r&&(e.y+e._currentBounds.height<this.bounds.top?e.y=this.bounds.bottom:e.y>this.bounds.bottom&&(e.y=this.bounds.top))):(n&&e.x+t<this.bounds.x?e.x=this.bounds.right+t:n&&e.x-t>this.bounds.right&&(e.x=this.bounds.left-t),r&&e.y+t<this.bounds.top?e.y=this.bounds.bottom+t:r&&e.y-t>this.bounds.bottom&&(e.y=this.bounds.top-t))},Object.defineProperty(U.World.prototype,"width",{get:function(){return this.bounds.width},set:function(e){e<this.game.width&&(e=this.game.width),this.bounds.width=e,this._width=e,this._definedSize=!0}}),Object.defineProperty(U.World.prototype,"height",{get:function(){return this.bounds.height},set:function(e){e<this.game.height&&(e=this.game.height),this.bounds.height=e,this._height=e,this._definedSize=!0}}),Object.defineProperty(U.World.prototype,"centerX",{get:function(){return this.bounds.halfWidth+this.bounds.x}}),Object.defineProperty(U.World.prototype,"centerY",{get:function(){return this.bounds.halfHeight+this.bounds.y}}),Object.defineProperty(U.World.prototype,"randomX",{get:function(){return this.bounds.x<0?this.game.rnd.between(this.bounds.x,this.bounds.width-Math.abs(this.bounds.x)):this.game.rnd.between(this.bounds.x,this.bounds.width)}}),Object.defineProperty(U.World.prototype,"randomY",{get:function(){return this.bounds.y<0?this.game.rnd.between(this.bounds.y,this.bounds.height-Math.abs(this.bounds.y)):this.game.rnd.between(this.bounds.y,this.bounds.height)}}),U.Game=function(e,t,i,n,r,o,a,s){return this.id=U.GAMES.push(this)-1,this.config=null,this.physicsConfig=s,this.parent="",this.width=800,this.height=600,this.resolution=1,this._width=800,this._height=600,this.transparent=!1,this.antialias=!0,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!0,this.renderer=null,this.renderType=U.AUTO,this.state=null,this.isBooted=!1,this.isRunning=!1,this.raf=null,this.add=null,this.make=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.net=null,this.scale=null,this.sound=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.physics=null,this.plugins=null,this.rnd=null,this.device=U.Device,this.camera=null,this.canvas=null,this.context=null,this.debug=null,this.particles=null,this.create=null,this.lockRender=!1,this.stepping=!1,this.pendingStep=!1,this.stepCount=0,this.onPause=null,this.onResume=null,this.onBlur=null,this.onFocus=null,this._paused=!1,this._codePaused=!1,this.currentUpdateID=0,this.updatesThisFrame=1,this._deltaTime=0,this._lastCount=0,this._spiraling=0,this._kickstart=!0,this.fpsProblemNotifier=new U.Signal,this.forceSingleUpdate=!0,this._nextFpsNotification=0,1===arguments.length&&"object"==typeof e?this.parseConfig(e):(this.config={enableDebug:!0},void 0!==e&&(this._width=e),void 0!==t&&(this._height=t),void 0!==i&&(this.renderType=i),void 0!==n&&(this.parent=n),void 0!==o&&(this.transparent=o),void 0!==a&&(this.antialias=a),this.rnd=new U.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this.state=new U.StateManager(this,r)),this.device.whenReady(this.boot,this),this},U.Game.prototype={parseConfig:function(e){void 0===(this.config=e).enableDebug&&(this.config.enableDebug=!0),e.width&&(this._width=e.width),e.height&&(this._height=e.height),e.renderer&&(this.renderType=e.renderer),e.parent&&(this.parent=e.parent),void 0!==e.transparent&&(this.transparent=e.transparent),void 0!==e.antialias&&(this.antialias=e.antialias),e.resolution&&(this.resolution=e.resolution),void 0!==e.preserveDrawingBuffer&&(this.preserveDrawingBuffer=e.preserveDrawingBuffer),e.physicsConfig&&(this.physicsConfig=e.physicsConfig);var t=[(Date.now()*Math.random()).toString()];e.seed&&(t=e.seed),this.rnd=new U.RandomDataGenerator(t);var i=null;e.state&&(i=e.state),this.state=new U.StateManager(this,i)},boot:function(){this.isBooted||(this.onPause=new U.Signal,this.onResume=new U.Signal,this.onBlur=new U.Signal,this.onFocus=new U.Signal,this.isBooted=!0,(PIXI.game=this).math=U.Math,this.scale=new U.ScaleManager(this,this._width,this._height),this.stage=new U.Stage(this),this.setUpRenderer(),this.world=new U.World(this),this.add=new U.GameObjectFactory(this),this.make=new U.GameObjectCreator(this),this.cache=new U.Cache(this),this.load=new U.Loader(this),this.time=new U.Time(this),this.tweens=new U.TweenManager(this),this.input=new U.Input(this),this.sound=new U.SoundManager(this),this.physics=new U.Physics(this,this.physicsConfig),this.particles=new U.Particles(this),this.create=new U.Create(this),this.plugins=new U.PluginManager(this),this.net=new U.Net(this),this.time.boot(),this.stage.boot(),this.world.boot(),this.scale.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.config.enableDebug?(this.debug=new U.Utils.Debug(this),this.debug.boot()):this.debug={preUpdate:function(){},update:function(){},reset:function(){}},this.showDebugHeader(),this.isRunning=!0,this.config&&this.config.forceSetTimeOut?this.raf=new U.RequestAnimationFrame(this,this.config.forceSetTimeOut):this.raf=new U.RequestAnimationFrame(this,!1),this._kickstart=!0,window.focus&&(!window.PhaserGlobal||window.PhaserGlobal&&!window.PhaserGlobal.stopFocus)&&window.focus(),this.raf.start())},showDebugHeader:function(){if(!window.PhaserGlobal||!window.PhaserGlobal.hideBanner){var e=U.VERSION,t="Canvas",i="HTML Audio",n=1;if(this.renderType===U.WEBGL?(t="WebGL",n++):this.renderType===U.HEADLESS&&(t="Headless"),this.device.webAudio&&(i="WebAudio",n++),this.device.chrome)for(var r=["%c %c %c @azerion/phaser v"+e+" | Pixi.js | "+t+" | "+i+"  %c %c %c https://github.com/azerion / https://www.azerion.com %c%c%c","background: #7ab3eb","background: #378ce1","color: #ffffff; background: #207cd8;","background: #378ce1","background: #7ab3eb","background: #ffffff"],o=0;o<3;o++)o<n?r.push("color: #ff2424; background: #fff"):r.push("color: #959595; background: #fff");else window.console}},setUpRenderer:function(){if(this.config.canvas?this.canvas=this.config.canvas:this.canvas=U.Canvas.create(this,this.width,this.height,this.config.canvasID,!0),this.config.canvasStyle?this.canvas.style=this.config.canvasStyle:this.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%",this.renderType===U.HEADLESS||this.renderType===U.CANVAS||this.renderType===U.AUTO&&!this.device.webGL){if(!this.device.canvas)throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.");this.renderType=U.CANVAS,this.renderer=new PIXI.CanvasRenderer(this),this.context=this.renderer.context}else this.renderType=U.WEBGL,this.renderer=new PIXI.WebGLRenderer(this),this.context=null,this.canvas.addEventListener("webglcontextlost",this.contextLost.bind(this),!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestored.bind(this),!1);this.device.cocoonJS&&(this.canvas.screencanvas=this.renderType===U.CANVAS),this.renderType!==U.HEADLESS&&(this.stage.smoothed=this.antialias,U.Canvas.addToDOM(this.canvas,this.parent,!1),U.Canvas.setTouchAction(this.canvas))},contextLost:function(e){e.preventDefault(),this.renderer.contextLost=!0},contextRestored:function(){this.renderer.initContext(),this.cache.clearGLTextures(),this.renderer.contextLost=!1},update:function(e){if(this.time.update(e),this._kickstart)return this.updateLogic(this.time.desiredFpsMult),this.updateRender(this.time.slowMotion*this.time.desiredFps),void(this._kickstart=!1);if(1<this._spiraling&&!this.forceSingleUpdate)this.time.time>this._nextFpsNotification&&(this._nextFpsNotification=this.time.time+1e4,this.fpsProblemNotifier.dispatch()),this._deltaTime=0,this._spiraling=0,this.updateRender(this.time.slowMotion*this.time.desiredFps);else{var t=1e3*this.time.slowMotion/this.time.desiredFps;this._deltaTime+=Math.max(Math.min(3*t,this.time.elapsed),0);var i=0;for(this.updatesThisFrame=Math.floor(this._deltaTime/t),this.forceSingleUpdate&&(this.updatesThisFrame=Math.min(1,this.updatesThisFrame));this._deltaTime>=t&&(this._deltaTime-=t,this.currentUpdateID=i,this.updateLogic(this.time.desiredFpsMult),i++,!this.forceSingleUpdate||1!==i);)this.time.refresh();i>this._lastCount?this._spiraling++:i<this._lastCount&&(this._spiraling=0),this._lastCount=i,this.updateRender(this._deltaTime/t)}},updateLogic:function(e){this._paused||this.pendingStep?(this.scale.pauseUpdate(),this.state.pauseUpdate(),this.debug.preUpdate()):(this.stepping&&(this.pendingStep=!0),this.scale.preUpdate(),this.debug.preUpdate(),this.camera.preUpdate(),this.physics.preUpdate(),this.state.preUpdate(e),this.plugins.preUpdate(e),this.stage.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.sound.update(),this.input.update(),this.physics.update(),this.particles.update(),this.plugins.update(),this.stage.postUpdate(),this.plugins.postUpdate()),this.stage.updateTransform()},updateRender:function(e){this.lockRender||(this.state.preRender(e),this.renderType!==U.HEADLESS&&(this.renderer.render(this.stage),this.plugins.render(e),this.state.render(e)),this.plugins.postRender(e))},enableStep:function(){this.stepping=!0,this.pendingStep=!1,this.stepCount=0},disableStep:function(){this.stepping=!1,this.pendingStep=!1},step:function(){this.pendingStep=!1,this.stepCount++},destroy:function(){this.raf.stop(),this.state.destroy(),this.sound.destroy(),this.scale.destroy(),this.stage.destroy(),this.input.destroy(),this.physics.destroy(),this.plugins.destroy(),this.state=null,this.sound=null,this.scale=null,this.stage=null,this.input=null,this.physics=null,this.plugins=null,this.cache=null,this.load=null,this.time=null,this.world=null,this.isBooted=!1,this.renderer.destroy(!1),U.Canvas.removeFromDOM(this.canvas),PIXI.defaultRenderer=null,U.GAMES[this.id]=null},gamePaused:function(e){this._paused||(this._paused=!0,this.time.gamePaused(),this.sound.muteOnPause&&this.sound.setMute(),this.onPause.dispatch(e),this.device.cordova&&this.device.iOS&&(this.lockRender=!0))},gameResumed:function(e){this._paused&&!this._codePaused&&(this._paused=!1,this.time.gameResumed(),this.input.reset(),this.sound.muteOnPause&&this.sound.unsetMute(),this.onResume.dispatch(e),this.device.cordova&&this.device.iOS&&(this.lockRender=!1))},focusLoss:function(e){this.onBlur.dispatch(e),this.stage.disableVisibilityChange||this.gamePaused(e)},focusGain:function(e){this.onFocus.dispatch(e),this.stage.disableVisibilityChange||this.gameResumed(e)}},U.Game.prototype.constructor=U.Game,Object.defineProperty(U.Game.prototype,"paused",{get:function(){return this._paused},set:function(e){!0===e?(!1===this._paused&&(this._paused=!0,this.sound.setMute(),this.time.gamePaused(),this.onPause.dispatch(this)),this._codePaused=!0):(this._paused&&(this._paused=!1,this.input.reset(),this.sound.unsetMute(),this.time.gameResumed(),this.onResume.dispatch(this)),this._codePaused=!1)}}),U.Input=function(e){this.game=e,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.customCandidateHandler=null,this.customCandidateHandlerContext=null,this.pollRate=0,this.enabled=!0,this.multiInputOverride=U.Input.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=-1,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.pointer1=null,this.pointer2=null,this.pointer3=null,this.pointer4=null,this.pointer5=null,this.pointer6=null,this.pointer7=null,this.pointer8=null,this.pointer9=null,this.pointer10=null,this.pointers=[],this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.touch=null,this.mspointer=null,this.gamepad=null,this.resetLocked=!1,this.onDown=null,this.onUp=null,this.onTap=null,this.onHold=null,this.minPriorityID=0,this.interactiveItems=new U.ArraySet,this._localPoint=new U.Point,this._pollCounter=0,this._oldPosition=null,this._x=0,this._y=0},U.Input.MOUSE_OVERRIDES_TOUCH=0,U.Input.TOUCH_OVERRIDES_MOUSE=1,U.Input.MOUSE_TOUCH_COMBINE=2,U.Input.MAX_POINTERS=10,U.Input.prototype={boot:function(){this.mousePointer=new U.Pointer(this.game,0,U.PointerMode.CURSOR),this.addPointer(),this.addPointer(),this.mouse=new U.Mouse(this.game),this.touch=new U.Touch(this.game),this.mspointer=new U.MSPointer(this.game),U.Keyboard&&(this.keyboard=new U.Keyboard(this.game)),U.Gamepad&&(this.gamepad=new U.Gamepad(this.game)),this.onDown=new U.Signal,this.onUp=new U.Signal,this.onTap=new U.Signal,this.onHold=new U.Signal,this.scale=new U.Point(1,1),this.speed=new U.Point,this.position=new U.Point,this._oldPosition=new U.Point,this.circle=new U.Circle(0,0,45),this.activePointer=this.mousePointer,this.hitCanvas=PIXI.CanvasPool.create(this,1,1),this.hitContext=this.hitCanvas.getContext("2d"),this.game.device.mspointer?this.mspointer.start():this.game.device.touch&&this.touch.start(),this.mspointer.active||this.mouse.start(),this.mousePointer.active=!0,this.keyboard&&this.keyboard.start();var t=this;this._onClickTrampoline=function(e){t.onClickTrampoline(e)},this.game.canvas.addEventListener("click",this._onClickTrampoline,!1)},destroy:function(){this.mouse.stop(),this.touch.stop(),this.mspointer.stop(),this.keyboard&&this.keyboard.stop(),this.gamepad&&this.gamepad.stop(),this.moveCallbacks=[],PIXI.CanvasPool.remove(this),this.game.canvas.removeEventListener("click",this._onClickTrampoline)},setInteractiveCandidateHandler:function(e,t){this.customCandidateHandler=e,this.customCandidateHandlerContext=t},addMoveCallback:function(e,t){this.moveCallbacks.push({callback:e,context:t})},deleteMoveCallback:function(e,t){for(var i=this.moveCallbacks.length;i--;)if(this.moveCallbacks[i].callback===e&&this.moveCallbacks[i].context===t)return void this.moveCallbacks.splice(i,1)},addPointer:function(){if(this.pointers.length>=U.Input.MAX_POINTERS)return null;var e=this.pointers.length+1,t=new U.Pointer(this.game,e,U.PointerMode.TOUCH);return this.pointers.push(t),this["pointer"+e]=t},update:function(){if(this.keyboard&&this.keyboard.update(),0<this.pollRate&&this._pollCounter<this.pollRate)this._pollCounter++;else{this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),this.gamepad&&this.gamepad.active&&this.gamepad.update();for(var e=0;e<this.pointers.length;e++)this.pointers[e].update();this._pollCounter=0}},reset:function(e){if(this.game.isBooted&&!this.resetLocked){void 0===e&&(e=!1),this.mousePointer.reset(),this.keyboard&&this.keyboard.reset(e),this.gamepad&&this.gamepad.reset();for(var t=0;t<this.pointers.length;t++)this.pointers[t].reset();"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor="inherit"),e&&(this.onDown.dispose(),this.onUp.dispose(),this.onTap.dispose(),this.onHold.dispose(),this.onDown=new U.Signal,this.onUp=new U.Signal,this.onTap=new U.Signal,this.onHold=new U.Signal,this.moveCallbacks=[]),this._pollCounter=0}},resetSpeed:function(e,t){this._oldPosition.setTo(e,t),this.speed.setTo(0,0)},startPointer:function(e){if(0<=this.maxPointers&&this.countActivePointers(this.maxPointers)>=this.maxPointers)return null;if(!this.pointer1.active)return this.pointer1.start(e);if(!this.pointer2.active)return this.pointer2.start(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(!i.active)return i.start(e)}return null},updatePointer:function(e){if(this.pointer1.active&&this.pointer1.identifier===e.identifier)return this.pointer1.move(e);if(this.pointer2.active&&this.pointer2.identifier===e.identifier)return this.pointer2.move(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active&&i.identifier===e.identifier)return i.move(e)}return null},stopPointer:function(e){if(this.pointer1.active&&this.pointer1.identifier===e.identifier)return this.pointer1.stop(e);if(this.pointer2.active&&this.pointer2.identifier===e.identifier)return this.pointer2.stop(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active&&i.identifier===e.identifier)return i.stop(e)}return null},countActivePointers:function(e){void 0===e&&(e=this.pointers.length);for(var t=e,i=0;i<this.pointers.length&&0<t;i++)this.pointers[i].active&&t--;return e-t},getPointer:function(e){void 0===e&&(e=!1);for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active===e)return i}return null},getPointerFromIdentifier:function(e){for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.identifier===e)return i}return null},getPointerFromId:function(e){for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.pointerId===e)return i}return null},getLocalPosition:function(e,t,i){void 0===i&&(i=new U.Point);var n=e.worldTransform,r=1/(n.a*n.d+n.c*-n.b);return i.setTo(n.d*r*t.x+-n.c*r*t.y+(n.ty*n.c-n.tx*n.d)*r,n.a*r*t.y+-n.b*r*t.x+(-n.ty*n.a+n.tx*n.b)*r)},hitTest:function(e,t,i){if(!e.worldVisible)return!1;if(this.getLocalPosition(e,t,this._localPoint),i.copyFrom(this._localPoint),e.hitArea&&e.hitArea.contains)return e.hitArea.contains(this._localPoint.x,this._localPoint.y);if(e instanceof U.TileSprite){var n=e.width,r=e.height,o=-n*e.anchor.x;if(this._localPoint.x>=o&&this._localPoint.x<o+n){var a=-r*e.anchor.y;if(this._localPoint.y>=a&&this._localPoint.y<a+r)return!0}}else if(e instanceof PIXI.Sprite){n=e.texture.frame.width,r=e.texture.frame.height,o=-n*e.anchor.x;if(this._localPoint.x>=o&&this._localPoint.x<o+n){a=-r*e.anchor.y;if(this._localPoint.y>=a&&this._localPoint.y<a+r)return!0}}else if(U.Graphics&&e instanceof U.Graphics)for(var s=0;s<e.graphicsData.length;s++){var p=e.graphicsData[s];if(p.fill&&p.shape&&p.shape.contains(this._localPoint.x,this._localPoint.y))return!0}for(s=0;s<e.children.length;s++)if(this.hitTest(e.children[s],t,i))return!0;return!1},onClickTrampoline:function(){this.activePointer.processClickTrampolines()}},U.Input.prototype.constructor=U.Input,Object.defineProperty(U.Input.prototype,"x",{get:function(){return this._x},set:function(e){this._x=Math.floor(e)}}),Object.defineProperty(U.Input.prototype,"y",{get:function(){return this._y},set:function(e){this._y=Math.floor(e)}}),Object.defineProperty(U.Input.prototype,"pollLocked",{get:function(){return 0<this.pollRate&&this._pollCounter<this.pollRate}}),Object.defineProperty(U.Input.prototype,"totalInactivePointers",{get:function(){return this.pointers.length-this.countActivePointers()}}),Object.defineProperty(U.Input.prototype,"totalActivePointers",{get:function(){return this.countActivePointers()}}),Object.defineProperty(U.Input.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(U.Input.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),U.Mouse=function(e){this.game=e,this.input=e.input,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.mouseWheelCallback=null,this.capture=!1,this.button=-1,this.wheelDelta=0,this.enabled=!0,this.locked=!1,this.stopOnGameOut=!1,this.pointerLock=new U.Signal,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null,this._onMouseWheel=null,this._wheelEvent=null},U.Mouse.NO_BUTTON=-1,U.Mouse.LEFT_BUTTON=0,U.Mouse.MIDDLE_BUTTON=1,U.Mouse.RIGHT_BUTTON=2,U.Mouse.BACK_BUTTON=3,U.Mouse.FORWARD_BUTTON=4,U.Mouse.WHEEL_UP=1,U.Mouse.WHEEL_DOWN=-1,U.Mouse.prototype={start:function(){if((!this.game.device.android||!1!==this.game.device.chrome)&&null===this._onMouseDown){var t=this;this._onMouseDown=function(e){return t.onMouseDown(e)},this._onMouseMove=function(e){return t.onMouseMove(e)},this._onMouseUp=function(e){return t.onMouseUp(e)},this._onMouseUpGlobal=function(e){return t.onMouseUpGlobal(e)},this._onMouseOutGlobal=function(e){return t.onMouseOutGlobal(e)},this._onMouseOut=function(e){return t.onMouseOut(e)},this._onMouseOver=function(e){return t.onMouseOver(e)},this._onMouseWheel=function(e){return t.onMouseWheel(e)};var e=this.game.canvas;e.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("mousemove",this._onMouseMove,!0),e.addEventListener("mouseup",this._onMouseUp,!0),this.game.device.cocoonJS||(window.addEventListener("mouseup",this._onMouseUpGlobal,!0),window.addEventListener("mouseout",this._onMouseOutGlobal,!0),e.addEventListener("mouseover",this._onMouseOver,!0),e.addEventListener("mouseout",this._onMouseOut,!0));var i=this.game.device.wheelEvent;i&&(e.addEventListener(i,this._onMouseWheel,!0),"mousewheel"===i?this._wheelEvent=new n(-.025,1):"DOMMouseScroll"===i&&(this._wheelEvent=new n(1,1)))}},onMouseDown:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.start(e))},onMouseMove:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.move(e))},onMouseUp:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.stop(e))},onMouseUpGlobal:function(e){this.input.mousePointer.withinGame||(this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,e),e.identifier=0,this.input.mousePointer.stop(e))},onMouseOutGlobal:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!1,this.input.enabled&&this.enabled&&(this.input.mousePointer.stop(e),this.input.mousePointer.leftButton.stop(e),this.input.mousePointer.rightButton.stop(e))},onMouseOut:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!1,this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&this.stopOnGameOut&&(e.identifier=0,this.input.mousePointer.stop(e))},onMouseOver:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!0,this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,e)},onMouseWheel:function(e){this._wheelEvent&&(e=this._wheelEvent.bindEvent(e)),this.event=e,this.capture&&e.preventDefault(),this.wheelDelta=U.Math.clamp(-e.deltaY,-1,1),this.mouseWheelCallback&&this.mouseWheelCallback.call(this.callbackContext,e)},requestPointerLock:function(){if(this.game.device.pointerLock){var e=this.game.canvas;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock();var t=this;this._pointerLockChange=function(e){return t.pointerLockChange(e)},document.addEventListener("pointerlockchange",this._pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},pointerLockChange:function(e){var t=this.game.canvas;document.pointerLockElement===t||document.mozPointerLockElement===t||document.webkitPointerLockElement===t?(this.locked=!0,this.pointerLock.dispatch(!0,e)):(this.locked=!1,this.pointerLock.dispatch(!1,e))},releasePointerLock:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)},stop:function(){var e=this.game.canvas;e.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("mousemove",this._onMouseMove,!0),e.removeEventListener("mouseup",this._onMouseUp,!0),e.removeEventListener("mouseover",this._onMouseOver,!0),e.removeEventListener("mouseout",this._onMouseOut,!0);var t=this.game.device.wheelEvent;t&&e.removeEventListener(t,this._onMouseWheel,!0),window.removeEventListener("mouseup",this._onMouseUpGlobal,!0),window.removeEventListener("mouseout",this._onMouseOutGlobal,!0),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},U.Mouse.prototype.constructor=U.Mouse,((n.prototype={}).constructor=n).prototype.bindEvent=function(e){if(!n._stubsGenerated&&e){var t=function(t){return function(){var e=this.originalEvent[t];return"function"!=typeof e?e:e.bind(this.originalEvent)}};for(var i in e)i in n.prototype||Object.defineProperty(n.prototype,i,{get:t(i)});n._stubsGenerated=!0}return this.originalEvent=e,this},Object.defineProperties(n.prototype,{type:{value:"wheel"},deltaMode:{get:function(){return this._deltaMode}},deltaY:{get:function(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0}},deltaX:{get:function(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0}},deltaZ:{value:0}}),U.MSPointer=function(e){this.game=e,this.input=e.input,this.callbackContext=this.game,this.pointerDownCallback=null,this.pointerMoveCallback=null,this.pointerUpCallback=null,this.capture=!1,this.event=null,this.active=!1,this.enabled=!0,this._onMSPointerDown=null,this._onMSPointerMove=null,this._onMSPointerUp=null,this._onMSPointerUpGlobal=null,this._onMSPointerOut=null,this._onMSPointerOver=null},U.MSPointer.prototype={start:function(){if(!this.game.device.mspointer)return!1;if(null!==this._onMSPointerDown)return!1;var t=this;this._onMSPointerDown=function(e){return t.onPointerDown(e)},this._onMSPointerMove=function(e){return t.onPointerMove(e)},this._onMSPointerUp=function(e){return t.onPointerUp(e)},this._onMSPointerUpGlobal=function(e){return t.onPointerUpGlobal(e)},this._onMSPointerOut=function(e){return t.onPointerOut(e)},this._onMSPointerOver=function(e){return t.onPointerOver(e)};var e=this.game.canvas;return e.addEventListener("MSPointerDown",this._onMSPointerDown,!1),e.addEventListener("MSPointerMove",this._onMSPointerMove,!1),e.addEventListener("MSPointerUp",this._onMSPointerUp,!1),e.addEventListener("pointerdown",this._onMSPointerDown,!1),e.addEventListener("pointermove",this._onMSPointerMove,!1),e.addEventListener("pointerup",this._onMSPointerUp,!1),e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none",this.game.device.cocoonJS||(window.addEventListener("MSPointerUp",this._onMSPointerUpGlobal,!0),e.addEventListener("MSPointerOver",this._onMSPointerOver,!0),e.addEventListener("MSPointerOut",this._onMSPointerOut,!0),window.addEventListener("pointerup",this._onMSPointerUpGlobal,!0),e.addEventListener("pointerover",this._onMSPointerOver,!0),e.addEventListener("pointerout",this._onMSPointerOut,!0)),this.active=!0},onPointerDown:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerDownCallback&&this.pointerDownCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.start(e):this.input.startPointer(e))},onPointerMove:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerMoveCallback&&this.pointerMoveCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.move(e):this.input.updatePointer(e))},onPointerUp:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerUpCallback&&this.pointerUpCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.stop(e):this.input.stopPointer(e))},onPointerUpGlobal:function(e){if("mouse"!==e.pointerType&&4!==e.pointerType||this.input.mousePointer.withinGame){var t=this.input.getPointerFromIdentifier(e.identifier);t&&t.withinGame&&this.onPointerUp(e)}else this.onPointerUp(e)},onPointerOut:function(e){if(this.event=e,this.capture&&e.preventDefault(),"mouse"===e.pointerType||4===e.pointerType)this.input.mousePointer.withinGame=!1;else{var t=this.input.getPointerFromIdentifier(e.identifier);t&&(t.withinGame=!1)}this.input.mouse.mouseOutCallback&&this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext,e),this.input.enabled&&this.enabled&&this.input.mouse.stopOnGameOut&&(e.identifier=0,t?t.stop(e):this.input.mousePointer.stop(e))},onPointerOver:function(e){if(this.event=e,this.capture&&e.preventDefault(),"mouse"===e.pointerType||4===e.pointerType)this.input.mousePointer.withinGame=!0;else{var t=this.input.getPointerFromIdentifier(e.identifier);t&&(t.withinGame=!0)}this.input.mouse.mouseOverCallback&&this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext,e)},stop:function(){var e=this.game.canvas;e.removeEventListener("MSPointerDown",this._onMSPointerDown,!1),e.removeEventListener("MSPointerMove",this._onMSPointerMove,!1),e.removeEventListener("MSPointerUp",this._onMSPointerUp,!1),e.removeEventListener("pointerdown",this._onMSPointerDown,!1),e.removeEventListener("pointermove",this._onMSPointerMove,!1),e.removeEventListener("pointerup",this._onMSPointerUp,!1),window.removeEventListener("MSPointerUp",this._onMSPointerUpGlobal,!0),e.removeEventListener("MSPointerOver",this._onMSPointerOver,!0),e.removeEventListener("MSPointerOut",this._onMSPointerOut,!0),window.removeEventListener("pointerup",this._onMSPointerUpGlobal,!0),e.removeEventListener("pointerover",this._onMSPointerOver,!0),e.removeEventListener("pointerout",this._onMSPointerOut,!0),this.active=!1}},U.MSPointer.prototype.constructor=U.MSPointer,U.DeviceButton=function(e,t){this.parent=e,this.game=e.game,this.event=null,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.repeats=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1,this.value=0,this.buttonCode=t,this.onDown=new U.Signal,this.onUp=new U.Signal,this.onFloat=new U.Signal},U.DeviceButton.prototype={start:function(e,t){this.isDown||(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.time,this.repeats=0,this.event=e,this.value=t,e&&(this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey),this.onDown.dispatch(this,t))},stop:function(e,t){this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.event=e,this.value=t,e&&(this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey),this.onUp.dispatch(this,t))},padFloat:function(e){this.value=e,this.onFloat.dispatch(this,e)},justPressed:function(e){return e=e||250,this.isDown&&this.timeDown+e>this.game.time.time},justReleased:function(e){return e=e||250,this.isUp&&this.timeUp+e>this.game.time.time},reset:function(){this.isDown=!1,this.isUp=!0,this.timeDown=this.game.time.time,this.repeats=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1},destroy:function(){this.onDown.dispose(),this.onUp.dispose(),this.onFloat.dispose(),this.parent=null,this.game=null}},U.DeviceButton.prototype.constructor=U.DeviceButton,Object.defineProperty(U.DeviceButton.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.time-this.timeDown}}),U.Pointer=function(e,t,i){this.game=e,this.id=t,this.type=U.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.pointerMode=i||U.PointerMode.CURSOR|U.PointerMode.CONTACT,this.target=null,this.button=null,this.leftButton=new U.DeviceButton(this,U.Pointer.LEFT_BUTTON),this.middleButton=new U.DeviceButton(this,U.Pointer.MIDDLE_BUTTON),this.rightButton=new U.DeviceButton(this,U.Pointer.RIGHT_BUTTON),this.backButton=new U.DeviceButton(this,U.Pointer.BACK_BUTTON),this.forwardButton=new U.DeviceButton(this,U.Pointer.FORWARD_BUTTON),this.eraserButton=new U.DeviceButton(this,U.Pointer.ERASER_BUTTON),this._holdSent=!1,this._history=[],this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=0===t,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=Number.MAX_VALUE,this.targetObject=null,this.interactiveCandidates=[],this.active=!1,this.dirty=!1,this.position=new U.Point,this.positionDown=new U.Point,this.positionUp=new U.Point,this.circle=new U.Circle(0,0,44),this._clickTrampolines=null,this._trampolineTargetObject=null},U.Pointer.NO_BUTTON=0,U.Pointer.LEFT_BUTTON=1,U.Pointer.RIGHT_BUTTON=2,U.Pointer.MIDDLE_BUTTON=4,U.Pointer.BACK_BUTTON=8,U.Pointer.FORWARD_BUTTON=16,U.Pointer.ERASER_BUTTON=32,U.Pointer.prototype={resetButtons:function(){this.isDown=!1,this.isUp=!0,this.isMouse&&(this.leftButton.reset(),this.middleButton.reset(),this.rightButton.reset(),this.backButton.reset(),this.forwardButton.reset(),this.eraserButton.reset())},processButtonsDown:function(e,t){U.Pointer.LEFT_BUTTON&e&&this.leftButton.start(t),U.Pointer.RIGHT_BUTTON&e&&this.rightButton.start(t),U.Pointer.MIDDLE_BUTTON&e&&this.middleButton.start(t),U.Pointer.BACK_BUTTON&e&&this.backButton.start(t),U.Pointer.FORWARD_BUTTON&e&&this.forwardButton.start(t),U.Pointer.ERASER_BUTTON&e&&this.eraserButton.start(t)},processButtonsUp:function(e,t){e===U.Mouse.LEFT_BUTTON&&this.leftButton.stop(t),e===U.Mouse.RIGHT_BUTTON&&this.rightButton.stop(t),e===U.Mouse.MIDDLE_BUTTON&&this.middleButton.stop(t),e===U.Mouse.BACK_BUTTON&&this.backButton.stop(t),e===U.Mouse.FORWARD_BUTTON&&this.forwardButton.stop(t),5===e&&this.eraserButton.stop(t)},updateButtons:function(e){this.button=e.button;var t="down"===e.type.toLowerCase().substr(-4);void 0!==e.buttons?t?this.processButtonsDown(e.buttons,e):this.processButtonsUp(e.button,e):t?this.leftButton.start(e):(this.leftButton.stop(e),this.rightButton.stop(e)),1===e.buttons&&e.ctrlKey&&this.leftButton.isDown&&(this.leftButton.stop(e),this.rightButton.start(e)),this.isUp=!0,this.isDown=!1,(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown)&&(this.isUp=!1,this.isDown=!0)},start:function(e){var t=this.game.input;return e.pointerId&&(this.pointerId=e.pointerId),this.identifier=e.identifier,this.target=e.target,this.isMouse?this.updateButtons(e):(this.isDown=!0,this.isUp=!1),this.active=!0,this.withinGame=!0,this.dirty=!1,this._history=[],this._clickTrampolines=null,this._trampolineTargetObject=null,this.msSinceLastClick=this.game.time.time-this.timeDown,this.timeDown=this.game.time.time,this._holdSent=!1,this.move(e,!0),this.positionDown.setTo(this.x,this.y),(t.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||t.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||t.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===t.totalActivePointers)&&(t.x=this.x,t.y=this.y,t.position.setTo(this.x,this.y),t.onDown.dispatch(this,e),t.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){var e=this.game.input;this.active&&(this.dirty&&(0<e.interactiveItems.total&&this.processInteractiveObjects(!1),this.dirty=!1),!1===this._holdSent&&this.duration>=e.holdRate&&((e.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||e.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===e.totalActivePointers)&&e.onHold.dispatch(this),this._holdSent=!0),e.recordPointerHistory&&this.game.time.time>=this._nextDrop&&(this._nextDrop=this.game.time.time+e.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>e.recordLimit&&this._history.shift()))},move:function(e,t){var i=this.game.input;if(!i.pollLocked){void 0===t&&(t=!1),void 0!==e.button&&(this.button=e.button),t&&this.isMouse&&this.updateButtons(e),this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=e.pageX,this.pageY=e.pageY,this.screenX=e.screenX,this.screenY=e.screenY,this.isMouse&&i.mouse.locked&&!t&&(this.rawMovementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.rawMovementY=e.movementY||e.mozMovementY||e.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-this.game.scale.offset.x)*i.scale.x,this.y=(this.pageY-this.game.scale.offset.y)*i.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(i.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||i.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||i.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===i.totalActivePointers)&&(i.activePointer=this,i.x=this.x,i.y=this.y,i.position.setTo(i.x,i.y),i.circle.x=i.x,i.circle.y=i.y),this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY);for(var n=i.moveCallbacks.length;n--;)i.moveCallbacks[n].callback.call(i.moveCallbacks[n].context,this,this.x,this.y,t);return null!==this.targetObject&&!0===this.targetObject.isDragged?!1===this.targetObject.update(this)&&(this.targetObject=null):0<i.interactiveItems.total&&this.processInteractiveObjects(t),this}},processInteractiveObjects:function(e){var t=0,i=-1,n=null,r=this.game.input.interactiveItems.first;for(this.interactiveCandidates=[];r;)r.checked=!1,r.validForInput(i,t,!1)&&(r.checked=!0,(e&&r.checkPointerDown(this,!0)||!e&&r.checkPointerOver(this,!0))&&(t=r.sprite.renderOrderID,i=r.priorityID,n=r,this.interactiveCandidates.push(r))),r=this.game.input.interactiveItems.next;for(r=this.game.input.interactiveItems.first;r;)!r.checked&&r.validForInput(i,t,!0)&&(e&&r.checkPointerDown(this,!1)||!e&&r.checkPointerOver(this,!1))&&(t=r.sprite.renderOrderID,i=r.priorityID,n=r,this.interactiveCandidates.push(r)),r=this.game.input.interactiveItems.next;return this.game.input.customCandidateHandler&&(n=this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext,this,this.interactiveCandidates,n)),this.swapTarget(n,!1),null!==this.targetObject},swapTarget:function(e,t){void 0===t&&(t=!1),null===e?this.targetObject&&(this.targetObject._pointerOutHandler(this,t),this.targetObject=null):null===this.targetObject?(this.targetObject=e)._pointerOverHandler(this,t):this.targetObject===e?!1===e.update(this)&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this,t),this.targetObject=e,this.targetObject._pointerOverHandler(this,t))},leave:function(e){this.withinGame=!1,this.move(e,!1)},stop:function(e){var t=this.game.input;return this._stateReset&&this.withinGame?void e.preventDefault():(this.timeUp=this.game.time.time,(t.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||t.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||t.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===t.totalActivePointers)&&(t.onUp.dispatch(this,e),0<=this.duration&&this.duration<=t.tapRate&&(this.timeUp-this.previousTapTime<t.doubleTapRate?t.onTap.dispatch(this,!0):t.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.isMouse?this.updateButtons(e):(this.isDown=!1,this.isUp=!0),0<this.id&&(this.active=!1),this.withinGame=this.game.scale.bounds.contains(e.pageX,e.pageY),this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),!1===this.isMouse&&t.currentPointers--,t.interactiveItems.callAll("_releasedHandler",this),this._clickTrampolines&&(this._trampolineTargetObject=this.targetObject),this.targetObject=null,this)},justPressed:function(e){return e=e||this.game.input.justPressedRate,!0===this.isDown&&this.timeDown+e>this.game.time.time},justReleased:function(e){return e=e||this.game.input.justReleasedRate,this.isUp&&this.timeUp+e>this.game.time.time},addClickTrampoline:function(e,t,i,n){if(this.isDown){for(var r=this._clickTrampolines=this._clickTrampolines||[],o=0;o<r.length;o++)if(r[o].name===e){r.splice(o,1);break}r.push({name:e,targetObject:this.targetObject,callback:t,callbackContext:i,callbackArgs:n})}},processClickTrampolines:function(){var e=this._clickTrampolines;if(e){for(var t=0;t<e.length;t++){var i=e[t];i.targetObject===this._trampolineTargetObject&&i.callback.apply(i.callbackContext,i.callbackArgs)}this._clickTrampolines=null,this._trampolineTargetObject=null}},reset:function(){!1===this.isMouse&&(this.active=!1),this.pointerId=null,this.identifier=null,this.dirty=!1,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.resetButtons(),this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},U.Pointer.prototype.constructor=U.Pointer,Object.defineProperty(U.Pointer.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.time-this.timeDown}}),Object.defineProperty(U.Pointer.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(U.Pointer.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),U.PointerMode={CURSOR:1,CONTACT:2},U.Touch=function(e){this.game=e,this.enabled=!0,this.touchLockCallbacks=[],this.callbackContext=this.game,this.touchStartCallback=null,this.touchMoveCallback=null,this.touchEndCallback=null,this.touchEnterCallback=null,this.touchLeaveCallback=null,this.touchCancelCallback=null,this.preventDefault=!0,this.event=null,this._onTouchStart=null,this._onTouchMove=null,this._onTouchEnd=null,this._onTouchEnter=null,this._onTouchLeave=null,this._onTouchCancel=null,this._onTouchMove=null},U.Touch.prototype={start:function(){if(null===this._onTouchStart){var t=this;this.game.device.touch&&(this._onTouchStart=function(e){return t.onTouchStart(e)},this._onTouchMove=function(e){return t.onTouchMove(e)},this._onTouchEnd=function(e){return t.onTouchEnd(e)},this._onTouchEnter=function(e){return t.onTouchEnter(e)},this._onTouchLeave=function(e){return t.onTouchLeave(e)},this._onTouchCancel=function(e){return t.onTouchCancel(e)},this.game.canvas.addEventListener("touchstart",this._onTouchStart,!1),this.game.canvas.addEventListener("touchmove",this._onTouchMove,!1),this.game.canvas.addEventListener("touchend",this._onTouchEnd,!1),this.game.canvas.addEventListener("touchcancel",this._onTouchCancel,!1),this.game.device.cocoonJS||(this.game.canvas.addEventListener("touchenter",this._onTouchEnter,!1),this.game.canvas.addEventListener("touchleave",this._onTouchLeave,!1)))}},consumeDocumentTouches:function(){this._documentTouchMove=function(e){e.preventDefault()},document.addEventListener("touchmove",this._documentTouchMove,!1)},addTouchLockCallback:function(e,t,i){void 0===i&&(i=!1),this.touchLockCallbacks.push({callback:e,context:t,onEnd:i})},removeTouchLockCallback:function(e,t){for(var i=this.touchLockCallbacks.length;i--;)if(this.touchLockCallbacks[i].callback===e&&this.touchLockCallbacks[i].context===t)return this.touchLockCallbacks.splice(i,1),!0;return!1},onTouchStart:function(e){for(var t=this.touchLockCallbacks.length;t--;){var i=this.touchLockCallbacks[t];!i.onEnd&&i.callback.call(i.context,this,e)&&this.touchLockCallbacks.splice(t,1)}if(this.event=e,this.game.input.enabled&&this.enabled){this.touchStartCallback&&this.touchStartCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(t=0;t<e.changedTouches.length;t++)this.game.input.startPointer(e.changedTouches[t])}},onTouchCancel:function(e){if(this.event=e,this.touchCancelCallback&&this.touchCancelCallback.call(this.callbackContext,e),this.game.input.enabled&&this.enabled){this.preventDefault&&e.preventDefault();for(var t=0;t<e.changedTouches.length;t++)this.game.input.stopPointer(e.changedTouches[t])}},onTouchEnter:function(e){this.event=e,this.touchEnterCallback&&this.touchEnterCallback.call(this.callbackContext,e),this.game.input.enabled&&this.enabled&&this.preventDefault&&e.preventDefault()},onTouchLeave:function(e){this.event=e,this.touchLeaveCallback&&this.touchLeaveCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault()},onTouchMove:function(e){this.event=e,this.touchMoveCallback&&this.touchMoveCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(var t=0;t<e.changedTouches.length;t++)this.game.input.updatePointer(e.changedTouches[t])},onTouchEnd:function(e){for(var t=this.touchLockCallbacks.length;t--;){var i=this.touchLockCallbacks[t];i.onEnd&&i.callback.call(i.context,this,e)&&this.touchLockCallbacks.splice(t,1)}this.event=e,this.touchEndCallback&&this.touchEndCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(t=0;t<e.changedTouches.length;t++)this.game.input.stopPointer(e.changedTouches[t])},stop:function(){this.game.device.touch&&(this.game.canvas.removeEventListener("touchstart",this._onTouchStart),this.game.canvas.removeEventListener("touchmove",this._onTouchMove),this.game.canvas.removeEventListener("touchend",this._onTouchEnd),this.game.canvas.removeEventListener("touchenter",this._onTouchEnter),this.game.canvas.removeEventListener("touchleave",this._onTouchLeave),this.game.canvas.removeEventListener("touchcancel",this._onTouchCancel))}},U.Touch.prototype.constructor=U.Touch,U.InputHandler=function(e){this.sprite=e,this.game=e.game,this.enabled=!1,this.checked=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.scaleLayer=!1,this.dragOffset=new U.Point,this.dragFromCenter=!1,this.dragStopBlocksInputUp=!1,this.dragStartPoint=new U.Point,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this.downPoint=new U.Point,this.snapPoint=new U.Point,this._dragPoint=new U.Point,this._dragPhase=!1,this._pendingDrag=!1,this._dragTimePass=!1,this._dragDistancePass=!1,this._wasEnabled=!1,this._tempPoint=new U.Point,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,camX:0,camY:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})},U.InputHandler.prototype={start:function(e,t){if(e=e||0,void 0===t&&(t=!1),!1===this.enabled){this.game.input.interactiveItems.add(this),this.useHandCursor=t,this.priorityID=e;for(var i=0;i<10;i++)this._pointerData[i]={id:i,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new U.Point,this.enabled=!0,this._wasEnabled=!0}return this.sprite.events.onAddedToGroup.add(this.addedToGroup,this),this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup,this),this.sprite},addedToGroup:function(){this._dragPhase||this._wasEnabled&&!this.enabled&&this.start()},removedFromGroup:function(){this._dragPhase||(this.enabled?(this._wasEnabled=!0,this.stop()):this._wasEnabled=!1)},reset:function(){this.enabled=!1;for(var e=0;e<10;e++)this._pointerData[e]={id:e,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){!1!==this.enabled&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(e,t,i){return void 0===i&&(i=!0),!(!this.enabled||0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID||this.sprite.parent&&this.sprite.parent.ignoreChildInput||!i&&(this.pixelPerfectClick||this.pixelPerfectOver)||!(this.priorityID>e||this.priorityID===e&&this.sprite.renderOrderID>t))},isPixelPerfect:function(){return this.pixelPerfectClick||this.pixelPerfectOver},pointerX:function(e){return e=e||0,this._pointerData[e].x},pointerY:function(e){return e=e||0,this._pointerData[e].y},pointerDown:function(e){return e=e||0,this._pointerData[e].isDown},pointerUp:function(e){return e=e||0,this._pointerData[e].isUp},pointerTimeDown:function(e){return e=e||0,this._pointerData[e].timeDown},pointerTimeUp:function(e){return e=e||0,this._pointerData[e].timeUp},pointerOver:function(e){if(!this.enabled)return!1;if(void 0!==e)return this._pointerData[e].isOver;for(var t=0;t<10;t++)if(this._pointerData[t].isOver)return!0;return!1},pointerOut:function(e){if(!this.enabled)return!1;if(void 0!==e)return this._pointerData[e].isOut;for(var t=0;t<10;t++)if(this._pointerData[t].isOut)return!0},pointerTimeOver:function(e){return e=e||0,this._pointerData[e].timeOver},pointerTimeOut:function(e){return e=e||0,this._pointerData[e].timeOut},pointerDragged:function(e){return e=e||0,this._pointerData[e].isDragged},checkPointerDown:function(e,t){return!!(e.isDown&&this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&0!==this.sprite.worldScale.x&&0!==this.sprite.worldScale.y)&&!!this.game.input.hitTest(this.sprite,e,this._tempPoint)&&(void 0===t&&(t=!1),!(!t&&this.pixelPerfectClick)||this.checkPixel(this._tempPoint.x,this._tempPoint.y))},checkPointerOver:function(e,t){return!!(this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&0!==this.sprite.worldScale.x&&0!==this.sprite.worldScale.y)&&!!this.game.input.hitTest(this.sprite,e,this._tempPoint)&&(void 0===t&&(t=!1),!(!t&&this.pixelPerfectOver)||this.checkPixel(this._tempPoint.x,this._tempPoint.y))},checkPixel:function(e,t,i){if(this.sprite.texture.baseTexture.source){if(null===e&&null===t){this.game.input.getLocalPosition(this.sprite,i,this._tempPoint);e=this._tempPoint.x,t=this._tempPoint.y}if(0!==this.sprite.anchor.x&&(e-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(t-=-this.sprite.texture.frame.height*this.sprite.anchor.y),e+=this.sprite.texture.frame.x,t+=this.sprite.texture.frame.y,this.sprite.texture.trim&&(e-=this.sprite.texture.trim.x,t-=this.sprite.texture.trim.y,e<this.sprite.texture.crop.x||e>this.sprite.texture.crop.right||t<this.sprite.texture.crop.y||t>this.sprite.texture.crop.bottom))return this._dx=e,this._dy=t,!1;if(this._dx=e,this._dy=t,this.game.input.hitContext.clearRect(0,0,1,1),this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,e,t,1,1,0,0,1,1),this.game.input.hitContext.getImageData(0,0,1,1).data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(e){if(null!==this.sprite&&void 0!==this.sprite.parent)return this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this._pendingDrag?(this._dragDistancePass||(this._dragDistancePass=U.Math.distance(e.x,e.y,this.downPoint.x,this.downPoint.y)>=this.dragDistanceThreshold),this._dragDistancePass&&this._dragTimePass&&this.startDrag(e),!0):this.draggable&&this._draggedPointerID===e.id?this.updateDrag(e,!1):this._pointerData[e.id].isOver?this.checkPointerOver(e)?(this._pointerData[e.id].x=e.x-this.sprite.x,this._pointerData[e.id].y=e.y-this.sprite.y,!0):(this._pointerOutHandler(e),!1):void 0:(this._pointerOutHandler(e),!1)},_pointerOverHandler:function(e,t){if(null!==this.sprite){var i=this._pointerData[e.id];if(!1===i.isOver||e.dirty){var n=!1===i.isOver;i.isOver=!0,i.isOut=!1,i.timeOver=this.game.time.time,i.x=e.x-this.sprite.x,i.y=e.y-this.sprite.y,this.useHandCursor&&!1===i.isDragged&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),!t&&n&&this.sprite&&this.sprite.events&&this.sprite.events.onInputOver$dispatch(this.sprite,e),this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputOver.dispatch(this.sprite,e)}}},_pointerOutHandler:function(e,t){if(null!==this.sprite){var i=this._pointerData[e.id];i.isOver=!1,i.isOut=!0,i.timeOut=this.game.time.time,this.useHandCursor&&!1===i.isDragged&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),!t&&this.sprite&&this.sprite.events&&(this.sprite.events.onInputOut$dispatch(this.sprite,e),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputOut.dispatch(this.sprite,e))}},_touchedHandler:function(e){if(null!==this.sprite){var t=this._pointerData[e.id];if(!t.isDown&&t.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,e))return;if(t.isDown=!0,t.isUp=!1,t.timeDown=this.game.time.time,this.downPoint.set(e.x,e.y),e.dirty=!0,this.sprite&&this.sprite.events&&(this.sprite.events.onInputDown$dispatch(this.sprite,e),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputDown.dispatch(this.sprite,e),null===this.sprite))return;this.draggable&&!1===this.isDragged&&(0===this.dragTimeThreshold&&0===this.dragDistanceThreshold?this.startDrag(e):(this._pendingDrag=!0,this._dragDistancePass=0===this.dragDistanceThreshold,0<this.dragTimeThreshold?(this._dragTimePass=!1,this.game.time.events.add(this.dragTimeThreshold,this.dragTimeElapsed,this,e)):this._dragTimePass=!0)),this.bringToTop&&this.sprite.bringToTop()}}},dragTimeElapsed:function(e){this._dragTimePass=!0,this._pendingDrag&&this.sprite&&this._dragDistancePass&&this.startDrag(e)},_releasedHandler:function(e){if(null!==this.sprite){var t=this._pointerData[e.id];if(t.isDown&&e.isUp){t.isDown=!1,t.isUp=!0,t.timeUp=this.game.time.time,t.downDuration=t.timeUp-t.timeDown;var i=this.checkPointerOver(e);this.sprite&&this.sprite.events&&(this.dragStopBlocksInputUp&&(!this.dragStopBlocksInputUp||this.draggable&&this.isDragged&&this._draggedPointerID===e.id)||this.sprite.events.onInputUp$dispatch(this.sprite,e,i),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputUp.dispatch(this.sprite,e,i),i&&(i=this.checkPointerOver(e))),!(t.isOver=i)&&this.useHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),e.dirty=!0,this._pendingDrag=!1,this.draggable&&this.isDragged&&this._draggedPointerID===e.id&&this.stopDrag(e)}}},updateDrag:function(e,t){if(void 0===t&&(t=!1),e.isUp)return this.stopDrag(e),!1;var i=this.globalToLocalX(e.x)+this._dragPoint.x+this.dragOffset.x,n=this.globalToLocalY(e.y)+this._dragPoint.y+this.dragOffset.y;if(this.sprite.fixedToCamera)this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=i),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=n),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y));else{var r=this.game.camera.x-this._pointerData[e.id].camX,o=this.game.camera.y-this._pointerData[e.id].camY;this.allowHorizontalDrag&&(this.sprite.x=i+r),this.allowVerticalDrag&&(this.sprite.y=n+o),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.x,this.sprite.y))}return this.sprite.events.onDragUpdate.dispatch(this.sprite,e,i,n,this.snapPoint,t),!0},justOver:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isOver&&this.overDuration(e)<t},justOut:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isOut&&this.game.time.time-this._pointerData[e].timeOut<t},justPressed:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isDown&&this.downDuration(e)<t},justReleased:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isUp&&this.game.time.time-this._pointerData[e].timeUp<t},overDuration:function(e){return e=e||0,this._pointerData[e].isOver?this.game.time.time-this._pointerData[e].timeOver:-1},downDuration:function(e){return e=e||0,this._pointerData[e].isDown?this.game.time.time-this._pointerData[e].timeDown:-1},enableDrag:function(e,t,i,n,r,o){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=255),void 0===r&&(r=null),void 0===o&&(o=null),this._dragPoint=new U.Point,this.draggable=!0,this.bringToTop=t,this.dragOffset=new U.Point,this.dragFromCenter=e,this.pixelPerfectClick=i,this.pixelPerfectAlpha=n,r&&(this.boundsRect=r),o&&(this.boundsSprite=o)},disableDrag:function(){if(this._pointerData)for(var e=0;e<10;e++)this._pointerData[e].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1,this._pendingDrag=!1},startDrag:function(e){var t=this.sprite.x,i=this.sprite.y;if(this.isDragged=!0,this._draggedPointerID=e.id,this._pointerData[e.id].camX=this.game.camera.x,this._pointerData[e.id].camY=this.game.camera.y,this._pointerData[e.id].isDragged=!0,this.sprite.fixedToCamera){if(this.dragFromCenter){var n=this.sprite.getBounds();this.sprite.cameraOffset.x=this.globalToLocalX(e.x)+(this.sprite.cameraOffset.x-n.centerX),this.sprite.cameraOffset.y=this.globalToLocalY(e.y)+(this.sprite.cameraOffset.y-n.centerY)}this._dragPoint.setTo(this.sprite.cameraOffset.x-e.x,this.sprite.cameraOffset.y-e.y)}else{if(this.dragFromCenter){n=this.sprite.getBounds();this.sprite.x=this.globalToLocalX(e.x)+(this.sprite.x-n.centerX),this.sprite.y=this.globalToLocalY(e.y)+(this.sprite.y-n.centerY)}this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(e.x),this.sprite.y-this.globalToLocalY(e.y))}this.updateDrag(e,!0),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.dragStartPoint.set(t,i),this.sprite.events.onDragStart$dispatch(this.sprite,e,t,i),this._pendingDrag=!1},globalToLocalX:function(e){return this.scaleLayer&&(e-=this.game.scale.grid.boundsFluid.x,e*=this.game.scale.grid.scaleFluidInversed.x),e},globalToLocalY:function(e){return this.scaleLayer&&(e-=this.game.scale.grid.boundsFluid.y,e*=this.game.scale.grid.scaleFluidInversed.y),e},stopDrag:function(e){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[e.id].isDragged=!1,this._dragPhase=!1,this._pendingDrag=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.events.onDragStop$dispatch(this.sprite,e),!1===this.checkPointerOver(e)&&this._pointerOutHandler(e)},setDragLock:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.allowHorizontalDrag=e,this.allowVerticalDrag=t},enableSnap:function(e,t,i,n,r,o){void 0===i&&(i=!0),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),this.snapX=e,this.snapY=t,this.snapOffsetX=r,this.snapOffsetY=o,this.snapOnDrag=i,this.snapOnRelease=n},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.left:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.left<this.boundsRect.left?this.sprite.x=this.boundsRect.x+this.sprite.offsetX:this.sprite.right>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsRect.top?this.sprite.y=this.boundsRect.top+this.sprite.offsetY:this.sprite.bottom>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.left<this.boundsSprite.left?this.sprite.x=this.boundsSprite.left+this.sprite.offsetX:this.sprite.right>this.boundsSprite.right&&(this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsSprite.top?this.sprite.y=this.boundsSprite.top+this.sprite.offsetY:this.sprite.bottom>this.boundsSprite.bottom&&(this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)))}},U.InputHandler.prototype.constructor=U.InputHandler,U.Gamepad=function(e){this.game=e,this._gamepadIndexMap={},this._rawPads=[],this._active=!1,this.enabled=!0,this._gamepadSupportAvailable=!!navigator.webkitGetGamepads||!!navigator.webkitGamepads||-1!==navigator.userAgent.indexOf("Firefox/")||!!navigator.getGamepads,this._prevRawGamepadTypes=[],this._prevTimestamps=[],(this.callbackContext=this).onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this._ongamepadconnected=null,this._gamepaddisconnected=null,this._gamepads=[new U.SinglePad(e,this),new U.SinglePad(e,this),new U.SinglePad(e,this),new U.SinglePad(e,this)]},U.Gamepad.prototype={addCallbacks:function(e,t){void 0!==t&&(this.onConnectCallback="function"==typeof t.onConnect?t.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof t.onDisconnect?t.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof t.onDown?t.onDown:this.onDownCallback,this.onUpCallback="function"==typeof t.onUp?t.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof t.onAxis?t.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof t.onFloat?t.onFloat:this.onFloatCallback,this.callbackContext=e)},start:function(){if(!this._active){this._active=!0;var t=this;this._onGamepadConnected=function(e){return t.onGamepadConnected(e)},this._onGamepadDisconnected=function(e){return t.onGamepadDisconnected(e)},window.addEventListener("gamepadconnected",this._onGamepadConnected,!1),window.addEventListener("gamepaddisconnected",this._onGamepadDisconnected,!1)}},onGamepadConnected:function(e){var t=e.gamepad;this._rawPads.push(t),this._gamepads[t.index].connect(t)},onGamepadDisconnected:function(e){var t=e.gamepad;for(var i in this._rawPads)this._rawPads[i].index===t.index&&this._rawPads.splice(i,1);this._gamepads[t.index].disconnect()},update:function(){this._pollGamepads(),this.pad1.pollStatus(),this.pad2.pollStatus(),this.pad3.pollStatus(),this.pad4.pollStatus()},_pollGamepads:function(){if(this._active){if(navigator.getGamepads)var e=navigator.getGamepads();else if(navigator.webkitGetGamepads)e=navigator.webkitGetGamepads();else if(navigator.webkitGamepads)e=navigator.webkitGamepads();if(e){for(var t=!(this._rawPads=[]),i=0;i<e.length&&(typeof e[i]!==this._prevRawGamepadTypes[i]&&(t=!0,this._prevRawGamepadTypes[i]=typeof e[i]),e[i]&&this._rawPads.push(e[i]),3!==i);i++);for(var n=0;n<this._gamepads.length;n++)this._gamepads[n]._rawPad=this._rawPads[n];if(t){for(var r,o={rawIndices:{},padIndices:{}},a=0;a<this._gamepads.length;a++)if((r=this._gamepads[a]).connected)for(var s=0;s<this._rawPads.length;s++)this._rawPads[s].index===r.index&&(o.rawIndices[r.index]=!0,o.padIndices[a]=!0);for(var p=0;p<this._gamepads.length;p++)if(r=this._gamepads[p],!o.padIndices[p]){this._rawPads.length<1&&r.disconnect();for(var l=0;l<this._rawPads.length&&!o.padIndices[p];l++){var h=this._rawPads[l];if(h){if(o.rawIndices[h.index]){r.disconnect();continue}r.connect(h),o.rawIndices[h.index]=!0,o.padIndices[p]=!0}else r.disconnect()}}}}}},setDeadZones:function(e){for(var t=0;t<this._gamepads.length;t++)this._gamepads[t].deadZone=e},stop:function(){this._active=!1,window.removeEventListener("gamepadconnected",this._onGamepadConnected),window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnected)},reset:function(){this.update();for(var e=0;e<this._gamepads.length;e++)this._gamepads[e].reset()},justPressed:function(e,t){for(var i=0;i<this._gamepads.length;i++)if(!0===this._gamepads[i].justPressed(e,t))return!0;return!1},justReleased:function(e,t){for(var i=0;i<this._gamepads.length;i++)if(!0===this._gamepads[i].justReleased(e,t))return!0;return!1},isDown:function(e){for(var t=0;t<this._gamepads.length;t++)if(!0===this._gamepads[t].isDown(e))return!0;return!1},destroy:function(){this.stop();for(var e=0;e<this._gamepads.length;e++)this._gamepads[e].destroy()}},U.Gamepad.prototype.constructor=U.Gamepad,Object.defineProperty(U.Gamepad.prototype,"active",{get:function(){return this._active}}),Object.defineProperty(U.Gamepad.prototype,"supported",{get:function(){return this._gamepadSupportAvailable}}),Object.defineProperty(U.Gamepad.prototype,"padsConnected",{get:function(){return this._rawPads.length}}),Object.defineProperty(U.Gamepad.prototype,"pad1",{get:function(){return this._gamepads[0]}}),Object.defineProperty(U.Gamepad.prototype,"pad2",{get:function(){return this._gamepads[1]}}),Object.defineProperty(U.Gamepad.prototype,"pad3",{get:function(){return this._gamepads[2]}}),Object.defineProperty(U.Gamepad.prototype,"pad4",{get:function(){return this._gamepads[3]}}),U.Gamepad.BUTTON_0=0,U.Gamepad.BUTTON_1=1,U.Gamepad.BUTTON_2=2,U.Gamepad.BUTTON_3=3,U.Gamepad.BUTTON_4=4,U.Gamepad.BUTTON_5=5,U.Gamepad.BUTTON_6=6,U.Gamepad.BUTTON_7=7,U.Gamepad.BUTTON_8=8,U.Gamepad.BUTTON_9=9,U.Gamepad.BUTTON_10=10,U.Gamepad.BUTTON_11=11,U.Gamepad.BUTTON_12=12,U.Gamepad.BUTTON_13=13,U.Gamepad.BUTTON_14=14,U.Gamepad.BUTTON_15=15,U.Gamepad.AXIS_0=0,U.Gamepad.AXIS_1=1,U.Gamepad.AXIS_2=2,U.Gamepad.AXIS_3=3,U.Gamepad.AXIS_4=4,U.Gamepad.AXIS_5=5,U.Gamepad.AXIS_6=6,U.Gamepad.AXIS_7=7,U.Gamepad.AXIS_8=8,U.Gamepad.AXIS_9=9,U.Gamepad.XBOX360_A=0,U.Gamepad.XBOX360_B=1,U.Gamepad.XBOX360_X=2,U.Gamepad.XBOX360_Y=3,U.Gamepad.XBOX360_LEFT_BUMPER=4,U.Gamepad.XBOX360_RIGHT_BUMPER=5,U.Gamepad.XBOX360_LEFT_TRIGGER=6,U.Gamepad.XBOX360_RIGHT_TRIGGER=7,U.Gamepad.XBOX360_BACK=8,U.Gamepad.XBOX360_START=9,U.Gamepad.XBOX360_STICK_LEFT_BUTTON=10,U.Gamepad.XBOX360_STICK_RIGHT_BUTTON=11,U.Gamepad.XBOX360_DPAD_LEFT=14,U.Gamepad.XBOX360_DPAD_RIGHT=15,U.Gamepad.XBOX360_DPAD_UP=12,U.Gamepad.XBOX360_DPAD_DOWN=13,U.Gamepad.XBOX360_STICK_LEFT_X=0,U.Gamepad.XBOX360_STICK_LEFT_Y=1,U.Gamepad.XBOX360_STICK_RIGHT_X=2,U.Gamepad.XBOX360_STICK_RIGHT_Y=3,U.Gamepad.PS3XC_X=0,U.Gamepad.PS3XC_CIRCLE=1,U.Gamepad.PS3XC_SQUARE=2,U.Gamepad.PS3XC_TRIANGLE=3,U.Gamepad.PS3XC_L1=4,U.Gamepad.PS3XC_R1=5,U.Gamepad.PS3XC_L2=6,U.Gamepad.PS3XC_R2=7,U.Gamepad.PS3XC_SELECT=8,U.Gamepad.PS3XC_START=9,U.Gamepad.PS3XC_STICK_LEFT_BUTTON=10,U.Gamepad.PS3XC_STICK_RIGHT_BUTTON=11,U.Gamepad.PS3XC_DPAD_UP=12,U.Gamepad.PS3XC_DPAD_DOWN=13,U.Gamepad.PS3XC_DPAD_LEFT=14,U.Gamepad.PS3XC_DPAD_RIGHT=15,U.Gamepad.PS3XC_STICK_LEFT_X=0,U.Gamepad.PS3XC_STICK_LEFT_Y=1,U.Gamepad.PS3XC_STICK_RIGHT_X=2,U.Gamepad.PS3XC_STICK_RIGHT_Y=3,U.SinglePad=function(e,t){this.game=e,this.index=null,this.connected=!1,(this.callbackContext=this).onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this.deadZone=.26,this._padParent=t,this._rawPad=null,this._prevTimestamp=null,this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0},U.SinglePad.prototype={addCallbacks:function(e,t){void 0!==t&&(this.onConnectCallback="function"==typeof t.onConnect?t.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof t.onDisconnect?t.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof t.onDown?t.onDown:this.onDownCallback,this.onUpCallback="function"==typeof t.onUp?t.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof t.onAxis?t.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof t.onFloat?t.onFloat:this.onFloatCallback,this.callbackContext=e)},getButton:function(e){return this._buttons[e]?this._buttons[e]:null},pollStatus:function(){if(this.connected&&this.game.input.enabled&&this.game.input.gamepad.enabled&&(!this._rawPad.timestamp||this._rawPad.timestamp!==this._prevTimestamp)){for(var e=0;e<this._buttonsLen;e++){var t=isNaN(this._rawPad.buttons[e])?this._rawPad.buttons[e].value:this._rawPad.buttons[e];t!==this._buttons[e].value&&(1===t?this.processButtonDown(e,t):0===t?this.processButtonUp(e,t):this.processButtonFloat(e,t))}for(var i=0;i<this._axesLen;i++){var n=this._rawPad.axes[i];0<n&&n>this.deadZone||n<0&&n<-this.deadZone?this.processAxisChange(i,n):this.processAxisChange(i,0)}this._prevTimestamp=this._rawPad.timestamp}},connect:function(e){var t=!this.connected;this.connected=!0,this.index=e.index,this._rawPad=e,this._buttons=[],this._buttonsLen=e.buttons.length,this._axes=[],this._axesLen=e.axes.length;for(var i=0;i<this._axesLen;i++)this._axes[i]=e.axes[i];for(var n in e.buttons)n=parseInt(n,10),this._buttons[n]=new U.DeviceButton(this,n);t&&this._padParent.onConnectCallback&&this._padParent.onConnectCallback.call(this._padParent.callbackContext,this.index),t&&this.onConnectCallback&&this.onConnectCallback.call(this.callbackContext)},disconnect:function(){var e=this.connected,t=this.index;this.connected=!1,this.index=null,this._rawPad=void 0;for(var i=0;i<this._buttonsLen;i++)this._buttons[i].destroy();this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0,e&&this._padParent.onDisconnectCallback&&this._padParent.onDisconnectCallback.call(this._padParent.callbackContext,t),e&&this.onDisconnectCallback&&this.onDisconnectCallback.call(this.callbackContext)},destroy:function(){this._rawPad=void 0;for(var e=0;e<this._buttonsLen;e++)this._buttons[e].destroy();this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0,this.onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null},processAxisChange:function(e,t){this._axes[e]!==t&&(this._axes[e]=t,this._padParent.onAxisCallback&&this._padParent.onAxisCallback.call(this._padParent.callbackContext,this,e,t),this.onAxisCallback&&this.onAxisCallback.call(this.callbackContext,this,e,t))},processButtonDown:function(e,t){this._buttons[e]&&this._buttons[e].start(null,t),this._padParent.onDownCallback&&this._padParent.onDownCallback.call(this._padParent.callbackContext,e,t,this.index),this.onDownCallback&&this.onDownCallback.call(this.callbackContext,e,t)},processButtonUp:function(e,t){this._padParent.onUpCallback&&this._padParent.onUpCallback.call(this._padParent.callbackContext,e,t,this.index),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,e,t),this._buttons[e]&&this._buttons[e].stop(null,t)},processButtonFloat:function(e,t){this._padParent.onFloatCallback&&this._padParent.onFloatCallback.call(this._padParent.callbackContext,e,t,this.index),this.onFloatCallback&&this.onFloatCallback.call(this.callbackContext,e,t),this._buttons[e]&&this._buttons[e].padFloat(t)},axis:function(e){return!!this._axes[e]&&this._axes[e]},isDown:function(e){return!!this._buttons[e]&&this._buttons[e].isDown},isUp:function(e){return!!this._buttons[e]&&this._buttons[e].isUp},justReleased:function(e,t){if(this._buttons[e])return this._buttons[e].justReleased(t)},justPressed:function(e,t){if(this._buttons[e])return this._buttons[e].justPressed(t)},buttonValue:function(e){return this._buttons[e]?this._buttons[e].value:null},reset:function(){for(var e=0;e<this._axes.length;e++)this._axes[e]=0}},U.SinglePad.prototype.constructor=U.SinglePad,U.Key=function(e,t){this.game=e,this._enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=t,this.onDown=new U.Signal,this.onHoldCallback=null,this.onHoldContext=null,this.onUp=new U.Signal,this._justDown=!1,this._justUp=!1},U.Key.prototype={update:function(){this._enabled&&this.isDown&&(this.duration=this.game.time.time-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(e){this._enabled&&(this.event=e,this.isDown||(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.time,this.duration=0,this.repeats=0,this._justDown=!0,this.onDown.dispatch(this)))},processKeyUp:function(e){this._enabled&&(this.event=e,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.duration=this.game.time.time-this.timeDown,this._justUp=!0,this.onUp.dispatch(this)))},reset:function(e){void 0===e&&(e=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.duration=0,this._enabled=!0,this._justDown=!1,this._justUp=!1,e&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},downDuration:function(e){return void 0===e&&(e=50),this.isDown&&this.duration<e},upDuration:function(e){return void 0===e&&(e=50),!this.isDown&&this.game.time.time-this.timeUp<e}},Object.defineProperty(U.Key.prototype,"justDown",{get:function(){var e=this._justDown;return this._justDown=!1,e}}),Object.defineProperty(U.Key.prototype,"justUp",{get:function(){var e=this._justUp;return this._justUp=!1,e}}),Object.defineProperty(U.Key.prototype,"enabled",{get:function(){return this._enabled},set:function(e){(e=!!e)!==this._enabled&&(e||this.reset(!1),this._enabled=e)}}),U.Key.prototype.constructor=U.Key,U.Keyboard=function(e){this.game=e,this.enabled=!0,this.event=null,this.pressEvent=null,(this.callbackContext=this).onDownCallback=null,this.onPressCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyPress=null,this._onKeyUp=null,this._i=0,this._k=0},U.Keyboard.prototype={addCallbacks:function(e,t,i,n){this.callbackContext=e,null!=t&&(this.onDownCallback=t),null!=i&&(this.onUpCallback=i),null!=n&&(this.onPressCallback=n)},addKey:function(e){return this._keys[e]||(this._keys[e]=new U.Key(this.game,e),this.addKeyCapture(e)),this._keys[e]},addKeys:function(e){var t={};for(var i in e)t[i]=this.addKey(e[i]);return t},removeKey:function(e){this._keys[e]&&(this._keys[e]=null,this.removeKeyCapture(e))},createCursorKeys:function(){return this.addKeys({up:U.KeyCode.UP,down:U.KeyCode.DOWN,left:U.KeyCode.LEFT,right:U.KeyCode.RIGHT})},start:function(){if(!this.game.device.cocoonJS&&null===this._onKeyDown){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e)},this._onKeyUp=function(e){return t.processKeyUp(e)},this._onKeyPress=function(e){return t.processKeyPress(e)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1),window.addEventListener("keypress",this._onKeyPress,!1)}},stop:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),window.removeEventListener("keypress",this._onKeyPress),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(e){if("object"==typeof e)for(var t in e)this._capture[e[t]]=!0;else this._capture[e]=!0},removeKeyCapture:function(e){delete this._capture[e]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(e){if(this.event=e,this.game.input.enabled&&this.enabled){var t=e.keyCode;this._capture[t]&&e.preventDefault(),this._keys[t]||(this._keys[t]=new U.Key(this.game,t)),this._keys[t].processKeyDown(e),this._k=t,this.onDownCallback&&this.onDownCallback.call(this.callbackContext,e)}},processKeyPress:function(e){this.pressEvent=e,this.game.input.enabled&&this.enabled&&this.onPressCallback&&this.onPressCallback.call(this.callbackContext,String.fromCharCode(e.charCode),e)},processKeyUp:function(e){if(this.event=e,this.game.input.enabled&&this.enabled){var t=e.keyCode;this._capture[t]&&e.preventDefault(),this._keys[t]||(this._keys[t]=new U.Key(this.game,t)),this._keys[t].processKeyUp(e),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,e)}},reset:function(e){void 0===e&&(e=!0),this.event=null;for(var t=this._keys.length;t--;)this._keys[t]&&this._keys[t].reset(e)},downDuration:function(e,t){return this._keys[e]?this._keys[e].downDuration(t):null},upDuration:function(e,t){return this._keys[e]?this._keys[e].upDuration(t):null},isDown:function(e){return this._keys[e]?this._keys[e].isDown:null}},Object.defineProperty(U.Keyboard.prototype,"lastChar",{get:function(){return 32===this.event.charCode?"":String.fromCharCode(this.pressEvent.charCode)}}),Object.defineProperty(U.Keyboard.prototype,"lastKey",{get:function(){return this._keys[this._k]}}),U.Keyboard.prototype.constructor=U.Keyboard,U.KeyCode={A:"A".charCodeAt(0),B:"B".charCodeAt(0),C:"C".charCodeAt(0),D:"D".charCodeAt(0),E:"E".charCodeAt(0),F:"F".charCodeAt(0),G:"G".charCodeAt(0),H:"H".charCodeAt(0),I:"I".charCodeAt(0),J:"J".charCodeAt(0),K:"K".charCodeAt(0),L:"L".charCodeAt(0),M:"M".charCodeAt(0),N:"N".charCodeAt(0),O:"O".charCodeAt(0),P:"P".charCodeAt(0),Q:"Q".charCodeAt(0),R:"R".charCodeAt(0),S:"S".charCodeAt(0),T:"T".charCodeAt(0),U:"U".charCodeAt(0),V:"V".charCodeAt(0),W:"W".charCodeAt(0),X:"X".charCodeAt(0),Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0),ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0),FOUR:"4".charCodeAt(0),FIVE:"5".charCodeAt(0),SIX:"6".charCodeAt(0),SEVEN:"7".charCodeAt(0),EIGHT:"8".charCodeAt(0),NINE:"9".charCodeAt(0),NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,COMMA:188,UNDERSCORE:189,PERIOD:190,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS:43,MINUS:44,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144},U.KeyCode)U.KeyCode.hasOwnProperty(i)&&!i.match(/[a-z]/)&&(U.Keyboard[i]=U.KeyCode[i]);for(var r in U.Component=function(){},U.Component.Angle=function(){},U.Component.Angle.prototype={angle:{get:function(){return U.Math.wrapAngle(U.Math.radToDeg(this.rotation))},set:function(e){this.rotation=U.Math.degToRad(U.Math.wrapAngle(e))}}},U.Component.Animation=function(){},U.Component.Animation.prototype={play:function(e,t,i,n){if(this.animations)return this.animations.play(e,t,i,n)}},U.Component.AutoCull=function(){},U.Component.AutoCull.prototype={autoCull:!1,inCamera:{get:function(){return this.autoCull||this.checkWorldBounds||(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y),this.game.world.camera.view.intersects(this._bounds)}}},U.Component.Bounds=function(){},U.Component.Bounds.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},centerX:{get:function(){return this.x-this.offsetX+.5*this.width},set:function(e){this.x=e+this.offsetX-.5*this.width}},centerY:{get:function(){return this.y-this.offsetY+.5*this.height},set:function(e){this.y=e+this.offsetY-.5*this.height}},left:{get:function(){return this.x-this.offsetX},set:function(e){this.x=e+this.offsetX}},right:{get:function(){return this.x+this.width-this.offsetX},set:function(e){this.x=e-this.width+this.offsetX}},top:{get:function(){return this.y-this.offsetY},set:function(e){this.y=e+this.offsetY}},bottom:{get:function(){return this.y+this.height-this.offsetY},set:function(e){this.y=e-this.height+this.offsetY}},alignIn:function(e,t,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),t){default:case U.TOP_LEFT:this.left=e.left-i,this.top=e.top-n;break;case U.TOP_CENTER:this.centerX=e.centerX+i,this.top=e.top-n;break;case U.TOP_RIGHT:this.right=e.right+i,this.top=e.top-n;break;case U.LEFT_CENTER:this.left=e.left-i,this.centerY=e.centerY+n;break;case U.CENTER:this.centerX=e.centerX+i,this.centerY=e.centerY+n;break;case U.RIGHT_CENTER:this.right=e.right+i,this.centerY=e.centerY+n;break;case U.BOTTOM_LEFT:this.left=e.left-i,this.bottom=e.bottom+n;break;case U.BOTTOM_CENTER:this.centerX=e.centerX+i,this.bottom=e.bottom+n;break;case U.BOTTOM_RIGHT:this.right=e.right+i,this.bottom=e.bottom+n}return this},alignTo:function(e,t,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),t){default:case U.TOP_LEFT:this.left=e.left-i,this.bottom=e.top-n;break;case U.TOP_CENTER:this.centerX=e.centerX+i,this.bottom=e.top-n;break;case U.TOP_RIGHT:this.right=e.right+i,this.bottom=e.top-n;break;case U.LEFT_TOP:this.right=e.left-i,this.top=e.top-n;break;case U.LEFT_CENTER:this.right=e.left-i,this.centerY=e.centerY+n;break;case U.LEFT_BOTTOM:this.right=e.left-i,this.bottom=e.bottom+n;break;case U.RIGHT_TOP:this.left=e.right+i,this.top=e.top-n;break;case U.RIGHT_CENTER:this.left=e.right+i,this.centerY=e.centerY+n;break;case U.RIGHT_BOTTOM:this.left=e.right+i,this.bottom=e.bottom+n;break;case U.BOTTOM_LEFT:this.left=e.left-i,this.top=e.bottom+n;break;case U.BOTTOM_CENTER:this.centerX=e.centerX+i,this.top=e.bottom+n;break;case U.BOTTOM_RIGHT:this.right=e.right+i,this.top=e.bottom+n}return this}},U.Group.prototype.alignIn=U.Component.Bounds.prototype.alignIn,U.Group.prototype.alignTo=U.Component.Bounds.prototype.alignTo,U.Component.BringToTop=function(){},U.Component.BringToTop.prototype.bringToTop=function(){return this.parent&&this.parent.bringToTop(this),this},U.Component.BringToTop.prototype.sendToBack=function(){return this.parent&&this.parent.sendToBack(this),this},U.Component.BringToTop.prototype.moveUp=function(){return this.parent&&this.parent.moveUp(this),this},U.Component.BringToTop.prototype.moveDown=function(){return this.parent&&this.parent.moveDown(this),this},U.Component.Core=function(){},U.Component.Core.install=function(e){U.Utils.mixinPrototype(this,U.Component.Core.prototype),this.components={};for(var t=0;t<e.length;t++){var i=e[t],n=!1;"Destroy"===i&&(n=!0),U.Utils.mixinPrototype(this,U.Component[i].prototype,n),this.components[i]=!0}},U.Component.Core.init=function(e,t,i,n,r){this.game=e,this.key=n,this.data={},this.position.set(t,i),this.world=new U.Point(t,i),this.previousPosition=new U.Point(t,i),this.events=new U.Events(this),this._bounds=new U.Rectangle,this.components.PhysicsBody&&(this.body=this.body),this.components.Animation&&(this.animations=new U.AnimationManager(this)),this.components.LoadTexture&&null!==n&&this.loadTexture(n,r),this.components.FixedToCamera&&(this.cameraOffset=new U.Point(t,i))},U.Component.Core.preUpdate=function(){if(!this.pendingDestroy){if(this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,!this.exists||!this.parent.exists)return!(this.renderOrderID=-1);this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty),this.visible&&(this.renderOrderID=this.game.stage.currentRenderOrderID++),this.animations&&this.animations.update(),this.body&&this.body.preUpdate();for(var e=0;e<this.children.length;e++)this.children[e].preUpdate();return!0}this.destroy()},U.Component.Core.prototype={game:null,name:"",data:{},components:{},z:0,events:void 0,animations:void 0,key:"",world:null,debug:!1,previousPosition:null,previousRotation:0,renderOrderID:0,fresh:!0,pendingDestroy:!1,_bounds:null,_exists:!0,exists:{get:function(){return this._exists},set:function(e){e?(this._exists=!0,this.body&&this.body.type===U.Physics.P2JS&&this.body.addToWorld(),this.visible=!0):(this._exists=!1,this.body&&this.body.type===U.Physics.P2JS&&this.body.removeFromWorld(),this.visible=!1)}},update:function(){},postUpdate:function(){this.customRender&&this.key.render(),this.components.PhysicsBody&&U.Component.PhysicsBody.postUpdate.call(this),this.components.FixedToCamera&&U.Component.FixedToCamera.postUpdate.call(this);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()}},U.Component.Crop=function(){},U.Component.Crop.prototype={cropRect:null,_crop:null,crop:function(e,t){void 0===t&&(t=!1),e?(t&&null!==this.cropRect?this.cropRect.setTo(e.x,e.y,e.width,e.height):t&&null===this.cropRect?this.cropRect=new U.Rectangle(e.x,e.y,e.width,e.height):this.cropRect=e,this.updateCrop()):(this._crop=null,this.cropRect=null,this.resetFrame())},updateCrop:function(){if(this.cropRect){var e=this.texture.crop.x,t=this.texture.crop.y,i=this.texture.crop.width,n=this.texture.crop.height;this._crop=U.Rectangle.clone(this.cropRect,this._crop),this._crop.x+=this._frame.x,this._crop.y+=this._frame.y;var r=Math.max(this._frame.x,this._crop.x),o=Math.max(this._frame.y,this._crop.y),a=Math.min(this._frame.right,this._crop.right)-r,s=Math.min(this._frame.bottom,this._crop.bottom)-o;this.texture.crop.x=r,this.texture.crop.y=o,this.texture.crop.width=a,this.texture.crop.height=s,this.texture.frame.width=Math.min(a,this.cropRect.width),this.texture.frame.height=Math.min(s,this.cropRect.height),this.texture.width=this.texture.frame.width,this.texture.height=this.texture.frame.height,this.texture._updateUvs(),16777215===this.tint||e===r&&t===o&&i===a&&n===s||(this.texture.requiresReTint=!0)}}},U.Component.Delta=function(){},U.Component.Delta.prototype={deltaX:{get:function(){return this.world.x-this.previousPosition.x}},deltaY:{get:function(){return this.world.y-this.previousPosition.y}},deltaZ:{get:function(){return this.rotation-this.previousRotation}}},U.Component.Destroy=function(){},U.Component.Destroy.prototype={destroyPhase:!1,destroy:function(e,t){if(null!==this.game&&!this.destroyPhase){void 0===e&&(e=!0),void 0===t&&(t=!1),this.destroyPhase=!0,this.events&&this.events.onDestroy$dispatch(this),this.parent&&(this.parent instanceof U.Group?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy(),this.body&&this.body.destroy(),this.events&&this.events.destroy(),this.game.tweens.removeFrom(this);var i=this.children.length;if(e)for(;i--;)this.children[i].destroy(e);else for(;i--;)this.removeChild(this.children[i]);this._crop&&(this._crop=null,this.cropRect=null),this._frame&&(this._frame=null),U.Video&&this.key instanceof U.Video&&this.key.onChangeSource.remove(this.resizeFrame,this),U.BitmapText&&this._glyphs&&(this._glyphs=[]),this.alive=!1,this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this.data={},this.renderable=!1,this.transformCallback&&(this.transformCallback=null,this.transformCallbackContext=null),this.hitArea=null,this.parent=null,this.stage=null,this.worldTransform=null,this.filterArea=null,this._bounds=null,this._currentBounds=null,this._mask=null,this._destroyCachedSprite(),t&&this.texture.destroy(!0),this.destroyPhase=!1,this.pendingDestroy=!1}}},U.Events=function(e){this.parent=e},U.Events.prototype={destroy:function(){this._parent=null,this._onDestroy&&this._onDestroy.dispose(),this._onAddedToGroup&&this._onAddedToGroup.dispose(),this._onRemovedFromGroup&&this._onRemovedFromGroup.dispose(),this._onRemovedFromWorld&&this._onRemovedFromWorld.dispose(),this._onKilled&&this._onKilled.dispose(),this._onRevived&&this._onRevived.dispose(),this._onEnterBounds&&this._onEnterBounds.dispose(),this._onOutOfBounds&&this._onOutOfBounds.dispose(),this._onInputOver&&this._onInputOver.dispose(),this._onInputOut&&this._onInputOut.dispose(),this._onInputDown&&this._onInputDown.dispose(),this._onInputUp&&this._onInputUp.dispose(),this._onDragStart&&this._onDragStart.dispose(),this._onDragUpdate&&this._onDragUpdate.dispose(),this._onDragStop&&this._onDragStop.dispose(),this._onAnimationStart&&this._onAnimationStart.dispose(),this._onAnimationComplete&&this._onAnimationComplete.dispose(),this._onAnimationLoop&&this._onAnimationLoop.dispose()},onAddedToGroup:null,onRemovedFromGroup:null,onRemovedFromWorld:null,onDestroy:null,onKilled:null,onRevived:null,onOutOfBounds:null,onEnterBounds:null,onInputOver:null,onInputOut:null,onInputDown:null,onInputUp:null,onDragStart:null,onDragUpdate:null,onDragStop:null,onAnimationStart:null,onAnimationComplete:null,onAnimationLoop:null},U.Events.prototype.constructor=U.Events,U.Events.prototype)U.Events.prototype.hasOwnProperty(r)&&0===r.indexOf("on")&&null===U.Events.prototype[r]&&function(e,t){"use strict";Object.defineProperty(U.Events.prototype,e,{get:function(){return this[t]||(this[t]=new U.Signal)}}),U.Events.prototype[e+"$dispatch"]=function(){return this[t]?this[t].dispatch.apply(this[t],arguments):null}}(r,"_"+r);U.Component.FixedToCamera=function(){},U.Component.FixedToCamera.postUpdate=function(){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},U.Component.FixedToCamera.prototype={_fixedToCamera:!1,fixedToCamera:{get:function(){return this._fixedToCamera},set:function(e){e?(this._fixedToCamera=!0,this.cameraOffset.set(this.x,this.y)):this._fixedToCamera=!1}},cameraOffset:new U.Point},U.Component.Health=function(){},U.Component.Health.prototype={health:1,maxHealth:100,damage:function(e){return this.alive&&(this.health-=e,this.health<=0&&this.kill()),this},setHealth:function(e){return this.health=e,this.health>this.maxHealth&&(this.health=this.maxHealth),this},heal:function(e){return this.alive&&(this.health+=e,this.health>this.maxHealth&&(this.health=this.maxHealth)),this}},U.Component.InCamera=function(){},U.Component.InCamera.prototype={inCamera:{get:function(){return this.game.world.camera.view.intersects(this._bounds)}}},U.Component.InputEnabled=function(){},U.Component.InputEnabled.prototype={input:null,inputEnabled:{get:function(){return this.input&&this.input.enabled},set:function(e){e?null===this.input?(this.input=new U.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}},U.Component.InWorld=function(){},U.Component.InWorld.preUpdate=function(){if(this.autoCull||this.checkWorldBounds){if(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y,this.autoCull)if(this.game.world.camera.view.intersects(this._bounds))this.renderable=!0,this.game.world.camera.totalInView++;else if(this.renderable=!1,this.outOfCameraBoundsKill)return this.kill(),!1;if(this.checkWorldBounds)if(this._outOfBoundsFired&&this.game.world.bounds.intersects(this._bounds))this._outOfBoundsFired=!1,this.events.onEnterBounds$dispatch(this);else if(!this._outOfBoundsFired&&!this.game.world.bounds.intersects(this._bounds)&&(this._outOfBoundsFired=!0,this.events.onOutOfBounds$dispatch(this),this.outOfBoundsKill))return this.kill(),!1}return!0},U.Component.InWorld.prototype={checkWorldBounds:!1,outOfBoundsKill:!1,outOfCameraBoundsKill:!1,_outOfBoundsFired:!1,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}},U.Component.LifeSpan=function(){},U.Component.LifeSpan.preUpdate=function(){return!(0<this.lifespan&&(this.lifespan-=this.game.time.physicsElapsedMS,this.lifespan<=0)&&(this.kill(),1))},U.Component.LifeSpan.prototype={alive:!0,lifespan:0,revive:function(e){return void 0===e&&(e=100),this.alive=!0,this.exists=!0,this.visible=!0,"function"==typeof this.setHealth&&this.setHealth(e),this.events&&this.events.onRevived$dispatch(this),this},kill:function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled$dispatch(this),this}},U.Component.LoadTexture=function(){},U.Component.LoadTexture.prototype={customRender:!1,_frame:null,loadTexture:function(e,t,i){t=e===U.PENDING_ATLAS?(e=t,0):t||0,(i||void 0===i)&&this.animations&&this.animations.stop(),this.key=e,this.customRender=!1;var n=this.game.cache,r=!0,o=!this.texture.baseTexture.scaleMode;if(U.RenderTexture&&e instanceof U.RenderTexture)this.key=e.key,this.setTexture(e);else if(U.BitmapData&&e instanceof U.BitmapData)this.customRender=!0,this.setTexture(e.texture),r=n.hasFrameData(e.key,U.Cache.BITMAPDATA)?!this.animations.loadFrameData(n.getFrameData(e.key,U.Cache.BITMAPDATA),t):!this.animations.loadFrameData(e.frameData,0);else if(U.Video&&e instanceof U.Video){this.customRender=!0;var a=e.texture.valid;this.setTexture(e.texture),this.setFrame(e.texture.frame.clone()),e.onChangeSource.add(this.resizeFrame,this),this.texture.valid=a}else if(U.Tilemap&&e instanceof U.TilemapLayer)this.setTexture(PIXI.Texture.fromCanvas(e.canvas));else if(e instanceof PIXI.Texture)this.setTexture(e);else{var s=n.getImage(e,!0);this.key=s.key,this.setTexture(new PIXI.Texture(s.base)),this.texture.baseTexture.skipRender="__default"===e,r=!this.animations.loadFrameData(s.frameData,t)}r&&(this._frame=U.Rectangle.clone(this.texture.frame)),o||(this.texture.baseTexture.scaleMode=1)},setFrame:function(e){this._frame=e,this.texture.frame.x=e.x,this.texture.frame.y=e.y,this.texture.frame.width=e.width,this.texture.frame.height=e.height,this.texture.crop.x=e.x,this.texture.crop.y=e.y,this.texture.crop.width=e.width,this.texture.crop.height=e.height,e.trimmed?(this.texture.trim?(this.texture.trim.x=e.spriteSourceSizeX,this.texture.trim.y=e.spriteSourceSizeY,this.texture.trim.width=e.sourceSizeW,this.texture.trim.height=e.sourceSizeH):this.texture.trim={x:e.spriteSourceSizeX,y:e.spriteSourceSizeY,width:e.sourceSizeW,height:e.sourceSizeH},this.texture.width=e.sourceSizeW,this.texture.height=e.sourceSizeH,this.texture.frame.width=e.sourceSizeW,this.texture.frame.height=e.sourceSizeH):!e.trimmed&&this.texture.trim&&(this.texture.trim=null),this.cropRect&&this.updateCrop(),this.texture.requiresReTint=!0,this.texture._updateUvs(),this.tilingTexture&&(this.refreshTexture=!0)},resizeFrame:function(e,t,i){this.texture.frame.resize(t,i),this.texture.setFrame(this.texture.frame)},resetFrame:function(){this._frame&&this.setFrame(this._frame)},frame:{get:function(){return this.animations.frame},set:function(e){this.animations.frame=e}},frameName:{get:function(){return this.animations.frameName},set:function(e){this.animations.frameName=e}}},U.Component.Overlap=function(){},U.Component.Overlap.prototype={overlap:function(e){return U.Rectangle.intersects(this.getBounds(),e.getBounds())}},U.Component.PhysicsBody=function(){},U.Component.PhysicsBody.preUpdate=function(){return this.fresh&&this.exists?(this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y),this.worldTransform.tx=this.world.x,this.worldTransform.ty=this.world.y,this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,this.body&&this.body.preUpdate(),this.fresh=!1):(this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,!(!this._exists||!this.parent.exists)||!(this.renderOrderID=-1))},U.Component.PhysicsBody.postUpdate=function(){this.exists&&this.body&&this.body.postUpdate()},U.Component.PhysicsBody.prototype={body:null,x:{get:function(){return this.position.x},set:function(e){this.position.x=e,this.body&&!this.body.dirty&&(this.body._reset=!0)}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e,this.body&&!this.body.dirty&&(this.body._reset=!0)}}},U.Component.Reset=function(){},U.Component.Reset.prototype.reset=function(e,t,i){return void 0===i&&(i=1),this.world.set(e,t),this.position.set(e,t),this.fresh=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this.components.InWorld&&(this._outOfBoundsFired=!1),this.components.LifeSpan&&(this.alive=!0,this.health=i),this.components.PhysicsBody&&this.body&&this.body.reset(e,t,!1,!1),this},U.Component.ScaleMinMax=function(){},U.Component.ScaleMinMax.prototype={transformCallback:null,transformCallbackContext:this,scaleMin:null,scaleMax:null,checkTransform:function(e){this.scaleMin&&(e.a<this.scaleMin.x&&(e.a=this.scaleMin.x),e.d<this.scaleMin.y&&(e.d=this.scaleMin.y)),this.scaleMax&&(e.a>this.scaleMax.x&&(e.a=this.scaleMax.x),e.d>this.scaleMax.y&&(e.d=this.scaleMax.y))},setScaleMinMax:function(e,t,i,n){void 0===t?t=i=n=e:void 0===i&&(i=n=t,t=e),null===e?this.scaleMin=null:this.scaleMin?this.scaleMin.set(e,t):this.scaleMin=new U.Point(e,t),null===i?this.scaleMax=null:this.scaleMax?this.scaleMax.set(i,n):this.scaleMax=new U.Point(i,n),null===this.scaleMin?this.transformCallback=null:(this.transformCallback=this.checkTransform,this.transformCallbackContext=this)}},U.Component.Smoothed=function(){},U.Component.Smoothed.prototype={smoothed:{get:function(){return!this.texture.baseTexture.scaleMode},set:function(e){e?this.texture&&(this.texture.baseTexture.scaleMode=0):this.texture&&(this.texture.baseTexture.scaleMode=1)}}},U.GameObjectFactory=function(e){this.game=e,this.world=this.game.world},U.GameObjectFactory.prototype={existing:function(e){return this.world.add(e)},weapon:function(e,t,i,n){var r=this.game.plugins.add(U.Weapon);return r.createBullets(e,t,i,n),r},image:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.add(new U.Image(this.game,e,t,i,n))},sprite:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.create(e,t,i,n)},creature:function(e,t,i,n,r){void 0===r&&(r=this.world);var o=new U.Creature(this.game,e,t,i,n);return r.add(o),o},tween:function(e){return this.game.tweens.create(e)},group:function(e,t,i,n,r){return new U.Group(this.game,e,t,i,n,r)},physicsGroup:function(e,t,i,n){return new U.Group(this.game,t,i,n,!0,e)},spriteBatch:function(e,t,i){return void 0===e&&(e=null),void 0===t&&(t="group"),void 0===i&&(i=!1),new U.SpriteBatch(this.game,e,t,i)},audio:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},sound:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},audioSprite:function(e){return this.game.sound.addSprite(e)},tileSprite:function(e,t,i,n,r,o,a){return void 0===a&&(a=this.world),a.add(new U.TileSprite(this.game,e,t,i,n,r,o))},rope:function(e,t,i,n,r,o){return void 0===o&&(o=this.world),o.add(new U.Rope(this.game,e,t,i,n,r))},text:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.add(new U.Text(this.game,e,t,i,n))},button:function(e,t,i,n,r,o,a,s,p,l){return void 0===l&&(l=this.world),l.add(new U.Button(this.game,e,t,i,n,r,o,a,s,p))},graphics:function(e,t,i){return void 0===i&&(i=this.world),i.add(new U.Graphics(this.game,e,t))},emitter:function(e,t,i){return this.game.particles.add(new U.Particles.Arcade.Emitter(this.game,e,t,i))},retroFont:function(e,t,i,n,r,o,a,s,p){return new U.RetroFont(this.game,e,t,i,n,r,o,a,s,p)},bitmapText:function(e,t,i,n,r,o){return void 0===o&&(o=this.world),o.add(new U.BitmapText(this.game,e,t,i,n,r))},tilemap:function(e,t,i,n,r){return new U.Tilemap(this.game,e,t,i,n,r)},renderTexture:function(e,t,i,n){void 0!==i&&""!==i||(i=this.game.rnd.uuid()),void 0===n&&(n=!1);var r=new U.RenderTexture(this.game,e,t,i);return n&&this.game.cache.addRenderTexture(i,r),r},video:function(e,t){return new U.Video(this.game,e,t)},bitmapData:function(e,t,i,n){void 0===n&&(n=!1),void 0!==i&&""!==i||(i=this.game.rnd.uuid());var r=new U.BitmapData(this.game,i,e,t);return n&&this.game.cache.addBitmapData(i,r),r},filter:function(e){var t=Array.prototype.slice.call(arguments,1);return(e=new U.Filter[e](this.game)).init.apply(e,t),e},plugin:function(e){return this.game.plugins.add(e)}},U.GameObjectFactory.prototype.constructor=U.GameObjectFactory,U.GameObjectCreator=function(e){this.game=e,this.world=this.game.world},U.GameObjectCreator.prototype={image:function(e,t,i,n){return new U.Image(this.game,e,t,i,n)},sprite:function(e,t,i,n){return new U.Sprite(this.game,e,t,i,n)},tween:function(e){return new U.Tween(e,this.game,this.game.tweens)},group:function(e,t,i,n,r){return new U.Group(this.game,e,t,i,n,r)},spriteBatch:function(e,t,i){return void 0===t&&(t="group"),void 0===i&&(i=!1),new U.SpriteBatch(this.game,e,t,i)},audio:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},audioSprite:function(e){return this.game.sound.addSprite(e)},sound:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},tileSprite:function(e,t,i,n,r,o){return new U.TileSprite(this.game,e,t,i,n,r,o)},rope:function(e,t,i,n,r){return new U.Rope(this.game,e,t,i,n,r)},text:function(e,t,i,n){return new U.Text(this.game,e,t,i,n)},button:function(e,t,i,n,r,o,a,s,p){return new U.Button(this.game,e,t,i,n,r,o,a,s,p)},graphics:function(e,t){return new U.Graphics(this.game,e,t)},emitter:function(e,t,i){return new U.Particles.Arcade.Emitter(this.game,e,t,i)},retroFont:function(e,t,i,n,r,o,a,s,p){return new U.RetroFont(this.game,e,t,i,n,r,o,a,s,p)},bitmapText:function(e,t,i,n,r,o){return new U.BitmapText(this.game,e,t,i,n,r,o)},tilemap:function(e,t,i,n,r){return new U.Tilemap(this.game,e,t,i,n,r)},renderTexture:function(e,t,i,n){void 0!==i&&""!==i||(i=this.game.rnd.uuid()),void 0===n&&(n=!1);var r=new U.RenderTexture(this.game,e,t,i);return n&&this.game.cache.addRenderTexture(i,r),r},bitmapData:function(e,t,i,n){void 0===n&&(n=!1),void 0!==i&&""!==i||(i=this.game.rnd.uuid());var r=new U.BitmapData(this.game,i,e,t);return n&&this.game.cache.addBitmapData(i,r),r},filter:function(e){var t=Array.prototype.slice.call(arguments,1);return(e=new U.Filter[e](this.game)).init.apply(e,t),e}},U.GameObjectCreator.prototype.constructor=U.GameObjectCreator,U.Sprite=function(e,t,i,n,r){t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.SPRITE,this.physicsType=U.SPRITE,PIXI.Sprite.call(this,U.Cache.DEFAULT),U.Component.Core.init.call(this,e,t,i,n,r)},U.Sprite.prototype=Object.create(PIXI.Sprite.prototype),U.Sprite.prototype.constructor=U.Sprite,U.Component.Core.install.call(U.Sprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]),U.Sprite.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Sprite.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Sprite.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Sprite.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Sprite.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Image=function(e,t,i,n,r){t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.IMAGE,PIXI.Sprite.call(this,U.Cache.DEFAULT),U.Component.Core.init.call(this,e,t,i,n,r)},U.Image.prototype=Object.create(PIXI.Sprite.prototype),U.Image.prototype.constructor=U.Image,U.Component.Core.install.call(U.Image.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Destroy","FixedToCamera","InputEnabled","LifeSpan","LoadTexture","Overlap","Reset","ScaleMinMax","Smoothed"]),U.Image.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Image.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Image.prototype.preUpdate=function(){return!!this.preUpdateInWorld()&&this.preUpdateCore()},U.Button=function(e,t,i,n,r,o,a,s,p,l){t=t||0,i=i||0,n=n||null,r=r||null,o=o||this,U.Image.call(this,e,t,i,n,s),this.type=U.BUTTON,this.physicsType=U.SPRITE,this._onOverFrame=null,this._onOutFrame=null,this._onDownFrame=null,this._onUpFrame=null,this.onOverSound=null,this.onOutSound=null,this.onDownSound=null,this.onUpSound=null,this.onOverSoundMarker="",this.onOutSoundMarker="",this.onDownSoundMarker="",this.onUpSoundMarker="",this.onInputOver=new U.Signal,this.onInputOut=new U.Signal,this.onInputDown=new U.Signal,this.onInputUp=new U.Signal,this.onOverMouseOnly=!0,this.justReleasedPreventsOver=U.PointerMode.TOUCH,this.freezeFrames=!1,this.forceOut=!1,this.inputEnabled=!0,this.input.start(0,!0),this.input.useHandCursor=!0,this.setFrames(a,s,p,l),null!==r&&this.onInputUp.add(r,o),this.events.onInputOver.add(this.onInputOverHandler,this),this.events.onInputOut.add(this.onInputOutHandler,this),this.events.onInputDown.add(this.onInputDownHandler,this),this.events.onInputUp.add(this.onInputUpHandler,this),this.events.onRemovedFromWorld.add(this.removedFromWorld,this)},U.Button.prototype=Object.create(U.Image.prototype),U.Button.prototype.constructor=U.Button;var p="Over",l="Out",h="Down",u="Up";U.Button.prototype.clearFrames=function(){this.setFrames(null,null,null,null)},U.Button.prototype.removedFromWorld=function(){this.inputEnabled=!1},U.Button.prototype.setStateFrame=function(e,t,i){var n="_on"+e+"Frame";null!==t?(this[n]=t,i&&this.changeStateFrame(e)):this[n]=null},U.Button.prototype.changeStateFrame=function(e){if(this.freezeFrames)return!1;var t=this["_on"+e+"Frame"];return"string"==typeof t?(this.frameName=t,!0):"number"==typeof t&&(this.frame=t,!0)},U.Button.prototype.setFrames=function(e,t,i,n){this.setStateFrame(p,e,this.input.pointerOver()),this.setStateFrame(l,t,!this.input.pointerOver()),this.setStateFrame(h,i,this.input.pointerDown()),this.setStateFrame(u,n,this.input.pointerUp())},U.Button.prototype.setStateSound=function(e,t,i){var n="on"+e+"Sound",r="on"+e+"SoundMarker";t instanceof U.Sound||t instanceof U.AudioSprite?(this[n]=t,this[r]="string"==typeof i?i:""):(this[n]=null,this[r]="")},U.Button.prototype.playStateSound=function(e){var t=this["on"+e+"Sound"];if(t){var i=this["on"+e+"SoundMarker"];return t.play(i),!0}return!1},U.Button.prototype.setSounds=function(e,t,i,n,r,o,a,s){this.setStateSound(p,e,t),this.setStateSound(l,r,o),this.setStateSound(h,i,n),this.setStateSound(u,a,s)},U.Button.prototype.setOverSound=function(e,t){this.setStateSound(p,e,t)},U.Button.prototype.setOutSound=function(e,t){this.setStateSound(l,e,t)},U.Button.prototype.setDownSound=function(e,t){this.setStateSound(h,e,t)},U.Button.prototype.setUpSound=function(e,t){this.setStateSound(u,e,t)},U.Button.prototype.onInputOverHandler=function(e,t){t.justReleased()&&(this.justReleasedPreventsOver&t.pointerMode)===t.pointerMode||(this.changeStateFrame(p),this.onOverMouseOnly&&!t.isMouse||(this.playStateSound(p),this.onInputOver&&this.onInputOver.dispatch(this,t)))},U.Button.prototype.onInputOutHandler=function(e,t){this.changeStateFrame(l),this.playStateSound(l),this.onInputOut&&this.onInputOut.dispatch(this,t)},U.Button.prototype.onInputDownHandler=function(e,t){this.changeStateFrame(h),this.playStateSound(h),this.onInputDown&&this.onInputDown.dispatch(this,t)},U.Button.prototype.onInputUpHandler=function(e,t,i){if(this.playStateSound(u),this.onInputUp&&this.onInputUp.dispatch(this,t,i),!this.freezeFrames)if(!0===this.forceOut||(this.forceOut&t.pointerMode)===t.pointerMode)this.changeStateFrame(l);else{this.changeStateFrame(u)||(i?this.changeStateFrame(p):this.changeStateFrame(l))}},U.SpriteBatch=function(e,t,i,n){null!=t||(t=e.world),PIXI.SpriteBatch.call(this),U.Group.call(this,e,t,i,n),this.type=U.SPRITEBATCH},U.SpriteBatch.prototype=U.Utils.extend(!0,U.SpriteBatch.prototype,PIXI.SpriteBatch.prototype,U.Group.prototype),U.SpriteBatch.prototype.constructor=U.SpriteBatch,U.BitmapData=function(e,t,i,n,r){void 0!==i&&0!==i||(i=256),void 0!==n&&0!==n||(n=256),void 0===r&&(r=!1),this.game=e,this.key=t,this.width=i,this.height=n,this.canvas=U.Canvas.create(this,i,n,null,r),this.context=this.canvas.getContext("2d",{alpha:!0}),this.ctx=this.context,this.smoothProperty=e.renderType===U.CANVAS?e.renderer.renderSession.smoothProperty:U.Canvas.getSmoothingPrefix(this.context),this.imageData=this.context.getImageData(0,0,i,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data),this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.frameData=new U.FrameData,this.textureFrame=this.frameData.addFrame(new U.Frame(0,0,0,i,n,"bitmapData")),this.texture.frame=this.textureFrame,this.type=U.BITMAPDATA,this.disableTextureUpload=!1,this.dirty=!1,this.cls=this.clear,this._image=null,this._pos=new U.Point,this._size=new U.Point,this._scale=new U.Point,this._rotate=0,this._alpha={prev:1,current:1},this._anchor=new U.Point,this._tempR=0,this._tempG=0,this._tempB=0,this._circle=new U.Circle,this._swapCanvas=void 0},U.BitmapData.prototype={move:function(e,t,i){return 0!==e&&this.moveH(e,i),0!==t&&this.moveV(t,i),this},moveH:function(e,t){void 0===t&&(t=!0),void 0===this._swapCanvas&&(this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height));var i=this._swapCanvas.getContext("2d"),n=this.height,r=this.canvas;if(i.clearRect(0,0,this.width,this.height),e<0){e=Math.abs(e);var o=this.width-e;t&&i.drawImage(r,0,0,e,n,o,0,e,n),i.drawImage(r,e,0,o,n,0,0,o,n)}else{o=this.width-e;t&&i.drawImage(r,o,0,e,n,0,0,e,n),i.drawImage(r,0,0,o,n,e,0,o,n)}return this.clear(),this.copy(this._swapCanvas)},moveV:function(e,t){void 0===t&&(t=!0),void 0===this._swapCanvas&&(this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height));var i=this._swapCanvas.getContext("2d"),n=this.width,r=this.canvas;if(i.clearRect(0,0,this.width,this.height),e<0){e=Math.abs(e);var o=this.height-e;t&&i.drawImage(r,0,0,n,e,0,o,n,e),i.drawImage(r,0,e,n,o,0,0,n,o)}else{o=this.height-e;t&&i.drawImage(r,0,o,n,e,0,0,n,e),i.drawImage(r,0,0,n,o,0,e,n,o)}return this.clear(),this.copy(this._swapCanvas)},add:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t].loadTexture&&e[t].loadTexture(this);else e.loadTexture(this);return this},load:function(e){if("string"==typeof e&&(e=this.game.cache.getImage(e)),e)return this.resize(e.width,e.height),this.cls(),this.draw(e),this.update(),this},clear:function(e,t,i,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.width),void 0===n&&(n=this.height),this.context.clearRect(e,t,i,n),this.dirty=!0,this},fill:function(e,t,i,n){return void 0===n&&(n=1),this.context.fillStyle="rgba("+e+","+t+","+i+","+n+")",this.context.fillRect(0,0,this.width,this.height),this.dirty=!0,this},generateTexture:function(e){var t=new Image;t.src=this.canvas.toDataURL("image/png");var i=this.game.cache.addImage(e,"",t);return new PIXI.Texture(i.base)},resize:function(e,t){return e===this.width&&t===this.height||(this.width=e,this.height=t,this.canvas.width=e,this.canvas.height=t,void 0!==this._swapCanvas&&(this._swapCanvas.width=e,this._swapCanvas.height=t),this.baseTexture.width=e,this.baseTexture.height=t,this.textureFrame.width=e,this.textureFrame.height=t,this.texture.width=e,this.texture.height=t,this.texture.crop.width=e,this.texture.crop.height=t,this.update(),this.dirty=!0),this},update:function(e,t,i,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=Math.max(1,this.width)),void 0===n&&(n=Math.max(1,this.height)),this.imageData=this.context.getImageData(e,t,i,n),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this},processPixelRGB:function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.width),void 0===o&&(o=this.height);for(var a=i+r,s=n+o,p=U.Color.createColor(),l={r:0,g:0,b:0,a:0},h=!1,u=n;u<s;u++)for(var d=i;d<a;d++)U.Color.unpackPixel(this.getPixel32(d,u),p),!1!==(l=e.call(t,p,d,u))&&null!=l&&(this.setPixel32(d,u,l.r,l.g,l.b,l.a,!1),h=!0);return h&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0),this},processPixel:function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.width),void 0===o&&(o=this.height);for(var a=i+r,s=n+o,p=0,l=0,h=!1,u=n;u<s;u++)for(var d=i;d<a;d++)p=this.getPixel32(d,u),(l=e.call(t,p,d,u))!==p&&(this.pixels[u*this.width+d]=l,h=!0);return h&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0),this},replaceRGB:function(e,t,i,n,r,o,a,s,p){var l=0,h=0,u=this.width,d=this.height,c=U.Color.packPixel(e,t,i,n);void 0!==p&&p instanceof U.Rectangle&&(l=p.x,h=p.y,u=p.width,d=p.height);for(var _=0;_<d;_++)for(var y=0;y<u;y++)this.getPixel32(l+y,h+_)===c&&this.setPixel32(l+y,h+_,r,o,a,s,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this},setHSL:function(e,t,i,n){var r=e||0===e,o=t||0===t,a=i||0===i;if(r||o||a){void 0===n&&(n=new U.Rectangle(0,0,this.width,this.height));for(var s=U.Color.createColor(),p=n.y;p<n.bottom;p++)for(var l=n.x;l<n.right;l++)U.Color.unpackPixel(this.getPixel32(l,p),s,!0),r&&(s.h=e),o&&(s.s=t),a&&(s.l=i),U.Color.HSLtoRGB(s.h,s.s,s.l,s),this.setPixel32(l,p,s.r,s.g,s.b,s.a,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this}},shiftHSL:function(e,t,i,n){if(null!=e||(e=!1),null!=t||(t=!1),null!=i||(i=!1),e||t||i){void 0===n&&(n=new U.Rectangle(0,0,this.width,this.height));for(var r=U.Color.createColor(),o=n.y;o<n.bottom;o++)for(var a=n.x;a<n.right;a++)U.Color.unpackPixel(this.getPixel32(a,o),r,!0),e&&(r.h=this.game.math.wrap(r.h+e,0,1)),t&&(r.s=this.game.math.clamp(r.s+t,0,1)),i&&(r.l=this.game.math.clamp(r.l+i,0,1)),U.Color.HSLtoRGB(r.h,r.s,r.l,r),this.setPixel32(a,o,r.r,r.g,r.b,r.a,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this}},setPixel32:function(e,t,i,n,r,o,a){return void 0===a&&(a=!0),0<=e&&e<=this.width&&0<=t&&t<=this.height&&(U.Device.LITTLE_ENDIAN?this.pixels[t*this.width+e]=o<<24|r<<16|n<<8|i:this.pixels[t*this.width+e]=i<<24|n<<16|r<<8|o,a&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0)),this},setPixel:function(e,t,i,n,r,o){return this.setPixel32(e,t,i,n,r,255,o)},getPixel:function(e,t,i){i||(i=U.Color.createColor());var n=~~(e+t*this.width);return n*=4,i.r=this.data[n],i.g=this.data[++n],i.b=this.data[++n],i.a=this.data[++n],i},getPixel32:function(e,t){if(0<=e&&e<=this.width&&0<=t&&t<=this.height)return this.pixels[t*this.width+e]},getPixelRGB:function(e,t,i,n,r){return U.Color.unpackPixel(this.getPixel32(e,t),i,n,r)},getPixels:function(e){return this.context.getImageData(e.x,e.y,e.width,e.height)},getFirstPixel:function(e){void 0===e&&(e=0);var t=U.Color.createColor(),i=0,n=0,r=1,o=!1;for(1===e?(r=-1,n=this.height):3===e&&(r=-1,i=this.width);U.Color.unpackPixel(this.getPixel32(i,n),t),0===e||1===e?++i===this.width&&(i=0,((n+=r)>=this.height||n<=0)&&(o=!0)):2!==e&&3!==e||++n===this.height&&(n=0,((i+=r)>=this.width||i<=0)&&(o=!0)),0===t.a&&!o;);return t.x=i,t.y=n,t},getBounds:function(e){return void 0===e&&(e=new U.Rectangle),e.x=this.getFirstPixel(2).x,e.x===this.width?e.setTo(0,0,0,0):(e.y=this.getFirstPixel(0).y,e.width=this.getFirstPixel(3).x-e.x+1,e.height=this.getFirstPixel(1).y-e.y+1,e)},addToWorld:function(e,t,i,n,r,o){r=r||1,o=o||1;var a=this.game.add.image(e,t,this);return a.anchor.set(i,n),a.scale.set(r,o),a},copy:function(e,t,i,n,r,o,a,s,p,l,h,u,d,c,_,y,x){if(null!=e||(e=this),(e instanceof U.RenderTexture||e instanceof PIXI.RenderTexture)&&(e=e.getCanvas()),(this._image=e)instanceof U.Sprite||e instanceof U.Image||e instanceof U.Text||e instanceof PIXI.Sprite)this._pos.set(e.texture.crop.x,e.texture.crop.y),this._size.set(e.texture.crop.width,e.texture.crop.height),this._scale.set(e.scale.x,e.scale.y),this._anchor.set(e.anchor.x,e.anchor.y),this._rotate=e.rotation,this._alpha.current=e.alpha,e.texture instanceof U.RenderTexture||e.texture instanceof PIXI.RenderTexture?this._image=e.texture.getCanvas():this._image=e.texture.baseTexture.source,null!=o||(o=e.x),null!=a||(a=e.y),e.texture.trim&&(o+=e.texture.trim.x-e.anchor.x*e.texture.trim.width,a+=e.texture.trim.y-e.anchor.y*e.texture.trim.height),16777215!==e.tint&&(e.cachedTint!==e.tint&&(e.cachedTint=e.tint,e.tintedTexture=PIXI.CanvasTinter.getTintedTexture(e,e.tint)),this._image=e.tintedTexture,this._pos.set(0));else{if(this._pos.set(0),this._scale.set(1),this._anchor.set(0),this._rotate=0,this._alpha.current=1,e instanceof U.BitmapData)this._image=e.canvas;else if("string"==typeof e){if(null===(e=this.game.cache.getImage(e)))return;this._image=e}this._size.set(this._image.width,this._image.height)}if(null!=t||(t=0),null!=i||(i=0),n&&(this._size.x=n),r&&(this._size.y=r),null!=o||(o=t),null!=a||(a=i),null!=s||(s=this._size.x),null!=p||(p=this._size.y),"number"==typeof l&&(this._rotate=l),"number"==typeof h&&(this._anchor.x=h),"number"==typeof u&&(this._anchor.y=u),"number"==typeof d&&(this._scale.x=d),"number"==typeof c&&(this._scale.y=c),"number"==typeof _&&(this._alpha.current=_),void 0===y&&(y=null),void 0===x&&(x=!1),!(this._alpha.current<=0||0===this._scale.x||0===this._scale.y||0===this._size.x||0===this._size.y)){var m=this.context;return this._alpha.prev=m.globalAlpha,m.save(),m.globalAlpha=this._alpha.current,y&&(this.op=y),x&&(o|=0,a|=0),m.translate(o,a),m.scale(this._scale.x,this._scale.y),m.rotate(this._rotate),m.drawImage(this._image,this._pos.x+t,this._pos.y+i,this._size.x,this._size.y,-s*this._anchor.x,-p*this._anchor.y,s,p),m.restore(),m.globalAlpha=this._alpha.prev,this.dirty=!0,this}},copyTransform:function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=!1),!e.hasOwnProperty("worldTransform")||!e.worldVisible||0===e.worldAlpha)return this;var n=e.worldTransform;if(this._pos.set(e.texture.crop.x,e.texture.crop.y),this._size.set(e.texture.crop.width,e.texture.crop.height),0===n.a||0===n.d||0===this._size.x||0===this._size.y)return this;e.texture instanceof U.RenderTexture||e.texture instanceof PIXI.RenderTexture?this._image=e.texture.getCanvas():this._image=e.texture.baseTexture.source;var r=n.tx,o=n.ty;e.texture.trim&&(r+=e.texture.trim.x-e.anchor.x*e.texture.trim.width,o+=e.texture.trim.y-e.anchor.y*e.texture.trim.height),16777215!==e.tint&&(e.cachedTint!==e.tint&&(e.cachedTint=e.tint,e.tintedTexture=PIXI.CanvasTinter.getTintedTexture(e,e.tint)),this._image=e.tintedTexture,this._pos.set(0)),i&&(r|=0,o|=0);var a=this.context;return this._alpha.prev=a.globalAlpha,a.save(),a.globalAlpha=this._alpha.current,t&&(this.op=t),a[this.smoothProperty]=e.texture.baseTexture.scaleMode===PIXI.scaleModes.LINEAR,a.setTransform(n.a,n.b,n.c,n.d,r,o),a.drawImage(this._image,this._pos.x,this._pos.y,this._size.x,this._size.y,-this._size.x*e.anchor.x,-this._size.y*e.anchor.y,this._size.x,this._size.y),a.restore(),a.globalAlpha=this._alpha.prev,this.dirty=!0,this},copyRect:function(e,t,i,n,r,o,a){return this.copy(e,t.x,t.y,t.width,t.height,i,n,t.width,t.height,0,0,0,1,1,r,o,a)},draw:function(e,t,i,n,r,o,a){return this.copy(e,null,null,null,null,t,i,n,r,null,null,null,null,null,null,o,a)},drawGroup:function(e,t,i){return 0<e.total&&e.forEachExists(this.drawGroupProxy,this,t,i),this},drawGroupProxy:function(e,t,i){if(e.hasOwnProperty("texture")&&this.copyTransform(e,t,i),e.type===U.GROUP&&e.exists)this.drawGroup(e,t,i);else if(e.hasOwnProperty("children")&&0<e.children.length)for(var n=0;n<e.children.length;n++)e.children[n].exists&&this.copyTransform(e.children[n],t,i)},drawFull:function(e,t,i){if(!1===e.worldVisible||0===e.worldAlpha||e.hasOwnProperty("exists")&&!1===e.exists)return this;if(e.type!==U.GROUP&&e.type!==U.EMITTER&&e.type!==U.BITMAPTEXT)if(e.type===U.GRAPHICS){var n=e.getBounds();this.ctx.save(),this.ctx.translate(n.x,n.y),PIXI.CanvasGraphics.renderGraphics(e,this.ctx),this.ctx.restore()}else this.copy(e,null,null,null,null,e.worldPosition.x,e.worldPosition.y,null,null,e.worldRotation,null,null,e.worldScale.x,e.worldScale.y,e.worldAlpha,t,i);if(e.children)for(var r=0;r<e.children.length;r++)this.drawFull(e.children[r],t,i);return this},shadow:function(e,t,i,n){var r=this.context;return null==e?r.shadowColor="rgba(0,0,0,0)":(r.shadowColor=e,r.shadowBlur=t||5,r.shadowOffsetX=i||10,r.shadowOffsetY=n||10),this},alphaMask:function(e,t,i,n){return null==n?this.draw(t).blendSourceAtop():this.draw(t,n.x,n.y,n.width,n.height).blendSourceAtop(),null==i?this.draw(e).blendReset():this.draw(e,i.x,i.y,i.width,i.height).blendReset(),this},extract:function(n,r,o,a,s,e,p,l,h){return void 0===s&&(s=255),void 0===e&&(e=!1),void 0===p&&(p=r),void 0===l&&(l=o),void 0===h&&(h=a),e&&n.resize(this.width,this.height),this.processPixelRGB(function(e,t,i){return e.r===r&&e.g===o&&e.b===a&&n.setPixel32(t,i,p,l,h,s,!1),!1},this),n.context.putImageData(n.imageData,0,0),n.dirty=!0,n},rect:function(e,t,i,n,r){return void 0!==r&&(this.context.fillStyle=r),this.context.fillRect(e,t,i,n),this},text:function(e,t,i,n,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n="14px Courier"),void 0===r&&(r="rgb(255,255,255)"),void 0===o&&(o=!0);var a=this.context,s=a.font;return a.font=n,o&&(a.fillStyle="rgb(0,0,0)",a.fillText(e,t+1,i+1)),a.fillStyle=r,a.fillText(e,t,i),a.font=s,this},circle:function(e,t,i,n){var r=this.context;return void 0!==n&&(r.fillStyle=n),r.beginPath(),r.arc(e,t,i,0,2*Math.PI,!1),r.closePath(),r.fill(),this},line:function(e,t,i,n,r,o){void 0===r&&(r="#fff"),void 0===o&&(o=1);var a=this.context;return a.beginPath(),a.moveTo(e,t),a.lineTo(i,n),a.lineWidth=o,a.strokeStyle=r,a.stroke(),a.closePath(),this},textureLine:function(e,t,i){if(void 0===i&&(i="repeat-x"),"string"!=typeof t||(t=this.game.cache.getImage(t))){var n=e.length;"no-repeat"===i&&n>t.width&&(n=t.width);var r=this.context;return r.fillStyle=r.createPattern(t,i),this._circle=new U.Circle(e.start.x,e.start.y,t.height),this._circle.circumferencePoint(e.angle-1.5707963267948966,!1,this._pos),r.save(),r.translate(this._pos.x,this._pos.y),r.rotate(e.angle),r.fillRect(0,0,n,t.height),r.restore(),this.dirty=!0,this}},render:function(){return!this.disableTextureUpload&&this.dirty&&(this.baseTexture.dirty(),this.dirty=!1),this},destroy:function(){this.frameData.destroy(),this.texture.destroy(!0),PIXI.CanvasPool.remove(this)},blendReset:function(){return this.op="source-over",this},blendSourceOver:function(){return this.op="source-over",this},blendSourceIn:function(){return this.op="source-in",this},blendSourceOut:function(){return this.op="source-out",this},blendSourceAtop:function(){return this.op="source-atop",this},blendDestinationOver:function(){return this.op="destination-over",this},blendDestinationIn:function(){return this.op="destination-in",this},blendDestinationOut:function(){return this.op="destination-out",this},blendDestinationAtop:function(){return this.op="destination-atop",this},blendXor:function(){return this.op="xor",this},blendAdd:function(){return this.op="lighter",this},blendMultiply:function(){return this.op="multiply",this},blendScreen:function(){return this.op="screen",this},blendOverlay:function(){return this.op="overlay",this},blendDarken:function(){return this.op="darken",this},blendLighten:function(){return this.op="lighten",this},blendColorDodge:function(){return this.op="color-dodge",this},blendColorBurn:function(){return this.op="color-burn",this},blendHardLight:function(){return this.op="hard-light",this},blendSoftLight:function(){return this.op="soft-light",this},blendDifference:function(){return this.op="difference",this},blendExclusion:function(){return this.op="exclusion",this},blendHue:function(){return this.op="hue",this},blendSaturation:function(){return this.op="saturation",this},blendColor:function(){return this.op="color",this},blendLuminosity:function(){return this.op="luminosity",this}},Object.defineProperty(U.BitmapData.prototype,"smoothed",{get:function(){U.Canvas.getSmoothingEnabled(this.context)},set:function(e){U.Canvas.setSmoothingEnabled(this.context,e)}}),Object.defineProperty(U.BitmapData.prototype,"op",{get:function(){return this.context.globalCompositeOperation},set:function(e){this.context.globalCompositeOperation=e}}),U.BitmapData.getTransform=function(e,t,i,n,r,o){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),"number"!=typeof i&&(i=1),"number"!=typeof n&&(n=1),"number"!=typeof r&&(r=0),"number"!=typeof o&&(o=0),{sx:i,sy:n,scaleX:i,scaleY:n,skewX:r,skewY:o,translateX:e,translateY:t,tx:e,ty:t}},U.BitmapData.prototype.constructor=U.BitmapData,PIXI.Graphics=function(){PIXI.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=PIXI.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new PIXI.Rectangle(0,0,1,1),this.dirty=!0,this._boundsDirty=!1,this.webGLDirty=!1,this.cachedSpriteDirty=!1},PIXI.Graphics.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),PIXI.Graphics.prototype.constructor=PIXI.Graphics,PIXI.Graphics.prototype.lineStyle=function(e,t,i){return this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=void 0===i?1:i,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},PIXI.Graphics.prototype.moveTo=function(e,t){return this.drawShape(new PIXI.Polygon([e,t])),this},PIXI.Graphics.prototype.lineTo=function(e,t){return this.currentPath||this.moveTo(0,0),this.currentPath.shape.points.push(e,t),this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.quadraticCurveTo=function(e,t,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r,o,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var s=a[a.length-2],p=a[a.length-1],l=0,h=1;h<=20;++h)r=s+(e-s)*(l=h/20),o=p+(t-p)*l,a.push(r+(e+(i-e)*l-r)*l,o+(t+(n-t)*l-o)*l);return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.bezierCurveTo=function(e,t,i,n,r,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,s,p,l,h,u=this.currentPath.shape.points,d=u[u.length-2],c=u[u.length-1],_=0,y=1;y<=20;++y)p=(s=(a=1-(_=y/20))*a)*a,h=(l=_*_)*_,u.push(p*d+3*s*_*e+3*a*l*i+h*r,p*c+3*s*_*t+3*a*l*n+h*o);return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.arcTo=function(e,t,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1]-t,p=a-e,l=n-t,h=i-e,u=Math.abs(s*h-p*l);if(u<1e-8||0===r)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var d=s*s+p*p,c=l*l+h*h,_=s*l+p*h,y=r*Math.sqrt(d)/u,x=r*Math.sqrt(c)/u,m=y*_/d,f=x*_/c,v=y*h+x*p,g=y*l+x*s,z=p*(x+m),b=s*(x+m),w=h*(y+f),S=l*(y+f),C=Math.atan2(b-g,z-v),M=Math.atan2(S-g,w-v);this.arc(v+e,g+t,r,C,M,h*s<p*l)}return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.arc=function(e,t,i,n,r,o,a){if(n===r)return this;void 0===o&&(o=!1),void 0===a&&(a=40),!o&&r<=n?r+=2*Math.PI:o&&n<=r&&(n+=2*Math.PI);var s=o?-1*(n-r):r-n,p=Math.ceil(Math.abs(s)/(2*Math.PI))*a;if(0===s)return this;var l=e+Math.cos(n)*i,h=t+Math.sin(n)*i;o&&this.filling?this.moveTo(e,t):this.moveTo(l,h);for(var u=this.currentPath.shape.points,d=s/(2*p),c=2*d,_=Math.cos(d),y=Math.sin(d),x=p-1,m=x%1/x,f=0;f<=x;f++){var v=d+n+c*(f+m*f),g=Math.cos(v),z=-Math.sin(v);u.push((_*g+y*z)*i+e,(_*-z+y*g)*i+t)}return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},PIXI.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},PIXI.Graphics.prototype.drawRect=function(e,t,i,n){return this.drawShape(new PIXI.Rectangle(e,t,i,n)),this},PIXI.Graphics.prototype.drawRoundedRect=function(e,t,i,n,r){return this.drawShape(new PIXI.RoundedRectangle(e,t,i,n,r)),this},PIXI.Graphics.prototype.drawCircle=function(e,t,i){return this.drawShape(new PIXI.Circle(e,t,i)),this},PIXI.Graphics.prototype.drawEllipse=function(e,t,i,n){return this.drawShape(new PIXI.Ellipse(e,t,i,n)),this},PIXI.Graphics.prototype.drawPolygon=function(e){(e instanceof U.Polygon||e instanceof PIXI.Polygon)&&(e=e.points);var t=e;if(!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;++i)t[i]=arguments[i]}return this.drawShape(new U.Polygon(t)),this},PIXI.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this._boundsDirty=!0,this.clearDirty=!0,this.graphicsData=[],this.updateLocalBounds(),this},PIXI.Graphics.prototype.generateTexture=function(e,t,i){void 0===e&&(e=1),void 0===t&&(t=PIXI.scaleModes.DEFAULT),void 0===i&&(i=0);var n=this.getBounds();n.width+=i,n.height+=i;var r=new PIXI.CanvasBuffer(n.width*e,n.height*e),o=PIXI.Texture.fromCanvas(r.canvas,t);return o.baseTexture.resolution=e,r.context.scale(e,e),r.context.translate(-n.x,-n.y),PIXI.CanvasGraphics.renderGraphics(this,r.context),o},PIXI.Graphics.prototype._renderWebGL=function(e){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);if(e.spriteBatch.stop(),e.blendModeManager.setBlendMode(this.blendMode),this._mask&&e.maskManager.pushMask(this._mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock),this.blendMode!==e.spriteBatch.currentBlendMode){e.spriteBatch.currentBlendMode=this.blendMode;var t=PIXI.blendModesWebGL[e.spriteBatch.currentBlendMode];e.spriteBatch.gl.blendFunc(t[0],t[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),PIXI.WebGLGraphics.renderGraphics(this,e),this.children.length){e.spriteBatch.start();for(var i=0;i<this.children.length;i++)this.children[i]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this.mask,e),e.drawCount++,e.spriteBatch.start()}},PIXI.Graphics.prototype._renderCanvas=function(e){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint),this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,e);var t=e.context,i=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=PIXI.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e);var n=e.resolution,r=i.tx*e.resolution+e.shakeX,o=i.ty*e.resolution+e.shakeY;t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,r,o),PIXI.CanvasGraphics.renderGraphics(this,t);for(var a=0;a<this.children.length;a++)this.children[a]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},PIXI.Graphics.prototype.getBounds=function(e){if(!this._currentBounds){if(!this.renderable)return PIXI.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var t=this._localBounds,i=t.x,n=t.width+t.x,r=t.y,o=t.height+t.y,a=e||this.worldTransform,s=a.a,p=a.b,l=a.c,h=a.d,u=a.tx,d=a.ty,c=s*n+l*o+u,_=h*o+p*n+d,y=s*i+l*o+u,x=h*o+p*i+d,m=s*i+l*r+u,f=h*r+p*i+d,v=s*n+l*r+u,g=h*r+p*n+d,z=c,b=_,w=c,S=_;w=v<(w=m<(w=y<w?y:w)?m:w)?v:w,S=g<(S=f<(S=x<S?x:S)?f:S)?g:S,z=(z=(z=z<y?y:z)<m?m:z)<v?v:z,b=(b=(b=b<x?x:b)<f?f:b)<g?g:b,this._bounds.x=w,this._bounds.width=z-w,this._bounds.y=S,this._bounds.height=b-S,this._currentBounds=this._bounds}return this._currentBounds},PIXI.Graphics.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=PIXI.identityMatrix;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform();var i=this.getBounds();for(this.worldTransform=e,t=0;t<this.children.length;t++)this.children[t].updateTransform();return i},PIXI.Graphics.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,tempPoint);for(var t=this.graphicsData,i=0;i<t.length;i++){var n=t[i];if(n.fill&&n.shape&&n.shape.contains(tempPoint.x,tempPoint.y))return!0}return!1},PIXI.Graphics.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r,o,a,s,p,l,h=0;h<this.graphicsData.length;h++){var u=this.graphicsData[h],d=u.type,c=u.lineWidth;if(r=u.shape,d===PIXI.Graphics.RECT||d===PIXI.Graphics.RREC)a=r.x-c/2,s=r.y-c/2,e=a<e?a:e,t=t<a+(p=r.width+c)?a+p:t,i=s<i?s:i,n=n<s+(l=r.height+c)?s+l:n;else if(d===PIXI.Graphics.CIRC)a=r.x,s=r.y,e=a-(p=r.radius+c/2)<e?a-p:e,t=t<a+p?a+p:t,i=s-(l=r.radius+c/2)<i?s-l:i,n=n<s+l?s+l:n;else if(d===PIXI.Graphics.ELIP)a=r.x,s=r.y,e=a-(p=r.width+c/2)<e?a-p:e,t=t<a+p?a+p:t,i=s-(l=r.height+c/2)<i?s-l:i,n=n<s+l?s+l:n;else{o=r.points;for(var _=0;_<o.length;_++)o[_]instanceof U.Point?(a=o[_].x,s=o[_].y):(a=o[_],s=o[_+1],_<o.length-1&&_++),e=a-c<e?a-c:e,t=t<a+c?a+c:t,i=s-c<i?s-c:i,n=n<s+c?s+c:n}}else n=i=t=e=0;var y=this.boundsPadding;this._localBounds.x=e-y,this._localBounds.width=t-e+2*y,this._localBounds.y=i-y,this._localBounds.height=n-i+2*y},PIXI.Graphics.prototype._generateCachedSprite=function(){var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(e.width,e.height);else{var t=new PIXI.CanvasBuffer(e.width,e.height),i=PIXI.Texture.fromCanvas(t.canvas);this._cachedSprite=new PIXI.Sprite(i),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,PIXI.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},PIXI.Graphics.prototype.updateCachedSpriteTexture=function(){var e=this._cachedSprite,t=e.texture,i=e.buffer.canvas;t.baseTexture.width=i.width,t.baseTexture.height=i.height,t.crop.width=t.frame.width=i.width,t.crop.height=t.frame.height=i.height,e._width=i.width,e._height=i.height,t.baseTexture.dirty()},PIXI.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},PIXI.Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null,e instanceof U.Polygon&&(e=e.clone()).flatten();var t=new PIXI.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===PIXI.Graphics.POLY&&(t.shape.closed=this.filling,this.currentPath=t),this.dirty=!0,this._boundsDirty=!0,t},Object.defineProperty(PIXI.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():this.destroyCachedSprite(),this.dirty=!0,this.webGLDirty=!0}}),PIXI.GraphicsData=function(e,t,i,n,r,o,a){this.lineWidth=e,this.lineColor=t,this.lineAlpha=i,this._lineTint=t,this.fillColor=n,this.fillAlpha=r,this._fillTint=n,this.fill=o,this.shape=a,this.type=a.type},PIXI.GraphicsData.prototype.constructor=PIXI.GraphicsData,PIXI.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},PIXI.EarCut={},PIXI.EarCut.Triangulate=function(e,t,i){i=i||2;var n,r,o,a,s,p,l,h=t&&t.length,u=h?t[0]*i:e.length,d=PIXI.EarCut.linkedList(e,0,u,i,!0),c=[];if(!d)return c;if(h&&(d=PIXI.EarCut.eliminateHoles(e,t,d,i)),e.length>80*i){n=o=e[0],r=a=e[1];for(var _=i;_<u;_+=i)(s=e[_])<n&&(n=s),(p=e[_+1])<r&&(r=p),o<s&&(o=s),a<p&&(a=p);l=Math.max(o-n,a-r)}return PIXI.EarCut.earcutLinked(d,c,i,n,r,l),c},PIXI.EarCut.linkedList=function(e,t,i,n,r){var o,a,s,p=0;for(o=t,a=i-n;o<i;o+=n)p+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;if(r===0<p)for(o=t;o<i;o+=n)s=PIXI.EarCut.insertNode(o,e[o],e[o+1],s);else for(o=i-n;t<=o;o-=n)s=PIXI.EarCut.insertNode(o,e[o],e[o+1],s);return s},PIXI.EarCut.filterPoints=function(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!PIXI.EarCut.equals(n,n.next)&&0!==PIXI.EarCut.area(n.prev,n,n.next))n=n.next;else{if(PIXI.EarCut.removeNode(n),(n=t=n.prev)===n.next)return null;i=!0}}while(i||n!==t);return t},PIXI.EarCut.earcutLinked=function(e,t,i,n,r,o,a){if(e){!a&&o&&PIXI.EarCut.indexCurve(e,n,r,o);for(var s,p,l=e;e.prev!==e.next;)if(s=e.prev,p=e.next,o?PIXI.EarCut.isEarHashed(e,n,r,o):PIXI.EarCut.isEar(e))t.push(s.i/i),t.push(e.i/i),t.push(p.i/i),PIXI.EarCut.removeNode(e),e=p.next,l=p.next;else if((e=p)===l){a?1===a?(e=PIXI.EarCut.cureLocalIntersections(e,t,i),PIXI.EarCut.earcutLinked(e,t,i,n,r,o,2)):2===a&&PIXI.EarCut.splitEarcut(e,t,i,n,r,o):PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(e),t,i,n,r,o,1);break}}},PIXI.EarCut.isEar=function(e){var t=e.prev,i=e,n=e.next;if(0<=PIXI.EarCut.area(t,i,n))return!1;for(var r=e.next.next;r!==e.prev;){if(PIXI.EarCut.pointInTriangle(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=PIXI.EarCut.area(r.prev,r,r.next))return!1;r=r.next}return!0},PIXI.EarCut.isEarHashed=function(e,t,i,n){var r=e.prev,o=e,a=e.next;if(0<=PIXI.EarCut.area(r,o,a))return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,p=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,h=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=PIXI.EarCut.zOrder(s,p,t,i,n),d=PIXI.EarCut.zOrder(l,h,t,i,n),c=e.nextZ;c&&c.z<=d;){if(c!==e.prev&&c!==e.next&&PIXI.EarCut.pointInTriangle(r.x,r.y,o.x,o.y,a.x,a.y,c.x,c.y)&&0<=PIXI.EarCut.area(c.prev,c,c.next))return!1;c=c.nextZ}for(c=e.prevZ;c&&c.z>=u;){if(c!==e.prev&&c!==e.next&&PIXI.EarCut.pointInTriangle(r.x,r.y,o.x,o.y,a.x,a.y,c.x,c.y)&&0<=PIXI.EarCut.area(c.prev,c,c.next))return!1;c=c.prevZ}return!0},PIXI.EarCut.cureLocalIntersections=function(e,t,i){var n=e;do{var r=n.prev,o=n.next.next;PIXI.EarCut.intersects(r,n,n.next,o)&&PIXI.EarCut.locallyInside(r,o)&&PIXI.EarCut.locallyInside(o,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(o.i/i),PIXI.EarCut.removeNode(n),PIXI.EarCut.removeNode(n.next),n=e=o),n=n.next}while(n!==e);return n},PIXI.EarCut.splitEarcut=function(e,t,i,n,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&PIXI.EarCut.isValidDiagonal(a,s)){var p=PIXI.EarCut.splitPolygon(a,s);return a=PIXI.EarCut.filterPoints(a,a.next),p=PIXI.EarCut.filterPoints(p,p.next),PIXI.EarCut.earcutLinked(a,t,i,n,r,o),void PIXI.EarCut.earcutLinked(p,t,i,n,r,o)}s=s.next}a=a.next}while(a!==e)},PIXI.EarCut.eliminateHoles=function(e,t,i,n){var r,o,a,s,p,l=[];for(r=0,o=t.length;r<o;r++)a=t[r]*n,s=r<o-1?t[r+1]*n:e.length,(p=PIXI.EarCut.linkedList(e,a,s,n,!1))===p.next&&(p.steiner=!0),l.push(PIXI.EarCut.getLeftmost(p));for(l.sort(compareX),r=0;r<l.length;r++)PIXI.EarCut.eliminateHole(l[r],i),i=PIXI.EarCut.filterPoints(i,i.next);return i},PIXI.EarCut.compareX=function(e,t){return e.x-t.x},PIXI.EarCut.eliminateHole=function(e,t){if(t=PIXI.EarCut.findHoleBridge(e,t)){var i=PIXI.EarCut.splitPolygon(t,e);PIXI.EarCut.filterPoints(i,i.next)}},PIXI.EarCut.findHoleBridge=function(e,t){var i,n=t,r=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);s<=r&&a<s&&(a=s,i=n.x<n.next.x?n:n.next)}n=n.next}while(n!==t);if(!i)return null;if(e.x===i.x)return i.prev;var p,l=i,h=1/0;for(n=i.next;n!==l;)r>=n.x&&n.x>=i.x&&PIXI.EarCut.pointInTriangle(o<i.y?r:a,o,i.x,i.y,o<i.y?a:r,o,n.x,n.y)&&((p=Math.abs(o-n.y)/(r-n.x))<h||p===h&&n.x>i.x)&&PIXI.EarCut.locallyInside(n,e)&&(i=n,h=p),n=n.next;return i},PIXI.EarCut.indexCurve=function(e,t,i,n){for(var r=e;null===r.z&&(r.z=PIXI.EarCut.zOrder(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==e;);r.prevZ.nextZ=null,r.prevZ=null,PIXI.EarCut.sortLinked(r)},PIXI.EarCut.sortLinked=function(e){var t,i,n,r,o,a,s,p,l=1;do{for(i=e,o=e=null,a=0;i;){for(a++,n=i,t=s=0;t<l&&(s++,n=n.nextZ);t++);for(p=l;0<s||0<p&&n;)0===s?(n=(r=n).nextZ,p--):0!==p&&n?i.z<=n.z?(i=(r=i).nextZ,s--):(n=(r=n).nextZ,p--):(i=(r=i).nextZ,s--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=n}o.nextZ=null,l*=2}while(1<a);return e},PIXI.EarCut.zOrder=function(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)/r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/r)|t<<8))|t<<4))|t<<2))|t<<1))<<1},PIXI.EarCut.getLeftmost=function(e){for(var t=e,i=e;t.x<i.x&&(i=t),(t=t.next)!==e;);return i},PIXI.EarCut.pointInTriangle=function(e,t,i,n,r,o,a,s){return 0<=(r-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(n-s)-(i-a)*(t-s)&&0<=(i-a)*(o-s)-(r-a)*(n-s)},PIXI.EarCut.isValidDiagonal=function(e,t){return PIXI.EarCut.equals(e,t)||e.next.i!==t.i&&e.prev.i!==t.i&&!PIXI.EarCut.intersectsPolygon(e,t)&&PIXI.EarCut.locallyInside(e,t)&&PIXI.EarCut.locallyInside(t,e)&&PIXI.EarCut.middleInside(e,t)},PIXI.EarCut.area=function(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)},PIXI.EarCut.equals=function(e,t){return e.x===t.x&&e.y===t.y},PIXI.EarCut.intersects=function(e,t,i,n){return 0<PIXI.EarCut.area(e,t,i)!=0<PIXI.EarCut.area(e,t,n)&&0<PIXI.EarCut.area(i,n,e)!=0<PIXI.EarCut.area(i,n,t)},PIXI.EarCut.intersectsPolygon=function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&PIXI.EarCut.intersects(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1},PIXI.EarCut.locallyInside=function(e,t){return PIXI.EarCut.area(e.prev,e,e.next)<0?0<=PIXI.EarCut.area(e,t,e.next)&&0<=PIXI.EarCut.area(e,e.prev,t):PIXI.EarCut.area(e,t,e.prev)<0||PIXI.EarCut.area(e,e.next,t)<0},PIXI.EarCut.middleInside=function(e,t){for(var i=e,n=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;i.y>o!=i.next.y>o&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==e;);return n},PIXI.EarCut.splitPolygon=function(e,t){var i=new PIXI.EarCut.Node(e.i,e.x,e.y),n=new PIXI.EarCut.Node(t.i,t.x,t.y),r=e.next,o=t.prev;return(e.next=t).prev=e,(i.next=r).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n},PIXI.EarCut.insertNode=function(e,t,i,n){var r=new PIXI.EarCut.Node(e,t,i);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r},PIXI.EarCut.removeNode=function(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)},PIXI.EarCut.Node=function(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1},PIXI.WebGLGraphics=function(){},PIXI.WebGLGraphics.stencilBufferLimit=6,PIXI.WebGLGraphics.renderGraphics=function(e,t){var i,n=t.gl,r=t.projection,o=t.offset,a=t.shaderManager.primitiveShader;e.dirty&&PIXI.WebGLGraphics.updateGraphics(e,n);for(var s=e._webGL[n.id],p=0;p<s.data.length;p++)1===s.data[p].mode?(i=s.data[p],t.stencilManager.pushStencil(e,i,t),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(i.indices.length-4)),t.stencilManager.popStencil(e,i,t)):(i=s.data[p],t.shaderManager.setShader(a),a=t.shaderManager.primitiveShader,n.uniformMatrix3fv(a.translationMatrix,!1,e.worldTransform.toArray(!0)),n.uniform1f(a.flipY,1),n.uniform2f(a.projectionVector,r.x,-r.y),n.uniform2f(a.offsetVector,-o.x,-o.y),n.uniform3fv(a.tintColor,PIXI.hex2rgb(e.tint)),n.uniform1f(a.alpha,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,i.buffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(a.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,i.indices.length,n.UNSIGNED_SHORT,0))},PIXI.WebGLGraphics.updateGraphics=function(e,t){var i,n,r=e._webGL[t.id];if(r||(r=e._webGL[t.id]={lastIndex:0,data:[],gl:t}),e.dirty=!1,e.clearDirty){for(e.clearDirty=!1,i=0;i<r.data.length;i++){var o=r.data[i];o.reset(),PIXI.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}for(i=r.lastIndex;i<e.graphicsData.length;i++){var a=e.graphicsData[i];if(a.type===PIXI.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]===a.points[a.points.length-2]&&a.points[1]===a.points[a.points.length-1]||a.points.push(a.points[0],a.points[1])),a.fill&&a.points.length>=PIXI.WebGLGraphics.stencilBufferLimit)if(a.points.length<2*PIXI.WebGLGraphics.stencilBufferLimit){n=PIXI.WebGLGraphics.switchMode(r,0),PIXI.WebGLGraphics.buildPoly(a,n)||(n=PIXI.WebGLGraphics.switchMode(r,1),PIXI.WebGLGraphics.buildComplexPoly(a,n))}else n=PIXI.WebGLGraphics.switchMode(r,1),PIXI.WebGLGraphics.buildComplexPoly(a,n);0<a.lineWidth&&(n=PIXI.WebGLGraphics.switchMode(r,0),PIXI.WebGLGraphics.buildLine(a,n))}else n=PIXI.WebGLGraphics.switchMode(r,0),a.type===PIXI.Graphics.RECT?PIXI.WebGLGraphics.buildRectangle(a,n):a.type===PIXI.Graphics.CIRC||a.type===PIXI.Graphics.ELIP?PIXI.WebGLGraphics.buildCircle(a,n):a.type===PIXI.Graphics.RREC&&PIXI.WebGLGraphics.buildRoundedRectangle(a,n);r.lastIndex++}for(i=0;i<r.data.length;i++)(n=r.data[i]).dirty&&n.upload()},PIXI.WebGLGraphics.switchMode=function(e,t){var i;return e.data.length?(i=e.data[e.data.length-1]).mode===t&&1!==t||((i=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(e.gl)).mode=t,e.data.push(i)):((i=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(e.gl)).mode=t,e.data.push(i)),i.dirty=!0,i},PIXI.WebGLGraphics.buildRectangle=function(e,t){var i=e.shape,n=i.x,r=i.y,o=i.width,a=i.height;if(e.fill){var s=PIXI.hex2rgb(e.fillColor),p=e.fillAlpha,l=s[0]*p,h=s[1]*p,u=s[2]*p,d=t.points,c=t.indices,_=d.length/6;d.push(n,r),d.push(l,h,u,p),d.push(n+o,r),d.push(l,h,u,p),d.push(n,r+a),d.push(l,h,u,p),d.push(n+o,r+a),d.push(l,h,u,p),c.push(_,_,_+1,_+2,_+3,_+3)}if(e.lineWidth){var y=e.points;e.points=[n,r,n+o,r,n+o,r+a,n,r+a,n,r],PIXI.WebGLGraphics.buildLine(e,t),e.points=y}},PIXI.WebGLGraphics.buildRoundedRectangle=function(e,t){var i=e.shape,n=i.x,r=i.y,o=i.width,a=i.height,s=i.radius,p=[];if(p.push(n,r+s),p=(p=(p=(p=p.concat(PIXI.WebGLGraphics.quadraticBezierCurve(n,r+a-s,n,r+a,n+s,r+a))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+o-s,r+a,n+o,r+a,n+o,r+a-s))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+o,r+s,n+o,r,n+o-s,r))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+s,r,n,r,n,r+s)),e.fill){var l=PIXI.hex2rgb(e.fillColor),h=e.fillAlpha,u=l[0]*h,d=l[1]*h,c=l[2]*h,_=t.points,y=t.indices,x=_.length/6,m=PIXI.EarCut.Triangulate(p,null,2),f=0;for(f=0;f<m.length;f+=3)y.push(m[f]+x),y.push(m[f]+x),y.push(m[f+1]+x),y.push(m[f+2]+x),y.push(m[f+2]+x);for(f=0;f<p.length;f++)_.push(p[f],p[++f],u,d,c,h)}if(e.lineWidth){var v=e.points;e.points=p,PIXI.WebGLGraphics.buildLine(e,t),e.points=v}},PIXI.WebGLGraphics.quadraticBezierCurve=function(e,t,i,n,r,o){function a(e,t,i){return e+(t-e)*i}for(var s,p,l,h,u,d,c=[],_=0,y=0;y<=20;y++)s=a(e,i,_=y/20),p=a(t,n,_),l=a(i,r,_),h=a(n,o,_),u=a(s,l,_),d=a(p,h,_),c.push(u,d);return c},PIXI.WebGLGraphics.buildCircle=function(e,t){var i,n,r=e.shape,o=r.x,a=r.y;n=e.type===PIXI.Graphics.CIRC?(i=r.radius,r.radius):(i=r.width,r.height);var s=2*Math.PI/40,p=0;if(e.fill){var l=PIXI.hex2rgb(e.fillColor),h=e.fillAlpha,u=l[0]*h,d=l[1]*h,c=l[2]*h,_=t.points,y=t.indices,x=_.length/6;for(y.push(x),p=0;p<41;p++)_.push(o,a,u,d,c,h),_.push(o+Math.sin(s*p)*i,a+Math.cos(s*p)*n,u,d,c,h),y.push(x++,x++);y.push(x-1)}if(e.lineWidth){var m=e.points;for(e.points=[],p=0;p<41;p++)e.points.push(o+Math.sin(s*p)*i,a+Math.cos(s*p)*n);PIXI.WebGLGraphics.buildLine(e,t),e.points=m}},PIXI.WebGLGraphics.buildLine=function(e,t){var i=0,n=e.points;if(0!==n.length){if(e.lineWidth%2)for(i=0;i<n.length;i++)n[i]+=.5;var r=new PIXI.Point(n[0],n[1]),o=new PIXI.Point(n[n.length-2],n[n.length-1]);if(r.x===o.x&&r.y===o.y){(n=n.slice()).pop(),n.pop();var a=(o=new PIXI.Point(n[n.length-2],n[n.length-1])).x+.5*(r.x-o.x),s=o.y+.5*(r.y-o.y);n.unshift(a,s),n.push(a,s)}var p,l,h,u,d,c,_,y,x,m,f,v,g,z,b,w,S,C,M,P,k,T,G=t.points,O=t.indices,A=n.length/2,E=n.length,I=G.length/6,B=e.lineWidth/2,L=PIXI.hex2rgb(e.lineColor),D=e.lineAlpha,R=L[0]*D,F=L[1]*D,j=L[2]*D;for(h=n[0],u=n[1],d=n[2],x=-(u-(c=n[3])),m=h-d,x/=T=Math.sqrt(x*x+m*m),m/=T,x*=B,m*=B,G.push(h-x,u-m,R,F,j,D),G.push(h+x,u+m,R,F,j,D),i=1;i<A-1;i++)h=n[2*(i-1)],u=n[2*(i-1)+1],d=n[2*i],c=n[2*i+1],_=n[2*(i+1)],y=n[2*(i+1)+1],x=-(u-c),m=h-d,x/=T=Math.sqrt(x*x+m*m),m/=T,x*=B,m*=B,f=-(c-y),v=d-_,f/=T=Math.sqrt(f*f+v*v),v/=T,S=(-x+h)*(-m+c)-(-x+d)*(-m+u),P=(-(f*=B)+_)*(-(v*=B)+c)-(-f+d)*(-v+y),k=(b=-m+u-(-m+c))*(M=-f+d-(-f+_))-(C=-v+y-(-v+c))*(w=-x+d-(-x+h)),Math.abs(k)<.1?(k+=10.1,G.push(d-x,c-m,R,F,j,D),G.push(d+x,c+m,R,F,j,D)):19600<((p=(w*P-M*S)/k)-d)*(p-d)+((l=(C*S-b*P)/k)-c)+(l-c)?(g=x-f,z=m-v,g/=T=Math.sqrt(g*g+z*z),z/=T,g*=B,z*=B,G.push(d-g,c-z),G.push(R,F,j,D),G.push(d+g,c+z),G.push(R,F,j,D),G.push(d-g,c-z),G.push(R,F,j,D),E++):(G.push(p,l),G.push(R,F,j,D),G.push(d-(p-d),c-(l-c)),G.push(R,F,j,D));for(h=n[2*(A-2)],u=n[2*(A-2)+1],d=n[2*(A-1)],x=-(u-(c=n[2*(A-1)+1])),m=h-d,x/=T=Math.sqrt(x*x+m*m),m/=T,x*=B,m*=B,G.push(d-x,c-m),G.push(R,F,j,D),G.push(d+x,c+m),G.push(R,F,j,D),O.push(I),i=0;i<E;i++)O.push(I++);O.push(I-1)}},PIXI.WebGLGraphics.buildComplexPoly=function(e,t){var i=e.points.slice();if(!(i.length<6)){var n=t.indices;t.points=i,t.alpha=e.fillAlpha,t.color=PIXI.hex2rgb(e.fillColor);for(var r,o,a=1/0,s=-1/0,p=1/0,l=-1/0,h=0;h<i.length;h+=2)a=(r=i[h])<a?r:a,s=s<r?r:s,p=(o=i[h+1])<p?o:p,l=l<o?o:l;i.push(a,p,s,p,s,l,a,l);var u=i.length/2;for(h=0;h<u;h++)n.push(h)}},PIXI.WebGLGraphics.buildPoly=function(e,t){var i=e.points;if(!(i.length<6)){var n=t.points,r=t.indices,o=i.length/2,a=PIXI.hex2rgb(e.fillColor),s=e.fillAlpha,p=a[0]*s,l=a[1]*s,h=a[2]*s,u=PIXI.EarCut.Triangulate(i,null,2);if(!u)return!1;var d=n.length/6,c=0;for(c=0;c<u.length;c+=3)r.push(u[c]+d),r.push(u[c]+d),r.push(u[c+1]+d),r.push(u[c+2]+d),r.push(u[c+2]+d);for(c=0;c<o;c++)n.push(i[2*c],i[2*c+1],p,l,h,s);return!0}},PIXI.WebGLGraphics.graphicsDataPool=[],PIXI.WebGLGraphicsData=function(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},PIXI.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},PIXI.WebGLGraphicsData.prototype.upload=function(){var e=this.gl;this.glPoints=new PIXI.Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndicies=new PIXI.Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndicies,e.STATIC_DRAW),this.dirty=!1},PIXI.CanvasGraphics=function(){},PIXI.CanvasGraphics.renderGraphics=function(e,t){var i=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var n=0;n<e.graphicsData.length;n++){var r=e.graphicsData[n],o=r.shape,a=r._fillTint,s=r._lineTint;if(t.lineWidth=r.lineWidth,r.type===PIXI.Graphics.POLY){t.beginPath();var p=o.points;t.moveTo(p[0],p[1]);for(var l=1;l<p.length/2;l++)t.lineTo(p[2*l],p[2*l+1]);o.closed&&t.lineTo(p[0],p[1]),p[0]===p[p.length-2]&&p[1]===p[p.length-1]&&t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}else if(r.type===PIXI.Graphics.RECT)(r.fillColor||0===r.fillColor)&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fillRect(o.x,o.y,o.width,o.height)),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.strokeRect(o.x,o.y,o.width,o.height));else if(r.type===PIXI.Graphics.CIRC)t.beginPath(),t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke());else if(r.type===PIXI.Graphics.ELIP){var h=2*o.width,u=2*o.height,d=o.x-h/2,c=o.y-u/2;t.beginPath();var _=h/2*.5522848,y=u/2*.5522848,x=d+h,m=c+u,f=d+h/2,v=c+u/2;t.moveTo(d,v),t.bezierCurveTo(d,v-y,f-_,c,f,c),t.bezierCurveTo(f+_,c,x,v-y,x,v),t.bezierCurveTo(x,v+y,f+_,m,f,m),t.bezierCurveTo(f-_,m,d,v+y,d,v),t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}else if(r.type===PIXI.Graphics.RREC){var g=o.x,z=o.y,b=o.width,w=o.height,S=o.radius,C=Math.min(b,w)/2|0;S=C<S?C:S,t.beginPath(),t.moveTo(g,z+S),t.lineTo(g,z+w-S),t.quadraticCurveTo(g,z+w,g+S,z+w),t.lineTo(g+b-S,z+w),t.quadraticCurveTo(g+b,z+w,g+b,z+w-S),t.lineTo(g+b,z+S),t.quadraticCurveTo(g+b,z,g+b-S,z),t.lineTo(g+S,z),t.quadraticCurveTo(g,z,g,z+S),t.closePath(),(r.fillColor||0===r.fillColor)&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}}},PIXI.CanvasGraphics.renderGraphicsMask=function(e,t){var i=e.graphicsData.length;if(0!==i){t.beginPath();for(var n=0;n<i;n++){var r=e.graphicsData[n],o=r.shape;if(r.type===PIXI.Graphics.POLY){var a=o.points;t.moveTo(a[0],a[1]);for(var s=1;s<a.length/2;s++)t.lineTo(a[2*s],a[2*s+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(r.type===PIXI.Graphics.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(r.type===PIXI.Graphics.CIRC)t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath();else if(r.type===PIXI.Graphics.ELIP){var p=2*o.width,l=2*o.height,h=o.x-p/2,u=o.y-l/2,d=p/2*.5522848,c=l/2*.5522848,_=h+p,y=u+l,x=h+p/2,m=u+l/2;t.moveTo(h,m),t.bezierCurveTo(h,m-c,x-d,u,x,u),t.bezierCurveTo(x+d,u,_,m-c,_,m),t.bezierCurveTo(_,m+c,x+d,y,x,y),t.bezierCurveTo(x-d,y,h,m+c,h,m),t.closePath()}else if(r.type===PIXI.Graphics.RREC){var f=o.x,v=o.y,g=o.width,z=o.height,b=o.radius,w=Math.min(g,z)/2|0;b=w<b?w:b,t.moveTo(f,v+b),t.lineTo(f,v+z-b),t.quadraticCurveTo(f,v+z,f+b,v+z),t.lineTo(f+g-b,v+z),t.quadraticCurveTo(f+g,v+z,f+g,v+z-b),t.lineTo(f+g,v+b),t.quadraticCurveTo(f+g,v,f+g-b,v),t.lineTo(f+b,v),t.quadraticCurveTo(f,v,f,v+b),t.closePath()}}}},PIXI.CanvasGraphics.updateGraphicsTint=function(e){if(16777215!==e.tint)for(var t=(e.tint>>16&255)/255,i=(e.tint>>8&255)/255,n=(255&e.tint)/255,r=0;r<e.graphicsData.length;r++){var o=e.graphicsData[r],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255}},U.Graphics=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.type=U.GRAPHICS,this.physicsType=U.SPRITE,this.anchor=new U.Point,PIXI.Graphics.call(this),U.Component.Core.init.call(this,e,t,i,"",null)},U.Graphics.prototype=Object.create(PIXI.Graphics.prototype),U.Graphics.prototype.constructor=U.Graphics,U.Component.Core.install.call(U.Graphics.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]),U.Graphics.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Graphics.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Graphics.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Graphics.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Graphics.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Graphics.prototype.postUpdate=function(){U.Component.PhysicsBody.postUpdate.call(this),U.Component.FixedToCamera.postUpdate.call(this),this._boundsDirty&&(this.updateLocalBounds(),this._boundsDirty=!1);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()},U.Graphics.prototype.destroy=function(e){this.clear(),U.Component.Destroy.prototype.destroy.call(this,e)},U.Graphics.prototype.drawTriangle=function(e,t){void 0===t&&(t=!1);var i=new U.Polygon(e);if(t){var n=new U.Point(this.game.camera.x-e[0].x,this.game.camera.y-e[0].y),r=new U.Point(e[1].x-e[0].x,e[1].y-e[0].y),o=new U.Point(e[1].x-e[2].x,e[1].y-e[2].y).cross(r);0<n.dot(o)&&this.drawPolygon(i)}else this.drawPolygon(i)},U.Graphics.prototype.drawTriangles=function(e,t,i){void 0===i&&(i=!1);var n,r=new U.Point,o=new U.Point,a=new U.Point,s=[];if(t)if(e[0]instanceof U.Point)for(n=0;n<t.length/3;n++)s.push(e[t[3*n]]),s.push(e[t[3*n+1]]),s.push(e[t[3*n+2]]),3===s.length&&(this.drawTriangle(s,i),s=[]);else for(n=0;n<t.length;n++)r.x=e[2*t[n]],r.y=e[2*t[n]+1],s.push(r.copyTo({})),3===s.length&&(this.drawTriangle(s,i),s=[]);else if(e[0]instanceof U.Point)for(n=0;n<e.length/3;n++)this.drawTriangle([e[3*n],e[3*n+1],e[3*n+2]],i);else for(n=0;n<e.length/6;n++)r.x=e[6*n+0],r.y=e[6*n+1],o.x=e[6*n+2],o.y=e[6*n+3],a.x=e[6*n+4],a.y=e[6*n+5],this.drawTriangle([r,o,a],i)},U.RenderTexture=function(e,t,i,n,r,o){void 0===n&&(n=""),void 0===r&&(r=U.scaleModes.DEFAULT),void 0===o&&(o=1),this.game=e,this.key=n,this.type=U.RENDERTEXTURE,this._tempMatrix=new PIXI.Matrix,PIXI.RenderTexture.call(this,t,i,this.game.renderer,r,o),this.render=U.RenderTexture.prototype.render},U.RenderTexture.prototype=Object.create(PIXI.RenderTexture.prototype),U.RenderTexture.prototype.constructor=U.RenderTexture,U.RenderTexture.prototype.renderXY=function(e,t,i,n){e.updateTransform(),this._tempMatrix.copyFrom(e.worldTransform),this._tempMatrix.tx=t,this._tempMatrix.ty=i,this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,n):this.renderCanvas(e,this._tempMatrix,n)},U.RenderTexture.prototype.renderRawXY=function(e,t,i,n){this._tempMatrix.identity().translate(t,i),this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,n):this.renderCanvas(e,this._tempMatrix,n)},U.RenderTexture.prototype.render=function(e,t,i){null==t?this._tempMatrix.copyFrom(e.worldTransform):this._tempMatrix.copyFrom(t),this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,i):this.renderCanvas(e,this._tempMatrix,i)},U.Text=function(e,t,i,n,r){t=t||0,i=i||0,n=null==n?"":n.toString(),r=U.Utils.extend({},r),this.type=U.TEXT,this.physicsType=U.SPRITE,this.padding=new U.Point,this.textBounds=null,this.canvas=PIXI.CanvasPool.create(this),this.context=this.canvas.getContext("2d"),this.colors=[],this.strokeColors=[],this.fontStyles=[],this.fontWeights=[],this.autoRound=!1,this.useAdvancedWrap=!1,this._res=e.renderer.resolution,this._text=n,this._fontComponents=null,this._lineSpacing=0,this._charCount=0,this._width=0,this._height=0,U.Sprite.call(this,e,t,i,PIXI.Texture.fromCanvas(this.canvas)),this.setStyle(r),""!==n&&this.updateText()},U.Text.prototype=Object.create(U.Sprite.prototype),U.Text.prototype.constructor=U.Text,U.Text.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Text.prototype.update=function(){},U.Text.prototype.destroy=function(e){this.texture.destroy(!0),U.Component.Destroy.prototype.destroy.call(this,e)},U.Text.prototype.setShadow=function(e,t,i,n,r,o){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i="rgba(0, 0, 0, 1)"),void 0===n&&(n=0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.style.shadowOffsetX=e,this.style.shadowOffsetY=t,this.style.shadowColor=i,this.style.shadowBlur=n,this.style.shadowStroke=r,this.style.shadowFill=o,this.dirty=!0,this},U.Text.prototype.setStyle=function(e,t){void 0===t&&(t=!1),(e=e||{}).font=e.font||"bold 20pt Arial",e.backgroundColor=e.backgroundColor||null,e.fill=e.fill||"black",e.align=e.align||"left",e.boundsAlignH=e.boundsAlignH||"left",e.boundsAlignV=e.boundsAlignV||"top",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.maxLines=e.maxLines||0,e.shadowOffsetX=e.shadowOffsetX||0,e.shadowOffsetY=e.shadowOffsetY||0,e.shadowColor=e.shadowColor||"rgba(0,0,0,0)",e.shadowBlur=e.shadowBlur||0,e.tabs=e.tabs||0;var i=this.fontToComponents(e.font);return e.fontStyle&&(i.fontStyle=e.fontStyle),e.fontVariant&&(i.fontVariant=e.fontVariant),e.fontWeight&&(i.fontWeight=e.fontWeight),e.fontSize&&("number"==typeof e.fontSize&&(e.fontSize=e.fontSize+"px"),i.fontSize=e.fontSize),this._fontComponents=i,e.font=this.componentsToFont(this._fontComponents),this.style=e,this.dirty=!0,t&&this.updateText(),this},U.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this._res,this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.runWordWrap(this.text));var t=e.split(/(?:\r\n|\r|\n)/),i=this.style.tabs,n=[],r=0,o=this.determineFontProperties(this.style.font),a=t.length;0<this.style.maxLines&&this.style.maxLines<t.length&&(a=this.style.maxLines);for(var s=this._charCount=0;s<a;s++){if(0===i){var p=this.style.strokeThickness+this.padding.x;0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?p+=this.measureLine(t[s]):p+=this.context.measureText(t[s]).width,this.style.wordWrap&&(p-=this.context.measureText(" ").width)}else{var l=t[s].split(/(?:\t)/);p=this.padding.x+this.style.strokeThickness;if(Array.isArray(i))for(var h=0,u=0;u<l.length;u++){var d;d=0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?this.measureLine(l[u]):Math.ceil(this.context.measureText(l[u]).width),0<u&&(h+=i[u-1]),p=h+d}else for(u=0;u<l.length;u++){0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?p+=this.measureLine(l[u]):p+=Math.ceil(this.context.measureText(l[u]).width),p+=this.game.math.snapToCeil(p,i)-p}}n[s]=Math.ceil(p),r=Math.max(r,n[s])}this.canvas.width=r*this._res;var c,_,y=o.fontSize+this.style.strokeThickness+this.padding.y,x=y*a,m=this._lineSpacing;for(m<0&&Math.abs(m)>y&&(m=-y),0!==m&&(x+=0<m?m*t.length:m*(t.length-1)),this.canvas.height=x*this._res,this.context.scale(this._res,this._res),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.style.backgroundColor&&(this.context.fillStyle=this.style.backgroundColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)),this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.textBaseline="alphabetic",this.context.lineWidth=this.style.strokeThickness,this.context.lineCap="round",this.context.lineJoin="round",s=this._charCount=0;s<a;s++)c=this.style.strokeThickness/2,_=this.style.strokeThickness/2+s*y+o.ascent,0<s&&(_+=m*s),"right"===this.style.align?c+=r-n[s]:"center"===this.style.align&&(c+=(r-n[s])/2),this.autoRound&&(c=Math.round(c),_=Math.round(_)),0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?this.updateLine(t[s],c,_):(this.style.stroke&&this.style.strokeThickness&&(this.updateShadow(this.style.shadowStroke),0===i?this.context.strokeText(t[s],c,_):this.renderTabLine(t[s],c,_,!1)),this.style.fill&&(this.updateShadow(this.style.shadowFill),0===i?this.context.fillText(t[s],c,_):this.renderTabLine(t[s],c,_,!0)));this.updateTexture(),this.dirty=!1},U.Text.prototype.renderTabLine=function(e,t,i,n){var r=e.split(/(?:\t)/),o=this.style.tabs,a=0;if(Array.isArray(o))for(var s=0,p=0;p<r.length;p++)0<p&&(s+=o[p-1]),a=t+s,n?this.context.fillText(r[p],a,i):this.context.strokeText(r[p],a,i);else for(p=0;p<r.length;p++){var l=Math.ceil(this.context.measureText(r[p]).width);a=this.game.math.snapToCeil(t,o),n?this.context.fillText(r[p],a,i):this.context.strokeText(r[p],a,i),t=a+l}},U.Text.prototype.updateShadow=function(e){e?(this.context.shadowOffsetX=this.style.shadowOffsetX,this.context.shadowOffsetY=this.style.shadowOffsetY,this.context.shadowColor=this.style.shadowColor,this.context.shadowBlur=this.style.shadowBlur):(this.context.shadowOffsetX=0,this.context.shadowOffsetY=0,this.context.shadowColor=0,this.context.shadowBlur=0)},U.Text.prototype.measureLine=function(e){for(var t=0,i=0;i<e.length;i++){var n=e[i];if(0<this.fontWeights.length||0<this.fontStyles.length){var r=this.fontToComponents(this.context.font);this.fontStyles[this._charCount]&&(r.fontStyle=this.fontStyles[this._charCount]),this.fontWeights[this._charCount]&&(r.fontWeight=this.fontWeights[this._charCount]),this.context.font=this.componentsToFont(r)}this.style.stroke&&this.style.strokeThickness&&(this.strokeColors[this._charCount]&&(this.context.strokeStyle=this.strokeColors[this._charCount]),this.updateShadow(this.style.shadowStroke)),this.style.fill&&(this.colors[this._charCount]&&(this.context.fillStyle=this.colors[this._charCount]),this.updateShadow(this.style.shadowFill)),t+=this.context.measureText(n).width,this._charCount++}return Math.ceil(t)},U.Text.prototype.updateLine=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n];if(0<this.fontWeights.length||0<this.fontStyles.length){var o=this.fontToComponents(this.context.font);this.fontStyles[this._charCount]&&(o.fontStyle=this.fontStyles[this._charCount]),this.fontWeights[this._charCount]&&(o.fontWeight=this.fontWeights[this._charCount]),this.context.font=this.componentsToFont(o)}this.style.stroke&&this.style.strokeThickness&&(this.strokeColors[this._charCount]&&(this.context.strokeStyle=this.strokeColors[this._charCount]),this.updateShadow(this.style.shadowStroke),this.context.strokeText(r,t,i)),this.style.fill&&(this.colors[this._charCount]&&(this.context.fillStyle=this.colors[this._charCount]),this.updateShadow(this.style.shadowFill),this.context.fillText(r,t,i)),t+=this.context.measureText(r).width,this._charCount++}},U.Text.prototype.clearColors=function(){return this.colors=[],this.strokeColors=[],this.dirty=!0,this},U.Text.prototype.clearFontValues=function(){return this.fontStyles=[],this.fontWeights=[],this.dirty=!0,this},U.Text.prototype.addColor=function(e,t){return this.colors[t]=e,this.dirty=!0,this},U.Text.prototype.addStrokeColor=function(e,t){return this.strokeColors[t]=e,this.dirty=!0,this},U.Text.prototype.addFontStyle=function(e,t){return this.fontStyles[t]=e,this.dirty=!0,this},U.Text.prototype.addFontWeight=function(e,t){return this.fontWeights[t]=e,this.dirty=!0,this},U.Text.prototype.precalculateWordWrap=function(e){return this.texture.baseTexture.resolution=this._res,this.context.font=this.style.font,this.runWordWrap(e).split(/(?:\r\n|\r|\n)/)},U.Text.prototype.runWordWrap=function(e){return this.useAdvancedWrap?this.advancedWordWrap(e):this.basicWordWrap(e)},U.Text.prototype.advancedWordWrap=function(e){for(var t=this.context,i=this.style.wordWrapWidth,n="",r=e.replace(/ +/gi," ").split(/\r?\n/gi),o=r.length,a=0;a<o;a++){var s=r[a],p="";if(s=s.replace(/^ *|\s*$/gi,""),t.measureText(s).width<i)n+=s+"\n";else{for(var l=i,h=s.split(" "),u=0;u<h.length;u++){var d=h[u],c=d+" ",_=t.measureText(c).width;if(l<_){if(0===u){for(var y=c;y.length&&(y=y.slice(0,-1),!((_=t.measureText(y).width)<=l)););if(!y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var x=d.substr(y.length);h[u]=x,p+=y}var m=h[u].length?u:u+1,f=h.slice(m).join(" ").replace(/[ \n]*$/gi,"");r[a+1]=f+" "+(r[a+1]||""),o=r.length;break}p+=c,l-=_}n+=p.replace(/[ \n]*$/gi,"")+"\n"}}return n.replace(/[\s|\n]*$/gi,"")},U.Text.prototype.basicWordWrap=function(e){for(var t="",i=e.split("\n"),n=0;n<i.length;n++){for(var r=this.style.wordWrapWidth,o=i[n].split(" "),a=0;a<o.length;a++){var s=this.context.measureText(o[a]).width,p=s+this.context.measureText(" ").width;r<p?(0<a&&(t+="\n"),t+=o[a]+" ",r=this.style.wordWrapWidth-s):(r-=p,t+=o[a]+" ")}n<i.length-1&&(t+="\n")}return t},U.Text.prototype.updateFont=function(e){var t=this.componentsToFont(e);this.style.font!==t&&(this.style.font=t,this.dirty=!0,this.parent&&this.updateTransform())},U.Text.prototype.fontToComponents=function(e){var t=e.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/);if(t){var i=t[5].trim();return/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(i)||/['",]/.exec(i)||(i="'"+i+"'"),{font:e,fontStyle:t[1]||"normal",fontVariant:t[2]||"normal",fontWeight:t[3]||"normal",fontSize:t[4]||"medium",fontFamily:i}}return{font:e}},U.Text.prototype.componentsToFont=function(e){var t,i=[];return(t=e.fontStyle)&&"normal"!==t&&i.push(t),(t=e.fontVariant)&&"normal"!==t&&i.push(t),(t=e.fontWeight)&&"normal"!==t&&i.push(t),(t=e.fontSize)&&"medium"!==t&&i.push(t),(t=e.fontFamily)&&i.push(t),i.length||i.push(e.font),i.join(" ")},U.Text.prototype.setText=function(e,t){return void 0===t&&(t=!1),this.text=e.toString()||"",t?this.updateText():this.dirty=!0,this},U.Text.prototype.parseList=function(e){if(!Array.isArray(e))return this;for(var t="",i=0;i<e.length;i++)Array.isArray(e[i])?(t+=e[i].join("\t"),i<e.length-1&&(t+="\n")):(t+=e[i],i<e.length-1&&(t+="\t"));return this.text=t,this.dirty=!0,this},U.Text.prototype.setTextBounds=function(e,t,i,n){return void 0===e?this.textBounds=null:(this.textBounds?this.textBounds.setTo(e,t,i,n):this.textBounds=new U.Rectangle(e,t,i,n),this.style.wordWrapWidth>i&&(this.style.wordWrapWidth=i)),this.updateTexture(),this},U.Text.prototype.updateTexture=function(){var e=this.texture.baseTexture,t=this.texture.crop,i=this.texture.frame,n=this.canvas.width,r=this.canvas.height;if(e.width=n,e.height=r,t.width=n,t.height=r,i.width=n,i.height=r,this.texture.width=n,this.texture.height=r,this._width=n,this._height=r,this.textBounds){var o=this.textBounds.x,a=this.textBounds.y;"right"===this.style.boundsAlignH?o+=this.textBounds.width-this.canvas.width/this.resolution:"center"===this.style.boundsAlignH&&(o+=this.textBounds.halfWidth-this.canvas.width/this.resolution/2),"bottom"===this.style.boundsAlignV?a+=this.textBounds.height-this.canvas.height/this.resolution:"middle"===this.style.boundsAlignV&&(a+=this.textBounds.halfHeight-this.canvas.height/this.resolution/2),this.pivot.x=-o,this.pivot.y=-a}this.renderable=0!==n&&0!==r,this.texture.requiresReTint=!0,this.texture.baseTexture.dirty()},U.Text.prototype._renderWebGL=function(e){this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype._renderWebGL.call(this,e)},U.Text.prototype._renderCanvas=function(e){this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype._renderCanvas.call(this,e)},U.Text.prototype.determineFontProperties=function(e){var t=U.Text.fontPropertiesCache[e];if(!t){t={};var i=U.Text.fontPropertiesCanvas,n=U.Text.fontPropertiesContext;n.font=e;var r=Math.ceil(n.measureText("|Mq").width),o=Math.ceil(n.measureText("|Mq").width),a=2*o;if(o=1.4*o|0,i.width=r,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,r,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|Mq",0,o),!n.getImageData(0,0,r,a))return t.ascent=o,t.descent=o+6,t.fontSize=t.ascent+t.descent,U.Text.fontPropertiesCache[e]=t;var s,p,l=n.getImageData(0,0,r,a).data,h=l.length,u=4*r,d=0,c=!1;for(s=0;s<o;s++){for(p=0;p<u;p+=4)if(255!==l[d+p]){c=!0;break}if(c)break;d+=u}for(t.ascent=o-s,d=h-u,c=!1,s=a;o<s;s--){for(p=0;p<u;p+=4)if(255!==l[d+p]){c=!0;break}if(c)break;d-=u}t.descent=s-o,t.descent+=6,t.fontSize=t.ascent+t.descent,U.Text.fontPropertiesCache[e]=t}return t},U.Text.prototype.getBounds=function(e){return this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype.getBounds.call(this,e)},Object.defineProperty(U.Text.prototype,"text",{get:function(){return this._text},set:function(e){e!==this._text&&(this._text=e.toString()||"",this.dirty=!0,this.parent&&this.updateTransform())}}),Object.defineProperty(U.Text.prototype,"cssFont",{get:function(){return this.componentsToFont(this._fontComponents)},set:function(e){e=e||"bold 20pt Arial",this._fontComponents=this.fontToComponents(e),this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"font",{get:function(){return this._fontComponents.fontFamily},set:function(e){e=(e=e||"Arial").trim(),/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(e)||/['",]/.exec(e)||(e="'"+e+"'"),this._fontComponents.fontFamily=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontSize",{get:function(){var e=this._fontComponents.fontSize;return e&&/(?:^0$|px$)/.exec(e)?parseInt(e,10):e},set:function(e){"number"==typeof(e=e||"0")&&(e+="px"),this._fontComponents.fontSize=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontWeight",{get:function(){return this._fontComponents.fontWeight||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontWeight=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontStyle",{get:function(){return this._fontComponents.fontStyle||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontStyle=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontVariant",{get:function(){return this._fontComponents.fontVariant||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontVariant=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fill",{get:function(){return this.style.fill},set:function(e){e!==this.style.fill&&(this.style.fill=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"align",{get:function(){return this.style.align},set:function(e){e!==this.style.align&&(this.style.align=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"resolution",{get:function(){return this._res},set:function(e){e!==this._res&&(this._res=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"tabs",{get:function(){return this.style.tabs},set:function(e){e!==this.style.tabs&&(this.style.tabs=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"boundsAlignH",{get:function(){return this.style.boundsAlignH},set:function(e){e!==this.style.boundsAlignH&&(this.style.boundsAlignH=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"boundsAlignV",{get:function(){return this.style.boundsAlignV},set:function(e){e!==this.style.boundsAlignV&&(this.style.boundsAlignV=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"stroke",{get:function(){return this.style.stroke},set:function(e){e!==this.style.stroke&&(this.style.stroke=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"strokeThickness",{get:function(){return this.style.strokeThickness},set:function(e){e!==this.style.strokeThickness&&(this.style.strokeThickness=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"wordWrap",{get:function(){return this.style.wordWrap},set:function(e){e!==this.style.wordWrap&&(this.style.wordWrap=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"wordWrapWidth",{get:function(){return this.style.wordWrapWidth},set:function(e){e!==this.style.wordWrapWidth&&(this.style.wordWrapWidth=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(e){e!==this._lineSpacing&&(this._lineSpacing=parseFloat(e),this.dirty=!0,this.parent&&this.updateTransform())}}),Object.defineProperty(U.Text.prototype,"shadowOffsetX",{get:function(){return this.style.shadowOffsetX},set:function(e){e!==this.style.shadowOffsetX&&(this.style.shadowOffsetX=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowOffsetY",{get:function(){return this.style.shadowOffsetY},set:function(e){e!==this.style.shadowOffsetY&&(this.style.shadowOffsetY=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowColor",{get:function(){return this.style.shadowColor},set:function(e){e!==this.style.shadowColor&&(this.style.shadowColor=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowBlur",{get:function(){return this.style.shadowBlur},set:function(e){e!==this.style.shadowBlur&&(this.style.shadowBlur=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowStroke",{get:function(){return this.style.shadowStroke},set:function(e){e!==this.style.shadowStroke&&(this.style.shadowStroke=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowFill",{get:function(){return this.style.shadowFill},set:function(e){e!==this.style.shadowFill&&(this.style.shadowFill=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(U.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),U.Text.fontPropertiesCache={},U.Text.fontPropertiesCanvas=document.createElement("canvas"),U.Text.fontPropertiesContext=U.Text.fontPropertiesCanvas.getContext("2d"),U.BitmapText=function(e,t,i,n,r,o,a){t=t||0,i=i||0,n=n||"",r=r||"",o=o||32,a=a||"left",PIXI.DisplayObjectContainer.call(this),this.type=U.BITMAPTEXT,this.physicsType=U.SPRITE,this.textWidth=0,this.textHeight=0,this.anchor=new U.Point,this._prevAnchor=new U.Point,this._glyphs=[],this._maxWidth=0,this._text=r.toString()||"",this._data=e.cache.getBitmapFont(n),this._font=n,this._fontSize=o,this._align=a,this._tint=16777215,this.updateText(),this.dirty=!1,U.Component.Core.init.call(this,e,t,i,"",null)},U.BitmapText.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.BitmapText.prototype.constructor=U.BitmapText,U.Component.Core.install.call(U.BitmapText.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]),U.BitmapText.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.BitmapText.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.BitmapText.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.BitmapText.prototype.preUpdateCore=U.Component.Core.preUpdate,U.BitmapText.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.BitmapText.prototype.postUpdate=function(){U.Component.PhysicsBody.postUpdate.call(this),U.Component.FixedToCamera.postUpdate.call(this),this.body&&this.body.type===U.Physics.ARCADE&&(this.textWidth===this.body.sourceWidth&&this.textHeight===this.body.sourceHeight||this.body.setSize(this.textWidth,this.textHeight))},U.BitmapText.prototype.setText=function(e){this.text=e},U.BitmapText.prototype.scanLine=function(e,t,i){for(var n=0,r=0,o=-1,a=0,s=null,p=0<this._maxWidth?this._maxWidth:null,l=[],h=0;h<i.length;h++){var u=h===i.length-1;if(/(?:\r\n|\r|\n)/.test(i.charAt(h)))return{width:r,text:i.substr(0,h),end:u,chars:l};var d,c=i.charCodeAt(h),_=e.chars[c];void 0===_&&(c=32,_=e.chars[c]);var y=s&&_.kerning[s]?_.kerning[s]:0;if(/(\s)/.test(i.charAt(h))&&(o=h,a=r),d=(y+_.texture.width+_.xOffset)*t,p&&p<=r+d&&-1<o)return{width:a||r,text:i.substr(0,h-(h-o)),end:u,chars:l};r+=(_.xAdvance+y)*t,l.push(n+(_.xOffset+y)*t),n+=(_.xAdvance+y)*t,s=c}return{width:r,text:i,end:u,chars:l}},U.BitmapText.prototype.cleanText=function(e,t){void 0===t&&(t="");var i=this._data.font;if(!i)return"";for(var n=e.replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),r=0;r<n.length;r++){for(var o="",a=n[r],s=0;s<a.length;s++)o=i.chars[a.charCodeAt(s)]?o.concat(a[s]):o.concat(t);n[r]=o}return n.join("\n")},U.BitmapText.prototype.updateText=function(){var e=this._data.font;if(e){var t=this.text,i=this._fontSize/e.size,n=[],r=0;this.textWidth=0;do{(h=this.scanLine(e,i,t)).y=r,n.push(h),h.width>this.textWidth&&(this.textWidth=h.width),r+=e.lineHeight*i,t=t.substr(h.text.length+1)}while(!1===h.end);this.textHeight=r;for(var o=0,a=0,s=this.textWidth*this.anchor.x,p=this.textHeight*this.anchor.y,l=0;l<n.length;l++){var h=n[l];"right"===this._align?a=this.textWidth-h.width:"center"===this._align&&(a=(this.textWidth-h.width)/2);for(var u=0;u<h.text.length;u++){var d=h.text.charCodeAt(u),c=e.chars[d];void 0===c&&(d=32,c=e.chars[d]);var _=this._glyphs[o];_?_.texture=c.texture:((_=new PIXI.Sprite(c.texture)).name=h.text[u],this._glyphs.push(_)),_.position.x=h.chars[u]+a-s,_.position.y=h.y+c.yOffset*i-p,_.scale.set(i),_.tint=this.tint,_.texture.requiresReTint=!0,_.parent||this.addChild(_),o++}}for(l=o;l<this._glyphs.length;l++)this.removeChild(this._glyphs[l])}},U.BitmapText.prototype.purgeGlyphs=function(){for(var e=this._glyphs.length,t=[],i=0;i<this._glyphs.length;i++)this._glyphs[i].parent!==this?this._glyphs[i].destroy():t.push(this._glyphs[i]);return this._glyphs=[],this._glyphs=t,this.updateText(),e-t.length},U.BitmapText.prototype.updateTransform=function(){!this.dirty&&this.anchor.equals(this._prevAnchor)||(this.updateText(),this.dirty=!1,this._prevAnchor.copyFrom(this.anchor)),PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)},Object.defineProperty(U.BitmapText.prototype,"align",{get:function(){return this._align},set:function(e){e===this._align||"left"!==e&&"center"!==e&&"right"!==e||(this._align=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"font",{get:function(){return this._font},set:function(e){e!==this._font&&(this._font=e.trim(),this._data=this.game.cache.getBitmapFont(this._font),this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){(e=parseInt(e,10))!==this._fontSize&&0<e&&(this._fontSize=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"text",{get:function(){return this._text},set:function(e){e!==this._text&&(this._text=e.toString()||"",this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){e!==this._maxWidth&&(this._maxWidth=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"smoothed",{get:function(){return!this._data.base.scaleMode},set:function(e){this._data.base.scaleMode=e?0:1}}),U.RetroFont=function(e,t,i,n,r,o,a,s,p,l){if(!e.cache.checkImageKey(t))return!1;null!=o||(o=e.cache.getImage(t).width/i),this.characterWidth=i,this.characterHeight=n,this.characterSpacingX=a||0,this.characterSpacingY=s||0,this.characterPerRow=o,this.offsetX=p||0,this.offsetY=l||0,this.align="left",this.multiLine=!1,this.autoUpperCase=!0,this.customSpacingX=0,this.customSpacingY=0,this.fixedWidth=0,this.fontSet=e.cache.getImage(t),this._text="",this.grabData=[],this.frameData=new U.FrameData;for(var h=this.offsetX,u=this.offsetY,d=0,c=0;c<r.length;c++){var _=this.frameData.addFrame(new U.Frame(c,h,u,this.characterWidth,this.characterHeight));this.grabData[r.charCodeAt(c)]=_.index,++d===this.characterPerRow?(d=0,h=this.offsetX,u+=this.characterHeight+this.characterSpacingY):h+=this.characterWidth+this.characterSpacingX}e.cache.updateFrameData(t,this.frameData),this.stamp=new U.Image(e,0,0,t,0),U.RenderTexture.call(this,e,100,100,"",U.scaleModes.NEAREST),this.type=U.RETROFONT},U.RetroFont.prototype=Object.create(U.RenderTexture.prototype),U.RetroFont.prototype.constructor=U.RetroFont,U.RetroFont.ALIGN_LEFT="left",U.RetroFont.ALIGN_RIGHT="right",U.RetroFont.ALIGN_CENTER="center",U.RetroFont.TEXT_SET1=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",U.RetroFont.TEXT_SET2=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",U.RetroFont.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",U.RetroFont.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",U.RetroFont.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",U.RetroFont.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",U.RetroFont.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",U.RetroFont.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",U.RetroFont.prototype.setFixedWidth=function(e,t){void 0===t&&(t="left"),this.fixedWidth=e,this.align=t},U.RetroFont.prototype.setText=function(e,t,i,n,r,o){this.multiLine=t||!1,this.customSpacingX=i||0,this.customSpacingY=n||0,this.align=r||"left",this.autoUpperCase=!o,0<e.length&&(this.text=e)},U.RetroFont.prototype.buildRetroFontText=function(){var e=0,t=0;if(this.clear(),this.multiLine){var i=this._text.split("\n");0<this.fixedWidth?this.resize(this.fixedWidth,i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0):this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0);for(var n=0;n<i.length;n++)e=0,this.align===U.RetroFont.ALIGN_RIGHT?e=this.width-i[n].length*(this.characterWidth+this.customSpacingX):this.align===U.RetroFont.ALIGN_CENTER&&(e=this.width/2-i[n].length*(this.characterWidth+this.customSpacingX)/2,e+=this.customSpacingX/2),e<0&&(e=0),this.pasteLine(i[n],e,t,this.customSpacingX),t+=this.characterHeight+this.customSpacingY}else 0<this.fixedWidth?this.resize(this.fixedWidth,this.characterHeight,!0):this.resize(this._text.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0),e=0,this.align===U.RetroFont.ALIGN_RIGHT?e=this.width-this._text.length*(this.characterWidth+this.customSpacingX):this.align===U.RetroFont.ALIGN_CENTER&&(e=this.width/2-this._text.length*(this.characterWidth+this.customSpacingX)/2,e+=this.customSpacingX/2),e<0&&(e=0),this.pasteLine(this._text,e,0,this.customSpacingX);this.requiresReTint=!0},U.RetroFont.prototype.pasteLine=function(e,t,i,n){for(var r=0;r<e.length;r++)if(" "===e.charAt(r))t+=this.characterWidth+n;else if(0<=this.grabData[e.charCodeAt(r)]&&(this.stamp.frame=this.grabData[e.charCodeAt(r)],this.renderXY(this.stamp,t,i,!1),(t+=this.characterWidth+n)>this.width))break},U.RetroFont.prototype.getLongestLine=function(){var e=0;if(0<this._text.length)for(var t=this._text.split("\n"),i=0;i<t.length;i++)t[i].length>e&&(e=t[i].length);return e},U.RetroFont.prototype.removeUnsupportedCharacters=function(e){for(var t="",i=0;i<this._text.length;i++){var n=this._text[i],r=n.charCodeAt(0);(0<=this.grabData[r]||!e&&"\n"===n)&&(t=t.concat(n))}return t},U.RetroFont.prototype.updateOffset=function(e,t){if(this.offsetX!==e||this.offsetY!==t){for(var i=e-this.offsetX,n=t-this.offsetY,r=this.game.cache.getFrameData(this.stamp.key).getFrames(),o=r.length;o--;)r[o].x+=i,r[o].y+=n;this.buildRetroFontText()}},Object.defineProperty(U.RetroFont.prototype,"text",{get:function(){return this._text},set:function(e){var t;(t=this.autoUpperCase?e.toUpperCase():e)!==this._text&&(this._text=t,this.removeUnsupportedCharacters(this.multiLine),this.buildRetroFontText())}}),Object.defineProperty(U.RetroFont.prototype,"smoothed",{get:function(){return this.stamp.smoothed},set:function(e){this.stamp.smoothed=e,this.buildRetroFontText()}}),U.Rope=function(e,t,i,n,r,o){this.points=[],this.points=o,this._hasUpdateAnimation=!1,this._updateAnimationCallback=null,t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.ROPE,PIXI.Rope.call(this,U.Cache.DEFAULT,this.points),U.Component.Core.init.call(this,e,t,i,n,r)},U.Rope.prototype=Object.create(PIXI.Rope.prototype),U.Rope.prototype.constructor=U.Rope,U.Component.Core.install.call(U.Rope.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]),U.Rope.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Rope.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Rope.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Rope.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Rope.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Rope.prototype.update=function(){this._hasUpdateAnimation&&this.updateAnimation.call(this)},U.Rope.prototype.reset=function(e,t){return U.Component.Reset.prototype.reset.call(this,e,t),this},Object.defineProperty(U.Rope.prototype,"updateAnimation",{get:function(){return this._updateAnimation},set:function(e){e&&"function"==typeof e?(this._hasUpdateAnimation=!0,this._updateAnimation=e):(this._hasUpdateAnimation=!1,this._updateAnimation=null)}}),Object.defineProperty(U.Rope.prototype,"segments",{get:function(){for(var e,t,i,n,r,o,a,s,p=[],l=0;l<this.points.length;l++)e=4*l,t=this.vertices[e]*this.scale.x,i=this.vertices[e+1]*this.scale.y,n=this.vertices[e+4]*this.scale.x,r=this.vertices[e+3]*this.scale.y,o=U.Math.difference(t,n),a=U.Math.difference(i,r),t+=this.world.x,i+=this.world.y,s=new U.Rectangle(t,i,o,a),p.push(s);return p}}),U.TileSprite=function(e,t,i,n,r,o,a){t=t||0,i=i||0,n=n||256,r=r||256,o=o||null,a=a||null,this.type=U.TILESPRITE,this.physicsType=U.SPRITE,this._scroll=new U.Point;var s=e.cache.getImage("__default",!0);PIXI.TilingSprite.call(this,new PIXI.Texture(s.base),n,r),U.Component.Core.init.call(this,e,t,i,o,a)},U.TileSprite.prototype=Object.create(PIXI.TilingSprite.prototype),U.TileSprite.prototype.constructor=U.TileSprite,U.Component.Core.install.call(U.TileSprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","Smoothed"]),U.TileSprite.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.TileSprite.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.TileSprite.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.TileSprite.prototype.preUpdateCore=U.Component.Core.preUpdate,U.TileSprite.prototype.preUpdate=function(){return 0!==this._scroll.x&&(this.tilePosition.x+=this._scroll.x*this.game.time.physicsElapsed),0!==this._scroll.y&&(this.tilePosition.y+=this._scroll.y*this.game.time.physicsElapsed),!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.TileSprite.prototype.autoScroll=function(e,t){this._scroll.set(e,t)},U.TileSprite.prototype.stopScroll=function(){this._scroll.set(0,0)},U.TileSprite.prototype.destroy=function(e){U.Component.Destroy.prototype.destroy.call(this,e),PIXI.TilingSprite.prototype.destroy.call(this)},U.TileSprite.prototype.reset=function(e,t){return U.Component.Reset.prototype.reset.call(this,e,t),this.tilePosition.x=0,this.tilePosition.y=0,this},U.Device=function(){this.deviceReadyAt=0,this.initialized=!1,this.desktop=!1,this.iOS=!1,this.iOSVersion=0,this.cocoonJS=!1,this.cocoonJSApp=!1,this.wechatMinigame=!1,this.cordova=!1,this.node=!1,this.nodeWebkit=!1,this.electron=!1,this.ejecta=!1,this.crosswalk=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.windowsPhone=!1,this.canvas=!1,this.canvasBitBltShift=null,this.webGL=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.worker=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.vibration=!1,this.getUserMedia=!0,this.quirksMode=!1,this.touch=!1,this.mspointer=!1,this.wheelEvent=null,this.arora=!1,this.chrome=!1,this.chromeVersion=0,this.epiphany=!1,this.firefox=!1,this.firefoxVersion=0,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.edge=!1,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.safariVersion=0,this.webApp=!1,this.silk=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.dolby=!1,this.oggVideo=!1,this.h264Video=!1,this.mp4Video=!1,this.webmVideo=!1,this.vp9Video=!1,this.hlsVideo=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this.LITTLE_ENDIAN=!1,this.support32bit=!1,this.fullscreen=!1,this.requestFullscreen="",this.cancelFullscreen="",this.fullscreenKeyboard=!1},U.Device=new U.Device,U.Device.onInitialized=new U.Signal,U.Device.whenReady=function(e,t,i){var n=this._readyCheck;if(this.deviceReadyAt||!n)e.call(t,this);else if(n._monitor||i)n._queue=n._queue||[],n._queue.push([e,t]);else{n._monitor=n.bind(this),n._queue=n._queue||[],n._queue.push([e,t]);var r=void 0!==window.cordova,o=navigator.isCocoonJS;"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(n._monitor,0):r&&!o?document.addEventListener("deviceready",n._monitor,!1):(document.addEventListener("DOMContentLoaded",n._monitor,!1),window.addEventListener("load",n._monitor,!1))}},U.Device._readyCheck=function(){var e=this._readyCheck;if(document.body){if(!this.deviceReadyAt){this.deviceReadyAt=Date.now(),document.removeEventListener("deviceready",e._monitor),document.removeEventListener("DOMContentLoaded",e._monitor),window.removeEventListener("load",e._monitor),this._initialize(),this.initialized=!0,this.onInitialized.dispatch(this);for(var t;t=e._queue.shift();){var i=t[0],n=t[1];i.call(n,this)}this._readyCheck=null,this._initialize=null,this.onInitialized=null}}else window.setTimeout(e._monitor,20)},U.Device._initialize=function(){var e,t,i,n,r=this;(function(){var e=navigator.userAgent;/Playstation Vita/.test(e)?r.vita=!0:/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?r.kindle=!0:/Android/.test(e)?r.android=!0:/CrOS/.test(e)?r.chromeOS=!0:/iP[ao]d|iPhone/i.test(e)?(r.iOS=!0,navigator.appVersion.match(/OS (\d+)/),r.iOSVersion=parseInt(RegExp.$1,10)):/Linux/.test(e)?r.linux=!0:/Mac OS/.test(e)?r.macOS=!0:/Windows/.test(e)&&(r.windows=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(r.android=!1,r.iOS=!1,r.macOS=!1,r.windows=!0,r.windowsPhone=!0);var t=/Silk/.test(e);(r.windows||r.macOS||r.linux&&!t||r.chromeOS)&&(r.desktop=!0),(r.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(r.desktop=!1)})(),function(){var e=navigator.userAgent;if(/Arora/.test(e)?r.arora=!0:/Edge\/\d+/.test(e)?r.edge=!0:/Chrome\/(\d+)/.test(e)&&!r.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(e)?r.epiphany=!0:/Firefox\D+(\d+)/.test(e)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(e)&&r.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(e)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(e)?r.midori=!0:/Opera/.test(e)?r.opera=!0:/Safari\/(\d+)/.test(e)&&!r.windowsPhone?(r.safari=!0,/Version\/(\d+)\./.test(e)&&(r.safariVersion=parseInt(RegExp.$1,10))):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(e)&&(r.silk=!0),navigator.standalone&&(r.webApp=!0),void 0!==window.cordova&&(r.cordova=!0),"undefined"!=typeof process&&"undefined"!=typeof require&&(r.node=!0),r.node&&"object"==typeof process.versions&&(r.nodeWebkit=!!process.versions["node-webkit"],r.electron=!!process.versions.electron),navigator.isCocoonJS&&(r.cocoonJS=!0),void 0!==window.wx&&(r.wechatMinigame=!0),r.cocoonJS)try{r.cocoonJSApp="undefined"!=typeof CocoonJS}catch(e){r.cocoonJSApp=!1}void 0!==window.ejecta&&(r.ejecta=!0),/Crosswalk/.test(e)&&(r.crosswalk=!0)}(),function(){r.audioData=!!window.Audio,r.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var e=document.createElement("audio");try{if(e.canPlayType&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(r.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(r.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(r.mp3=!0),e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(r.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(r.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(r.webm=!0),""!==e.canPlayType('audio/mp4;codecs="ec-3"')))if(r.edge)r.dolby=!0;else if(r.safari&&9<=r.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var t=parseInt(RegExp.$1,10),i=parseInt(RegExp.$2,10);(10===t&&11<=i||10<t)&&(r.dolby=!0)}}catch(e){}}(),function(){var e=document.createElement("video");try{e.canPlayType&&(e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(r.oggVideo=!0),e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.h264Video=!0,r.mp4Video=!0),e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(r.webmVideo=!0),e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(r.vp9Video=!0),e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.hlsVideo=!0))}catch(e){}}(),function(){var e,t=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var n in document.body.insertBefore(t,null),i)void 0!==t.style[n]&&(t.style[n]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(i[n]));document.body.removeChild(t),r.css3D=void 0!==e&&0<e.length&&"none"!==e}(),r.pixelRatio=window.devicePixelRatio||1,r.iPhone=-1!==navigator.userAgent.toLowerCase().indexOf("iphone"),r.iPhone4=2===r.pixelRatio&&r.iPhone,r.iPad=!!(!(n=-1!==navigator.userAgent.toLowerCase().indexOf("ipad"))&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints)||n,"undefined"!=typeof Int8Array?r.typedArray=!0:r.typedArray=!1,"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(r.littleEndian=(e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e),t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===i[0]||2712847316!==i[0]&&null),r.LITTLE_ENDIAN=r.littleEndian),r.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==r.littleEndian&&function(){if(void 0===Uint8ClampedArray)return!1;var e=PIXI.CanvasPool.create(this,1,1).getContext("2d");if(!e)return!1;var t=e.createImageData(1,1);return PIXI.CanvasPool.remove(this),t.data instanceof Uint8ClampedArray}(),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),function(){r.canvas=!!window.CanvasRenderingContext2D||r.cocoonJS;try{r.localStorage=!!localStorage.getItem}catch(t){r.localStorage=!1}r.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),r.fileSystem=!!window.requestFileSystem;var t={stencil:!0};r.webGL=function(){try{var e=document.createElement("canvas");return e.screencanvas=!1,!!window.WebGLRenderingContext&&(e.getContext("webgl",t)||e.getContext("experimental-webgl",t))}catch(e){return!1}}(),r.webGL=!!r.webGL,r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,r.quirksMode="CSS1Compat"!==document.compatMode,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,r.firefox&&r.firefoxVersion<21&&(r.getUserMedia=!1),!r.iOS&&(r.ie||r.firefox||r.chrome)&&(r.canvasBitBltShift=!0),(r.safari||r.mobileSafari)&&(r.canvasBitBltShift=!1)}(),function(){for(var e=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],t=document.createElement("div"),i=0;i<e.length;i++)if(t[e[i]]){r.fullscreen=!0,r.requestFullscreen=e[i];break}var n=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(r.fullscreen)for(i=0;i<n.length;i++)if(document[n[i]]){r.cancelFullscreen=n[i];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(r.fullscreenKeyboard=!0)}(),("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&1<=window.navigator.maxTouchPoints)&&(r.touch=!0),(window.PointerEvent||window.MSPointerEvent||window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(r.mspointer=!0),r.cocoonJS||("onwheel"in window||r.ie&&"WheelEvent"in window?r.wheelEvent="wheel":"onmousewheel"in window?r.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(r.wheelEvent="DOMMouseScroll"))},U.Device.canPlayAudio=function(e){return!!("mp3"===e&&this.mp3||"ogg"===e&&(this.ogg||this.opus)||"m4a"===e&&this.m4a||"opus"===e&&this.opus||"wav"===e&&this.wav||"webm"===e&&this.webm||"mp4"===e&&this.dolby)},U.Device.canPlayVideo=function(e){return!!("webm"===e&&(this.webmVideo||this.vp9Video)||"mp4"===e&&(this.mp4Video||this.h264Video)||("ogg"===e||"ogv"===e)&&this.oggVideo||"mpeg"===e&&this.hlsVideo)},U.Device.isConsoleOpen=function(){return!(!window.console||!window.console.firebug)||!(!window.console||(console.clear,!console.profiles))&&0<console.profiles.length},U.Device.isAndroidStockBrowser=function(){var e=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);return e&&e[1]<537},U.Canvas={create:function(e,t,i,n,r){t=t||256,i=i||256;var o=r?document.createElement("canvas"):PIXI.CanvasPool.create(e,t,i);return"string"==typeof n&&""!==n&&(o.id=n),o.width=t,o.height=i,o.style.display="block",o},setBackgroundColor:function(e,t){return t=t||"rgb(0,0,0)",e.style.backgroundColor=t,e},setTouchAction:function(e,t){return t=t||"none",e.style.msTouchAction=t,e.style["ms-touch-action"]=t,e.style["touch-action"]=t,e},setUserSelect:function(e,t){return t=t||"none",e.style["-webkit-touch-callout"]=t,e.style["-webkit-user-select"]=t,e.style["-khtml-user-select"]=t,e.style["-moz-user-select"]=t,e.style["-ms-user-select"]=t,e.style["user-select"]=t,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e},addToDOM:function(e,t,i){var n;return void 0===i&&(i=!0),t&&("string"==typeof t?n=document.getElementById(t):"object"==typeof t&&1===t.nodeType&&(n=t)),n||(n=document.body),i&&n.style&&(n.style.overflow="hidden"),n.appendChild(e),e},removeFromDOM:function(e){e.parentNode&&e.parentNode.removeChild(e)},setTransform:function(e,t,i,n,r,o,a){return e.setTransform(n,o,a,r,t,i),e},setSmoothingEnabled:function(e,t){var i=U.Canvas.getSmoothingPrefix(e);return i&&(e[i]=t),e},getSmoothingPrefix:function(e){var t=["i","webkitI","msI","mozI","oI"];for(var i in t){var n=t[i]+"mageSmoothingEnabled";if(n in e)return n}return null},getSmoothingEnabled:function(e){var t=U.Canvas.getSmoothingPrefix(e);if(t)return e[t]},setImageRenderingCrisp:function(e){for(var t=["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"],i=0;i<t.length;i++)e.style["image-rendering"]=t[i];return e.style.msInterpolationMode="nearest-neighbor",e},setImageRenderingBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}},U.RequestAnimationFrame=function(e,t){void 0===t&&(t=!1),this.game=e,this.isRunning=!1,this.forceSetTimeOut=t;for(var i=["ms","moz","webkit","o"],n=0;n<i.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null},U.RequestAnimationFrame.prototype={start:function(){this.isRunning=!0;var t=this;!window.requestAnimationFrame||this.forceSetTimeOut?(this._isSetTimeOut=!0,this._onLoop=function(){return t.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(e){return t.updateRAF(e)},this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateRAF:function(e){this.isRunning&&(this.game.update(Math.floor(e)),this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateSetTimeout:function(){this.isRunning&&(this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall))},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return!1===this._isSetTimeOut}},U.RequestAnimationFrame.prototype.constructor=U.RequestAnimationFrame,U.Math={PI2:2*Math.PI,between:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},fuzzyEqual:function(e,t,i){return void 0===i&&(i=1e-4),Math.abs(e-t)<i},fuzzyLessThan:function(e,t,i){return void 0===i&&(i=1e-4),e<t+i},fuzzyGreaterThan:function(e,t,i){return void 0===i&&(i=1e-4),t-i<e},fuzzyCeil:function(e,t){return void 0===t&&(t=1e-4),Math.ceil(e-t)},fuzzyFloor:function(e,t){return void 0===t&&(t=1e-4),Math.floor(e+t)},average:function(){for(var e=0,t=arguments.length,i=0;i<t;i++)e+=+arguments[i];return e/t},shear:function(e){return e%1},snapTo:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.round(e/t)))},snapToFloor:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.floor(e/t)))},snapToCeil:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.ceil(e/t)))},roundTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.round(e*n)/n},floorTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.floor(e*n)/n},ceilTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.ceil(e*n)/n},rotateToAngle:function(e,t,i){return void 0===i&&(i=.05),e===t||(Math.abs(t-e)<=i||Math.abs(t-e)>=U.Math.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=U.Math.PI2:t-=U.Math.PI2),e<t?e+=i:t<e&&(e-=i))),e},getShortestAngle:function(e,t){var i=t-e;return 0===i?0:i-360*Math.floor((i- -180)/360)},angleBetween:function(e,t,i,n){return Math.atan2(n-t,i-e)},angleBetweenY:function(e,t,i,n){return Math.atan2(i-e,n-t)},angleBetweenPoints:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},angleBetweenPointsY:function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)},reverseAngle:function(e){return this.normalizeAngle(e+Math.PI,!0)},normalizeAngle:function(e){return 0<=(e%=2*Math.PI)?e:e+2*Math.PI},maxAdd:function(e,t,i){return Math.min(e+t,i)},minSub:function(e,t,i){return Math.max(e-t,i)},wrap:function(e,t,i){var n=i-t;if(n<=0)return 0;var r=(e-t)%n;return r<0&&(r+=n),r+t},wrapValue:function(e,t,i){return((e=Math.abs(e))+(t=Math.abs(t)))%(i=Math.abs(i))},isOdd:function(e){return!!(1&e)},isEven:function(e){return!(1&e)},min:function(){if(1===arguments.length&&"object"==typeof arguments[0])var e=arguments[0];else e=arguments;for(var t=1,i=0,n=e.length;t<n;t++)e[t]<e[i]&&(i=t);return e[i]},max:function(){if(1===arguments.length&&"object"==typeof arguments[0])var e=arguments[0];else e=arguments;for(var t=1,i=0,n=e.length;t<n;t++)e[t]>e[i]&&(i=t);return e[i]},minProperty:function(e){if(2===arguments.length&&"object"==typeof arguments[1])var t=arguments[1];else t=arguments.slice(1);for(var i=1,n=0,r=t.length;i<r;i++)t[i][e]<t[n][e]&&(n=i);return t[n][e]},maxProperty:function(e){if(2===arguments.length&&"object"==typeof arguments[1])var t=arguments[1];else t=arguments.slice(1);for(var i=1,n=0,r=t.length;i<r;i++)t[i][e]>t[n][e]&&(n=i);return t[n][e]},wrapAngle:function(e,t){return t?this.wrap(e,-Math.PI,Math.PI):this.wrap(e,-180,180)},linearInterpolation:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n);return t<0?this.linear(e[0],e[1],n):1<t?this.linear(e[i],e[i-1],i-n):this.linear(e[r],e[i<r+1?i:r+1],n-r)},bezierInterpolation:function(e,t){for(var i=0,n=e.length-1,r=0;r<=n;r++)i+=Math.pow(1-t,n-r)*Math.pow(t,r)*e[r]*this.bernstein(n,r);return i},catmullRomInterpolation:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n);return e[0]===e[i]?(t<0&&(r=Math.floor(n=i*(1+t))),this.catmullRom(e[(r-1+i)%i],e[r],e[(r+1)%i],e[(r+2)%i],n-r)):t<0?e[0]-(this.catmullRom(e[0],e[0],e[1],e[1],-n)-e[0]):1<t?e[i]-(this.catmullRom(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):this.catmullRom(e[r?r-1:0],e[r],e[i<r+1?i:r+1],e[i<r+2?i:r+2],n-r)},linear:function(e,t,i){return(t-e)*i+e},bernstein:function(e,t){return this.factorial(e)/this.factorial(t)/this.factorial(e-t)},factorial:function(e){if(0===e)return 1;for(var t=e;--e;)t*=e;return t},catmullRom:function(e,t,i,n,r){var o=.5*(i-e),a=.5*(n-t),s=r*r;return(2*t-2*i+o+a)*(r*s)+(-3*t+3*i-2*o-a)*s+o*r+t},difference:function(e,t){return Math.abs(e-t)},roundAwayFromZero:function(e){return 0<e?Math.ceil(e):Math.floor(e)},sinCosGenerator:function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1);for(var r=t,o=i,a=n*Math.PI/e,s=[],p=[],l=0;l<e;l++)r+=(o-=r*a)*a,s[l]=o,p[l]=r;return{sin:p,cos:s,length:e}},distance:function(e,t,i,n){var r=e-i,o=t-n;return Math.sqrt(r*r+o*o)},distanceSq:function(e,t,i,n){var r=e-i,o=t-n;return r*r+o*o},distancePow:function(e,t,i,n,r){return void 0===r&&(r=2),Math.sqrt(Math.pow(i-e,r)+Math.pow(n-t,r))},clamp:function(e,t,i){return e<t?t:i<e?i:e},clampBottom:function(e,t){return e<t?t:e},within:function(e,t,i){return Math.abs(e-t)<=i},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},smoothstep:function(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*(3-2*e)},smootherstep:function(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*e*(e*(6*e-15)+10)},sign:function(e){return e<0?-1:0<e?1:0},percent:function(e,t,i){return void 0===i&&(i=0),t<e||t<i?1:e<i||e<i?0:(e-i)/t}};var a=Math.PI/180,s=180/Math.PI;return U.Math.degToRad=function(e){return e*a},U.Math.radToDeg=function(e){return e*s},U.RandomDataGenerator=function(e){void 0===e&&(e=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof e?this.state(e):this.sow(e)},U.RandomDataGenerator.prototype={rnd:function(){var e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2},sow:function(e){if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,e)for(var t=0;t<e.length&&null!=e[t];t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},hash:function(e){var t,i,n;for(n=4022871197,e=e.toString(),i=0;i<e.length;i++)t=.02519603282416938*(n+=e.charCodeAt(i)),t-=n=t>>>0,n=(t*=n)>>>0,n+=4294967296*(t-=n);return 2.3283064365386963e-10*(n>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+11102230246251565e-32*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function(e,t){return this.integerInRange(e,t)},realInRange:function(e,t){return this.frac()*(t-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="",t="";for(t=e="";e++<36;t+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return t},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick([-1,1])},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function(){return this.integerInRange(-180,180)},state:function(e){return"string"==typeof e&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}},U.RandomDataGenerator.prototype.constructor=U.RandomDataGenerator,U.QuadTree=function(e,t,i,n,r,o,a){this.maxObjects=10,this.maxLevels=4,this.level=0,this.bounds={},this.objects=[],this.nodes=[],this._empty=[],this.reset(e,t,i,n,r,o,a)},U.QuadTree.prototype={reset:function(e,t,i,n,r,o,a){this.maxObjects=r||10,this.maxLevels=o||4,this.level=a||0,this.bounds={x:Math.round(e),y:Math.round(t),width:i,height:n,subWidth:Math.floor(i/2),subHeight:Math.floor(n/2),right:Math.round(e)+Math.floor(i/2),bottom:Math.round(t)+Math.floor(n/2)},this.objects.length=0,this.nodes.length=0},populate:function(e){e.forEach(this.populateHandler,this,!0)},populateHandler:function(e){e.body&&e.exists&&this.insert(e.body)},split:function(){this.nodes[0]=new U.QuadTree(this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[1]=new U.QuadTree(this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[2]=new U.QuadTree(this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[3]=new U.QuadTree(this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1)},insert:function(e){var t,i=0;if(null==this.nodes[0]||-1===(t=this.getIndex(e))){if(this.objects.push(e),this.objects.length>this.maxObjects&&this.level<this.maxLevels)for(null==this.nodes[0]&&this.split();i<this.objects.length;)-1!==(t=this.getIndex(this.objects[i]))?this.nodes[t].insert(this.objects.splice(i,1)[0]):i++}else this.nodes[t].insert(e)},getIndex:function(e){var t=-1;return e.x<this.bounds.right&&e.right<this.bounds.right?e.y<this.bounds.bottom&&e.bottom<this.bounds.bottom?t=1:e.y>this.bounds.bottom&&(t=2):e.x>this.bounds.right&&(e.y<this.bounds.bottom&&e.bottom<this.bounds.bottom?t=0:e.y>this.bounds.bottom&&(t=3)),t},retrieve:function(e){if(e instanceof U.Rectangle)var t=this.objects,i=this.getIndex(e);else{if(!e.body)return this._empty;t=this.objects,i=this.getIndex(e.body)}return this.nodes[0]&&(t=-1!==i?t.concat(this.nodes[i].retrieve(e)):(t=(t=(t=t.concat(this.nodes[0].retrieve(e))).concat(this.nodes[1].retrieve(e))).concat(this.nodes[2].retrieve(e))).concat(this.nodes[3].retrieve(e))),t},clear:function(){this.objects.length=0;for(var e=this.nodes.length;e--;)this.nodes[e].clear(),this.nodes.splice(e,1);this.nodes.length=0}},U.QuadTree.prototype.constructor=U.QuadTree,U.Net=function(e){this.game=e},U.Net.prototype={getHostName:function(){return window.location&&window.location.hostname?window.location.hostname:null},checkDomainName:function(e){return-1!==window.location.hostname.indexOf(e)},updateQueryString:function(e,t,i,n){void 0===i&&(i=!1),void 0!==n&&""!==n||(n=window.location.href);var r="",o=new RegExp("([?|&])"+e+"=.*?(&|#|$)(.*)","gi");if(o.test(n))r=null!=t?n.replace(o,"$1"+e+"="+t+"$2$3"):n.replace(o,"$1$3").replace(/(&|\?)$/,"");else if(null!=t){var a=-1!==n.indexOf("?")?"&":"?",s=n.split("#");n=s[0]+a+e+"="+t,s[1]&&(n+="#"+s[1]),r=n}else r=n;if(!i)return r;window.location.href=r},getQueryString:function(e){void 0===e&&(e="");var t={},i=location.search.substring(1).split("&");for(var n in i){var r=i[n].split("=");if(1<r.length){if(e&&e===this.decodeURI(r[0]))return this.decodeURI(r[1]);t[this.decodeURI(r[0])]=this.decodeURI(r[1])}}return t},decodeURI:function(e){return decodeURIComponent(e.replace(/\+/g," "))}},U.Net.prototype.constructor=U.Net,U.TweenManager=function(e){this.game=e,this.frameBased=!1,this._tweens=[],this._add=[],this.easeMap={Power0:U.Easing.Power0,Power1:U.Easing.Power1,Power2:U.Easing.Power2,Power3:U.Easing.Power3,Power4:U.Easing.Power4,Linear:U.Easing.Linear.None,Quad:U.Easing.Quadratic.Out,Cubic:U.Easing.Cubic.Out,Quart:U.Easing.Quartic.Out,Quint:U.Easing.Quintic.Out,Sine:U.Easing.Sinusoidal.Out,Expo:U.Easing.Exponential.Out,Circ:U.Easing.Circular.Out,Elastic:U.Easing.Elastic.Out,Back:U.Easing.Back.Out,Bounce:U.Easing.Bounce.Out,"Quad.easeIn":U.Easing.Quadratic.In,"Cubic.easeIn":U.Easing.Cubic.In,"Quart.easeIn":U.Easing.Quartic.In,"Quint.easeIn":U.Easing.Quintic.In,"Sine.easeIn":U.Easing.Sinusoidal.In,"Expo.easeIn":U.Easing.Exponential.In,"Circ.easeIn":U.Easing.Circular.In,"Elastic.easeIn":U.Easing.Elastic.In,"Back.easeIn":U.Easing.Back.In,"Bounce.easeIn":U.Easing.Bounce.In,"Quad.easeOut":U.Easing.Quadratic.Out,"Cubic.easeOut":U.Easing.Cubic.Out,"Quart.easeOut":U.Easing.Quartic.Out,"Quint.easeOut":U.Easing.Quintic.Out,"Sine.easeOut":U.Easing.Sinusoidal.Out,"Expo.easeOut":U.Easing.Exponential.Out,"Circ.easeOut":U.Easing.Circular.Out,"Elastic.easeOut":U.Easing.Elastic.Out,"Back.easeOut":U.Easing.Back.Out,"Bounce.easeOut":U.Easing.Bounce.Out,"Quad.easeInOut":U.Easing.Quadratic.InOut,"Cubic.easeInOut":U.Easing.Cubic.InOut,"Quart.easeInOut":U.Easing.Quartic.InOut,"Quint.easeInOut":U.Easing.Quintic.InOut,"Sine.easeInOut":U.Easing.Sinusoidal.InOut,"Expo.easeInOut":U.Easing.Exponential.InOut,"Circ.easeInOut":U.Easing.Circular.InOut,"Elastic.easeInOut":U.Easing.Elastic.InOut,"Back.easeInOut":U.Easing.Back.InOut,"Bounce.easeInOut":U.Easing.Bounce.InOut},this.game.onPause.add(this._pauseAll,this),this.game.onResume.add(this._resumeAll,this)},U.TweenManager.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var e=0;e<this._tweens.length;e++)this._tweens[e].pendingDelete=!0;this._add=[]},removeFrom:function(e,t){if(void 0===t&&(t=!0),Array.isArray(e))for(i=0,n=e.length;i<n;i++)this.removeFrom(e[i]);else if(e.type===U.GROUP&&t)for(var i=0,n=e.children.length;i<n;i++)this.removeFrom(e.children[i]);else{for(i=0,n=this._tweens.length;i<n;i++)e===this._tweens[i].target&&this.remove(this._tweens[i]);for(i=0,n=this._add.length;i<n;i++)e===this._add[i].target&&this.remove(this._add[i])}},add:function(e){(e._manager=this)._add.push(e)},create:function(e){return new U.Tween(e,this.game,this)},remove:function(e){var t=this._tweens.indexOf(e);-1!==t?this._tweens[t].pendingDelete=!0:-1!==(t=this._add.indexOf(e))&&(this._add[t].pendingDelete=!0)},update:function(){var e=this._add.length,t=this._tweens.length;if(0===t&&0===e)return!1;for(var i=0;i<t;)this._tweens[i].update(this.game.time.time)?i++:(this._tweens.splice(i,1),t--);return 0<e&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(t){return this._tweens.some(function(e){return e.target===t})},_pauseAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e]._pause()},_resumeAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e]._resume()},pauseAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e].pause()},resumeAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e].resume(!0)}},U.TweenManager.prototype.constructor=U.TweenManager,U.Tween=function(e,t,i){this.game=t,this.target=e,this.manager=i,this.timeline=[],this.reverse=!1,this.timeScale=1,this.repeatCounter=0,this.pendingDelete=!1,this.onStart=new U.Signal,this.onLoop=new U.Signal,this.onRepeat=new U.Signal,this.onChildComplete=new U.Signal,this.onComplete=new U.Signal,this.isRunning=!1,this.current=0,this.properties={},this.chainedTween=null,this.isPaused=!1,this.frameBased=i.frameBased,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._pausedTime=0,this._codePaused=!1,this._hasStarted=!1},U.Tween.prototype={to:function(e,t,i,n,r,o,a){return(void 0===t||t<=0)&&(t=1e3),null!=i||(i=U.Easing.Default),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=!1),"string"==typeof i&&this.manager.easeMap[i]&&(i=this.manager.easeMap[i]),this.isRunning||(this.timeline.push(new U.TweenData(this).to(e,t,i,r,o,a)),n&&this.start()),this},from:function(e,t,i,n,r,o,a){return void 0===t&&(t=1e3),null!=i||(i=U.Easing.Default),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=!1),"string"==typeof i&&this.manager.easeMap[i]&&(i=this.manager.easeMap[i]),this.isRunning||(this.timeline.push(new U.TweenData(this).from(e,t,i,r,o,a)),n&&this.start()),this},start:function(e){if(void 0===e&&(e=0),null===this.game||null===this.target||0===this.timeline.length||this.isRunning)return this;for(var t=0;t<this.timeline.length;t++)for(var i in this.timeline[t].vEnd)this.properties[i]=this.target[i]||0,Array.isArray(this.properties[i])||(this.properties[i]*=1);for(t=0;t<this.timeline.length;t++)this.timeline[t].loadValues();return this.manager.add(this),this.isRunning=!0,(e<0||e>this.timeline.length-1)&&(e=0),this.current=e,this.timeline[this.current].start(),this},stop:function(e){return void 0===e&&(e=!1),this.isRunning=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,e&&(this.onComplete.dispatch(this.target,this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start()),this.manager.remove(this),this},updateTweenData:function(e,t,i){if(0===this.timeline.length)return this;if(void 0===i&&(i=0),-1===i)for(var n=0;n<this.timeline.length;n++)this.timeline[n][e]=t;else this.timeline[i][e]=t;return this},delay:function(e,t){return this.updateTweenData("delay",e,t)},repeat:function(e,t,i){return void 0===t&&(t=0),this.updateTweenData("repeatCounter",e,i),this.updateTweenData("repeatDelay",t,i)},repeatDelay:function(e,t){return this.updateTweenData("repeatDelay",e,t)},yoyo:function(e,t,i){return void 0===t&&(t=0),this.updateTweenData("yoyo",e,i),this.updateTweenData("yoyoDelay",t,i)},yoyoDelay:function(e,t){return this.updateTweenData("yoyoDelay",e,t)},easing:function(e,t){return"string"==typeof e&&this.manager.easeMap[e]&&(e=this.manager.easeMap[e]),this.updateTweenData("easingFunction",e,t)},interpolation:function(e,t,i){return void 0===t&&(t=U.Math),this.updateTweenData("interpolationFunction",e,i),this.updateTweenData("interpolationContext",t,i)},repeatAll:function(e){return void 0===e&&(e=0),this.repeatCounter=e,this},chain:function(){for(var e=arguments.length;e--;)0<e?arguments[e-1].chainedTween=arguments[e]:this.chainedTween=arguments[e];return this},loop:function(e){return void 0===e&&(e=!0),this.repeatCounter=e?-1:0,this},onUpdateCallback:function(e,t){return this._onUpdateCallback=e,this._onUpdateCallbackContext=t,this},pause:function(){this.isPaused=!0,this._codePaused=!0,this._pausedTime=this.game.time.time},_pause:function(){this._codePaused||(this.isPaused=!0,this._pausedTime=this.game.time.time)},resume:function(){if(this.isPaused){this.isPaused=!1,this._codePaused=!1;for(var e=0;e<this.timeline.length;e++)this.timeline[e].isRunning||(this.timeline[e].startTime+=this.game.time.time-this._pausedTime)}},_resume:function(){this._codePaused||this.resume()},update:function(e){if(this.pendingDelete||!this.target)return!1;if(this.isPaused)return!0;var t=this.timeline[this.current].update(e);if(t===U.TweenData.PENDING)return!0;if(t===U.TweenData.RUNNING)return this._hasStarted||(this.onStart.dispatch(this.target,this),this._hasStarted=!0),null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]),this.isRunning;if(t===U.TweenData.LOOPED)return-1===this.timeline[this.current].repeatCounter?this.onLoop.dispatch(this.target,this):this.onRepeat.dispatch(this.target,this),!0;if(t===U.TweenData.COMPLETE){var i=!1;return this.reverse?--this.current<0&&(this.current=this.timeline.length-1,i=!0):++this.current===this.timeline.length&&(i=!(this.current=0)),i?-1===this.repeatCounter?(this.timeline[this.current].start(),this.onLoop.dispatch(this.target,this),!0):0<this.repeatCounter?(this.repeatCounter--,this.timeline[this.current].start(),this.onRepeat.dispatch(this.target,this),!0):(this.isRunning=!1,this.onComplete.dispatch(this.target,this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start(),!1):(this.onChildComplete.dispatch(this.target,this),this.timeline[this.current].start(),!0)}},generateData:function(e,t){if(null===this.game||null===this.target)return null;void 0===e&&(e=60),void 0===t&&(t=[]);for(var i=0;i<this.timeline.length;i++)for(var n in this.timeline[i].vEnd)this.properties[n]=this.target[n]||0,Array.isArray(this.properties[n])||(this.properties[n]*=1);for(i=0;i<this.timeline.length;i++)this.timeline[i].loadValues();for(i=0;i<this.timeline.length;i++)t=t.concat(this.timeline[i].generateData(e));return t}},Object.defineProperty(U.Tween.prototype,"totalDuration",{get:function(){for(var e=0,t=0;t<this.timeline.length;t++)e+=this.timeline[t].duration;return e}}),U.Tween.prototype.constructor=U.Tween,U.TweenData=function(e){this.parent=e,this.game=e.game,this.vStart={},this.vStartCache={},this.vEnd={},this.vEndCache={},this.duration=1e3,this.percent=0,this.value=0,this.repeatCounter=0,this.repeatDelay=0,this.repeatTotal=0,this.interpolate=!1,this.yoyo=!1,this.yoyoDelay=0,this.inReverse=!1,this.delay=0,this.dt=0,this.startTime=null,this.easingFunction=U.Easing.Default,this.interpolationFunction=U.Math.linearInterpolation,this.interpolationContext=U.Math,this.isRunning=!1,this.isFrom=!1},U.TweenData.PENDING=0,U.TweenData.RUNNING=1,U.TweenData.LOOPED=2,U.TweenData.COMPLETE=3,U.TweenData.prototype={to:function(e,t,i,n,r,o){return this.vEnd=e,this.duration=t,this.easingFunction=i,this.delay=n,this.repeatTotal=r,this.yoyo=o,this.isFrom=!1,this},from:function(e,t,i,n,r,o){return this.vEnd=e,this.duration=t,this.easingFunction=i,this.delay=n,this.repeatTotal=r,this.yoyo=o,this.isFrom=!0,this},start:function(){if(this.startTime=this.game.time.time+this.delay,this.parent.reverse?this.dt=this.duration:this.dt=0,0<this.delay?this.isRunning=!1:this.isRunning=!0,this.isFrom)for(var e in this.vStartCache)this.vStart[e]=this.vEndCache[e],this.vEnd[e]=this.vStartCache[e],this.parent.target[e]=this.vStart[e];return this.value=0,this.yoyoCounter=0,this.repeatCounter=this.repeatTotal,this},loadValues:function(){for(var e in this.parent.properties){if(this.vStart[e]=this.parent.properties[e],Array.isArray(this.vEnd[e])){if(0===this.vEnd[e].length)continue;0===this.percent&&(this.vEnd[e]=[this.vStart[e]].concat(this.vEnd[e]))}void 0!==this.vEnd[e]?("string"==typeof this.vEnd[e]&&(this.vEnd[e]=this.vStart[e]+parseFloat(this.vEnd[e],10)),this.parent.properties[e]=this.vEnd[e]):this.vEnd[e]=this.vStart[e],this.vStartCache[e]=this.vStart[e],this.vEndCache[e]=this.vEnd[e]}return this},update:function(e){if(this.isRunning){if(e<this.startTime)return U.TweenData.RUNNING}else{if(!(e>=this.startTime))return U.TweenData.PENDING;this.isRunning=!0}var t=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.time.elapsedMS;for(var i in this.parent.reverse?(this.dt-=t*this.parent.timeScale,this.dt=Math.max(this.dt,0)):(this.dt+=t*this.parent.timeScale,this.dt=Math.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent),this.vEnd){var n=this.vStart[i],r=this.vEnd[i];Array.isArray(r)?this.parent.target[i]=this.interpolationFunction.call(this.interpolationContext,r,this.value):this.parent.target[i]=n+(r-n)*this.value}return!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent?this.repeat():U.TweenData.RUNNING},generateData:function(e){this.parent.reverse?this.dt=this.duration:this.dt=0;var t=[],i=!1,n=1/e*1e3;do{this.parent.reverse?(this.dt-=n,this.dt=Math.max(this.dt,0)):(this.dt+=n,this.dt=Math.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent);var r={};for(var o in this.vEnd){var a=this.vStart[o],s=this.vEnd[o];Array.isArray(s)?r[o]=this.interpolationFunction(s,this.value):r[o]=a+(s-a)*this.value}t.push(r),(!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent)&&(i=!0)}while(!i);if(this.yoyo){var p=t.slice();p.reverse(),t=t.concat(p)}return t},repeat:function(){if(this.yoyo){if(this.inReverse&&0===this.repeatCounter){for(var e in this.vStartCache)this.vStart[e]=this.vStartCache[e],this.vEnd[e]=this.vEndCache[e];return this.inReverse=!1,U.TweenData.COMPLETE}this.inReverse=!this.inReverse}else if(0===this.repeatCounter)return U.TweenData.COMPLETE;if(this.inReverse)for(var e in this.vStartCache)this.vStart[e]=this.vEndCache[e],this.vEnd[e]=this.vStartCache[e];else{for(var e in this.vStartCache)this.vStart[e]=this.vStartCache[e],this.vEnd[e]=this.vEndCache[e];0<this.repeatCounter&&this.repeatCounter--}return this.startTime=this.game.time.time,this.yoyo&&this.inReverse?this.startTime+=this.yoyoDelay:this.inReverse||(this.startTime+=this.repeatDelay),this.parent.reverse?this.dt=this.duration:this.dt=0,U.TweenData.LOOPED}},U.TweenData.prototype.constructor=U.TweenData,U.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 0===e?0:1===e?1:1-Math.cos(e*Math.PI/2)},Out:function(e){return 0===e?0:1===e?1:Math.sin(e*Math.PI/2)},InOut:function(e){return 0===e?0:1===e?1:.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-U.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*U.Easing.Bounce.In(2*e):.5*U.Easing.Bounce.Out(2*e-1)+.5}}},U.Easing.Default=U.Easing.Linear.None,U.Easing.Power0=U.Easing.Linear.None,U.Easing.Power1=U.Easing.Quadratic.Out,U.Easing.Power2=U.Easing.Cubic.Out,U.Easing.Power3=U.Easing.Quartic.Out,U.Easing.Power4=U.Easing.Quintic.Out,U.Time=function(e){this.game=e,this.time=0,this.prevTime=0,this.now=0,this.elapsed=0,this.elapsedMS=0,this.physicsElapsed=1/60,this.physicsElapsedMS=1/60*1e3,this.desiredFpsMult=1/60,this._desiredFps=60,this.suggestedFps=this.desiredFps,this.slowMotion=1,this.advancedTiming=!1,this.frames=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.pauseDuration=0,this.timeToCall=0,this.timeExpected=0,this.events=new U.Timer(this.game,!1),this._frameCount=0,this._elapsedAccumulator=0,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[]},U.Time.prototype={boot:function(){this._started=Date.now(),this.time=Date.now(),this.events.start(),this.timeExpected=this.time},add:function(e){return this._timers.push(e),e},create:function(e){void 0===e&&(e=!0);var t=new U.Timer(this.game,e);return this._timers.push(t),t},removeAll:function(){for(var e=0;e<this._timers.length;e++)this._timers[e].destroy();this._timers=[],this.events.removeAll()},refresh:function(){var e=this.time;this.time=Date.now(),this.elapsedMS=this.time-e},update:function(e){var t=this.time;this.time=Date.now(),this.elapsedMS=this.time-t,this.prevTime=this.now,this.now=e,this.elapsed=this.now-this.prevTime,this.game.raf._isSetTimeOut&&(this.timeToCall=Math.floor(Math.max(0,1e3/this._desiredFps-(this.timeExpected-e))),this.timeExpected=e+this.timeToCall),this.advancedTiming&&this.updateAdvancedTiming(),this.game.paused||(this.events.update(this.time),this._timers.length&&this.updateTimers())},updateTimers:function(){for(var e=0,t=this._timers.length;e<t;)this._timers[e].update(this.time)?e++:(this._timers.splice(e,1),t--)},updateAdvancedTiming:function(){this._frameCount++,this._elapsedAccumulator+=this.elapsed,this._frameCount>=2*this._desiredFps&&(this.suggestedFps=5*Math.floor(200/(this._elapsedAccumulator/this._frameCount)),this._frameCount=0,this._elapsedAccumulator=0),this.msMin=Math.min(this.msMin,this.elapsed),this.msMax=Math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=Math.min(this.fpsMin,this.fps),this.fpsMax=Math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0)},gamePaused:function(){this._pauseStarted=Date.now(),this.events.pause();for(var e=this._timers.length;e--;)this._timers[e]._pause()},gameResumed:function(){this.time=Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var e=this._timers.length;e--;)this._timers[e]._resume()},totalElapsedSeconds:function(){return.001*(this.time-this._started)},elapsedSince:function(e){return this.time-e},elapsedSecondsSince:function(e){return.001*(this.time-e)},reset:function(){this._started=this.time,this.removeAll()}},Object.defineProperty(U.Time.prototype,"desiredFps",{get:function(){return this._desiredFps},set:function(e){this._desiredFps=e,this.physicsElapsed=1/e,this.physicsElapsedMS=1e3*this.physicsElapsed,this.desiredFpsMult=1/e}}),U.Time.prototype.constructor=U.Time,U.Timer=function(e,t){void 0===t&&(t=!0),this.game=e,this.running=!1,this.autoDestroy=t,this.expired=!1,this.elapsed=0,this.events=[],this.onComplete=new U.Signal,this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0},U.Timer.MINUTE=6e4,U.Timer.SECOND=1e3,U.Timer.HALF=500,U.Timer.QUARTER=250,U.Timer.prototype={create:function(e,t,i,n,r,o){var a=e=Math.round(e);0===this._now?a+=this.game.time.time:a+=this._now;var s=new U.TimerEvent(this,e,a,i,t,n,r,o);return this.events.push(s),this.order(),this.expired=!1,s},add:function(e,t,i){return this.create(e,!1,0,t,i,Array.prototype.slice.call(arguments,3))},repeat:function(e,t,i,n){return this.create(e,!1,t,i,n,Array.prototype.slice.call(arguments,4))},loop:function(e,t,i){return this.create(e,!0,0,t,i,Array.prototype.slice.call(arguments,3))},start:function(e){if(!this.running){this._started=this.game.time.time+(e||0),this.running=!0;for(var t=0;t<this.events.length;t++)this.events[t].tick=this.events[t].delay+this._started}},stop:function(e){this.running=!1,void 0===e&&(e=!0),e&&(this.events.length=0)},remove:function(e){for(var t=0;t<this.events.length;t++)if(this.events[t]===e)return this.events[t].pendingDelete=!0;return!1},order:function(){0<this.events.length&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},sortHandler:function(e,t){return e.tick<t.tick?-1:e.tick>t.tick?1:0},clearPendingEvents:function(){for(this._i=this.events.length;this._i--;)this.events[this._i].pendingDelete&&this.events.splice(this._i,1);this._len=this.events.length,this._i=0},update:function(e){if(this.paused)return!0;if(this.elapsed=e-this._now,this._now=e,this.elapsed>this.timeCap&&this.adjustEvents(e-this.elapsed),this._marked=0,this.clearPendingEvents(),this.running&&this._now>=this.nextTick&&0<this._len){for(;this._i<this._len&&this.running&&this._now>=this.events[this._i].tick&&!this.events[this._i].pendingDelete;)this._newTick=this._now+this.events[this._i].delay-(this._now-this.events[this._i].tick),this._newTick<0&&(this._newTick=this._now+this.events[this._i].delay),!0===this.events[this._i].loop?this.events[this._i].tick=this._newTick:0<this.events[this._i].repeatCount?(this.events[this._i].repeatCount--,this.events[this._i].tick=this._newTick):(this._marked++,this.events[this._i].pendingDelete=!0),this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args),this._i++;this.events.length>this._marked?this.order():(this.expired=!0,this.onComplete.dispatch(this))}return!this.expired||!this.autoDestroy},pause:function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.time.time,this.paused=!0))},_pause:function(){!this.paused&&this.running&&(this._pauseStarted=this.game.time.time,this.paused=!0)},adjustEvents:function(e){for(var t=0;t<this.events.length;t++)if(!this.events[t].pendingDelete){var i=this.events[t].tick-e;i<0&&(i=0),this.events[t].tick=this._now+i}var n=this.nextTick-e;this.nextTick=n<0?this._now:this._now+n},resume:function(){if(this.paused){var e=this.game.time.time;this._pauseTotal+=e-this._now,this._now=e,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},_resume:function(){this._codePaused||this.resume()},removeAll:function(){this.onComplete.removeAll(),this.events.length=0,this._len=0,this._i=0},destroy:function(){this.onComplete.removeAll(),this.running=!1,this.events=[],this._len=0,this._i=0}},Object.defineProperty(U.Timer.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(U.Timer.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(U.Timer.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(U.Timer.prototype,"ms",{get:function(){return this.running?this._now-this._started-this._pauseTotal:0}}),Object.defineProperty(U.Timer.prototype,"seconds",{get:function(){return this.running?.001*this.ms:0}}),U.Timer.prototype.constructor=U.Timer,U.TimerEvent=function(e,t,i,n,r,o,a,s){this.timer=e,this.delay=t,this.tick=i,this.repeatCount=n-1,this.loop=r,this.callback=o,this.callbackContext=a,this.args=s,this.pendingDelete=!1},U.TimerEvent.prototype.constructor=U.TimerEvent,U.AnimationManager=function(e){this.sprite=e,this.game=e.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]},U.AnimationManager.prototype={loadFrameData:function(e,t){if(void 0===e)return!1;if(this.isLoaded)for(var i in this._anims)this._anims[i].updateFrameData(e);return this._frameData=e,null==t?this.frame=0:"string"==typeof t?this.frameName=t:this.frame=t,this.isLoaded=!0},copyFrameData:function(e,t){if(this._frameData=e.clone(),this.isLoaded)for(var i in this._anims)this._anims[i].updateFrameData(this._frameData);return null==t?this.frame=0:"string"==typeof t?this.frameName=t:this.frame=t,this.isLoaded=!0},add:function(e,t,i,n,r){return t=t||[],i=i||60,void 0===n&&(n=!1),void 0===r&&(r=!(!t||"number"!=typeof t[0])),this._outputFrames=[],this._frameData.getFrameIndexes(t,r,this._outputFrames),this._anims[e]=new U.Animation(this.game,this.sprite,e,this._frameData,this._outputFrames,i,n),this.currentAnim=this._anims[e],this.sprite.tilingTexture&&(this.sprite.refreshTexture=!0),this._anims[e]},validateFrames:function(e,t){void 0===t&&(t=!0);for(var i=0;i<e.length;i++)if(!0===t){if(e[i]>this._frameData.total)return!1}else if(!1===this._frameData.checkFrameName(e[i]))return!1;return!0},play:function(e,t,i,n){if(this._anims[e])return this.currentAnim===this._anims[e]?!1===this.currentAnim.isPlaying?(this.currentAnim.paused=!1,this.currentAnim.play(t,i,n)):this.currentAnim:(this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[e],this.currentAnim.paused=!1,this.currentFrame=this.currentAnim.currentFrame,this.currentAnim.play(t,i,n))},stop:function(e,t){void 0===t&&(t=!1),!this.currentAnim||"string"==typeof e&&e!==this.currentAnim.name||this.currentAnim.stop(t)},update:function(){return!(this.updateIfVisible&&!this.sprite.visible||!this.currentAnim||!this.currentAnim.update()||(this.currentFrame=this.currentAnim.currentFrame,0))},next:function(e){this.currentAnim&&(this.currentAnim.next(e),this.currentFrame=this.currentAnim.currentFrame)},previous:function(e){this.currentAnim&&(this.currentAnim.previous(e),this.currentFrame=this.currentAnim.currentFrame)},getAnimation:function(e){return"string"==typeof e&&this._anims[e]?this._anims[e]:null},refreshFrame:function(){},destroy:function(){var e=null;for(var e in this._anims)this._anims.hasOwnProperty(e)&&this._anims[e].destroy();this._anims={},this._outputFrames=[],this._frameData=null,this.currentAnim=null,this.currentFrame=null,this.sprite=null,this.game=null}},U.AnimationManager.prototype.constructor=U.AnimationManager,Object.defineProperty(U.AnimationManager.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(U.AnimationManager.prototype,"frameTotal",{get:function(){return this._frameData.total}}),Object.defineProperty(U.AnimationManager.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(e){this.currentAnim.paused=e}}),Object.defineProperty(U.AnimationManager.prototype,"name",{get:function(){if(this.currentAnim)return this.currentAnim.name}}),Object.defineProperty(U.AnimationManager.prototype,"frame",{get:function(){if(this.currentFrame)return this.currentFrame.index},set:function(e){"number"==typeof e&&this._frameData&&null!==this._frameData.getFrame(e)&&(this.currentFrame=this._frameData.getFrame(e),this.currentFrame&&this.sprite.setFrame(this.currentFrame))}}),Object.defineProperty(U.AnimationManager.prototype,"frameName",{get:function(){if(this.currentFrame)return this.currentFrame.name},set:function(e){"string"==typeof e&&this._frameData&&null!==this._frameData.getFrameByName(e)&&(this.currentFrame=this._frameData.getFrameByName(e),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setFrame(this.currentFrame)))}}),U.Animation=function(e,t,i,n,r,o,a){void 0===a&&(a=!1),this.game=e,this._parent=t,this._frameData=n,this.name=i,this._frames=[],this._frames=this._frames.concat(r),this.delay=1e3/o,this.loop=a,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.onStart=new U.Signal,this.onUpdate=null,this.onComplete=new U.Signal,this.onLoop=new U.Signal,this.isReversed=!1,this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},U.Animation.prototype={play:function(e,t,i){return"number"==typeof e&&(this.delay=1e3/e),"boolean"==typeof t&&(this.loop=t),void 0!==i&&(this.killOnComplete=i),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.time,this._timeNextFrame=this.game.time.time+this.delay,this._frameIndex=this.isReversed?this._frames.length-1:0,this.updateCurrentFrame(!1,!0),this._parent.events.onAnimationStart$dispatch(this._parent,this),this.onStart.dispatch(this._parent,this),(this._parent.animations.currentAnim=this)._parent.animations.currentFrame=this.currentFrame,this},restart:function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.time,this._timeNextFrame=this.game.time.time+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._parent.setFrame(this.currentFrame),(this._parent.animations.currentAnim=this)._parent.animations.currentFrame=this.currentFrame,this.onStart.dispatch(this._parent,this)},reverse:function(){return this.reversed=!this.reversed,this},reverseOnce:function(){return this.onComplete.addOnce(this.reverse,this),this.reverse()},setFrame:function(e,t){var i;if(void 0===t&&(t=!1),"string"==typeof e)for(var n=0;n<this._frames.length;n++)this._frameData.getFrame(this._frames[n]).name===e&&(i=n);else if("number"==typeof e)if(t)i=e;else for(n=0;n<this._frames.length;n++)this._frames[n]===e&&(i=n);i&&(this._frameIndex=i-1,this._timeNextFrame=this.game.time.time,this.update())},stop:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,e&&(this.currentFrame=this._frameData.getFrame(this._frames[0]),this._parent.setFrame(this.currentFrame)),t&&(this._parent.events.onAnimationComplete$dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this))},onPause:function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.time.time)},onResume:function(){this.isPlaying&&(this._timeNextFrame=this.game.time.time+this._frameDiff)},update:function(){return!this.isPaused&&!!(this.isPlaying&&this.game.time.time>=this._timeNextFrame)&&(this._frameSkip=1,this._frameDiff=this.game.time.time-this._timeNextFrame,this._timeLastFrame=this.game.time.time,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.time.time+(this.delay-this._frameDiff),this.isReversed?this._frameIndex-=this._frameSkip:this._frameIndex+=this._frameSkip,!this.isReversed&&this._frameIndex>=this._frames.length||this.isReversed&&this._frameIndex<=-1?this.loop?(this._frameIndex=Math.abs(this._frameIndex)%this._frames.length,this.isReversed&&(this._frameIndex=this._frames.length-1-this._frameIndex),this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this._parent.setFrame(this.currentFrame),this.loopCount++,this._parent.events.onAnimationLoop$dispatch(this._parent,this),this.onLoop.dispatch(this._parent,this),!this.onUpdate||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)):(this.complete(),!1):this.updateCurrentFrame(!0))},updateCurrentFrame:function(e,t){if(void 0===t&&(t=!1),!this._frameData)return!1;var i=this.currentFrame.index;return this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(t||!t&&i!==this.currentFrame.index)&&this._parent.setFrame(this.currentFrame),!this.onUpdate||!e||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)},next:function(e){void 0===e&&(e=1);var t=this._frameIndex+e;t>=this._frames.length&&(this.loop?t%=this._frames.length:t=this._frames.length-1),t!==this._frameIndex&&(this._frameIndex=t,this.updateCurrentFrame(!0))},previous:function(e){void 0===e&&(e=1);var t=this._frameIndex-e;t<0&&(this.loop?t=this._frames.length+t:t++),t!==this._frameIndex&&(this._frameIndex=t,this.updateCurrentFrame(!0))},updateFrameData:function(e){this._frameData=e,this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},destroy:function(){this._frameData&&(this.game.onPause.remove(this.onPause,this),this.game.onResume.remove(this.onResume,this),this.game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.onStart.dispose(),this.onLoop.dispose(),this.onComplete.dispose(),this.onUpdate&&this.onUpdate.dispose())},complete:function(){this._frameIndex=this._frames.length-1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this._parent.events.onAnimationComplete$dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this),this.killOnComplete&&this._parent.kill()}},U.Animation.prototype.constructor=U.Animation,Object.defineProperty(U.Animation.prototype,"paused",{get:function(){return this.isPaused},set:function(e){(this.isPaused=e)?this._pauseStartTime=this.game.time.time:this.isPlaying&&(this._timeNextFrame=this.game.time.time+this.delay)}}),Object.defineProperty(U.Animation.prototype,"reversed",{get:function(){return this.isReversed},set:function(e){this.isReversed=e}}),Object.defineProperty(U.Animation.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(U.Animation.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(e){this.currentFrame=this._frameData.getFrame(this._frames[e]),null!==this.currentFrame&&(this._frameIndex=e,this._parent.setFrame(this.currentFrame),this.onUpdate&&this.onUpdate.dispatch(this,this.currentFrame))}}),Object.defineProperty(U.Animation.prototype,"speed",{get:function(){return 1e3/this.delay},set:function(e){0<e&&(this.delay=1e3/e)}}),Object.defineProperty(U.Animation.prototype,"enableUpdate",{get:function(){return null!==this.onUpdate},set:function(e){e&&null===this.onUpdate?this.onUpdate=new U.Signal:e||null===this.onUpdate||(this.onUpdate.dispose(),this.onUpdate=null)}}),U.Animation.generateFrameNames=function(e,t,i,n,r){void 0===n&&(n="");var o=[],a="";if(t<i)for(var s=t;s<=i;s++)a=e+(a="number"==typeof r?U.Utils.pad(s.toString(),r,"0",1):s.toString())+n,o.push(a);else for(s=t;i<=s;s--)a=e+(a="number"==typeof r?U.Utils.pad(s.toString(),r,"0",1):s.toString())+n,o.push(a);return o},U.Frame=function(e,t,i,n,r,o){this.index=e,this.x=t,this.y=i,this.width=n,this.height=r,this.name=o,this.centerX=Math.floor(n/2),this.centerY=Math.floor(r/2),this.distance=U.Math.distance(0,0,n,r),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=n,this.sourceSizeH=r,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0,this.right=this.x+this.width,this.bottom=this.y+this.height},U.Frame.prototype={resize:function(e,t){this.width=e,this.height=t,this.centerX=Math.floor(e/2),this.centerY=Math.floor(t/2),this.distance=U.Math.distance(0,0,e,t),this.sourceSizeW=e,this.sourceSizeH=t,this.right=this.x+e,this.bottom=this.y+t},setTrim:function(e,t,i,n,r,o,a){(this.trimmed=e)&&(this.sourceSizeW=t,this.sourceSizeH=i,this.centerX=Math.floor(t/2),this.centerY=Math.floor(i/2),this.spriteSourceSizeX=n,this.spriteSourceSizeY=r,this.spriteSourceSizeW=o,this.spriteSourceSizeH=a)},clone:function(){var e=new U.Frame(this.index,this.x,this.y,this.width,this.height,this.name);for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e},getRect:function(e){return void 0===e?e=new U.Rectangle(this.x,this.y,this.width,this.height):e.setTo(this.x,this.y,this.width,this.height),e}},U.Frame.prototype.constructor=U.Frame,U.FrameData=function(){this._frames=[],this._frameNames=[]},U.FrameData.prototype={addFrame:function(e){return e.index=this._frames.length,this._frames.push(e),""!==e.name&&(this._frameNames[e.name]=e.index),e},getFrame:function(e){return e>=this._frames.length&&(e=0),this._frames[e]},getFrameByName:function(e){return"number"==typeof this._frameNames[e]?this._frames[this._frameNames[e]]:null},checkFrameName:function(e){return null!=this._frameNames[e]},clone:function(){for(var e=new U.FrameData,t=0;t<this._frames.length;t++)e._frames.push(this._frames[t].clone());for(var i in this._frameNames)this._frameNames.hasOwnProperty(i)&&e._frameNames.push(this._frameNames[i]);return e},getFrameRange:function(e,t,i){void 0===i&&(i=[]);for(var n=e;n<=t;n++)i.push(this._frames[n]);return i},getFrames:function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=[]),void 0===e||0===e.length)for(var n=0;n<this._frames.length;n++)i.push(this._frames[n]);else for(n=0;n<e.length;n++)t?i.push(this.getFrame(e[n])):i.push(this.getFrameByName(e[n]));return i},getFrameIndexes:function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=[]),void 0===e||0===e.length)for(var n=0;n<this._frames.length;n++)i.push(this._frames[n].index);else for(n=0;n<e.length;n++)t&&this._frames[e[n]]?i.push(this._frames[e[n]].index):this.getFrameByName(e[n])&&i.push(this.getFrameByName(e[n]).index);return i},destroy:function(){this._frames=null,this._frameNames=null}},U.FrameData.prototype.constructor=U.FrameData,Object.defineProperty(U.FrameData.prototype,"total",{get:function(){return this._frames.length}}),U.AnimationParser={spriteSheet:function(e,t,i,n,r,o,a){var s=t;if("string"==typeof t&&(s=e.cache.getImage(t)),null===s)return null;var p=s.width,l=s.height;i<=0&&(i=Math.floor(-p/Math.min(-1,i))),n<=0&&(n=Math.floor(-l/Math.min(-1,n)));var h=Math.floor((p-o)/(i+a))*Math.floor((l-o)/(n+a));if(-1!==r&&(h=r),0===p||0===l||p<i||l<n||0===h)return null;for(var u=new U.FrameData,d=o,c=o,_=0;_<h;_++)u.addFrame(new U.Frame(_,d,c,i,n,"")),(d+=i+a)+i>p&&(d=o,c+=n+a);return u},JSONData:function(e,t){if(t.frames){for(var i,n=new U.FrameData,r=t.frames,o=0;o<r.length;o++)i=n.addFrame(new U.Frame(o,r[o].frame.x,r[o].frame.y,r[o].frame.w,r[o].frame.h,r[o].filename)),r[o].trimmed&&i.setTrim(r[o].trimmed,r[o].sourceSize.w,r[o].sourceSize.h,r[o].spriteSourceSize.x,r[o].spriteSourceSize.y,r[o].spriteSourceSize.w,r[o].spriteSourceSize.h);return n}},JSONDataPyxel:function(e,t){if(["layers","tilewidth","tileheight","tileswide","tileshigh"].forEach(function(e){t[e]}),1===t.layers.length){for(var i=new U.FrameData,n=t.tileheight,r=t.tilewidth,o=t.layers[0].tiles,a=0;a<o.length;a++)i.addFrame(new U.Frame(a,o[a].x,o[a].y,r,n,"frame_"+a)).setTrim(!1);return i}},JSONDataHash:function(e,t){if(t.frames){var i,n=new U.FrameData,r=t.frames,o=0;for(var a in r)i=n.addFrame(new U.Frame(o,r[a].frame.x,r[a].frame.y,r[a].frame.w,r[a].frame.h,a)),r[a].trimmed&&i.setTrim(r[a].trimmed,r[a].sourceSize.w,r[a].sourceSize.h,r[a].spriteSourceSize.x,r[a].spriteSourceSize.y,r[a].spriteSourceSize.w,r[a].spriteSourceSize.h),o++;return n}},XMLData:function(e,t){if(t.getElementsByTagName("TextureAtlas")){for(var i,n,r,o,a,s,p,l,h,u,d,c=new U.FrameData,_=t.getElementsByTagName("SubTexture"),y=0;y<_.length;y++)n=(r=_[y].attributes).name.value,o=parseInt(r.x.value,10),a=parseInt(r.y.value,10),s=parseInt(r.width.value,10),p=parseInt(r.height.value,10),h=l=null,r.frameX&&(l=Math.abs(parseInt(r.frameX.value,10)),h=Math.abs(parseInt(r.frameY.value,10)),u=parseInt(r.frameWidth.value,10),d=parseInt(r.frameHeight.value,10)),i=c.addFrame(new U.Frame(y,o,a,s,p,n)),null===l&&null===h||i.setTrim(!0,s,p,l,h,u,d);return c}}},U.Cache=function(e){this.game=e,this.autoResolveURL=!1,this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}},this._urlMap={},this._urlResolver=new Image,this._urlTemp=null,this.onSoundUnlock=new U.Signal,this._cacheMap=[],this._cacheMap[U.Cache.CANVAS]=this._cache.canvas,this._cacheMap[U.Cache.IMAGE]=this._cache.image,this._cacheMap[U.Cache.TEXTURE]=this._cache.texture,this._cacheMap[U.Cache.SOUND]=this._cache.sound,this._cacheMap[U.Cache.TEXT]=this._cache.text,this._cacheMap[U.Cache.PHYSICS]=this._cache.physics,this._cacheMap[U.Cache.TILEMAP]=this._cache.tilemap,this._cacheMap[U.Cache.BINARY]=this._cache.binary,this._cacheMap[U.Cache.BITMAPDATA]=this._cache.bitmapData,this._cacheMap[U.Cache.BITMAPFONT]=this._cache.bitmapFont,this._cacheMap[U.Cache.JSON]=this._cache.json,this._cacheMap[U.Cache.XML]=this._cache.xml,this._cacheMap[U.Cache.VIDEO]=this._cache.video,this._cacheMap[U.Cache.SHADER]=this._cache.shader,this._cacheMap[U.Cache.RENDER_TEXTURE]=this._cache.renderTexture,this.addDefaultImage(),this.addMissingImage()},U.Cache.CANVAS=1,U.Cache.IMAGE=2,U.Cache.TEXTURE=3,U.Cache.SOUND=4,U.Cache.TEXT=5,U.Cache.PHYSICS=6,U.Cache.TILEMAP=7,U.Cache.BINARY=8,U.Cache.BITMAPDATA=9,U.Cache.BITMAPFONT=10,U.Cache.JSON=11,U.Cache.XML=12,U.Cache.VIDEO=13,U.Cache.SHADER=14,U.Cache.RENDER_TEXTURE=15,U.Cache.DEFAULT=null,U.Cache.MISSING=null,U.Cache.prototype={addCanvas:function(e,t,i){void 0===i&&(i=t.getContext("2d")),this._cache.canvas[e]={canvas:t,context:i}},addImage:function(e,t,i){this.checkImageKey(e)&&this.removeImage(e);var n={key:e,url:t,data:i,base:new PIXI.BaseTexture(i),frame:new U.Frame(0,0,0,i.width,i.height,e),frameData:new U.FrameData};return n.frameData.addFrame(new U.Frame(0,0,0,i.width,i.height,t)),this._cache.image[e]=n,this._resolveURL(t,n),"__default"===e?U.Cache.DEFAULT=new PIXI.Texture(n.base):"__missing"===e&&(U.Cache.MISSING=new PIXI.Texture(n.base)),n},addDefaultImage:function(){var e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==";var t=this.addImage("__default",null,e);t.base.skipRender=!0,U.Cache.DEFAULT=new PIXI.Texture(t.base)},addMissingImage:function(){var e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==";var t=this.addImage("__missing",null,e);U.Cache.MISSING=new PIXI.Texture(t.base)},addSound:function(e,t,i,n,r){void 0===n&&(r=!(n=!0)),void 0===r&&(r=!(n=!1));var o=!1;r&&(o=!0),this._cache.sound[e]={url:t,data:i,isDecoding:!1,decoded:o,webAudio:n,audioTag:r,locked:this.game.sound.touchLocked},this._resolveURL(t,this._cache.sound[e])},addText:function(e,t,i){this._cache.text[e]={url:t,data:i},this._resolveURL(t,this._cache.text[e])},addPhysicsData:function(e,t,i,n){this._cache.physics[e]={url:t,data:i,format:n},this._resolveURL(t,this._cache.physics[e])},addTilemap:function(e,t,i,n){this._cache.tilemap[e]={url:t,data:i,format:n},this._resolveURL(t,this._cache.tilemap[e])},addBinary:function(e,t){this._cache.binary[e]=t},addBitmapData:function(e,t,i){return t.key=e,void 0===i&&(i=new U.FrameData).addFrame(t.textureFrame),this._cache.bitmapData[e]={data:t,frameData:i},t},addBitmapFont:function(e,t,i,n,r,o,a){var s={url:t,data:i,font:null,base:new PIXI.BaseTexture(i)};void 0===o&&(o=0),void 0===a&&(a=0),s.font="json"===r?U.LoaderParser.jsonBitmapFont(n,s.base,o,a):U.LoaderParser.xmlBitmapFont(n,s.base,o,a),this._cache.bitmapFont[e]=s,this._resolveURL(t,s)},addJSON:function(e,t,i){this._cache.json[e]={url:t,data:i},this._resolveURL(t,this._cache.json[e])},addXML:function(e,t,i){this._cache.xml[e]={url:t,data:i},this._resolveURL(t,this._cache.xml[e])},addVideo:function(e,t,i,n){this._cache.video[e]={url:t,data:i,isBlob:n,locked:!0},this._resolveURL(t,this._cache.video[e])},addShader:function(e,t,i){this._cache.shader[e]={url:t,data:i},this._resolveURL(t,this._cache.shader[e])},addRenderTexture:function(e,t){this._cache.renderTexture[e]={texture:t,frame:new U.Frame(0,0,0,t.width,t.height,"","")}},addSpriteSheet:function(e,t,i,n,r,o,a,s){void 0===o&&(o=-1),void 0===a&&(a=0),void 0===s&&(s=0);var p={key:e,url:t,data:i,frameWidth:n,frameHeight:r,margin:a,spacing:s,base:new PIXI.BaseTexture(i),frameData:U.AnimationParser.spriteSheet(this.game,i,n,r,o,a,s)};this._cache.image[e]=p,this._resolveURL(t,p)},addTextureAtlas:function(e,t,i,n,r){var o={key:e,url:t,data:i,base:new PIXI.BaseTexture(i)};r===U.Loader.TEXTURE_ATLAS_XML_STARLING?o.frameData=U.AnimationParser.XMLData(this.game,n,e):r===U.Loader.TEXTURE_ATLAS_JSON_PYXEL?o.frameData=U.AnimationParser.JSONDataPyxel(this.game,n,e):Array.isArray(n.frames)?o.frameData=U.AnimationParser.JSONData(this.game,n,e):o.frameData=U.AnimationParser.JSONDataHash(this.game,n,e),this._cache.image[e]=o,this._resolveURL(t,o)},reloadSound:function(e){var t=this,i=this.getSound(e);i&&(i.data.src=i.url,i.data.addEventListener("canplaythrough",function(){return t.reloadSoundComplete(e)},!1),i.data.load())},reloadSoundComplete:function(e){var t=this.getSound(e);t&&(t.locked=!1,this.onSoundUnlock.dispatch(e))},updateSound:function(e,t,i){var n=this.getSound(e);n&&(n[t]=i)},decodedSound:function(e,t){var i=this.getSound(e);i.data=t,i.decoded=!0,i.isDecoding=!1},isSoundDecoded:function(e){var t=this.getItem(e,U.Cache.SOUND,"isSoundDecoded");if(t)return t.decoded},isSoundReady:function(e){var t=this.getItem(e,U.Cache.SOUND,"isSoundDecoded");if(t)return t.decoded&&!this.game.sound.touchLocked},checkKey:function(e,t){return!!this._cacheMap[e][t]},checkURL:function(e){return!!this._urlMap[this._resolveURL(e)]},checkCanvasKey:function(e){return this.checkKey(U.Cache.CANVAS,e)},checkImageKey:function(e){return this.checkKey(U.Cache.IMAGE,e)},checkTextureKey:function(e){return this.checkKey(U.Cache.TEXTURE,e)},checkSoundKey:function(e){return this.checkKey(U.Cache.SOUND,e)},checkTextKey:function(e){return this.checkKey(U.Cache.TEXT,e)},checkPhysicsKey:function(e){return this.checkKey(U.Cache.PHYSICS,e)},checkTilemapKey:function(e){return this.checkKey(U.Cache.TILEMAP,e)},checkBinaryKey:function(e){return this.checkKey(U.Cache.BINARY,e)},checkBitmapDataKey:function(e){return this.checkKey(U.Cache.BITMAPDATA,e)},checkBitmapFontKey:function(e){return this.checkKey(U.Cache.BITMAPFONT,e)},checkJSONKey:function(e){return this.checkKey(U.Cache.JSON,e)},checkXMLKey:function(e){return this.checkKey(U.Cache.XML,e)},checkVideoKey:function(e){return this.checkKey(U.Cache.VIDEO,e)},checkShaderKey:function(e){return this.checkKey(U.Cache.SHADER,e)},checkRenderTextureKey:function(e){return this.checkKey(U.Cache.RENDER_TEXTURE,e)},getItem:function(e,t,i,n){return this.checkKey(t,e)?void 0===n?this._cacheMap[t][e]:this._cacheMap[t][e][n]:null},getCanvas:function(e){return this.getItem(e,U.Cache.CANVAS,"getCanvas","canvas")},getImage:function(e,t){null!=e||(e="__default"),void 0===t&&(t=!1);var i=this.getItem(e,U.Cache.IMAGE,"getImage");return null===i&&(i=this.getItem("__missing",U.Cache.IMAGE,"getImage")),t?i:i.data},getTextureFrame:function(e){return this.getItem(e,U.Cache.TEXTURE,"getTextureFrame","frame")},getSound:function(e){return this.getItem(e,U.Cache.SOUND,"getSound")},getSoundData:function(e){return this.getItem(e,U.Cache.SOUND,"getSoundData","data")},getText:function(e){return this.getItem(e,U.Cache.TEXT,"getText","data")},getPhysicsData:function(e,t,i){var n=this.getItem(e,U.Cache.PHYSICS,"getPhysicsData","data");if(null===n||null==t)return n;if(n[t]){var r=n[t];if(!r||!i)return r;for(var o in r)if((o=r[o]).fixtureKey===i)return o}return null},getTilemapData:function(e){return this.getItem(e,U.Cache.TILEMAP,"getTilemapData")},getBinary:function(e){return this.getItem(e,U.Cache.BINARY,"getBinary")},getBitmapData:function(e){return this.getItem(e,U.Cache.BITMAPDATA,"getBitmapData","data")},getBitmapFont:function(e){return this.getItem(e,U.Cache.BITMAPFONT,"getBitmapFont")},getJSON:function(e,t){var i=this.getItem(e,U.Cache.JSON,"getJSON","data");return i?t?U.Utils.extend(!0,Array.isArray(i)?[]:{},i):i:null},getXML:function(e){return this.getItem(e,U.Cache.XML,"getXML","data")},getVideo:function(e){return this.getItem(e,U.Cache.VIDEO,"getVideo")},getShader:function(e){return this.getItem(e,U.Cache.SHADER,"getShader","data")},getRenderTexture:function(e){return this.getItem(e,U.Cache.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getBaseTexture","base")},getFrame:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getFrame","frame")},getFrameCount:function(e,t){var i=this.getFrameData(e,t);return i?i.total:0},getFrameData:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getFrameData","frameData")},hasFrameData:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),null!==this.getItem(e,t,"","frameData")},updateFrameData:function(e,t,i){void 0===i&&(i=U.Cache.IMAGE),this._cacheMap[i][e]&&(this._cacheMap[i][e].frameData=t)},getFrameByIndex:function(e,t,i){var n=this.getFrameData(e,i);return n?n.getFrame(t):null},getFrameByName:function(e,t,i){var n=this.getFrameData(e,i);return n?n.getFrameByName(t):null},getURL:function(e){return(e=this._resolveURL(e))?this._urlMap[e]:null},getKeys:function(e){void 0===e&&(e=U.Cache.IMAGE);var t=[];if(this._cacheMap[e])for(var i in this._cacheMap[e])"__default"!==i&&"__missing"!==i&&t.push(i);return t},removeCanvas:function(e){delete this._cache.canvas[e]},removeImage:function(e,t){void 0===t&&(t=!0);var i=this.getImage(e,!0);t&&i.base&&i.base.destroy(),delete this._cache.image[e]},removeSound:function(e){delete this._cache.sound[e]},removeText:function(e){delete this._cache.text[e]},removePhysics:function(e){delete this._cache.physics[e]},removeTilemap:function(e){delete this._cache.tilemap[e]},removeBinary:function(e){delete this._cache.binary[e]},removeBitmapData:function(e){delete this._cache.bitmapData[e]},removeBitmapFont:function(e){delete this._cache.bitmapFont[e]},removeJSON:function(e){delete this._cache.json[e]},removeXML:function(e){delete this._cache.xml[e]},removeVideo:function(e){delete this._cache.video[e]},removeShader:function(e){delete this._cache.shader[e]},removeRenderTexture:function(e){delete this._cache.renderTexture[e]},removeSpriteSheet:function(e){delete this._cache.spriteSheet[e]},removeTextureAtlas:function(e){delete this._cache.atlas[e]},clearGLTextures:function(){for(var e in this._cache.image)this._cache.image[e].base._glTextures=[]},_resolveURL:function(e,t){return this.autoResolveURL?(this._urlResolver.src=this.game.load.baseURL+e,this._urlTemp=this._urlResolver.src,this._urlResolver.src="",t&&(this._urlMap[this._urlTemp]=t),this._urlTemp):null},destroy:function(){for(var e=0;e<this._cacheMap.length;e++){var t=this._cacheMap[e];for(var i in t)"__default"!==i&&"__missing"!==i&&(t[i].destroy&&t[i].destroy(),delete t[i])}this._urlMap=null,this._urlResolver=null,this._urlTemp=null}},U.Cache.prototype.constructor=U.Cache,U.Loader=function(e){this.game=e,this.cache=e.cache,this.resetLocked=!1,this.isLoading=!1,this.hasLoaded=!1,this.preloadSprite=null,this.crossOrigin=!1,this.baseURL="",this.path="",this.headers={requestedWith:!1,json:"application/json",xml:"application/xml"},this.onLoadStart=new U.Signal,this.onLoadComplete=new U.Signal,this.onPackComplete=new U.Signal,this.onFileStart=new U.Signal,this.onFileComplete=new U.Signal,this.onFileError=new U.Signal,this.useXDomainRequest=!1,this._warnedAboutXDomainRequest=!1,this.enableParallel=!0,this.maxParallelDownloads=4,this._withSyncPointDepth=0,this._fileList=[],this._flightQueue=[],this._processingHead=0,this._fileLoadStarted=!1,this._totalPackCount=0,this._totalFileCount=0,this._loadedPackCount=0,this._loadedFileCount=0},U.Loader.TEXTURE_ATLAS_JSON_ARRAY=0,U.Loader.TEXTURE_ATLAS_JSON_HASH=1,U.Loader.TEXTURE_ATLAS_XML_STARLING=2,U.Loader.PHYSICS_LIME_CORONA_JSON=3,U.Loader.PHYSICS_PHASER_JSON=4,U.Loader.TEXTURE_ATLAS_JSON_PYXEL=5,U.Loader.prototype={setPreloadSprite:function(e,t){t=t||0,this.preloadSprite={sprite:e,direction:t,width:e.width,height:e.height,rect:null},this.preloadSprite.rect=0===t?new U.Rectangle(0,0,1,e.height):new U.Rectangle(0,0,e.width,1),e.crop(this.preloadSprite.rect),e.visible=!0},resize:function(){this.preloadSprite&&this.preloadSprite.height!==this.preloadSprite.sprite.height&&(this.preloadSprite.rect.height=this.preloadSprite.sprite.height)},checkKeyExists:function(e,t){return-1<this.getAssetIndex(e,t)},getAssetIndex:function(e,t){for(var i=-1,n=0;n<this._fileList.length;n++){var r=this._fileList[n];if(r.type===e&&r.key===t&&(i=n,!r.loaded&&!r.loading))break}return i},getAsset:function(e,t){var i=this.getAssetIndex(e,t);return-1<i&&{index:i,file:this._fileList[i]}},reset:function(e,t){void 0===t&&(t=!1),this.resetLocked||(e&&(this.preloadSprite=null),this.isLoading=!1,this._processingHead=0,this._fileList.length=0,this._flightQueue.length=0,this._fileLoadStarted=!1,this._totalFileCount=0,this._totalPackCount=0,this._loadedPackCount=0,this._loadedFileCount=0,t&&(this.onLoadStart.removeAll(),this.onLoadComplete.removeAll(),this.onPackComplete.removeAll(),this.onFileStart.removeAll(),this.onFileComplete.removeAll(),this.onFileError.removeAll()))},addToFileList:function(e,t,i,n,r,o){if(void 0===r&&(r=!1),void 0===t||""===t)return this;if(null==i){if(!o)return this;i=t+o}var a={type:e,key:t,path:this.path,url:i,syncPoint:0<this._withSyncPointDepth,data:null,loading:!1,loaded:!1,error:!1};if(n)for(var s in n)a[s]=n[s];var p=this.getAssetIndex(e,t);if(r&&-1<p){var l=this._fileList[p];l.loading||l.loaded?(this._fileList.push(a),this._totalFileCount++):this._fileList[p]=a}else-1===p&&(this._fileList.push(a),this._totalFileCount++);return this},replaceInFileList:function(e,t,i,n){return this.addToFileList(e,t,i,n,!0)},pack:function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),!t&&!i)return this;var r={type:"packfile",key:e,url:t,path:this.path,syncPoint:!0,data:null,loading:!1,loaded:!1,error:!1,callbackContext:n};i&&("string"==typeof i&&(i=JSON.parse(i)),r.data=i||{},r.loaded=!0);for(var o=0;o<this._fileList.length+1;o++){var a=this._fileList[o];if(!a||!a.loaded&&!a.loading&&"packfile"!==a.type){this._fileList.splice(o,0,r),this._totalPackCount++;break}}return this},image:function(e,t,i){return this.addToFileList("image",e,t,void 0,i,".png")},images:function(e,t){if(Array.isArray(t))for(var i=0;i<e.length;i++)this.image(e[i],t[i]);else for(i=0;i<e.length;i++)this.image(e[i]);return this},text:function(e,t,i){return this.addToFileList("text",e,t,void 0,i,".txt")},json:function(e,t,i){return this.addToFileList("json",e,t,void 0,i,".json")},shader:function(e,t,i){return this.addToFileList("shader",e,t,void 0,i,".frag")},xml:function(e,t,i){return this.addToFileList("xml",e,t,void 0,i,".xml")},script:function(e,t,i,n){return void 0===i&&(i=!1),!1!==i&&void 0===n&&(n=this),this.addToFileList("script",e,t,{syncPoint:!0,callback:i,callbackContext:n},!1,".js")},binary:function(e,t,i,n){return void 0===i&&(i=!1),!1!==i&&void 0===n&&(n=i),this.addToFileList("binary",e,t,{callback:i,callbackContext:n},!1,".bin")},spritesheet:function(e,t,i,n,r,o,a){return void 0===r&&(r=-1),void 0===o&&(o=0),void 0===a&&(a=0),this.addToFileList("spritesheet",e,t,{frameWidth:i,frameHeight:n,frameMax:r,margin:o,spacing:a},!1,".png")},audio:function(e,t,i){return this.game.sound.noAudio?this:(void 0===i&&(i=!0),"string"==typeof t&&(t=[t]),this.addToFileList("audio",e,t,{buffer:null,autoDecode:i}))},audioSprite:function(e,t,i,n,r){return this.game.sound.noAudio||(void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=!0),this.audio(e,t,r),i?this.json(e+"-audioatlas",i):n&&("string"==typeof n&&(n=JSON.parse(n)),this.cache.addJSON(e+"-audioatlas","",n))),this},audiosprite:function(e,t,i,n,r){return this.audioSprite(e,t,i,n,r)},video:function(e,t,i,n){return void 0===i&&(i=this.game.device.firefox?"loadeddata":"canplaythrough"),void 0===n&&(n=!1),"string"==typeof t&&(t=[t]),this.addToFileList("video",e,t,{buffer:null,asBlob:n,loadEvent:i})},tilemap:function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=U.Tilemap.CSV),t||i||(t=n===U.Tilemap.CSV?e+".csv":e+".json"),i){switch(n){case U.Tilemap.CSV:break;case U.Tilemap.TILED_JSON:"string"==typeof i&&(i=JSON.parse(i))}this.cache.addTilemap(e,null,i,n)}else this.addToFileList("tilemap",e,t,{format:n});return this},physics:function(e,t,i,n){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=U.Physics.LIME_CORONA_JSON),t||i||(t=e+".json"),i?("string"==typeof i&&(i=JSON.parse(i)),this.cache.addPhysicsData(e,null,i,n)):this.addToFileList("physics",e,t,{format:n}),this},bitmapFont:function(e,t,i,n,r,o){if(null!=t||(t=e+".png"),void 0===i&&(i=null),void 0===n&&(n=null),null===i&&null===n&&(i=e+".xml"),void 0===r&&(r=0),void 0===o&&(o=0),i)this.addToFileList("bitmapfont",e,t,{atlasURL:i,xSpacing:r,ySpacing:o});else if("string"==typeof n){var a,s;try{a=JSON.parse(n)}catch(e){s=this.parseXml(n)}if(!s&&!a)throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");this.addToFileList("bitmapfont",e,t,{atlasURL:null,atlasData:a||s,atlasType:a?"json":"xml",xSpacing:r,ySpacing:o})}return this},atlasJSONArray:function(e,t,i,n){return this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_JSON_ARRAY)},atlasJSONHash:function(e,t,i,n){return this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_JSON_HASH)},atlasXML:function(e,t,i,n){return void 0===i&&(i=null),void 0===n&&(n=null),i||n||(i=e+".xml"),this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_XML_STARLING)},atlas:function(e,t,i,n,r){if(null!=t||(t=e+".png"),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=U.Loader.TEXTURE_ATLAS_JSON_ARRAY),i||n||(i=r===U.Loader.TEXTURE_ATLAS_XML_STARLING?e+".xml":e+".json"),i)this.addToFileList("textureatlas",e,t,{atlasURL:i,format:r});else{switch(r){case U.Loader.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof n&&(n=JSON.parse(n));break;case U.Loader.TEXTURE_ATLAS_XML_STARLING:if("string"==typeof n){var o=this.parseXml(n);if(!o)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");n=o}}this.addToFileList("textureatlas",e,t,{atlasURL:null,atlasData:n,format:r})}return this},withSyncPoint:function(e,t){this._withSyncPointDepth++;try{e.call(t||this,this)}finally{this._withSyncPointDepth--}return this},addSyncPoint:function(e,t){var i=this.getAsset(e,t);return i&&(i.file.syncPoint=!0),this},removeFile:function(e,t){var i=this.getAsset(e,t);i&&(i.loaded||i.loading||this._fileList.splice(i.index,1))},removeAll:function(){this._fileList.length=0,this._flightQueue.length=0},start:function(){this.isLoading||(this.hasLoaded=!1,this.isLoading=!0,this.updateProgress(),this.processLoadQueue())},processLoadQueue:function(){if(this.isLoading){for(var e=0;e<this._flightQueue.length;e++){((n=this._flightQueue[e]).loaded||n.error)&&(this._flightQueue.splice(e,1),e--,n.loading=!1,n.requestUrl=null,n.requestObject=null,n.error&&this.onFileError.dispatch(n.key,n),"packfile"!==n.type?(this._loadedFileCount++,this.onFileComplete.dispatch(this.progress,n.key,!n.error,this._loadedFileCount,this._totalFileCount)):"packfile"===n.type&&n.error&&(this._loadedPackCount++,this.onPackComplete.dispatch(n.key,!n.error,this._loadedPackCount,this._totalPackCount)))}var t=!1,i=this.enableParallel?U.Math.clamp(this.maxParallelDownloads,1,12):1;for(e=this._processingHead;e<this._fileList.length;e++){var n;if("packfile"===(n=this._fileList[e]).type&&!n.error&&n.loaded&&e===this._processingHead&&(this.processPack(n),this._loadedPackCount++,this.onPackComplete.dispatch(n.key,!n.error,this._loadedPackCount,this._totalPackCount)),n.loaded||n.error?e===this._processingHead&&(this._processingHead=e+1):!n.loading&&this._flightQueue.length<i&&("packfile"!==n.type||n.data?t||(this._fileLoadStarted||(this._fileLoadStarted=!0,this.onLoadStart.dispatch()),this._flightQueue.push(n),n.loading=!0,this.onFileStart.dispatch(this.progress,n.key,n.url),this.loadFile(n)):(this._flightQueue.push(n),n.loading=!0,this.loadFile(n))),!n.loaded&&n.syncPoint&&(t=!0),this._flightQueue.length>=i||t&&this._loadedPackCount===this._totalPackCount)break}if(this.updateProgress(),this._processingHead>=this._fileList.length)this.finishedLoading();else if(!this._flightQueue.length){var r=this;setTimeout(function(){r.finishedLoading(!0)},2e3)}}else this.finishedLoading(!0)},finishedLoading:function(e){this.hasLoaded||(this.hasLoaded=!0,this.isLoading=!1,e||this._fileLoadStarted||(this._fileLoadStarted=!0,this.onLoadStart.dispatch()),this.onLoadComplete.dispatch(),this.game.state.loadComplete(),this.reset())},asyncComplete:function(e,t){void 0===t&&(t=""),e.loaded=!0,e.error=!!t,t&&(e.errorMessage=t),this.processLoadQueue()},processPack:function(e){var t=e.data[e.key];if(t)for(var i=0;i<t.length;i++){var n=t[i];switch(n.type){case"image":this.image(n.key,n.url,n.overwrite);break;case"text":this.text(n.key,n.url,n.overwrite);break;case"json":this.json(n.key,n.url,n.overwrite);break;case"xml":this.xml(n.key,n.url,n.overwrite);break;case"script":this.script(n.key,n.url,n.callback,e.callbackContext||this);break;case"binary":this.binary(n.key,n.url,n.callback,e.callbackContext||this);break;case"spritesheet":this.spritesheet(n.key,n.url,n.frameWidth,n.frameHeight,n.frameMax,n.margin,n.spacing);break;case"video":this.video(n.key,n.urls);break;case"audio":this.audio(n.key,n.urls,n.autoDecode);break;case"audiosprite":this.audiosprite(n.key,n.urls,n.jsonURL,n.jsonData,n.autoDecode);break;case"tilemap":this.tilemap(n.key,n.url,n.data,U.Tilemap[n.format]);break;case"physics":this.physics(n.key,n.url,n.data,U.Loader[n.format]);break;case"bitmapFont":this.bitmapFont(n.key,n.textureURL,n.atlasURL,n.atlasData,n.xSpacing,n.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlasXML":this.atlasXML(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlas":this.atlas(n.key,n.textureURL,n.atlasURL,n.atlasData,U.Loader[n.format]);break;case"shader":this.shader(n.key,n.url,n.overwrite)}}},transformUrl:function(e,t){return!!e&&(e.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e:this.baseURL+t.path+e)},loadFile:function(e){switch(e.type){case"packfile":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.fileComplete);break;case"image":case"spritesheet":case"textureatlas":case"bitmapfont":this.loadImageTag(e);break;case"audio":e.url=this.getAudioURL(e.url),e.url?this.game.sound.usingWebAudio?this.xhrLoad(e,this.transformUrl(e.url,e),"arraybuffer",this.fileComplete):this.game.sound.usingAudioTag&&this.loadAudioTag(e):this.fileError(e,null,"No supported audio URL specified or device does not have audio playback support");break;case"video":e.url=this.getVideoURL(e.url),e.url?e.asBlob?this.xhrLoad(e,this.transformUrl(e.url,e),"blob",this.fileComplete):this.loadVideoTag(e):this.fileError(e,null,"No supported video URL specified or device does not have video playback support");break;case"json":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.xmlLoadComplete);break;case"tilemap":e.format===U.Tilemap.TILED_JSON?this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.jsonLoadComplete):e.format===U.Tilemap.CSV?this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.csvLoadComplete):this.asyncComplete(e,"invalid Tilemap format: "+e.format);break;case"text":case"script":case"shader":case"physics":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.fileComplete);break;case"binary":this.xhrLoad(e,this.transformUrl(e.url,e),"arraybuffer",this.fileComplete)}},loadImageTag:function(e){var t=this;e.data=new Image,e.data.name=e.key,this.crossOrigin&&(e.data.crossOrigin=this.crossOrigin),e.data.onload=function(){e.data.onload&&(e.data.onload=null,e.data.onerror=null,t.fileComplete(e))},e.data.onerror=function(){e.data.onload&&(e.data.onload=null,e.data.onerror=null,t.fileError(e))},e.data.src=this.transformUrl(e.url,e),e.data.complete&&e.data.width&&e.data.height&&(e.data.onload=null,e.data.onerror=null,this.fileComplete(e))},loadVideoTag:function(e){var t=this;e.data=document.createElement("video"),e.data.name=e.key,e.data.controls=!1,e.data.autoplay=!1;var i=function(){e.data.removeEventListener(e.loadEvent,i,!1),e.data.onerror=null,e.data.canplay=!0,U.GAMES[t.game.id].load.fileComplete(e)};e.data.onerror=function(){e.data.removeEventListener(e.loadEvent,i,!1),e.data.onerror=null,e.data.canplay=!1,t.fileError(e)},e.data.addEventListener(e.loadEvent,i,!1),e.data.src=this.transformUrl(e.url,e),e.data.load()},loadAudioTag:function(e){var t=this;if(this.game.sound.touchLocked)e.data=new Audio,e.data.name=e.key,e.data.preload="auto",e.data.src=this.transformUrl(e.url,e),this.fileComplete(e);else{e.data=new Audio,e.data.name=e.key;var i=function(){e.data.removeEventListener("canplaythrough",i,!1),e.data.onerror=null,t.fileComplete(e)};e.data.onerror=function(){e.data.removeEventListener("canplaythrough",i,!1),e.data.onerror=null,t.fileError(e)},e.data.preload="auto",e.data.src=this.transformUrl(e.url,e),e.data.addEventListener("canplaythrough",i,!1),e.data.load()}},xhrLoad:function(t,e,i,n,r){if(this.useXDomainRequest&&window.XDomainRequest)this.xhrLoadWithXDR(t,e,i,n,r);else{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType=i,!1!==this.headers.requestedWith&&o.setRequestHeader("X-Requested-With",this.headers.requestedWith),this.headers[t.type]&&o.setRequestHeader("Accept",this.headers[t.type]),r=r||this.fileError;var a=this;o.onload=function(){try{return 4===o.readyState&&400<=o.status&&o.status<=599?r.call(a,t,o):n.call(a,t,o)}catch(e){a.hasLoaded?window.console:a.asyncComplete(t,e.message||"Exception")}},o.onerror=function(){try{return r.call(a,t,o)}catch(e){a.hasLoaded?window.console:a.asyncComplete(t,e.message||"Exception")}},t.requestObject=o,t.requestUrl=e,o.send()}},xhrLoadWithXDR:function(t,e,i,n,r){this._warnedAboutXDomainRequest||this.game.device.ie&&!(10<=this.game.device.ieVersion)||(this._warnedAboutXDomainRequest=!0);var o=new window.XDomainRequest;o.open("GET",e,!0),o.responseType=i,o.timeout=3e3,r=r||this.fileError;var a=this;o.onerror=function(){try{return r.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},o.ontimeout=function(){try{return r.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},o.onprogress=function(){},o.onload=function(){try{return 4===o.readyState&&400<=o.status&&o.status<=599?r.call(a,t,o):n.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},t.requestObject=o,t.requestUrl=e,setTimeout(function(){o.send()},0)},getVideoURL:function(e){for(var t=0;t<e.length;t++){var i,n=e[t];if(n.uri){if(i=n.type,n=n.uri,this.game.device.canPlayVideo(i))return n}else{if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return n;if(0<=n.indexOf("?")&&(n=n.substr(0,n.indexOf("?"))),i=n.substr((Math.max(0,n.lastIndexOf("."))||1/0)+1).toLowerCase(),this.game.device.canPlayVideo(i))return e[t]}}return null},getAudioURL:function(e){if(this.game.sound.noAudio)return null;for(var t=0;t<e.length;t++){var i,n=e[t];if(n.uri){if(i=n.type,n=n.uri,this.game.device.canPlayAudio(i))return n}else{if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return n;if(0<=n.indexOf("?")&&(n=n.substr(0,n.indexOf("?"))),i=n.substr((Math.max(0,n.lastIndexOf("."))||1/0)+1).toLowerCase(),this.game.device.canPlayAudio(i))return e[t]}}return null},fileError:function(e,t,i){var n="error loading asset from URL "+(e.requestUrl||this.transformUrl(e.url,e));!i&&t&&(i=t.status),i&&(n=n+" ("+i+")"),this.asyncComplete(e,n)},fileComplete:function(e,t){var i=!0;switch(e.type){case"packfile":var n=JSON.parse(t.responseText);e.data=n||{};break;case"image":this.cache.addImage(e.key,e.url,e.data);break;case"spritesheet":this.cache.addSpriteSheet(e.key,e.url,e.data,e.frameWidth,e.frameHeight,e.frameMax,e.margin,e.spacing);break;case"textureatlas":if(null==e.atlasURL)this.cache.addTextureAtlas(e.key,e.url,e.data,e.atlasData,e.format);else if(i=!1,e.format===U.Loader.TEXTURE_ATLAS_JSON_ARRAY||e.format===U.Loader.TEXTURE_ATLAS_JSON_HASH||e.format===U.Loader.TEXTURE_ATLAS_JSON_PYXEL)this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",this.jsonLoadComplete);else{if(e.format!==U.Loader.TEXTURE_ATLAS_XML_STARLING)throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+e.format);this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",this.xmlLoadComplete)}break;case"bitmapfont":e.atlasURL?(i=!1,this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",function(e,t){var i;try{i=JSON.parse(t.responseText)}catch(e){}i?(e.atlasType="json",this.jsonLoadComplete(e,t)):(e.atlasType="xml",this.xmlLoadComplete(e,t))})):this.cache.addBitmapFont(e.key,e.url,e.data,e.atlasData,e.atlasType,e.xSpacing,e.ySpacing);break;case"video":if(e.asBlob)try{e.data=t.response}catch(t){throw new Error("Phaser.Loader. Unable to parse video file as Blob: "+e.key)}this.cache.addVideo(e.key,e.url,e.data,e.asBlob);break;case"audio":this.game.sound.usingWebAudio?(e.data=t.response,this.cache.addSound(e.key,e.url,e.data,!0,!1),e.autoDecode&&this.game.sound.decode(e.key)):this.cache.addSound(e.key,e.url,e.data,!1,!0);break;case"text":e.data=t.responseText,this.cache.addText(e.key,e.url,e.data);break;case"shader":e.data=t.responseText,this.cache.addShader(e.key,e.url,e.data);break;case"physics":n=JSON.parse(t.responseText);this.cache.addPhysicsData(e.key,e.url,n,e.format);break;case"script":e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=t.responseText,document.head.appendChild(e.data),e.callback&&(e.data=e.callback.call(e.callbackContext,e.key,t.responseText));break;case"binary":e.callback?e.data=e.callback.call(e.callbackContext,e.key,t.response):e.data=t.response,this.cache.addBinary(e.key,e.data)}i&&this.asyncComplete(e)},jsonLoadComplete:function(e,t){var i=JSON.parse(t.responseText);"tilemap"===e.type?this.cache.addTilemap(e.key,e.url,i,e.format):"bitmapfont"===e.type?this.cache.addBitmapFont(e.key,e.url,e.data,i,e.atlasType,e.xSpacing,e.ySpacing):"json"===e.type?this.cache.addJSON(e.key,e.url,i):this.cache.addTextureAtlas(e.key,e.url,e.data,i,e.format),this.asyncComplete(e)},csvLoadComplete:function(e,t){var i=t.responseText;this.cache.addTilemap(e.key,e.url,i,e.format),this.asyncComplete(e)},xmlLoadComplete:function(e,t){var i=t.responseText,n=this.parseXml(i);if(n)"bitmapfont"===e.type?this.cache.addBitmapFont(e.key,e.url,e.data,n,e.atlasType,e.xSpacing,e.ySpacing):"textureatlas"===e.type?this.cache.addTextureAtlas(e.key,e.url,e.data,n,e.format):"xml"===e.type&&this.cache.addXML(e.key,e.url,n),this.asyncComplete(e);else{t.responseType||t.contentType;this.asyncComplete(e,"invalid XML")}},parseXml:function(e){var t;try{if(window.DOMParser)t=(new DOMParser).parseFromString(e,"text/xml");else(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)}catch(e){t=null}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length?t:null},updateProgress:function(){this.preloadSprite&&(0===this.preloadSprite.direction?this.preloadSprite.rect.width=Math.floor(this.preloadSprite.width/100*this.progress):this.preloadSprite.rect.height=Math.floor(this.preloadSprite.height/100*this.progress),this.preloadSprite.sprite?this.preloadSprite.sprite.updateCrop():this.preloadSprite=null)},totalLoadedFiles:function(){return this._loadedFileCount},totalQueuedFiles:function(){return this._totalFileCount-this._loadedFileCount},totalLoadedPacks:function(){return this._totalPackCount},totalQueuedPacks:function(){return this._totalPackCount-this._loadedPackCount}},Object.defineProperty(U.Loader.prototype,"progressFloat",{get:function(){var e=this._loadedFileCount/this._totalFileCount*100;return U.Math.clamp(e||0,0,100)}}),Object.defineProperty(U.Loader.prototype,"progress",{get:function(){return Math.round(this.progressFloat)}}),U.Loader.prototype.constructor=U.Loader,U.LoaderParser={bitmapFont:function(e,t,i,n){return this.xmlBitmapFont(e,t,i,n)},xmlBitmapFont:function(e,t,i,n){var r={},o=e.getElementsByTagName("info")[0],a=e.getElementsByTagName("common")[0];r.font=o.getAttribute("face"),r.size=parseInt(o.getAttribute("size"),10),r.lineHeight=parseInt(a.getAttribute("lineHeight"),10)+n,r.chars={};for(var s=e.getElementsByTagName("char"),p=0;p<s.length;p++){var l=parseInt(s[p].getAttribute("id"),10);r.chars[l]={x:parseInt(s[p].getAttribute("x"),10),y:parseInt(s[p].getAttribute("y"),10),width:parseInt(s[p].getAttribute("width"),10),height:parseInt(s[p].getAttribute("height"),10),xOffset:parseInt(s[p].getAttribute("xoffset"),10),yOffset:parseInt(s[p].getAttribute("yoffset"),10),xAdvance:parseInt(s[p].getAttribute("xadvance"),10)+i,kerning:{}}}var h=e.getElementsByTagName("kerning");for(p=0;p<h.length;p++){var u=parseInt(h[p].getAttribute("first"),10),d=parseInt(h[p].getAttribute("second"),10),c=parseInt(h[p].getAttribute("amount"),10);r.chars[d].kerning[u]=c}return this.finalizeBitmapFont(t,r)},jsonBitmapFont:function(e,t,i,n){var r={font:e.font.info._face,size:parseInt(e.font.info._size,10),lineHeight:parseInt(e.font.common._lineHeight,10)+n,chars:{}};return e.font.chars.char.forEach(function(e){var t=parseInt(e._id,10);r.chars[t]={x:parseInt(e._x,10),y:parseInt(e._y,10),width:parseInt(e._width,10),height:parseInt(e._height,10),xOffset:parseInt(e._xoffset,10),yOffset:parseInt(e._yoffset,10),xAdvance:parseInt(e._xadvance,10)+i,kerning:{}}}),e.font.kernings&&e.font.kernings.kerning&&e.font.kernings.kerning.forEach(function(e){r.chars[e._second].kerning[e._first]=parseInt(e._amount,10)}),this.finalizeBitmapFont(t,r)},finalizeBitmapFont:function(i,n){return Object.keys(n.chars).forEach(function(e){var t=n.chars[e];t.texture=new PIXI.Texture(i,new U.Rectangle(t.x,t.y,t.width,t.height))}),n}},U.AudioSprite=function(e,t){for(var i in this.game=e,this.key=t,this.config=this.game.cache.getJSON(t+"-audioatlas"),this.autoplayKey=null,this.autoplay=!1,this.sounds={},this.config.spritemap){var n=this.config.spritemap[i],r=this.game.add.sound(this.key);r.addMarker(i,n.start,n.end-n.start,null,n.loop),this.sounds[i]=r}this.config.autoplay&&(this.autoplayKey=this.config.autoplay,this.play(this.autoplayKey),this.autoplay=this.sounds[this.autoplayKey])},U.AudioSprite.prototype={play:function(e,t){return void 0===t&&(t=1),this.sounds[e].play(e,null,t)},stop:function(e){if(e)this.sounds[e].stop();else for(var t in this.sounds)this.sounds[t].stop()},get:function(e){return this.sounds[e]}},U.AudioSprite.prototype.constructor=U.AudioSprite,U.Sound=function(e,t,i,n,r){void 0===i&&(i=1),void 0===n&&(n=!1),void 0===r&&(r=e.sound.connectToMaster),this.game=e,this.name=t,this.key=t,this.loop=n,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.fadeTween=null,this.pendingPlayback=!1,this.override=!1,this.allowMultiple=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this._sound=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,void 0===this.context.createGain?this.gainNode=this.context.createGainNode():this.gainNode=this.context.createGain(),this.gainNode.gain.value=i*this.game.sound.volume,r&&this.gainNode.connect(this.masterGainNode)):this.usingAudioTag&&(this.game.cache.getSound(t)&&this.game.cache.isSoundReady(t)?(this._sound=this.game.cache.getSoundData(t),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this)),this.onDecoded=new U.Signal,this.onPlay=new U.Signal,this.onPause=new U.Signal,this.onResume=new U.Signal,this.onLoop=new U.Signal,this.onStop=new U.Signal,this.onMute=new U.Signal,this.onMarkerComplete=new U.Signal,this.onFadeComplete=new U.Signal,this._volume=i,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._tempPause=0,this._muteVolume=0,this._tempLoop=0,this._paused=!1,this._onDecodedEventDispatched=!1},U.Sound.prototype={soundHasUnlocked:function(e){e===this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},addMarker:function(e,t,i,n,r){null!=i||(i=1),null!=n||(n=1),void 0===r&&(r=!1),this.markers[e]={name:e,start:t,stop:t+i,volume:n,duration:i,durationMS:1e3*i,loop:r}},removeMarker:function(e){delete this.markers[e]},onEndedHandler:function(){this._sound.onended=null,this.isPlaying=!1,this.currentTime=this.durationMS,this.stop()},update:function(){this.game.cache.checkSoundKey(this.key)?(this.isDecoded&&!this._onDecodedEventDispatched&&(this.onDecoded.dispatch(this),this._onDecodedEventDispatched=!0),this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),this.isPlaying&&(this.currentTime=this.game.time.time-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.onLoop.dispatch(this),this.isPlaying=!1,""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.time.time,this.isPlaying=!0):(this.onMarkerComplete.dispatch(this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):""!==this.currentMarker&&this.stop():this.loop?(this.onLoop.dispatch(this),""===this.currentMarker&&(this.currentTime=0,this.startTime=this.game.time.time),this.isPlaying=!1,this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop()))):this.destroy()},loopFull:function(e){return this.play(null,0,e,!0)},play:function(e,t,i,n,r){if(void 0!==e&&!1!==e&&null!==e||(e=""),void 0===r&&(r=!0),this.isPlaying&&!this.allowMultiple&&!r&&!this.override)return this;if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||r)){if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(e){}this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);this.isPlaying=!1}var o=Object.keys(this.markers);if(""===e&&1===o.length&&(e=o[0]),""===e&&0<o.length)return this;if(""!==e){if(!this.markers[e])return this;this.currentMarker=e,this.position=this.markers[e].start,this.volume=this.markers[e].volume,this.loop=this.markers[e].loop,this.duration=this.markers[e].duration,this.durationMS=this.markers[e].durationMS,void 0!==i&&(this.volume=i),void 0!==n&&(this.loop=n),this._tempMarker=e,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else t=t||0,void 0===i&&(i=this._volume),void 0===n&&(n=this.loop),this.position=Math.max(0,t),this.volume=i,this.loop=n,this.duration=0,this.durationMS=0,this._tempMarker=e,this._tempPosition=t,this._tempVolume=i,this._tempLoop=n;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(this._sound=this.context.createBufferSource(),this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this._buffer=this.game.cache.getSoundData(this.key),this._sound.buffer=this._buffer,this.loop&&""===e&&(this._sound.loop=!0),this.loop||""!==e||(this._sound.onended=this.onEndedHandler.bind(this)),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=Math.ceil(1e3*this.totalDuration)),void 0===this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this.loop&&""===e?this._sound.start(0,0):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.time.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&!1===this.game.cache.getSound(this.key).isDecoding&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(this.game.device.wechatMinigame||this.game.device.cocoonJS||4===this._sound.readyState)?(this.loop&&(this._sound.loop=!0),!this.loop&&""===e&&this.game.device.wechatMinigame&&this._sound.addEventListener("ended",this.onEndedHandler.bind(this)),this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._muted||this.game.sound.mute?this._sound.volume=0:this._sound.volume=this._volume,this.isPlaying=!0,this.startTime=this.game.time.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):this.pendingPlayback=!0,this},restart:function(e,t,i,n){e=e||"",t=t||0,i=i||1,void 0===n&&(n=!1),this.play(e,t,i,n,!0)},pause:function(){this.isPlaying&&this._sound&&(this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.time.time,this._tempPause=this._sound.currentTime,this.onPause.dispatch(this),this.stop())},resume:function(){if(this.paused&&this._sound){if(this.usingWebAudio){var e=Math.max(0,this.position+this.pausedPosition/1e3);this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this.loop&&(this._sound.loop=!0),this.loop||""!==this.currentMarker||(this._sound.onended=this.onEndedHandler.bind(this));var t=this.duration-this.pausedPosition/1e3;void 0===this._sound.start?this._sound.noteGrainOn(0,e,t):this.loop&&this.game.device.chrome?42===this.game.device.chromeVersion?this._sound.start(0):this._sound.start(0,e):this._sound.start(0,e,t)}else this._sound.currentTime=this._tempPause,this._sound.play();this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.time.time-this.pausedTime,this.onResume.dispatch(this)}},stop:function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(e){}this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(this.pendingPlayback=!1,this.isPlaying=!1,!this.paused){var e=this.currentMarker;""!==this.currentMarker&&this.onMarkerComplete.dispatch(this.currentMarker,this),this.currentMarker="",null!==this.fadeTween&&this.fadeTween.stop(),this.onStop.dispatch(this,e)}},fadeIn:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=this.currentMarker),this.paused||(this.play(i,0,0,t),this.fadeTo(e,1))},fadeOut:function(e){this.fadeTo(e,0)},fadeTo:function(e,t){if(this.isPlaying&&!this.paused&&t!==this.volume){if(void 0===e&&(e=1e3),void 0===t)return;this.fadeTween=this.game.add.tween(this).to({volume:t},e,U.Easing.Linear.None,!0),this.fadeTween.onComplete.add(this.fadeComplete,this)}},fadeComplete:function(){this.onFadeComplete.dispatch(this,this.volume),0===this.volume&&this.stop()},updateGlobalVolume:function(e){this.usingAudioTag&&this._sound&&(this._sound.volume=e*this._volume)},destroy:function(e){void 0===e&&(e=!0),this.stop(),e?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.onDecoded.dispose(),this.onPlay.dispose(),this.onPause.dispose(),this.onResume.dispose(),this.onLoop.dispose(),this.onStop.dispose(),this.onMute.dispose(),this.onMarkerComplete.dispose())}},U.Sound.prototype.constructor=U.Sound,Object.defineProperty(U.Sound.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(U.Sound.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(U.Sound.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(e){(e=e||!1)!==this._muted&&(e?(this._muted=!0,this._muteVolume=this._tempVolume,this.game.device.wechatMinigame?this._sound.pause():this.usingWebAudio?this.gainNode.gain.value=0:this.usingAudioTag&&this._sound&&(this._sound.volume=0)):(this._muted=!1,this.game.device.wechatMinigame&&this.isPlaying?this._sound.play():this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.onMute.dispatch(this))}}),Object.defineProperty(U.Sound.prototype,"volume",{get:function(){return this._volume},set:function(e){this.game.device.firefox&&this.usingAudioTag&&(e=this.game.math.clamp(e,0,1)),this._muted?this._muteVolume=e:(this._tempVolume=e,this._volume=e,this.usingWebAudio?this.gainNode.gain.value=e:this.usingAudioTag&&this._sound&&(this._sound.volume=e))}}),U.SoundManager=function(e){this.game=e,this.onSoundDecode=new U.Signal,this.onVolumeChange=new U.Signal,this.onMute=new U.Signal,this.onUnMute=new U.Signal,this.context=null,this.usingWebAudio=!1,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32,this.muteOnPause=!0,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this._watchList=new U.ArraySet,this._watching=!1,this._watchCallback=null,this._watchContext=null},U.SoundManager.prototype={boot:function(){if(this.game.device.iOS&&!1===this.game.device.webAudio&&(this.channels=1),window.PhaserGlobal){if(!0===window.PhaserGlobal.disableAudio)return this.noAudio=!0,void(this.touchLocked=!1);if(!0===window.PhaserGlobal.disableWebAudio)return this.usingAudioTag=!0,void(this.touchLocked=!1)}if(window.PhaserGlobal&&window.PhaserGlobal.audioContext)this.context=window.PhaserGlobal.audioContext;else if(window.AudioContext)try{this.context=new window.AudioContext}catch(e){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(e){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}if(null===this.context){if(void 0===window.Audio)return void(this.noAudio=!0);this.usingAudioTag=!0}else this.usingWebAudio=!0,void 0===this.context.createGain?this.masterGain=this.context.createGainNode():this.masterGain=this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination);this.noAudio||!this.game.device.cocoonJS&&(this.game.device.chrome||this.game.device.iOS||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock)&&this.setTouchLock()},setTouchLock:function(){this.noAudio||window.PhaserGlobal&&!0===window.PhaserGlobal.disableAudio||(8<this.game.device.iOSVersion||55<=this.game.device.chromeVersion?this.game.input.touch.addTouchLockCallback(this.unlock,this,!0):this.game.input.touch.addTouchLockCallback(this.unlock,this),this.touchLocked=!0)},unlock:function(){if(this.noAudio||!this.touchLocked||null!==this._unlockSource)return!0;if(this.usingAudioTag)this.touchLocked=!1,this._unlockSource=null;else if(this.usingWebAudio){var e=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=e,this._unlockSource.connect(this.context.destination),void 0===this._unlockSource.start?this._unlockSource.noteOn(0):this._unlockSource.start(0),"suspended"===this._unlockSource.context.state&&this._unlockSource.context.resume()}return!0},stopAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].stop()},pauseAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].pause()},resumeAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].resume()},decode:function(t,i){i=i||null;var e=this.game.cache.getSoundData(t);if(e&&!1===this.game.cache.isSoundDecoded(t)){this.game.cache.updateSound(t,"isDecoding",!0);var n=this;try{this.context.decodeAudioData(e,function(e){e&&(n.game.cache.decodedSound(t,e),n.onSoundDecode.dispatch(t,i))})}catch(t){}}},setDecodedCallback:function(e,t,i){"string"==typeof e&&(e=[e]),this._watchList.reset();for(var n=0;n<e.length;n++)e[n]instanceof U.Sound?this.game.cache.isSoundDecoded(e[n].key)||this._watchList.add(e[n].key):this.game.cache.isSoundDecoded(e[n])||this._watchList.add(e[n]);0===this._watchList.total?(this._watching=!1,t.call(i)):(this._watching=!0,this._watchCallback=t,this._watchContext=i)},update:function(){if(!this.noAudio){!this.touchLocked||null===this._unlockSource||this._unlockSource.playbackState!==this._unlockSource.PLAYING_STATE&&this._unlockSource.playbackState!==this._unlockSource.FINISHED_STATE||(this.touchLocked=!1,this._unlockSource=null);for(var e=0;e<this._sounds.length;e++)this._sounds[e].update();if(this._watching){for(var t=this._watchList.first;t;)this.game.cache.isSoundDecoded(t)&&this._watchList.remove(t),t=this._watchList.next;0===this._watchList.total&&(this._watching=!1,this._watchCallback.call(this._watchContext))}}},add:function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=!1),void 0===n&&(n=this.connectToMaster);var r=new U.Sound(this.game,e,t,i,n);return this._sounds.push(r),r},addSprite:function(e){return new U.AudioSprite(this.game,e)},remove:function(e){for(var t=this._sounds.length;t--;)if(this._sounds[t]===e)return this._sounds[t].destroy(!1),this._sounds.splice(t,1),!0;return!1},removeByKey:function(e){for(var t=this._sounds.length,i=0;t--;)this._sounds[t].key===e&&(this._sounds[t].destroy(!1),this._sounds.splice(t,1),i++);return i},play:function(e,t,i){if(!this.noAudio){var n=this.add(e,t,i);return n.play(),n}},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].mute=!0);this.onMute.dispatch()}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].mute=!1);this.onUnMute.dispatch()}},destroy:function(){this.stopAll();for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].destroy();this._sounds=[],this.onSoundDecode.dispose(),this.context&&(window.PhaserGlobal?window.PhaserGlobal.audioContext=this.context:this.context.close&&this.context.close())}},U.SoundManager.prototype.constructor=U.SoundManager,Object.defineProperty(U.SoundManager.prototype,"mute",{get:function(){return this._muted},set:function(e){if(e=e||!1){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(U.SoundManager.prototype,"volume",{get:function(){return this._volume},set:function(e){if(e<0?e=0:1<e&&(e=1),this._volume!==e){if(this._volume=e,this.usingWebAudio)this.masterGain.gain.value=e;else for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&this._sounds[t].updateGlobalVolume(e);this.onVolumeChange.dispatch(e)}}}),U.ScaleManager=function(e,t,i){this.game=e,this.dom=U.DOM,this.grid=null,this.width=0,this.height=0,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.offset=new U.Point,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this._pageAlignHorizontally=!1,this._pageAlignVertically=!1,this.onOrientationChange=new U.Signal,this.enterIncorrectOrientation=new U.Signal,this.leaveIncorrectOrientation=new U.Signal,this.hasPhaserSetFullScreen=!1,this.fullScreenTarget=null,this._createdFullScreenTarget=null,this.onFullScreenInit=new U.Signal,this.onFullScreenChange=new U.Signal,this.onFullScreenError=new U.Signal,this.screenOrientation=this.dom.getScreenOrientation(),this.scaleFactor=new U.Point(1,1),this.scaleFactorInversed=new U.Point(1,1),this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0},this.bounds=new U.Rectangle,this.aspectRatio=0,this.sourceAspectRatio=0,this.event=null,this.windowConstraints={right:"layout",bottom:""},this.compatibility={supportsFullScreen:!1,orientationFallback:null,noMargins:!1,scrollTo:null,forceMinimumDocumentHeight:!1,canExpandParent:!0,clickTrampoline:""},this._scaleMode=U.ScaleManager.NO_SCALE,this._fullScreenScaleMode=U.ScaleManager.NO_SCALE,this.parentIsWindow=!1,this.parentNode=null,this.parentScaleFactor=new U.Point(1,1),this.trackParentInterval=2e3,this.onSizeChange=new U.Signal,this.onResize=null,this.onResizeContext=null,this._pendingScaleMode=null,this._fullScreenRestore=null,this._gameSize=new U.Rectangle,this._userScaleFactor=new U.Point(1,1),this._userScaleTrim=new U.Point(0,0),this._lastUpdate=0,this._updateThrottle=0,this._updateThrottleReset=100,this._parentBounds=new U.Rectangle,this._tempBounds=new U.Rectangle,this._lastReportedCanvasSize=new U.Rectangle,this._lastReportedGameSize=new U.Rectangle,this._booted=!1,e.config&&this.parseConfig(e.config),this.setupScale(t,i)},U.ScaleManager.EXACT_FIT=0,U.ScaleManager.NO_SCALE=1,U.ScaleManager.SHOW_ALL=2,U.ScaleManager.RESIZE=3,U.ScaleManager.USER_SCALE=4,U.ScaleManager.prototype={boot:function(){var e=this.compatibility;e.supportsFullScreen=this.game.device.fullscreen&&!this.game.device.cocoonJS,this.game.device.iPad||this.game.device.webApp||this.game.device.desktop||(this.game.device.android&&!this.game.device.chrome?e.scrollTo=new U.Point(0,1):e.scrollTo=new U.Point(0,0)),this.game.device.desktop?(e.orientationFallback="screen",e.clickTrampoline="when-not-mouse"):(e.orientationFallback="",e.clickTrampoline="");var t=this;this._orientationChange=function(e){return t.orientationChange(e)},this._windowResize=function(e){return t.windowResize(e)},window.addEventListener("orientationchange",this._orientationChange,!1),window.addEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(this._fullScreenChange=function(e){return t.fullScreenChange(e)},this._fullScreenError=function(e){return t.fullScreenError(e)},document.addEventListener("webkitfullscreenchange",this._fullScreenChange,!1),document.addEventListener("mozfullscreenchange",this._fullScreenChange,!1),document.addEventListener("MSFullscreenChange",this._fullScreenChange,!1),document.addEventListener("fullscreenchange",this._fullScreenChange,!1),document.addEventListener("webkitfullscreenerror",this._fullScreenError,!1),document.addEventListener("mozfullscreenerror",this._fullScreenError,!1),document.addEventListener("MSFullscreenError",this._fullScreenError,!1),document.addEventListener("fullscreenerror",this._fullScreenError,!1)),this.game.onResume.add(this._gameResumed,this),this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.setGameSize(this.game.width,this.game.height),this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),U.FlexGrid&&(this.grid=new U.FlexGrid(this,this.width,this.height)),this._booted=!0,null!==this._pendingScaleMode&&(this.scaleMode=this._pendingScaleMode,this._pendingScaleMode=null)},parseConfig:function(e){void 0!==e.scaleMode&&(this._booted?this.scaleMode=e.scaleMode:this._pendingScaleMode=e.scaleMode),void 0!==e.fullScreenScaleMode&&(this.fullScreenScaleMode=e.fullScreenScaleMode),e.fullScreenTarget&&(this.fullScreenTarget=e.fullScreenTarget)},setupScale:function(e,t){var i,n=new U.Rectangle;""!==this.game.parent&&("string"==typeof this.game.parent?i=document.getElementById(this.game.parent):this.game.parent&&1===this.game.parent.nodeType&&(i=this.game.parent)),i?(this.parentNode=i,this.parentIsWindow=!1,this.getParentBounds(this._parentBounds),n.width=this._parentBounds.width,n.height=this._parentBounds.height,this.offset.set(this._parentBounds.x,this._parentBounds.y)):(this.parentNode=null,this.parentIsWindow=!0,n.width=this.dom.visualBounds.width,n.height=this.dom.visualBounds.height,this.offset.set(0,0));var r=0,o=0;r="number"==typeof e?e:(this.parentScaleFactor.x=parseInt(e,10)/100,n.width*this.parentScaleFactor.x),o="number"==typeof t?t:(this.parentScaleFactor.y=parseInt(t,10)/100,n.height*this.parentScaleFactor.y),r=Math.floor(r),o=Math.floor(o),this._gameSize.setTo(0,0,r,o),this.updateDimensions(r,o,!1)},_gameResumed:function(){this.queueUpdate(!0)},setGameSize:function(e,t){this._gameSize.setTo(0,0,e,t),this.currentScaleMode!==U.ScaleManager.RESIZE&&this.updateDimensions(e,t,!0),this.queueUpdate(!0)},setUserScale:function(e,t,i,n){this._userScaleFactor.setTo(e,t),this._userScaleTrim.setTo(0|i,0|n),this.queueUpdate(!0)},setResizeCallback:function(e,t){this.onResize=e,this.onResizeContext=t},signalSizeChange:function(){if(!U.Rectangle.sameDimensions(this,this._lastReportedCanvasSize)||!U.Rectangle.sameDimensions(this.game,this._lastReportedGameSize)){var e=this.width,t=this.height;this._lastReportedCanvasSize.setTo(0,0,e,t),this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height),this.grid&&this.grid.onResize(e,t),this.onSizeChange.dispatch(this,e,t),this.currentScaleMode===U.ScaleManager.RESIZE&&(this.game.state.resize(e,t),this.game.load.resize(e,t))}},setMinMax:function(e,t,i,n){this.minWidth=e,this.minHeight=t,void 0!==i&&(this.maxWidth=i),void 0!==n&&(this.maxHeight=n)},preUpdate:function(){if(!(this.game.time.time<this._lastUpdate+this._updateThrottle)){var e=this._updateThrottle;this._updateThrottleReset=400<=e?0:100,this.dom.getOffset(this.game.canvas,this.offset);var t=this._parentBounds.width,i=this._parentBounds.height,n=this.getParentBounds(this._parentBounds),r=n.width!==t||n.height!==i,o=this.updateOrientationState();(r||o)&&(this.onResize&&this.onResize.call(this.onResizeContext,this,n),this.updateLayout(),this.signalSizeChange());var a=2*this._updateThrottle;this._updateThrottle<e&&(a=Math.min(e,this._updateThrottleReset)),this._updateThrottle=U.Math.clamp(a,25,this.trackParentInterval),this._lastUpdate=this.game.time.time}},pauseUpdate:function(){this.preUpdate(),this._updateThrottle=this.trackParentInterval},updateDimensions:function(e,t,i){this.width=e*this.parentScaleFactor.x,this.height=t*this.parentScaleFactor.y,this.game.width=this.width,this.game.height=this.height,this.sourceAspectRatio=this.width/this.height,this.updateScalingAndBounds(),i&&(this.game.renderer.resize(this.width,this.height),this.game.camera.setSize(this.width,this.height),this.game.world.resize(this.width,this.height))},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.aspectRatio=this.width/this.height,this.game.canvas&&this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.game.input&&this.game.input.scale&&this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)},forceOrientation:function(e,t){void 0===t&&(t=!1),this.forceLandscape=e,this.forcePortrait=t,this.queueUpdate(!0)},classifyOrientation:function(e){return"portrait-primary"===e||"portrait-secondary"===e?"portrait":"landscape-primary"===e||"landscape-secondary"===e?"landscape":null},updateOrientationState:function(){var e=this.screenOrientation,t=this.incorrectOrientation;this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait;var i=e!==this.screenOrientation,n=t!==this.incorrectOrientation;return n&&(this.incorrectOrientation?this.enterIncorrectOrientation.dispatch():this.leaveIncorrectOrientation.dispatch()),(i||n)&&this.onOrientationChange.dispatch(this,e,t),i||n},orientationChange:function(e){this.event=e,this.queueUpdate(!0)},windowResize:function(e){this.event=e,this.queueUpdate(!0)},scrollTop:function(){var e=this.compatibility.scrollTo;e&&window.scrollTo(e.x,e.y)},refresh:function(){this.scrollTop(),this.queueUpdate(!0)},updateLayout:function(){var e=this.currentScaleMode;if(e!==U.ScaleManager.RESIZE){if(this.scrollTop(),this.compatibility.forceMinimumDocumentHeight&&(document.documentElement.style.minHeight=window.innerHeight+"px"),this.incorrectOrientation?this.setMaximum():e===U.ScaleManager.EXACT_FIT?this.setExactFit():e===U.ScaleManager.SHOW_ALL?(this.setShowAll(!0),this.resetCanvas(),this.setShowAll()):e===U.ScaleManager.NO_SCALE?(this.width=this.game.width,this.height=this.game.height):e===U.ScaleManager.USER_SCALE&&(this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x,this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y),!this.compatibility.canExpandParent&&(e===U.ScaleManager.SHOW_ALL||e===U.ScaleManager.USER_SCALE)){var t=this.getParentBounds(this._tempBounds);this.width=Math.min(this.width,t.width),this.height=Math.min(this.height,t.height)}this.width=0|this.width,this.height=0|this.height,this.reflowCanvas()}else this.reflowGame()},getParentBounds:function(e){var t=e||new U.Rectangle,i=this.boundingParent,n=this.dom.visualBounds,r=this.dom.layoutBounds;if(i){var o=i.getBoundingClientRect(),a=i.offsetParent?i.offsetParent.getBoundingClientRect():i.getBoundingClientRect();t.setTo(o.left-a.left,o.top-a.top,o.width,o.height);var s=this.windowConstraints;if(s.right){var p="layout"===s.right?r:n;t.right=Math.min(t.right,p.width)}if(s.bottom){p="layout"===s.bottom?r:n;t.bottom=Math.min(t.bottom,p.height)}}else t.setTo(0,0,n.width,n.height);return t.setTo(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height)),t},alignCanvas:function(e,t){var i=this.getParentBounds(this._tempBounds),n=this.game.canvas,r=this.margin;if(e){r.left=r.right=0;var o=n.getBoundingClientRect();if(this.width<i.width&&!this.incorrectOrientation){var a=o.left-i.x,s=i.width/2-this.width/2,p=(s=Math.max(s,0))-a;r.left=Math.round(p)}n.style.marginLeft=r.left+"px",0!==r.left&&(r.right=-(i.width-o.width-r.left),n.style.marginRight=r.right+"px")}if(t){r.top=r.bottom=0;o=n.getBoundingClientRect();if(this.height<i.height&&!this.incorrectOrientation){a=o.top-i.y,s=i.height/2-this.height/2,p=(s=Math.max(s,0))-a;r.top=Math.round(p)}n.style.marginTop=r.top+"px",0!==r.top&&(r.bottom=-(i.height-o.height-r.top),n.style.marginBottom=r.bottom+"px")}r.x=r.left,r.y=r.top},reflowGame:function(){this.resetCanvas("","");var e=this.getParentBounds(this._tempBounds);this.updateDimensions(e.width,e.height,!0)},reflowCanvas:function(){this.incorrectOrientation||(this.width=U.Math.clamp(this.width,this.minWidth||0,this.maxWidth||this.width),this.height=U.Math.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)),this.resetCanvas(),this.compatibility.noMargins||(this.isFullScreen&&this._createdFullScreenTarget?this.alignCanvas(!0,!0):this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)),this.updateScalingAndBounds()},resetCanvas:function(e,t){void 0===e&&(e=this.width+"px"),void 0===t&&(t=this.height+"px");var i=this.game.canvas;this.compatibility.noMargins||(i.style.marginLeft="",i.style.marginTop="",i.style.marginRight="",i.style.marginBottom=""),i.style.width=e,i.style.height=t},queueUpdate:function(e){e&&(this._parentBounds.width=0,this._parentBounds.height=0),this._updateThrottle=this._updateThrottleReset},reset:function(e){e&&this.grid&&this.grid.reset()},setMaximum:function(){this.width=this.dom.visualBounds.width,this.height=this.dom.visualBounds.height},setShowAll:function(e){var t,i=this.getParentBounds(this._tempBounds),n=i.width,r=i.height;t=e?Math.max(r/this.game.height,n/this.game.width):Math.min(r/this.game.height,n/this.game.width),this.width=Math.round(this.game.width*t),this.height=Math.round(this.game.height*t)},setExactFit:function(){var e=this.getParentBounds(this._tempBounds);this.width=e.width,this.height=e.height,this.isFullScreen||(this.maxWidth&&(this.width=Math.min(this.width,this.maxWidth)),this.maxHeight&&(this.height=Math.min(this.height,this.maxHeight)))},createFullScreenTarget:function(){var e=document.createElement("div");return e.style.margin="0",e.style.padding="0",e.style.background="#000",e},startFullScreen:function(e,t){if(this.isFullScreen)return!1;if(this.compatibility.supportsFullScreen){if("when-not-mouse"===this.compatibility.clickTrampoline){var i=this.game.input;if(i.activePointer&&i.activePointer!==i.mousePointer&&(t||!1!==t))return void i.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[e,!1])}void 0!==e&&this.game.renderType===U.CANVAS&&(this.game.stage.smoothed=e);var n=this.fullScreenTarget;n||(this.cleanupCreatedTarget(),this._createdFullScreenTarget=this.createFullScreenTarget(),n=this._createdFullScreenTarget);var r={targetElement:n};if(this.hasPhaserSetFullScreen=!0,this.onFullScreenInit.dispatch(this,r),this._createdFullScreenTarget){var o=this.game.canvas;o.parentNode.insertBefore(n,o),n.appendChild(o)}return this.game.device.fullscreenKeyboard?n[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):n[this.game.device.requestFullscreen](),!0}var a=this;setTimeout(function(){a.fullScreenError()},10)},stopFullScreen:function(){return!(!this.isFullScreen||!this.compatibility.supportsFullScreen||(this.hasPhaserSetFullScreen=!1,document[this.game.device.cancelFullscreen](),0))},cleanupCreatedTarget:function(){var e=this._createdFullScreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.game.canvas,e),t.removeChild(e)}this._createdFullScreenTarget=null},prepScreenMode:function(e){var t=!!this._createdFullScreenTarget,i=this._createdFullScreenTarget||this.fullScreenTarget;e?(t||this.fullScreenScaleMode===U.ScaleManager.EXACT_FIT)&&i!==this.game.canvas&&(this._fullScreenRestore={targetWidth:i.style.width,targetHeight:i.style.height},i.style.width="100%",i.style.height="100%"):(this._fullScreenRestore&&(i.style.width=this._fullScreenRestore.targetWidth,i.style.height=this._fullScreenRestore.targetHeight,this._fullScreenRestore=null),this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.resetCanvas())},fullScreenChange:function(e){this.event=e,this.isFullScreen?this.prepScreenMode(!0):(this.prepScreenMode(!1),this.cleanupCreatedTarget()),this.updateLayout(),this.queueUpdate(!0),this.onFullScreenChange.dispatch(this,this.width,this.height)},fullScreenError:function(e){this.event=e,this.cleanupCreatedTarget(),this.onFullScreenError.dispatch(this)},scaleSprite:function(e,t,i,n){if(void 0===t&&(t=this.width),void 0===i&&(i=this.height),void 0===n&&(n=!1),!e||!e.scale)return e;if(e.scale.x=1,e.scale.y=1,e.width<=0||e.height<=0||t<=0||i<=0)return e;var r=t,o=e.height*t/e.width,a=e.width*i/e.height,s=i,p=t<a;return(p=p?n:!n)?(e.width=Math.floor(r),e.height=Math.floor(o)):(e.width=Math.floor(a),e.height=Math.floor(s)),e},destroy:function(){this.game.onResume.remove(this._gameResumed,this),window.removeEventListener("orientationchange",this._orientationChange,!1),window.removeEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,!1),document.removeEventListener("mozfullscreenchange",this._fullScreenChange,!1),document.removeEventListener("MSFullscreenChange",this._fullScreenChange,!1),document.removeEventListener("fullscreenchange",this._fullScreenChange,!1),document.removeEventListener("webkitfullscreenerror",this._fullScreenError,!1),document.removeEventListener("mozfullscreenerror",this._fullScreenError,!1),document.removeEventListener("MSFullscreenError",this._fullScreenError,!1),document.removeEventListener("fullscreenerror",this._fullScreenError,!1))}},U.ScaleManager.prototype.constructor=U.ScaleManager,Object.defineProperty(U.ScaleManager.prototype,"boundingParent",{get:function(){return this.parentIsWindow||this.isFullScreen&&this.hasPhaserSetFullScreen&&!this._createdFullScreenTarget?null:this.game.canvas&&this.game.canvas.parentNode||null}}),Object.defineProperty(U.ScaleManager.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){return e!==this._scaleMode&&(this.isFullScreen||(this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.queueUpdate(!0)),this._scaleMode=e),this._scaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(e){return e!==this._fullScreenScaleMode&&(this.isFullScreen?(this.prepScreenMode(!1),this._fullScreenScaleMode=e,this.prepScreenMode(!0),this.queueUpdate(!0)):this._fullScreenScaleMode=e),this._fullScreenScaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(e){e!==this._pageAlignHorizontally&&(this._pageAlignHorizontally=e,this.queueUpdate(!0))}}),Object.defineProperty(U.ScaleManager.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(e){e!==this._pageAlignVertically&&(this._pageAlignVertically=e,this.queueUpdate(!0))}}),Object.defineProperty(U.ScaleManager.prototype,"isFullScreen",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),Object.defineProperty(U.ScaleManager.prototype,"isPortrait",{get:function(){return"portrait"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(U.ScaleManager.prototype,"isLandscape",{get:function(){return"landscape"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(U.ScaleManager.prototype,"isGamePortrait",{get:function(){return this.height>this.width}}),Object.defineProperty(U.ScaleManager.prototype,"isGameLandscape",{get:function(){return this.width>this.height}}),U.Utils.Debug=function(e){this.game=e,this.sprite=null,this.bmd=null,this.canvas=null,this.context=null,this.font="14px Courier",this.columnWidth=100,this.lineHeight=16,this.renderShadow=!0,this.currentX=0,this.currentY=0,this.currentAlpha=1,this.dirty=!1},U.Utils.Debug.prototype={boot:function(){this.game.renderType===U.CANVAS?this.context=this.game.context:(this.bmd=new U.BitmapData(this.game,"__DEBUG",this.game.width,this.game.height,!0),this.sprite=this.game.make.image(0,0,this.bmd),this.game.stage.addChild(this.sprite),this.game.scale.onSizeChange.add(this.resize,this),this.canvas=PIXI.CanvasPool.create(this,this.game.width,this.game.height),this.context=this.canvas.getContext("2d"))},resize:function(e,t,i){this.bmd.resize(t,i),this.canvas.width=t,this.canvas.height=i},preUpdate:function(){this.dirty&&this.sprite&&(this.bmd.clear(),this.bmd.draw(this.canvas,0,0),this.context.clearRect(0,0,this.game.width,this.game.height),this.dirty=!1)},reset:function(){this.context&&this.context.clearRect(0,0,this.game.width,this.game.height),this.sprite&&this.bmd.clear()},start:function(e,t,i,n){"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),i=i||"rgb(255,255,255)",void 0===n&&(n=0),this.currentX=e,this.currentY=t,this.currentColor=i,this.columnWidth=n,this.dirty=!0,this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.strokeStyle=i,this.context.fillStyle=i,this.context.font=this.font,this.context.globalAlpha=this.currentAlpha},stop:function(){this.context.restore()},line:function(){for(var e=this.currentX,t=0;t<arguments.length;t++)this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(arguments[t],e+1,this.currentY+1),this.context.fillStyle=this.currentColor),this.context.fillText(arguments[t],e,this.currentY),e+=this.columnWidth;this.currentY+=this.lineHeight},soundInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sound: "+e.key+" Locked: "+e.game.sound.touchLocked),this.line("Is Ready?: "+this.game.cache.isSoundReady(e.key)+" Pending Playback: "+e.pendingPlayback),this.line("Decoded: "+e.isDecoded+" Decoding: "+e.isDecoding),this.line("Total Duration: "+e.totalDuration+" Playing: "+e.isPlaying),this.line("Time: "+e.currentTime),this.line("Volume: "+e.volume+" Muted: "+e.mute),this.line("WebAudio: "+e.usingWebAudio+" Audio: "+e.usingAudioTag),""!==e.currentMarker&&(this.line("Marker: "+e.currentMarker+" Duration: "+e.duration+" (ms: "+e.durationMS+")"),this.line("Start: "+e.markers[e.currentMarker].start+" Stop: "+e.markers[e.currentMarker].stop),this.line("Position: "+e.position)),this.stop()},cameraInfo:function(e,t,i,n){this.start(t,i,n),this.line("Camera ("+e.width+" x "+e.height+")"),this.line("X: "+e.x+" Y: "+e.y),e.bounds&&this.line("Bounds x: "+e.bounds.x+" Y: "+e.bounds.y+" w: "+e.bounds.width+" h: "+e.bounds.height),this.line("View x: "+e.view.x+" Y: "+e.view.y+" w: "+e.view.width+" h: "+e.view.height),this.line("Total in view: "+e.totalInView),this.stop()},timer:function(e,t,i,n){this.start(t,i,n),this.line("Timer (running: "+e.running+" expired: "+e.expired+")"),this.line("Next Tick: "+e.next+" Duration: "+e.duration),this.line("Paused: "+e.paused+" Length: "+e.length),this.stop()},pointer:function(e,t,i,n,r){null!=e&&(void 0===t&&(t=!1),i=i||"rgba(0,255,0,0.5)",n=n||"rgba(255,0,0,0.5)",!0===t&&!0===e.isUp||(this.start(e.x,e.y-100,r),this.context.beginPath(),this.context.arc(e.x,e.y,e.circle.radius,0,2*Math.PI),e.active?this.context.fillStyle=i:this.context.fillStyle=n,this.context.fill(),this.context.closePath(),this.context.beginPath(),this.context.moveTo(e.positionDown.x,e.positionDown.y),this.context.lineTo(e.position.x,e.position.y),this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.line("ID: "+e.id+" Active: "+e.active),this.line("World X: "+e.worldX+" World Y: "+e.worldY),this.line("Screen X: "+e.x+" Screen Y: "+e.y+" In: "+e.withinGame),this.line("Duration: "+e.duration+" ms"),this.line("is Down: "+e.isDown+" is Up: "+e.isUp),this.stop()))},spriteInputInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sprite Input: ("+e.width+" x "+e.height+")"),this.line("x: "+e.input.pointerX().toFixed(1)+" y: "+e.input.pointerY().toFixed(1)),this.line("over: "+e.input.pointerOver()+" duration: "+e.input.overDuration().toFixed(0)),this.line("down: "+e.input.pointerDown()+" duration: "+e.input.downDuration().toFixed(0)),this.line("just over: "+e.input.justOver()+" just out: "+e.input.justOut()),this.stop()},key:function(e,t,i,n){this.start(t,i,n,150),this.line("Key:",e.keyCode,"isDown:",e.isDown),this.line("justDown:",e.justDown,"justUp:",e.justUp),this.line("Time Down:",e.timeDown.toFixed(0),"duration:",e.duration.toFixed(0)),this.stop()},inputInfo:function(e,t,i){this.start(e,t,i),this.line("Input"),this.line("X: "+this.game.input.x+" Y: "+this.game.input.y),this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY),this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1)),this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY),this.stop()},spriteBounds:function(e,t,i){var n=e.getBounds();n.x+=this.game.camera.x,n.y+=this.game.camera.y,this.rectangle(n,t,i)},ropeSegments:function(e,t,i){var n=this;e.segments.forEach(function(e){n.rectangle(e,t,i)},this)},spriteInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sprite:  ("+e.width+" x "+e.height+") anchor: "+e.anchor.x+" x "+e.anchor.y),this.line("x: "+e.x.toFixed(1)+" y: "+e.y.toFixed(1)),this.line("angle: "+e.angle.toFixed(1)+" rotation: "+e.rotation.toFixed(1)),this.line("visible: "+e.visible+" in camera: "+e.inCamera),this.line("bounds x: "+e._bounds.x.toFixed(1)+" y: "+e._bounds.y.toFixed(1)+" w: "+e._bounds.width.toFixed(1)+" h: "+e._bounds.height.toFixed(1)),this.stop()},spriteCoords:function(e,t,i,n){this.start(t,i,n,100),e.name&&this.line(e.name),this.line("x:",e.x.toFixed(2),"y:",e.y.toFixed(2)),this.line("pos x:",e.position.x.toFixed(2),"pos y:",e.position.y.toFixed(2)),this.line("world x:",e.world.x.toFixed(2),"world y:",e.world.y.toFixed(2)),this.stop()},lineInfo:function(e,t,i,n){this.start(t,i,n,80),this.line("start.x:",e.start.x.toFixed(2),"start.y:",e.start.y.toFixed(2)),this.line("end.x:",e.end.x.toFixed(2),"end.y:",e.end.y.toFixed(2)),this.line("length:",e.length.toFixed(2),"angle:",e.angle),this.stop()},pixel:function(e,t,i,n){n=n||2,this.start(),this.context.fillStyle=i,this.context.fillRect(e,t,n,n),this.stop()},geom:function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=0),t=t||"rgba(0,255,0,0.4)",this.start(),this.context.fillStyle=t,this.context.strokeStyle=t,e instanceof U.Rectangle||1===n?i?this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height):this.context.strokeRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height):e instanceof U.Circle||2===n?(this.context.beginPath(),this.context.arc(e.x-this.game.camera.x,e.y-this.game.camera.y,e.radius,0,2*Math.PI,!1),this.context.closePath(),i?this.context.fill():this.context.stroke()):e instanceof U.Point||3===n?this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,4,4):(e instanceof U.Line||4===n)&&(this.context.lineWidth=1,this.context.beginPath(),this.context.moveTo(e.start.x+.5-this.game.camera.x,e.start.y+.5-this.game.camera.y),this.context.lineTo(e.end.x+.5-this.game.camera.x,e.end.y+.5-this.game.camera.y),this.context.closePath(),this.context.stroke()),this.stop()},rectangle:function(e,t,i){void 0===i&&(i=!0),t=t||"rgba(0, 255, 0, 0.4)",this.start(),i?(this.context.fillStyle=t,this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height)):(this.context.strokeStyle=t,this.context.strokeRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height)),this.stop()},text:function(e,t,i,n,r){n=n||"rgb(255,255,255)",r=r||"16px Courier",this.start(),this.context.font=r,this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(e,t+1,i+1)),this.context.fillStyle=n,this.context.fillText(e,t,i),this.stop()},quadTree:function(e,t){t=t||"rgba(255,0,0,0.3)",this.start();var i=e.bounds;if(0===e.nodes.length){this.context.strokeStyle=t,this.context.strokeRect(i.x,i.y,i.width,i.height),this.text("size: "+e.objects.length,i.x+4,i.y+16,"rgb(0,200,0)","12px Courier"),this.context.strokeStyle="rgb(0,255,0)";for(var n=0;n<e.objects.length;n++)this.context.strokeRect(e.objects[n].x,e.objects[n].y,e.objects[n].width,e.objects[n].height)}else for(n=0;n<e.nodes.length;n++)this.quadTree(e.nodes[n]);this.stop()},body:function(e,t,i){e.body&&(this.start(),e.body.type===U.Physics.ARCADE?U.Physics.Arcade.Body.render(this.context,e.body,t,i):e.body.type===U.Physics.NINJA?U.Physics.Ninja.Body.render(this.context,e.body,t,i):e.body.type===U.Physics.BOX2D&&U.Physics.Box2D.renderBody(this.context,e.body,t),this.stop())},bodyInfo:function(e,t,i,n){e.body&&(this.start(t,i,n,210),e.body.type===U.Physics.ARCADE?U.Physics.Arcade.Body.renderBodyInfo(this,e.body):e.body.type===U.Physics.BOX2D&&this.game.physics.box2d.renderBodyInfo(this,e.body),this.stop())},box2dWorld:function(){this.start(),this.context.translate(-this.game.camera.view.x,-this.game.camera.view.y,0),this.game.physics.box2d.renderDebugDraw(this.context),this.stop()},box2dBody:function(e,t){this.start(),U.Physics.Box2D.renderBody(this.context,e,t),this.stop()},displayList:function(e){if(void 0===e&&(e=this.game.world),e.hasOwnProperty("renderOrderID"),e.children&&0<e.children.length)for(var t=0;t<e.children.length;t++)this.game.debug.displayList(e.children[t])},destroy:function(){PIXI.CanvasPool.remove(this)}},U.Utils.Debug.prototype.constructor=U.Utils.Debug,U.DOM={getOffset:function(e,t){t=t||new U.Point;var i=e.getBoundingClientRect(),n=U.DOM.scrollY,r=U.DOM.scrollX,o=document.documentElement.clientTop,a=document.documentElement.clientLeft;return t.x=i.left+r-a,t.y=i.top+n-o,t},getBounds:function(e,t){return void 0===t&&(t=0),!(!(e=e&&!e.nodeType?e[0]:e)||1!==e.nodeType)&&this.calibrate(e.getBoundingClientRect(),t)},calibrate:function(e,t){t=+t||0;var i={width:0,height:0,left:0,right:0,top:0,bottom:0};return i.width=(i.right=e.right+t)-(i.left=e.left-t),i.height=(i.bottom=e.bottom+t)-(i.top=e.top-t),i},getAspectRatio:function(e){var t=(e=null==e?this.visualBounds:1===e.nodeType?this.getBounds(e):e).width,i=e.height;return"function"==typeof t&&(t=t.call(e)),"function"==typeof i&&(i=i.call(e)),t/i},inLayoutViewport:function(e,t){var i=this.getBounds(e,t);return!!i&&0<=i.bottom&&0<=i.right&&i.top<=this.layoutBounds.width&&i.left<=this.layoutBounds.height},getScreenOrientation:function(e){var t=window.screen,i=t.orientation||t.mozOrientation||t.msOrientation;if(i&&"string"==typeof i.type)return i.type;if("string"==typeof i)return i;var n="portrait-primary",r="landscape-primary";if("screen"===e)return t.height>t.width?n:r;if("viewport"===e)return this.visualBounds.height>this.visualBounds.width?n:r;if("window.orientation"===e&&"number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?n:r;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n;if(window.matchMedia("(orientation: landscape)").matches)return r}return this.visualBounds.height>this.visualBounds.width?n:r},visualBounds:new U.Rectangle,layoutBounds:new U.Rectangle,documentBounds:new U.Rectangle},U.Device.whenReady(function(e){var t=window&&"pageXOffset"in window?function(){return window.pageXOffset}:function(){return document.documentElement.scrollLeft},i=window&&"pageYOffset"in window?function(){return window.pageYOffset}:function(){return document.documentElement.scrollTop};if(Object.defineProperty(U.DOM,"scrollX",{get:t}),Object.defineProperty(U.DOM,"scrollY",{get:i}),Object.defineProperty(U.DOM.visualBounds,"x",{get:t}),Object.defineProperty(U.DOM.visualBounds,"y",{get:i}),Object.defineProperty(U.DOM.layoutBounds,"x",{value:0}),Object.defineProperty(U.DOM.layoutBounds,"y",{value:0}),e.desktop&&document.documentElement.clientWidth<=window.innerWidth&&document.documentElement.clientHeight<=window.innerHeight){var n=function(){return Math.max(window.innerWidth,document.documentElement.clientWidth)},r=function(){return Math.max(window.innerHeight,document.documentElement.clientHeight)};Object.defineProperty(U.DOM.visualBounds,"width",{get:n}),Object.defineProperty(U.DOM.visualBounds,"height",{get:r}),Object.defineProperty(U.DOM.layoutBounds,"width",{get:n}),Object.defineProperty(U.DOM.layoutBounds,"height",{get:r})}else Object.defineProperty(U.DOM.visualBounds,"width",{get:function(){return window.innerWidth}}),Object.defineProperty(U.DOM.visualBounds,"height",{get:function(){return window.innerHeight}}),Object.defineProperty(U.DOM.layoutBounds,"width",{get:function(){var e=document.documentElement.clientWidth,t=window.innerWidth;return e<t?t:e}}),Object.defineProperty(U.DOM.layoutBounds,"height",{get:function(){var e=document.documentElement.clientHeight,t=window.innerHeight;return e<t?t:e}});Object.defineProperty(U.DOM.documentBounds,"x",{value:0}),Object.defineProperty(U.DOM.documentBounds,"y",{value:0}),Object.defineProperty(U.DOM.documentBounds,"width",{get:function(){var e=document.documentElement;return Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth)}}),Object.defineProperty(U.DOM.documentBounds,"height",{get:function(){var e=document.documentElement;return Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight)}})},null,!0),U.ArraySet=function(e){this.position=0,this.list=e||[]},U.ArraySet.prototype={add:function(e){return this.exists(e)||this.list.push(e),e},getIndex:function(e){return this.list.indexOf(e)},getByKey:function(e,t){for(var i=this.list.length;i--;)if(this.list[i][e]===t)return this.list[i];return null},exists:function(e){return-1<this.list.indexOf(e)},reset:function(){this.list.length=0},remove:function(e){var t=this.list.indexOf(e);if(-1<t)return this.list.splice(t,1),e},setAll:function(e,t){for(var i=this.list.length;i--;)this.list[i]&&(this.list[i][e]=t)},callAll:function(e){for(var t=Array.prototype.slice.call(arguments,1),i=this.list.length;i--;)this.list[i]&&this.list[i][e]&&this.list[i][e].apply(this.list[i],t)},removeAll:function(e){void 0===e&&(e=!1);for(var t=this.list.length;t--;)if(this.list[t]){var i=this.remove(this.list[t]);e&&i.destroy()}this.position=0,this.list=[]}},Object.defineProperty(U.ArraySet.prototype,"total",{get:function(){return this.list.length}}),Object.defineProperty(U.ArraySet.prototype,"first",{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}}),Object.defineProperty(U.ArraySet.prototype,"next",{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}}),U.ArraySet.prototype.constructor=U.ArraySet,U.ArrayUtils={getRandomItem:function(e,t,i){if(null===e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var n=t+Math.floor(Math.random()*i);return void 0===e[n]?null:e[n]},removeRandomItem:function(e,t,i){if(null==e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var n=t+Math.floor(Math.random()*i);if(n<e.length){var r=e.splice(n,1);return void 0===r[0]?null:r[0]}return null},shuffle:function(e){for(var t=e.length-1;0<t;t--){var i=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},transposeMatrix:function(e){for(var t=e.length,i=e[0].length,n=new Array(i),r=0;r<i;r++){n[r]=new Array(t);for(var o=t-1;-1<o;o--)n[r][o]=e[o][r]}return n},rotateMatrix:function(e,t){if("string"!=typeof t&&(t=(t%360+360)%360),90===t||-270===t||"rotateLeft"===t)e=(e=U.ArrayUtils.transposeMatrix(e)).reverse();else if(-90===t||270===t||"rotateRight"===t)e=e.reverse(),e=U.ArrayUtils.transposeMatrix(e);else if(180===Math.abs(t)||"rotate180"===t){for(var i=0;i<e.length;i++)e[i].reverse();e=e.reverse()}return e},findClosest:function(e,t){if(!t.length)return NaN;if(1===t.length||e<t[0])return t[0];for(var i=1;t[i]<e;)i++;var n=t[i-1],r=i<t.length?t[i]:Number.POSITIVE_INFINITY;return r-e<=e-n?r:n},rotateRight:function(e){var t=e.pop();return e.unshift(t),t},rotateLeft:function(e){var t=e.shift();return e.push(t),t},rotate:function(e){var t=e.shift();return e.push(t),t},numberArray:function(e,t){for(var i=[],n=e;n<=t;n++)i.push(n);return i},numberArrayStep:function(e,t,i){null!=e||(e=0),null!=t||(t=e,e=0),void 0===i&&(i=1);for(var n=[],r=Math.max(U.Math.roundAwayFromZero((t-e)/(i||1)),0),o=0;o<r;o++)n.push(e),e+=i;return n}},U.LinkedList=function(){this.next=null,this.prev=null,this.first=null,this.last=null,this.total=0},U.LinkedList.prototype={add:function(e){return 0===this.total&&null===this.first&&null===this.last?(this.first=e,this.last=e,(this.next=e).prev=this):((this.last.next=e).prev=this.last,this.last=e),this.total++,e},reset:function(){this.first=null,this.last=null,this.next=null,this.prev=null,this.total=0},remove:function(e){if(1===this.total)return this.reset(),void(e.next=e.prev=null);e===this.first?this.first=this.first.next:e===this.last&&(this.last=this.last.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.next=e.prev=null,null===this.first&&(this.last=null),this.total--},callAll:function(e){if(this.first&&this.last)for(var t=this.first;t&&t[e]&&t[e].call(t),(t=t.next)!==this.last.next;);}},U.LinkedList.prototype.constructor=U.LinkedList,U.Create=function(e){this.game=e,this.bmd=null,this.canvas=null,this.ctx=null,this.palettes=[{0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"},{0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"},{0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}]},U.Create.PALETTE_ARNE=0,U.Create.PALETTE_JMP=1,U.Create.PALETTE_CGA=2,U.Create.PALETTE_C64=3,U.Create.PALETTE_JAPANESE_MACHINE=4,U.Create.prototype={texture:function(e,t,i,n,r){void 0===i&&(i=8),void 0===n&&(n=i),void 0===r&&(r=0);var o=t[0].length*i,a=t.length*n;null===this.bmd&&(this.bmd=this.game.make.bitmapData(),this.canvas=this.bmd.canvas,this.ctx=this.bmd.context),this.bmd.resize(o,a),this.bmd.clear();for(var s=0;s<t.length;s++)for(var p=t[s],l=0;l<p.length;l++){var h=p[l];"."!==h&&" "!==h&&(this.ctx.fillStyle=this.palettes[r][h],this.ctx.fillRect(l*i,s*n,i,n))}return this.bmd.generateTexture(e)},grid:function(e,t,i,n,r,o){null===this.bmd&&(this.bmd=this.game.make.bitmapData(),this.canvas=this.bmd.canvas,this.ctx=this.bmd.context),this.bmd.resize(t,i),this.ctx.fillStyle=o;for(var a=0;a<i;a+=r)this.ctx.fillRect(0,a,t,1);for(var s=0;s<t;s+=n)this.ctx.fillRect(s,0,1,i);return this.bmd.generateTexture(e)}},U.Create.prototype.constructor=U.Create,U.FlexGrid=function(e,t,i){this.game=e.game,this.manager=e,this.width=t,this.height=i,this.boundsCustom=new U.Rectangle(0,0,t,i),this.boundsFluid=new U.Rectangle(0,0,t,i),this.boundsFull=new U.Rectangle(0,0,t,i),this.boundsNone=new U.Rectangle(0,0,t,i),this.positionCustom=new U.Point(0,0),this.positionFluid=new U.Point(0,0),this.positionFull=new U.Point(0,0),this.positionNone=new U.Point(0,0),this.scaleCustom=new U.Point(1,1),this.scaleFluid=new U.Point(1,1),this.scaleFluidInversed=new U.Point(1,1),this.scaleFull=new U.Point(1,1),this.scaleNone=new U.Point(1,1),this.customWidth=0,this.customHeight=0,this.customOffsetX=0,this.customOffsetY=0,this.ratioH=t/i,this.ratioV=i/t,this.multiplier=0,this.layers=[]},U.FlexGrid.prototype={setSize:function(e,t){this.width=e,this.height=t,this.ratioH=e/t,this.ratioV=t/e,this.scaleNone=new U.Point(1,1),this.boundsNone.width=this.width,this.boundsNone.height=this.height,this.refresh()},createCustomLayer:function(e,t,i,n){void 0===n&&(n=!0),this.customWidth=e,this.customHeight=t,this.boundsCustom.width=e,this.boundsCustom.height=t;var r=new U.FlexLayer(this,this.positionCustom,this.boundsCustom,this.scaleCustom);return n&&this.game.world.add(r),this.layers.push(r),void 0!==i&&null!==typeof i&&r.addMultiple(i),r},createFluidLayer:function(e,t){void 0===t&&(t=!0);var i=new U.FlexLayer(this,this.positionFluid,this.boundsFluid,this.scaleFluid);return t&&this.game.world.add(i),this.layers.push(i),void 0!==e&&null!==typeof e&&i.addMultiple(e),i},createFullLayer:function(e){var t=new U.FlexLayer(this,this.positionFull,this.boundsFull,this.scaleFluid);return this.game.world.add(t),this.layers.push(t),void 0!==e&&t.addMultiple(e),t},createFixedLayer:function(e){var t=new U.FlexLayer(this,this.positionNone,this.boundsNone,this.scaleNone);return this.game.world.add(t),this.layers.push(t),void 0!==e&&t.addMultiple(e),t},reset:function(){for(var e=this.layers.length;e--;)this.layers[e].persist||(this.layers[e].position=null,this.layers[e].scale=null,this.layers.slice(e,1))},onResize:function(e,t){this.ratioH=e/t,this.ratioV=t/e,this.refresh(e,t)},refresh:function(){this.multiplier=Math.min(this.manager.height/this.height,this.manager.width/this.width),this.boundsFluid.width=Math.round(this.width*this.multiplier),this.boundsFluid.height=Math.round(this.height*this.multiplier),this.scaleFluid.set(this.boundsFluid.width/this.width,this.boundsFluid.height/this.height),this.scaleFluidInversed.set(this.width/this.boundsFluid.width,this.height/this.boundsFluid.height),this.scaleFull.set(this.boundsFull.width/this.width,this.boundsFull.height/this.height),this.boundsFull.width=Math.round(this.manager.width*this.scaleFluidInversed.x),this.boundsFull.height=Math.round(this.manager.height*this.scaleFluidInversed.y),this.boundsFluid.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY),this.boundsNone.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY),this.positionFluid.set(this.boundsFluid.x,this.boundsFluid.y),this.positionNone.set(this.boundsNone.x,this.boundsNone.y)},fitSprite:function(e){this.manager.scaleSprite(e),e.x=this.manager.bounds.centerX,e.y=this.manager.bounds.centerY},debug:function(){this.game.debug.text(this.boundsFluid.width+" x "+this.boundsFluid.height,this.boundsFluid.x+4,this.boundsFluid.y+16),this.game.debug.geom(this.boundsFluid,"rgba(255,0,0,0.9",!1)}},U.FlexGrid.prototype.constructor=U.FlexGrid,U.FlexLayer=function(e,t,i,n){U.Group.call(this,e.game,null,"__flexLayer"+e.game.rnd.uuid(),!1),this.manager=e.manager,this.grid=e,this.persist=!1,this.position=t,this.bounds=i,this.scale=n,this.topLeft=i.topLeft,this.topMiddle=new U.Point(i.halfWidth,0),this.topRight=i.topRight,this.bottomLeft=i.bottomLeft,this.bottomMiddle=new U.Point(i.halfWidth,i.bottom),this.bottomRight=i.bottomRight},U.FlexLayer.prototype=Object.create(U.Group.prototype),U.FlexLayer.prototype.constructor=U.FlexLayer,U.FlexLayer.prototype.resize=function(){},U.FlexLayer.prototype.debug=function(){this.game.debug.text(this.bounds.width+" x "+this.bounds.height,this.bounds.x+4,this.bounds.y+16),this.game.debug.geom(this.bounds,"rgba(0,0,255,0.9",!1),this.game.debug.geom(this.topLeft,"rgba(255,255,255,0.9"),this.game.debug.geom(this.topMiddle,"rgba(255,255,255,0.9"),this.game.debug.geom(this.topRight,"rgba(255,255,255,0.9")},U.Color={packPixel:function(e,t,i,n){return U.Device.LITTLE_ENDIAN?(n<<24|i<<16|t<<8|e)>>>0:(e<<24|t<<16|i<<8|n)>>>0},unpackPixel:function(e,t,i,n){return null!=t||(t=U.Color.createColor()),null!=i||(i=!1),null!=n||(n=!1),U.Device.LITTLE_ENDIAN?(t.a=(4278190080&e)>>>24,t.b=(16711680&e)>>>16,t.g=(65280&e)>>>8,t.r=255&e):(t.r=(4278190080&e)>>>24,t.g=(16711680&e)>>>16,t.b=(65280&e)>>>8,t.a=255&e),t.color=e,t.rgba="rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")",i&&U.Color.RGBtoHSL(t.r,t.g,t.b,t),n&&U.Color.RGBtoHSV(t.r,t.g,t.b,t),t},fromRGBA:function(e,t){return t||(t=U.Color.createColor()),t.r=(4278190080&e)>>>24,t.g=(16711680&e)>>>16,t.b=(65280&e)>>>8,t.a=255&e,t.rgba="rgba("+t.r+","+t.g+","+t.b+","+t.a+")",t},toRGBA:function(e,t,i,n){return e<<24|t<<16|i<<8|n},toABGR:function(e,t,i,n){return(n<<24|i<<16|t<<8|e)>>>0},RGBtoHSL:function(e,t,i,n){n||(n=U.Color.createColor(e,t,i,1)),e/=255,t/=255,i/=255;var r=Math.min(e,t,i),o=Math.max(e,t,i);if(n.h=0,n.s=0,n.l=(o+r)/2,o!==r){var a=o-r;n.s=.5<n.l?a/(2-o-r):a/(o+r),o===e?n.h=(t-i)/a+(t<i?6:0):o===t?n.h=(i-e)/a+2:o===i&&(n.h=(e-t)/a+4),n.h/=6}return n},HSLtoRGB:function(e,t,i,n){if(n?(n.r=i,n.g=i,n.b=i):n=U.Color.createColor(i,i,i),0!==t){var r=i<.5?i*(1+t):i+t-i*t,o=2*i-r;n.r=U.Color.hueToColor(o,r,e+1/3),n.g=U.Color.hueToColor(o,r,e),n.b=U.Color.hueToColor(o,r,e-1/3)}return n.r=Math.floor(255*n.r|0),n.g=Math.floor(255*n.g|0),n.b=Math.floor(255*n.b|0),U.Color.updateColor(n),n},RGBtoHSV:function(e,t,i,n){n||(n=U.Color.createColor(e,t,i,255)),e/=255,t/=255,i/=255;var r=Math.min(e,t,i),o=Math.max(e,t,i),a=o-r;return n.h=0,n.s=0===o?0:a/o,(n.v=o)!==r&&(o===e?n.h=(t-i)/a+(t<i?6:0):o===t?n.h=(i-e)/a+2:o===i&&(n.h=(e-t)/a+4),n.h/=6),n},HSVtoRGB:function(e,t,i,n){void 0===n&&(n=U.Color.createColor(0,0,0,1,e,t,0,i));var r,o,a,s=Math.floor(6*e),p=6*e-s,l=i*(1-t),h=i*(1-p*t),u=i*(1-(1-p)*t);switch(s%6){case 0:r=i,o=u,a=l;break;case 1:r=h,o=i,a=l;break;case 2:r=l,o=i,a=u;break;case 3:r=l,o=h,a=i;break;case 4:r=u,o=l,a=i;break;case 5:r=i,o=l,a=h}return n.r=Math.floor(255*r),n.g=Math.floor(255*o),n.b=Math.floor(255*a),U.Color.updateColor(n),n},hueToColor:function(e,t,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},createColor:function(e,t,i,n,r,o,a,s){var p={r:e||0,g:t||0,b:i||0,a:n||1,h:r||0,s:o||0,l:a||0,v:s||0,color:0,color32:0,rgba:""};return U.Color.updateColor(p)},updateColor:function(e){return e.rgba="rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+e.a.toString()+")",e.color=U.Color.getColor(e.r,e.g,e.b),e.color32=U.Color.getColor32(255*e.a,e.r,e.g,e.b),e},getColor32:function(e,t,i,n){return e<<24|t<<16|i<<8|n},getColor:function(e,t,i){return e<<16|t<<8|i},RGBtoString:function(e,t,i,n,r){return void 0===n&&(n=255),void 0===r&&(r="#"),"#"===r?"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1):"0x"+U.Color.componentToHex(n)+U.Color.componentToHex(e)+U.Color.componentToHex(t)+U.Color.componentToHex(i)},hexToRGB:function(e){var t=U.Color.hexToColor(e);if(t)return U.Color.getColor32(t.a,t.r,t.g,t.b)},hexToColor:function(e,t){e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16);t?(t.r=n,t.g=r,t.b=o):t=U.Color.createColor(n,r,o)}return t},webToColor:function(e,t){t||(t=U.Color.createColor());var i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e);return i&&(t.r=parseInt(i[1],10),t.g=parseInt(i[2],10),t.b=parseInt(i[3],10),t.a=void 0!==i[4]?parseFloat(i[4]):1,U.Color.updateColor(t)),t},valueToColor:function(e,t){if(t||(t=U.Color.createColor()),"string"==typeof e)return 0===e.indexOf("rgb")?U.Color.webToColor(e,t):(t.a=1,U.Color.hexToColor(e,t));if("number"!=typeof e)return t;var i=U.Color.getRGB(e);return t.r=i.r,t.g=i.g,t.b=i.b,t.a=i.a/255,t},componentToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},HSVColorWheel:function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);for(var i=[],n=0;n<=359;n++)i.push(U.Color.HSVtoRGB(n/359,e,t));return i},HSLColorWheel:function(e,t){void 0===e&&(e=.5),void 0===t&&(t=.5);for(var i=[],n=0;n<=359;n++)i.push(U.Color.HSLtoRGB(n/359,e,t));return i},interpolateColor:function(e,t,i,n,r){void 0===r&&(r=255);var o=U.Color.getRGB(e),a=U.Color.getRGB(t),s=(a.red-o.red)*n/i+o.red,p=(a.green-o.green)*n/i+o.green,l=(a.blue-o.blue)*n/i+o.blue;return U.Color.getColor32(r,s,p,l)},interpolateColorWithRGB:function(e,t,i,n,r,o){var a=U.Color.getRGB(e),s=(t-a.red)*o/r+a.red,p=(i-a.green)*o/r+a.green,l=(n-a.blue)*o/r+a.blue;return U.Color.getColor(s,p,l)},interpolateRGB:function(e,t,i,n,r,o,a,s){var p=(n-e)*s/a+e,l=(r-t)*s/a+t,h=(o-i)*s/a+i;return U.Color.getColor(p,l,h)},getRandomColor:function(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=255),void 0===i&&(i=255),255<t||t<e)return U.Color.getColor(255,255,255);var n=e+Math.round(Math.random()*(t-e)),r=e+Math.round(Math.random()*(t-e)),o=e+Math.round(Math.random()*(t-e));return U.Color.getColor32(i,n,r,o)},getRGB:function(e){return 16777215<e?{alpha:e>>>24,red:e>>16&255,green:e>>8&255,blue:255&e,a:e>>>24,r:e>>16&255,g:e>>8&255,b:255&e}:{alpha:255,red:e>>16&255,green:e>>8&255,blue:255&e,a:255,r:e>>16&255,g:e>>8&255,b:255&e}},getWebRGB:function(e){if("object"==typeof e)return"rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+(e.a/255).toString()+")";var t=U.Color.getRGB(e);return"rgba("+t.r.toString()+","+t.g.toString()+","+t.b.toString()+","+(t.a/255).toString()+")"},getAlpha:function(e){return e>>>24},getAlphaFloat:function(e){return(e>>>24)/255},getRed:function(e){return e>>16&255},getGreen:function(e){return e>>8&255},getBlue:function(e){return 255&e},blendNormal:function(e){return e},blendLighten:function(e,t){return e<t?t:e},blendDarken:function(e,t){return e<t?e:t},blendMultiply:function(e,t){return e*t/255},blendAverage:function(e,t){return(e+t)/2},blendAdd:function(e,t){return Math.min(255,e+t)},blendSubtract:function(e,t){return Math.max(0,e+t-255)},blendDifference:function(e,t){return Math.abs(e-t)},blendNegation:function(e,t){return 255-Math.abs(255-e-t)},blendScreen:function(e,t){return 255-((255-e)*(255-t)>>8)},blendExclusion:function(e,t){return e+t-2*e*t/255},blendOverlay:function(e,t){return t<128?2*e*t/255:255-2*(255-e)*(255-t)/255},blendSoftLight:function(e,t){return t<128?2*(64+(e>>1))*(t/255):255-2*(255-(64+(e>>1)))*(255-t)/255},blendHardLight:function(e,t){return U.Color.blendOverlay(t,e)},blendColorDodge:function(e,t){return 255===t?t:Math.min(255,(e<<8)/(255-t))},blendColorBurn:function(e,t){return 0===t?t:Math.max(0,255-(255-e<<8)/t)},blendLinearDodge:function(e,t){return U.Color.blendAdd(e,t)},blendLinearBurn:function(e,t){return U.Color.blendSubtract(e,t)},blendLinearLight:function(e,t){return t<128?U.Color.blendLinearBurn(e,2*t):U.Color.blendLinearDodge(e,2*(t-128))},blendVividLight:function(e,t){return t<128?U.Color.blendColorBurn(e,2*t):U.Color.blendColorDodge(e,2*(t-128))},blendPinLight:function(e,t){return t<128?U.Color.blendDarken(e,2*t):U.Color.blendLighten(e,2*(t-128))},blendHardMix:function(e,t){return U.Color.blendVividLight(e,t)<128?0:255},blendReflect:function(e,t){return 255===t?t:Math.min(255,e*e/(255-t))},blendGlow:function(e,t){return U.Color.blendReflect(t,e)},blendPhoenix:function(e,t){return Math.min(e,t)-Math.max(e,t)+255}},U.Physics=function(e,t){t=t||{},this.game=e,this.config=t,this.arcade=null,this.p2=null,this.ninja=null,this.box2d=null,this.chipmunk=null,this.matter=null,this.parseConfig()},U.Physics.ARCADE=0,U.Physics.P2JS=1,U.Physics.NINJA=2,U.Physics.BOX2D=3,U.Physics.CHIPMUNK=4,U.Physics.MATTERJS=5,U.Physics.prototype={parseConfig:function(){this.config.hasOwnProperty("arcade")&&!0!==this.config.arcade||!U.Physics.hasOwnProperty("Arcade")||(this.arcade=new U.Physics.Arcade(this.game)),this.config.hasOwnProperty("ninja")&&!0===this.config.ninja&&U.Physics.hasOwnProperty("Ninja")&&(this.ninja=new U.Physics.Ninja(this.game)),this.config.hasOwnProperty("p2")&&!0===this.config.p2&&U.Physics.hasOwnProperty("P2")&&(this.p2=new U.Physics.P2(this.game,this.config)),this.config.hasOwnProperty("box2d")&&!0===this.config.box2d&&U.Physics.hasOwnProperty("BOX2D")&&(this.box2d=new U.Physics.BOX2D(this.game,this.config)),this.config.hasOwnProperty("matter")&&!0===this.config.matter&&U.Physics.hasOwnProperty("Matter")&&(this.matter=new U.Physics.Matter(this.game,this.config))},startSystem:function(e){e===U.Physics.ARCADE?this.arcade=new U.Physics.Arcade(this.game):e===U.Physics.P2JS?null===this.p2?this.p2=new U.Physics.P2(this.game,this.config):this.p2.reset():e===U.Physics.NINJA?this.ninja=new U.Physics.Ninja(this.game):e===U.Physics.BOX2D?null===this.box2d?this.box2d=new U.Physics.Box2D(this.game,this.config):this.box2d.reset():e===U.Physics.MATTERJS&&(null===this.matter?this.matter=new U.Physics.Matter(this.game,this.config):this.matter.reset())},enable:function(e,t,i){void 0===t&&(t=U.Physics.ARCADE),void 0===i&&(i=!1),t===U.Physics.ARCADE?this.arcade.enable(e):t===U.Physics.P2JS&&this.p2?this.p2.enable(e,i):t===U.Physics.NINJA&&this.ninja?this.ninja.enableAABB(e):t===U.Physics.BOX2D&&this.box2d?this.box2d.enable(e):t===U.Physics.MATTERJS&&this.matter&&this.matter.enable(e)},preUpdate:function(){this.p2&&this.p2.preUpdate(),this.box2d&&this.box2d.preUpdate(),this.matter&&this.matter.preUpdate()},update:function(){this.p2&&this.p2.update(),this.box2d&&this.box2d.update(),this.matter&&this.matter.update()},setBoundsToWorld:function(){this.arcade&&this.arcade.setBoundsToWorld(),this.ninja&&this.ninja.setBoundsToWorld(),this.p2&&this.p2.setBoundsToWorld(),this.box2d&&this.box2d.setBoundsToWorld(),this.matter&&this.matter.setBoundsToWorld()},clear:function(){this.p2&&this.p2.clear(),this.box2d&&this.box2d.clear(),this.matter&&this.matter.clear()},reset:function(){this.p2&&this.p2.reset(),this.box2d&&this.box2d.reset(),this.matter&&this.matter.reset()},destroy:function(){this.p2&&this.p2.destroy(),this.box2d&&this.box2d.destroy(),this.matter&&this.matter.destroy(),this.arcade=null,this.ninja=null,this.p2=null,this.box2d=null,this.matter=null}},U.Physics.prototype.constructor=U.Physics,U.Physics.Arcade=function(e){this.game=e,this.gravity=new U.Point,this.bounds=new U.Rectangle(0,0,e.world.width,e.world.height),this.checkCollision={up:!0,down:!0,left:!0,right:!0},this.maxObjects=10,this.maxLevels=4,this.OVERLAP_BIAS=4,this.forceX=!1,this.sortDirection=U.Physics.Arcade.LEFT_RIGHT,this.skipQuadTree=!0,this.isPaused=!1,this.quadTree=new U.QuadTree(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this._total=0,this.setBoundsToWorld()},U.Physics.Arcade.prototype.constructor=U.Physics.Arcade,U.Physics.Arcade.SORT_NONE=0,U.Physics.Arcade.LEFT_RIGHT=1,U.Physics.Arcade.RIGHT_LEFT=2,U.Physics.Arcade.TOP_BOTTOM=3,U.Physics.Arcade.BOTTOM_TOP=4,U.Physics.Arcade.prototype={setBounds:function(e,t,i,n){this.bounds.setTo(e,t,i,n)},setBoundsToWorld:function(){this.bounds.copyFrom(this.game.world.bounds)},enable:function(e,t){void 0===t&&(t=!0);var i=1;if(Array.isArray(e))for(i=e.length;i--;)e[i]instanceof U.Group?this.enable(e[i].children,t):(this.enableBody(e[i]),t&&e[i].hasOwnProperty("children")&&0<e[i].children.length&&this.enable(e[i],!0));else e instanceof U.Group?this.enable(e.children,t):(this.enableBody(e),t&&e.hasOwnProperty("children")&&0<e.children.length&&this.enable(e.children,!0))},enableBody:function(e){e.hasOwnProperty("body")&&null===e.body&&(e.body=new U.Physics.Arcade.Body(e),e.parent&&e.parent instanceof U.Group&&e.parent.addToHash(e))},updateMotion:function(e){var t=this.computeVelocity(0,e,e.angularVelocity,e.angularAcceleration,e.angularDrag,e.maxAngular)-e.angularVelocity;e.angularVelocity+=t,e.rotation+=e.angularVelocity*this.game.time.physicsElapsed,e.velocity.x=this.computeVelocity(1,e,e.velocity.x,e.acceleration.x,e.drag.x,e.maxVelocity.x),e.velocity.y=this.computeVelocity(2,e,e.velocity.y,e.acceleration.y,e.drag.y,e.maxVelocity.y)},computeVelocity:function(e,t,i,n,r,o){return void 0===o&&(o=1e4),1===e&&t.allowGravity?i+=(this.gravity.x+t.gravity.x)*this.game.time.physicsElapsed:2===e&&t.allowGravity&&(i+=(this.gravity.y+t.gravity.y)*this.game.time.physicsElapsed),n?i+=n*this.game.time.physicsElapsed:r&&(0<i-(r*=this.game.time.physicsElapsed)?i-=r:i+r<0?i+=r:i=0),o<i?i=o:i<-o&&(i=-o),i},overlap:function(e,t,i,n,r){if(i=i||null,n=n||null,r=r||i,this._total=0,!Array.isArray(e)&&Array.isArray(t))for(var o=0;o<t.length;o++)this.collideHandler(e,t[o],i,n,r,!0);else if(Array.isArray(e)&&!Array.isArray(t))for(o=0;o<e.length;o++)this.collideHandler(e[o],t,i,n,r,!0);else if(Array.isArray(e)&&Array.isArray(t))for(o=0;o<e.length;o++)for(var a=0;a<t.length;a++)this.collideHandler(e[o],t[a],i,n,r,!0);else this.collideHandler(e,t,i,n,r,!0);return 0<this._total},collide:function(e,t,i,n,r){if(i=i||null,n=n||null,r=r||i,this._total=0,!Array.isArray(e)&&Array.isArray(t))for(var o=0;o<t.length;o++)this.collideHandler(e,t[o],i,n,r,!1);else if(Array.isArray(e)&&!Array.isArray(t))for(o=0;o<e.length;o++)this.collideHandler(e[o],t,i,n,r,!1);else if(Array.isArray(e)&&Array.isArray(t))for(o=0;o<e.length;o++)for(var a=0;a<t.length;a++)this.collideHandler(e[o],t[a],i,n,r,!1);else this.collideHandler(e,t,i,n,r,!1);return 0<this._total},sortLeftRight:function(e,t){return e.body&&t.body?e.body.x-t.body.x:0},sortRightLeft:function(e,t){return e.body&&t.body?t.body.x-e.body.x:0},sortTopBottom:function(e,t){return e.body&&t.body?e.body.y-t.body.y:0},sortBottomTop:function(e,t){return e.body&&t.body?t.body.y-e.body.y:0},sort:function(e,t){null!==e.physicsSortDirection?t=e.physicsSortDirection:void 0===t&&(t=this.sortDirection),t===U.Physics.Arcade.LEFT_RIGHT?e.hash.sort(this.sortLeftRight):t===U.Physics.Arcade.RIGHT_LEFT?e.hash.sort(this.sortRightLeft):t===U.Physics.Arcade.TOP_BOTTOM?e.hash.sort(this.sortTopBottom):t===U.Physics.Arcade.BOTTOM_TOP&&e.hash.sort(this.sortBottomTop)},collideHandler:function(e,t,i,n,r,o){if(void 0===t&&e.physicsType===U.GROUP)return this.sort(e),void this.collideGroupVsSelf(e,i,n,r,o);e&&t&&e.exists&&t.exists&&(this.sortDirection!==U.Physics.Arcade.SORT_NONE&&(e.physicsType===U.GROUP&&this.sort(e),t.physicsType===U.GROUP&&this.sort(t)),e.physicsType===U.SPRITE?t.physicsType===U.SPRITE?this.collideSpriteVsSprite(e,t,i,n,r,o):t.physicsType===U.GROUP?this.collideSpriteVsGroup(e,t,i,n,r,o):t.physicsType===U.TILEMAPLAYER&&this.collideSpriteVsTilemapLayer(e,t,i,n,r,o):e.physicsType===U.GROUP?t.physicsType===U.SPRITE?this.collideSpriteVsGroup(t,e,i,n,r,o):t.physicsType===U.GROUP?this.collideGroupVsGroup(e,t,i,n,r,o):t.physicsType===U.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(e,t,i,n,r,o):e.physicsType===U.TILEMAPLAYER&&(t.physicsType===U.SPRITE?this.collideSpriteVsTilemapLayer(t,e,i,n,r,o):t.physicsType===U.GROUP&&this.collideGroupVsTilemapLayer(t,e,i,n,r,o)))},collideSpriteVsSprite:function(e,t,i,n,r,o){return!(!e.body||!t.body||(this.separate(e.body,t.body,n,r,o)&&(i&&i.call(r,e,t),this._total++),0))},collideSpriteVsGroup:function(e,t,i,n,r,o){if(0!==t.length&&e.body)if(this.skipQuadTree||e.body.skipQuadTree)for(var a={},s=0;s<t.hash.length;s++){var p=t.hash[s];if(p&&p.exists&&p.body){if(a=p.body.getBounds(a),this.sortDirection===U.Physics.Arcade.LEFT_RIGHT){if(e.body.right<a.x)break;if(a.right<e.body.x)continue}else if(this.sortDirection===U.Physics.Arcade.RIGHT_LEFT){if(e.body.x>a.right)break;if(a.x>e.body.right)continue}else if(this.sortDirection===U.Physics.Arcade.TOP_BOTTOM){if(e.body.bottom<a.y)break;if(a.bottom<e.body.y)continue}else if(this.sortDirection===U.Physics.Arcade.BOTTOM_TOP){if(e.body.y>a.bottom)break;if(a.y>e.body.bottom)continue}this.collideSpriteVsSprite(e,p,i,n,r,o)}}else{this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(t);var l=this.quadTree.retrieve(e);for(s=0;s<l.length;s++)this.separate(e.body,l[s],n,r,o)&&(i&&i.call(r,e,l[s].sprite),this._total++)}},collideGroupVsSelf:function(e,t,i,n,r){if(0!==e.length)for(var o=0;o<e.hash.length;o++){var a={},s=e.hash[o];if(s&&s.exists&&s.body){a=s.body.getBounds(a);for(var p=o+1;p<e.hash.length;p++){var l={},h=e.hash[p];if(h&&h.exists&&h.body){if(l=h.body.getBounds(l),this.sortDirection===U.Physics.Arcade.LEFT_RIGHT){if(a.right<l.x)break;if(l.right<a.x)continue}else if(this.sortDirection===U.Physics.Arcade.RIGHT_LEFT){if(a.x>l.right)continue;if(l.x>a.right)break}else if(this.sortDirection===U.Physics.Arcade.TOP_BOTTOM){if(a.bottom<l.y)continue;if(l.bottom<a.y)break}else if(this.sortDirection===U.Physics.Arcade.BOTTOM_TOP){if(a.y>l.bottom)continue;if(l.y>s.body.bottom)break}this.collideSpriteVsSprite(s,h,t,i,n,r)}}}}},collideGroupVsGroup:function(e,t,i,n,r,o){if(0!==e.length&&0!==t.length)for(var a=0;a<e.children.length;a++)e.children[a].exists&&(e.children[a].physicsType===U.GROUP?this.collideGroupVsGroup(e.children[a],t,i,n,r,o):this.collideSpriteVsGroup(e.children[a],t,i,n,r,o))},separate:function(e,t,i,n,r){if(!e.enable||!t.enable||e.checkCollision.none||t.checkCollision.none||!this.intersects(e,t))return!1;if(i&&!1===i.call(n,e.sprite,t.sprite))return!1;if(e.isCircle&&t.isCircle)return this.separateCircle(e,t,r);if(e.isCircle!==t.isCircle){var o=e.isCircle?t:e,a=e.isCircle?e:t,s=o.x,p=o.y,l=o.right,h=o.bottom,u=a.x+a.radius,d=a.y+a.radius;if((d<p||h<d)&&(u<s||l<u))return this.separateCircle(e,t,r)}var c=!1,_=!1;this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)?(c=this.separateX(e,t,r),this.intersects(e,t)&&(_=this.separateY(e,t,r))):(_=this.separateY(e,t,r),this.intersects(e,t)&&(c=this.separateX(e,t,r)));var y=c||_;return y&&(r?(e.onOverlap&&e.onOverlap.dispatch(e.sprite,t.sprite),t.onOverlap&&t.onOverlap.dispatch(t.sprite,e.sprite)):(e.onCollide&&e.onCollide.dispatch(e.sprite,t.sprite),t.onCollide&&t.onCollide.dispatch(t.sprite,e.sprite))),y},intersects:function(e,t){return e!==t&&(e.isCircle?t.isCircle?U.Math.distance(e.center.x,e.center.y,t.center.x,t.center.y)<=e.radius+t.radius:this.circleBodyIntersects(e,t):t.isCircle?this.circleBodyIntersects(t,e):!(e.right<=t.position.x||e.bottom<=t.position.y||e.position.x>=t.right||e.position.y>=t.bottom))},circleBodyIntersects:function(e,t){var i=U.Math.clamp(e.center.x,t.left,t.right),n=U.Math.clamp(e.center.y,t.top,t.bottom);return(e.center.x-i)*(e.center.x-i)+(e.center.y-n)*(e.center.y-n)<=e.radius*e.radius},separateCircle:function(e,t,i){this.getOverlapX(e,t),this.getOverlapY(e,t);var n=t.center.x-e.center.x,r=t.center.y-e.center.y,o=Math.atan2(r,n),a=0;if(e.isCircle!==t.isCircle){var s={x:t.isCircle?e.position.x:t.position.x,y:t.isCircle?e.position.y:t.position.y,right:t.isCircle?e.right:t.right,bottom:t.isCircle?e.bottom:t.bottom},p={x:e.isCircle?e.position.x+e.radius:t.position.x+t.radius,y:e.isCircle?e.position.y+e.radius:t.position.y+t.radius,radius:e.isCircle?e.radius:t.radius};p.y<s.y?p.x<s.x?a=U.Math.distance(p.x,p.y,s.x,s.y)-p.radius:s.right<p.x&&(a=U.Math.distance(p.x,p.y,s.right,s.y)-p.radius):s.bottom<p.y&&(p.x<s.x?a=U.Math.distance(p.x,p.y,s.x,s.bottom)-p.radius:s.right<p.x&&(a=U.Math.distance(p.x,p.y,s.right,s.bottom)-p.radius)),a*=-1}else a=e.radius+t.radius-U.Math.distance(e.center.x,e.center.y,t.center.x,t.center.y);if(i||0===a||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX)return 0!==a&&(e.onOverlap&&e.onOverlap.dispatch(e.sprite,t.sprite),t.onOverlap&&t.onOverlap.dispatch(t.sprite,e.sprite)),0!==a;var l=e.velocity.x*Math.cos(o)+e.velocity.y*Math.sin(o),h=e.velocity.x*Math.sin(o)-e.velocity.y*Math.cos(o),u=t.velocity.x*Math.cos(o)+t.velocity.y*Math.sin(o),d=t.velocity.x*Math.sin(o)-t.velocity.y*Math.cos(o),c=((e.mass-t.mass)*l+2*t.mass*u)/(e.mass+t.mass),_=(2*e.mass*l+(t.mass-e.mass)*u)/(e.mass+t.mass);return e.immovable||(e.velocity.x=(c*Math.cos(o)-h*Math.sin(o))*e.bounce.x,e.velocity.y=(h*Math.cos(o)+c*Math.sin(o))*e.bounce.y),t.immovable||(t.velocity.x=(_*Math.cos(o)-d*Math.sin(o))*t.bounce.x,t.velocity.y=(d*Math.cos(o)+_*Math.sin(o))*t.bounce.y),Math.abs(o)<Math.PI/2?0<e.velocity.x&&!e.immovable&&t.velocity.x>e.velocity.x?e.velocity.x*=-1:t.velocity.x<0&&!t.immovable&&e.velocity.x<t.velocity.x?t.velocity.x*=-1:0<e.velocity.y&&!e.immovable&&t.velocity.y>e.velocity.y?e.velocity.y*=-1:t.velocity.y<0&&!t.immovable&&e.velocity.y<t.velocity.y&&(t.velocity.y*=-1):Math.abs(o)>Math.PI/2&&(e.velocity.x<0&&!e.immovable&&t.velocity.x<e.velocity.x?e.velocity.x*=-1:0<t.velocity.x&&!t.immovable&&e.velocity.x>t.velocity.x?t.velocity.x*=-1:e.velocity.y<0&&!e.immovable&&t.velocity.y<e.velocity.y?e.velocity.y*=-1:0<t.velocity.y&&!t.immovable&&e.velocity.x>t.velocity.y&&(t.velocity.y*=-1)),e.immovable||(e.x+=e.velocity.x*this.game.time.physicsElapsed-a*Math.cos(o),e.y+=e.velocity.y*this.game.time.physicsElapsed-a*Math.sin(o)),t.immovable||(t.x+=t.velocity.x*this.game.time.physicsElapsed+a*Math.cos(o),t.y+=t.velocity.y*this.game.time.physicsElapsed+a*Math.sin(o)),e.onCollide&&e.onCollide.dispatch(e.sprite,t.sprite),t.onCollide&&t.onCollide.dispatch(t.sprite,e.sprite),!0},getOverlapX:function(e,t,i){var n=0,r=e.deltaAbsX()+t.deltaAbsX()+this.OVERLAP_BIAS;return 0===e.deltaX()&&0===t.deltaX()?(e.embedded=!0,t.embedded=!0):e.deltaX()>t.deltaX()?r<(n=e.right-t.x)&&!i||!1===e.checkCollision.right||!1===t.checkCollision.left?n=0:(e.touching.none=!1,e.touching.right=!0,t.touching.none=!1,t.touching.left=!0):e.deltaX()<t.deltaX()&&(r<-(n=e.x-t.width-t.x)&&!i||!1===e.checkCollision.left||!1===t.checkCollision.right?n=0:(e.touching.none=!1,e.touching.left=!0,t.touching.none=!1,t.touching.right=!0)),e.overlapX=n,t.overlapX=n},getOverlapY:function(e,t,i){var n=0,r=e.deltaAbsY()+t.deltaAbsY()+this.OVERLAP_BIAS;return 0===e.deltaY()&&0===t.deltaY()?(e.embedded=!0,t.embedded=!0):e.deltaY()>t.deltaY()?r<(n=e.bottom-t.y)&&!i||!1===e.checkCollision.down||!1===t.checkCollision.up?n=0:(e.touching.none=!1,e.touching.down=!0,t.touching.none=!1,t.touching.up=!0):e.deltaY()<t.deltaY()&&(r<-(n=e.y-t.bottom)&&!i||!1===e.checkCollision.up||!1===t.checkCollision.down?n=0:(e.touching.none=!1,e.touching.up=!0,t.touching.none=!1,t.touching.down=!0)),e.overlapY=n,t.overlapY=n},separateX:function(e,t,i){var n=this.getOverlapX(e,t,i);if(i||0===n||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX)return 0!==n||e.embedded&&t.embedded;var r=e.velocity.x,o=t.velocity.x;if(e.immovable||t.immovable)e.immovable?(t.x+=n,t.velocity.x=r-o*t.bounce.x,e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y)):(e.x-=n,e.velocity.x=o-r*e.bounce.x,t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y));else{n*=.5,e.x-=n,t.x+=n;var a=Math.sqrt(o*o*t.mass/e.mass)*(0<o?1:-1),s=Math.sqrt(r*r*e.mass/t.mass)*(0<r?1:-1),p=.5*(a+s);a-=p,s-=p,e.velocity.x=p+a*e.bounce.x,t.velocity.x=p+s*t.bounce.x}return!0},separateY:function(e,t,i){var n=this.getOverlapY(e,t,i);if(i||0===n||e.immovable&&t.immovable||e.customSeparateY||t.customSeparateY)return 0!==n||e.embedded&&t.embedded;var r=e.velocity.y,o=t.velocity.y;if(e.immovable||t.immovable)e.immovable?(t.y+=n,t.velocity.y=r-o*t.bounce.y,e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x)):(e.y-=n,e.velocity.y=o-r*e.bounce.y,t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x));else{n*=.5,e.y-=n,t.y+=n;var a=Math.sqrt(o*o*t.mass/e.mass)*(0<o?1:-1),s=Math.sqrt(r*r*e.mass/t.mass)*(0<r?1:-1),p=.5*(a+s);a-=p,s-=p,e.velocity.y=p+a*e.bounce.y,t.velocity.y=p+s*t.bounce.y}return!0},getObjectsUnderPointer:function(e,t,i,n){if(0!==t.length&&e.exists)return this.getObjectsAtLocation(e.x,e.y,t,i,n,e)},getObjectsAtLocation:function(e,t,i,n,r,o){this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(i);for(var a=new U.Rectangle(e,t,1,1),s=[],p=this.quadTree.retrieve(a),l=0;l<p.length;l++)p[l].hitTest(e,t)&&(n&&n.call(r,o,p[l].sprite),s.push(p[l].sprite));return s},moveToObject:function(e,t,i,n){void 0===i&&(i=60),void 0===n&&(n=0);var r=Math.atan2(t.y-e.y,t.x-e.x);return 0<n&&(i=this.distanceBetween(e,t)/(n/1e3)),e.body.velocity.x=Math.cos(r)*i,e.body.velocity.y=Math.sin(r)*i,r},moveToPointer:function(e,t,i,n){void 0===t&&(t=60),i=i||this.game.input.activePointer,void 0===n&&(n=0);var r=this.angleToPointer(e,i);return 0<n&&(t=this.distanceToPointer(e,i)/(n/1e3)),e.body.velocity.x=Math.cos(r)*t,e.body.velocity.y=Math.sin(r)*t,r},moveToXY:function(e,t,i,n,r){void 0===n&&(n=60),void 0===r&&(r=0);var o=Math.atan2(i-e.y,t-e.x);return 0<r&&(n=this.distanceToXY(e,t,i)/(r/1e3)),e.body.velocity.x=Math.cos(o)*n,e.body.velocity.y=Math.sin(o)*n,o},velocityFromAngle:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(this.game.math.degToRad(e))*t,Math.sin(this.game.math.degToRad(e))*t)},velocityFromRotation:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(e)*t,Math.sin(e)*t)},accelerationFromRotation:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(e)*t,Math.sin(e)*t)},accelerateToObject:function(e,t,i,n,r){void 0===i&&(i=60),void 0===n&&(n=1e3),void 0===r&&(r=1e3);var o=this.angleBetween(e,t);return e.body.acceleration.setTo(Math.cos(o)*i,Math.sin(o)*i),e.body.maxVelocity.setTo(n,r),o},accelerateToPointer:function(e,t,i,n,r){void 0===i&&(i=60),void 0===t&&(t=this.game.input.activePointer),void 0===n&&(n=1e3),void 0===r&&(r=1e3);var o=this.angleToPointer(e,t);return e.body.acceleration.setTo(Math.cos(o)*i,Math.sin(o)*i),e.body.maxVelocity.setTo(n,r),o},accelerateToXY:function(e,t,i,n,r,o){void 0===n&&(n=60),void 0===r&&(r=1e3),void 0===o&&(o=1e3);var a=this.angleToXY(e,t,i);return e.body.acceleration.setTo(Math.cos(a)*n,Math.sin(a)*n),e.body.maxVelocity.setTo(r,o),a},distanceBetween:function(e,t,i){void 0===i&&(i=!1);var n=i?e.world.x-t.world.x:e.x-t.x,r=i?e.world.y-t.world.y:e.y-t.y;return Math.sqrt(n*n+r*r)},distanceToXY:function(e,t,i,n){void 0===n&&(n=!1);var r=n?e.world.x-t:e.x-t,o=n?e.world.y-i:e.y-i;return Math.sqrt(r*r+o*o)},distanceToPointer:function(e,t,i){void 0===t&&(t=this.game.input.activePointer),void 0===i&&(i=!1);var n=i?e.world.x-t.worldX:e.x-t.worldX,r=i?e.world.y-t.worldY:e.y-t.worldY;return Math.sqrt(n*n+r*r)},angleBetween:function(e,t,i){return void 0===i&&(i=!1),i?Math.atan2(t.world.y-e.world.y,t.world.x-e.world.x):Math.atan2(t.y-e.y,t.x-e.x)},angleBetweenCenters:function(e,t){var i=t.centerX-e.centerX,n=t.centerY-e.centerY;return Math.atan2(n,i)},angleToXY:function(e,t,i,n){return void 0===n&&(n=!1),n?Math.atan2(i-e.world.y,t-e.world.x):Math.atan2(i-e.y,t-e.x)},angleToPointer:function(e,t,i){return void 0===t&&(t=this.game.input.activePointer),void 0===i&&(i=!1),i?Math.atan2(t.worldY-e.world.y,t.worldX-e.world.x):Math.atan2(t.worldY-e.y,t.worldX-e.x)},worldAngleToPointer:function(e,t){return this.angleToPointer(e,t,!0)}},U.Physics.Arcade.Body=function(e){this.sprite=e,this.game=e.game,this.type=U.Physics.ARCADE,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new U.Point,this.position=new U.Point(e.x,e.y),this.prev=new U.Point(this.position.x,this.position.y),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=e.width,this.height=e.height,this.sourceWidth=e.width,this.sourceHeight=e.height,e.texture&&(this.sourceWidth=e.texture.frame.width,this.sourceHeight=e.texture.frame.height),this.halfWidth=Math.abs(e.width/2),this.halfHeight=Math.abs(e.height/2),this.center=new U.Point(e.x+this.halfWidth,e.y+this.halfHeight),this.velocity=new U.Point,this.newVelocity=new U.Point,this.deltaMax=new U.Point,this.acceleration=new U.Point,this.drag=new U.Point,this.allowGravity=!0,this.gravity=new U.Point,this.bounce=new U.Point,this.worldBounce=null,this.onWorldBounds=null,this.onCollide=null,this.onOverlap=null,this.maxVelocity=new U.Point(1e4,1e4),this.friction=new U.Point(1,0),this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=U.NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,any:!0,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={up:!1,down:!1,left:!1,right:!1},this.tilePadding=new U.Point,this.dirty=!1,this.skipQuadTree=!1,this.syncBounds=!1,this.isMoving=!1,this.stopVelocityOnCollide=!0,this.moveTimer=0,this.moveDistance=0,this.moveDuration=0,this.moveTarget=null,this.moveEnd=null,this.onMoveComplete=new U.Signal,this.movementCallback=null,this.movementCallbackContext=null,this._reset=!0,this._sx=e.scale.x,this._sy=e.scale.y,this._dx=0,this._dy=0},U.Physics.Arcade.Body.prototype={updateBounds:function(){if(this.syncBounds){var e=this.sprite.getBounds();e.ceilAll(),e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._reset=!0)}else{var t=Math.abs(this.sprite.scale.x),i=Math.abs(this.sprite.scale.y);t===this._sx&&i===this._sy||(this.width=this.sourceWidth*t,this.height=this.sourceHeight*i,this._sx=t,this._sy=i,this._reset=!0)}this._reset&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight))},preUpdate:function(){this.enable&&!this.game.physics.arcade.isPaused&&(this.dirty=!0,this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.embedded=!1,this.updateBounds(),this.position.x=this.sprite.world.x-this.sprite.anchor.x*this.sprite.width+this.sprite.scale.x*this.offset.x,this.position.x-=this.sprite.scale.x<0?this.width:0,this.position.y=this.sprite.world.y-this.sprite.anchor.y*this.sprite.height+this.sprite.scale.y*this.offset.y,this.position.y-=this.sprite.scale.y<0?this.height:0,this.rotation=this.sprite.angle,this.preRotation=this.rotation,(this._reset||this.sprite.fresh)&&(this.prev.x=this.position.x,this.prev.y=this.position.y),this.moves&&(this.game.physics.arcade.updateMotion(this),this.newVelocity.set(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed),this.position.x+=this.newVelocity.x,this.position.y+=this.newVelocity.y,this.position.x===this.prev.x&&this.position.y===this.prev.y||(this.angle=Math.atan2(this.velocity.y,this.velocity.x)),this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.onWorldBounds.dispatch(this.sprite,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.deltaX(),this._dy=this.deltaY(),this._reset=!1)},updateMovement:function(){var e=0,t=0!==this.overlapX||0!==this.overlapY;if(e=0<this.moveDuration?(this.moveTimer+=this.game.time.elapsedMS,this.moveTimer/this.moveDuration):(this.moveTarget.end.set(this.position.x,this.position.y),this.moveTarget.length/this.moveDistance),this.movementCallback)var i=this.movementCallback.call(this.movementCallbackContext,this,this.velocity,e);return!(t||1<=e||void 0!==i&&!0!==i)||(this.stopMovement(1<=e||this.stopVelocityOnCollide&&t),!1)},stopMovement:function(e){this.isMoving&&(this.isMoving=!1,e&&this.velocity.set(0),this.onMoveComplete.dispatch(this.sprite,0!==this.overlapX||0!==this.overlapY))},postUpdate:function(){this.enable&&this.dirty&&(this.isMoving&&this.updateMovement(),this.dirty=!1,this.deltaX()<0?this.facing=U.LEFT:0<this.deltaX()&&(this.facing=U.RIGHT),this.deltaY()<0?this.facing=U.UP:0<this.deltaY()&&(this.facing=U.DOWN),this.moves&&(this._dx=this.deltaX(),this._dy=this.deltaY(),0!==this.deltaMax.x&&0!==this._dx&&(this._dx<0&&this._dx<-this.deltaMax.x?this._dx=-this.deltaMax.x:0<this._dx&&this._dx>this.deltaMax.x&&(this._dx=this.deltaMax.x)),0!==this.deltaMax.y&&0!==this._dy&&(this._dy<0&&this._dy<-this.deltaMax.y?this._dy=-this.deltaMax.y:0<this._dy&&this._dy>this.deltaMax.y&&(this._dy=this.deltaMax.y)),this.sprite.position.x+=this._dx,this.sprite.position.y+=this._dy,this._reset=!0),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.allowRotation&&(this.sprite.angle+=this.deltaZ()),this.prev.x=this.position.x,this.prev.y=this.position.y)},checkWorldBounds:function(){var e=this.position,t=this.game.physics.arcade.bounds,i=this.game.physics.arcade.checkCollision,n=this.worldBounce?-this.worldBounce.x:-this.bounce.x,r=this.worldBounce?-this.worldBounce.y:-this.bounce.y;if(this.isCircle){var o=this.center.x-this.radius,a=this.center.y-this.radius,s=this.center.x+this.radius,p=this.center.y+this.radius;o<t.x&&i.left?(e.x=t.x-this.halfWidth+this.radius,this.velocity.x*=n,this.blocked.left=!0):s>t.right&&i.right&&(e.x=t.right-this.halfWidth-this.radius,this.velocity.x*=n,this.blocked.right=!0),a<t.y&&i.up?(e.y=t.y-this.halfHeight+this.radius,this.velocity.y*=r,this.blocked.up=!0):p>t.bottom&&i.down&&(e.y=t.bottom-this.halfHeight-this.radius,this.velocity.y*=r,this.blocked.down=!0)}else e.x<t.x&&i.left?(e.x=t.x,this.velocity.x*=n,this.blocked.left=!0):this.right>t.right&&i.right&&(e.x=t.right-this.width,this.velocity.x*=n,this.blocked.right=!0),e.y<t.y&&i.up?(e.y=t.y,this.velocity.y*=r,this.blocked.up=!0):this.bottom>t.bottom&&i.down&&(e.y=t.bottom-this.height,this.velocity.y*=r,this.blocked.down=!0);return this.blocked.up||this.blocked.down||this.blocked.left||this.blocked.right},moveFrom:function(e,t,i){return void 0===t&&(t=this.speed),0!==t&&(void 0===i?(n=this.angle,i=this.game.math.radToDeg(n)):n=this.game.math.degToRad(i),this.moveTimer=0,this.moveDuration=e,0===i||180===i?this.velocity.set(Math.cos(n)*t,0):90===i||270===i?this.velocity.set(0,Math.sin(n)*t):this.velocity.set(Math.cos(n)*t,Math.sin(n)*t),this.isMoving=!0);var n},moveTo:function(e,t,i){var n,r=t/(e/1e3);return 0!==r&&(void 0===i?(n=this.angle,i=this.game.math.radToDeg(n)):n=this.game.math.degToRad(i),t=Math.abs(t),this.moveDuration=0,this.moveDistance=t,null===this.moveTarget&&(this.moveTarget=new U.Line,this.moveEnd=new U.Point),this.moveTarget.fromAngle(this.x,this.y,n,t),this.moveEnd.set(this.moveTarget.end.x,this.moveTarget.end.y),this.moveTarget.setTo(this.x,this.y,this.x,this.y),0===i||180===i?this.velocity.set(Math.cos(n)*r,0):90===i||270===i?this.velocity.set(0,Math.sin(n)*r):this.velocity.set(Math.cos(n)*r,Math.sin(n)*r),this.isMoving=!0)},setSize:function(e,t,i,n){void 0===i&&(i=this.offset.x),void 0===n&&(n=this.offset.y),this.sourceWidth=e,this.sourceHeight=t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(i,n),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.isCircle=!1,this.radius=0},setCircle:function(e,t,i){void 0===t&&(t=this.offset.x),void 0===i&&(i=this.offset.y),0<e?(this.isCircle=!0,this.radius=e,this.sourceWidth=2*e,this.sourceHeight=2*e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(t,i),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)):this.isCircle=!1},reset:function(e,t){this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this.position.x=e-this.sprite.anchor.x*this.sprite.width+this.sprite.scale.x*this.offset.x,this.position.x-=this.sprite.scale.x<0?this.width:0,this.position.y=t-this.sprite.anchor.y*this.sprite.height+this.sprite.scale.y*this.offset.y,this.position.y-=this.sprite.scale.y<0?this.height:0,this.prev.x=this.position.x,this.prev.y=this.position.y,this.rotation=this.sprite.angle,this.preRotation=this.rotation,this._sx=this.sprite.scale.x,this._sy=this.sprite.scale.y,this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},getBounds:function(e){return this.isCircle?(e.x=this.center.x-this.radius,e.y=this.center.y-this.radius,e.right=this.center.x+this.radius,e.bottom=this.center.y+this.radius):(e.x=this.x,e.y=this.y,e.right=this.right,e.bottom=this.bottom),e},hitTest:function(e,t){return this.isCircle?U.Circle.contains(this,e,t):U.Rectangle.contains(this,e,t)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this.deltaX()?this.deltaX():-this.deltaX()},deltaAbsY:function(){return 0<this.deltaY()?this.deltaY():-this.deltaY()},deltaX:function(){return this.position.x-this.prev.x},deltaY:function(){return this.position.y-this.prev.y},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.sprite.parent&&this.sprite.parent instanceof U.Group&&this.sprite.parent.removeFromHash(this.sprite),this.sprite.body=null,this.sprite=null}},Object.defineProperty(U.Physics.Arcade.Body.prototype,"left",{get:function(){return this.position.x}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"right",{get:function(){return this.position.x+this.width}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"top",{get:function(){return this.position.y}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"bottom",{get:function(){return this.position.y+this.height}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e}}),U.Physics.Arcade.Body.render=function(e,t,i,n){void 0===n&&(n=!0),i=i||"rgba(0,255,0,0.4)",e.fillStyle=i,e.strokeStyle=i,t.isCircle?(e.beginPath(),e.arc(t.center.x-t.game.camera.x,t.center.y-t.game.camera.y,t.radius,0,2*Math.PI),n?e.fill():e.stroke()):n?e.fillRect(t.position.x-t.game.camera.x,t.position.y-t.game.camera.y,t.width,t.height):e.strokeRect(t.position.x-t.game.camera.x,t.position.y-t.game.camera.y,t.width,t.height)},U.Physics.Arcade.Body.renderBodyInfo=function(e,t){e.line("x: "+t.x.toFixed(2),"y: "+t.y.toFixed(2),"width: "+t.width,"height: "+t.height),e.line("velocity x: "+t.velocity.x.toFixed(2),"y: "+t.velocity.y.toFixed(2),"deltaX: "+t._dx.toFixed(2),"deltaY: "+t._dy.toFixed(2)),e.line("acceleration x: "+t.acceleration.x.toFixed(2),"y: "+t.acceleration.y.toFixed(2),"speed: "+t.speed.toFixed(2),"angle: "+t.angle.toFixed(2)),e.line("gravity x: "+t.gravity.x,"y: "+t.gravity.y,"bounce x: "+t.bounce.x.toFixed(2),"y: "+t.bounce.y.toFixed(2)),e.line("touching left: "+t.touching.left,"right: "+t.touching.right,"up: "+t.touching.up,"down: "+t.touching.down),e.line("blocked left: "+t.blocked.left,"right: "+t.blocked.right,"up: "+t.blocked.up,"down: "+t.blocked.down)},U.Physics.Arcade.Body.prototype.constructor=U.Physics.Arcade.Body,U.Physics.Arcade.TilemapCollision=function(){},U.Physics.Arcade.TilemapCollision.prototype={TILE_BIAS:16,collideSpriteVsTilemapLayer:function(e,t,i,n,r,o){if(e.body){var a=t.getTiles(e.body.position.x-e.body.tilePadding.x,e.body.position.y-e.body.tilePadding.y,e.body.width+e.body.tilePadding.x,e.body.height+e.body.tilePadding.y,!1,!1);if(0!==a.length)for(var s=0;s<a.length;s++)n?n.call(r,e,a[s])&&this.separateTile(s,e.body,a[s],t,o)&&(this._total++,i&&i.call(r,e,a[s])):this.separateTile(s,e.body,a[s],t,o)&&(this._total++,i&&i.call(r,e,a[s]))}},collideGroupVsTilemapLayer:function(e,t,i,n,r,o){if(0!==e.length)for(var a=0;a<e.children.length;a++)e.children[a].exists&&this.collideSpriteVsTilemapLayer(e.children[a],t,i,n,r,o)},separateTile:function(e,t,i,n,r){if(!t.enable)return!1;var o=n.fixedToCamera?0:n.position.x,a=n.fixedToCamera?0:n.position.y;if(!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!1;if(r)return!0;if(i.collisionCallback&&!i.collisionCallback.call(i.collisionCallbackContext,t.sprite,i))return!1;if(void 0!==i.layer.callbacks&&i.layer.callbacks[i.index]&&!i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext,t.sprite,i))return!1;if(!(i.faceLeft||i.faceRight||i.faceTop||i.faceBottom))return!1;var s=0,p=0,l=0,h=1;if(t.deltaAbsX()>t.deltaAbsY()?l=-1:t.deltaAbsX()<t.deltaAbsY()&&(h=-1),0!==t.deltaX()&&0!==t.deltaY()&&(i.faceLeft||i.faceRight)&&(i.faceTop||i.faceBottom)&&(l=Math.min(Math.abs(t.position.x-o-i.right),Math.abs(t.right-o-i.left)),h=Math.min(Math.abs(t.position.y-a-i.bottom),Math.abs(t.bottom-a-i.top))),l<h){if((i.faceLeft||i.faceRight)&&0!==(s=this.tileCheckX(t,i,n))&&!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!0;(i.faceTop||i.faceBottom)&&(p=this.tileCheckY(t,i,n))}else{if((i.faceTop||i.faceBottom)&&0!==(p=this.tileCheckY(t,i,n))&&!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!0;(i.faceLeft||i.faceRight)&&(s=this.tileCheckX(t,i,n))}return 0!==s||0!==p},tileCheckX:function(e,t,i){var n=0,r=i.fixedToCamera?0:i.position.x;return e.deltaX()<0&&!e.blocked.left&&t.collideRight&&e.checkCollision.left?t.faceRight&&e.x-r<t.right&&(n=e.x-r-t.right)<-this.TILE_BIAS&&(n=0):0<e.deltaX()&&!e.blocked.right&&t.collideLeft&&e.checkCollision.right&&t.faceLeft&&e.right-r>t.left&&(n=e.right-r-t.left)>this.TILE_BIAS&&(n=0),0!==n&&(e.customSeparateX?e.overlapX=n:this.processTileSeparationX(e,n)),n},tileCheckY:function(e,t,i){var n=0,r=i.fixedToCamera?0:i.position.y;return e.deltaY()<0&&!e.blocked.up&&t.collideDown&&e.checkCollision.up?t.faceBottom&&e.y-r<t.bottom&&(n=e.y-r-t.bottom)<-this.TILE_BIAS&&(n=0):0<e.deltaY()&&!e.blocked.down&&t.collideUp&&e.checkCollision.down&&t.faceTop&&e.bottom-r>t.top&&(n=e.bottom-r-t.top)>this.TILE_BIAS&&(n=0),0!==n&&(e.customSeparateY?e.overlapY=n:this.processTileSeparationY(e,n)),n},processTileSeparationX:function(e,t){t<0?e.blocked.left=!0:0<t&&(e.blocked.right=!0),e.position.x-=t,0===e.bounce.x?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x},processTileSeparationY:function(e,t){t<0?e.blocked.up=!0:0<t&&(e.blocked.down=!0),e.position.y-=t,0===e.bounce.y?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y}},U.Utils.mixinPrototype(U.Physics.Arcade.prototype,U.Physics.Arcade.TilemapCollision.prototype),p2.Body.prototype.parent=null,p2.Spring.prototype.parent=null,U.Physics.P2=function(e,t){this.game=e,void 0===t?t={gravity:[0,0],broadphase:new p2.SAPBroadphase}:(t.hasOwnProperty("gravity")||(t.gravity=[0,0]),t.hasOwnProperty("broadphase")||(t.broadphase=new p2.SAPBroadphase)),this.config=t,this.world=new p2.World(this.config),this.frameRate=1/60,this.useElapsedTime=!1,this.paused=!1,this.materials=[],this.gravity=new U.Physics.P2.InversePointProxy(this,this.world.gravity),this.walls={left:null,right:null,top:null,bottom:null},this.onBodyAdded=new U.Signal,this.onBodyRemoved=new U.Signal,this.onSpringAdded=new U.Signal,this.onSpringRemoved=new U.Signal,this.onConstraintAdded=new U.Signal,this.onConstraintRemoved=new U.Signal,this.onContactMaterialAdded=new U.Signal,this.onContactMaterialRemoved=new U.Signal,this.postBroadphaseCallback=null,this.callbackContext=null,this.onBeginContact=new U.Signal,this.onEndContact=new U.Signal,t.hasOwnProperty("mpx")&&t.hasOwnProperty("pxm")&&t.hasOwnProperty("mpxi")&&t.hasOwnProperty("pxmi")&&(this.mpx=t.mpx,this.mpxi=t.mpxi,this.pxm=t.pxm,this.pxmi=t.pxmi),this.world.on("beginContact",this.beginContactHandler,this),this.world.on("endContact",this.endContactHandler,this),this.collisionGroups=[],this.nothingCollisionGroup=new U.Physics.P2.CollisionGroup(1),this.boundsCollisionGroup=new U.Physics.P2.CollisionGroup(2),this.everythingCollisionGroup=new U.Physics.P2.CollisionGroup(2147483648),this.boundsCollidesWith=[],this._toRemove=[],this._collisionGroupID=2,this._boundsLeft=!0,this._boundsRight=!0,this._boundsTop=!0,this._boundsBottom=!0,this._boundsOwnGroup=!1,this.setBoundsToWorld(!0,!0,!0,!0,!1)},U.Physics.P2.prototype={removeBodyNextStep:function(e){this._toRemove.push(e)},preUpdate:function(){for(var e=this._toRemove.length;e--;)this.removeBody(this._toRemove[e]);this._toRemove.length=0},enable:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!0);var n=1;if(Array.isArray(e))for(n=e.length;n--;)e[n]instanceof U.Group?this.enable(e[n].children,t,i):(this.enableBody(e[n],t),i&&e[n].hasOwnProperty("children")&&0<e[n].children.length&&this.enable(e[n],t,!0));else e instanceof U.Group?this.enable(e.children,t,i):(this.enableBody(e,t),i&&e.hasOwnProperty("children")&&0<e.children.length&&this.enable(e.children,t,!0))},enableBody:function(e,t){e.hasOwnProperty("body")&&null===e.body&&(e.body=new U.Physics.P2.Body(this.game,e,e.x,e.y,1),e.body.debug=t,void 0!==e.anchor&&e.anchor.set(.5))},setImpactEvents:function(e){e?this.world.on("impact",this.impactHandler,this):this.world.off("impact",this.impactHandler,this)},setPostBroadphaseCallback:function(e,t){this.postBroadphaseCallback=e,this.callbackContext=t,null!==e?this.world.on("postBroadphase",this.postBroadphaseHandler,this):this.world.off("postBroadphase",this.postBroadphaseHandler,this)},postBroadphaseHandler:function(e){if(this.postBroadphaseCallback&&0!==e.pairs.length)for(var t=e.pairs.length-2;0<=t;t-=2)e.pairs[t].parent&&e.pairs[t+1].parent&&!this.postBroadphaseCallback.call(this.callbackContext,e.pairs[t].parent,e.pairs[t+1].parent)&&e.pairs.splice(t,2)},impactHandler:function(e){if(e.bodyA.parent&&e.bodyB.parent){var t=e.bodyA.parent,i=e.bodyB.parent;t._bodyCallbacks[e.bodyB.id]&&t._bodyCallbacks[e.bodyB.id].call(t._bodyCallbackContext[e.bodyB.id],t,i,e.shapeA,e.shapeB),i._bodyCallbacks[e.bodyA.id]&&i._bodyCallbacks[e.bodyA.id].call(i._bodyCallbackContext[e.bodyA.id],i,t,e.shapeB,e.shapeA),t._groupCallbacks[e.shapeB.collisionGroup]&&t._groupCallbacks[e.shapeB.collisionGroup].call(t._groupCallbackContext[e.shapeB.collisionGroup],t,i,e.shapeA,e.shapeB),i._groupCallbacks[e.shapeA.collisionGroup]&&i._groupCallbacks[e.shapeA.collisionGroup].call(i._groupCallbackContext[e.shapeA.collisionGroup],i,t,e.shapeB,e.shapeA)}},beginContactHandler:function(e){e.bodyA&&e.bodyB&&(this.onBeginContact.dispatch(e.bodyA,e.bodyB,e.shapeA,e.shapeB,e.contactEquations),e.bodyA.parent&&e.bodyA.parent.onBeginContact.dispatch(e.bodyB.parent,e.bodyB,e.shapeA,e.shapeB,e.contactEquations),e.bodyB.parent&&e.bodyB.parent.onBeginContact.dispatch(e.bodyA.parent,e.bodyA,e.shapeB,e.shapeA,e.contactEquations))},endContactHandler:function(e){e.bodyA&&e.bodyB&&(this.onEndContact.dispatch(e.bodyA,e.bodyB,e.shapeA,e.shapeB),e.bodyA.parent&&e.bodyA.parent.onEndContact.dispatch(e.bodyB.parent,e.bodyB,e.shapeA,e.shapeB),e.bodyB.parent&&e.bodyB.parent.onEndContact.dispatch(e.bodyA.parent,e.bodyA,e.shapeB,e.shapeA))},setBoundsToWorld:function(e,t,i,n,r){this.setBounds(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,e,t,i,n,r)},setWorldMaterial:function(e,t,i,n,r){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),t&&this.walls.left&&(this.walls.left.shapes[0].material=e),i&&this.walls.right&&(this.walls.right.shapes[0].material=e),n&&this.walls.top&&(this.walls.top.shapes[0].material=e),r&&this.walls.bottom&&(this.walls.bottom.shapes[0].material=e)},updateBoundsCollisionGroup:function(e){void 0===e&&(e=!0);var t=e?this.boundsCollisionGroup.mask:this.everythingCollisionGroup.mask;this.walls.left&&(this.walls.left.shapes[0].collisionGroup=t),this.walls.right&&(this.walls.right.shapes[0].collisionGroup=t),this.walls.top&&(this.walls.top.shapes[0].collisionGroup=t),this.walls.bottom&&(this.walls.bottom.shapes[0].collisionGroup=t),this._boundsOwnGroup=e},setBounds:function(e,t,i,n,r,o,a,s,p){void 0===r&&(r=this._boundsLeft),void 0===o&&(o=this._boundsRight),void 0===a&&(a=this._boundsTop),void 0===s&&(s=this._boundsBottom),void 0===p&&(p=this._boundsOwnGroup),this.setupWall(r,"left",e,t,1.5707963267948966,p),this.setupWall(o,"right",e+i,t,-1.5707963267948966,p),this.setupWall(a,"top",e,t,-3.141592653589793,p),this.setupWall(s,"bottom",e,t+n,0,p),this._boundsLeft=r,this._boundsRight=o,this._boundsTop=a,this._boundsBottom=s,this._boundsOwnGroup=p},setupWall:function(e,t,i,n,r,o){e?(this.walls[t]?this.walls[t].position=[this.pxmi(i),this.pxmi(n)]:(this.walls[t]=new p2.Body({mass:0,position:[this.pxmi(i),this.pxmi(n)],angle:r}),this.walls[t].addShape(new p2.Plane),this.world.addBody(this.walls[t])),o&&(this.walls[t].shapes[0].collisionGroup=this.boundsCollisionGroup.mask)):this.walls[t]&&(this.world.removeBody(this.walls[t]),this.walls[t]=null)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},update:function(){this.paused||(this.useElapsedTime?this.world.step(this.game.time.physicsElapsed):this.world.step(this.frameRate))},reset:function(){this.world.on("beginContact",this.beginContactHandler,this),this.world.on("endContact",this.endContactHandler,this),this.nothingCollisionGroup=new U.Physics.P2.CollisionGroup(1),this.boundsCollisionGroup=new U.Physics.P2.CollisionGroup(2),this.everythingCollisionGroup=new U.Physics.P2.CollisionGroup(2147483648),this._collisionGroupID=2,this.setBoundsToWorld(!0,!0,!0,!0,!1)},clear:function(){this.world.time=0,this.world.fixedStepTime=0,this.world.solver&&this.world.solver.equations.length&&this.world.solver.removeAllEquations();for(var e=this.world.constraints,t=e.length-1;0<=t;t--)this.world.removeConstraint(e[t]);var i=this.world.bodies;for(t=i.length-1;0<=t;t--)this.world.removeBody(i[t]);var n=this.world.springs;for(t=n.length-1;0<=t;t--)this.world.removeSpring(n[t]);var r=this.world.contactMaterials;for(t=r.length-1;0<=t;t--)this.world.removeContactMaterial(r[t]);this.world.off("beginContact",this.beginContactHandler,this),this.world.off("endContact",this.endContactHandler,this),this.postBroadphaseCallback=null,this.callbackContext=null,this.impactCallback=null,this.collisionGroups=[],this._toRemove=[],this.boundsCollidesWith=[],this.walls={left:null,right:null,top:null,bottom:null}},destroy:function(){this.clear(),this.game=null},addBody:function(e){return!e.data.world&&(this.world.addBody(e.data),this.onBodyAdded.dispatch(e),!0)},removeBody:function(e){return e.data.world===this.world&&(this.world.removeBody(e.data),this.onBodyRemoved.dispatch(e)),e},addSpring:function(e){return e instanceof U.Physics.P2.Spring||e instanceof U.Physics.P2.RotationalSpring?this.world.addSpring(e.data):this.world.addSpring(e),this.onSpringAdded.dispatch(e),e},removeSpring:function(e){return e instanceof U.Physics.P2.Spring||e instanceof U.Physics.P2.RotationalSpring?this.world.removeSpring(e.data):this.world.removeSpring(e),this.onSpringRemoved.dispatch(e),e},createDistanceConstraint:function(e,t,i,n,r,o){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.DistanceConstraint(this,e,t,i,n,r,o))},createGearConstraint:function(e,t,i,n){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.GearConstraint(this,e,t,i,n))},createRevoluteConstraint:function(e,t,i,n,r,o){if(e=this.getBody(e),i=this.getBody(i),e&&i)return this.addConstraint(new U.Physics.P2.RevoluteConstraint(this,e,t,i,n,r,o))},createLockConstraint:function(e,t,i,n,r){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.LockConstraint(this,e,t,i,n,r))},createPrismaticConstraint:function(e,t,i,n,r,o,a){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.PrismaticConstraint(this,e,t,i,n,r,o,a))},addConstraint:function(e){return this.world.addConstraint(e),this.onConstraintAdded.dispatch(e),e},removeConstraint:function(e){return this.world.removeConstraint(e),this.onConstraintRemoved.dispatch(e),e},addContactMaterial:function(e){return this.world.addContactMaterial(e),this.onContactMaterialAdded.dispatch(e),e},removeContactMaterial:function(e){return this.world.removeContactMaterial(e),this.onContactMaterialRemoved.dispatch(e),e},getContactMaterial:function(e,t){return this.world.getContactMaterial(e,t)},setMaterial:function(e,t){for(var i=t.length;i--;)t[i].setMaterial(e)},createMaterial:function(e,t){e=e||"";var i=new U.Physics.P2.Material(e);return this.materials.push(i),void 0!==t&&t.setMaterial(i),i},createContactMaterial:function(e,t,i){void 0===e&&(e=this.createMaterial()),void 0===t&&(t=this.createMaterial());var n=new U.Physics.P2.ContactMaterial(e,t,i);return this.addContactMaterial(n)},getBodies:function(){for(var e=[],t=this.world.bodies.length;t--;)e.push(this.world.bodies[t].parent);return e},getBody:function(e){return e instanceof p2.Body?e:e instanceof U.Physics.P2.Body?e.data:e.body&&e.body.type===U.Physics.P2JS?e.body.data:null},getSprings:function(){for(var e=[],t=this.world.springs.length;t--;)e.push(this.world.springs[t].parent);return e},getConstraints:function(){for(var e=[],t=this.world.constraints.length;t--;)e.push(this.world.constraints[t]);return e},hitTest:function(e,t,i,n){void 0===t&&(t=this.world.bodies),void 0===i&&(i=5),void 0===n&&(n=!1);for(var r=[this.pxmi(e.x),this.pxmi(e.y)],o=[],a=t.length;a--;)t[a]instanceof U.Physics.P2.Body&&(!n||t[a].data.type!==p2.Body.STATIC)?o.push(t[a].data):t[a]instanceof p2.Body&&t[a].parent&&(!n||t[a].type!==p2.Body.STATIC)?o.push(t[a]):t[a]instanceof U.Sprite&&t[a].hasOwnProperty("body")&&(!n||t[a].body.data.type!==p2.Body.STATIC)&&o.push(t[a].body.data);return this.world.hitTest(r,o,i)},toJSON:function(){return this.world.toJSON()},createCollisionGroup:function(e){var t=Math.pow(2,this._collisionGroupID);this.walls.left&&(this.walls.left.shapes[0].collisionMask=this.walls.left.shapes[0].collisionMask|t),this.walls.right&&(this.walls.right.shapes[0].collisionMask=this.walls.right.shapes[0].collisionMask|t),this.walls.top&&(this.walls.top.shapes[0].collisionMask=this.walls.top.shapes[0].collisionMask|t),this.walls.bottom&&(this.walls.bottom.shapes[0].collisionMask=this.walls.bottom.shapes[0].collisionMask|t),this._collisionGroupID++;var i=new U.Physics.P2.CollisionGroup(t);return this.collisionGroups.push(i),e&&this.setCollisionGroup(e,i),i},setCollisionGroup:function(e,t){if(e instanceof U.Group)for(var i=0;i<e.total;i++)e.children[i].body&&e.children[i].body.type===U.Physics.P2JS&&e.children[i].body.setCollisionGroup(t);else e.body.setCollisionGroup(t)},createSpring:function(e,t,i,n,r,o,a,s,p){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addSpring(new U.Physics.P2.Spring(this,e,t,i,n,r,o,a,s,p))},createRotationalSpring:function(e,t,i,n,r){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addSpring(new U.Physics.P2.RotationalSpring(this,e,t,i,n,r))},createBody:function(e,t,i,n,r,o){void 0===n&&(n=!1);var a=new U.Physics.P2.Body(this.game,null,e,t,i);return!(o&&!a.addPolygon(r,o))&&(n&&this.world.addBody(a.data),a)},createParticle:function(e,t,i,n,r,o){void 0===n&&(n=!1);var a=new U.Physics.P2.Body(this.game,null,e,t,i);return!(o&&!a.addPolygon(r,o))&&(n&&this.world.addBody(a.data),a)},convertCollisionObjects:function(e,t,i){void 0===i&&(i=!0);for(var n=[],r=0,o=e.collision[t].length;r<o;r++){var a=e.collision[t][r],s=this.createBody(a.x,a.y,0,i,{},a.polyline);s&&n.push(s)}return n},clearTilemapLayerBodies:function(e,t){t=e.getLayer(t);for(var i=e.layers[t].bodies.length;i--;)e.layers[t].bodies[i].destroy();e.layers[t].bodies.length=0},convertTilemap:function(e,t,i,n){t=e.getLayer(t),void 0===i&&(i=!0),void 0===n&&(n=!0),this.clearTilemapLayerBodies(e,t);for(var r=0,o=0,a=0,s=0,p=e.layers[t].height;s<p;s++)for(var l=r=0,h=e.layers[t].width;l<h;l++){var u=e.layers[t].data[s][l];if(u&&-1<u.index&&u.collides)if(n){var d=e.getTileRight(t,l,s);if(0===r&&(o=u.x*u.width,a=u.y*u.height,r=u.width),d&&d.collides)r+=u.width;else(c=this.createBody(o,a,0,!1)).addRectangle(r,u.height,r/2,u.height/2,0),i&&this.addBody(c),e.layers[t].bodies.push(c),r=0}else{var c;(c=this.createBody(u.x*u.width,u.y*u.height,0,!1)).addRectangle(u.width,u.height,u.width/2,u.height/2,0),i&&this.addBody(c),e.layers[t].bodies.push(c)}}return e.layers[t].bodies},mpx:function(e){return 20*e},pxm:function(e){return.05*e},mpxi:function(e){return-20*e},pxmi:function(e){return-.05*e}},Object.defineProperty(U.Physics.P2.prototype,"friction",{get:function(){return this.world.defaultContactMaterial.friction},set:function(e){this.world.defaultContactMaterial.friction=e}}),Object.defineProperty(U.Physics.P2.prototype,"restitution",{get:function(){return this.world.defaultContactMaterial.restitution},set:function(e){this.world.defaultContactMaterial.restitution=e}}),Object.defineProperty(U.Physics.P2.prototype,"contactMaterial",{get:function(){return this.world.defaultContactMaterial},set:function(e){this.world.defaultContactMaterial=e}}),Object.defineProperty(U.Physics.P2.prototype,"applySpringForces",{get:function(){return this.world.applySpringForces},set:function(e){this.world.applySpringForces=e}}),Object.defineProperty(U.Physics.P2.prototype,"applyDamping",{get:function(){return this.world.applyDamping},set:function(e){this.world.applyDamping=e}}),Object.defineProperty(U.Physics.P2.prototype,"applyGravity",{get:function(){return this.world.applyGravity},set:function(e){this.world.applyGravity=e}}),Object.defineProperty(U.Physics.P2.prototype,"solveConstraints",{get:function(){return this.world.solveConstraints},set:function(e){this.world.solveConstraints=e}}),Object.defineProperty(U.Physics.P2.prototype,"time",{get:function(){return this.world.time}}),Object.defineProperty(U.Physics.P2.prototype,"emitImpactEvent",{get:function(){return this.world.emitImpactEvent},set:function(e){this.world.emitImpactEvent=e}}),Object.defineProperty(U.Physics.P2.prototype,"sleepMode",{get:function(){return this.world.sleepMode},set:function(e){this.world.sleepMode=e}}),Object.defineProperty(U.Physics.P2.prototype,"total",{get:function(){return this.world.bodies.length}}),U.Physics.P2.FixtureList=function(e){Array.isArray(e)||(e=[e]),this.rawList=e,this.init(),this.parse(this.rawList)},U.Physics.P2.FixtureList.prototype={init:function(){this.namedFixtures={},this.groupedFixtures=[],this.allFixtures=[]},setCategory:function(t,e){this.getFixtures(e).forEach(function(e){e.collisionGroup=t})},setMask:function(t,e){this.getFixtures(e).forEach(function(e){e.collisionMask=t})},setSensor:function(t,e){this.getFixtures(e).forEach(function(e){e.sensor=t})},setMaterial:function(t,e){this.getFixtures(e).forEach(function(e){e.material=t})},getFixtures:function(e){var t=[];if(e){e instanceof Array||(e=[e]);var i=this;return e.forEach(function(e){i.namedFixtures[e]&&t.push(i.namedFixtures[e])}),this.flatten(t)}return this.allFixtures},getFixtureByKey:function(e){return this.namedFixtures[e]},getGroup:function(e){return this.groupedFixtures[e]},parse:function(){var e,t,i,n;for(e in n=[],i=this.rawList)t=i[e],isNaN(e-0)?this.namedFixtures[e]=this.flatten(t):(this.groupedFixtures[e]=this.groupedFixtures[e]||[],this.groupedFixtures[e]=this.groupedFixtures[e].concat(t)),n.push(this.allFixtures=this.flatten(this.groupedFixtures))},flatten:function(e){var t,i;return t=[],i=arguments.callee,e.forEach(function(e){return Array.prototype.push.apply(t,Array.isArray(e)?i(e):[e])}),t}},U.Physics.P2.PointProxy=function(e,t){this.world=e,this.destination=t},U.Physics.P2.PointProxy.prototype.constructor=U.Physics.P2.PointProxy,Object.defineProperty(U.Physics.P2.PointProxy.prototype,"x",{get:function(){return this.world.mpx(this.destination[0])},set:function(e){this.destination[0]=this.world.pxm(e)}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"y",{get:function(){return this.world.mpx(this.destination[1])},set:function(e){this.destination[1]=this.world.pxm(e)}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"mx",{get:function(){return this.destination[0]},set:function(e){this.destination[0]=e}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"my",{get:function(){return this.destination[1]},set:function(e){this.destination[1]=e}}),U.Physics.P2.InversePointProxy=function(e,t){this.world=e,this.destination=t},U.Physics.P2.InversePointProxy.prototype.constructor=U.Physics.P2.InversePointProxy,Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"x",{get:function(){return this.world.mpxi(this.destination[0])},set:function(e){this.destination[0]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"y",{get:function(){return this.world.mpxi(this.destination[1])},set:function(e){this.destination[1]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"mx",{get:function(){return this.destination[0]},set:function(e){this.destination[0]=-e}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"my",{get:function(){return this.destination[1]},set:function(e){this.destination[1]=-e}}),U.Physics.P2.Body=function(e,t,i,n,r){t=t||null,i=i||0,n=n||0,void 0===r&&(r=1),this.game=e,this.world=e.physics.p2,this.sprite=t,this.type=U.Physics.P2JS,this.offset=new U.Point,this.data=new p2.Body({position:[this.world.pxmi(i),this.world.pxmi(n)],mass:r}),(this.data.parent=this).velocity=new U.Physics.P2.InversePointProxy(this.world,this.data.velocity),this.force=new U.Physics.P2.InversePointProxy(this.world,this.data.force),this.gravity=new U.Point,this.onBeginContact=new U.Signal,this.onEndContact=new U.Signal,this.collidesWith=[],this.removeNextStep=!1,this.debugBody=null,this.dirty=!1,this._collideWorldBounds=!0,this._bodyCallbacks={},this._bodyCallbackContext={},this._groupCallbacks={},this._groupCallbackContext={},this._reset=!1,t&&(this.setRectangleFromSprite(t),t.exists&&this.game.physics.p2.addBody(this))},U.Physics.P2.Body.prototype={createBodyCallback:function(e,t,i){var n=-1;e.id?n=e.id:e.body&&(n=e.body.id),-1<n&&(null===t?(delete this._bodyCallbacks[n],delete this._bodyCallbackContext[n]):(this._bodyCallbacks[n]=t,this._bodyCallbackContext[n]=i))},createGroupCallback:function(e,t,i){null===t?(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]):(this._groupCallbacks[e.mask]=t,this._groupCallbackContext[e.mask]=i)},getCollisionMask:function(){var e=0;this._collideWorldBounds&&(e=this.game.physics.p2.boundsCollisionGroup.mask);for(var t=0;t<this.collidesWith.length;t++)e|=this.collidesWith[t].mask;return e},updateCollisionMask:function(e){var t=this.getCollisionMask();if(void 0===e)for(var i=this.data.shapes.length-1;0<=i;i--)this.data.shapes[i].collisionMask=t;else e.collisionMask=t},setCollisionGroup:function(e,t){var i=this.getCollisionMask();if(void 0===t)for(var n=this.data.shapes.length-1;0<=n;n--)this.data.shapes[n].collisionGroup=e.mask,this.data.shapes[n].collisionMask=i;else t.collisionGroup=e.mask,t.collisionMask=i},clearCollision:function(e,t,i){if(void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i)for(var n=this.data.shapes.length-1;0<=n;n--)e&&(this.data.shapes[n].collisionGroup=null),t&&(this.data.shapes[n].collisionMask=null);else e&&(i.collisionGroup=null),t&&(i.collisionMask=null);e&&(this.collidesWith.length=0)},removeCollisionGroup:function(e,t,i){var n;if(void 0===t&&(t=!0),Array.isArray(e))for(var r=0;r<e.length;r++)-1<(n=this.collidesWith.indexOf(e[r]))&&(this.collidesWith.splice(n,1),t&&(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]));else-1<(n=this.collidesWith.indexOf(e))&&(this.collidesWith.splice(n,1),t&&(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]));var o=this.getCollisionMask();if(void 0===i)for(r=this.data.shapes.length-1;0<=r;r--)this.data.shapes[r].collisionMask=o;else i.collisionMask=o},collides:function(e,t,i,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)-1===this.collidesWith.indexOf(e[r])&&(this.collidesWith.push(e[r]),t&&this.createGroupCallback(e[r],t,i));else-1===this.collidesWith.indexOf(e)&&(this.collidesWith.push(e),t&&this.createGroupCallback(e,t,i));var o=this.getCollisionMask();if(void 0===n)for(r=this.data.shapes.length-1;0<=r;r--)this.data.shapes[r].collisionMask=o;else n.collisionMask=o},adjustCenterOfMass:function(){this.data.adjustCenterOfMass(),this.shapeChanged()},getVelocityAtPoint:function(e,t){return this.data.getVelocityAtPoint(e,t)},applyDamping:function(e){this.data.applyDamping(e)},applyImpulse:function(e,t,i){this.data.applyImpulse(e,[this.world.pxmi(t),this.world.pxmi(i)])},applyImpulseLocal:function(e,t,i){this.data.applyImpulseLocal(e,[this.world.pxmi(t),this.world.pxmi(i)])},applyForce:function(e,t,i){this.data.applyForce(e,[this.world.pxmi(t),this.world.pxmi(i)])},setZeroForce:function(){this.data.setZeroForce()},setZeroRotation:function(){this.data.angularVelocity=0},setZeroVelocity:function(){this.data.velocity[0]=0,this.data.velocity[1]=0},setZeroDamping:function(){this.data.damping=0,this.data.angularDamping=0},toLocalFrame:function(e,t){return this.data.toLocalFrame(e,t)},toWorldFrame:function(e,t){return this.data.toWorldFrame(e,t)},rotateLeft:function(e){this.data.angularVelocity=this.world.pxm(-e)},rotateRight:function(e){this.data.angularVelocity=this.world.pxm(e)},moveForward:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.velocity[0]=t*Math.cos(i),this.data.velocity[1]=t*Math.sin(i)},moveBackward:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.velocity[0]=-t*Math.cos(i),this.data.velocity[1]=-t*Math.sin(i)},thrust:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.force[0]+=t*Math.cos(i),this.data.force[1]+=t*Math.sin(i)},thrustLeft:function(e){var t=this.world.pxmi(-e),i=this.data.angle;this.data.force[0]+=t*Math.cos(i),this.data.force[1]+=t*Math.sin(i)},thrustRight:function(e){var t=this.world.pxmi(-e),i=this.data.angle;this.data.force[0]-=t*Math.cos(i),this.data.force[1]-=t*Math.sin(i)},reverse:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.force[0]-=t*Math.cos(i),this.data.force[1]-=t*Math.sin(i)},moveLeft:function(e){this.data.velocity[0]=this.world.pxmi(-e)},moveRight:function(e){this.data.velocity[0]=this.world.pxmi(e)},moveUp:function(e){this.data.velocity[1]=this.world.pxmi(-e)},moveDown:function(e){this.data.velocity[1]=this.world.pxmi(e)},preUpdate:function(){this.dirty=!0,this.removeNextStep&&(this.removeFromWorld(),this.removeNextStep=!1)},postUpdate:function(){this.sprite.x=this.world.mpxi(this.data.position[0])+this.offset.x,this.sprite.y=this.world.mpxi(this.data.position[1])+this.offset.y,this.fixedRotation||(this.sprite.rotation=this.data.angle),this.debugBody&&this.debugBody.updateSpriteTransform(),this.dirty=!1},reset:function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.setZeroForce(),this.setZeroVelocity(),this.setZeroRotation(),i&&this.setZeroDamping(),n&&(this.mass=1),this.x=e,this.y=t},addToWorld:function(){if(this.game.physics.p2._toRemove)for(var e=0;e<this.game.physics.p2._toRemove.length;e++)this.game.physics.p2._toRemove[e]===this&&this.game.physics.p2._toRemove.splice(e,1);this.data.world!==this.game.physics.p2.world&&this.game.physics.p2.addBody(this)},removeFromWorld:function(){this.data.world===this.game.physics.p2.world&&this.game.physics.p2.removeBodyNextStep(this)},destroy:function(){this.removeFromWorld(),this.clearShapes(),this._bodyCallbacks={},this._bodyCallbackContext={},this._groupCallbacks={},this._groupCallbackContext={},this.debugBody&&this.debugBody.destroy(!0,!0),this.debugBody=null,this.sprite&&(this.sprite.body=null,this.sprite=null)},clearShapes:function(){for(var e=this.data.shapes.length;e--;)this.data.removeShape(this.data.shapes[e]);this.shapeChanged()},addShape:function(e,t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.data.addShape(e,[this.world.pxmi(t),this.world.pxmi(i)],n),this.shapeChanged(),e},addCircle:function(e,t,i,n){var r=new p2.Circle({radius:this.world.pxm(e)});return this.addShape(r,t,i,n)},addRectangle:function(e,t,i,n,r){var o=new p2.Box({width:this.world.pxm(e),height:this.world.pxm(t)});return this.addShape(o,i,n,r)},addPlane:function(e,t,i){var n=new p2.Plane;return this.addShape(n,e,t,i)},addParticle:function(e,t,i){var n=new p2.Particle;return this.addShape(n,e,t,i)},addLine:function(e,t,i,n){var r=new p2.Line({length:this.world.pxm(e)});return this.addShape(r,t,i,n)},addCapsule:function(e,t,i,n,r){var o=new p2.Capsule({length:this.world.pxm(e),radius:this.world.pxm(t)});return this.addShape(o,i,n,r)},addPolygon:function(e,t){e=e||{},Array.isArray(t)||(t=Array.prototype.slice.call(arguments,1));var i=[];if(1===t.length&&Array.isArray(t[0]))i=t[0].slice(0);else if(Array.isArray(t[0]))i=t.slice();else if("number"==typeof t[0])for(var n=0,r=t.length;n<r;n+=2)i.push([t[n],t[n+1]]);var o=i.length-1;i[o][0]===i[0][0]&&i[o][1]===i[0][1]&&i.pop();for(var a=0;a<i.length;a++)i[a][0]=this.world.pxmi(i[a][0]),i[a][1]=this.world.pxmi(i[a][1]);var s=this.data.fromPolygon(i,e);return this.shapeChanged(),s},removeShape:function(e){var t=this.data.removeShape(e);return this.shapeChanged(),t},setCircle:function(e,t,i,n){return this.clearShapes(),this.addCircle(e,t,i,n)},setRectangle:function(e,t,i,n,r){return void 0===e&&(e=16),void 0===t&&(t=16),this.clearShapes(),this.addRectangle(e,t,i,n,r)},setRectangleFromSprite:function(e){return void 0===e&&(e=this.sprite),this.clearShapes(),this.addRectangle(e.width,e.height,0,0,e.rotation)},setMaterial:function(e,t){if(void 0===t)for(var i=this.data.shapes.length-1;0<=i;i--)this.data.shapes[i].material=e;else t.material=e},shapeChanged:function(){this.debugBody&&this.debugBody.draw()},addPhaserPolygon:function(e,t){for(var i=this.game.cache.getPhysicsData(e,t),n=[],r=0;r<i.length;r++){var o=i[r],a=this.addFixture(o);n[o.filter.group]=n[o.filter.group]||[],n[o.filter.group]=n[o.filter.group].concat(a),o.fixtureKey&&(n[o.fixtureKey]=a)}return this.data.aabbNeedsUpdate=!0,this.shapeChanged(),n},addFixture:function(e){var t=[];if(e.circle){(l=new p2.Circle({radius:this.world.pxm(e.circle.radius)})).collisionGroup=e.filter.categoryBits,l.collisionMask=e.filter.maskBits,l.sensor=e.isSensor;var i=p2.vec2.create();i[0]=this.world.pxmi(e.circle.position[0]-this.sprite.width/2),i[1]=this.world.pxmi(e.circle.position[1]-this.sprite.height/2),this.data.addShape(l,i),t.push(l)}else for(var n=e.polygons,r=p2.vec2.create(),o=0;o<n.length;o++){for(var a=n[o],s=[],p=0;p<a.length;p+=2)s.push([this.world.pxmi(a[p]),this.world.pxmi(a[p+1])]);for(var l=new p2.Convex({vertices:s}),h=0;h!==l.vertices.length;h++){var u=l.vertices[h];p2.vec2.sub(u,u,l.centerOfMass)}p2.vec2.scale(r,l.centerOfMass,1),r[0]-=this.world.pxmi(this.sprite.width/2),r[1]-=this.world.pxmi(this.sprite.height/2),l.updateTriangles(),l.updateCenterOfMass(),l.updateBoundingRadius(),l.collisionGroup=e.filter.categoryBits,l.collisionMask=e.filter.maskBits,l.sensor=e.isSensor,this.data.addShape(l,r),t.push(l)}return t},loadPolygon:function(e,t){if(null===e)var i=t;else i=this.game.cache.getPhysicsData(e,t);for(var n=p2.vec2.create(),r=0;r<i.length;r++){for(var o=[],a=0;a<i[r].shape.length;a+=2)o.push([this.world.pxmi(i[r].shape[a]),this.world.pxmi(i[r].shape[a+1])]);for(var s=new p2.Convex({vertices:o}),p=0;p!==s.vertices.length;p++){var l=s.vertices[p];p2.vec2.sub(l,l,s.centerOfMass)}p2.vec2.scale(n,s.centerOfMass,1),n[0]-=this.world.pxmi(this.sprite.width/2),n[1]-=this.world.pxmi(this.sprite.height/2),s.updateTriangles(),s.updateCenterOfMass(),s.updateBoundingRadius(),this.data.addShape(s,n)}return this.data.aabbNeedsUpdate=!0,this.shapeChanged(),!0}},U.Physics.P2.Body.prototype.constructor=U.Physics.P2.Body,U.Physics.P2.Body.DYNAMIC=1,U.Physics.P2.Body.STATIC=2,U.Physics.P2.Body.KINEMATIC=4,Object.defineProperty(U.Physics.P2.Body.prototype,"static",{get:function(){return this.data.type===U.Physics.P2.Body.STATIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.STATIC?(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0):e||this.data.type!==U.Physics.P2.Body.STATIC||(this.data.type=U.Physics.P2.Body.DYNAMIC,this.mass=1)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"dynamic",{get:function(){return this.data.type===U.Physics.P2.Body.DYNAMIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.DYNAMIC?(this.data.type=U.Physics.P2.Body.DYNAMIC,this.mass=1):e||this.data.type!==U.Physics.P2.Body.DYNAMIC||(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"kinematic",{get:function(){return this.data.type===U.Physics.P2.Body.KINEMATIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.KINEMATIC?(this.data.type=U.Physics.P2.Body.KINEMATIC,this.mass=4):e||this.data.type!==U.Physics.P2.Body.KINEMATIC||(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"allowSleep",{get:function(){return this.data.allowSleep},set:function(e){e!==this.data.allowSleep&&(this.data.allowSleep=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angle",{get:function(){return U.Math.wrapAngle(U.Math.radToDeg(this.data.angle))},set:function(e){this.data.angle=U.Math.degToRad(U.Math.wrapAngle(e))}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularDamping",{get:function(){return this.data.angularDamping},set:function(e){this.data.angularDamping=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularForce",{get:function(){return this.data.angularForce},set:function(e){this.data.angularForce=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularVelocity",{get:function(){return this.data.angularVelocity},set:function(e){this.data.angularVelocity=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"damping",{get:function(){return this.data.damping},set:function(e){this.data.damping=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"fixedRotation",{get:function(){return this.data.fixedRotation},set:function(e){e!==this.data.fixedRotation&&(this.data.fixedRotation=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"inertia",{get:function(){return this.data.inertia},set:function(e){this.data.inertia=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"mass",{get:function(){return this.data.mass},set:function(e){e!==this.data.mass&&(this.data.mass=e,this.data.updateMassProperties())}}),Object.defineProperty(U.Physics.P2.Body.prototype,"motionState",{get:function(){return this.data.type},set:function(e){e!==this.data.type&&(this.data.type=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"rotation",{get:function(){return this.data.angle},set:function(e){this.data.angle=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"sleepSpeedLimit",{get:function(){return this.data.sleepSpeedLimit},set:function(e){this.data.sleepSpeedLimit=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"x",{get:function(){return this.world.mpxi(this.data.position[0])},set:function(e){this.data.position[0]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"y",{get:function(){return this.world.mpxi(this.data.position[1])},set:function(e){this.data.position[1]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"id",{get:function(){return this.data.id}}),Object.defineProperty(U.Physics.P2.Body.prototype,"debug",{get:function(){return null!==this.debugBody},set:function(e){e&&!this.debugBody?this.debugBody=new U.Physics.P2.BodyDebug(this.game,this.data):!e&&this.debugBody&&(this.debugBody.destroy(),this.debugBody=null)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"collideWorldBounds",{get:function(){return this._collideWorldBounds},set:function(e){e&&!this._collideWorldBounds?(this._collideWorldBounds=!0,this.updateCollisionMask()):!e&&this._collideWorldBounds&&(this._collideWorldBounds=!1,this.updateCollisionMask())}}),U.Physics.P2.BodyDebug=function(e,t,i){U.Group.call(this,e);var n={pixelsPerLengthUnit:e.physics.p2.mpx(1),debugPolygons:!1,lineWidth:1,alpha:.5};this.settings=U.Utils.extend(n,i),this.ppu=this.settings.pixelsPerLengthUnit,this.ppu=-1*this.ppu,this.body=t,this.canvas=new U.Graphics(e),this.canvas.alpha=this.settings.alpha,this.add(this.canvas),this.draw(),this.updateSpriteTransform()},U.Physics.P2.BodyDebug.prototype=Object.create(U.Group.prototype),U.Physics.P2.BodyDebug.prototype.constructor=U.Physics.P2.BodyDebug,U.Utils.extend(U.Physics.P2.BodyDebug.prototype,{updateSpriteTransform:function(){this.position.x=this.body.position[0]*this.ppu,this.position.y=this.body.position[1]*this.ppu,this.rotation=this.body.angle},draw:function(){var e,t,i,n,r,o,a,s,p,l,h,u,d,c,_;if(s=this.body,(l=this.canvas).clear(),i=parseInt(this.randomPastelHex(),16),o=16711680,a=this.lineWidth,s instanceof p2.Body&&s.shapes.length){var y=s.shapes.length;for(n=0;n!==y;){if(p=(t=s.shapes[n]).position||0,e=t.angle||0,t instanceof p2.Circle)this.drawCircle(l,p[0]*this.ppu,p[1]*this.ppu,e,t.radius*this.ppu,i,a);else if(t instanceof p2.Capsule)this.drawCapsule(l,p[0]*this.ppu,p[1]*this.ppu,e,t.length*this.ppu,t.radius*this.ppu,o,i,a);else if(t instanceof p2.Plane)this.drawPlane(l,p[0]*this.ppu,-p[1]*this.ppu,i,o,5*a,10*a,10*a,100*this.ppu,e);else if(t instanceof p2.Line)this.drawLine(l,t.length*this.ppu,o,a);else if(t instanceof p2.Box)this.drawRectangle(l,p[0]*this.ppu,p[1]*this.ppu,e,t.width*this.ppu,t.height*this.ppu,o,i,a);else if(t instanceof p2.Convex){for(u=[],d=p2.vec2.create(),r=c=0,_=t.vertices.length;0<=_?c<_:_<c;r=0<=_?++c:--c)h=t.vertices[r],p2.vec2.rotate(d,h,e),u.push([(d[0]+p[0])*this.ppu,-(d[1]+p[1])*this.ppu]);this.drawConvex(l,u,t.triangles,o,i,a,this.settings.debugPolygons,[p[0]*this.ppu,-p[1]*this.ppu])}n++}}},drawRectangle:function(e,t,i,n,r,o,a,s,p){void 0===p&&(p=1),void 0===a&&(a=0),e.lineStyle(p,a,1),e.beginFill(s),e.drawRect(t-r/2,i-o/2,r,o)},drawCircle:function(e,t,i,n,r,o,a){void 0===a&&(a=1),void 0===o&&(o=16777215),e.lineStyle(a,0,1),e.beginFill(o,1),e.drawCircle(t,i,2*-r),e.endFill(),e.moveTo(t,i),e.lineTo(t+r*Math.cos(-n),i+r*Math.sin(-n))},drawLine:function(e,t,i,n){void 0===n&&(n=1),void 0===i&&(i=0),e.lineStyle(5*n,i,1),e.moveTo(-t/2,0),e.lineTo(t/2,0)},drawConvex:function(e,t,i,n,r,o,a,s){var p,l,h,u,d,c,_,y,x,m,f;if(void 0===o&&(o=1),void 0===n&&(n=0),a){for(p=[16711680,65280,255],l=0;l!==t.length+1;)u=t[l%t.length],d=t[(l+1)%t.length],_=u[0],m=u[1],y=d[0],f=d[1],e.lineStyle(o,p[l%p.length],1),e.moveTo(_,-m),e.lineTo(y,-f),e.drawCircle(_,-m,2*o),l++;return e.lineStyle(o,0,1),e.drawCircle(s[0],s[1],2*o)}for(e.lineStyle(o,n,1),e.beginFill(r),l=0;l!==t.length;)c=(h=t[l])[0],x=h[1],0===l?e.moveTo(c,-x):e.lineTo(c,-x),l++;if(e.endFill(),2<t.length)return e.moveTo(t[t.length-1][0],-t[t.length-1][1]),e.lineTo(t[0][0],-t[0][1])},drawPath:function(e,t,i,n,r){var o,a,s,p,l,h,u,d,c,_,y;for(void 0===r&&(r=1),void 0===i&&(i=0),e.lineStyle(r,i,1),"number"==typeof n&&e.beginFill(n),s=a=null,o=0;o<t.length;)_=(c=t[o])[0],y=c[1],_===a&&y===s||(0===o?e.moveTo(_,y):(p=a,l=s,h=_,u=y,d=t[(o+1)%t.length][0],0!=(h-p)*(t[(o+1)%t.length][1]-l)-(d-p)*(u-l)&&e.lineTo(_,y)),a=_,s=y),o++;"number"==typeof n&&e.endFill(),2<t.length&&"number"==typeof n&&(e.moveTo(t[t.length-1][0],t[t.length-1][1]),e.lineTo(t[0][0],t[0][1]))},drawPlane:function(e,t,i,n,r,o,a,s,p,l){var h,u;void 0===o&&(o=1),void 0===n&&(n=16777215),e.lineStyle(o,r,11),e.beginFill(n),e.moveTo(t,-i),h=t+Math.cos(l)*this.game.width,u=i+Math.sin(l)*this.game.height,e.lineTo(h,-u),e.moveTo(t,-i),h=t+Math.cos(l)*-this.game.width,u=i+Math.sin(l)*-this.game.height,e.lineTo(h,-u)},drawCapsule:function(e,t,i,n,r,o,a,s,p){void 0===p&&(p=1),void 0===a&&(a=0),e.lineStyle(p,a,1);var l=Math.cos(n),h=Math.sin(n);e.beginFill(s,1),e.drawCircle(-r/2*l+t,-r/2*h+i,2*-o),e.drawCircle(r/2*l+t,r/2*h+i,2*-o),e.endFill(),e.lineStyle(p,a,0),e.beginFill(s,1),e.moveTo(-r/2*l+o*h+t,-r/2*h+o*l+i),e.lineTo(r/2*l+o*h+t,r/2*h+o*l+i),e.lineTo(r/2*l-o*h+t,r/2*h-o*l+i),e.lineTo(-r/2*l-o*h+t,-r/2*h-o*l+i),e.endFill(),e.lineStyle(p,a,1),e.moveTo(-r/2*l+o*h+t,-r/2*h+o*l+i),e.lineTo(r/2*l+o*h+t,r/2*h+o*l+i),e.moveTo(-r/2*l-o*h+t,-r/2*h-o*l+i),e.lineTo(r/2*l-o*h+t,r/2*h-o*l+i)},randomPastelHex:function(){var e,t,i,n;return i=[255,255,255],n=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),n=Math.floor((n+3*i[0])/4),t=Math.floor((t+3*i[1])/4),e=Math.floor((e+3*i[2])/4),this.rgbToHex(n,t,e)},rgbToHex:function(e,t,i){return this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},componentToHex:function(e){var t;return 2===(t=e.toString(16)).length?t:t+"0"}}),U.Physics.P2.Spring=function(e,t,i,n,r,o,a,s,p,l){this.game=e.game,void 0===n&&(n=1),void 0===r&&(r=100),void 0===o&&(o=1);var h={restLength:n=(this.world=e).pxm(n),stiffness:r,damping:o};null!=a&&(h.worldAnchorA=[e.pxm(a[0]),e.pxm(a[1])]),null!=s&&(h.worldAnchorB=[e.pxm(s[0]),e.pxm(s[1])]),null!=p&&(h.localAnchorA=[e.pxm(p[0]),e.pxm(p[1])]),null!=l&&(h.localAnchorB=[e.pxm(l[0]),e.pxm(l[1])]),this.data=new p2.LinearSpring(t,i,h),this.data.parent=this},U.Physics.P2.Spring.prototype.constructor=U.Physics.P2.Spring,U.Physics.P2.RotationalSpring=function(e,t,i,n,r,o){this.game=e.game,this.world=e,void 0===n&&(n=null),void 0===r&&(r=100),void 0===o&&(o=1),n&&(n=e.pxm(n));var a={restAngle:n,stiffness:r,damping:o};this.data=new p2.RotationalSpring(t,i,a),this.data.parent=this},U.Physics.P2.Spring.prototype.constructor=U.Physics.P2.Spring,U.Physics.P2.Material=function(e){this.name=e,p2.Material.call(this)},U.Physics.P2.Material.prototype=Object.create(p2.Material.prototype),U.Physics.P2.Material.prototype.constructor=U.Physics.P2.Material,U.Physics.P2.ContactMaterial=function(e,t,i){p2.ContactMaterial.call(this,e,t,i)},U.Physics.P2.ContactMaterial.prototype=Object.create(p2.ContactMaterial.prototype),U.Physics.P2.ContactMaterial.prototype.constructor=U.Physics.P2.ContactMaterial,U.Physics.P2.CollisionGroup=function(e){this.mask=e},U.Physics.P2.DistanceConstraint=function(e,t,i,n,r,o,a){void 0===n&&(n=100),void 0===r&&(r=[0,0]),void 0===o&&(o=[0,0]),void 0===a&&(a=Number.MAX_VALUE),this.game=e.game;var s={distance:n=(this.world=e).pxm(n),localAnchorA:r=[e.pxmi(r[0]),e.pxmi(r[1])],localAnchorB:o=[e.pxmi(o[0]),e.pxmi(o[1])],maxForce:a};p2.DistanceConstraint.call(this,t,i,s)},U.Physics.P2.DistanceConstraint.prototype=Object.create(p2.DistanceConstraint.prototype),U.Physics.P2.DistanceConstraint.prototype.constructor=U.Physics.P2.DistanceConstraint,U.Physics.P2.GearConstraint=function(e,t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=1),this.game=e.game,this.world=e;var o={angle:n,ratio:r};p2.GearConstraint.call(this,t,i,o)},U.Physics.P2.GearConstraint.prototype=Object.create(p2.GearConstraint.prototype),U.Physics.P2.GearConstraint.prototype.constructor=U.Physics.P2.GearConstraint,U.Physics.P2.LockConstraint=function(e,t,i,n,r,o){void 0===n&&(n=[0,0]),void 0===r&&(r=0),void 0===o&&(o=Number.MAX_VALUE),this.game=e.game;var a={localOffsetB:n=[(this.world=e).pxm(n[0]),e.pxm(n[1])],localAngleB:r,maxForce:o};p2.LockConstraint.call(this,t,i,a)},U.Physics.P2.LockConstraint.prototype=Object.create(p2.LockConstraint.prototype),U.Physics.P2.LockConstraint.prototype.constructor=U.Physics.P2.LockConstraint,U.Physics.P2.PrismaticConstraint=function(e,t,i,n,r,o,a,s){void 0===n&&(n=!0),void 0===r&&(r=[0,0]),void 0===o&&(o=[0,0]),void 0===a&&(a=[0,0]),void 0===s&&(s=Number.MAX_VALUE),this.game=e.game;var p={localAnchorA:r=[(this.world=e).pxmi(r[0]),e.pxmi(r[1])],localAnchorB:o=[e.pxmi(o[0]),e.pxmi(o[1])],localAxisA:a,maxForce:s,disableRotationalLock:!n};p2.PrismaticConstraint.call(this,t,i,p)},U.Physics.P2.PrismaticConstraint.prototype=Object.create(p2.PrismaticConstraint.prototype),U.Physics.P2.PrismaticConstraint.prototype.constructor=U.Physics.P2.PrismaticConstraint,U.Physics.P2.RevoluteConstraint=function(e,t,i,n,r,o,a){void 0===o&&(o=Number.MAX_VALUE),void 0===a&&(a=null),this.game=e.game,i=[(this.world=e).pxmi(i[0]),e.pxmi(i[1])],r=[e.pxmi(r[0]),e.pxmi(r[1])],a&&(a=[e.pxmi(a[0]),e.pxmi(a[1])]);var s={worldPivot:a,localPivotA:i,localPivotB:r,maxForce:o};p2.RevoluteConstraint.call(this,t,n,s)},U.Physics.P2.RevoluteConstraint.prototype=Object.create(p2.RevoluteConstraint.prototype),U.Physics.P2.RevoluteConstraint.prototype.constructor=U.Physics.P2.RevoluteConstraint,U.ImageCollection=function(e,t,i,n,r,o,a){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===r&&(r=0),void 0===o&&(o=0),this.name=e,this.firstgid=0|t,this.imageWidth=0|i,this.imageHeight=0|n,this.imageMargin=0|r,this.imageSpacing=0|o,this.properties=a||{},this.images=[],this.total=0},U.ImageCollection.prototype={containsImageIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function(e,t){this.images.push({gid:e,image:t}),this.total++}},U.ImageCollection.prototype.constructor=U.ImageCollection,U.Tile=function(e,t,i,n,r,o){this.layer=e,this.index=t,this.x=i,this.y=n,this.rotation=0,this.flipped=!1,this.worldX=i*r,this.worldY=n*o,this.width=r,this.height=o,this.centerX=Math.abs(r/2),this.centerY=Math.abs(o/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this},U.Tile.prototype={containsPoint:function(e,t){return!(e<this.worldX||t<this.worldY||e>this.right||t>this.bottom)},intersects:function(e,t,i,n){return!(i<=this.worldX||n<=this.worldY||e>=this.worldX+this.width||t>=this.worldY+this.height)},setCollisionCallback:function(e,t){this.collisionCallback=e,this.collisionCallbackContext=t},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(e,t,i,n){this.collideLeft=e,this.collideRight=t,this.collideUp=i,this.collideDown=n,this.faceLeft=e,this.faceRight=t,this.faceTop=i,this.faceBottom=n},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(e,t){return e&&t?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:e?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:!!t&&(this.faceTop||this.faceBottom||this.faceLeft||this.faceRight)},copy:function(e){this.index=e.index,this.alpha=e.alpha,this.properties=e.properties,this.collideUp=e.collideUp,this.collideDown=e.collideDown,this.collideLeft=e.collideLeft,this.collideRight=e.collideRight,this.collisionCallback=e.collisionCallback,this.collisionCallbackContext=e.collisionCallbackContext}},U.Tile.prototype.constructor=U.Tile,Object.defineProperty(U.Tile.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(U.Tile.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(U.Tile.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(U.Tile.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(U.Tile.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(U.Tile.prototype,"bottom",{get:function(){return this.worldY+this.height}}),U.Tilemap=function(e,t,i,n,r,o){this.game=e,this.key=t;var a=U.TilemapParser.parse(this.game,t,i,n,r,o);null!==a&&(this.width=a.width,this.height=a.height,this.tileWidth=a.tileWidth,this.tileHeight=a.tileHeight,this.orientation=a.orientation,this.format=a.format,this.version=a.version,this.properties=a.properties,this.widthInPixels=a.widthInPixels,this.heightInPixels=a.heightInPixels,this.layers=a.layers,this.tilesets=a.tilesets,this.imagecollections=a.imagecollections,this.tiles=a.tiles,this.objects=a.objects,this.collideIndexes=[],this.collision=a.collision,this.images=a.images,this.enableDebug=!1,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0)},U.Tilemap.CSV=0,U.Tilemap.TILED_JSON=1,U.Tilemap.NORTH=0,U.Tilemap.EAST=1,U.Tilemap.SOUTH=2,U.Tilemap.WEST=3,U.Tilemap.prototype={create:function(e,t,i,n,r,o){return void 0===o&&(o=this.game.world),this.width=t,this.height=i,this.setTileSize(n,r),this.layers.length=0,this.createBlankLayer(e,t,i,n,r,o)},setTileSize:function(e,t){this.tileWidth=e,this.tileHeight=t,this.widthInPixels=this.width*e,this.heightInPixels=this.height*t},addTilesetImage:function(e,t,i,n,r,o,a){if(void 0===e)return null;void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),0===i&&(i=32),0===n&&(n=32);var s=null;if(null!=t||(t=e),t instanceof U.BitmapData)s=t.canvas;else{if(!this.game.cache.checkImageKey(t))return null;s=this.game.cache.getImage(t)}var p=this.getTilesetIndex(e);if(null===p&&this.format===U.Tilemap.TILED_JSON)return null;if(this.tilesets[p])return this.tilesets[p].setImage(s),this.tilesets[p];var l=new U.Tileset(e,a,i,n,r,o,{});l.setImage(s),this.tilesets.push(l);for(var h=this.tilesets.length-1,u=r,d=r,c=0,_=0,y=0,x=a;x<a+l.total&&(this.tiles[x]=[u,d,h],u+=i+o,++c!==l.total)&&(++_!==l.columns||(u=r,d+=n+o,_=0,++y!==l.rows));x++);return l},createFromObjects:function(e,t,i,n,r,o,a,s,p){if(void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===a&&(a=this.game.world),void 0===s&&(s=U.Sprite),void 0===p&&(p=!0),this.objects[e])for(var l=0;l<this.objects[e].length;l++){var h=!1,u=this.objects[e][l];if(void 0!==u.gid&&"number"==typeof t&&u.gid===t?h=!0:void 0!==u.id&&"number"==typeof t&&u.id===t?h=!0:void 0!==u.name&&"string"==typeof t&&u.name===t&&(h=!0),h){var d=new s(this.game,parseFloat(u.x,10),parseFloat(u.y,10),i,n);for(var c in d.name=u.name,d.visible=u.visible,d.autoCull=o,d.exists=r,u.width&&(d.width=u.width),u.height&&(d.height=u.height),u.rotation&&(d.angle=u.rotation),p&&(d.y-=d.height),a.add(d),u.properties)a.set(d,c,u.properties[c],!1,!1,0,!0)}}},createFromTiles:function(e,t,i,n,r,o){"number"==typeof e&&(e=[e]),null==t?t=[]:"number"==typeof t&&(t=[t]),n=this.getLayer(n),void 0===r&&(r=this.game.world),void 0===o&&(o={}),void 0===o.customClass&&(o.customClass=U.Sprite),void 0===o.adjustY&&(o.adjustY=!0);var a=this.layers[n].width,s=this.layers[n].height;if(this.copy(0,0,a,s,n),this._results.length<2)return 0;for(var p,l=0,h=1,u=this._results.length;h<u;h++)if(-1!==e.indexOf(this._results[h].index)){for(var d in p=new o.customClass(this.game,this._results[h].worldX,this._results[h].worldY,i),o)p[d]=o[d];r.add(p),l++}if(1===t.length)for(h=0;h<e.length;h++)this.replace(e[h],t[0],0,0,a,s,n);else if(1<t.length)for(h=0;h<e.length;h++)this.replace(e[h],t[h],0,0,a,s,n);return l},createLayer:function(e,t,i,n){void 0===t&&(t=this.game.width),void 0===i&&(i=this.game.height),void 0===n&&(n=this.game.world);var r=e;if("string"==typeof e&&(r=this.getLayerIndex(e)),!(null===r||r>this.layers.length)){void 0===t||t<=0?t=Math.min(this.game.width,this.layers[r].widthInPixels):t>this.game.width&&(t=this.game.width),void 0===i||i<=0?i=Math.min(this.game.height,this.layers[r].heightInPixels):i>this.game.height&&(i=this.game.height),this.enableDebug;var o=n.add(new U.TilemapLayer(this.game,this,r,t,i));return this.enableDebug,o}},createBlankLayer:function(e,t,i,n,r,o){if(void 0===o&&(o=this.game.world),null===this.getLayerIndex(e)){for(var a,s={name:e,x:0,y:0,width:t,height:i,widthInPixels:t*n,heightInPixels:i*r,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},p=[],l=0;l<i;l++){a=[];for(var h=0;h<t;h++)a.push(new U.Tile(s,-1,h,l,n,r));p.push(a)}s.data=p,this.layers.push(s),this.currentLayer=this.layers.length-1;var u=s.widthInPixels,d=s.heightInPixels;return u>this.game.width&&(u=this.game.width),d>this.game.height&&(d=this.game.height),(p=new U.TilemapLayer(this.game,this,this.layers.length-1,u,d)).name=e,o.add(p)}},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return null},getLayerIndex:function(e){return this.getIndex(this.layers,e)},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},getImageIndex:function(e){return this.getIndex(this.images,e)},setTileIndexCallback:function(e,t,i,n){if(n=this.getLayer(n),"number"==typeof e)this.layers[n].callbacks[e]={callback:t,callbackContext:i};else for(var r=0,o=e.length;r<o;r++)this.layers[n].callbacks[e[r]]={callback:t,callbackContext:i}},setTileLocationCallback:function(e,t,i,n,r,o,a){if(a=this.getLayer(a),this.copy(e,t,i,n,a),!(this._results.length<2))for(var s=1;s<this._results.length;s++)this._results[s].setCollisionCallback(r,o)},setCollision:function(e,t,i,n){if(void 0===t&&(t=!0),void 0===n&&(n=!0),i=this.getLayer(i),"number"==typeof e)return this.setCollisionByIndex(e,t,i,!0);if(Array.isArray(e)){for(var r=0;r<e.length;r++)this.setCollisionByIndex(e[r],t,i,!1);n&&this.calculateFaces(i)}},setCollisionBetween:function(e,t,i,n,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n=this.getLayer(n),!(t<e)){for(var o=e;o<=t;o++)this.setCollisionByIndex(o,i,n,!1);r&&this.calculateFaces(n)}},setCollisionByExclusion:function(e,t,i,n){void 0===t&&(t=!0),void 0===n&&(n=!0),i=this.getLayer(i);for(var r=0,o=this.tiles.length;r<o;r++)-1===e.indexOf(r)&&this.setCollisionByIndex(r,t,i,!1);n&&this.calculateFaces(i)},setCollisionByIndex:function(e,t,i,n){if(void 0===t&&(t=!0),void 0===i&&(i=this.currentLayer),void 0===n&&(n=!0),t)this.collideIndexes.push(e);else{var r=this.collideIndexes.indexOf(e);-1<r&&this.collideIndexes.splice(r,1)}for(var o=0;o<this.layers[i].height;o++)for(var a=0;a<this.layers[i].width;a++){var s=this.layers[i].data[o][a];s&&s.index===e&&(t?s.setCollision(!0,!0,!0,!0):s.resetCollision(),s.faceTop=t,s.faceBottom=t,s.faceLeft=t,s.faceRight=t)}return n&&this.calculateFaces(i),i},getLayer:function(e){return void 0===e?e=this.currentLayer:"string"==typeof e?e=this.getLayerIndex(e):e instanceof U.TilemapLayer&&(e=e.index),e},setPreventRecalculate:function(e){if(!0===e&&!0!==this.preventingRecalculate&&(this.preventingRecalculate=!0,this.needToRecalculate={}),!1===e&&!0===this.preventingRecalculate){for(var t in this.preventingRecalculate=!1,this.needToRecalculate)this.calculateFaces(t);this.needToRecalculate=!1}},calculateFaces:function(e){if(this.preventingRecalculate)this.needToRecalculate[e]=!0;else for(var t=null,i=null,n=null,r=null,o=0,a=this.layers[e].height;o<a;o++)for(var s=0,p=this.layers[e].width;s<p;s++){var l=this.layers[e].data[o][s];l&&(t=this.getTileAbove(e,s,o),i=this.getTileBelow(e,s,o),n=this.getTileLeft(e,s,o),r=this.getTileRight(e,s,o),l.collides&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),t&&t.collides&&(l.faceTop=!1),i&&i.collides&&(l.faceBottom=!1),n&&n.collides&&(l.faceLeft=!1),r&&r.collides&&(l.faceRight=!1))}},getTileAbove:function(e,t,i){return 0<i?this.layers[e].data[i-1][t]:null},getTileBelow:function(e,t,i){return i<this.layers[e].height-1?this.layers[e].data[i+1][t]:null},getTileLeft:function(e,t,i){return 0<t?this.layers[e].data[i][t-1]:null},getTileRight:function(e,t,i){return t<this.layers[e].width-1?this.layers[e].data[i][t+1]:null},setLayer:function(e){e=this.getLayer(e),this.layers[e]&&(this.currentLayer=e)},hasTile:function(e,t,i){return i=this.getLayer(i),void 0!==this.layers[i].data[t]&&void 0!==this.layers[i].data[t][e]&&-1<this.layers[i].data[t][e].index},removeTile:function(e,t,i){if(i=this.getLayer(i),0<=e&&e<this.layers[i].width&&0<=t&&t<this.layers[i].height&&this.hasTile(e,t,i)){var n=this.layers[i].data[t][e];return this.layers[i].data[t][e]=new U.Tile(this.layers[i],-1,e,t,this.tileWidth,this.tileHeight),this.layers[i].dirty=!0,this.calculateFaces(i),n}},removeTileWorldXY:function(e,t,i,n,r){return r=this.getLayer(r),e=this.game.math.snapToFloor(e,i)/i,t=this.game.math.snapToFloor(t,n)/n,this.removeTile(e,t,r)},putTile:function(e,t,i,n){return null===e?this.removeTile(t,i,n):(n=this.getLayer(n),0<=t&&t<this.layers[n].width&&0<=i&&i<this.layers[n].height?(e instanceof U.Tile?(r=e.index,this.hasTile(t,i,n)?this.layers[n].data[i][t].copy(e):this.layers[n].data[i][t]=new U.Tile(n,r,t,i,e.width,e.height)):(r=e,this.hasTile(t,i,n)?this.layers[n].data[i][t].index=r:this.layers[n].data[i][t]=new U.Tile(this.layers[n],r,t,i,this.tileWidth,this.tileHeight)),-1<this.collideIndexes.indexOf(r)?this.layers[n].data[i][t].setCollision(!0,!0,!0,!0):this.layers[n].data[i][t].resetCollision(),this.layers[n].dirty=!0,this.calculateFaces(n),this.layers[n].data[i][t]):null);var r},putTileWorldXY:function(e,t,i,n,r,o){return o=this.getLayer(o),t=this.game.math.snapToFloor(t,n)/n,i=this.game.math.snapToFloor(i,r)/r,this.putTile(e,t,i,o)},searchTileIndex:function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=!1),n=this.getLayer(n);var r=0;if(i){for(var o=this.layers[n].height-1;0<=o;o--)for(var a=this.layers[n].width-1;0<=a;a--)if(this.layers[n].data[o][a].index===e){if(r===t)return this.layers[n].data[o][a];r++}}else for(o=0;o<this.layers[n].height;o++)for(a=0;a<this.layers[n].width;a++)if(this.layers[n].data[o][a].index===e){if(r===t)return this.layers[n].data[o][a];r++}return null},getTile:function(e,t,i,n){return void 0===n&&(n=!1),i=this.getLayer(i),0<=e&&e<this.layers[i].width&&0<=t&&t<this.layers[i].height?-1===this.layers[i].data[t][e].index?n?this.layers[i].data[t][e]:null:this.layers[i].data[t][e]:null},getTileWorldXY:function(e,t,i,n,r,o){return void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),r=this.getLayer(r),e=this.game.math.snapToFloor(e,i)/i,t=this.game.math.snapToFloor(t,n)/n,this.getTile(e,t,r,o)},copy:function(e,t,i,n,r){if(r=this.getLayer(r),this.layers[r]){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.layers[r].width),void 0===n&&(n=this.layers[r].height),e<0&&(e=0),t<0&&(t=0),i>this.layers[r].width&&(i=this.layers[r].width),n>this.layers[r].height&&(n=this.layers[r].height),this._results.length=0,this._results.push({x:e,y:t,width:i,height:n,layer:r});for(var o=t;o<t+n;o++)for(var a=e;a<e+i;a++)this._results.push(this.layers[r].data[o][a]);return this._results}this._results.length=0},paste:function(e,t,i,n){if(void 0===e&&(e=0),void 0===t&&(t=0),n=this.getLayer(n),i&&!(i.length<2)){for(var r=e-i[1].x,o=t-i[1].y,a=1;a<i.length;a++)this.layers[n].data[o+i[a].y][r+i[a].x].copy(i[a]);this.layers[n].dirty=!0,this.calculateFaces(n)}},swap:function(e,t,i,n,r,o,a){a=this.getLayer(a),this.copy(i,n,r,o,a),this._results.length<2||(this._tempA=e,this._tempB=t,this._results.forEach(this.swapHandler,this),this.paste(i,n,this._results,a))},swapHandler:function(e){e.index===this._tempA?e.index=this._tempB:e.index===this._tempB&&(e.index=this._tempA)},forEach:function(e,t,i,n,r,o,a){a=this.getLayer(a),this.copy(i,n,r,o,a),this._results.length<2||(this._results.forEach(e,t),this.paste(i,n,this._results,a))},replace:function(e,t,i,n,r,o,a){if(a=this.getLayer(a),this.copy(i,n,r,o,a),!(this._results.length<2)){for(var s=1;s<this._results.length;s++)this._results[s].index===e&&(this._results[s].index=t);this.paste(i,n,this._results,a)}},random:function(e,t,i,n,r){if(r=this.getLayer(r),this.copy(e,t,i,n,r),!(this._results.length<2)){for(var o=[],a=1;a<this._results.length;a++)if(this._results[a].index){var s=this._results[a].index;-1===o.indexOf(s)&&o.push(s)}for(var p=1;p<this._results.length;p++)this._results[p].index=this.game.rnd.pick(o);this.paste(e,t,this._results,r)}},shuffle:function(e,t,i,n,r){if(r=this.getLayer(r),this.copy(e,t,i,n,r),!(this._results.length<2)){for(var o=[],a=1;a<this._results.length;a++)this._results[a].index&&o.push(this._results[a].index);U.ArrayUtils.shuffle(o);for(var s=1;s<this._results.length;s++)this._results[s].index=o[s-1];this.paste(e,t,this._results,r)}},fill:function(e,t,i,n,r,o){if(o=this.getLayer(o),this.copy(t,i,n,r,o),!(this._results.length<2)){for(var a=1;a<this._results.length;a++)this._results[a].index=e;this.paste(t,i,this._results,o)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){for(var e="",t=[""],i=0;i<this.layers[this.currentLayer].height;i++){for(var n=0;n<this.layers[this.currentLayer].width;n++)e+="%c  ",1<this.layers[this.currentLayer].data[i][n]?this.debugMap[this.layers[this.currentLayer].data[i][n]]?t.push("background: "+this.debugMap[this.layers[this.currentLayer].data[i][n]]):t.push("background: #ffffff"):t.push("background: rgb(0, 0, 0)");e+="\n"}t[0]=e},destroy:function(){this.removeAllLayers(),this.data=[],this.game=null}},U.Tilemap.prototype.constructor=U.Tilemap,Object.defineProperty(U.Tilemap.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(e){e!==this.currentLayer&&this.setLayer(e)}}),U.TilemapLayer=function(e,t,i,n,r){n|=0,r|=0,U.Sprite.call(this,e,0,0),this.map=t,this.index=i,this.layer=t.layers[i],this.canvas=PIXI.CanvasPool.create(this,n,r),this.context=this.canvas.getContext("2d"),this.setTexture(new PIXI.Texture(new PIXI.BaseTexture(this.canvas))),this.type=U.TILEMAPLAYER,this.physicsType=U.TILEMAPLAYER,this.renderSettings={enableScrollDelta:!1,overdrawRatio:.2,copyCanvas:null},this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:!0,debugAlpha:.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"},this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._wrap=!1,this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:t.tileWidth,tileHeight:t.tileHeight,cw:t.tileWidth,ch:t.tileHeight,tilesets:[]},this._scrollX=0,this._scrollY=0,this._results=[],e.device.canvasBitBltShift||(this.renderSettings.copyCanvas=U.TilemapLayer.ensureSharedCopyCanvas()),this.fixedToCamera=!0},U.TilemapLayer.prototype=Object.create(U.Sprite.prototype),U.TilemapLayer.prototype.constructor=U.TilemapLayer,U.TilemapLayer.prototype.preUpdateCore=U.Component.Core.preUpdate,U.TilemapLayer.sharedCopyCanvas=null,U.TilemapLayer.ensureSharedCopyCanvas=function(){return this.sharedCopyCanvas||(this.sharedCopyCanvas=PIXI.CanvasPool.create(this,2,2)),this.sharedCopyCanvas},U.TilemapLayer.prototype.preUpdate=function(){return this.preUpdateCore()},U.TilemapLayer.prototype.postUpdate=function(){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y},U.TilemapLayer.prototype._renderCanvas=function(e){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y,this.render(),PIXI.Sprite.prototype._renderCanvas.call(this,e)},U.TilemapLayer.prototype._renderWebGL=function(e){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y,this.render(),PIXI.Sprite.prototype._renderWebGL.call(this,e)},U.TilemapLayer.prototype.destroy=function(){PIXI.CanvasPool.remove(this),U.Component.Destroy.prototype.destroy.call(this)},U.TilemapLayer.prototype.resize=function(e,t){this.canvas.width=e,this.canvas.height=t,this.texture.frame.resize(e,t),this.texture.width=e,this.texture.height=t,this.texture.crop.width=e,this.texture.crop.height=t,this.texture.baseTexture.width=e,this.texture.baseTexture.height=t,this.texture.baseTexture.dirty(),this.texture.requiresUpdate=!0,this.texture._updateUvs(),this.dirty=!0},U.TilemapLayer.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y)},U.TilemapLayer.prototype._fixX=function(e){return 1===this.scrollFactorX||0===this.scrollFactorX&&0===this.position.x?e:0===this.scrollFactorX&&0!==this.position.x?e-this.position.x:this._scrollX+(e-this._scrollX/this.scrollFactorX)},U.TilemapLayer.prototype._unfixX=function(e){return 1===this.scrollFactorX?e:this._scrollX/this.scrollFactorX+(e-this._scrollX)},U.TilemapLayer.prototype._fixY=function(e){return 1===this.scrollFactorY||0===this.scrollFactorY&&0===this.position.y?e:0===this.scrollFactorY&&0!==this.position.y?e-this.position.y:this._scrollY+(e-this._scrollY/this.scrollFactorY)},U.TilemapLayer.prototype._unfixY=function(e){return 1===this.scrollFactorY?e:this._scrollY/this.scrollFactorY+(e-this._scrollY)},U.TilemapLayer.prototype.getTileX=function(e){return Math.floor(this._fixX(e)/this._mc.tileWidth)},U.TilemapLayer.prototype.getTileY=function(e){return Math.floor(this._fixY(e)/this._mc.tileHeight)},U.TilemapLayer.prototype.getTileXY=function(e,t,i){return i.x=this.getTileX(e),i.y=this.getTileY(t),i},U.TilemapLayer.prototype.getRayCastTiles=function(e,t,i,n){t||(t=this.rayStepRate),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=this.getTiles(e.x,e.y,e.width,e.height,i,n);if(0===r.length)return[];for(var o=e.coordinatesOnLine(t),a=[],s=0;s<r.length;s++)for(var p=0;p<o.length;p++){var l=r[s],h=o[p];if(l.containsPoint(h[0],h[1])){a.push(l);break}}return a},U.TilemapLayer.prototype.getTiles=function(e,t,i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var a=!(r||o);e=this._fixX(e),t=this._fixY(t);for(var s=Math.floor(e/(this._mc.cw*this.scale.x)),p=Math.floor(t/(this._mc.ch*this.scale.y)),l=Math.ceil((e+i)/(this._mc.cw*this.scale.x))-s,h=Math.ceil((t+n)/(this._mc.ch*this.scale.y))-p;this._results.length;)this._results.pop();for(var u=p;u<p+h;u++)for(var d=s;d<s+l;d++){var c=this.layer.data[u];c&&c[d]&&(a||c[d].isInteresting(r,o))&&this._results.push(c[d])}return this._results.slice()},U.TilemapLayer.prototype.resolveTileset=function(e){var t=this._mc.tilesets;if(e<2e3)for(;t.length<e;)t.push(void 0);var i=this.map.tiles[e]&&this.map.tiles[e][2];if(null!==i){var n=this.map.tilesets[i];if(n&&n.containsTileIndex(e))return t[e]=n}return t[e]=null},U.TilemapLayer.prototype.resetTilesetCache=function(){for(var e=this._mc.tilesets;e.length;)e.pop()},U.TilemapLayer.prototype.setScale=function(e,t){e=e||1,t=t||e;for(var i=0;i<this.layer.data.length;i++)for(var n=this.layer.data[i],r=0;r<n.length;r++){var o=n[r];o.width=this.map.tileWidth*e,o.height=this.map.tileHeight*t,o.worldX=o.x*o.width,o.worldY=o.y*o.height}this.scale.setTo(e,t)},U.TilemapLayer.prototype.shiftCanvas=function(e,t,i){var n=e.canvas,r=n.width-Math.abs(t),o=n.height-Math.abs(i),a=0,s=0,p=t,l=i;t<0&&(a=-t,p=0),i<0&&(s=-i,l=0);var h=this.renderSettings.copyCanvas;if(h){(h.width<r||h.height<o)&&(h.width=r,h.height=o);var u=h.getContext("2d");u.clearRect(0,0,r,o),u.drawImage(n,a,s,r,o,0,0,r,o),e.clearRect(p,l,r,o),e.drawImage(h,0,0,r,o,p,l,r,o)}else e.save(),e.globalCompositeOperation="copy",e.drawImage(n,a,s,r,o,p,l,r,o),e.restore()},U.TilemapLayer.prototype.renderRegion=function(e,t,i,n,r,o){var a=this.context,s=this.layer.width,p=this.layer.height,l=this._mc.tileWidth,h=this._mc.tileHeight,u=this._mc.tilesets,d=NaN;this._wrap||(i<=r&&(i=Math.max(0,i),r=Math.min(s-1,r)),n<=o&&(n=Math.max(0,n),o=Math.min(p-1,o)));var c,_,y,x,m,f,v=i*l-e,g=(i+(1<<20)*s)%s;for(x=(n+(1<<20)*p)%p,f=o-n,_=n*h-t;0<=f;x++,f--,_+=h){p<=x&&(x-=p);var z=this.layer.data[x];for(y=g,m=r-i,c=v;0<=m;y++,m--,c+=l){s<=y&&(y-=s);var b=z[y];if(b&&!(b.index<0)){var w=b.index,S=u[w];void 0===S&&(S=this.resolveTileset(w)),b.alpha===d||this.debug||(a.globalAlpha=b.alpha,d=b.alpha),S?b.rotation||b.flipped?(a.save(),a.translate(c+b.centerX,_+b.centerY),a.rotate(b.rotation),b.flipped&&a.scale(-1,1),S.draw(a,-b.centerX,-b.centerY,w),a.restore()):S.draw(a,c,_,w):this.debugSettings.missingImageFill&&(a.fillStyle=this.debugSettings.missingImageFill,a.fillRect(c,_,l,h)),b.debug&&this.debugSettings.debuggedTileOverfill&&(a.fillStyle=this.debugSettings.debuggedTileOverfill,a.fillRect(c,_,l,h))}}}},U.TilemapLayer.prototype.renderDeltaScroll=function(e,t){var i=this._mc.scrollX,n=this._mc.scrollY,r=this.canvas.width,o=this.canvas.height,a=this._mc.tileWidth,s=this._mc.tileHeight,p=0,l=-a,h=0,u=-s;if(e<0?(p=r+e,l=r-1):0<e&&(l=e),t<0?(h=o+t,u=o-1):0<t&&(u=t),this.shiftCanvas(this.context,e,t),p=Math.floor((p+i)/a),l=Math.floor((l+i)/a),h=Math.floor((h+n)/s),u=Math.floor((u+n)/s),p<=l){this.context.clearRect(p*a-i,0,(l-p+1)*a,o);var d=Math.floor((0+n)/s),c=Math.floor((o-1+n)/s);this.renderRegion(i,n,p,d,l,c)}if(h<=u){this.context.clearRect(0,h*s-n,r,(u-h+1)*s);var _=Math.floor((0+i)/a),y=Math.floor((r-1+i)/a);this.renderRegion(i,n,_,h,y,u)}},U.TilemapLayer.prototype.renderFull=function(){var e=this._mc.scrollX,t=this._mc.scrollY,i=this.canvas.width,n=this.canvas.height,r=this._mc.tileWidth,o=this._mc.tileHeight,a=Math.floor(e/r),s=Math.floor((i-1+e)/r),p=Math.floor(t/o),l=Math.floor((n-1+t)/o);this.context.clearRect(0,0,i,n),this.renderRegion(e,t,a,p,s,l)},U.TilemapLayer.prototype.render=function(){var e=!1;if(this.visible){(this.dirty||this.layer.dirty)&&(e=!(this.layer.dirty=!1));var t=this.canvas.width,i=this.canvas.height,n=0|this._scrollX,r=0|this._scrollY,o=this._mc,a=o.scrollX-n,s=o.scrollY-r;if(e||0!==a||0!==s||o.renderWidth!==t||o.renderHeight!==i)return this.context.save(),o.scrollX=n,o.scrollY=r,o.renderWidth===t&&o.renderHeight===i||(o.renderWidth=t,o.renderHeight=i),this.debug&&(this.context.globalAlpha=this.debugSettings.debugAlpha,this.debugSettings.forceFullRedraw&&(e=!0)),!e&&this.renderSettings.enableScrollDelta&&Math.abs(a)+Math.abs(s)<Math.min(t,i)?this.renderDeltaScroll(a,s):this.renderFull(),this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.texture.baseTexture.dirty(),this.dirty=!1,this.context.restore(),!0}},U.TilemapLayer.prototype.renderDebug=function(){var e,t,i,n,r,o,a=this._mc.scrollX,s=this._mc.scrollY,p=this.context,l=this.canvas.width,h=this.canvas.height,u=this.layer.width,d=this.layer.height,c=this._mc.tileWidth,_=this._mc.tileHeight,y=Math.floor(a/c),x=Math.floor((l-1+a)/c),m=Math.floor(s/_),f=Math.floor((h-1+s)/_),v=y*c-a,g=m*_-s,z=(y+(1<<20)*u)%u,b=(m+(1<<20)*d)%d;for(p.strokeStyle=this.debugSettings.facingEdgeStroke,n=b,o=f-m,t=g;0<=o;n++,o--,t+=_){d<=n&&(n-=d);var w=this.layer.data[n];for(i=z,r=x-y,e=v;0<=r;i++,r--,e+=c){u<=i&&(i-=u);var S=w[i];!S||S.index<0||!S.collides||(this.debugSettings.collidingTileOverfill&&(p.fillStyle=this.debugSettings.collidingTileOverfill,p.fillRect(e,t,this._mc.cw,this._mc.ch)),this.debugSettings.facingEdgeStroke&&(p.beginPath(),S.faceTop&&(p.moveTo(e,t),p.lineTo(e+this._mc.cw,t)),S.faceBottom&&(p.moveTo(e,t+this._mc.ch),p.lineTo(e+this._mc.cw,t+this._mc.ch)),S.faceLeft&&(p.moveTo(e,t),p.lineTo(e,t+this._mc.ch)),S.faceRight&&(p.moveTo(e+this._mc.cw,t),p.lineTo(e+this._mc.cw,t+this._mc.ch)),p.closePath(),p.stroke()))}}},Object.defineProperty(U.TilemapLayer.prototype,"wrap",{get:function(){return this._wrap},set:function(e){this._wrap=e,this.dirty=!0}}),Object.defineProperty(U.TilemapLayer.prototype,"scrollX",{get:function(){return this._scrollX},set:function(e){this._scrollX=e}}),Object.defineProperty(U.TilemapLayer.prototype,"scrollY",{get:function(){return this._scrollY},set:function(e){this._scrollY=e}}),Object.defineProperty(U.TilemapLayer.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(e){this._mc.cw=0|e,this.dirty=!0}}),Object.defineProperty(U.TilemapLayer.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(e){this._mc.ch=0|e,this.dirty=!0}}),U.TilemapParser={INSERT_NULL:!1,parse:function(e,t,i,n,r,o){if(void 0===i&&(i=32),void 0===n&&(n=32),void 0===r&&(r=10),void 0===o&&(o=10),void 0===t)return this.getEmptyData();if(null===t)return this.getEmptyData(i,n,r,o);var a=e.cache.getTilemapData(t);if(a){if(a.format===U.Tilemap.CSV)return this.parseCSV(t,a.data,i,n);if(!a.format||a.format===U.Tilemap.TILED_JSON)return this.parseTiledJSON(a.data)}},parseCSV:function(e,t,i,n){for(var r=this.getEmptyData(),o=[],a=(t=t.trim()).split("\n"),s=a.length,p=0,l=0;l<a.length;l++){o[l]=[];for(var h=a[l].split(","),u=0;u<h.length;u++)o[l][u]=new U.Tile(r.layers[0],parseInt(h[u],10),u,l,i,n);0===p&&(p=h.length)}return r.format=U.Tilemap.CSV,r.name=e,r.width=p,r.height=s,r.tileWidth=i,r.tileHeight=n,r.widthInPixels=p*i,r.heightInPixels=s*n,r.layers[0].width=p,r.layers[0].height=s,r.layers[0].widthInPixels=r.widthInPixels,r.layers[0].heightInPixels=r.heightInPixels,r.layers[0].data=o,r},getEmptyData:function(e,t,i,n){return{width:null!=i?i:0,height:null!=n?n:0,tileWidth:null!=e?e:0,tileHeight:null!=t?t:0,orientation:"orthogonal",version:"1",properties:{},widthInPixels:0,heightInPixels:0,layers:[{name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:[]}],images:[],objects:{},collision:{},tilesets:[],tiles:[]}},parseTiledJSON:function(e){function t(e,t){var i={};for(var n in t){var r=t[n];void 0!==e[r]&&(i[r]=e[r])}return i}if("orthogonal"!==e.orientation)return null;for(var i={width:e.width,height:e.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:e.orientation,format:U.Tilemap.TILED_JSON,version:e.version,properties:e.properties,widthInPixels:e.width*e.tilewidth,heightInPixels:e.height*e.tileheight},n=[],r=0;r<e.layers.length;r++)if("tilelayer"===e.layers[r].type){var o=e.layers[r];if(!o.compression&&o.encoding&&"base64"===o.encoding){for(var a=window.atob(o.data),s=a.length,p=new Array(s),l=0;l<s;l+=4)p[l/4]=(a.charCodeAt(l)|a.charCodeAt(l+1)<<8|a.charCodeAt(l+2)<<16|a.charCodeAt(l+3)<<24)>>>0;o.data=p,delete o.encoding}else if(o.compression)continue;var h={name:o.name,x:o.x,y:o.y,width:o.width,height:o.height,widthInPixels:o.width*e.tilewidth,heightInPixels:o.height*e.tileheight,alpha:o.opacity,visible:o.visible,properties:{},indexes:[],callbacks:[],bodies:[]};o.properties&&(h.properties=o.properties);var u,d,c,_=0,y=[],x=[],m=0;for(s=o.data.length;m<s;m++){if(d=!1,c=u=0,536870912<(P=o.data[m]))switch(2147483648<P&&(P-=2147483648,c+=4),1073741824<P&&(P-=1073741824,c+=2),536870912<P&&(P-=536870912,c+=1),c){case 5:u=Math.PI/2;break;case 6:u=Math.PI;break;case 3:u=3*Math.PI/2;break;case 4:d=!(u=0);break;case 7:u=Math.PI/2,d=!0;break;case 2:u=Math.PI,d=!0;break;case 1:u=3*Math.PI/2,d=!0}if(0<P)(R=new U.Tile(h,P,_,x.length,e.tilewidth,e.tileheight)).rotation=u,R.flipped=d,0!==c&&(R.flippedVal=c),y.push(R);else U.TilemapParser.INSERT_NULL?y.push(null):y.push(new U.Tile(h,-1,_,x.length,e.tilewidth,e.tileheight));++_===o.width&&(x.push(y),_=0,y=[])}h.data=x,n.push(h)}i.layers=n;var f=[];for(r=0;r<e.layers.length;r++)if("imagelayer"===e.layers[r].type){var v=e.layers[r],g={name:v.name,image:v.image,x:v.x,y:v.y,alpha:v.opacity,visible:v.visible,properties:{}};v.properties&&(g.properties=v.properties),f.push(g)}i.images=f;var z=[],b=[],w=null;for(r=0;r<e.tilesets.length;r++){if((j=e.tilesets[r]).image){var S=new U.Tileset(j.name,j.firstgid,j.tilewidth,j.tileheight,j.margin,j.spacing,j.properties);j.tileproperties&&(S.tileProperties=j.tileproperties),S.updateTileData(j.imagewidth,j.imageheight),z.push(S)}else{var C=new U.ImageCollection(j.name,j.firstgid,j.tilewidth,j.tileheight,j.margin,j.spacing,j.properties);for(var M in j.tiles){g=j.tiles[M].image;var P=j.firstgid+parseInt(M,10);C.addImage(P,g)}b.push(C)}w&&(w.lastgid=j.firstgid-1),w=j}i.tilesets=z,i.imagecollections=b;var k={},T={};for(r=0;r<e.layers.length;r++)if("objectgroup"===e.layers[r].type){var G=e.layers[r];k[G.name]=[],T[G.name]=[];var O=0;for(s=G.objects.length;O<s;O++)if(G.objects[O].gid){var A={gid:G.objects[O].gid,name:G.objects[O].name,type:G.objects[O].hasOwnProperty("type")?G.objects[O].type:"",x:G.objects[O].x,y:G.objects[O].y,visible:G.objects[O].visible,properties:G.objects[O].properties};G.objects[O].rotation&&(A.rotation=G.objects[O].rotation),k[G.name].push(A)}else if(G.objects[O].polyline){A={name:G.objects[O].name,type:G.objects[O].type,x:G.objects[O].x,y:G.objects[O].y,width:G.objects[O].width,height:G.objects[O].height,visible:G.objects[O].visible,properties:G.objects[O].properties};G.objects[O].rotation&&(A.rotation=G.objects[O].rotation),A.polyline=[];for(var E=0;E<G.objects[O].polyline.length;E++)A.polyline.push([G.objects[O].polyline[E].x,G.objects[O].polyline[E].y]);T[G.name].push(A),k[G.name].push(A)}else if(G.objects[O].polygon){(A=t(G.objects[O],["name","type","x","y","visible","rotation","properties"])).polygon=[];for(E=0;E<G.objects[O].polygon.length;E++)A.polygon.push([G.objects[O].polygon[E].x,G.objects[O].polygon[E].y]);k[G.name].push(A)}else if(G.objects[O].ellipse){A=t(G.objects[O],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]);k[G.name].push(A)}else{(A=t(G.objects[O],["name","type","x","y","width","height","visible","rotation","properties"])).rectangle=!0,k[G.name].push(A)}}i.objects=k,i.collision=T,i.tiles=[];for(r=0;r<i.tilesets.length;r++){_=(j=i.tilesets[r]).tileMargin;var I=j.tileMargin,B=0,L=0,D=0;for(m=j.firstgid;m<j.firstgid+j.total&&(i.tiles[m]=[_,I,r],_+=j.tileWidth+j.tileSpacing,++B!==j.total)&&(++L!==j.columns||(_=j.tileMargin,I+=j.tileHeight+j.tileSpacing,L=0,++D!==j.rows));m++);}var R,F,j;for(r=0;r<i.layers.length;r++){h=i.layers[r],j=null;for(l=0;l<h.data.length;l++){y=h.data[l];for(var N=0;N<y.length;N++)null===(R=y[N])||R.index<0||(F=i.tiles[R.index][2],(j=i.tilesets[F]).tileProperties&&j.tileProperties[R.index-j.firstgid]&&(R.properties=U.Utils.mixin(j.tileProperties[R.index-j.firstgid],R.properties)))}}return i}},U.Tileset=function(e,t,i,n,r,o,a){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===r&&(r=0),void 0===o&&(o=0),this.name=e,this.firstgid=0|t,this.tileWidth=0|i,this.tileHeight=0|n,this.tileMargin=0|r,this.tileSpacing=0|o,this.properties=a||{},this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]},U.Tileset.prototype={draw:function(e,t,i,n){var r=n-this.firstgid<<1;0<=r&&r+1<this.drawCoords.length&&e.drawImage(this.image,this.drawCoords[r],this.drawCoords[r+1],this.tileWidth,this.tileHeight,t,i,this.tileWidth,this.tileHeight)},containsTileIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},setImage:function(e){this.image=e,this.updateTileData(e.width,e.height)},setSpacing:function(e,t){this.tileMargin=0|e,this.tileSpacing=0|t,this.image&&this.updateTileData(this.image.width,this.image.height)},updateTileData:function(e,t){var i=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(e-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i=Math.floor(i),n=Math.floor(n),this.rows&&this.rows!==i||this.columns&&this.columns,this.rows=i,this.columns=n,this.total=i*n,this.drawCoords.length=0;for(var r=this.tileMargin,o=this.tileMargin,a=0;a<this.rows;a++){for(var s=0;s<this.columns;s++)this.drawCoords.push(r),this.drawCoords.push(o),r+=this.tileWidth+this.tileSpacing;r=this.tileMargin,o+=this.tileHeight+this.tileSpacing}}},U.Tileset.prototype.constructor=U.Tileset,U.Particle=function(e,t,i,n,r){U.Sprite.call(this,e,t,i,n,r),this.autoScale=!1,this.scaleData=null,this._s=0,this.autoAlpha=!1,this.alphaData=null,this._a=0},U.Particle.prototype=Object.create(U.Sprite.prototype),U.Particle.prototype.constructor=U.Particle,U.Particle.prototype.update=function(){this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1)},U.Particle.prototype.onEmit=function(){},U.Particle.prototype.setAlphaData=function(e){this.alphaData=e,this._a=e.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},U.Particle.prototype.setScaleData=function(e){this.scaleData=e,this._s=e.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},U.Particle.prototype.reset=function(e,t,i){return U.Component.Reset.prototype.reset.call(this,e,t,i),this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},U.Particles=function(e){this.game=e,this.emitters={},this.ID=0},U.Particles.prototype={add:function(e){return this.emitters[e.name]=e},remove:function(e){delete this.emitters[e.name]},update:function(){for(var e in this.emitters)this.emitters[e].exists&&this.emitters[e].update()}},U.Particles.prototype.constructor=U.Particles,U.Particles.Arcade={},U.Particles.Arcade.Emitter=function(e,t,i,n){this.maxParticles=n||50,U.Group.call(this,e),this.name="emitter"+this.game.particles.ID++,this.type=U.EMITTER,this.physicsType=U.GROUP,this.area=new U.Rectangle(t,i,1,1),this.minParticleSpeed=new U.Point(-100,-100),this.maxParticleSpeed=new U.Point(100,100),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.minRotation=-360,this.maxRotation=360,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.gravity=100,this.particleClass=U.Particle,this.particleDrag=new U.Point,this.angularDrag=0,this.frequency=100,this.lifespan=2e3,this.bounce=new U.Point,this.on=!1,this.particleAnchor=new U.Point(.5,.5),this.blendMode=U.blendModes.NORMAL,this.emitX=t,this.emitY=i,this.autoScale=!1,this.autoAlpha=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new U.Point(1,1),this._maxParticleScale=new U.Point(1,1),this._quantity=0,this._timer=0,this._counter=0,this._flowQuantity=0,this._flowTotal=0,this._explode=!0,this._frames=null},U.Particles.Arcade.Emitter.prototype=Object.create(U.Group.prototype),U.Particles.Arcade.Emitter.prototype.constructor=U.Particles.Arcade.Emitter,U.Particles.Arcade.Emitter.prototype.update=function(){if(this.on&&this.game.time.time>=this._timer)if(this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion,0!==this._flowTotal)if(0<this._flowQuantity){for(var e=0;e<this._flowQuantity;e++)if(this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal)){this.on=!1;break}}else this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal&&(this.on=!1));else this.emitParticle()&&(this._counter++,0<this._quantity&&this._counter>=this._quantity&&(this.on=!1));for(e=this.children.length;e--;)this.children[e].exists&&this.children[e].update()},U.Particles.Arcade.Emitter.prototype.makeParticles=function(e,t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=this.maxParticles),void 0===n&&(n=!1),void 0===r&&(r=!1);var o,a=0,s=e,p=t;for(this._frames=t,i>this.maxParticles&&(this.maxParticles=i);a<i;)Array.isArray(e)&&(s=this.game.rnd.pick(e)),Array.isArray(t)&&(p=this.game.rnd.pick(t)),o=new this.particleClass(this.game,0,0,s,p),this.game.physics.arcade.enable(o,!1),n?(o.body.checkCollision.any=!0,o.body.checkCollision.none=!1):o.body.checkCollision.none=!0,o.body.collideWorldBounds=r,o.body.skipQuadTree=!0,o.exists=!1,o.visible=!1,o.anchor.copyFrom(this.particleAnchor),this.add(o),a++;return this},U.Particles.Arcade.Emitter.prototype.kill=function(){return this.on=!1,this.alive=!1,this.exists=!1,this},U.Particles.Arcade.Emitter.prototype.revive=function(){return this.alive=!0,this.exists=!0,this},U.Particles.Arcade.Emitter.prototype.explode=function(e,t){return this._flowTotal=0,this.start(!0,e,0,t,!1),this},U.Particles.Arcade.Emitter.prototype.flow=function(e,t,i,n,r){return void 0!==i&&0!==i||(i=1),void 0===n&&(n=-1),void 0===r&&(r=!0),i>this.maxParticles&&(i=this.maxParticles),this._counter=0,this._flowQuantity=i,this._flowTotal=n,r?(this.start(!0,e,t,i),this._counter+=i,this.on=!0,this._timer=this.game.time.time+t*this.game.time.slowMotion):this.start(!1,e,t,i),this},U.Particles.Arcade.Emitter.prototype.start=function(e,t,i,n,r){if(void 0===e&&(e=!0),void 0===t&&(t=0),null!=i||(i=250),void 0===n&&(n=0),void 0===r&&(r=!1),n>this.maxParticles&&(n=this.maxParticles),this.revive(),this.visible=!0,this.lifespan=t,this.frequency=i,e||r)for(var o=0;o<n;o++)this.emitParticle();else this.on=!0,this._quantity=n,this._counter=0,this._timer=this.game.time.time+i*this.game.time.slowMotion;return this},U.Particles.Arcade.Emitter.prototype.emitParticle=function(e,t,i,n){void 0===e&&(e=null),void 0===t&&(t=null);var r=this.getFirstExists(!1);if(null===r)return!1;var o=this.game.rnd;void 0!==i&&void 0!==n?r.loadTexture(i,n):void 0!==i&&r.loadTexture(i);var a=this.emitX,s=this.emitY;null!==e?a=e:1<this.width&&(a=o.between(this.left,this.right)),null!==t?s=t:1<this.height&&(s=o.between(this.top,this.bottom)),r.reset(a,s),r.angle=0,r.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(r):this.particleSendToBack&&this.sendToBack(r),this.autoScale?r.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?r.scale.set(o.realInRange(this.minParticleScale,this.maxParticleScale)):this._minParticleScale.x===this._maxParticleScale.x&&this._minParticleScale.y===this._maxParticleScale.y||r.scale.set(o.realInRange(this._minParticleScale.x,this._maxParticleScale.x),o.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),void 0===n&&(Array.isArray(this._frames)?r.frame=this.game.rnd.pick(this._frames):r.frame=this._frames),this.autoAlpha?r.setAlphaData(this.alphaData):r.alpha=o.realInRange(this.minParticleAlpha,this.maxParticleAlpha),r.blendMode=this.blendMode;var p=r.body;return p.updateBounds(),p.bounce.copyFrom(this.bounce),p.drag.copyFrom(this.particleDrag),p.velocity.x=o.between(this.minParticleSpeed.x,this.maxParticleSpeed.x),p.velocity.y=o.between(this.minParticleSpeed.y,this.maxParticleSpeed.y),p.angularVelocity=o.between(this.minRotation,this.maxRotation),p.gravity.y=this.gravity,p.angularDrag=this.angularDrag,r.onEmit(),!0},U.Particles.Arcade.Emitter.prototype.destroy=function(){this.game.particles.remove(this),U.Group.prototype.destroy.call(this,!0,!1)},U.Particles.Arcade.Emitter.prototype.setSize=function(e,t){return this.area.width=e,this.area.height=t,this},U.Particles.Arcade.Emitter.prototype.setXSpeed=function(e,t){return e=e||0,t=t||0,this.minParticleSpeed.x=e,this.maxParticleSpeed.x=t,this},U.Particles.Arcade.Emitter.prototype.setYSpeed=function(e,t){return e=e||0,t=t||0,this.minParticleSpeed.y=e,this.maxParticleSpeed.y=t,this},U.Particles.Arcade.Emitter.prototype.setRotation=function(e,t){return e=e||0,t=t||0,this.minRotation=e,this.maxRotation=t,this},U.Particles.Arcade.Emitter.prototype.setAlpha=function(e,t,i,n,r){if(void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=U.Easing.Linear.None),void 0===r&&(r=!1),this.minParticleAlpha=e,this.maxParticleAlpha=t,this.autoAlpha=!1,0<i&&e!==t){var o={v:e},a=this.game.make.tween(o).to({v:t},i,n);a.yoyo(r),this.alphaData=a.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0}return this},U.Particles.Arcade.Emitter.prototype.setScale=function(e,t,i,n,r,o,a){if(void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=U.Easing.Linear.None),void 0===a&&(a=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(e,i),this._maxParticleScale.set(t,n),this.autoScale=!1,0<r&&(e!==t||i!==n)){var s={x:e,y:i},p=this.game.make.tween(s).to({x:t,y:n},r,o);p.yoyo(a),this.scaleData=p.generateData(60),this.scaleData.reverse(),this.autoScale=!0}return this},U.Particles.Arcade.Emitter.prototype.at=function(e){return e.center?(this.emitX=e.center.x,this.emitY=e.center.y):(this.emitX=e.world.x+e.anchor.x*e.width,this.emitY=e.world.y+e.anchor.y*e.height),this},Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"width",{get:function(){return this.area.width},set:function(e){this.area.width=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"height",{get:function(){return this.area.height},set:function(e){this.area.height=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"x",{get:function(){return this.emitX},set:function(e){this.emitX=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"y",{get:function(){return this.emitY},set:function(e){this.emitY=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"left",{get:function(){return Math.floor(this.x-this.area.width/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"right",{get:function(){return Math.floor(this.x+this.area.width/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"top",{get:function(){return Math.floor(this.y-this.area.height/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"bottom",{get:function(){return Math.floor(this.y+this.area.height/2)}}),U.Weapon=function(e,t){U.Plugin.call(this,e,t),this.bullets=null,this.autoExpandBulletsGroup=!1,this.autofire=!1,this.shots=0,this.fireLimit=0,this.fireRate=100,this.fireRateVariance=0,this.fireFrom=new U.Rectangle(0,0,1,1),this.fireAngle=U.ANGLE_UP,this.bulletInheritSpriteSpeed=!1,this.bulletAnimation="",this.bulletFrameRandom=!1,this.bulletFrameCycle=!1,this.bulletWorldWrap=!1,this.bulletWorldWrapPadding=0,this.bulletAngleOffset=0,this.bulletAngleVariance=0,this.bulletSpeed=200,this.bulletSpeedVariance=0,this.bulletLifespan=0,this.bulletKillDistance=0,this.bulletGravity=new U.Point(0,0),this.bulletRotateToVelocity=!1,this.bulletKey="",this.bulletFrame="",this._bulletClass=U.Bullet,this._bulletCollideWorldBounds=!1,this._bulletKillType=U.Weapon.KILL_WORLD_BOUNDS,this._data={customBody:!1,width:0,height:0,offsetX:0,offsetY:0},this.bounds=new U.Rectangle,this.bulletBounds=e.world.bounds,this.bulletFrames=[],this.bulletFrameIndex=0,this.anims={},this.onFire=new U.Signal,this.onKill=new U.Signal,this.onFireLimit=new U.Signal,this.trackedSprite=null,this.trackedPointer=null,this.trackRotation=!1,this.trackOffset=new U.Point,this._nextFire=0,this._rotatedPoint=new U.Point},U.Weapon.prototype=Object.create(U.Plugin.prototype),U.Weapon.prototype.constructor=U.Weapon,U.Weapon.KILL_NEVER=0,U.Weapon.KILL_LIFESPAN=1,U.Weapon.KILL_DISTANCE=2,U.Weapon.KILL_WEAPON_BOUNDS=3,U.Weapon.KILL_CAMERA_BOUNDS=4,U.Weapon.KILL_WORLD_BOUNDS=5,U.Weapon.KILL_STATIC_BOUNDS=6,U.Weapon.prototype.createBullets=function(e,t,i,n){return void 0===e&&(e=1),void 0===n&&(n=this.game.world),this.bullets||(this.bullets=this.game.add.physicsGroup(U.Physics.ARCADE,n),this.bullets.classType=this._bulletClass),0!==e&&(-1===e&&(this.autoExpandBulletsGroup=!0,e=1),this.bullets.createMultiple(e,t,i),this.bullets.setAll("data.bulletManager",this),this.bulletKey=t,this.bulletFrame=i),this},U.Weapon.prototype.forEach=function(e,t){return this.bullets.forEachExists(e,t,arguments),this},U.Weapon.prototype.pauseAll=function(){return this.bullets.setAll("body.enable",!1),this},U.Weapon.prototype.resumeAll=function(){return this.bullets.setAll("body.enable",!0),this},U.Weapon.prototype.killAll=function(){return this.bullets.callAllExists("kill",!0),this.bullets.setAll("body.enable",!0),this},U.Weapon.prototype.resetShots=function(e){return void(this.shots=0)!==e&&(this.fireLimit=e),this},U.Weapon.prototype.destroy=function(){this.parent.remove(this,!1),this.bullets.destroy(),this.game=null,this.parent=null,this.active=!1,this.visible=!1},U.Weapon.prototype.update=function(){this._bulletKillType===U.Weapon.KILL_WEAPON_BOUNDS&&(this.trackedSprite?(this.trackedSprite.updateTransform(),this.bounds.centerOn(this.trackedSprite.worldPosition.x,this.trackedSprite.worldPosition.y)):this.trackedPointer&&this.bounds.centerOn(this.trackedPointer.worldX,this.trackedPointer.worldY)),this.autofire&&this.fire()},U.Weapon.prototype.trackSprite=function(e,t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=!1),this.trackedPointer=null,this.trackedSprite=e,this.trackRotation=n,this.trackOffset.set(t,i),this},U.Weapon.prototype.trackPointer=function(e,t,i){return void 0===e&&(e=this.game.input.activePointer),void 0===t&&(t=0),void 0===i&&(i=0),this.trackedPointer=e,this.trackedSprite=null,this.trackRotation=!1,this.trackOffset.set(t,i),this},U.Weapon.prototype.fire=function(e,t,i){if(this.game.time.now<this._nextFire||0<this.fireLimit&&this.shots===this.fireLimit)return!1;var n=this.bulletSpeed;0!==this.bulletSpeedVariance&&(n+=U.Math.between(-this.bulletSpeedVariance,this.bulletSpeedVariance)),e?1<this.fireFrom.width?this.fireFrom.centerOn(e.x,e.y):(this.fireFrom.x=e.x,this.fireFrom.y=e.y):this.trackedSprite?(this.trackRotation?(this._rotatedPoint.set(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y),this._rotatedPoint.rotate(this.trackedSprite.world.x,this.trackedSprite.world.y,this.trackedSprite.rotation),1<this.fireFrom.width?this.fireFrom.centerOn(this._rotatedPoint.x,this._rotatedPoint.y):(this.fireFrom.x=this._rotatedPoint.x,this.fireFrom.y=this._rotatedPoint.y)):1<this.fireFrom.width?this.fireFrom.centerOn(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y):(this.fireFrom.x=this.trackedSprite.world.x+this.trackOffset.x,this.fireFrom.y=this.trackedSprite.world.y+this.trackOffset.y),this.bulletInheritSpriteSpeed&&(n+=this.trackedSprite.body.speed)):this.trackedPointer&&(1<this.fireFrom.width?this.fireFrom.centerOn(this.trackedPointer.world.x+this.trackOffset.x,this.trackedPointer.world.y+this.trackOffset.y):(this.fireFrom.x=this.trackedPointer.world.x+this.trackOffset.x,this.fireFrom.y=this.trackedPointer.world.y+this.trackOffset.y));var r=1<this.fireFrom.width?this.fireFrom.randomX:this.fireFrom.x,o=1<this.fireFrom.height?this.fireFrom.randomY:this.fireFrom.y,a=this.trackRotation?this.trackedSprite.angle:this.fireAngle;void 0!==t&&void 0!==i&&(a=this.game.math.radToDeg(Math.atan2(i-o,t-r))),0!==this.bulletAngleVariance&&(a+=U.Math.between(-this.bulletAngleVariance,this.bulletAngleVariance));var s=0,p=0;0===a||180===a?s=Math.cos(this.game.math.degToRad(a))*n:p=(90===a||270===a||(s=Math.cos(this.game.math.degToRad(a))*n),Math.sin(this.game.math.degToRad(a))*n);var l=null;if(this.autoExpandBulletsGroup?(l=this.bullets.getFirstExists(!1,!0,r,o,this.bulletKey,this.bulletFrame)).data.bulletManager=this:l=this.bullets.getFirstExists(!1),l){if(l.reset(r,o),l.data.fromX=r,l.data.fromY=o,l.data.killType=this.bulletKillType,l.data.killDistance=this.bulletKillDistance,l.data.rotateToVelocity=this.bulletRotateToVelocity,this.bulletKillType===U.Weapon.KILL_LIFESPAN&&(l.lifespan=this.bulletLifespan),l.angle=a+this.bulletAngleOffset,""!==this.bulletAnimation){if(null===l.animations.getAnimation(this.bulletAnimation)){var h=this.anims[this.bulletAnimation];l.animations.add(h.name,h.frames,h.frameRate,h.loop,h.useNumericIndex)}l.animations.play(this.bulletAnimation)}else this.bulletFrameCycle?(l.frame=this.bulletFrames[this.bulletFrameIndex],++this.bulletFrameIndex>=this.bulletFrames.length&&(this.bulletFrameIndex=0)):this.bulletFrameRandom&&(l.frame=this.bulletFrames[Math.floor(Math.random()*this.bulletFrames.length)]);if(l.data.bodyDirty&&(this._data.customBody&&l.body.setSize(this._data.width,this._data.height,this._data.offsetX,this._data.offsetY),l.body.collideWorldBounds=this.bulletCollideWorldBounds,l.data.bodyDirty=!1),l.body.velocity.set(s,p),l.body.gravity.set(this.bulletGravity.x,this.bulletGravity.y),0!==this.bulletSpeedVariance){var u=this.fireRate;(u+=U.Math.between(-this.fireRateVariance,this.fireRateVariance))<0&&(u=0),this._nextFire=this.game.time.now+u}else this._nextFire=this.game.time.now+this.fireRate;this.shots++,this.onFire.dispatch(l,this,n),0<this.fireLimit&&this.shots===this.fireLimit&&this.onFireLimit.dispatch(this,this.fireLimit)}return l},U.Weapon.prototype.fireAtPointer=function(e){return void 0===e&&(e=this.game.input.activePointer),this.fire(null,e.worldX,e.worldY)},U.Weapon.prototype.fireAtSprite=function(e){return this.fire(null,e.world.x,e.world.y)},U.Weapon.prototype.fireAtXY=function(e,t){return this.fire(null,e,t)},U.Weapon.prototype.setBulletBodyOffset=function(e,t,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this._data.customBody=!0,this._data.width=e,this._data.height=t,this._data.offsetX=i,this._data.offsetY=n,this.bullets.callAll("body.setSize","body",e,t,i,n),this.bullets.setAll("data.bodyDirty",!1),this},U.Weapon.prototype.setBulletFrames=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!1),this.bulletFrames=U.ArrayUtils.numberArray(e,t),this.bulletFrameIndex=0,this.bulletFrameCycle=i,this.bulletFrameRandom=n,this},U.Weapon.prototype.addBulletAnimation=function(e,t,i,n,r){return this.anims[e]={name:e,frames:t,frameRate:i,loop:n,useNumericIndex:r},this.bullets.callAll("animations.add","animations",e,t,i,n,r),this.bulletAnimation=e,this},U.Weapon.prototype.debug=function(e,t,i){void 0===e&&(e=16),void 0===t&&(t=32),void 0===i&&(i=!1),this.game.debug.text("Weapon Plugin",e,t),this.game.debug.text("Bullets Alive: "+this.bullets.total+" - Total: "+this.bullets.length,e,t+24),i&&this.bullets.forEachExists(this.game.debug.body,this.game.debug,"rgba(255, 0, 255, 0.8)")},Object.defineProperty(U.Weapon.prototype,"bulletClass",{get:function(){return this._bulletClass},set:function(e){this._bulletClass=e,this.bullets.classType=this._bulletClass}}),Object.defineProperty(U.Weapon.prototype,"bulletKillType",{get:function(){return this._bulletKillType},set:function(e){switch(e){case U.Weapon.KILL_STATIC_BOUNDS:case U.Weapon.KILL_WEAPON_BOUNDS:this.bulletBounds=this.bounds;break;case U.Weapon.KILL_CAMERA_BOUNDS:this.bulletBounds=this.game.camera.view;break;case U.Weapon.KILL_WORLD_BOUNDS:this.bulletBounds=this.game.world.bounds}this._bulletKillType=e}}),Object.defineProperty(U.Weapon.prototype,"bulletCollideWorldBounds",{get:function(){return this._bulletCollideWorldBounds},set:function(e){this._bulletCollideWorldBounds=e,this.bullets.setAll("body.collideWorldBounds",e),this.bullets.setAll("data.bodyDirty",!1)}}),Object.defineProperty(U.Weapon.prototype,"x",{get:function(){return this.fireFrom.x},set:function(e){this.fireFrom.x=e}}),Object.defineProperty(U.Weapon.prototype,"y",{get:function(){return this.fireFrom.y},set:function(e){this.fireFrom.y=e}}),U.Bullet=function(e,t,i,n,r){U.Sprite.call(this,e,t,i,n,r),this.anchor.set(.5),this.data={bulletManager:null,fromX:0,fromY:0,bodyDirty:!0,rotateToVelocity:!1,killType:0,killDistance:0}},U.Bullet.prototype=Object.create(U.Sprite.prototype),U.Bullet.prototype.constructor=U.Bullet,U.Bullet.prototype.kill=function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.data.bulletManager.onKill.dispatch(this),this},U.Bullet.prototype.update=function(){this.exists&&(this.data.killType>U.Weapon.KILL_LIFESPAN&&(this.data.killType===U.Weapon.KILL_DISTANCE?this.game.physics.arcade.distanceToXY(this,this.data.fromX,this.data.fromY,!0)>this.data.killDistance&&this.kill():this.data.bulletManager.bulletBounds.intersects(this)||this.kill()),this.data.rotateToVelocity&&(this.rotation=Math.atan2(this.body.velocity.y,this.body.velocity.x)),this.data.bulletManager.bulletWorldWrap&&this.game.world.wrap(this,this.data.bulletManager.bulletWorldWrapPadding))},U.Video=function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),this.game=e,this.key=t,this.width=0,this.height=0,this.type=U.VIDEO,this.disableTextureUpload=!1,this.touchLocked=!1,this.onPlay=new U.Signal,this.onChangeSource=new U.Signal,this.onComplete=new U.Signal,this.onAccess=new U.Signal,this.onError=new U.Signal,this.onTimeout=new U.Signal,this.timeout=15e3,this._timeOutID=null,this.video=null,this.videoStream=null,this.isStreaming=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._codeMuted=!1,this._muted=!1,this._codePaused=!1,this._paused=!1,this._pending=!1,this._autoplay=!1,this._endCallback=null,this._playCallback=null,t&&this.game.cache.checkVideoKey(t)){var n=this.game.cache.getVideo(t);n.isBlob?this.createVideoFromBlob(n.data):this.video=n.data,this.width=this.video.videoWidth,this.height=this.video.videoHeight}else i&&this.createVideoFromURL(i,!1);this.video&&!i?this.baseTexture=new PIXI.BaseTexture(this.video):this.baseTexture=new PIXI.BaseTexture(U.Cache.DEFAULT.baseTexture.source),this.baseTexture.forceLoaded(this.width,this.height),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new U.Frame(0,0,0,this.width,this.height,"video"),this.texture.setFrame(this.textureFrame),this.texture.valid=!1,null!==t&&this.video&&(this.texture.valid=this.video.canplay),this.snapshot=null,U.BitmapData&&(this.snapshot=new U.BitmapData(this.game,"",this.width,this.height)),!this.game.device.cocoonJS&&(this.game.device.iOS||this.game.device.chrome)||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock?this.setTouchLock():n&&(n.locked=!1)},U.Video.prototype={connectToMediaStream:function(e,t){return e&&t&&(this.video=e,this.videoStream=t,this.isStreaming=!0,this.baseTexture.source=this.video,this.updateTexture(null,this.video.videoWidth,this.video.videoHeight),this.onAccess.dispatch(this)),this},startMediaStream:function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=null),void 0===i&&(i=null),!this.game.device.getUserMedia)return this.onError.dispatch(this,"No getUserMedia"),!1;null!==this.videoStream&&(this.videoStream.active?this.videoStream.active=!1:this.videoStream.stop()),this.removeVideoElement(),this.video=document.createElement("video"),this.video.setAttribute("autoplay","autoplay"),null!==t&&(this.video.width=t),null!==i&&(this.video.height=i),this._timeOutID=window.setTimeout(this.getUserMediaTimeout.bind(this),this.timeout);try{navigator.getUserMedia({audio:e,video:!0},this.getUserMediaSuccess.bind(this),this.getUserMediaError.bind(this))}catch(e){this.getUserMediaError(e)}return this},getUserMediaTimeout:function(){clearTimeout(this._timeOutID),this.onTimeout.dispatch(this)},getUserMediaError:function(e){clearTimeout(this._timeOutID),this.onError.dispatch(this,e)},getUserMediaSuccess:function(e){clearTimeout(this._timeOutID),this.videoStream=e,void 0!==this.video.mozSrcObject?this.video.mozSrcObject=e:this.video.src=window.URL&&window.URL.createObjectURL(e)||e;var r=this;this.video.onloadeddata=function(){var n=10;!function e(){if(0<n)if(0<r.video.videoWidth){var t=r.video.videoWidth,i=r.video.videoHeight;isNaN(r.video.videoHeight)&&(i=t/(4/3)),r.video.play(),r.isStreaming=!0,r.baseTexture.source=r.video,r.updateTexture(null,t,i),r.onAccess.dispatch(r)}else window.setTimeout(e,500);n--}()}},createVideoFromBlob:function(e){var t=this;return this.video=document.createElement("video"),this.video.controls=!1,this.video.setAttribute("autoplay","autoplay"),this.video.addEventListener("loadeddata",function(e){t.updateTexture(e)},!0),this.video.src=window.URL.createObjectURL(e),this.video.canplay=!0,this},createVideoFromURL:function(e,t){return void 0===t&&(t=!1),this.texture&&(this.texture.valid=!1),this.video=document.createElement("video"),this.video.controls=!1,t&&this.video.setAttribute("autoplay","autoplay"),this.video.src=e,this.video.canplay=!0,this.video.load(),this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval),this.key=e,this},updateTexture:function(e,t,i){var n=!1;null!=t||(t=this.video.videoWidth,n=!0),null!=i||(i=this.video.videoHeight),this.width=t,this.height=i,this.baseTexture.source!==this.video&&(this.baseTexture.source=this.video),this.baseTexture.forceLoaded(t,i),this.texture.frame.resize(t,i),this.texture.width=t,this.texture.height=i,this.texture.valid=!0,this.snapshot&&this.snapshot.resize(t,i),n&&null!==this.key&&(this.onChangeSource.dispatch(this,t,i),this._autoplay&&(this.video.play(),this.onPlay.dispatch(this,this.loop,this.playbackRate)))},complete:function(){this.onComplete.dispatch(this)},play:function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=1),this.game.sound.onMute&&(this.game.sound.onMute.add(this.setMute,this),this.game.sound.onUnMute.add(this.unsetMute,this),this.game.sound.mute&&this.setMute()),this.game.onPause.add(this.setPause,this),this.game.onResume.add(this.setResume,this),this._endCallback=this.complete.bind(this),this.video.addEventListener("ended",this._endCallback,!0),this.video.addEventListener("webkitendfullscreen",this._endCallback,!0),this.video.loop=e?"loop":"",this.video.playbackRate=t,this.touchLocked?this._pending=!0:(this._pending=!1,null!==this.key&&(4!==this.video.readyState?(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)):(this._playCallback=this.playHandler.bind(this),this.video.addEventListener("playing",this._playCallback,!0))),this.video.play(),this.onPlay.dispatch(this,e,t)),this},playHandler:function(){this.video.removeEventListener("playing",this._playCallback,!0),this.updateTexture()},stop:function(){return this.game.sound.onMute&&(this.game.sound.onMute.remove(this.setMute,this),this.game.sound.onUnMute.remove(this.unsetMute,this)),this.game.onPause.remove(this.setPause,this),this.game.onResume.remove(this.setResume,this),this.isStreaming?(this.video.mozSrcObject?(this.video.mozSrcObject.stop(),this.video.src=null):(this.video.src="",this.videoStream.active?this.videoStream.active=!1:this.videoStream.getTracks?this.videoStream.getTracks().forEach(function(e){e.stop()}):this.videoStream.stop()),this.videoStream=null,this.isStreaming=!1):(this.video.removeEventListener("ended",this._endCallback,!0),this.video.removeEventListener("webkitendfullscreen",this._endCallback,!0),this.video.removeEventListener("playing",this._playCallback,!0),this.touchLocked?this._pending=!1:this.video.pause()),this},add:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t].loadTexture&&e[t].loadTexture(this);else e.loadTexture(this);return this},addToWorld:function(e,t,i,n,r,o){r=r||1,o=o||1;var a=this.game.add.image(e,t,this);return a.anchor.set(i,n),a.scale.set(r,o),a},render:function(){!this.disableTextureUpload&&this.playing&&this.baseTexture.dirty()},setMute:function(){this._muted||(this._muted=!0,this.video.muted=!0)},unsetMute:function(){this._muted&&!this._codeMuted&&(this._muted=!1,this.video.muted=!1)},setPause:function(){this._paused||this.touchLocked||(this._paused=!0,this.video.pause())},setResume:function(){!this._paused||this._codePaused||this.touchLocked||(this._paused=!1,this.video.ended||this.video.play())},changeSource:function(e,t){return void 0===t&&(t=!0),this.texture.valid=!1,this.video.pause(),this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval),this.video.src=e,this.video.load(),(this._autoplay=t)||(this.paused=!0),this},checkVideoProgress:function(){4===this.video.readyState?this.updateTexture():(this.retry--,0<this.retry&&(this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)))},setTouchLock:function(){this.game.input.touch.addTouchLockCallback(this.unlock,this),this.touchLocked=!0},unlock:function(){if(this.touchLocked=!1,this.video.play(),this.onPlay.dispatch(this,this.loop,this.playbackRate),this.key){var e=this.game.cache.getVideo(this.key);e&&!e.isBlob&&(e.locked=!1)}return!0},grab:function(e,t,i){return void 0===e&&(e=!1),void 0===t&&(t=1),void 0===i&&(i=null),null===this.snapshot?void 0:(e&&this.snapshot.cls(),this.snapshot.copy(this.video,0,0,this.width,this.height,0,0,this.width,this.height,0,0,0,1,1,t,i),this.snapshot)},removeVideoElement:function(){if(this.video){for(this.video.parentNode&&this.video.parentNode.removeChild(this.video);this.video.hasChildNodes();)this.video.removeChild(this.video.firstChild);this.video.removeAttribute("autoplay"),this.video.removeAttribute("src"),this.video=null}},destroy:function(){this.stop(),this.removeVideoElement(),this.touchLocked&&this.game.input.touch.removeTouchLockCallback(this.unlock,this),this._retryID&&window.clearTimeout(this._retryID)}},Object.defineProperty(U.Video.prototype,"currentTime",{get:function(){return this.video?this.video.currentTime:0},set:function(e){this.video.currentTime=e}}),Object.defineProperty(U.Video.prototype,"duration",{get:function(){return this.video?this.video.duration:0}}),Object.defineProperty(U.Video.prototype,"progress",{get:function(){return this.video?this.video.currentTime/this.video.duration:0}}),Object.defineProperty(U.Video.prototype,"mute",{get:function(){return this._muted},set:function(e){if(e=e||null){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(U.Video.prototype,"paused",{get:function(){return this._paused},set:function(e){if(e=e||null,!this.touchLocked)if(e){if(this._paused)return;this._codePaused=!0,this.setPause()}else{if(!this._paused)return;this._codePaused=!1,this.setResume()}}}),Object.defineProperty(U.Video.prototype,"volume",{get:function(){return this.video?this.video.volume:1},set:function(e){e<0?e=0:1<e&&(e=1),this.video&&(this.video.volume=e)}}),Object.defineProperty(U.Video.prototype,"playbackRate",{get:function(){return this.video?this.video.playbackRate:1},set:function(e){this.video&&(this.video.playbackRate=e)}}),Object.defineProperty(U.Video.prototype,"loop",{get:function(){return!!this.video&&this.video.loop},set:function(e){e&&this.video?this.video.loop="loop":this.video&&(this.video.loop="")}}),Object.defineProperty(U.Video.prototype,"playing",{get:function(){return!(this.video.paused&&this.video.ended)}}),U.Video.prototype.constructor=U.Video,void 0===PIXI.blendModes&&(PIXI.blendModes=U.blendModes),void 0===PIXI.scaleModes&&(PIXI.scaleModes=U.scaleModes),void 0===PIXI.Texture.emptyTexture&&(PIXI.Texture.emptyTexture=new PIXI.Texture(new PIXI.BaseTexture)),void 0===PIXI.DisplayObject._tempMatrix&&(PIXI.DisplayObject._tempMatrix=new PIXI.Matrix),void 0===PIXI.RenderTexture.tempMatrix&&(PIXI.RenderTexture.tempMatrix=new PIXI.Matrix),PIXI.Graphics&&void 0===PIXI.Graphics.POLY&&(PIXI.Graphics.POLY=U.POLYGON,PIXI.Graphics.RECT=U.RECTANGLE,PIXI.Graphics.CIRC=U.CIRCLE,PIXI.Graphics.ELIP=U.ELLIPSE,PIXI.Graphics.RREC=U.ROUNDEDRECTANGLE),PIXI.TextureSilentFail=!0,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=U),exports.Phaser=U):"undefined"!=typeof define&&define.amd?define("Phaser",e.Phaser=U):e.Phaser=U,U}.call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).h5branding=e.h5branding||{})}(this,function(o){"use strict";var r,F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function e(e,t){return e(t={exports:{}},t.exports),t.exports}e(function(e,t){e.exports=function(){function p(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,t=void 0,r=void 0,s=function(e,t){d[n]=e,d[n+1]=t,2===(n+=2)&&(r?r(c):f())},e="undefined"!=typeof window?window:void 0,o=e||{},a=o.MutationObserver||o.WebKitMutationObserver,l="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){var e=setTimeout;return function(){return e(c,1)}}var d=new Array(1e3);function c(){for(var e=0;e<n;e+=2){var t=d[e],i=d[e+1];t(i),d[e]=void 0,d[e+1]=void 0}n=0}var _,y,x,m,f=void 0;function v(e,t){var i=this,n=new this.constructor(b);void 0===n[z]&&L(n);var r=i._state;if(r){var o=arguments[r-1];s(function(){return I(r,n,o,i._result)})}else A(i,n,e,t);return n}function g(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(b);return k(t,e),t}f=l?function(){return process.nextTick(c)}:a?(y=0,x=new a(c),m=document.createTextNode(""),x.observe(m,{characterData:!0}),function(){m.data=y=++y%2}):h?((_=new MessageChannel).port1.onmessage=c,function(){return _.port2.postMessage(0)}):void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0===(t=e.runOnLoop||e.runOnContext)?u():function(){t(c)}}catch(e){return u()}}():u();var z=Math.random().toString(36).substring(2);function b(){}var w=void 0,S=1,C=2;function M(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}function P(e,t,i){var n,r,o,a;t.constructor===e.constructor&&i===v&&t.constructor.resolve===g?(o=e,(a=t)._state===S?G(o,a._result):a._state===C?O(o,a._result):A(a,void 0,function(e){return k(o,e)},function(e){return O(o,e)})):void 0===i?G(e,t):p(i)?(n=t,r=i,s(function(t){var i=!1,e=M(r,n,function(e){i||(i=!0,n!==e?k(t,e):G(t,e))},function(e){i||(i=!0,O(t,e))},t._label);!i&&e&&(i=!0,O(t,e))},e)):G(e,t)}function k(t,e){if(t===e)O(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(n=e),null===n||"object"!==r&&"function"!==r)G(t,e);else{var i=void 0;try{i=e.then}catch(e){return void O(t,e)}P(t,e,i)}var n,r}function T(e){e._onerror&&e._onerror(e._result),E(e)}function G(e,t){e._state===w&&(e._result=t,e._state=S,0!==e._subscribers.length&&s(E,e))}function O(e,t){e._state===w&&(e._state=C,e._result=t,s(T,e))}function A(e,t,i,n){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+S]=i,r[o+C]=n,0===o&&e._state&&s(E,e)}function E(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],r=t[a+i],n?I(i,n,r,o):r(o);e._subscribers.length=0}}function I(e,t,i,n){var r=p(i),o=void 0,a=void 0,s=!0;if(r){try{o=i(n)}catch(e){s=!1,a=e}if(t===o)return void O(t,new TypeError("A promises callback cannot return that same promise."))}else o=n;t._state!==w||(r&&s?k(t,o):!1===s?O(t,a):e===S?G(t,o):e===C&&O(t,o))}var B=0;function L(e){e[z]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}var D=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[z]||L(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?G(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&G(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===w&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===g){var r=void 0,o=void 0,a=!1;try{r=t.then}catch(e){a=!0,o=e}if(r===v&&t._state!==w)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===R){var s=new i(b);a?O(s,o):P(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},e.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===w&&(this._remaining--,e===C?O(n,i):this._result[t]=i),0===this._remaining&&G(n,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;A(e,void 0,function(e){return i._settledAt(S,t,e)},function(e){return i._settledAt(C,t,e)})},e}(),R=function(){function t(e){this[z]=B++,this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){k(t,e)},function(e){O(t,e)})}catch(e){O(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var i=this.constructor;return p(t)?this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return R.prototype.then=v,R.all=function(e){return new D(this,e).promise},R.race=function(r){var o=this;return i(r)?new o(function(e,t){for(var i=r.length,n=0;n<i;n++)o.resolve(r[n]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},R.resolve=g,R.reject=function(e){var t=new this(b);return O(t,e),t},R._setScheduler=function(e){r=e},R._setAsap=function(e){s=e},R._asap=s,R.polyfill=function(){var e=void 0;if(void 0!==F)e=F;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=R},R.Promise=R}()}).polyfill();var t,n=function(){function e(){}return e.has=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i<=0||t-1<=i)return!1;var n=r[e.slice(t+1)];return!!n&&0<=n.indexOf(" "+e.slice(i+1,t)+" ")},e.is=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(0<=e.lastIndexOf(".",t-1))return!1;var i=r[e.slice(t+1)];return!!i&&0<=i.indexOf(" "+e.slice(0,t)+" ")},e.get=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(i<=0||t-1<=i)return null;var n=r[e.slice(t+1)];return n?n.indexOf(" "+e.slice(i+1,t)+" ")<0?null:e.slice(i+1):null},e}(),a=function(){function e(){}return e.setList=function(e){r=e||{}},e.getDomain=function(e){if(!r)return null;var t=e.match(/\./g);if(t&&t.length<2)return e;var i=this.getTld(e);if(!i)return null;var n=e.length-i.length-1;return n=e.lastIndexOf(".",n-1)+1,e.substring(n)||""},e.getTld=function(e){if(!r)return"";var t=e.lastIndexOf("."),i=e.substring(t+1);return r[i.toLowerCase()]&&n.get(e)||i},e.KEY="Domains",e}(),s=function(){function e(){this.cache={}}return Object.defineProperty(e,"instance",{get:function(){return void 0===e.classInstance&&(e.classInstance=new e),e.classInstance},enumerable:!1,configurable:!0}),e.prototype.load=function(t,e,i){var n=this;return this.contains(t)?Promise.reject("Already in cache."):(this.cache[t]={url:e,data:null},this.requestXhr(e,i).then(function(e){return n.loadComplete(t,e)}).catch(function(e){return n.remove(t),Promise.reject(e)}))},e.prototype.loadComplete=function(e,t){if(!this.contains(e))return Promise.reject("Item was removed from cache before loading was complete.");try{var i=JSON.parse(t);return this.cache[e].data=i,Promise.resolve(i)}catch(e){return Promise.reject("There was an error parsing JSON file.")}},e.prototype.remove=function(e){this.contains(e)&&delete this.cache[e]},e.prototype.get=function(e){return this.contains(e)?this.cache[e].data:null},e.prototype.contains=function(e){return this.cache.hasOwnProperty(e)},e.prototype.isLoading=function(e){return this.contains(e)&&null===this.cache[e].data},e.prototype.isLoaded=function(e){return this.contains(e)&&null!==this.cache[e].data},e.prototype.loadScript=function(n,e,r){return new Promise(function(e,t){var i=document.createElement("script");i.src=n,i.async=!1,i.onload=function(){"function"==typeof r&&r(),e()},document.head.appendChild(i)})},e.prototype.requestXhr=function(i,n){var r;return void 0===n&&(n="application/json"),window.XMLHttpRequest?(r=new XMLHttpRequest,new Promise(function(e,t){r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(e(r.responseText),r.onreadystatechange=null):0<r.status&&(t("There was a problem with the request: status "+r.status),r.onreadystatechange=null))};try{r.open("GET",i,!0),r.setRequestHeader("Content-Type",n),r.send()}catch(e){t("Error: Unable to send request, CORS not allowed.")}})):Promise.reject("Unable to send request, XMLHttpRequest not supported.")},e}();function i(o,a,s,p){return new(s||(s=Promise))(function(e,t){function i(e){try{r(p.next(e))}catch(e){t(e)}}function n(e){try{r(p.throw(e))}catch(e){t(e)}}function r(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,n)}r((p=p.apply(o,a||[])).next())})}function h(i,n){var r,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(i,s)}catch(e){t=[6,e],o=0}finally{r=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}o.BrandingDomain=void 0,(t=o.BrandingDomain||(o.BrandingDomain={}))[t.Neutral=0]="Neutral",t[t.Yepi=1]="Yepi",t[t.Spele=2]="Spele",t[t.Funnygames=3]="Funnygames",t[t.Kizi=4]="Kizi",t[t.PlayCell=5]="PlayCell",t[t.GameCell=6]="GameCell",t[t.Bild=7]="Bild",t[t.AGame=8]="AGame",t[t.Admeen=9]="Admeen",t[t.PlayTime=10]="PlayTime",t[t.Zigiz=11]="Zigiz";var p,l=function(){function e(){}return e.isBip=function(){return-1!==window.location.search.indexOf("bipgaming")||"bip.fbrq.io"===window.location.host},e.isPlaycellApp=function(){return-1!==window.location.search.indexOf("playcellApp")},e.isAGame=function(){return-1!==window.location.search.indexOf("agame")},e.isAirfi=function(){return!!window.hasOwnProperty("airfi")&&window.airfi},e.isPlaytime=function(){return-1!==window.location.host.indexOf("playtime.nl")},e.isBild=function(){return"bild.fbrq.io"===window.location.host||-1!==window.location.host.indexOf("contentfleet.com")},e.isYandex=function(){return window.hasOwnProperty("_YaSDK")||window.hasOwnProperty("YaGames")},e.getYandexBaseURL=function(){var e,t;if((null===(t=null===(e=window.YandexGamesSDKEnvironment)||void 0===e?void 0:e.browser)||void 0===t?void 0:t.lang)&&"en"===window.YandexGamesSDKEnvironment.browser.lang)return"yandex.com";return"yandex.ru"},e}();o.UtmTargets=void 0,(p=o.UtmTargets||(o.UtmTargets={}))[p.splashscreen=0]="splashscreen",p[p.logo=1]="logo",p[p.facebook=2]="facebook",p[p.twitter=3]="twitter",p[p.playstore=4]="playstore",p[p.appstore=5]="appstore",p[p.more_games=6]="more_games",p[p.download_game=7]="download_game",p[p.walkthrough=8]="walkthrough",p[p.disclaimer=9]="disclaimer",p[p.highscores=10]="highscores";var d=function(){function e(){}return e.getProtocol=function(e){return e?"https://":"//"},e.getUtmContent=function(e){return"string"==typeof e?e:o.UtmTargets[e]},e.getDomainURL=function(e,t){var i;switch(e){case o.BrandingDomain.Spele:i=t+"www.spele.nl";break;case o.BrandingDomain.Yepi:i=t+"www.yepi.com";break;case o.BrandingDomain.Admeen:i="https://media.admeen.com/branding/link.php";break;case o.BrandingDomain.PlayCell:i=t+"www.playcell.com";break;case o.BrandingDomain.GameCell:i=t+"www.gamecell.com";break;case o.BrandingDomain.Kizi:i=t+"www.kizi.com";break;case o.BrandingDomain.Bild:i=t+"www.bildspielt.de";break;case o.BrandingDomain.Funnygames:i=t+"www.funnygames.nu";break;case o.BrandingDomain.PlayTime:i=t+"playtime.nl";break;default:case o.BrandingDomain.AGame:i=t+"www.agame.com";break;case o.BrandingDomain.Zigiz:i=t+"m.zigiz.com"}return i},e.getPromoURL=function(e,t,i,n,r){return window.hasOwnProperty("_YaSDK")||window.hasOwnProperty("YaGames")?"https://"+l.getYandexBaseURL()+"/games/search?query=z_publisher%3Aorange%20games":e===o.BrandingDomain.Admeen?"https://media.admeen.com/branding/link.php":e===o.BrandingDomain.Bild?t:t+"/?utm_source="+i+"&utm_medium=html5&utm_term="+n+"&utm_content="+r+"&utm_campaign=Gamedistribution"},e}();function c(e,t,i){var n=document.createElement("script");n.setAttribute("src",e+"?v="+t),"function"==typeof i&&(n.onload=i),document.body.appendChild(n)}var _=function(){function e(){}return e.loadPortalScript=function(e){e&&e.hasOwnProperty("minijuegos")&&-1!==e.minijuegos.indexOf(x.getSourceSite())&&(void 0!==window.mpConfig?window.mpConfig.partner="orange-games":window.mpConfig={partner:"orange-games"},c("https://ext.minijuegosgratis.com/external-host/main.js",Date.now()/1e3)),e&&e.hasOwnProperty("kongregate")&&-1!==e.kongregate.indexOf(x.getSourceSite())&&c("https://cdn1.kongregate.com/javascripts/kongregate_api.js",Date.now()/1e3,function(){"undefined"!=typeof kongregateAPI&&kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI()})}),e&&e.hasOwnProperty("newgrounds")&&-1!==e.newgrounds.indexOf(x.getSourceSite())&&c("https://cdn.fbrq.io/@azerion/splash/assets/scripts/newgroundsio.min.js",Date.now()/1e3)},e}(),y=function(){function r(){}return r.preload=function(e){return false;var t=Promise.all([s.instance.load(a.KEY,x.ASSET_LOCATION+"json/domains.json?v="+e,"text/plain"),s.instance.load(r.SITELOCK_PORTALS,x.ASSET_LOCATION+"json/sitelock.json?v="+e,"text/plain")]);return Promise.all([s.instance.load(r.INTERNAL_PORTALS_KEY,x.ASSET_LOCATION+"json/internal.json?v="+e,"text/plain"),s.instance.load(r.CONTRACTED_PORTALS_KEY,x.ASSET_LOCATION+"json/contracted.json?v="+e,"text/plain"),s.instance.load(r.SPECIAL_PORTALS_KEY,x.ASSET_LOCATION+"json/special.json?v="+e,"text/plain")]),t.then(function(e){var t=e[0],i=e[1];a.setList(t),_.loadPortalScript(i),r.setSiteLock(i)}).catch(function(){})},r.setSiteLock=function(e){r.siteLocks=e},Object.defineProperty(r,"brandingLogoUrl",{get:function(){return "patch/images/games235-banner.png";var e;switch(x.isOnDevice()||l.isAirfi()?x.ASSET_LOCATION="assets/":"fbrq.io"===x.getSourceSite(!0)&&(x.ASSET_LOCATION="https://"+window.location.host+"/@azerion/splash/assets/"),x.getBrandingDomain()){case o.BrandingDomain.Spele:e="spele";break;case o.BrandingDomain.PlayCell:e="playcell";break;case o.BrandingDomain.GameCell:e="gamecell";break;case o.BrandingDomain.Yepi:e="yepi";break;case o.BrandingDomain.Admeen:e="admeen";break;case o.BrandingDomain.Bild:e="bild";break;case o.BrandingDomain.Kizi:e="kizi";break;case o.BrandingDomain.Funnygames:e="funnygames";break;case o.BrandingDomain.PlayTime:e="playtime";break;default:case o.BrandingDomain.AGame:e="agame";break;case o.BrandingDomain.Zigiz:e="zigiz"}return x.ASSET_LOCATION+"images/branding_logo_"+e+"_small.png"},enumerable:!1,configurable:!0}),Object.defineProperty(r,"brandingBackgroundColor",{get:function(){var e;switch(x.getBrandingDomain()){case o.BrandingDomain.Spele:e="#4a72ad";break;case o.BrandingDomain.PlayCell:e="#52a1e1";break;case o.BrandingDomain.GameCell:e="#c600b2";break;case o.BrandingDomain.Yepi:e="#0573a7";break;case o.BrandingDomain.AGame:e="#0C486C";break;case o.BrandingDomain.Admeen:e="#4267B2";break;case o.BrandingDomain.Bild:e="#de0000";break;default:case o.BrandingDomain.Kizi:e="#012f50";break;case o.BrandingDomain.Funnygames:e="#33b0ff";break;case o.BrandingDomain.PlayTime:case o.BrandingDomain.Zigiz:e="#023a63"}return e},enumerable:!1,configurable:!0}),r.blockedDomain=function(){return x.isOnDevice()||r.isSpecial()},r.createCampaignURL=function(e,t){var i=x.getSourceSite(),n=x.getBrandingDomain(),r=d.getProtocol(x.isOnDevice()),o=d.getDomainURL(n,r),a=d.getUtmContent(t);return d.getPromoURL(n,o,i,e,a)},r.openCampaignLink=function(e,t){var i,n=r.createCampaignURL(e,t);r.blockedDomain()||(i=window.op3n(n))&&i.focus&&i.focus()},r.isInternal=function(){return r.hostMatchesList(s.instance.get(r.INTERNAL_PORTALS_KEY))},r.isContracted=function(){return r.hostMatchesList(s.instance.get(r.CONTRACTED_PORTALS_KEY))},r.isSpecial=function(){return r.hostMatchesList(s.instance.get(r.SPECIAL_PORTALS_KEY))},r.isAdmeen=function(){if(!r.siteLocks||!r.siteLocks.hasOwnProperty("admeen"))return!1;var e=r.siteLocks.admeen;return r.hostMatchesList(e)},r.isKongregate=function(){if(!r.siteLocks||!r.siteLocks.hasOwnProperty("kongregate"))return!1;var e=r.siteLocks.kongregate;return r.hostMatchesList(e)},r.isNewgrounds=function(){if(!r.siteLocks||!r.siteLocks.hasOwnProperty("newgrounds"))return!1;var e=r.siteLocks.newgrounds;return r.hostMatchesList(e)},r.crossPromoAllowed=function(){var e=r.siteLocks.yandex;return r.hostMatchesList(e)},r.outGoingLinksAllowed=function(){return!(l.isAirfi()||r.isSpecial()||r.isContracted())&&(!window.hasOwnProperty("fbrqLA")||window.fbrqLA)},r.hostMatchesList=function(e){e=e||[];for(var t=x.getSourceSite(),i=0;i<e.length;i++)if(t===e[i])return!0;return!1},r.LOGO_KEY="branding_logo",r.INTERNAL_PORTALS_KEY="branding_portals",r.CONTRACTED_PORTALS_KEY="branding_contracted",r.SPECIAL_PORTALS_KEY="branding_special",r.SITELOCK_PORTALS="sitelock_portals",r.DOMAIN_OVERWRITE=null,r.analyticsEnabled=!0,r}(),x=function(){function n(){}return n.loadHost=function(){return i(this,void 0,void 0,function(){var t,i;return h(this,function(e){switch(e.label){case 0:if(t=document.referrer||window.location.host,!window.hasOwnProperty("gdsdk"))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,window.gdsdk.getSession()];case 2:return i=e.sent(),t=i.location.parentDomain,[3,4];case 3:return e.sent(),[3,4];case 4:return n.HOST=t,[2]}})})},n.getSourceSite=function(e){void 0===e&&(e=!1);var t=n.HOST;if(e&&(t=window.location.host),-1!==t.indexOf("embed.gamedistribution.com")&&-1!==window.location.search.indexOf("gd_sdk_referrer_url")&&(t=n.getUrlParameter("gd_sdk_referrer_url")||t),t=decodeURIComponent(t),l.isBild())return"bildspielt.de";if(l.isBip())return"bipgaming.com";t=(t=-1<t.indexOf("://")?t.split("/")[2]:t.split("/")[0]).split(":")[0];var i=a.getDomain(t);return null!==i?i:(3===t.split(".").length&&(t=t.substr(t.indexOf(".")+1)),t)},n.getBrandingDomain=function(){if(window.hasOwnProperty("fbrqBD")&&window.fbrqBD in o.BrandingDomain)return window.fbrqBD;if(y.DOMAIN_OVERWRITE)return y.DOMAIN_OVERWRITE;var e=n.getSourceSite();if(y.isAdmeen())return o.BrandingDomain.Admeen;if(l.isPlaycellApp()||l.isBip())return o.BrandingDomain.PlayCell;switch(e){case"spele.nl":return o.BrandingDomain.Spele;case"yepi.com":return o.BrandingDomain.Yepi;case"oyunskor.com":case"barbioyunu.com.tr":case"bebekoyunu.com.tr":case"oyunkolu.com":case"oyungemisi.com":case"oyunlar1.com":case"oyunkuzusu.com":case"kraloyun.com":case"rekoroyun.com":case"oyundedem.com":case"oyunoyna.com":case"pastaoyunu.com.tr":case"playcell.com":return o.BrandingDomain.PlayCell;case"gamecell.com":return o.BrandingDomain.GameCell;case"playxl.com":return o.BrandingDomain.Admeen;case"kizi.com":return o.BrandingDomain.Kizi;case"bildspielt.de":return o.BrandingDomain.Bild;case"funnygames.nl":return o.BrandingDomain.Funnygames;case"playtime.nl":return o.BrandingDomain.PlayTime;default:case"agame.com":return o.BrandingDomain.AGame;case"gmbl.nl":case"zigiz.com":return o.BrandingDomain.Zigiz;case"coolmathgames.com":return o.BrandingDomain.Neutral}},n.getReferrer=function(e){return-1!==e.indexOf("?ref=")?e.substr(e.indexOf("?ref=")+5):e},n.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},n.inGDGameZone=function(){return-1!==document.referrer.indexOf("html5.gamedistribution.com")},n.getDomain=function(e){var t=document.createElement("a");return t.href=e,t.origin},n.isOnDevice=function(){return void 0!==window.cordova&&!/(gamedistribution\.com)/.test(window.location.hostname)},n.isTc=function(){return/(teamcity\.azerdev\.com)/.test(window.location.host)},n.getRandomRange=function(e,t){return Math.random()*(t-e)+e|0},n.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},n.intTimeToString=function(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=e%60;return(t<10?"0"+t:t.toString())+":"+(i<10?"0"+i:i.toString())+":"+(n<10?"0"+n:n.toString())},n.LANGUAGE="en",n.HOST=document.referrer||window.location.host,n.ASSET_LOCATION=window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/":"https://cdn.fbrq.io/@azerion/splash/assets/",n}(),m=e(function(e,t){e.exports=function o(a,s,p){function l(i,e){if(!s[i]){if(!a[i]){var t=u;if(!e&&t)return t(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=s[i]={exports:{}};a[i][0].call(r.exports,function(e){var t=a[i][1][e];return l(t||e)},r,r.exports,o,a,s,p)}return s[i].exports}for(var h=u,e=0;e<p.length;e++)l(p[e]);return l}({1:[function(e,n,g){(function(){var x,t=this||Function("return this")(),m=function(){var u,i,d,c,_,y,e=Date.now?Date.now:function(){return+new Date},x="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:e;function r(){}function o(e,t){var i;for(i in e)Object.hasOwnProperty.call(e,i)&&t(i)}function a(t,i){return o(i,function(e){t[e]=i[e]}),t}function s(t,i){o(i,function(e){void 0===t[e]&&(t[e]=i[e])})}function m(e,t,i,n,r,o,a){var s,p,l,h=e<o?0:(e-o)/r;for(s in t)t.hasOwnProperty(s)&&(p=a[s],l="function"==typeof p?p:u[p],t[s]=f(i[s],n[s],l,h));return t}function f(e,t,i,n){return e+(t-e)*i(n)}function v(t,i){var n=h.prototype.filter,r=t._filterArgs;o(n,function(e){void 0!==n[e][i]&&n[e][i].apply(t,r)})}function p(e,t,i,n,r,o,a,s,p,l,h){d=t+i+n,c=Math.min(h||x(),d),_=d<=c,y=n-(d-c),e.isPlaying()&&(_?(p(a,e._attachment,y),e.stop(!0)):(e._scheduleId=l(e._timeoutHandler,1e3/60),v(e,"beforeTween"),c<t+i?m(1,r,o,a,1,1,s):m(c,r,o,a,n,t+i,s),v(e,"afterTween"),p(r,e._attachment,y)))}function l(e,t){var i={},n=typeof t;return o(e,"string"===n||"function"===n?function(e){i[e]=t}:function(e){i[e]||(i[e]=t[e]||"linear")}),i}function h(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=i,void 0!==t&&this.setConfig(t)}return i="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout,h.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=x(),this._start(this.get(),this._attachment),this.resume())},h.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||r,this._step=e.step||r,this._finish=e.finish||r,this._duration=e.duration||500,this._currentState=a({},e.from||this.get()),this._originalState=this.get(),this._targetState=a({},e.to||this.get());var t=this;this._timeoutHandler=function(){p(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var i=this._currentState,n=this._targetState;return s(n,i),this._easing=l(i,e.easing||"linear"),this._filterArgs=[i,this._originalState,n,this._easing],v(this,"tweenCreated"),this},h.prototype.get=function(){return a({},this._currentState)},h.prototype.set=function(e){this._currentState=e},h.prototype.pause=function(){return this._pausedAtTime=x(),this._isPaused=!0,this},h.prototype.resume=function(){return this._isPaused&&(this._timestamp+=x()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},h.prototype.seek=function(e){e=Math.max(e,0);var t=x();return this._timestamp+e===0||(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,p(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause())),this},h.prototype.stop=function(e){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=r,(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout)(this._scheduleId),e&&(v(this,"beforeTween"),m(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),v(this,"afterTween"),v(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},h.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},h.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},h.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},h.prototype.filter={},u=h.prototype.formula={linear:function(e){return e}},a(h,{now:x,each:o,tweenProps:m,tweenProp:f,applyFilter:v,shallowCopy:a,defaults:s,composeEasingObject:l}),"function"==typeof SHIFTY_DEBUG_NOW&&(t.timeoutHandler=p),"object"==typeof g?n.exports=h:void 0===t.Tweenable&&(t.Tweenable=h),h}();m.shallowCopy(m.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){return e*e*(2.70158*e-1.70158)},swingTo:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}}),function(){function h(e,t,i,n,r,o){var a,l=0,h=0,u=0,s=0,p=0,d=0;function c(e){return((l*e+h)*e+u)*e}function _(e){return 0<=e?e:0-e}function y(e,t){var i,n,r,o,a,s,p;for(r=e,s=0;s<8;s++){if(_(o=c(r)-e)<t)return r;if(_(a=(3*l*(p=r)+2*h)*p+u)<1e-6)break;r-=o/a}if(n=1,(r=e)<(i=0))return i;if(n<r)return n;for(;i<n;){if(_((o=c(r))-e)<t)return r;o<e?i=r:n=r,r=.5*(n-i)+i}return r}return l=1-(u=3*t)-(h=3*(n-t)-u),s=1-(d=3*i)-(p=3*(r-i)-d),a=y(e,1/(200*o)),((s*a+p)*a+d)*a}m.setBezierFunction=function(e,t,i,n,r){var o,a,s,p,l=(o=t,a=i,s=n,p=r,function(e){return h(e,o,a,s,p,1)});return l.displayName=e,l.x1=t,l.y1=i,l.x2=n,l.y2=r,m.prototype.formula[e]=l},m.unsetBezierFunction=function(e){delete m.prototype.formula[e]}}(),(x=new m)._filterArgs=[],m.interpolate=function(e,t,i,n,r){var o=m.shallowCopy({},e),a=r||0,s=m.composeEasingObject(e,n||"linear");x.set({});var p=x._filterArgs;p.length=0,p[0]=o,p[1]=e,p[2]=t,p[3]=s,m.applyFilter(x,"tweenCreated"),m.applyFilter(x,"beforeTween");var l,h,u,d,c,_,y=(l=e,h=o,u=t,d=i,c=s,_=a,m.tweenProps(d,h,l,u,1,_,c));return m.applyFilter(x,"afterTween"),y},function(s){var p=/(\d|\-|\.)/,l=/([^\-0-9\.]+)/g,o=/[0-9.\-]+/g,a=new RegExp("rgb\\("+o.source+/,\s*/.source+o.source+/,\s*/.source+o.source+"\\)","g"),h=/^.*\(/,n=/#([0-9]|[a-f]){3,6}/gi,u="VAL";function r(i){s.each(i,function(e){var t=i[e];"string"==typeof t&&t.match(n)&&(i[e]=y(n,t,d))})}function d(e){var t,i=(3===(t=(t=e).replace(/#/,"")).length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),c[0]=_(t.substr(0,2)),c[1]=_(t.substr(2,2)),c[2]=_(t.substr(4,2)),c);return"rgb("+i[0]+","+i[1]+","+i[2]+")"}var c=[];function _(e){return parseInt(e,16)}function y(e,t,i){var n=t.match(e),r=t.replace(e,u);if(n)for(var o,a=n.length,s=0;s<a;s++)o=n.shift(),r=r.replace(u,i(o));return r}function x(e){for(var t=e.match(o),i=t.length,n=e.match(h)[0],r=0;r<i;r++)n+=parseInt(t[r],10)+",";return n=n.slice(0,-1)+")"}function m(o){var a={};return s.each(o,function(e){var t,i,n=o[e];if("string"==typeof n){var r=z(n);a[e]={formatString:(t=n,i=t.match(l),i?(1===i.length||t.charAt(0).match(p))&&i.unshift(""):i=["",""],i.join(u)),chunkNames:function(e,t){var i,n=[],r=e.length;for(i=0;i<r;i++)n.push("_"+t+"_"+i);return n}(r,e)}}}),a}function f(o,a){s.each(a,function(e){for(var t=o[e],i=z(t),n=i.length,r=0;r<n;r++)o[a[e].chunkNames[r]]=+i[r];delete o[e]})}function v(r,o){s.each(o,function(e){var t=r[e],i=function(e,t){for(var i,n={},r=t.length,o=0;o<r;o++)i=t[o],n[i]=e[i],delete e[i];return n}(r,o[e].chunkNames),n=function(e,t){g.length=0;for(var i=t.length,n=0;n<i;n++)g.push(e[t[n]]);return g}(i,o[e].chunkNames);t=function(e,t){for(var i=e,n=t.length,r=0;r<n;r++)i=i.replace(u,+t[r].toFixed(4));return i}(o[e].formatString,n),r[e]=y(a,t,x)})}var g=[];function z(e){return e.match(o)}s.prototype.filter.token={tweenCreated:function(e,t,i,n){r(e),r(t),r(i),this._tokenData=m(e)},beforeTween:function(e,t,i,n){var p,l;p=n,l=this._tokenData,s.each(l,function(e){var t,i=l[e],n=i.chunkNames,r=n.length,o=p[e];if("string"==typeof o){var a=o.split(" "),s=a[a.length-1];for(t=0;t<r;t++)p[n[t]]=a[t]||s}else for(t=0;t<r;t++)p[n[t]]=o;delete p[e]}),f(e,this._tokenData),f(t,this._tokenData),f(i,this._tokenData)},afterTween:function(e,t,i,n){var p,l;v(e,this._tokenData),v(t,this._tokenData),v(i,this._tokenData),p=n,l=this._tokenData,s.each(l,function(e){var t=l[e],i=t.chunkNames,n=i.length,r=p[i[0]],o=typeof r;if("string"===o){for(var a="",s=0;s<n;s++)a+=" "+p[i[s]],delete p[i[s]];p[e]=a.substr(1)}else p[e]=r})}}}(m)}).call(null)},{}],2:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._pathString=function(e){var t=e.strokeWidth;e.trailWidth&&e.trailWidth>e.strokeWidth&&(t=e.trailWidth);var i=50-t/2;return r.render(this._pathTemplate,{radius:i,"2radius":2*i})},o.prototype._trailString=function(e){return this._pathString(e)},t.exports=o},{"./shape":7,"./utils":9}],3:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},o.prototype._pathString=function(e){return r.render(this._pathTemplate,{center:e.strokeWidth/2})},o.prototype._trailString=function(e){return this._pathString(e)},t.exports=o},{"./shape":7,"./utils":9}],4:[function(e,t,i){t.exports={Line:e("./line"),Circle:e("./circle"),SemiCircle:e("./semicircle"),Square:e("./square"),Path:e("./path"),Shape:e("./shape"),utils:e("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./square":8,"./utils":9}],5:[function(e,t,i){var h=e("shifty"),u=e("./utils"),n={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},r=function e(t,i){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");var n;i=u.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},i),n=u.isString(t)?document.querySelector(t):t,this.path=n,this._opts=i,this._tweenable=null;var r=this.path.getTotalLength();this.path.style.strokeDasharray=r+" "+r,this.set(0)};r.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength(),i=1-e/t;return parseFloat(i.toFixed(6),10)},r.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t=this._opts.step;if(u.isFunction(t)){var i=this._easing(this._opts.easing),n=this._calculateTo(e,i),r=this._opts.shape||this;t(n,r,this._opts.attachment)}},r.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},r.prototype.animate=function(e,i,t){i=i||{},u.isFunction(i)&&(t=i,i={});var n=u.extend({},i),r=u.extend({},this._opts);i=u.extend(r,i);var o=this._easing(i.easing),a=this._resolveFromAndTo(e,o,n);this.stop(),this.path.getBoundingClientRect();var s=this._getComputedDashOffset(),p=this._progressToOffset(e),l=this;this._tweenable=new h,this._tweenable.tween({from:u.extend({offset:s},a.from),to:u.extend({offset:p},a.to),duration:i.duration,easing:o,step:function(e){l.path.style.strokeDashoffset=e.offset;var t=i.shape||l;i.step(e,t,i.attachment)},finish:function(e){u.isFunction(t)&&t()}})},r.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},r.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},r.prototype._resolveFromAndTo=function(e,t,i){return i.from&&i.to?{from:i.from,to:i.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},r.prototype._calculateFrom=function(e){return h.interpolate(this._opts.from,this._opts.to,this.value(),e)},r.prototype._calculateTo=function(e,t){return h.interpolate(this._opts.from,this._opts.to,e,t)},r.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},r.prototype._easing=function(e){return n.hasOwnProperty(e)?n[e]:e},t.exports=r},{"./utils":9,shifty:1}],6:[function(e,t,i){var n=e("./shape"),r=e("./circle"),o=e("./utils"),a=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,n.apply(this,arguments)};((a.prototype=new n).constructor=a).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},a.prototype._initializeTextContainer=function(e,t,i){e.text.style&&(i.style.top="auto",i.style.bottom="0",e.text.alignToBottom?o.setStyle(i,"transform","translate(-50%, 0)"):o.setStyle(i,"transform","translate(-50%, 50%)"))},a.prototype._pathString=r.prototype._pathString,a.prototype._trailString=r.prototype._trailString,t.exports=a},{"./circle":2,"./shape":7,"./utils":9}],7:[function(e,t,i){var a=e("./path"),s=e("./utils"),n="Object is destroyed",r=function e(t,i){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=s.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},i,!0),s.isObject(i)&&void 0!==i.svgStyle&&(this._opts.svgStyle=i.svgStyle),s.isObject(i)&&s.isObject(i.text)&&void 0!==i.text.style&&(this._opts.text.style=i.text.style);var n,r=this._createSvgView(this._opts);if(!(n=s.isString(t)?document.querySelector(t):t))throw new Error("Container does not exist: "+t);this._container=n,this._container.appendChild(r.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&s.setStyles(r.svg,this._opts.svgStyle),this.svg=r.svg,this.path=r.path,this.trail=r.trail,this.text=null;var o=s.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new a(r.path,o),s.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};r.prototype.animate=function(e,t,i){if(null===this._progressPath)throw new Error(n);this._progressPath.animate(e,t,i)},r.prototype.stop=function(){if(null===this._progressPath)throw new Error(n);void 0!==this._progressPath&&this._progressPath.stop()},r.prototype.destroy=function(){if(null===this._progressPath)throw new Error(n);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,(this._progressPath=null)!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},r.prototype.set=function(e){if(null===this._progressPath)throw new Error(n);this._progressPath.set(e)},r.prototype.value=function(){if(null===this._progressPath)throw new Error(n);return void 0===this._progressPath?0:this._progressPath.value()},r.prototype.setText=function(e){if(null===this._progressPath)throw new Error(n);null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),s.isObject(e)?(s.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},r.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var i=null;(e.trailColor||e.trailWidth)&&(i=this._createTrail(e),t.appendChild(i));var n=this._createPath(e);return t.appendChild(n),{svg:t,path:n,trail:i}},r.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},r.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},r.prototype._createTrail=function(e){var t=this._trailString(e),i=s.extend({},e);return i.trailColor||(i.trailColor="#eee"),i.trailWidth||(i.trailWidth=i.strokeWidth),i.color=i.trailColor,i.strokeWidth=i.trailWidth,i.fill=null,this._createPathElement(t,i)},r.prototype._createPathElement=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",e),i.setAttribute("stroke",t.color),i.setAttribute("stroke-width",t.strokeWidth),t.fill?i.setAttribute("fill",t.fill):i.setAttribute("fill-opacity","0"),i},r.prototype._createTextContainer=function(e,t){var i=document.createElement("div");i.className=e.text.className;var n=e.text.style;return n&&(e.text.autoStyleContainer&&(t.style.position="relative"),s.setStyles(i,n),n.color||(i.style.color=e.color)),this._initializeTextContainer(e,t,i),i},r.prototype._initializeTextContainer=function(e,t,i){},r.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},r.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},r.prototype._warnContainerAspectRatio=function(e){if(this.containerAspectRatio){var t=window.getComputedStyle(e,null),i=parseFloat(t.getPropertyValue("width"),10),n=parseFloat(t.getPropertyValue("height"),10);s.floatEquals(this.containerAspectRatio,i/n)}},t.exports=r},{"./path":5,"./utils":9}],8:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._pathString=function(e){var t=100-e.strokeWidth/2;return r.render(this._pathTemplate,{width:t,strokeWidth:e.strokeWidth,halfOfStrokeWidth:e.strokeWidth/2})},o.prototype._trailString=function(e){var t=100-e.strokeWidth/2;return r.render(this._trailTemplate,{width:t,strokeWidth:e.strokeWidth,halfOfStrokeWidth:e.strokeWidth/2,startMargin:e.strokeWidth/2-e.trailWidth/2})},t.exports=o},{"./shape":7,"./utils":9}],9:[function(e,t,i){var a="Webkit Moz O ms".split(" ");function n(e,t,i){for(var n=e.style,r=0;r<a.length;++r){var o=a[r];n[o+s(t)]=i}n[t]=i}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e){if(t=e,"[object Array]"===Object.prototype.toString.call(t))return!1;var t,i=typeof e;return"object"===i&&!!e}function r(e,t){for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];t(n,i)}}t.exports={extend:function e(t,i,n){for(var r in t=t||{},n=n||!1,i=i||{})if(i.hasOwnProperty(r)){var o=t[r],a=i[r];n&&p(o)&&p(a)?t[r]=e(o,a,n):t[r]=a}return t},render:function(e,t){var i=e;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o="\\{"+n+"\\}",a=new RegExp(o,"g");i=i.replace(a,r)}return i},setStyle:n,setStyles:function(i,e){r(e,function(e,t){null!=e&&(p(e)&&!0===e.prefix?n(i,t,e.value):i.style[t]=e)})},capitalize:s,isString:function(e){return"string"==typeof e||e instanceof String},isFunction:function(e){return"function"==typeof e},isObject:p,forEachObject:r,floatEquals:function(e,t){return Math.abs(e-t)<.001},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},{}]},{},[4])(4)});var f=function(){function t(e){this.circleLoader=null,this.loaded=!1,this.showPlayButton="undefined"==typeof playBtn||playBtn,this.progress=0,this.options={gameId:"12346",gameTitle:"Place Holder",gameName:"place-holder",libs:[],version:"dev",barColor:"white",gaMeasurementId:"none"},this.options.gameId=e.gameId,this.options.gameTitle=e.gameTitle,this.options.version=e.version,this.options.barColor=e.barColor?e.barColor:this.options.barColor,this.options.libs=e.libs,this.options.gaMeasurementId=e.gaMeasurementId}return t.getInstance=function(e){if(!t.instance){if(!e)throw new Error("Can not create new SplashLoader instance without options!");t.instance=new t(e)}return t.instance},t.prototype.create=function(){return i(this,void 0,void 0,function(){var n,r,o,a,s,p,l;return h(this,function(e){switch(e.label){case 0:return n="\n        #h5branding-center {\n            position: absolute;\n            top: 45%;\n            left: 50%;\n            transform: translate(-50%, -20%);\n            text-align: center;\n            width: 100%;\n        }\n        #h5branding-wrapper {\n            position: relative;\n            z-index: 665;\n            width: 150px;\n            height: 150px;\n            display:inline-block;\n            margin: 35px 40px 96px 40px;\n        }\n\n        #h5branding-version {\n            position: absolute;\n            right: 10px;\n            font-family: Helvetica, Arial, sans-serif;\n            color: #ffffff;\n            font-size: 0.8em;\n            top: 10px;\n            display: none;\n        }\n\n        #h5branding-wrapper > #h5branding-bar, #h5branding-wrapper > img {\n            box-shadow: inset 10px 10px 20px 5px rgba(0, 0, 0, 0.5);\n            border-radius: 50%;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        #h5branding-ad {\n            position: relative;\n            z-index: 667;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: rgba(256, 256, 256, 0.2);\n            width: 336px;\n            height: 280px;\n            display: none;\n            margin: 0px 10px 0px 10px;\n        }\n\n        #h5branding-wrapper > img {\n            /* Needs appropriate vendor prefixes */\n            box-sizing: border-box;\n\n            /* This needs to be equal to strokeWidth */\n            padding: 4%;\n        }\n\n        #h5branding-wrapper > img {\n            border-radius: 50%;\n            box-shadow: inset 0 5px 5px rgba(0, 0, 0, 0.5), 5px 5px 7px rgba(0, 0, 0, 0.3);\n        }\n\n        #h5branding-container {\n            box-sizing: border-box;\n            position: absolute;\n            z-index: 664;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: #000;\n            overflow: hidden;\n        }\n\n        #h5branding-background {\n            position: absolute;\n            top: -25%;\n            left: -25%;\n            width: 150%;\n            height: 150%;\n            background-blend-mode: multiply;\n            background-size: cover;\n            filter: blur(40px) brightness(1.5);\n        }\n\n        @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n             /* IE10+ CSS styles go here */\n             #h5branding-background {\n                background-image: none !important;\n             }\n        }\n\n        #h5branding-logo {\n            position: absolute;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n            text-align: center;\n            top: 10%;\n        }\n\n        #h5branding-logo > img {\n            height: 150px;\n        }\n\n        #h5branding-title {\n            position: absolute;\n            width: 100%;\n            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.5) 50%, transparent);\n            color: #fff;\n            text-shadow: 0 0 1px rgba(0, 0, 0, 0.7);\n            bottom:10%;\n            padding: 15px 0;\n            text-align: center;\n            font-size: 18px;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            line-height: 100%;\n        }\n\n        #h5branding-button {\n            /* border: 0; */\n            padding: 10px 22px;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: linear-gradient(0deg, #dddddd, #ffffff);\n            color: #222;\n            text-transform: uppercase;\n            text-shadow: 0 0 1px #fff;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            font-size: 18px;\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n            display: none;\n            width: 150px;\n            position: absolute;\n            top: 170px;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n        }\n\n        @media (orientation: portrait) and (max-width: 1080px) {\n            #h5branding-logo > img {\n                height: initial;\n                width:100%;\n            }\n        }\n\n        @media (orientation: landscape) and (max-height: 640px) {\n            #h5branding-title {\n                display: none;\n            }\n\n            #h5branding-logo > img {\n                height: 100px;\n            }\n        }\n\n        @media (orientation: landscape) and (max-height: 460px) {\n            #h5branding-title {\n                display: none;\n            }\n\n            #h5branding-wrapper {\n                width: 110px;\n                height: 110px;\n                margin: 0;\n            }\n\n            #h5branding-logo {\n                top: 0;\n                transform: scale(0.7, 0.7);\n            }\n\n            #h5branding-button {\n                top: initial;\n                width: 110px;\n                font-size: 14px;\n                position: absolute;\n                top: 140px;\n                left: 0;\n                right: 0;\n            }\n\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n\n        @media (orientation: portrait) and (max-width: 250px) {\n            #h5branding-logo {\n                top: 2%;\n            }\n        }\n\n        @media (orientation: landscape) and (max-width: 330px) {\n             #h5branding-button {\n                top: 120px;\n            }\n\n            #h5branding-logo > img {\n                height: 70px;\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 850px) {\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 1100px) {\n            #h5branding-center {\n                top: 40%;\n            }\n\n            #h5branding-title {\n               bottom: 5%\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 900px) {\n            #h5branding-title {\n               display: none\n            }\n        }\n\n        @media (orientation: landscape) and (min-width: 800px) {\n            #h5branding-wrapper {\n                margin-left: 120px;\n                margin-right: 120px;\n            }\n        }\n\n        ",t=this.getGameLogoUrl(),i=this.options.gameTitle,r='\n        <div id="h5branding-background"></div>\n        <div id="h5branding-version"></div>\n        <div id="h5branding-logo"></div>\n        <div id="h5branding-center">\n            <div id="h5branding-ad"></div>\n            <div id="h5branding-wrapper">\n                <img src="'+t+'" />\n                <div id="h5branding-bar"></div>\n                <button id="h5branding-button" onclick="h5branding.SplashLoader.getInstance().onPlayButtonClick();">Play</button>\n            </div>\n        </div>\n        <div id="h5branding-title">'+i+"</div>\n    ",o=document.head||document.getElementsByTagName("head")[0],(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),o.appendChild(a),(s=document.createElement("div")).innerHTML=r,s.id="h5branding-container",(p=document.body||document.getElementsByTagName("body")[0]).insertBefore(s,p.firstChild),this.circleLoader=new m.Circle("#h5branding-bar",{strokeWidth:3,color:this.options.barColor}),(l=document.getElementById("h5branding-version"))&&(l.innerHTML=this.options.version),[4,this.loadLibs()];case 1:return e.sent(),[4,x.loadHost()];case 2:return e.sent(),[4,this.loadBranding()];case 3:return e.sent(),this.loaded=!0,[2]}var t,i})})},t.prototype.loadBranding=function(){return i(this,void 0,void 0,function(){var t,i,n;return h(this,function(e){switch(e.label){case 0:return[4,y.preload(Date.now().toString())];case 1:return e.sent(),(t=document.getElementById("h5branding-background"))&&(t.style.backgroundColor=y.brandingBackgroundColor),(i=document.getElementById("h5branding-logo"))&&x.getBrandingDomain()!==o.BrandingDomain.Neutral&&((n=document.createElement("img")).src=y.brandingLogoUrl.replace("_small",""),i.appendChild(n)),[2]}})})},t.prototype.loadLibs=function(){var i=this,n=this.options.libs.map(function(e,t){return s.instance.loadScript(e,!0,function(){i.setScriptloadProgress(n.length,t+1)})});return Promise.all(n)},Object.defineProperty(t.prototype,"bannerAllowed",{get:function(){var e=document.body.clientWidth,t=document.body.clientHeight;return this.progress<100&&!(t<e&&t<=460)&&!(e<600&&t<850)},enumerable:!1,configurable:!0}),t.prototype.showBanner=function(){if(!this.bannerAllowed)return null;var e=document.getElementById("h5branding-ad");return e?(e.style.display="inline-flex",e):null},t.prototype.setScriptloadProgress=function(e,t){var i=.3*t/e;this.circleLoader.animate(i,null,function(){})},t.prototype.setLoadProgress=function(e){var t=this;if(this.loaded)if(e=30+.7*e,100===(this.progress=e)){var i=document.querySelector("#h5branding-button");this.circleLoader.animate(1,null,function(){h5branding.SplashLoader.getInstance().onPlayButtonClick();!x.inGDGameZone()&&i&&!0===t.showPlayButton?i.style.display="block":(x.inGDGameZone()||!1===t.showPlayButton)&&t.onPlayButtonClick()})}else this.circleLoader.animate(e/100,null,function(){})},t.prototype.setButtonCallback=function(e){this.buttonCallback=e},t.prototype.onPlayButtonClick=function(){this.buttonCallback&&this.buttonCallback()},t.prototype.destroy=function(){var e=document.querySelector("#h5branding-container");null!==e&&null!==e.parentNode&&e.parentNode.removeChild(e)},t.prototype.getGameLogoUrl=function(){return"assets/icon.jpeg"},t}();o.Branding=y,o.Domain=a,o.Hosts=l,o.SplashLoader=f,o.Utils=x,Object.defineProperty(o,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.h5ads=e.h5ads||{})}(this,function(a){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var e,i,t,r=(function(e){var n=Object.prototype.hasOwnProperty,c="~";function i(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function r(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new s(i,n||e,r),a=c?c+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function t(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(c=!1)),t.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(c?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},t.prototype.listeners=function(e){var t=c?c+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,o=new Array(r);n<r;n++)o[n]=i[n].fn;return o},t.prototype.listenerCount=function(e){var t=c?c+e:e,i=this._events[t];return i?i.fn?1:i.length:0},t.prototype.emit=function(e,t,i,n,r,o){var a=c?c+e:e;if(!this._events[a])return!1;var s,p,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,r),!0;case 6:return l.fn.call(l.context,t,i,n,r,o),!0}for(p=1,s=new Array(h-1);p<h;p++)s[p-1]=arguments[p];l.fn.apply(l.context,s)}else{var u,d=l.length;for(p=0;p<d;p++)switch(l[p].once&&this.removeListener(e,l[p].fn,void 0,!0),h){case 1:l[p].fn.call(l[p].context);break;case 2:l[p].fn.call(l[p].context,t);break;case 3:l[p].fn.call(l[p].context,t,i);break;case 4:l[p].fn.call(l[p].context,t,i,n);break;default:if(!s)for(u=1,s=new Array(h-1);u<h;u++)s[u-1]=arguments[u];l[p].fn.apply(l[p].context,s)}}return!0},t.prototype.on=function(e,t,i){return r(this,e,t,i,!1)},t.prototype.once=function(e,t,i){return r(this,e,t,i,!0)},t.prototype.removeListener=function(e,t,i,n){var r=c?c+e:e;if(!this._events[r])return this;if(!t)return l(this,r),this;var o=this._events[r];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||l(this,r);else{for(var a=0,s=[],p=o.length;a<p;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&s.push(o[a]);s.length?this._events[r]=1===s.length?s[0]:s:l(this,r)}return this},t.prototype.removeAllListeners=function(e){var t;return e?(t=c?c+e:e,this._events[t]&&l(this,t)):(this._events=new i,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=c,t.EventEmitter=t,e.exports=t}(e={exports:{}},e.exports),e.exports);(t=i||(i={}))[t.AdMob=0]="AdMob",t[t.MoPub=1]="MoPub",t[t.Chartboost=2]="Chartboost",t[t.Heyzap=3]="Heyzap";var o,s,p,l,h=function(){function e(e,t){if(this.adsEnabled=!1,this.bannerShowable=!1,this.interstitialShowable=!1,this.insentiveShowable=!1,Cocoon&&Cocoon.Ad){switch(this.adsEnabled=!0,e){default:case i.AdMob:this.cocoonProvider=Cocoon.Ad.AdMob;break;case i.Chartboost:this.cocoonProvider=Cocoon.Ad.Chartboost;break;case i.Heyzap:this.cocoonProvider=Cocoon.Ad.Heyzap;break;case i.MoPub:this.cocoonProvider=Cocoon.Ad.MoPub}this.cocoonProvider.configure(t)}}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){if(this.adsEnabled){if(e===a.AdType.banner){if(!this.bannerShowable||null===this.banner)return;this.adManager.emit(a.AdEvents.BANNER_SHOWN,this.banner.width,this.banner.height),this.adManager.bannerActive=!0,this.banner.show()}if(e===a.AdType.interstitial){if(!this.interstitialShowable||null===this.interstitial)return void this.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.interstitial);this.interstitial.show()}if(e===a.AdType.rewarded){if(!this.insentiveShowable||null===this.insentive)return void this.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.rewarded);this.insentive.show()}}else e!==a.AdType.banner&&this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e,t,i){var n=this;this.adsEnabled&&(this.destroyAd(e),e===a.AdType.banner&&(this.banner=this.cocoonProvider.createBanner(t),i&&this.banner.setLayout(i),this.banner.on("load",function(){n.bannerShowable=!0}),this.banner.on("fail",function(){n.bannerShowable=!1,n.banner=null}),this.banner.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.banner)}),this.banner.on("show",function(){}),this.banner.on("dismiss",function(){}),this.banner.load()),e===a.AdType.interstitial&&(this.interstitial=this.cocoonProvider.createInterstitial(t),this.interstitial.on("load",function(){n.interstitialShowable=!0}),this.interstitial.on("fail",function(){n.interstitialShowable=!1,n.interstitial=null}),this.interstitial.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.interstitial)}),this.interstitial.on("show",function(){n.adManager.emit(a.AdEvents.CONTENT_PAUSED,a.AdType.interstitial)}),this.interstitial.on("dismiss",function(){n.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.interstitial),n.interstitialShowable=!1,n.interstitial=null}),this.interstitial.load()),e===a.AdType.rewarded&&(this.insentive=this.cocoonProvider.createRewardedVideo(t),this.insentive.on("load",function(){n.insentiveShowable=!0}),this.insentive.on("fail",function(){n.insentiveShowable=!1,n.insentive=null}),this.insentive.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.rewarded)}),this.insentive.on("show",function(){n.adManager.emit(a.AdEvents.CONTENT_PAUSED,a.AdType.rewarded)}),this.insentive.on("dismiss",function(){n.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.rewarded),n.insentiveShowable=!1,n.insentive=null}),this.insentive.on("reward",function(){n.adManager.emit(a.AdEvents.AD_REWARDED,a.AdType.rewarded),n.insentiveShowable=!1,n.insentive=null}),this.insentive.load()))},e.prototype.destroyAd=function(e){if(this.adsEnabled){if(e===a.AdType.banner&&null!==this.banner){try{this.cocoonProvider.releaseBanner(this.banner)}catch(e){}this.banner=null,this.bannerShowable=!1}e===a.AdType.interstitial&&null!==this.interstitial&&(this.cocoonProvider.releaseInterstitial(this.interstitial),this.interstitial=null,this.interstitialShowable=!1)}},e.prototype.hideAd=function(e){this.adsEnabled&&(e===a.AdType.interstitial&&null!==this.interstitial&&this.interstitial.hide(),e===a.AdType.banner&&null!==this.banner&&(this.adManager.bannerActive&&(this.adManager.bannerActive=!1,this.adManager.emit(a.AdEvents.BANNER_HIDDEN,this.banner.width,this.banner.height)),this.banner.hide()),e===a.AdType.rewarded&&null!==this.insentive&&this.insentive.hide())},e}(),u=function(){function e(e,t,i){void 0===i&&(i=!1),this.adsEnabled=!1,void 0===cordova.plugins||void 0!==cordova.plugins&&void 0===cordova.plugins.gdApi||(i&&cordova.plugins.gdApi.enableTestAds(),this.setAdListeners(),cordova.plugins.gdApi.init([e,t],function(e){},function(e){}))}return e.prototype.setAdListeners=function(){var t=this;cordova.plugins.gdApi.setAdListener(function(e){switch(e.event){case"BANNER_STARTED":t.adManager.emit(a.AdEvents.CONTENT_PAUSED);break;case"API_IS_READY":t.adsEnabled=!0;break;case"API_ALREADY_INITIALIZED":break;case"BANNER_CLOSED":case"API_NOT_READY":case"BANNER_FAILED":t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}},function(e){t.adsEnabled=!1})},e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){var t=this;this.adsEnabled?cordova.plugins.gdApi.showBanner(function(e){},function(e){t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}):this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e){},e.prototype.destroyAd=function(e){},e.prototype.hideAd=function(e){},e}(),d=function(){function e(){var t=this;if(this.adsEnabled=!1,this.rewardedLoaded=!1,"undefined"!=typeof gamedockSDK){gamedockSDK.on("PrivacyPolicyStatus",function(e){t.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)}),gamedockSDK.initialise(!1,{shouldBlock:!0,requiredAge:12},!0,"PRODUCTION",[]),gamedockSDK.on("AdAvailable",function(e){switch(e.type){case"interstitial":t.interstitalAvailable();break;case"rewardVideo":t.rewardedChanged(!0);break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdNotAvailable",function(e){switch(e.type){case"interstitial":case"rewardVideo":t.resumeGameplay();break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdFinished",function(e){switch(e.type){case"interstitial":t.resumeGameplay();break;case"rewardVideo":t.rewardVideoFinished(e.reason);break;case"banner":throw new Error("Not yet implemented.")}})}}return e.prototype.setManager=function(e){this.adManager=e},e.prototype.showAd=function(e){if(void 0===e&&(e=a.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(e){case a.AdType.interstitial:this.adManager.emit(a.AdEvents.CONTENT_PAUSED),gamedockSDK.requestInterstitial();break;case a.AdType.rewarded:if(!this.adAvailable(a.AdType.rewarded)){this.resumeGameplay();break}this.adManager.emit(a.AdEvents.CONTENT_PAUSED),this.rewardedChanged(!1),gamedockSDK.playRewardVideo();break;default:this.resumeGameplay()}},e.prototype.interstitalAvailable=function(){"undefined"!=typeof gamedockSDK&&gamedockSDK.playInterstitial()},e.prototype.rewardVideoFinished=function(e){switch(e){case"dismiss":this.resumeGameplay();break;case"close":this.adManager.emit(a.AdEvents.AD_REWARDED)}},e.prototype.resumeGameplay=function(){this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.preloadAd=function(e){if(void 0===e&&(e=a.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(e){case a.AdType.rewarded:if(this.rewardedLoaded)return;gamedockSDK.requestRewardVideo()}},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.adAvailable=function(e){switch(e){case a.AdType.rewarded:return this.rewardedLoaded}return!1},e.prototype.rewardedChanged=function(e){this.rewardedLoaded=e},e}(),c=function(){function e(e){var t=this;this.adsEnabled=!1,this.adsEnabled=!0,HeyzapAds.start(e).then(function(){},function(e){t.adsEnabled=!1})}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e,t){var i=this;switch(this.adsEnabled||this.adManager.emit(a.AdEvents.CONTENT_RESUMED),e){case a.AdType.interstitial:HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.HIDE)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.SHOW_FAILED)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.InterstitialAd.Events.CLICKED)}),HeyzapAds.InterstitialAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.interstitial:HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.HIDE)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.SHOW_FAILED)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.VideoAd.Events.CLICKED)}),HeyzapAds.VideoAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.rewarded:HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.HIDE)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.SHOW_FAILED)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.IncentivizedAd.Events.CLICKED)}),HeyzapAds.IncentivizedAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.banner:if(void 0===t)return;HeyzapAds.BannerAd.show(t).then(function(){},function(e){})}},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e){this.adsEnabled&&e===a.AdType.rewarded&&HeyzapAds.IncentivizedAd.fetch().then(function(){},function(e){})},e.prototype.destroyAd=function(e){this.adsEnabled&&e===a.AdType.banner&&HeyzapAds.BannerAd.destroy().then(function(){},function(e){})},e.prototype.hideAd=function(e){this.adsEnabled&&e===a.AdType.banner&&HeyzapAds.BannerAd.hide().then(function(){},function(e){})},e}(),_=function(){function e(e){var t=this;if(this.adsEnabled=!1,this.interstitialLoaded=!1,this.rewardedLoaded=!1,"undefined"!=typeof IronSourceAds){IronSourceAds.init({appKey:e});var i=function(){return t.resumeGameplay()};window.addEventListener("interstitialClosed",i),window.addEventListener("interstitialShowFailed",i),window.addEventListener("interstitialLoaded",function(){return t.interstitialChanged(!0)}),window.addEventListener("rewardedVideoClosed",i),window.addEventListener("rewardedVideoFailed",i),IronSourceAds.hasRewardedVideo({onSuccess:this.rewardedChanged.bind(this)}),window.addEventListener("rewardedVideoAvailabilityChanged",function(e){return t.rewardedChanged(e.available)})}}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){switch(void 0===e&&(e=a.AdType.interstitial),e){case a.AdType.interstitial:if(!this.interstitialLoaded){this.resumeGameplay();break}this.interstitialChanged(!1),this.adManager.emit(a.AdEvents.CONTENT_PAUSED),IronSourceAds.showInterstitial();break;case a.AdType.rewarded:if(!this.rewardedLoaded){this.resumeGameplay();break}this.adManager.emit(a.AdEvents.CONTENT_PAUSED),IronSourceAds.showRewardedVideo();break;default:this.resumeGameplay()}},e.prototype.resumeGameplay=function(){this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.preloadAd=function(e){void 0===e&&(e=a.AdType.interstitial),e===a.AdType.interstitial&&IronSourceAds.loadInterstitial()},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.adAvailable=function(e){switch(e){case a.AdType.interstitial:return this.interstitialLoaded;case a.AdType.rewarded:return this.rewardedLoaded}return!1},e.prototype.interstitialChanged=function(e){this.interstitialLoaded=e},e.prototype.rewardedChanged=function(e){this.rewardedLoaded=e},e}();(s=o||(o={})).interstitial="interstitial",s.rewarded="rewarded",s.display="display",(p=a.GameDistributionBannerSize||(a.GameDistributionBannerSize={}))[p.LargeRectangle=0]="LargeRectangle",p[p.MediumRectangle=1]="MediumRectangle",p[p.Billboard=2]="Billboard",p[p.Leaderboard=3]="Leaderboard",p[p.Skyscraper=4]="Skyscraper",p[p.WideSkyscraper=5]="WideSkyscraper",(l=a.GameDistributionAlignment||(a.GameDistributionAlignment={}))[l.TopLeft=0]="TopLeft",l[l.TopCenter=1]="TopCenter",l[l.TopRight=2]="TopRight",l[l.CenterLeft=3]="CenterLeft",l[l.Center=4]="Center",l[l.CenterRight=5]="CenterRight",l[l.BottomLeft=6]="BottomLeft",l[l.BottomCenter=7]="BottomCenter",l[l.BottomRight=8]="BottomRight";var y,x,m=function(){function e(){this.scaleFactor=1,this.offsetX=0,this.offsetY=0,this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.top="0px",this.element.style.left="0px",this.element.id="banner-"+Date.now()+(1e7*Math.random()|0),document.body.appendChild(this.element)}return e.prototype.loadBanner=function(){return"undefined"==typeof gdsdk?Promise.reject("GD Sdk not available, probably due to adblocker"):gdsdk.showAd(o.display,{containerId:this.element.id})},e.prototype.destroy=function(){document.body.removeChild(this.element),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),delete this.element,delete this.parent,delete this.alignment},e.prototype.alignIn=function(e,t){var i=this;this.parent||(this.parent=e,this.alignment=t,this.resizeListener=function(){return i.resize()},window.addEventListener("resize",this.resizeListener),this.resize())},e.prototype.setOffset=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.offsetX=e,this.offsetY=t,this.resize()},e.prototype.resize=function(){if(this.parent){var e=this.parent.getBoundingClientRect();switch(this.alignment){case a.GameDistributionAlignment.TopLeft:this.position(e.left,e.top);break;case a.GameDistributionAlignment.TopCenter:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top);break;case a.GameDistributionAlignment.TopRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top);break;case a.GameDistributionAlignment.CenterLeft:this.position(e.left,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.Center:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.CenterRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.BottomLeft:this.position(e.left,e.top+e.height-this.height*this.scaleFactor);break;case a.GameDistributionAlignment.BottomCenter:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top+e.height-this.height*this.scaleFactor);break;case a.GameDistributionAlignment.BottomRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top+e.height-this.height*this.scaleFactor)}}},e.prototype.setSize=function(e){var t,i;switch(e){default:case a.GameDistributionBannerSize.LargeRectangle:t=336,i=280;break;case a.GameDistributionBannerSize.MediumRectangle:t=300,i=250;break;case a.GameDistributionBannerSize.Billboard:t=970,i=250;break;case a.GameDistributionBannerSize.Leaderboard:t=728,i=90;break;case a.GameDistributionBannerSize.Skyscraper:t=120,i=600;break;case a.GameDistributionBannerSize.WideSkyscraper:t=160,i=600}this.width=t,this.height=i,this.element.style.width=t+"px",this.element.style.height=i+"px"},e.prototype.position=function(e,t){this.element.style.left=e+this.offsetX+"px",this.element.style.top=t+this.offsetY+"px"},e.prototype.scale=function(e){this.element.style.transformOrigin="left top",this.scaleFactor=e,this.element.style.transform="scale("+e+")"},e}(),f=function(){function e(e){var t,i,n,r,o=this;this.adsEnabled=!1,this.hasRewarded=!1,this.adShowing=!1,window.GD_OPTIONS={gameId:e,advertisementSettings:{autoplay:!1},onEvent:function(e){switch(e.name){case"SDK_GAME_PAUSE":o.adManager.emit(a.AdEvents.CONTENT_PAUSED);break;case"SDK_READY":o.sdkLoaded()}}},t=document,i="gamedistribution-jssdk",r=t.getElementsByTagName("script")[0],t.getElementById(i)||((n=t.createElement("script")).id=i,n.src="patch/js/gd-sdk.js?html5.api.gamedistribution.com/main.min.js",r.parentNode&&r.parentNode.insertBefore(n,r))}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.sdkLoaded=function(){this.adsEnabled=!0},e.prototype.showAd=function(e){var t=this;if(this.adsEnabled){if("undefined"==typeof gdsdk||gdsdk&&void 0===gdsdk.showAd)return this.adsEnabled=!1,void this.adManager.emit(a.AdEvents.CONTENT_RESUMED);gdsdk.showAd(e===a.AdType.rewarded?o.rewarded:o.interstitial).then(function(){e===a.AdType.rewarded&&(t.adManager.emit(a.AdEvents.AD_REWARDED),t.hasRewarded=!1),t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}).catch(function(){e===a.AdType.rewarded&&t.hasRewarded&&(t.hasRewarded=!1),t.adManager.emit(a.AdEvents.CONTENT_RESUMED)})}else this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.createBanner=function(e){if(this.adsEnabled){var t=new m;return t.setSize(e),t}},e.prototype.loadBanner=function(e){if(this.adsEnabled){var t=new m;return t.setSize(e),t.loadBanner(),t}},e.prototype.preloadAd=function(e){var t=this;!this.hasRewarded&&this.adsEnabled&&e===a.AdType.rewarded&&gdsdk.preloadAd(o.rewarded).then(function(){t.hasRewarded=!0,t.adManager.emit(a.AdEvents.AD_LOADED,e)})},e.prototype.adAvailable=function(e){return e!==a.AdType.rewarded||this.hasRewarded},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.areAdsEnabled=function(){var e=document.createElement("script");e.id="debug-test-ad",e.src="patch/js/null.js?storage.googleapis.com/cdn.fbrq.io/anyad.js",document.body.appendChild(e);return new Promise(function(e){window.setTimeout(function(){e(function(){var e=!0;if(document.getElementById("az-test-ad")||(e=!1),document.getElementById("debug-test-ad")){var t=document.getElementById("debug-test-ad");try{t.parentNode.removeChild(t)}catch(e){}}if(document.getElementById("az-test-ad")){var i=document.getElementById("az-test-ad");try{i.parentNode.removeChild(i)}catch(e){}}return e}())},100)})},e}();(x=y||(y={}))[x.start=0]="start",x[x.firstQuartile=1]="firstQuartile",x[x.midPoint=2]="midPoint",x[x.thirdQuartile=3]="thirdQuartile",x[x.complete=4]="complete";var v,g,z=function(){function e(e,t){this.googleEnabled=!1,this.adsEnabled=!0,this.adTagUrl="",this.adRequested=!1,this.areAdsEnabled(),"undefined"!=typeof google&&(this.googleEnabled=!0,this.gameContent="string"==typeof e.parentElement?document.getElementById(e.parentElement):e.parentElement,this.gameContent.style.position="absolute",this.gameContent.style.width="100%",this.adContent=this.gameContent.parentNode.appendChild(document.createElement("div")),this.adContent.id="phaser-ad-container",this.adContent.style.position="absolute",this.adContent.style.zIndex="9999",this.adContent.style.display="none",this.adContent.style.top="0",this.adContent.style.left="0",this.adContent.style.width="100%",this.adContent.style.height="100%",this.adContent.style.overflow="hidden",this.adTagUrl=t,this.adDisplay=new google.ima.AdDisplayContainer(this.adContent),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale("nl"),this.adLoader=new google.ima.AdsLoader(this.adDisplay),this.adLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdManagerLoader,!1,this),this.adLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this))}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e,t){if(!this.adRequested)if(this.adsEnabled||this.adManager.emit(a.AdEvents.AD_DISABLED,!0),this.googleEnabled){this.adDisplay.initialize();var i=new google.ima.AdsRequest;i.adTagUrl=this.adTagUrl+this.parseCustomParams(t);var n=window.innerWidth,r=window.innerHeight;document.body.clientHeight<window.innerHeight&&(r=document.body.clientHeight,n=document.body.clientWidth),i.linearAdSlotWidth=n,i.linearAdSlotHeight=r,i.nonLinearAdSlotWidth=n,i.nonLinearAdSlotHeight=r,i.forceNonLinearFullSlot=!0;try{this.adRequested=!0,this.adLoader.requestAds(i)}catch(e){this.onContentResumeRequested()}}else this.onContentResumeRequested()},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(){},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.onAdManagerLoader=function(e){var t=this,i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0;var n=e.getAdsManager(this.gameContent,i);(this.adsManager=n).addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),n.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),n.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this),[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE].forEach(function(e){n.addEventListener(e,t.onAdEvent,!1,t)});try{this.adContent.style.display="block";var r=window.innerWidth,o=window.innerHeight;this.adsManager.init(r,o,google.ima.ViewMode.NORMAL),this.adsManager.start(),this.resizeListener=function(){null!==t.adsManager&&t.adsManager.resize(window.innerWidth,window.innerHeight,google.ima.ViewMode.NORMAL)},window.addEventListener("resize",this.resizeListener)}catch(e){this.onAdError(e)}},e.prototype.onAdEvent=function(e){switch(e.type){case google.ima.AdEvent.Type.CLICK:this.adManager.emit(a.AdEvents.AD_CLICKED);break;case google.ima.AdEvent.Type.LOADED:this.adRequested=!1;var t=e.getAd();t.isLinear()||this.onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.start);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.firstQuartile);break;case google.ima.AdEvent.Type.MIDPOINT:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.midPoint);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.thirdQuartile);break;case google.ima.AdEvent.Type.COMPLETE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.complete);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.onContentResumeRequested()}},e.prototype.onAdError=function(e){null!==this.adsManager&&(this.adsManager.destroy(),null!==this.resizeListener&&window.removeEventListener("resize",this.resizeListener)),this.adRequested&&(this.adRequested=!1),this.onContentResumeRequested()},e.prototype.onContentPauseRequested=function(){this.adManager.emit(a.AdEvents.CONTENT_PAUSED)},e.prototype.onContentResumeRequested=function(){"undefined"!=typeof google&&(this.adContent.style.display="none"),this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.parseCustomParams=function(e){if(void 0===e)return"";var t="";for(var i in e){if(e.hasOwnProperty(i))0<t.length&&(t+="&"),t+=i+"="+(Array.isArray(e[i])?e[i].join(","):e[i])}return"&cust_params="+encodeURIComponent(t)},e.prototype.areAdsEnabled=function(){var t=this,i=document.createElement("div");i.innerHTML="&nbsp;",i.className="adsbox",i.style.position="absolute",i.style.fontSize="10px",document.body.appendChild(i);window.setTimeout(function(){var e;t.adsEnabled=(e=!0,0===i.offsetHeight&&(e=!1),i.parentNode&&i.parentNode.removeChild(i),e)},100)},e}();(v=a.AdEvents||(a.AdEvents={})).CONTENT_PAUSED="onContentPaused",v.CONTENT_RESUMED="onContentResumed",v.AD_PROGRESSION="onAdProgression",v.AD_DISABLED="onAdsDisabled",v.AD_CLICKED="onAdClicked",v.AD_REWARDED="onAdRewardGranted",v.BANNER_SHOWN="onBannerShown",v.BANNER_HIDDEN="onBannerHidden",v.AD_LOADED="onAdLoaded",v.AD_PROVIDER_LOADED="onAdProviderLoaded",(g=a.AdType||(a.AdType={}))[g.interstitial=0]="interstitial",g[g.rewarded=1]="rewarded",g[g.banner=2]="banner";var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bannerActive=!1,e.provider=null,e}return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(e,t),e.prototype.setAdProvider=function(e){this.provider=e,this.provider.setManager(this)},e.prototype.showAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not request an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.showAd.apply(this.provider,t)},e.prototype.createBanner=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.provider.loadBanner.apply(this.provider,e)},e.prototype.loadBanner=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof this.provider.loadBanner?this.provider.loadBanner.apply(this.provider,e):null},e.prototype.preloadAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not preload an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.preloadAd.apply(this.provider,t)},e.prototype.destroyAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not destroy an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.destroyAd.apply(this.provider,t)},e.prototype.hideAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.hideAd.apply(this.provider,t)},e.prototype.adsEnabled=function(){if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return this.provider.adsEnabled},e.prototype.adAvailable=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return t.unshift(e),this.provider.adAvailable.apply(this.provider,t)},e}(r),w=new b;a.H5AdWrapper=b,a.adWrapper=w,a.CocoonAds=h,a.CordovaGamedistribution=u,a.CordovaGamedock=d,a.CordovaHeyzap=c,a.CordovaIronSource=_,a.GameDistribution=f,a.GameDistributionBanner=m,a.Ima3=z,Object.defineProperty(a,"__esModule",{value:!0})}),function(e){function i(){for(var e=0;e<b.length;e++)b[e][0](b[e][1]);y=!(b=[])}function n(e,t){b.push([e,t]),y||(y=!0,z(i,0))}function r(t){var e=(i=t.owner).state_,i=i.data_,n=t[e];if(t=t.then,"function"==typeof n){e=f;try{i=n(i)}catch(e){p(t,e)}}o(t,i)||(e===f&&a(t,i),e===v&&p(t,i))}function o(t,i){var n;try{if(t===i)throw new TypeError("A promises callback cannot return that same promise.");if(i&&("function"==typeof i||"object"==typeof i)){var e=i.then;if("function"==typeof e)return e.call(i,function(e){n||(n=!0,i!==e?a(t,e):s(t,e))},function(e){n||(n=!0,p(t,e))}),!0}}catch(e){return n||p(t,e),!0}return!1}function a(e,t){e!==t&&o(e,t)||s(e,t)}function s(e,t){e.state_===x&&(e.state_=m,e.data_=t,n(l,e))}function p(e,t){e.state_===x&&(e.state_=m,e.data_=t,n(h,e))}function t(e){var t=e.then_;for(e.then_=void 0,e=0;e<t.length;e++)r(t[e])}function l(e){e.state_=f,t(e)}function h(e){e.state_=v,t(e)}function u(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(!1==this instanceof u)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function i(e){p(t,e)}try{e(function(e){a(t,e)},i)}catch(e){i(e)}}(e,this)}var d,c=e.Promise,_=c&&"resolve"in c&&"reject"in c&&"all"in c&&"race"in c&&(new c(function(e){d=e}),"function"==typeof d);"undefined"!=typeof exports&&exports?(exports.Promise=_?c:u,exports.Polyfill=u):"function"==typeof define&&define.amd?define(function(){return _?c:u}):_||(e.Promise=u);var y,x="pending",m="sealed",f="fulfilled",v="rejected",g=function(){},z="undefined"!=typeof setImmediate?setImmediate:setTimeout,b=[];u.prototype={constructor:u,state_:x,then_:null,data_:void 0,then:function(e,t){var i={owner:this,then:new this.constructor(g),fulfilled:e,rejected:t};return this.state_===f||this.state_===v?n(r,i):this.then_.push(i),i.then},catch:function(e){return this.then(null,e)}},u.all=function(s){if("[object Array]"!==Object.prototype.toString.call(s))throw new TypeError("You must pass an array to Promise.all().");return new this(function(i,e){function t(t){return o++,function(e){r[t]=e,--o||i(r)}}for(var n,r=[],o=0,a=0;a<s.length;a++)(n=s[a])&&"function"==typeof n.then?n.then(t(a),e):r[a]=n;o||i(r)})},u.race=function(r){if("[object Array]"!==Object.prototype.toString.call(r))throw new TypeError("You must pass an array to Promise.race().");return new this(function(e,t){for(var i,n=0;n<r.length;n++)(i=r[n])&&"function"==typeof i.then?i.then(e,t):e(i)})},u.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)})},u.reject=function(i){return new this(function(e,t){t(i)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){"use strict";var t=[],S=w.document,n=Object.getPrototypeOf,s=t.slice,y=t.concat,p=t.push,r=t.indexOf,i={},o=i.toString,_=i.hasOwnProperty,a=_.toString,l=a.call(Object),x={};function m(e,t){var i=(t=t||S).createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}var C=function(e,t){return new C.fn.init(e,t)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^-ms-/,d=/-([a-z])/g,c=function(e,t){return t.toUpperCase()};function f(e){var t=!!e&&"length"in e&&e.length,i=C.type(e);return"function"!==i&&!C.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:"3.1.1",constructor:C,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(i){return this.pushStack(C.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:p,sort:t.sort,splice:t.splice},C.extend=C.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,p=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||C.isFunction(a)||(a={}),s===p&&(a=this,s--);s<p;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],a!==(n=e[t])&&(l&&n&&(C.isPlainObject(n)||(r=C.isArray(n)))?(o=r?(r=!1,i&&C.isArray(i)?i:[]):i&&C.isPlainObject(i)?i:{},a[t]=C.extend(l,o,n)):void 0!==n&&(a[t]=n));return a},C.extend({expando:"jQuery"+("3.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===C.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==o.call(e)||(t=n(e))&&("function"!=typeof(i=_.call(t,"constructor")&&t.constructor)||a.call(i)!==l))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[o.call(e)]||"object":typeof e},globalEval:function(e){m(e)},camelCase:function(e){return e.replace(u,"ms-").replace(d,c)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(f(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(h,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(f(Object(e))?C.merge(i,"string"==typeof e?[e]:e):p.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:r.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!==a&&n.push(e[r]);return n},map:function(e,t,i){var n,r,o=0,a=[];if(f(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&a.push(r);return y.apply([],a)},guid:1,proxy:function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),C.isFunction(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||C.guid++,r},now:Date.now,support:x}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=t[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){i["[object "+t+"]"]=t.toLowerCase()});var v=function(i){var e,c,g,o,r,_,u,y,z,p,l,b,w,a,S,x,s,h,m,C="sizzle"+1*new Date,f=i.document,M=0,n=0,d=ae(),v=ae(),P=ae(),k=function(e,t){return e===t&&(l=!0),0},T={}.hasOwnProperty,t=[],G=t.pop,O=t.push,A=t.push,E=t.slice,I=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",D="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",R="\\["+L+"*("+D+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+D+"))|)"+L+"*\\]",F=":("+D+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",j=new RegExp(L+"+","g"),N=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),U=new RegExp("^"+L+"*,"+L+"*"),H=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),V=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),W=new RegExp(F),X=new RegExp("^"+D+"$"),q={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),TAG:new RegExp("^("+D+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,$=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){b()},re=fe(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{A.apply(t=E.call(f.childNodes),f.childNodes),t[f.childNodes.length].nodeType}catch(e){A={apply:t.length?function(e,t){O.apply(e,E.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function oe(e,t,i,n){var r,o,a,s,p,l,h,u=t&&t.ownerDocument,d=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return i;if(!n&&((t?t.ownerDocument||t:f)!==w&&b(t),t=t||w,S)){if(11!==d&&(p=J.exec(e)))if(r=p[1]){if(9===d){if(!(a=t.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(u&&(a=u.getElementById(r))&&m(t,a)&&a.id===r)return i.push(a),i}else{if(p[2])return A.apply(i,t.getElementsByTagName(e)),i;if((r=p[3])&&c.getElementsByClassName&&t.getElementsByClassName)return A.apply(i,t.getElementsByClassName(r)),i}if(c.qsa&&!P[e+" "]&&(!x||!x.test(e))){if(1!==d)u=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(te,ie):t.setAttribute("id",s=C),o=(l=_(e)).length;o--;)l[o]="#"+s+" "+me(l[o]);h=l.join(","),u=Q.test(e)&&ye(t.parentNode)||t}if(h)try{return A.apply(i,u.querySelectorAll(h)),i}catch(e){}finally{s===C&&t.removeAttribute("id")}}}return y(e.replace(N,"$1"),t,i,n)}function ae(){var n=[];return function e(t,i){return n.push(t+" ")>g.cacheLength&&delete e[n.shift()],e[t+" "]=i}}function se(e){return e[C]=!0,e}function pe(e){var t=w.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var i=e.split("|"),n=i.length;n--;)g.attrHandle[i[n]]=t}function he(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ue(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function de(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}function ce(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&re(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function _e(a){return se(function(o){return o=+o,se(function(e,t){for(var i,n=a([],e.length,o),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in c=oe.support={},r=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},b=oe.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:f;return n!==w&&9===n.nodeType&&n.documentElement&&(a=(w=n).documentElement,S=!r(w),f!==w&&(i=w.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ne,!1):i.attachEvent&&i.attachEvent("onunload",ne)),c.attributes=pe(function(e){return e.className="i",!e.getAttribute("className")}),c.getElementsByTagName=pe(function(e){return e.appendChild(w.createComment("")),!e.getElementsByTagName("*").length}),c.getElementsByClassName=K.test(w.getElementsByClassName),c.getById=pe(function(e){return a.appendChild(e).id=C,!w.getElementsByName||!w.getElementsByName(C).length}),c.getById?(g.filter.ID=function(e){var t=e.replace($,ee);return function(e){return e.getAttribute("id")===t}},g.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i=t.getElementById(e);return i?[i]:[]}}):(g.filter.ID=function(e){var i=e.replace($,ee);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===i}},g.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),g.find.TAG=c.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):c.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;i=o[r++];)1===i.nodeType&&n.push(i);return n},g.find.CLASS=c.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},s=[],x=[],(c.qsa=K.test(w.querySelectorAll))&&(pe(function(e){a.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&x.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||x.push("\\["+L+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+C+"-]").length||x.push("~="),e.querySelectorAll(":checked").length||x.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||x.push(".#.+[+~]")}),pe(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=w.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&x.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&x.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&x.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),x.push(",.*:")})),(c.matchesSelector=K.test(h=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&pe(function(e){c.disconnectedMatch=h.call(e,"*"),h.call(e,"[s!='']:x"),s.push("!=",F)}),x=x.length&&new RegExp(x.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),m=t||K.test(a.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return l=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!c.sortDetached&&t.compareDocumentPosition(e)===i?e===w||e.ownerDocument===f&&m(f,e)?-1:t===w||t.ownerDocument===f&&m(f,t)?1:p?I(p,e)-I(p,t):0:4&i?-1:1)}:function(e,t){if(e===t)return l=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===w?-1:t===w?1:r?-1:o?1:p?I(p,e)-I(p,t):0;if(r===o)return he(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?he(a[n],s[n]):a[n]===f?-1:s[n]===f?1:0}),w},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==w&&b(e),t=t.replace(V,"='$1']"),c.matchesSelector&&S&&!P[t+" "]&&(!s||!s.test(t))&&(!x||!x.test(t)))try{var i=h.call(e,t);if(i||c.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<oe(t,w,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!==w&&b(e),m(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==w&&b(e);var i=g.attrHandle[t.toLowerCase()],n=i&&T.call(g.attrHandle,t.toLowerCase())?i(e,t,!S):void 0;return void 0!==n?n:c.attributes||!S?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},oe.escape=function(e){return(e+"").replace(te,ie)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],n=0,r=0;if(l=!c.detectDuplicates,p=!c.sortStable&&e.slice(0),e.sort(k),l){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return p=null,e},o=oe.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(g=oe.selectors={cacheLength:50,createPseudo:se,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,ee),e[3]=(e[3]||e[4]||e[5]||"").replace($,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&W.test(i)&&(t=_(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace($,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=d[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&d(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(e){var t=oe.attr(e,i);return null==t?"!="===n:!n||(t+="","="===n?t===r:"!="===n?t!==r:"^="===n?r&&0===t.indexOf(r):"*="===n?r&&-1<t.indexOf(r):"$="===n?r&&t.slice(-r.length)===r:"~="===n?-1<(" "+t.replace(j," ")+" ").indexOf(r):"|="===n&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(_,e,t,y,x){var m="nth"!==_.slice(0,3),f="last"!==_.slice(-4),v="of-type"===e;return 1===y&&0===x?function(e){return!!e.parentNode}:function(e,t,i){var n,r,o,a,s,p,l=m!==f?"nextSibling":"previousSibling",h=e.parentNode,u=v&&e.nodeName.toLowerCase(),d=!i&&!v,c=!1;if(h){if(m){for(;l;){for(a=e;a=a[l];)if(v?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;p=l="only"===_&&!p&&"nextSibling"}return!0}if(p=[f?h.firstChild:h.lastChild],f&&d){for(c=(s=(n=(r=(o=(a=h)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]||[])[0]===M&&n[1])&&n[2],a=s&&h.childNodes[s];a=++s&&a&&a[l]||(c=s=0)||p.pop();)if(1===a.nodeType&&++c&&a===e){r[_]=[M,s,c];break}}else if(d&&(c=s=(n=(r=(o=(a=e)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]||[])[0]===M&&n[1]),!1===c)for(;(a=++s&&a&&a[l]||(c=s=0)||p.pop())&&((v?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++c||(d&&((r=(o=a[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]=[M,c]),a!==e)););return(c-=x)===y||c%y==0&&0<=c/y}}},PSEUDO:function(e,o){var t,a=g.pseudos[e]||g.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return a[C]?a(o):1<a.length?(t=[e,e,"",o],g.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,t){for(var i,n=a(e,o),r=n.length;r--;)e[i=I(e,n[r])]=!(t[i]=n[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:se(function(e){var n=[],r=[],s=u(e.replace(N,"$1"));return s[C]?se(function(e,t,i,n){for(var r,o=s(e,null,n,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,i){return n[0]=e,s(n,null,i,r),n[0]=null,!r.pop()}}),has:se(function(t){return function(e){return 0<oe(t,e).length}}),contains:se(function(t){return t=t.replace($,ee),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:se(function(i){return X.test(i||"")||oe.error("unsupported lang: "+i),i=i.replace($,ee).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ce(!1),disabled:ce(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!g.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:_e(function(){return[0]}),last:_e(function(e,t){return[t-1]}),eq:_e(function(e,t,i){return[i<0?i+t:i]}),even:_e(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:_e(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:_e(function(e,t,i){for(var n=i<0?i+t:i;0<=--n;)e.push(n);return e}),gt:_e(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=g.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[e]=ue(e);for(e in{submit:!0,reset:!0})g.pseudos[e]=de(e);function xe(){}function me(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function fe(s,e,t){var p=e.dir,l=e.next,h=l||p,u=t&&"parentNode"===h,d=n++;return e.first?function(e,t,i){for(;e=e[p];)if(1===e.nodeType||u)return s(e,t,i);return!1}:function(e,t,i){var n,r,o,a=[M,d];if(i){for(;e=e[p];)if((1===e.nodeType||u)&&s(e,t,i))return!0}else for(;e=e[p];)if(1===e.nodeType||u)if(r=(o=e[C]||(e[C]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[p]||e;else{if((n=r[h])&&n[0]===M&&n[1]===d)return a[2]=n[2];if((r[h]=a)[2]=s(e,t,i))return!0}return!1}}function ve(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function ge(e,t,i,n,r){for(var o,a=[],s=0,p=e.length,l=null!=t;s<p;s++)(o=e[s])&&(i&&!i(o,n,r)||(a.push(o),l&&t.push(s)));return a}function ze(c,_,y,x,m,e){return x&&!x[C]&&(x=ze(x)),m&&!m[C]&&(m=ze(m,e)),se(function(e,t,i,n){var r,o,a,s=[],p=[],l=t.length,h=e||function(e,t,i){for(var n=0,r=t.length;n<r;n++)oe(e,t[n],i);return i}(_||"*",i.nodeType?[i]:i,[]),u=!c||!e&&_?h:ge(h,s,c,i,n),d=y?m||(e?c:l||x)?[]:t:u;if(y&&y(u,d,i,n),x)for(r=ge(d,p),x(r,[],i,n),o=r.length;o--;)(a=r[o])&&(d[p[o]]=!(u[p[o]]=a));if(e){if(m||c){if(m){for(r=[],o=d.length;o--;)(a=d[o])&&r.push(u[o]=a);m(null,d=[],r,n)}for(o=d.length;o--;)(a=d[o])&&-1<(r=m?I(e,a):s[o])&&(e[r]=!(t[r]=a))}}else d=ge(d===t?d.splice(l,d.length):d),m?m(null,t,d,n):A.apply(t,d)})}function be(e){for(var r,t,i,n=e.length,o=g.relative[e[0].type],a=o||g.relative[" "],s=o?1:0,p=fe(function(e){return e===r},a,!0),l=fe(function(e){return-1<I(r,e)},a,!0),h=[function(e,t,i){var n=!o&&(i||t!==z)||((r=t).nodeType?p(e,t,i):l(e,t,i));return r=null,n}];s<n;s++)if(t=g.relative[e[s].type])h=[fe(ve(h),t)];else{if((t=g.filter[e[s].type].apply(null,e[s].matches))[C]){for(i=++s;i<n&&!g.relative[e[i].type];i++);return ze(1<s&&ve(h),1<s&&me(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(N,"$1"),t,s<i&&be(e.slice(s,i)),i<n&&be(e=e.slice(i)),i<n&&me(e))}h.push(t)}return ve(h)}return xe.prototype=g.filters=g.pseudos,g.setFilters=new xe,_=oe.tokenize=function(e,t){var i,n,r,o,a,s,p,l=v[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],p=g.preFilter;a;){for(o in i&&!(n=U.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=H.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(N," ")}),a=a.slice(i.length)),g.filter)!(n=q[o].exec(a))||p[o]&&!(n=p[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?oe.error(e):v(e,s).slice(0)},u=oe.compile=function(e,t){var i,x,m,f,v,n,r=[],o=[],a=P[e+" "];if(!a){for(t||(t=_(e)),i=t.length;i--;)(a=be(t[i]))[C]?r.push(a):o.push(a);(a=P(e,(x=o,f=0<(m=r).length,v=0<x.length,n=function(e,t,i,n,r){var o,a,s,p=0,l="0",h=e&&[],u=[],d=z,c=e||v&&g.find.TAG("*",r),_=M+=null==d?1:Math.random()||.1,y=c.length;for(r&&(z=t===w||t||r);l!==y&&null!=(o=c[l]);l++){if(v&&o){for(a=0,t||o.ownerDocument===w||(b(o),i=!S);s=x[a++];)if(s(o,t||w,i)){n.push(o);break}r&&(M=_)}f&&((o=!s&&o)&&p--,e&&h.push(o))}if(p+=l,f&&l!==p){for(a=0;s=m[a++];)s(h,u,t,i);if(e){if(0<p)for(;l--;)h[l]||u[l]||(u[l]=G.call(n));u=ge(u)}A.apply(n,u),r&&!e&&0<u.length&&1<p+m.length&&oe.uniqueSort(n)}return r&&(M=_,z=d),h},f?se(n):n))).selector=e}return a},y=oe.select=function(e,t,i,n){var r,o,a,s,p,l="function"==typeof e&&e,h=!n&&_(e=l.selector||e);if(i=i||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&S&&g.relative[o[1].type]){if(!(t=(g.find.ID(a.matches[0].replace($,ee),t)||[])[0]))return i;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=q.needsContext.test(e)?0:o.length;r--&&(a=o[r],!g.relative[s=a.type]);)if((p=g.find[s])&&(n=p(a.matches[0].replace($,ee),Q.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&me(o)))return A.apply(i,n),i;break}}return(l||u(e,h))(n,t,!S,i,!t||Q.test(e)&&ye(t.parentNode)||t),i},c.sortStable=C.split("").sort(k).join("")===C,c.detectDuplicates=!!l,b(),c.sortDetached=pe(function(e){return 1&e.compareDocumentPosition(w.createElement("fieldset"))}),pe(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),c.attributes&&pe(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),pe(function(e){return null==e.getAttribute("disabled")})||le(B,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),oe}(w);C.find=v,C.expr=v.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=v.uniqueSort,C.text=v.getText,C.isXMLDoc=v.isXML,C.contains=v.contains,C.escapeSelector=v.escape;var g=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&C(e).is(i))break;n.push(e)}return n},z=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},b=C.expr.match.needsContext,M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,P=/^.[^:#\[\.,]*$/;function k(e,i,n){return C.isFunction(i)?C.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?C.grep(e,function(e){return e===i!==n}):"string"!=typeof i?C.grep(e,function(e){return-1<r.call(i,e)!==n}):P.test(i)?C.filter(i,e,n):(i=C.filter(i,e),C.grep(e,function(e){return-1<r.call(i,e)!==n&&1===e.nodeType}))}C.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?C.find.matchesSelector(n,e)?[n]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<n;t++)if(C.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)C.find(e,r[t],i);return 1<n?C.uniqueSort(i):i},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&b.test(e)?C(e):e||[],!1).length}});var T,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||T,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):C.isFunction(e)?void 0!==i.ready?i.ready(e):e(C):C.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:G.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),M.test(n[1])&&C.isPlainObject(t))for(n in t)C.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=S.getElementById(n[2]))&&(this[0]=r,this.length=1),this}).prototype=C.fn,T=C(S);var O=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function E(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],a="string"!=typeof e&&C(e);if(!b.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&C.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?r.call(C(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return g(e,"parentNode")},parentsUntil:function(e,t,i){return g(e,"parentNode",i)},next:function(e){return E(e,"nextSibling")},prev:function(e){return E(e,"previousSibling")},nextAll:function(e){return g(e,"nextSibling")},prevAll:function(e){return g(e,"previousSibling")},nextUntil:function(e,t,i){return g(e,"nextSibling",i)},prevUntil:function(e,t,i){return g(e,"previousSibling",i)},siblings:function(e){return z((e.parentNode||{}).firstChild,e)},children:function(e){return z(e.firstChild)},contents:function(e){return e.contentDocument||C.merge([],e.childNodes)}},function(n,r){C.fn[n]=function(e,t){var i=C.map(this,r,e);return"Until"!==n.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=C.filter(t,i)),1<this.length&&(A[n]||C.uniqueSort(i),O.test(n)&&i.reverse()),this.pushStack(i)}});var I=/[^\x20\t\r\n\f]+/g;function B(e){return e}function L(e){throw e}function D(e,t,i){var n;try{e&&C.isFunction(n=e.promise)?n.call(e).done(t).fail(i):e&&C.isFunction(n=e.then)?n.call(e,t,i):t.call(void 0,e)}catch(e){i.call(void 0,e)}}C.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},C.each(e.match(I)||[],function(e,t){i[t]=!0}),i):C.extend({},n);var r,t,o,a,s=[],p=[],l=-1,h=function(){for(a=n.once,o=r=!0;p.length;l=-1)for(t=p.shift();++l<s.length;)!1===s[l].apply(t[0],t[1])&&n.stopOnFalse&&(l=s.length,t=!1);n.memory||(t=!1),r=!1,a&&(s=t?[]:"")},u={add:function(){return s&&(t&&!r&&(l=s.length-1,p.push(t)),function i(e){C.each(e,function(e,t){C.isFunction(t)?n.unique&&u.has(t)||s.push(t):t&&t.length&&"string"!==C.type(t)&&i(t)})}(arguments),t&&!r&&h()),this},remove:function(){return C.each(arguments,function(e,t){for(var i;-1<(i=C.inArray(t,s,i));)s.splice(i,1),i<=l&&l--}),this},has:function(e){return e?-1<C.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=p=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=p=[],t||r||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],p.push(t),r||h()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},C.extend({Deferred:function(e){var o=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return C.Deferred(function(n){C.each(o,function(e,t){var i=C.isFunction(r[t[4]])&&r[t[4]];s[t[1]](function(){var e=i&&i.apply(this,arguments);e&&C.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){var p=0;function l(r,o,a,s){return function(){var i=this,n=arguments,e=function(){var e,t;if(!(r<p)){if((e=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,C.isFunction(t)?s?t.call(e,l(p,o,B,s),l(p,o,L,s)):(p++,t.call(e,l(p,o,B,s),l(p,o,L,s),l(p,o,B,o.notifyWith))):(a!==B&&(i=void 0,n=[e]),(s||o.resolveWith)(i,n))}},t=s?e:function(){try{e()}catch(e){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(e,t.stackTrace),p<=r+1&&(a!==L&&(i=void 0,n=[e]),o.rejectWith(i,n))}};r?t():(C.Deferred.getStackHook&&(t.stackTrace=C.Deferred.getStackHook()),w.setTimeout(t))}}return C.Deferred(function(e){o[0][3].add(l(0,e,C.isFunction(n)?n:B,e.notifyWith)),o[1][3].add(l(0,e,C.isFunction(t)?t:B)),o[2][3].add(l(0,e,C.isFunction(i)?i:L))}).promise()},promise:function(e){return null!=e?C.extend(e,a):a}},s={};return C.each(o,function(e,t){var i=t[2],n=t[5];a[t[1]]=i.add,n&&i.add(function(){r=n},o[3-e][2].disable,o[0][2].lock),i.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=i.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var i=arguments.length,t=i,n=Array(t),r=s.call(arguments),o=C.Deferred(),a=function(t){return function(e){n[t]=this,r[t]=1<arguments.length?s.call(arguments):e,--i||o.resolveWith(n,r)}};if(i<=1&&(D(e,o.done(a(t)).resolve,o.reject),"pending"===o.state()||C.isFunction(r[t]&&r[t].then)))return o.then();for(;t--;)D(r[t],a(t),o.reject);return o.promise()}});var R=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&R.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){w.setTimeout(function(){throw e})};var F=C.Deferred();function j(){S.removeEventListener("DOMContentLoaded",j),w.removeEventListener("load",j),C.ready()}C.fn.ready=function(e){return F.then(e).catch(function(e){C.readyException(e)}),this},C.extend({isReady:!1,readyWait:1,holdReady:function(e){e?C.readyWait++:C.ready(!0)},ready:function(e){(!0===e?--C.readyWait:C.isReady)||((C.isReady=!0)!==e&&0<--C.readyWait||F.resolveWith(S,[C]))}}),C.ready.then=F.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?w.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",j),w.addEventListener("load",j));var N=function(e,t,i,n,r,o,a){var s=0,p=e.length,l=null==i;if("object"===C.type(i))for(s in r=!0,i)N(e,t,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,C.isFunction(n)||(a=!0),l&&(t=a?(t.call(e,n),null):(l=t,function(e,t,i){return l.call(C(e),i)})),t))for(;s<p;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return r?e:l?t.call(e):p?t(e[0],i):o},U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function H(){this.expando=C.expando+H.uid++}H.uid=1,H.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[C.camelCase(t)]=i;else for(n in t)r[C.camelCase(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][C.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=C.isArray(t)?t.map(C.camelCase):(t=C.camelCase(t))in n?[t]:t.match(I)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||C.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var V=new H,W=new H,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/[A-Z]/g;function Y(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(q,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:X.test(r)?JSON.parse(r):r)}catch(e){}W.set(e,t,i)}else i=void 0;return i}C.extend({hasData:function(e){return W.hasData(e)||V.hasData(e)},data:function(e,t,i){return W.access(e,t,i)},removeData:function(e,t){W.remove(e,t)},_data:function(e,t,i){return V.access(e,t,i)},_removeData:function(e,t){V.remove(e,t)}}),C.fn.extend({data:function(i,e){var t,n,r,o=this[0],a=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){W.set(this,i)}):N(this,function(e){var t;if(o&&void 0===e){if(void 0!==(t=W.get(o,i)))return t;if(void 0!==(t=Y(o,i)))return t}else this.each(function(){W.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=W.get(o),1===o.nodeType&&!V.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&(0===(n=a[t].name).indexOf("data-")&&(n=C.camelCase(n.slice(5)),Y(o,n,r[n])));V.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){W.remove(this,e)})}}),C.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=V.get(e,t),i&&(!n||C.isArray(i)?n=V.access(e,t,C.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=C.queue(e,t),n=i.length,r=i.shift(),o=C._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,function(){C.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return V.get(e,i)||V.access(e,i,{empty:C.Callbacks("once memory").add(function(){V.remove(e,[t+"queue",i])})})}}),C.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?C.queue(this[0],t):void 0===i?this:this.each(function(){var e=C.queue(this,t,i);C._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&C.dequeue(this,t)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=C.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=V.get(o[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var Z=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,K=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i"),J=["Top","Right","Bottom","Left"],Q=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&C.contains(e.ownerDocument,e)&&"none"===C.css(e,"display")},$=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=i.apply(e,n||[]),t)e.style[o]=a[o];return r};function ee(e,t,i,n){var r,o=1,a=20,s=n?function(){return n.cur()}:function(){return C.css(e,t,"")},p=s(),l=i&&i[3]||(C.cssNumber[t]?"":"px"),h=(C.cssNumber[t]||"px"!==l&&+p)&&K.exec(C.css(e,t));if(h&&h[3]!==l)for(l=l||h[3],i=i||[],h=+p||1;h/=o=o||".5",C.style(e,t,h+l),o!==(o=s()/p)&&1!==o&&--a;);return i&&(h=+h||+p||0,r=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=h,n.end=r)),r}var te={};function ie(e,t){for(var i,n,r=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(i=n.style.display,t?("none"===i&&(r[o]=V.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&Q(n)&&(r[o]=(u=l=p=void 0,l=(s=n).ownerDocument,h=s.nodeName,(u=te[h])||(p=l.body.appendChild(l.createElement(h)),u=C.css(p,"display"),p.parentNode.removeChild(p),"none"===u&&(u="block"),te[h]=u)))):"none"!==i&&(r[o]="none",V.set(n,"display",i)));var s,p,l,h,u;for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}C.fn.extend({show:function(){return ie(this,!0)},hide:function(){return ie(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Q(this)?C(this).show():C(this).hide()})}});var ne=/^(?:checkbox|radio)$/i,re=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,oe=/^$|\/(?:java|ecma)script/i,ae={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function se(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C.nodeName(e,t)?C.merge([e],i):i}function pe(e,t){for(var i=0,n=e.length;i<n;i++)V.set(e[i],"globalEval",!t||V.get(t[i],"globalEval"))}ae.optgroup=ae.option,ae.tbody=ae.tfoot=ae.colgroup=ae.caption=ae.thead,ae.th=ae.td;var le,he,ue=/<|&#?\w+;/;function de(e,t,i,n,r){for(var o,a,s,p,l,h,u=t.createDocumentFragment(),d=[],c=0,_=e.length;c<_;c++)if((o=e[c])||0===o)if("object"===C.type(o))C.merge(d,o.nodeType?[o]:o);else if(ue.test(o)){for(a=a||u.appendChild(t.createElement("div")),s=(re.exec(o)||["",""])[1].toLowerCase(),p=ae[s]||ae._default,a.innerHTML=p[1]+C.htmlPrefilter(o)+p[2],h=p[0];h--;)a=a.lastChild;C.merge(d,a.childNodes),(a=u.firstChild).textContent=""}else d.push(t.createTextNode(o));for(u.textContent="",c=0;o=d[c++];)if(n&&-1<C.inArray(o,n))r&&r.push(o);else if(l=C.contains(o.ownerDocument,o),a=se(u.appendChild(o),"script"),l&&pe(a),i)for(h=0;o=a[h++];)oe.test(o.type||"")&&i.push(o);return u}le=S.createDocumentFragment().appendChild(S.createElement("div")),(he=S.createElement("input")).setAttribute("type","radio"),he.setAttribute("checked","checked"),he.setAttribute("name","t"),le.appendChild(he),x.checkClone=le.cloneNode(!0).cloneNode(!0).lastChild.checked,le.innerHTML="<textarea>x</textarea>",x.noCloneChecked=!!le.cloneNode(!0).lastChild.defaultValue;var ce=S.documentElement,_e=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function me(){return!0}function fe(){return!1}function ve(){try{return S.activeElement}catch(e){}}function ge(e,t,i,n,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof i&&(n=n||i,i=void 0),t)ge(e,s,i,n,t[s],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=fe;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return C().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=C.guid++)),e.each(function(){C.event.add(this,t,r,n,i)})}C.event={global:{},add:function(t,e,i,n,r){var o,a,s,p,l,h,u,d,c,_,y,x=V.get(t);if(x)for(i.handler&&(i=(o=i).handler,r=o.selector),r&&C.find.matchesSelector(ce,r),i.guid||(i.guid=C.guid++),(p=x.events)||(p=x.events={}),(a=x.handle)||(a=x.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(I)||[""]).length;l--;)c=y=(s=xe.exec(e[l])||[])[1],_=(s[2]||"").split(".").sort(),c&&(u=C.event.special[c]||{},c=(r?u.delegateType:u.bindType)||c,u=C.event.special[c]||{},h=C.extend({type:c,origType:y,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:_.join(".")},o),(d=p[c])||((d=p[c]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,_,a)||t.addEventListener&&t.addEventListener(c,a)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),C.event.global[c]=!0)},remove:function(e,t,i,n,r){var o,a,s,p,l,h,u,d,c,_,y,x=V.hasData(e)&&V.get(e);if(x&&(p=x.events)){for(l=(t=(t||"").match(I)||[""]).length;l--;)if(c=y=(s=xe.exec(t[l])||[])[1],_=(s[2]||"").split(".").sort(),c){for(u=C.event.special[c]||{},d=p[c=(n?u.delegateType:u.bindType)||c]||[],s=s[2]&&new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)h=d[o],!r&&y!==h.origType||i&&i.guid!==h.guid||s&&!s.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(o,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(e,h));a&&!d.length&&(u.teardown&&!1!==u.teardown.call(e,_,x.handle)||C.removeEvent(e,c,x.handle),delete p[c])}else for(c in p)C.event.remove(e,c+t[l],i,n,!0);C.isEmptyObject(p)&&V.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a,s=C.event.fix(e),p=new Array(arguments.length),l=(V.get(this,"events")||{})[s.type]||[],h=C.event.special[s.type]||{};for(p[0]=s,t=1;t<arguments.length;t++)p[t]=arguments[t];if(s.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,s)){for(a=C.event.handlers.call(this,s,l),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(n=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,p))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,r,o,a,s=[],p=t.delegateCount,l=e.target;if(p&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},i=0;i<p;i++)void 0===a[r=(n=t[i]).selector+" "]&&(a[r]=n.needsContext?-1<C(r,this).index(l):C.find(r,this,null,[l]).length),a[r]&&o.push(n);o.length&&s.push({elem:l,handlers:o})}return l=this,p<t.length&&s.push({elem:l,handlers:t.slice(p)}),s},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:C.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ve()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ve()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&C.nodeName(this,"input"))return this.click(),!1},_default:function(e){return C.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},C.Event=function(e,t){return this instanceof C.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?me:fe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||C.now(),void(this[C.expando]=!0)):new C.Event(e,t)},C.Event.prototype={constructor:C.Event,isDefaultPrevented:fe,isPropagationStopped:fe,isImmediatePropagationStopped:fe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},C.event.addProp),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){C.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||C.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),C.fn.extend({on:function(e,t,i,n){return ge(this,e,t,i,n)},one:function(e,t,i,n){return ge(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,C(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=fe),this.each(function(){C.event.remove(this,e,i,t)});for(r in e)this.off(r,t,e[r]);return this}});var ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,be=/<script|<style|<link/i,we=/checked\s*(?:[^=]|=\s*.checked.)/i,Se=/^true\/(.*)/,Ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return C.nodeName(e,"table")&&C.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ke(e){var t=Se.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Te(e,t){var i,n,r,o,a,s,p,l;if(1===t.nodeType){if(V.hasData(e)&&(o=V.access(e),a=V.set(t,o),l=o.events))for(r in delete a.handle,a.events={},l)for(i=0,n=l[r].length;i<n;i++)C.event.add(t,r,l[r][i]);W.hasData(e)&&(s=W.access(e),p=C.extend({},s),W.set(t,p))}}function Ge(i,n,r,o){n=y.apply([],n);var e,t,a,s,p,l,h=0,u=i.length,d=u-1,c=n[0],_=C.isFunction(c);if(_||1<u&&"string"==typeof c&&!x.checkClone&&we.test(c))return i.each(function(e){var t=i.eq(e);_&&(n[0]=c.call(this,e,t.html())),Ge(t,n,r,o)});if(u&&(t=(e=de(n,i[0].ownerDocument,!1,i,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=C.map(se(e,"script"),Pe)).length;h<u;h++)p=e,h!==d&&(p=C.clone(p,!0,!0),s&&C.merge(a,se(p,"script"))),r.call(i[h],p,h);if(s)for(l=a[a.length-1].ownerDocument,C.map(a,ke),h=0;h<s;h++)p=a[h],oe.test(p.type||"")&&!V.access(p,"globalEval")&&C.contains(l,p)&&(p.src?C._evalUrl&&C._evalUrl(p.src):m(p.textContent.replace(Ce,""),l))}return i}function Oe(e,t,i){for(var n,r=t?C.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||C.cleanData(se(n)),n.parentNode&&(i&&C.contains(n.ownerDocument,n)&&pe(se(n,"script")),n.parentNode.removeChild(n));return e}C.extend({htmlPrefilter:function(e){return e.replace(ze,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,s,p,l,h=e.cloneNode(!0),u=C.contains(e.ownerDocument,e);if(!(x.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(a=se(h),n=0,r=(o=se(e)).length;n<r;n++)s=o[n],p=a[n],void 0,"input"===(l=p.nodeName.toLowerCase())&&ne.test(s.type)?p.checked=s.checked:"input"!==l&&"textarea"!==l||(p.defaultValue=s.defaultValue);if(t)if(i)for(o=o||se(e),a=a||se(h),n=0,r=o.length;n<r;n++)Te(o[n],a[n]);else Te(e,h);return 0<(a=se(h,"script")).length&&pe(a,!u&&se(e,"script")),h},cleanData:function(e){for(var t,i,n,r=C.event.special,o=0;void 0!==(i=e[o]);o++)if(U(i)){if(t=i[V.expando]){if(t.events)for(n in t.events)r[n]?C.event.remove(i,n):C.removeEvent(i,n,t.handle);i[V.expando]=void 0}i[W.expando]&&(i[W.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return N(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ge(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return Ge(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ge(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ge(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return N(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!be.test(e)&&!ae[(re.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(C.cleanData(se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return Ge(this,arguments,function(e){var t=this.parentNode;C.inArray(this,i)<0&&(C.cleanData(se(this)),t&&t.replaceChild(e,this))},i)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){C.fn[e]=function(e){for(var t,i=[],n=C(e),r=n.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),C(n[o])[a](t),p.apply(i,t.get());return this.pushStack(i)}});var Ae=/^margin/,Ee=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=w),t.getComputedStyle(e)};function Be(e,t,i){var n,r,o,a,s=e.style;return(i=i||Ie(e))&&(""!==(a=i.getPropertyValue(t)||i[t])||C.contains(e.ownerDocument,e)||(a=C.style(e,t)),!x.pixelMarginRight()&&Ee.test(a)&&Ae.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Le(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",ce.appendChild(o);var e=w.getComputedStyle(a);t="1%"!==e.top,r="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",n="4px"===e.marginRight,ce.removeChild(o),a=null}}var t,i,n,r,o=S.createElement("div"),a=S.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",x.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),C.extend(x,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),n},reliableMarginLeft:function(){return e(),r}}))}();var De=/^(none|table(?!-c[ea]).+)/,Re={position:"absolute",visibility:"hidden",display:"block"},Fe={letterSpacing:"0",fontWeight:"400"},je=["Webkit","Moz","ms"],Ne=S.createElement("div").style;function Ue(e){if(e in Ne)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=je.length;i--;)if((e=je[i]+t)in Ne)return e}function He(e,t,i){var n=K.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function Ve(e,t,i,n,r){var o,a=0;for(o=i===(n?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===i&&(a+=C.css(e,i+J[o],!0,r)),n?("content"===i&&(a-=C.css(e,"padding"+J[o],!0,r)),"margin"!==i&&(a-=C.css(e,"border"+J[o]+"Width",!0,r))):(a+=C.css(e,"padding"+J[o],!0,r),"padding"!==i&&(a+=C.css(e,"border"+J[o]+"Width",!0,r)));return a}function We(e,t,i){var n,r=!0,o=Ie(e),a="border-box"===C.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(n=e.getBoundingClientRect()[t]),n<=0||null==n){if(((n=Be(e,t,o))<0||null==n)&&(n=e.style[t]),Ee.test(n))return n;r=a&&(x.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+Ve(e,t,i||(a?"border":"content"),r,o)+"px"}function Xe(e,t,i,n,r){return new Xe.prototype.init(e,t,i,n,r)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Be(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=C.camelCase(t),p=e.style;return t=C.cssProps[s]||(C.cssProps[s]=Ue(s)||s),a=C.cssHooks[t]||C.cssHooks[s],void 0===i?a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:p[t]:("string"===(o=typeof i)&&(r=K.exec(i))&&r[1]&&(i=ee(e,t,r),o="number"),void(null!=i&&i==i&&("number"===o&&(i+=r&&r[3]||(C.cssNumber[s]?"":"px")),x.clearCloneStyle||""!==i||0!==t.indexOf("background")||(p[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(p[t]=i))))}},css:function(e,t,i,n){var r,o,a,s=C.camelCase(t);return t=C.cssProps[s]||(C.cssProps[s]=Ue(s)||s),(a=C.cssHooks[t]||C.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,i)),void 0===r&&(r=Be(e,t,n)),"normal"===r&&t in Fe&&(r=Fe[t]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),C.each(["height","width"],function(e,a){C.cssHooks[a]={get:function(e,t,i){if(t)return!De.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?We(e,a,i):$(e,Re,function(){return We(e,a,i)})},set:function(e,t,i){var n,r=i&&Ie(e),o=i&&Ve(e,a,i,"border-box"===C.css(e,"boxSizing",!1,r),r);return o&&(n=K.exec(t))&&"px"!==(n[3]||"px")&&(e.style[a]=t,t=C.css(e,a)),He(0,t,o)}}}),C.cssHooks.marginLeft=Le(x.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-$(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(r,o){C.cssHooks[r+o]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+J[t]+o]=n[t]||n[t-2]||n[0];return i}},Ae.test(r)||(C.cssHooks[r+o].set=He)}),C.fn.extend({css:function(e,t){return N(this,function(e,t,i){var n,r,o={},a=0;if(C.isArray(t)){for(n=Ie(e),r=t.length;a<r;a++)o[t[a]]=C.css(e,t[a],!1,n);return o}return void 0!==i?C.style(e,t,i):C.css(e,t)},e,t,1<arguments.length)}}),((C.Tween=Xe).prototype={constructor:Xe,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(C.cssNumber[i]?"":"px")},cur:function(){var e=Xe.propHooks[this.prop];return e&&e.get?e.get(this):Xe.propHooks._default.get(this)},run:function(e){var t,i=Xe.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Xe.propHooks._default.set(this),this}}).init.prototype=Xe.prototype,(Xe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Xe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=Xe.prototype.init,C.fx.step={};var qe,Ye,Ze,Ke,Je=/^(?:toggle|show|hide)$/,Qe=/queueHooks$/;function $e(){Ye&&(w.requestAnimationFrame($e),C.fx.tick())}function et(){return w.setTimeout(function(){qe=void 0}),qe=C.now()}function tt(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=J[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function it(e,t,i){for(var n,r=(nt.tweeners[t]||[]).concat(nt.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function nt(o,e,t){var i,a,n=0,r=nt.prefilters.length,s=C.Deferred().always(function(){delete p.elem}),p=function(){if(a)return!1;for(var e=qe||et(),t=Math.max(0,l.startTime+l.duration-e),i=1-(t/l.duration||0),n=0,r=l.tweens.length;n<r;n++)l.tweens[n].run(i);return s.notifyWith(o,[l,i,t]),i<1&&r?t:(s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},t),originalProperties:e,originalOptions:t,startTime:qe||et(),duration:t.duration,tweens:[],createTween:function(e,t){var i=C.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var t=0,i=e?l.tweens.length:0;if(a)return this;for(a=!0;t<i;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),h=l.props;for(function(e,t){var i,n,r,o,a;for(i in e)if(r=t[n=C.camelCase(i)],o=e[i],C.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=C.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=r);else t[n]=r}(h,l.opts.specialEasing);n<r;n++)if(i=nt.prefilters[n].call(l,o,h,l.opts))return C.isFunction(i.stop)&&(C._queueHooks(l.elem,l.opts.queue).stop=C.proxy(i.stop,i)),i;return C.map(h,it,l),C.isFunction(l.opts.start)&&l.opts.start.call(o,l),C.fx.timer(C.extend(p,{elem:o,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}C.Animation=C.extend(nt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ee(i.elem,e,K.exec(t),i),i}]},tweener:function(e,t){for(var i,n=0,r=(e=C.isFunction(e)?(t=e,["*"]):e.match(I)).length;n<r;n++)i=e[n],nt.tweeners[i]=nt.tweeners[i]||[],nt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,o,a,s,p,l,h,u="width"in t||"height"in t,d=this,c={},_=e.style,y=e.nodeType&&Q(e),x=V.get(e,"fxshow");for(n in i.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[n],Je.test(r)){if(delete t[n],o=o||"toggle"===r,r===(y?"hide":"show")){if("show"!==r||!x||void 0===x[n])continue;y=!0}c[n]=x&&x[n]||C.style(e,n)}if((p=!C.isEmptyObject(t))||!C.isEmptyObject(c))for(n in u&&1===e.nodeType&&(i.overflow=[_.overflow,_.overflowX,_.overflowY],null==(l=x&&x.display)&&(l=V.get(e,"display")),"none"===(h=C.css(e,"display"))&&(l?h=l:(ie([e],!0),l=e.style.display||l,h=C.css(e,"display"),ie([e]))),("inline"===h||"inline-block"===h&&null!=l)&&"none"===C.css(e,"float")&&(p||(d.done(function(){_.display=l}),null==l&&(h=_.display,l="none"===h?"":h)),_.display="inline-block")),i.overflow&&(_.overflow="hidden",d.always(function(){_.overflow=i.overflow[0],_.overflowX=i.overflow[1],_.overflowY=i.overflow[2]})),p=!1,c)p||(x?"hidden"in x&&(y=x.hidden):x=V.access(e,"fxshow",{display:l}),o&&(x.hidden=!y),y&&ie([e],!0),d.done(function(){for(n in y||ie([e]),V.remove(e,"fxshow"),c)C.style(e,n,c[n])})),p=it(y?x[n]:0,n,d),n in x||(x[n]=p.start,y&&(p.end=p.start,p.start=0))}],prefilter:function(e,t){t?nt.prefilters.unshift(e):nt.prefilters.push(e)}}),C.speed=function(e,t,i){var n=e&&"object"==typeof e?C.extend({},e):{complete:i||!i&&t||C.isFunction(e)&&e,duration:e,easing:i&&t||t&&!C.isFunction(t)&&t};return C.fx.off||S.hidden?n.duration=0:"number"!=typeof n.duration&&(n.duration in C.fx.speeds?n.duration=C.fx.speeds[n.duration]:n.duration=C.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){C.isFunction(n.old)&&n.old.call(this),n.queue&&C.dequeue(this,n.queue)},n},C.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Q).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){var r=C.isEmptyObject(t),o=C.speed(e,i,n),a=function(){var e=nt(this,C.extend({},t),o);(r||V.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=C.timers,n=V.get(this);if(t)n[t]&&n[t].stop&&a(n[t]);else for(t in n)n[t]&&n[t].stop&&Qe.test(t)&&a(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||C.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=V.get(this),i=t[a+"queue"],n=t[a+"queueHooks"],r=C.timers,o=i?i.length:0;for(t.finish=!0,C.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),C.each(["toggle","show","hide"],function(e,n){var r=C.fn[n];C.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(tt(n,!0),e,t,i)}}),C.each({slideDown:tt("show"),slideUp:tt("hide"),slideToggle:tt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){C.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),C.timers=[],C.fx.tick=function(){var e,t=0,i=C.timers;for(qe=C.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||C.fx.stop(),qe=void 0},C.fx.timer=function(e){C.timers.push(e),e()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){Ye||(Ye=w.requestAnimationFrame?w.requestAnimationFrame($e):w.setInterval(C.fx.tick,C.fx.interval))},C.fx.stop=function(){w.cancelAnimationFrame?w.cancelAnimationFrame(Ye):w.clearInterval(Ye),Ye=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(n,e){return n=C.fx&&C.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){var i=w.setTimeout(e,n);t.stop=function(){w.clearTimeout(i)}})},Ze=S.createElement("input"),Ke=S.createElement("select").appendChild(S.createElement("option")),Ze.type="checkbox",x.checkOn=""!==Ze.value,x.optSelected=Ke.selected,(Ze=S.createElement("input")).value="t",Ze.type="radio",x.radioValue="t"===Ze.value;var rt,ot=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return N(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?C.prop(e,t,i):(1===o&&C.isXMLDoc(e)||(r=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?rt:void 0)),void 0!==i?null===i?void C.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=C.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!x.radioValue&&"radio"===t&&C.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(I);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),rt={set:function(e,t,i){return!1===t?C.removeAttr(e,i):e.setAttribute(i,i),i}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ot[t]||C.find.attr;ot[t]=function(e,t,i){var n,r,o=t.toLowerCase();return i||(r=ot[o],ot[o]=n,n=null!=a(e,t,i)?o:null,ot[o]=r),n}});var at=/^(?:input|select|textarea|button)$/i,st=/^(?:a|area)$/i;function pt(e){return(e.match(I)||[]).join(" ")}function lt(e){return e.getAttribute&&e.getAttribute("class")||""}C.fn.extend({prop:function(e,t){return N(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,r=C.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):at.test(e.nodeName)||st.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),x.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(t){var e,i,n,r,o,a,s,p=0;if(C.isFunction(t))return this.each(function(e){C(this).addClass(t.call(this,e,lt(this)))});if("string"==typeof t&&t)for(e=t.match(I)||[];i=this[p++];)if(r=lt(i),n=1===i.nodeType&&" "+pt(r)+" "){for(a=0;o=e[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(s=pt(n))&&i.setAttribute("class",s)}return this},removeClass:function(t){var e,i,n,r,o,a,s,p=0;if(C.isFunction(t))return this.each(function(e){C(this).removeClass(t.call(this,e,lt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(I)||[];i=this[p++];)if(r=lt(i),n=1===i.nodeType&&" "+pt(r)+" "){for(a=0;o=e[a++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");r!==(s=pt(n))&&i.setAttribute("class",s)}return this},toggleClass:function(r,t){var o=typeof r;return"boolean"==typeof t&&"string"===o?t?this.addClass(r):this.removeClass(r):C.isFunction(r)?this.each(function(e){C(this).toggleClass(r.call(this,e,lt(this),t),t)}):this.each(function(){var e,t,i,n;if("string"===o)for(t=0,i=C(this),n=r.match(I)||[];e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==r&&"boolean"!==o||((e=lt(this))&&V.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":V.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+pt(lt(i))+" ").indexOf(t))return!0;return!1}});var ht=/\r/g;C.fn.extend({val:function(i){var n,e,r,t=this[0];return arguments.length?(r=C.isFunction(i),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?i.call(this,e,C(this).val()):i)?t="":"number"==typeof t?t+="":C.isArray(t)&&(t=C.map(t,function(e){return null==e?"":e+""})),(n=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):t?(n=C.valHooks[t.type]||C.valHooks[t.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ht,""):null==e?"":e:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:pt(C.text(e))}},select:{get:function(e){var t,i,n,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],p=a?o+1:r.length;for(n=o<0?p:a?o:0;n<p;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!C.nodeName(i.parentNode,"optgroup"))){if(t=C(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,o=C.makeArray(t),a=r.length;a--;)((n=r[a]).selected=-1<C.inArray(C.valHooks.option.get(n),o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){if(C.isArray(t))return e.checked=-1<C.inArray(C(e).val(),t)}},x.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ut=/^(?:focusinfocus|focusoutblur)$/;C.extend(C.event,{trigger:function(e,t,i,n){var r,o,a,s,p,l,h,u=[i||S],d=_.call(e,"type")?e.type:e,c=_.call(e,"namespace")?e.namespace.split("."):[];if(o=a=i=i||S,3!==i.nodeType&&8!==i.nodeType&&!ut.test(d+C.event.triggered)&&(-1<d.indexOf(".")&&(d=(c=d.split(".")).shift(),c.sort()),p=d.indexOf(":")<0&&"on"+d,(e=e[C.expando]?e:new C.Event(d,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=c.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+c.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:C.makeArray(t,[e]),h=C.event.special[d]||{},n||!h.trigger||!1!==h.trigger.apply(i,t))){if(!n&&!h.noBubble&&!C.isWindow(i)){for(s=h.delegateType||d,ut.test(s+d)||(o=o.parentNode);o;o=o.parentNode)u.push(o),a=o;a===(i.ownerDocument||S)&&u.push(a.defaultView||a.parentWindow||w)}for(r=0;(o=u[r++])&&!e.isPropagationStopped();)e.type=1<r?s:h.bindType||d,(l=(V.get(o,"events")||{})[e.type]&&V.get(o,"handle"))&&l.apply(o,t),(l=p&&o[p])&&l.apply&&U(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,n||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),t)||!U(i)||p&&C.isFunction(i[d])&&!C.isWindow(i)&&((a=i[p])&&(i[p]=null),i[C.event.triggered=d](),C.event.triggered=void 0,a&&(i[p]=a)),e.result}},simulate:function(e,t,i){var n=C.extend(new C.Event,i,{type:e,isSimulated:!0});C.event.trigger(n,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return C.event.trigger(e,t,i,!0)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){C.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.focusin="onfocusin"in w,x.focusin||C.each({focus:"focusin",blur:"focusout"},function(i,n){var r=function(e){C.event.simulate(n,e.target,C.event.fix(e))};C.event.special[n]={setup:function(){var e=this.ownerDocument||this,t=V.access(e,n);t||e.addEventListener(i,r,!0),V.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=V.access(e,n)-1;t?V.access(e,n,t):(e.removeEventListener(i,r,!0),V.remove(e,n))}}});var dt=w.location,ct=C.now(),_t=/\?/;C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var yt=/\[\]$/,xt=/\r?\n/g,mt=/^(?:submit|button|image|reset|file)$/i,ft=/^(?:input|select|textarea|keygen)/i;function vt(i,e,n,r){var t;if(C.isArray(e))C.each(e,function(e,t){n||yt.test(i)?r(i,t):vt(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,n,r)});else if(n||"object"!==C.type(e))r(i,e);else for(t in e)vt(i+"["+t+"]",e[t],n,r)}C.param=function(e,t){var i,n=[],r=function(e,t){var i=C.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(C.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){r(this.name,this.value)});else for(i in e)vt(i,e[i],t,r);return n.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&ft.test(this.nodeName)&&!mt.test(e)&&(this.checked||!ne.test(e))}).map(function(e,t){var i=C(this).val();return null==i?null:C.isArray(i)?C.map(i,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:i.replace(xt,"\r\n")}}).get()}});var gt=/%20/g,zt=/#.*$/,bt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,St=/^(?:GET|HEAD)$/,Ct=/^\/\//,Mt={},Pt={},kt="*/".concat("*"),Tt=S.createElement("a");function Gt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(I)||[];if(C.isFunction(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function Ot(t,r,o,a){var s={},p=t===Pt;function l(e){var n;return s[e]=!0,C.each(t[e]||[],function(e,t){var i=t(r,o,a);return"string"!=typeof i||p||s[i]?p?!(n=i):void 0:(r.dataTypes.unshift(i),l(i),!1)}),n}return l(r.dataTypes[0])||!s["*"]&&l("*")}function At(e,t){var i,n,r=C.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&C.extend(!0,e,n),e}Tt.href=dt.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(dt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?At(At(e,C.ajaxSettings),t):At(C.ajaxSettings,e)},ajaxPrefilter:Gt(Mt),ajaxTransport:Gt(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var h,u,d,i,c,n,_,y,r,o,x=C.ajaxSetup({},t),m=x.context||x,f=x.context&&(m.nodeType||m.jquery)?C(m):C.event,v=C.Deferred(),g=C.Callbacks("once memory"),z=x.statusCode||{},a={},s={},p="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(_){if(!i)for(i={};t=wt.exec(d);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return _?d:null},setRequestHeader:function(e,t){return null==_&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==_&&(x.mimeType=e),this},statusCode:function(e){var t;if(e)if(_)b.always(e[b.status]);else for(t in e)z[t]=[z[t],e[t]];return this},abort:function(e){var t=e||p;return h&&h.abort(t),l(0,t),this}};if(v.promise(b),x.url=((e||x.url||dt.href)+"").replace(Ct,dt.protocol+"//"),x.type=t.method||t.type||x.method||x.type,x.dataTypes=(x.dataType||"*").toLowerCase().match(I)||[""],null==x.crossDomain){n=S.createElement("a");try{n.href=x.url,n.href=n.href,x.crossDomain=Tt.protocol+"//"+Tt.host!=n.protocol+"//"+n.host}catch(e){x.crossDomain=!0}}if(x.data&&x.processData&&"string"!=typeof x.data&&(x.data=C.param(x.data,x.traditional)),Ot(Mt,x,t,b),_)return b;for(r in(y=C.event&&x.global)&&0==C.active++&&C.event.trigger("ajaxStart"),x.type=x.type.toUpperCase(),x.hasContent=!St.test(x.type),u=x.url.replace(zt,""),x.hasContent?x.data&&x.processData&&0===(x.contentType||"").indexOf("application/x-www-form-urlencoded")&&(x.data=x.data.replace(gt,"+")):(o=x.url.slice(u.length),x.data&&(u+=(_t.test(u)?"&":"?")+x.data,delete x.data),!1===x.cache&&(u=u.replace(bt,"$1"),o=(_t.test(u)?"&":"?")+"_="+ct+++o),x.url=u+o),x.ifModified&&(C.lastModified[u]&&b.setRequestHeader("If-Modified-Since",C.lastModified[u]),C.etag[u]&&b.setRequestHeader("If-None-Match",C.etag[u])),(x.data&&x.hasContent&&!1!==x.contentType||t.contentType)&&b.setRequestHeader("Content-Type",x.contentType),b.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+kt+"; q=0.01":""):x.accepts["*"]),x.headers)b.setRequestHeader(r,x.headers[r]);if(x.beforeSend&&(!1===x.beforeSend.call(m,b,x)||_))return b.abort();if(p="abort",g.add(x.complete),b.done(x.success),b.fail(x.error),h=Ot(Pt,x,t,b)){if(b.readyState=1,y&&f.trigger("ajaxSend",[b,x]),_)return b;x.async&&0<x.timeout&&(c=w.setTimeout(function(){b.abort("timeout")},x.timeout));try{_=!1,h.send(a,l)}catch(e){if(_)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,i,n){var r,o,a,s,p,l=t;_||(_=!0,c&&w.clearTimeout(c),h=void 0,d=n||"",b.readyState=0<e?4:0,r=200<=e&&e<300||304===e,i&&(s=function(e,t,i){for(var n,r,o,a,s=e.contents,p=e.dataTypes;"*"===p[0];)p.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){p.unshift(r);break}if(p[0]in i)o=p[0];else{for(r in i){if(!p[0]||e.converters[r+" "+p[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==p[0]&&p.unshift(o),i[o]}(x,b,i)),s=function(e,t,i,n){var r,o,a,s,p,l={},h=e.dataTypes.slice();if(h[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=h.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!p&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),p=o,o=h.shift())if("*"===o)o=p;else if("*"!==p&&p!==o){if(!(a=l[p+" "+o]||l["* "+o]))for(r in l)if((s=r.split(" "))[1]===o&&(a=l[p+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[r]:!0!==l[r]&&(o=s[0],h.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+p+" to "+o}}}return{state:"success",data:t}}(x,s,b,r),r?(x.ifModified&&((p=b.getResponseHeader("Last-Modified"))&&(C.lastModified[u]=p),(p=b.getResponseHeader("etag"))&&(C.etag[u]=p)),204===e||"HEAD"===x.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,r=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),b.status=e,b.statusText=(t||l)+"",r?v.resolveWith(m,[o,l,b]):v.rejectWith(m,[b,l,a]),b.statusCode(z),z=void 0,y&&f.trigger(r?"ajaxSuccess":"ajaxError",[b,x,r?o:a]),g.fireWith(m,[b,l]),y&&(f.trigger("ajaxComplete",[b,x]),--C.active||C.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,i){return C.get(e,t,i,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,r){C[r]=function(e,t,i,n){return C.isFunction(t)&&(n=n||i,i=t,t=void 0),C.ajax(C.extend({url:e,type:r,dataType:n,data:t,success:i},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(C.isFunction(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return C.isFunction(i)?this.each(function(e){C(this).wrapInner(i.call(this,e))}):this.each(function(){var e=C(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=C.isFunction(t);return this.each(function(e){C(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Et={0:200,1223:204},It=C.ajaxSettings.xhr();x.cors=!!It&&"withCredentials"in It,x.ajax=It=!!It,C.ajaxTransport(function(r){var o,a;if(x.cors||It&&!r.crossDomain)return{send:function(e,t){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);o=function(e){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Et[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=o("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&w.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),C.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(i){var n,r;if(i.crossDomain)return{send:function(e,t){n=C("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(n[0])},abort:function(){r&&r()}}});var Bt,Lt=[],Dt=/(=)\?(?=&|$)|\?\?/;function Rt(e){return C.isWindow(e)?e:9===e.nodeType&&e.defaultView}C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||C.expando+"_"+ct++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,o,a=!1!==e.jsonp&&(Dt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Dt,"$1"+n):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||C.error(n+" was not called"),o[0]},e.dataTypes[0]="json",r=w[n],w[n]=function(){o=arguments},i.always(function(){void 0===r?C(w).removeProp(n):w[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Lt.push(n)),o&&C.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),x.createHTMLDocument=((Bt=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Bt.childNodes.length),C.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(x.createHTMLDocument?((n=(t=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,t.head.appendChild(n)):t=S),o=!i&&[],(r=M.exec(e))?[t.createElement(r[1])]:(r=de([e],t,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes)));var n,r,o},C.fn.load=function(e,t,i){var n,r,o,a=this,s=e.indexOf(" ");return-1<s&&(n=pt(e.slice(s)),e=e.slice(0,s)),C.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&C.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?C("<div>").append(C.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.pseudos.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(e,t,i){var n,r,o,a,s,p,l=C.css(e,"position"),h=C(e),u={};"static"===l&&(e.style.position="relative"),s=h.offset(),o=C.css(e,"top"),p=C.css(e,"left"),r=("absolute"===l||"fixed"===l)&&-1<(o+p).indexOf("auto")?(a=(n=h.position()).top,n.left):(a=parseFloat(o)||0,parseFloat(p)||0),C.isFunction(t)&&(t=t.call(e,i,C.extend({},s))),null!=t.top&&(u.top=t.top-s.top+a),null!=t.left&&(u.left=t.left-s.left+r),"using"in t?t.using.call(e,u):h.css(u)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,i,n,r,o=this[0];return o?o.getClientRects().length?(n=o.getBoundingClientRect()).width||n.height?(i=Rt(r=o.ownerDocument),e=r.documentElement,{top:n.top+i.pageYOffset-e.clientTop,left:n.left+i.pageXOffset-e.clientLeft}):n:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===C.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),C.nodeName(e[0],"html")||(n=e.offset()),n={top:n.top+C.css(e[0],"borderTopWidth",!0),left:n.left+C.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-C.css(i,"marginTop",!0),left:t.left-n.left-C.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||ce})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;C.fn[t]=function(e){return N(this,function(e,t,i){var n=Rt(e);return void 0===i?n?n[r]:e[t]:void(n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):e[t]=i)},t,e,arguments.length)}}),C.each(["top","left"],function(e,i){C.cssHooks[i]=Le(x.pixelPosition,function(e,t){if(t)return t=Be(e,i),Ee.test(t)?C(e).position()[i]+"px":t})}),C.each({Height:"height",Width:"width"},function(a,s){C.each({padding:"inner"+a,content:s,"":"outer"+a},function(n,o){C.fn[o]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return N(this,function(e,t,i){var n;return C.isWindow(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+a],n["scroll"+a],e.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?C.css(e,t,r):C.style(e,t,i,r)},s,i?e:void 0,i)}})}),C.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),C.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var Ft=w.jQuery,jt=w.$;return C.noConflict=function(e){return w.$===C&&(w.$=jt),e&&w.jQuery===C&&(w.jQuery=Ft),C},e||(w.jQuery=w.$=C),C}),function(){var d;function $(e,t){var i=function(){return i.method.apply(i.scope,arguments)};return i.scope=e,i.method=t,i}window.js=js={_Boot:{}},window.zpp_nape=zpp_nape={shape:{},constraint:{},geom:{},phys:{},dynamics:{},callbacks:{},util:{},space:{}},window.sandbox=sandbox={},window.nape=nape={shape:{},constraint:{},geom:{},phys:{},dynamics:{},callbacks:{},space:{},util:{}};var _=_=function(){};_.__name__=["Reflect"],_.field=function(e,t){try{return e[t]}catch(e){return null}},_.fields=function(e){var t=[];if(null!=e){var i=Object.prototype.hasOwnProperty;for(var n in e)"__id__"!=n&&"hx__closures__"!=n&&i.call(e,n)&&t.push(n)}return t},_.copy=function(e){for(var t={},i=0,n=_.fields(e);i<n.length;){var r=n[i];++i,t[r]=_.field(e,r)}return t},_.prototype.__class__=_;var n=n=function(){};n.__name__=["Std"],n.string=function(e){return ve.__string_rec(e,"")},n.prototype.__class__=n;var e=e=function(){};e.__name__=["StringTools"],e.hex=function(e,t){for(var i="";i="0123456789ABCDEF".charAt(15&e)+i,0<(e>>>=4););if(null!=t)for(;i.length<t;)i="0"+i;return i},e.prototype.__class__=e;var r=js._Boot.HaxeError=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,r)};r.__name__=["js","_Boot","HaxeError"],r.__super__=Error,r.prototype=Object.create(Error.prototype),r.wrap=function(e){return e instanceof Error?e:new r(e)},r.prototype.val=null,r.prototype.__class__=r;var ve=js.Boot=function(){};ve.__name__=["js","Boot"],ve.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var i=ve.__nativeClassName(e);return null!=i?ve.__resolveNativeClass(i):null},ve.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var n=e[0]+"(";t+="\t";for(var r=2,o=e.length;r<o;){var a=r++;n+=2!=a?","+ve.__string_rec(e[a],t):ve.__string_rec(e[a],t)}return n+")"}var s="[";t+="\t";for(var p=0,l=e.length;p<l;){var h=p++;s+=(0<h?",":"")+ve.__string_rec(e[h],t)}return s+="]"}var u;try{u=e.toString}catch(e){return"???"}if(null!=u&&u!=Object.toString&&"function"==typeof u){var d=e.toString();if("[object Object]"!=d)return d}var c=null,_="{\n";t+="\t";var y=null!=e.hasOwnProperty;for(var c in e)y&&!e.hasOwnProperty(c)||"prototype"!=c&&"__class__"!=c&&"__super__"!=c&&"__interfaces__"!=c&&"__properties__"!=c&&(2!=_.length&&(_+=", \n"),_+=t+c+" : "+ve.__string_rec(e[c],t));return _+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},ve.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var i=e.__interfaces__;if(null!=i)for(var n=0,r=i.length;n<r;){var o=i[n++];if(o==t||ve.__interfLoop(o,t))return!0}return ve.__interfLoop(e.__super__,t)},ve.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case Qn:return"boolean"==typeof e;case Kn:return!0;case Jn:return"number"==typeof e;case Zn:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(ve.__interfLoop(ve.getClass(e),t))return!0}else if("object"==typeof t&&ve.__isNativeObj(t)&&e instanceof t)return!0;return t==$n&&null!=e.__name__||(t==er&&null!=e.__ename__||e.__enum__==t)}},ve.__nativeClassName=function(e){var t=ve.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},ve.__isNativeObj=function(e){return null!=ve.__nativeClassName(e)},ve.__resolveNativeClass=function(e){return $global[e]},ve.prototype.__class__=ve;var Qs=nape.Config=function(){};Qs.__name__=["nape","Config"],Qs.prototype.__class__=Qs;var t=nape.callbacks.Callback=function(){this.zpp_inner=null};t.__name__=["nape","callbacks","Callback"],t.prototype.zpp_inner=null,t.prototype.get_event=function(){return Le.events[this.zpp_inner.event]},t.prototype.get_listener=function(){return this.zpp_inner.listener.outer},t.prototype.toString=function(){return""},Object.defineProperty(t.prototype,"event",{get:t.prototype.get_event}),Object.defineProperty(t.prototype,"listener",{get:t.prototype.get_listener}),t.prototype.__class__=t;var i=nape.callbacks.BodyCallback=function(){t.call(this)};i.__name__=["nape","callbacks","BodyCallback"],i.__super__=t,i.prototype=Object.create(t.prototype),i.prototype.get_body=function(){return this.zpp_inner.body.outer},i.prototype.toString=function(){var e="Cb:";return e="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-2],e+=":"+this.zpp_inner.body.outer.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(i.prototype,"body",{get:i.prototype.get_body}),i.prototype.__class__=i;var h=nape.callbacks.Listener=function(){this.zpp_inner=null};h.__name__=["nape","callbacks","Listener"],h.prototype.zpp_inner=null,h.prototype.get_type=function(){return Le.types[this.zpp_inner.type]},h.prototype.get_event=function(){return Le.events[this.zpp_inner.event]},h.prototype.set_event=function(e){var t;Le.events[this.zpp_inner.event]!=e&&(null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1),t=e==Uo.CbEvent_BEGIN?0:(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),e==Uo.CbEvent_ONGOING?6:(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1),e==Uo.CbEvent_END?1:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),e==Uo.CbEvent_SLEEP?3:(null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),e==Uo.CbEvent_WAKE?2:(null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new u,Uo.internal=!1),e==Uo.CbEvent_PRE?5:4))))),this.zpp_inner.swapEvent(t));return Le.events[this.zpp_inner.event]},h.prototype.get_precedence=function(){return this.zpp_inner.precedence},h.prototype.set_precedence=function(e){return this.zpp_inner.precedence!=e&&(this.zpp_inner.precedence=e,this.zpp_inner.invalidate_precedence()),this.zpp_inner.precedence},h.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},h.prototype.set_space=function(e){if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e)if(null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(this),null!=e){var t=e.zpp_inner.wrap_listeners;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},h.prototype.toString=function(){var e=["BEGIN","END","WAKE","SLEEP","BREAK","PRE","ONGOING"][this.zpp_inner.event];if(0==this.zpp_inner.type)return"BodyListener{"+e+"::"+n.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(1==this.zpp_inner.type)return"ConstraintListener{"+e+"::"+n.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var t,i=this.zpp_inner.interaction;switch(i.itype){case 1:t="COLLISION";break;case 2:t="SENSOR";break;case 4:t="FLUID";break;default:t="ALL"}return(2==this.zpp_inner.type?"InteractionListener{"+e+"#"+t+"::"+n.string(i.outer_zni.zpp_inner_zn.options1.outer)+":"+n.string(i.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+t+"::"+n.string(i.outer_znp.zpp_inner_zn.options1.outer)+":"+n.string(i.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},Object.defineProperty(h.prototype,"type",{get:h.prototype.get_type}),Object.defineProperty(h.prototype,"event",{get:h.prototype.get_event,set:h.prototype.set_event}),Object.defineProperty(h.prototype,"precedence",{get:h.prototype.get_precedence,set:h.prototype.set_precedence}),Object.defineProperty(h.prototype,"space",{get:h.prototype.get_space,set:h.prototype.set_space}),h.prototype.__class__=h;var o=nape.callbacks.BodyListener=function(e,t,i,n){null==n&&(n=0),this.zpp_inner_zn=null,h.call(this);var r=-1;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),e==Uo.CbEvent_WAKE?r=2:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),e==Uo.CbEvent_SLEEP&&(r=3)),this.zpp_inner_zn=new De(je.argument(t),r,i),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner.precedence=n};o.__name__=["nape","callbacks","BodyListener"],o.__super__=h,o.prototype=Object.create(h.prototype),o.prototype.zpp_inner_zn=null,o.prototype.get_options=function(){return this.zpp_inner_zn.options.outer},o.prototype.set_options=function(e){return this.zpp_inner_zn.options.set(e.zpp_inner),this.zpp_inner_zn.options.outer},o.prototype.get_handler=function(){return this.zpp_inner_zn.handler},o.prototype.set_handler=function(e){return this.zpp_inner_zn.handler=e,this.zpp_inner_zn.handler},Object.defineProperty(o.prototype,"options",{get:o.prototype.get_options,set:o.prototype.set_options}),Object.defineProperty(o.prototype,"handler",{get:o.prototype.get_handler,set:o.prototype.set_handler}),o.prototype.__class__=o;var u=nape.callbacks.CbEvent=function(){};u.__name__=["nape","callbacks","CbEvent"],u.BEGIN=null,u.get_BEGIN=function(){return null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1),Uo.CbEvent_BEGIN},u.ONGOING=null,u.get_ONGOING=function(){return null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),Uo.CbEvent_ONGOING},u.END=null,u.get_END=function(){return null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1),Uo.CbEvent_END},u.WAKE=null,u.get_WAKE=function(){return null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),Uo.CbEvent_WAKE},u.SLEEP=null,u.get_SLEEP=function(){return null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),Uo.CbEvent_SLEEP},u.BREAK=null,u.get_BREAK=function(){return null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new u,Uo.internal=!1),Uo.CbEvent_BREAK},u.PRE=null,u.get_PRE=function(){return null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new u,Uo.internal=!1),Uo.CbEvent_PRE},u.prototype.toString=function(){return null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new u,Uo.internal=!1),this==Uo.CbEvent_PRE?"PRE":(null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1),this==Uo.CbEvent_BEGIN?"BEGIN":(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),this==Uo.CbEvent_ONGOING?"ONGOING":(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1),this==Uo.CbEvent_END?"END":(null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),this==Uo.CbEvent_WAKE?"WAKE":(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),this==Uo.CbEvent_SLEEP?"SLEEP":(null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new u,Uo.internal=!1),this==Uo.CbEvent_BREAK?"BREAK":""))))))},Object.defineProperty(u,"BEGIN",{get:u.get_BEGIN}),Object.defineProperty(u,"ONGOING",{get:u.get_ONGOING}),Object.defineProperty(u,"END",{get:u.get_END}),Object.defineProperty(u,"WAKE",{get:u.get_WAKE}),Object.defineProperty(u,"SLEEP",{get:u.get_SLEEP}),Object.defineProperty(u,"BREAK",{get:u.get_BREAK}),Object.defineProperty(u,"PRE",{get:u.get_PRE}),u.prototype.__class__=u;var c=nape.callbacks.CbType=function(){this.zpp_inner=null,this.zpp_inner=new Be,this.zpp_inner.outer=this};c.__name__=["nape","callbacks","CbType"],c.ANY_BODY=null,c.get_ANY_BODY=function(){return Be.ANY_BODY},c.ANY_CONSTRAINT=null,c.get_ANY_CONSTRAINT=function(){return Be.ANY_CONSTRAINT},c.ANY_SHAPE=null,c.get_ANY_SHAPE=function(){return Be.ANY_SHAPE},c.ANY_COMPOUND=null,c.get_ANY_COMPOUND=function(){return Be.ANY_COMPOUND},c.prototype.zpp_inner=null,c.prototype.get_id=function(){return this.zpp_inner.id},c.prototype.including=function(e){return new f(this).including(e)},c.prototype.excluding=function(e){return new f(this).excluding(e)},c.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},c.prototype.get_interactors=function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=vn.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},c.prototype.get_constraints=function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=mn.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},c.prototype.toString=function(){return this==Be.ANY_BODY?"ANY_BODY":this==Be.ANY_SHAPE?"ANY_SHAPE":this==Be.ANY_COMPOUND?"ANY_COMPOUND":this==Be.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},Object.defineProperty(c,"ANY_BODY",{get:c.get_ANY_BODY}),Object.defineProperty(c,"ANY_CONSTRAINT",{get:c.get_ANY_CONSTRAINT}),Object.defineProperty(c,"ANY_SHAPE",{get:c.get_ANY_SHAPE}),Object.defineProperty(c,"ANY_COMPOUND",{get:c.get_ANY_COMPOUND}),Object.defineProperty(c.prototype,"id",{get:c.prototype.get_id}),Object.defineProperty(c.prototype,"userData",{get:c.prototype.get_userData}),Object.defineProperty(c.prototype,"interactors",{get:c.prototype.get_interactors}),Object.defineProperty(c.prototype,"constraints",{get:c.prototype.get_constraints}),c.prototype.__class__=c;var He=nape.callbacks.CbTypeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};He.__name__=["nape","callbacks","CbTypeIterator"],He.get=function(e){var t;if(null==He.zpp_pool){Tn.internal=!0;var i=new He;Tn.internal=!1,t=i}else{var n=He.zpp_pool;He.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},He.prototype.zpp_inner=null,He.prototype.zpp_i=null,He.prototype.zpp_critical=null,He.prototype.zpp_next=null,He.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=He.zpp_pool,(He.zpp_pool=this).zpp_inner=null,!1)},He.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},He.prototype.__class__=He;var y=nape.callbacks.CbTypeList=function(){this.zpp_inner=null,this.zpp_inner=new Tn,this.zpp_inner.outer=this};y.__name__=["nape","callbacks","CbTypeList"],y.fromArray=function(e){for(var t=new y,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},y.prototype.zpp_inner=null,y.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},y.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},y.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},y.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},y.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},y.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},y.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},y.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},y.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},y.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},y.prototype.empty=function(){return null==this.zpp_inner.inner.head},y.prototype.iterator=function(){return this.zpp_inner.valmod(),He.get(this)},y.prototype.copy=function(e){null==e&&(e=!1);var t=new y;this.zpp_inner.valmod();for(var i=He.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=He.zpp_pool,(He.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},y.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=He.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},y.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=He.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=He.zpp_pool,(He.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},y.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=He.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null;break}}return this},y.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(y.prototype,"length",{get:y.prototype.get_length}),y.prototype.__class__=y;var a=nape.callbacks.ConstraintCallback=function(){t.call(this)};a.__name__=["nape","callbacks","ConstraintCallback"],a.__super__=t,a.prototype=Object.create(t.prototype),a.prototype.get_constraint=function(){return this.zpp_inner.constraint.outer},a.prototype.toString=function(){var e="Cb:";return e="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2],e+=":"+this.zpp_inner.constraint.outer.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(a.prototype,"constraint",{get:a.prototype.get_constraint}),a.prototype.__class__=a;var s=nape.callbacks.ConstraintListener=function(e,t,i,n){null==n&&(n=0),this.zpp_inner_zn=null,h.call(this);var r=-1;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),e==Uo.CbEvent_WAKE?r=2:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),e==Uo.CbEvent_SLEEP?r=3:(null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new u,Uo.internal=!1),e==Uo.CbEvent_BREAK&&(r=4))),this.zpp_inner_zn=new Re(je.argument(t),r,i),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner.precedence=n};s.__name__=["nape","callbacks","ConstraintListener"],s.__super__=h,s.prototype=Object.create(h.prototype),s.prototype.zpp_inner_zn=null,s.prototype.get_options=function(){return this.zpp_inner_zn.options.outer},s.prototype.set_options=function(e){return this.zpp_inner_zn.options.set(e.zpp_inner),this.zpp_inner_zn.options.outer},s.prototype.get_handler=function(){return this.zpp_inner_zn.handler},s.prototype.set_handler=function(e){return this.zpp_inner_zn.handler=e,this.zpp_inner_zn.handler},Object.defineProperty(s.prototype,"options",{get:s.prototype.get_options,set:s.prototype.set_options}),Object.defineProperty(s.prototype,"handler",{get:s.prototype.get_handler,set:s.prototype.set_handler}),s.prototype.__class__=s;var p=nape.callbacks.InteractionCallback=function(){t.call(this)};p.__name__=["nape","callbacks","InteractionCallback"],p.__super__=t,p.prototype=Object.create(t.prototype),p.prototype.get_int1=function(){return this.zpp_inner.int1.outer_i},p.prototype.get_int2=function(){return this.zpp_inner.int2.outer_i},p.prototype.get_arbiters=function(){return this.zpp_inner.wrap_arbiters},p.prototype.toString=function(){var e="Cb:";return e="Cb:"+["BEGIN","END","","","","","ONGOING"][this.zpp_inner.event],e+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),e+=" : "+this.zpp_inner.wrap_arbiters.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(p.prototype,"int1",{get:p.prototype.get_int1}),Object.defineProperty(p.prototype,"int2",{get:p.prototype.get_int2}),Object.defineProperty(p.prototype,"arbiters",{get:p.prototype.get_arbiters}),p.prototype.__class__=p;var l=nape.callbacks.InteractionListener=function(e,t,i,n,r,o){null==o&&(o=0),this.zpp_inner_zn=null,h.call(this);var a=-1;null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1),e==Uo.CbEvent_BEGIN?a=0:(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1),e==Uo.CbEvent_END?a=1:(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),e==Uo.CbEvent_ONGOING&&(a=6))),this.zpp_inner_zn=new ri(je.argument(i),je.argument(n),a,2),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zni=this).zpp_inner.precedence=o,this.zpp_inner_zn.handleri=r;var s,p=this.zpp_inner_zn.itype;(1==p?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==p?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==p?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==p?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null)!=t&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),s=t==Uo.InteractionType_COLLISION?1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),t==Uo.InteractionType_SENSOR?2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),t==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=s);var l=this.zpp_inner_zn.itype;1==l?null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1):2==l?null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1):4==l?null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1):7==l&&null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1)};l.__name__=["nape","callbacks","InteractionListener"],l.__super__=h,l.prototype=Object.create(h.prototype),l.prototype.zpp_inner_zn=null,l.prototype.get_options1=function(){return this.zpp_inner_zn.options1.outer},l.prototype.set_options1=function(e){return this.zpp_inner_zn.options1.set(e.zpp_inner),this.zpp_inner_zn.options1.outer},l.prototype.get_options2=function(){return this.zpp_inner_zn.options2.outer},l.prototype.set_options2=function(e){return this.zpp_inner_zn.options2.set(e.zpp_inner),this.zpp_inner_zn.options2.outer},l.prototype.get_interactionType=function(){var e=this.zpp_inner_zn.itype;return 1==e?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==e?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==e?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==e?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},l.prototype.set_interactionType=function(e){var t,i=this.zpp_inner_zn.itype;(1==i?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==i?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==i?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==i?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null)!=e&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),t=e==Uo.InteractionType_COLLISION?1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=t);var n=this.zpp_inner_zn.itype;return 1==n?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==n?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==n?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==n?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},l.prototype.get_handler=function(){return this.zpp_inner_zn.handleri},l.prototype.set_handler=function(e){return this.zpp_inner_zn.handleri=e,this.zpp_inner_zn.handleri},l.prototype.get_allowSleepingCallbacks=function(){return this.zpp_inner_zn.allowSleepingCallbacks},l.prototype.set_allowSleepingCallbacks=function(e){return this.zpp_inner_zn.allowSleepingCallbacks=e,this.zpp_inner_zn.allowSleepingCallbacks},Object.defineProperty(l.prototype,"options1",{get:l.prototype.get_options1,set:l.prototype.set_options1}),Object.defineProperty(l.prototype,"options2",{get:l.prototype.get_options2,set:l.prototype.set_options2}),Object.defineProperty(l.prototype,"interactionType",{get:l.prototype.get_interactionType,set:l.prototype.set_interactionType}),Object.defineProperty(l.prototype,"handler",{get:l.prototype.get_handler,set:l.prototype.set_handler}),Object.defineProperty(l.prototype,"allowSleepingCallbacks",{get:l.prototype.get_allowSleepingCallbacks,set:l.prototype.set_allowSleepingCallbacks}),l.prototype.__class__=l;var C=nape.callbacks.InteractionType=function(){};C.__name__=["nape","callbacks","InteractionType"],C.COLLISION=null,C.get_COLLISION=function(){return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION},C.SENSOR=null,C.get_SENSOR=function(){return null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR},C.FLUID=null,C.get_FLUID=function(){return null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID},C.ANY=null,C.get_ANY=function(){return null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY},C.prototype.toString=function(){return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),this==Uo.InteractionType_COLLISION?"COLLISION":(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),this==Uo.InteractionType_SENSOR?"SENSOR":(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),this==Uo.InteractionType_FLUID?"FLUID":(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),this==Uo.InteractionType_ANY?"ANY":"")))},Object.defineProperty(C,"COLLISION",{get:C.get_COLLISION}),Object.defineProperty(C,"SENSOR",{get:C.get_SENSOR}),Object.defineProperty(C,"FLUID",{get:C.get_FLUID}),Object.defineProperty(C,"ANY",{get:C.get_ANY}),C.prototype.__class__=C;var Ve=nape.callbacks.ListenerIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ve.__name__=["nape","callbacks","ListenerIterator"],Ve.get=function(e){var t;if(null==Ve.zpp_pool){zn.internal=!0;var i=new Ve;zn.internal=!1,t=i}else{var n=Ve.zpp_pool;Ve.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ve.prototype.zpp_inner=null,Ve.prototype.zpp_i=null,Ve.prototype.zpp_critical=null,Ve.prototype.zpp_next=null,Ve.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=this).zpp_inner=null,!1)},Ve.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ve.prototype.__class__=Ve;var x=nape.callbacks.ListenerList=function(){this.zpp_inner=null,this.zpp_inner=new zn,this.zpp_inner.outer=this};x.__name__=["nape","callbacks","ListenerList"],x.fromArray=function(e){for(var t=new x,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},x.prototype.zpp_inner=null,x.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},x.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},x.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},x.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},x.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},x.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},x.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},x.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},x.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},x.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},x.prototype.empty=function(){return null==this.zpp_inner.inner.head},x.prototype.iterator=function(){return this.zpp_inner.valmod(),Ve.get(this)},x.prototype.copy=function(e){null==e&&(e=!1);var t=new x;this.zpp_inner.valmod();for(var i=Ve.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},x.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ve.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},x.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ve.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},x.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ve.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null;break}}return this},x.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(x.prototype,"length",{get:x.prototype.get_length}),x.prototype.__class__=x;var m=nape.callbacks.ListenerType=function(){};m.__name__=["nape","callbacks","ListenerType"],m.BODY=null,m.get_BODY=function(){return null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new m,Uo.internal=!1),Uo.ListenerType_BODY},m.CONSTRAINT=null,m.get_CONSTRAINT=function(){return null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new m,Uo.internal=!1),Uo.ListenerType_CONSTRAINT},m.INTERACTION=null,m.get_INTERACTION=function(){return null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new m,Uo.internal=!1),Uo.ListenerType_INTERACTION},m.PRE=null,m.get_PRE=function(){return null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new m,Uo.internal=!1),Uo.ListenerType_PRE},m.prototype.toString=function(){return null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new m,Uo.internal=!1),this==Uo.ListenerType_BODY?"BODY":(null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new m,Uo.internal=!1),this==Uo.ListenerType_CONSTRAINT?"CONSTRAINT":(null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new m,Uo.internal=!1),this==Uo.ListenerType_INTERACTION?"INTERACTION":(null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new m,Uo.internal=!1),this==Uo.ListenerType_PRE?"PRE":"")))},Object.defineProperty(m,"BODY",{get:m.get_BODY}),Object.defineProperty(m,"CONSTRAINT",{get:m.get_CONSTRAINT}),Object.defineProperty(m,"INTERACTION",{get:m.get_INTERACTION}),Object.defineProperty(m,"PRE",{get:m.get_PRE}),m.prototype.__class__=m;var f=nape.callbacks.OptionType=function(e,t){this.zpp_inner=null,this.zpp_inner=new je,this.zpp_inner.outer=this,null!=e&&this.including(e),null!=t&&this.excluding(t)};f.__name__=["nape","callbacks","OptionType"],f.prototype.zpp_inner=null,f.prototype.get_includes=function(){return null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes(),this.zpp_inner.wrap_includes},f.prototype.get_excludes=function(){return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),this.zpp_inner.wrap_excludes},f.prototype.including=function(e){return this.zpp_inner.append(this.zpp_inner.includes,e),this},f.prototype.excluding=function(e){return this.zpp_inner.append(this.zpp_inner.excludes,e),this},f.prototype.toString=function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var e=this.zpp_inner.wrap_includes.toString();return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),"@{"+e+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},Object.defineProperty(f.prototype,"includes",{get:f.prototype.get_includes}),Object.defineProperty(f.prototype,"excludes",{get:f.prototype.get_excludes}),f.prototype.__class__=f;var v=nape.callbacks.PreCallback=function(){t.call(this)};v.__name__=["nape","callbacks","PreCallback"],v.__super__=t,v.prototype=Object.create(t.prototype),v.prototype.get_arbiter=function(){return this.zpp_inner.pre_arbiter.wrapper()},v.prototype.get_int1=function(){return this.zpp_inner.int1.outer_i},v.prototype.get_int2=function(){return this.zpp_inner.int2.outer_i},v.prototype.get_swapped=function(){return this.zpp_inner.pre_swapped},v.prototype.toString=function(){var e="Cb:PRE:";return e="Cb:PRE::"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),e+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString(),e+=" : listnener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(v.prototype,"arbiter",{get:v.prototype.get_arbiter}),Object.defineProperty(v.prototype,"int1",{get:v.prototype.get_int1}),Object.defineProperty(v.prototype,"int2",{get:v.prototype.get_int2}),Object.defineProperty(v.prototype,"swapped",{get:v.prototype.get_swapped}),v.prototype.__class__=v;var Fo=nape.callbacks.PreFlag=function(){};Fo.__name__=["nape","callbacks","PreFlag"],Fo.ACCEPT=null,Fo.get_ACCEPT=function(){return null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT},Fo.IGNORE=null,Fo.get_IGNORE=function(){return null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE},Fo.ACCEPT_ONCE=null,Fo.get_ACCEPT_ONCE=function(){return null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT_ONCE},Fo.IGNORE_ONCE=null,Fo.get_IGNORE_ONCE=function(){return null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE_ONCE},Fo.prototype.toString=function(){return null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),this==Uo.PreFlag_ACCEPT?"ACCEPT":(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),this==Uo.PreFlag_IGNORE?"IGNORE":(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),this==Uo.PreFlag_ACCEPT_ONCE?"ACCEPT_ONCE":(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),this==Uo.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")))},Object.defineProperty(Fo,"ACCEPT",{get:Fo.get_ACCEPT}),Object.defineProperty(Fo,"IGNORE",{get:Fo.get_IGNORE}),Object.defineProperty(Fo,"ACCEPT_ONCE",{get:Fo.get_ACCEPT_ONCE}),Object.defineProperty(Fo,"IGNORE_ONCE",{get:Fo.get_IGNORE_ONCE}),Fo.prototype.__class__=Fo;var g=nape.callbacks.PreListener=function(e,t,i,n,r,o){null==o&&(o=!1),null==r&&(r=0),this.zpp_inner_zn=null,h.call(this),this.zpp_inner_zn=new ri(je.argument(t),je.argument(i),5,3),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_znp=this).zpp_inner.precedence=r,this.zpp_inner_zn.pure=o,this.zpp_inner_zn.handlerp=n;var a,s=this.zpp_inner_zn.itype;(1==s?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==s?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==s?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==s?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null)!=e&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),a=e==Uo.InteractionType_COLLISION?1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=a);var p=this.zpp_inner_zn.itype;1==p?null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1):2==p?null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1):4==p?null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1):7==p&&null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1)};g.__name__=["nape","callbacks","PreListener"],g.__super__=h,g.prototype=Object.create(h.prototype),g.prototype.zpp_inner_zn=null,g.prototype.get_options1=function(){return this.zpp_inner_zn.options1.outer},g.prototype.set_options1=function(e){return this.zpp_inner_zn.options1.set(e.zpp_inner),this.zpp_inner_zn.options1.outer},g.prototype.get_options2=function(){return this.zpp_inner_zn.options2.outer},g.prototype.set_options2=function(e){return this.zpp_inner_zn.options2.set(e.zpp_inner),this.zpp_inner_zn.options2.outer},g.prototype.get_handler=function(){return this.zpp_inner_zn.handlerp},g.prototype.set_handler=function(e){return this.zpp_inner_zn.handlerp=e,this.zpp_inner_zn.wake(),this.zpp_inner_zn.handlerp},g.prototype.get_pure=function(){return this.zpp_inner_zn.pure},g.prototype.set_pure=function(e){return e||this.zpp_inner_zn.wake(),this.zpp_inner_zn.pure=e,this.zpp_inner_zn.pure},g.prototype.get_interactionType=function(){var e=this.zpp_inner_zn.itype;return 1==e?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==e?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==e?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==e?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},g.prototype.set_interactionType=function(e){var t,i=this.zpp_inner_zn.itype;(1==i?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==i?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==i?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==i?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null)!=e&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),t=e==Uo.InteractionType_COLLISION?1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=t);var n=this.zpp_inner_zn.itype;return 1==n?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==n?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==n?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==n?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},Object.defineProperty(g.prototype,"options1",{get:g.prototype.get_options1,set:g.prototype.set_options1}),Object.defineProperty(g.prototype,"options2",{get:g.prototype.get_options2,set:g.prototype.set_options2}),Object.defineProperty(g.prototype,"handler",{get:g.prototype.get_handler,set:g.prototype.set_handler}),Object.defineProperty(g.prototype,"pure",{get:g.prototype.get_pure,set:g.prototype.set_pure}),Object.defineProperty(g.prototype,"interactionType",{get:g.prototype.get_interactionType,set:g.prototype.set_interactionType}),g.prototype.__class__=g;var te=nape.constraint.Constraint=function(){this.debugDraw=!0,this.zpp_inner.insert_cbtype(Be.ANY_CONSTRAINT.zpp_inner)};te.__name__=["nape","constraint","Constraint"],te.prototype.zpp_inner=null,te.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},te.prototype.debugDraw=null,te.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},te.prototype.set_compound=function(e){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(this),null!=e)){var t=e.zpp_inner.wrap_constraints;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},te.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},te.prototype.set_space=function(e){if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e)if(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(this),null!=e){var t=e.zpp_inner.wrap_constraints;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},te.prototype.get_isSleeping=function(){return this.zpp_inner.component.sleeping},te.prototype.get_active=function(){return this.zpp_inner.active},te.prototype.set_active=function(e){return this.zpp_inner.active!=e&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),e?(this.zpp_inner.active=e,this.zpp_inner.activate(),null!=this.zpp_inner.space&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.sleeping=!0),this.zpp_inner.space.wake_constraint(this.zpp_inner,!0))):(null!=this.zpp_inner.space&&(this.zpp_inner.wake(),this.zpp_inner.space.live_constraints.remove(this.zpp_inner)),this.zpp_inner.active=e,this.zpp_inner.deactivate())),this.zpp_inner.active},te.prototype.get_ignore=function(){return this.zpp_inner.ignore},te.prototype.set_ignore=function(e){return this.zpp_inner.ignore!=e&&(this.zpp_inner.ignore=e,this.zpp_inner.wake()),this.zpp_inner.ignore},te.prototype.get_stiff=function(){return this.zpp_inner.stiff},te.prototype.set_stiff=function(e){return this.zpp_inner.stiff!=e&&(this.zpp_inner.stiff=e,this.zpp_inner.wake()),this.zpp_inner.stiff},te.prototype.get_frequency=function(){return this.zpp_inner.frequency},te.prototype.set_frequency=function(e){return this.zpp_inner.frequency!=e&&(this.zpp_inner.frequency=e,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.frequency},te.prototype.get_damping=function(){return this.zpp_inner.damping},te.prototype.set_damping=function(e){return this.zpp_inner.damping!=e&&(this.zpp_inner.damping=e,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.damping},te.prototype.get_maxForce=function(){return this.zpp_inner.maxForce},te.prototype.set_maxForce=function(e){return this.zpp_inner.maxForce!=e&&(this.zpp_inner.maxForce=e,this.zpp_inner.wake()),this.zpp_inner.maxForce},te.prototype.get_maxError=function(){return this.zpp_inner.maxError},te.prototype.set_maxError=function(e){return this.zpp_inner.maxError!=e&&(this.zpp_inner.maxError=e,this.zpp_inner.wake()),this.zpp_inner.maxError},te.prototype.get_breakUnderForce=function(){return this.zpp_inner.breakUnderForce},te.prototype.set_breakUnderForce=function(e){return this.zpp_inner.breakUnderForce!=e&&(this.zpp_inner.breakUnderForce=e,this.zpp_inner.wake()),this.zpp_inner.breakUnderForce},te.prototype.get_breakUnderError=function(){return this.zpp_inner.breakUnderError},te.prototype.set_breakUnderError=function(e){return this.zpp_inner.breakUnderError!=e&&(this.zpp_inner.breakUnderError=e,this.zpp_inner.wake()),this.zpp_inner.breakUnderError},te.prototype.get_removeOnBreak=function(){return this.zpp_inner.removeOnBreak},te.prototype.set_removeOnBreak=function(e){return this.zpp_inner.removeOnBreak=e,this.zpp_inner.removeOnBreak},te.prototype.impulse=function(){return null},te.prototype.bodyImpulse=function(e){return null},te.prototype.visitBodies=function(e){},te.prototype.get_cbTypes=function(){return null==this.zpp_inner.wrap_cbTypes&&this.zpp_inner.setupcbTypes(),this.zpp_inner.wrap_cbTypes},te.prototype.toString=function(){return"{Constraint}"},te.prototype.copy=function(){return this.zpp_inner.copy()},Object.defineProperty(te.prototype,"userData",{get:te.prototype.get_userData}),Object.defineProperty(te.prototype,"compound",{get:te.prototype.get_compound,set:te.prototype.set_compound}),Object.defineProperty(te.prototype,"space",{get:te.prototype.get_space,set:te.prototype.set_space}),Object.defineProperty(te.prototype,"isSleeping",{get:te.prototype.get_isSleeping}),Object.defineProperty(te.prototype,"active",{get:te.prototype.get_active,set:te.prototype.set_active}),Object.defineProperty(te.prototype,"ignore",{get:te.prototype.get_ignore,set:te.prototype.set_ignore}),Object.defineProperty(te.prototype,"stiff",{get:te.prototype.get_stiff,set:te.prototype.set_stiff}),Object.defineProperty(te.prototype,"frequency",{get:te.prototype.get_frequency,set:te.prototype.set_frequency}),Object.defineProperty(te.prototype,"damping",{get:te.prototype.get_damping,set:te.prototype.set_damping}),Object.defineProperty(te.prototype,"maxForce",{get:te.prototype.get_maxForce,set:te.prototype.set_maxForce}),Object.defineProperty(te.prototype,"maxError",{get:te.prototype.get_maxError,set:te.prototype.set_maxError}),Object.defineProperty(te.prototype,"breakUnderForce",{get:te.prototype.get_breakUnderForce,set:te.prototype.set_breakUnderForce}),Object.defineProperty(te.prototype,"breakUnderError",{get:te.prototype.get_breakUnderError,set:te.prototype.set_breakUnderError}),Object.defineProperty(te.prototype,"removeOnBreak",{get:te.prototype.get_removeOnBreak,set:te.prototype.set_removeOnBreak}),Object.defineProperty(te.prototype,"cbTypes",{get:te.prototype.get_cbTypes}),te.prototype.__class__=te;var z=nape.constraint.AngleJoint=function(e,t,i,n,r){null==r&&(r=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new Ue,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var o=null==e?null:e.zpp_inner;o!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b2!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var a=null==t?null:t.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),this.zpp_inner_zn.jointMin!=i&&(this.zpp_inner_zn.jointMin=i,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),this.zpp_inner_zn.jointMax!=n&&(this.zpp_inner_zn.jointMax=n,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::ratio"),this.zpp_inner_zn.ratio!=r&&(this.zpp_inner_zn.ratio=r,this.zpp_inner.wake())};z.__name__=["nape","constraint","AngleJoint"],z.__super__=te,z.prototype=Object.create(te.prototype),z.prototype.zpp_inner_zn=null,z.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},z.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},z.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},z.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},z.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},z.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},z.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},z.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},z.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},z.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},z.prototype.isSlack=function(){var e,t=this.zpp_inner_zn,i=t.ratio*t.b2.rot-t.b1.rot;return t.equal?(e=!1,t.scale=1):e=i<t.jointMin?!(t.scale=-1):i>t.jointMax?(i-=t.jointMax,!(t.scale=1)):!(i=t.scale=0),e},z.prototype.impulse=function(){var e=new X(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},z.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):K.get(0,0,0)},z.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(z.prototype,"body1",{get:z.prototype.get_body1,set:z.prototype.set_body1}),Object.defineProperty(z.prototype,"body2",{get:z.prototype.get_body2,set:z.prototype.set_body2}),Object.defineProperty(z.prototype,"jointMin",{get:z.prototype.get_jointMin,set:z.prototype.set_jointMin}),Object.defineProperty(z.prototype,"jointMax",{get:z.prototype.get_jointMax,set:z.prototype.set_jointMax}),Object.defineProperty(z.prototype,"ratio",{get:z.prototype.get_ratio,set:z.prototype.set_ratio}),z.prototype.__class__=z;var We=nape.constraint.ConstraintIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};We.__name__=["nape","constraint","ConstraintIterator"],We.get=function(e){var t;if(null==We.zpp_pool){mn.internal=!0;var i=new We;mn.internal=!1,t=i}else{var n=We.zpp_pool;We.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},We.prototype.zpp_inner=null,We.prototype.zpp_i=null,We.prototype.zpp_critical=null,We.prototype.zpp_next=null,We.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=We.zpp_pool,(We.zpp_pool=this).zpp_inner=null,!1)},We.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},We.prototype.__class__=We;var b=nape.constraint.ConstraintList=function(){this.zpp_inner=null,this.zpp_inner=new mn,this.zpp_inner.outer=this};b.__name__=["nape","constraint","ConstraintList"],b.fromArray=function(e){for(var t=new b,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},b.prototype.zpp_inner=null,b.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},b.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},b.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},b.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},b.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},b.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},b.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},b.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},b.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},b.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},b.prototype.empty=function(){return null==this.zpp_inner.inner.head},b.prototype.iterator=function(){return this.zpp_inner.valmod(),We.get(this)},b.prototype.copy=function(e){null==e&&(e=!1);var t=new b;this.zpp_inner.valmod();for(var i=We.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},b.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=We.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},b.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=We.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},b.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=We.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null;break}}return this},b.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(b.prototype,"length",{get:b.prototype.get_length}),b.prototype.__class__=b;var w=nape.constraint.DistanceJoint=function(e,t,i,n,r,o){this.zpp_inner_zn=null,this.zpp_inner_zn=new ot,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var a=null==e?null:e.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var s=null==t?null:t.zpp_inner;s!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b1!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var p=this.zpp_inner_zn.wrap_a1,l=i.zpp_inner;null!=l._validate&&l._validate();var h=i.zpp_inner.x,u=i.zpp_inner;null!=u._validate&&u._validate();var d,c=i.zpp_inner.y,_=p.zpp_inner;if(null!=_._validate&&_._validate(),p.zpp_inner.x==h){var y=p.zpp_inner;null!=y._validate&&y._validate(),d=p.zpp_inner.y==c}else d=!1;if(!d){p.zpp_inner.x=h,p.zpp_inner.y=c;var x=p.zpp_inner;null!=x._invalidate&&x._invalidate(x)}if(i.zpp_inner.weak){var m=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=ep.zpp_pool,ep.zpp_pool=m}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var f=this.zpp_inner_zn.wrap_a2,v=n.zpp_inner;null!=v._validate&&v._validate();var g=n.zpp_inner.x,z=n.zpp_inner;null!=z._validate&&z._validate();var b,w=n.zpp_inner.y,S=f.zpp_inner;if(null!=S._validate&&S._validate(),f.zpp_inner.x==g){var C=f.zpp_inner;null!=C._validate&&C._validate(),b=f.zpp_inner.y==w}else b=!1;if(!b){f.zpp_inner.x=g,f.zpp_inner.y=w;var M=f.zpp_inner;null!=M._invalidate&&M._invalidate(M)}if(n.zpp_inner.weak){var P=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=P.outer&&(P.outer.zpp_inner=null,P.outer=null),P._isimmutable=null,P._validate=null,P._invalidate=null,P.next=ep.zpp_pool,ep.zpp_pool=P}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),this.zpp_inner_zn.jointMin!=r&&(this.zpp_inner_zn.jointMin=r,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),this.zpp_inner_zn.jointMax!=o&&(this.zpp_inner_zn.jointMax=o,this.zpp_inner.wake())};w.__name__=["nape","constraint","DistanceJoint"],w.__super__=te,w.prototype=Object.create(te.prototype),w.prototype.zpp_inner_zn=null,w.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},w.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},w.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},w.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},w.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},w.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},w.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},w.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},w.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},w.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},w.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},w.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},w.prototype.isSlack=function(){return this.zpp_inner_zn.slack},w.prototype.impulse=function(){var e=new X(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},w.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):K.get()},w.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(w.prototype,"body1",{get:w.prototype.get_body1,set:w.prototype.set_body1}),Object.defineProperty(w.prototype,"body2",{get:w.prototype.get_body2,set:w.prototype.set_body2}),Object.defineProperty(w.prototype,"anchor1",{get:w.prototype.get_anchor1,set:w.prototype.set_anchor1}),Object.defineProperty(w.prototype,"anchor2",{get:w.prototype.get_anchor2,set:w.prototype.set_anchor2}),Object.defineProperty(w.prototype,"jointMin",{get:w.prototype.get_jointMin,set:w.prototype.set_jointMin}),Object.defineProperty(w.prototype,"jointMax",{get:w.prototype.get_jointMax,set:w.prototype.set_jointMax}),w.prototype.__class__=w;var S=nape.constraint.LineJoint=function(e,t,i,n,r,o,a){this.zpp_inner_zn=null,this.zpp_inner_zn=new at,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var s=null==e?null:e.zpp_inner;s!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b2!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var p=null==t?null:t.zpp_inner;p!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=p,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=p&&this.zpp_inner_zn.b1!=p&&null!=p&&p.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=p&&p.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var l=this.zpp_inner_zn.wrap_a1,h=i.zpp_inner;null!=h._validate&&h._validate();var u=i.zpp_inner.x,d=i.zpp_inner;null!=d._validate&&d._validate();var c,_=i.zpp_inner.y,y=l.zpp_inner;if(null!=y._validate&&y._validate(),l.zpp_inner.x==u){var x=l.zpp_inner;null!=x._validate&&x._validate(),c=l.zpp_inner.y==_}else c=!1;if(!c){l.zpp_inner.x=u,l.zpp_inner.y=_;var m=l.zpp_inner;null!=m._invalidate&&m._invalidate(m)}if(i.zpp_inner.weak){var f=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=f.outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=ep.zpp_pool,ep.zpp_pool=f}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var v=this.zpp_inner_zn.wrap_a2,g=n.zpp_inner;null!=g._validate&&g._validate();var z=n.zpp_inner.x,b=n.zpp_inner;null!=b._validate&&b._validate();var w,S=n.zpp_inner.y,C=v.zpp_inner;if(null!=C._validate&&C._validate(),v.zpp_inner.x==z){var M=v.zpp_inner;null!=M._validate&&M._validate(),w=v.zpp_inner.y==S}else w=!1;if(!w){v.zpp_inner.x=z,v.zpp_inner.y=S;var P=v.zpp_inner;null!=P._invalidate&&P._invalidate(P)}if(n.zpp_inner.weak){var k=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=k.outer&&(k.outer.zpp_inner=null,k.outer=null),k._isimmutable=null,k._validate=null,k._invalidate=null,k.next=ep.zpp_pool,ep.zpp_pool=k}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();var T=this.zpp_inner_zn.wrap_n,G=r.zpp_inner;null!=G._validate&&G._validate();var O=r.zpp_inner.x,A=r.zpp_inner;null!=A._validate&&A._validate();var E,I=r.zpp_inner.y,B=T.zpp_inner;if(null!=B._validate&&B._validate(),T.zpp_inner.x==O){var L=T.zpp_inner;null!=L._validate&&L._validate(),E=T.zpp_inner.y==I}else E=!1;if(!E){T.zpp_inner.x=O,T.zpp_inner.y=I;var D=T.zpp_inner;null!=D._invalidate&&D._invalidate(D)}if(r.zpp_inner.weak){var R=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=R.outer&&(R.outer.zpp_inner=null,R.outer=null),R._isimmutable=null,R._validate=null,R._invalidate=null,R.next=ep.zpp_pool,ep.zpp_pool=R}null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner.immutable_midstep("LineJoint::jointMin"),this.zpp_inner_zn.jointMin!=o&&(this.zpp_inner_zn.jointMin=o,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("LineJoint::jointMax"),this.zpp_inner_zn.jointMax!=a&&(this.zpp_inner_zn.jointMax=a,this.zpp_inner.wake())};S.__name__=["nape","constraint","LineJoint"],S.__super__=te,S.prototype=Object.create(te.prototype),S.prototype.zpp_inner_zn=null,S.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},S.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},S.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},S.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},S.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},S.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},S.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},S.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},S.prototype.get_direction=function(){return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},S.prototype.set_direction=function(e){null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();var t=this.zpp_inner_zn.wrap_n,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},S.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},S.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("LineJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},S.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},S.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("LineJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},S.prototype.impulse=function(){var e=new X(2,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e},S.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):K.get()},S.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(S.prototype,"body1",{get:S.prototype.get_body1,set:S.prototype.set_body1}),Object.defineProperty(S.prototype,"body2",{get:S.prototype.get_body2,set:S.prototype.set_body2}),Object.defineProperty(S.prototype,"anchor1",{get:S.prototype.get_anchor1,set:S.prototype.set_anchor1}),Object.defineProperty(S.prototype,"anchor2",{get:S.prototype.get_anchor2,set:S.prototype.set_anchor2}),Object.defineProperty(S.prototype,"direction",{get:S.prototype.get_direction,set:S.prototype.set_direction}),Object.defineProperty(S.prototype,"jointMin",{get:S.prototype.get_jointMin,set:S.prototype.set_jointMin}),Object.defineProperty(S.prototype,"jointMax",{get:S.prototype.get_jointMax,set:S.prototype.set_jointMax}),S.prototype.__class__=S;var M=nape.constraint.MotorJoint=function(e,t,i,n){null==n&&(n=1),null==i&&(i=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new st,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var r=null==e?null:e.zpp_inner;r!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=r,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=r&&this.zpp_inner_zn.b2!=r&&null!=r&&r.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=r&&r.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var o=null==t?null:t.zpp_inner;o!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b1!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("MotorJoint::rate"),this.zpp_inner_zn.rate!=i&&(this.zpp_inner_zn.rate=i,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("MotorJoint::ratio"),this.zpp_inner_zn.ratio!=n&&(this.zpp_inner_zn.ratio=n,this.zpp_inner.wake())};M.__name__=["nape","constraint","MotorJoint"],M.__super__=te,M.prototype=Object.create(te.prototype),M.prototype.zpp_inner_zn=null,M.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},M.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},M.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},M.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},M.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},M.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("MotorJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},M.prototype.get_rate=function(){return this.zpp_inner_zn.rate},M.prototype.set_rate=function(e){return this.zpp_inner.immutable_midstep("MotorJoint::rate"),this.zpp_inner_zn.rate!=e&&(this.zpp_inner_zn.rate=e,this.zpp_inner.wake()),this.zpp_inner_zn.rate},M.prototype.impulse=function(){var e=new X(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},M.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):K.get()},M.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(M.prototype,"body1",{get:M.prototype.get_body1,set:M.prototype.set_body1}),Object.defineProperty(M.prototype,"body2",{get:M.prototype.get_body2,set:M.prototype.set_body2}),Object.defineProperty(M.prototype,"ratio",{get:M.prototype.get_ratio,set:M.prototype.set_ratio}),Object.defineProperty(M.prototype,"rate",{get:M.prototype.get_rate,set:M.prototype.set_rate}),M.prototype.__class__=M;var P=nape.constraint.PivotJoint=function(e,t,i,n){this.zpp_inner_zn=null,this.zpp_inner_zn=new ut,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var r=null==e?null:e.zpp_inner;r!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=r,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=r&&this.zpp_inner_zn.b2!=r&&null!=r&&r.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=r&&r.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var o=null==t?null:t.zpp_inner;o!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b1!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var a=this.zpp_inner_zn.wrap_a1,s=i.zpp_inner;null!=s._validate&&s._validate();var p=i.zpp_inner.x,l=i.zpp_inner;null!=l._validate&&l._validate();var h,u=i.zpp_inner.y,d=a.zpp_inner;if(null!=d._validate&&d._validate(),a.zpp_inner.x==p){var c=a.zpp_inner;null!=c._validate&&c._validate(),h=a.zpp_inner.y==u}else h=!1;if(!h){a.zpp_inner.x=p,a.zpp_inner.y=u;var _=a.zpp_inner;null!=_._invalidate&&_._invalidate(_)}if(i.zpp_inner.weak){var y=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=ep.zpp_pool,ep.zpp_pool=y}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var x=this.zpp_inner_zn.wrap_a2,m=n.zpp_inner;null!=m._validate&&m._validate();var f=n.zpp_inner.x,v=n.zpp_inner;null!=v._validate&&v._validate();var g,z=n.zpp_inner.y,b=x.zpp_inner;if(null!=b._validate&&b._validate(),x.zpp_inner.x==f){var w=x.zpp_inner;null!=w._validate&&w._validate(),g=x.zpp_inner.y==z}else g=!1;if(!g){x.zpp_inner.x=f,x.zpp_inner.y=z;var S=x.zpp_inner;null!=S._invalidate&&S._invalidate(S)}if(n.zpp_inner.weak){var C=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=C.outer&&(C.outer.zpp_inner=null,C.outer=null),C._isimmutable=null,C._validate=null,C._invalidate=null,C.next=ep.zpp_pool,ep.zpp_pool=C}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2()};P.__name__=["nape","constraint","PivotJoint"],P.__super__=te,P.prototype=Object.create(te.prototype),P.prototype.zpp_inner_zn=null,P.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},P.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},P.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},P.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},P.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},P.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},P.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},P.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},P.prototype.impulse=function(){var e=new X(2,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e},P.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):K.get()},P.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(P.prototype,"body1",{get:P.prototype.get_body1,set:P.prototype.set_body1}),Object.defineProperty(P.prototype,"body2",{get:P.prototype.get_body2,set:P.prototype.set_body2}),Object.defineProperty(P.prototype,"anchor1",{get:P.prototype.get_anchor1,set:P.prototype.set_anchor1}),Object.defineProperty(P.prototype,"anchor2",{get:P.prototype.get_anchor2,set:P.prototype.set_anchor2}),P.prototype.__class__=P;var k=nape.constraint.PulleyJoint=function(e,t,i,n,r,o,a,s,p,l,h){null==h&&(h=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new dt,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var u=null==e?null:e.zpp_inner;u!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=u,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=u&&this.zpp_inner_zn.b2!=u&&this.zpp_inner_zn.b3!=u&&this.zpp_inner_zn.b4!=u&&null!=u&&u.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=u&&u.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var d=null==t?null:t.zpp_inner;d!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=d,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=d&&this.zpp_inner_zn.b1!=d&&this.zpp_inner_zn.b3!=d&&this.zpp_inner_zn.b4!=d&&null!=d&&d.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=d&&d.wake())),this.zpp_inner.immutable_midstep("Constraint::body3");var c=null==i?null:i.zpp_inner;c!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=c,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=c&&this.zpp_inner_zn.b1!=c&&this.zpp_inner_zn.b2!=c&&this.zpp_inner_zn.b4!=c&&null!=c&&c.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=c&&c.wake())),this.zpp_inner.immutable_midstep("Constraint::body4");var _=null==n?null:n.zpp_inner;_!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=_,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=_&&this.zpp_inner_zn.b1!=_&&this.zpp_inner_zn.b2!=_&&this.zpp_inner_zn.b3!=_&&null!=_&&_.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=_&&_.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var y=this.zpp_inner_zn.wrap_a1,x=r.zpp_inner;null!=x._validate&&x._validate();var m=r.zpp_inner.x,f=r.zpp_inner;null!=f._validate&&f._validate();var v,g=r.zpp_inner.y,z=y.zpp_inner;if(null!=z._validate&&z._validate(),y.zpp_inner.x==m){var b=y.zpp_inner;null!=b._validate&&b._validate(),v=y.zpp_inner.y==g}else v=!1;if(!v){y.zpp_inner.x=m,y.zpp_inner.y=g;var w=y.zpp_inner;null!=w._invalidate&&w._invalidate(w)}if(r.zpp_inner.weak){var S=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=S.outer&&(S.outer.zpp_inner=null,S.outer=null),S._isimmutable=null,S._validate=null,S._invalidate=null,S.next=ep.zpp_pool,ep.zpp_pool=S}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var C=this.zpp_inner_zn.wrap_a2,M=o.zpp_inner;null!=M._validate&&M._validate();var P=o.zpp_inner.x,k=o.zpp_inner;null!=k._validate&&k._validate();var T,G=o.zpp_inner.y,O=C.zpp_inner;if(null!=O._validate&&O._validate(),C.zpp_inner.x==P){var A=C.zpp_inner;null!=A._validate&&A._validate(),T=C.zpp_inner.y==G}else T=!1;if(!T){C.zpp_inner.x=P,C.zpp_inner.y=G;var E=C.zpp_inner;null!=E._invalidate&&E._invalidate(E)}if(o.zpp_inner.weak){var I=o.zpp_inner;o.zpp_inner.outer=null,o.zpp_inner=null,o.zpp_pool=jn.poolVec2,jn.poolVec2=o,null!=I.outer&&(I.outer.zpp_inner=null,I.outer=null),I._isimmutable=null,I._validate=null,I._invalidate=null,I.next=ep.zpp_pool,ep.zpp_pool=I}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();var B=this.zpp_inner_zn.wrap_a3,L=a.zpp_inner;null!=L._validate&&L._validate();var D=a.zpp_inner.x,R=a.zpp_inner;null!=R._validate&&R._validate();var F,j=a.zpp_inner.y,N=B.zpp_inner;if(null!=N._validate&&N._validate(),B.zpp_inner.x==D){var U=B.zpp_inner;null!=U._validate&&U._validate(),F=B.zpp_inner.y==j}else F=!1;if(!F){B.zpp_inner.x=D,B.zpp_inner.y=j;var H=B.zpp_inner;null!=H._invalidate&&H._invalidate(H)}if(a.zpp_inner.weak){var V=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null,a.zpp_pool=jn.poolVec2,jn.poolVec2=a,null!=V.outer&&(V.outer.zpp_inner=null,V.outer=null),V._isimmutable=null,V._validate=null,V._invalidate=null,V.next=ep.zpp_pool,ep.zpp_pool=V}null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();var W=this.zpp_inner_zn.wrap_a4,X=s.zpp_inner;null!=X._validate&&X._validate();var q=s.zpp_inner.x,Y=s.zpp_inner;null!=Y._validate&&Y._validate();var Z,K=s.zpp_inner.y,J=W.zpp_inner;if(null!=J._validate&&J._validate(),W.zpp_inner.x==q){var Q=W.zpp_inner;null!=Q._validate&&Q._validate(),Z=W.zpp_inner.y==K}else Z=!1;if(!Z){W.zpp_inner.x=q,W.zpp_inner.y=K;var $=W.zpp_inner;null!=$._invalidate&&$._invalidate($)}if(s.zpp_inner.weak){var ee=s.zpp_inner;s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=ee.outer&&(ee.outer.zpp_inner=null,ee.outer=null),ee._isimmutable=null,ee._validate=null,ee._invalidate=null,ee.next=ep.zpp_pool,ep.zpp_pool=ee}null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),this.zpp_inner_zn.ratio!=h&&(this.zpp_inner_zn.ratio=h,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),this.zpp_inner_zn.jointMin!=p&&(this.zpp_inner_zn.jointMin=p,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),this.zpp_inner_zn.jointMax!=l&&(this.zpp_inner_zn.jointMax=l,this.zpp_inner.wake())};k.__name__=["nape","constraint","PulleyJoint"],k.__super__=te,k.prototype=Object.create(te.prototype),k.prototype.zpp_inner_zn=null,k.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},k.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b3!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},k.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},k.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b3!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},k.prototype.get_body3=function(){return null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},k.prototype.set_body3=function(e){this.zpp_inner.immutable_midstep("Constraint::body3");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},k.prototype.get_body4=function(){return null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},k.prototype.set_body4=function(e){this.zpp_inner.immutable_midstep("Constraint::body4");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b3!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},k.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},k.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},k.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},k.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},k.prototype.get_anchor3=function(){return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},k.prototype.set_anchor3=function(e){null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();var t=this.zpp_inner_zn.wrap_a3,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},k.prototype.get_anchor4=function(){return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},k.prototype.set_anchor4=function(e){null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();var t=this.zpp_inner_zn.wrap_a4,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},k.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},k.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},k.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},k.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},k.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},k.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},k.prototype.isSlack=function(){return this.zpp_inner_zn.slack},k.prototype.impulse=function(){var e=new X(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},k.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):K.get()},k.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer),null!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&e(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer),null!=(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&e(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)},Object.defineProperty(k.prototype,"body1",{get:k.prototype.get_body1,set:k.prototype.set_body1}),Object.defineProperty(k.prototype,"body2",{get:k.prototype.get_body2,set:k.prototype.set_body2}),Object.defineProperty(k.prototype,"body3",{get:k.prototype.get_body3,set:k.prototype.set_body3}),Object.defineProperty(k.prototype,"body4",{get:k.prototype.get_body4,set:k.prototype.set_body4}),Object.defineProperty(k.prototype,"anchor1",{get:k.prototype.get_anchor1,set:k.prototype.set_anchor1}),Object.defineProperty(k.prototype,"anchor2",{get:k.prototype.get_anchor2,set:k.prototype.set_anchor2}),Object.defineProperty(k.prototype,"anchor3",{get:k.prototype.get_anchor3,set:k.prototype.set_anchor3}),Object.defineProperty(k.prototype,"anchor4",{get:k.prototype.get_anchor4,set:k.prototype.set_anchor4}),Object.defineProperty(k.prototype,"jointMin",{get:k.prototype.get_jointMin,set:k.prototype.set_jointMin}),Object.defineProperty(k.prototype,"jointMax",{get:k.prototype.get_jointMax,set:k.prototype.set_jointMax}),Object.defineProperty(k.prototype,"ratio",{get:k.prototype.get_ratio,set:k.prototype.set_ratio}),k.prototype.__class__=k;var T=nape.constraint.UserConstraint=function(e,t){null==t&&(t=!1),this.zpp_inner_zn=null,this.zpp_inner_zn=new ct(e,t),this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this)};T.__name__=["nape","constraint","UserConstraint"],T.__super__=te,T.prototype=Object.create(te.prototype),T.prototype.zpp_inner_zn=null,T.prototype.__bindVec2=function(){var e=new lt;return e.zpp_inner._inuse=!0,e.zpp_inner._invalidate=$(d=this.zpp_inner_zn,d.bindVec2_invalidate),e},T.prototype.__copy=function(){return null},T.prototype.__broken=function(){},T.prototype.__validate=function(){},T.prototype.__draw=function(e){},T.prototype.__prepare=function(){},T.prototype.__position=function(e){},T.prototype.__velocity=function(e){},T.prototype.__eff_mass=function(e){},T.prototype.__clamp=function(e){},T.prototype.__impulse=function(e,t,i){},T.prototype.impulse=function(){for(var e=new X(this.zpp_inner_zn.dim,1),t=0,i=this.zpp_inner_zn.dim;t<i;){var n=t++;e.zpp_inner.x[n*e.zpp_inner.n]=this.zpp_inner_zn.jAcc[n]}return e},T.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):K.get()},T.prototype.visitBodies=function(e){for(var t=0,i=this.zpp_inner_zn.bodies.length;t<i;){var n=this.zpp_inner_zn.bodies[t];if(null!=n.body){for(var r=!1,o=t+1;o<i;)if(this.zpp_inner_zn.bodies[o++].body==n.body){r=!0;break}r||e(n.body.outer)}++t}},T.prototype.__invalidate=function(){this.zpp_inner.immutable_midstep("UserConstraint::invalidate()"),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner.wake()},T.prototype.__registerBody=function(e,t){return this.zpp_inner.immutable_midstep("UserConstraint::registerBody(..)"),e!=t&&(null!=e&&(this.zpp_inner_zn.remBody(e.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&e.zpp_inner.wake()),null!=t&&this.zpp_inner_zn.addBody(t.zpp_inner),this.zpp_inner.wake(),null!=t&&t.zpp_inner.wake()),t},T.prototype.__class__=T;var G=nape.constraint.WeldJoint=function(e,t,i,n,r){null==r&&(r=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new yt,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var o=null==e?null:e.zpp_inner;o!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b2!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var a=null==t?null:t.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var s=this.zpp_inner_zn.wrap_a1,p=i.zpp_inner;null!=p._validate&&p._validate();var l=i.zpp_inner.x,h=i.zpp_inner;null!=h._validate&&h._validate();var u,d=i.zpp_inner.y,c=s.zpp_inner;if(null!=c._validate&&c._validate(),s.zpp_inner.x==l){var _=s.zpp_inner;null!=_._validate&&_._validate(),u=s.zpp_inner.y==d}else u=!1;if(!u){s.zpp_inner.x=l,s.zpp_inner.y=d;var y=s.zpp_inner;null!=y._invalidate&&y._invalidate(y)}if(i.zpp_inner.weak){var x=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=ep.zpp_pool,ep.zpp_pool=x}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var m=this.zpp_inner_zn.wrap_a2,f=n.zpp_inner;null!=f._validate&&f._validate();var v=n.zpp_inner.x,g=n.zpp_inner;null!=g._validate&&g._validate();var z,b=n.zpp_inner.y,w=m.zpp_inner;if(null!=w._validate&&w._validate(),m.zpp_inner.x==v){var S=m.zpp_inner;null!=S._validate&&S._validate(),z=m.zpp_inner.y==b}else z=!1;if(!z){m.zpp_inner.x=v,m.zpp_inner.y=b;var C=m.zpp_inner;null!=C._invalidate&&C._invalidate(C)}if(n.zpp_inner.weak){var M=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=M.outer&&(M.outer.zpp_inner=null,M.outer=null),M._isimmutable=null,M._validate=null,M._invalidate=null,M.next=ep.zpp_pool,ep.zpp_pool=M}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("WeldJoint::phase"),this.zpp_inner_zn.phase!=r&&(this.zpp_inner_zn.phase=r,this.zpp_inner.wake())};G.__name__=["nape","constraint","WeldJoint"],G.__super__=te,G.prototype=Object.create(te.prototype),G.prototype.zpp_inner_zn=null,G.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},G.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},G.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},G.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},G.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},G.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},G.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},G.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},G.prototype.get_phase=function(){return this.zpp_inner_zn.phase},G.prototype.set_phase=function(e){return this.zpp_inner.immutable_midstep("WeldJoint::phase"),this.zpp_inner_zn.phase!=e&&(this.zpp_inner_zn.phase=e,this.zpp_inner.wake()),this.zpp_inner_zn.phase},G.prototype.impulse=function(){var e=new X(3,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccz,e},G.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):K.get()},G.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(G.prototype,"body1",{get:G.prototype.get_body1,set:G.prototype.set_body1}),Object.defineProperty(G.prototype,"body2",{get:G.prototype.get_body2,set:G.prototype.set_body2}),Object.defineProperty(G.prototype,"anchor1",{get:G.prototype.get_anchor1,set:G.prototype.set_anchor1}),Object.defineProperty(G.prototype,"anchor2",{get:G.prototype.get_anchor2,set:G.prototype.set_anchor2}),Object.defineProperty(G.prototype,"phase",{get:G.prototype.get_phase,set:G.prototype.set_phase}),G.prototype.__class__=G;var O=nape.dynamics.Arbiter=function(){this.zpp_inner=null};O.__name__=["nape","dynamics","Arbiter"],O.prototype.zpp_inner=null,O.prototype.get_isSleeping=function(){return this.zpp_inner.sleeping},O.prototype.get_type=function(){return ln.types[this.zpp_inner.type]},O.prototype.isCollisionArbiter=function(){return this.zpp_inner.type==ln.COL},O.prototype.isFluidArbiter=function(){return this.zpp_inner.type==ln.FLUID},O.prototype.isSensorArbiter=function(){return this.zpp_inner.type==ln.SENSOR},O.prototype.get_collisionArbiter=function(){return this.zpp_inner.type==ln.COL?this.zpp_inner.colarb.outer_zn:null},O.prototype.get_fluidArbiter=function(){return this.zpp_inner.type==ln.FLUID?this.zpp_inner.fluidarb.outer_zn:null},O.prototype.get_shape1=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer},O.prototype.get_shape2=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer},O.prototype.get_body1=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer},O.prototype.get_body2=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer},O.prototype.get_state=function(){var e=this.zpp_inner.immState;return 5==e?(null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT):1==e?(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT_ONCE):6==e?(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE):(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE_ONCE)},O.prototype.totalImpulse=function(e,t){return null==t&&(t=!1),K.get(0,0,0)},O.prototype.toString=function(){var e=this.zpp_inner.type==ln.COL?"CollisionArbiter":this.zpp_inner.type==ln.FLUID?"FluidArbiter":"SensorArbiter";if(this.zpp_inner.cleared)return e+"(object-pooled)";var t=e+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==ln.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-",i=this.zpp_inner.immState;return t+(5==i?(null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT):1==i?(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT_ONCE):6==i?(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE):(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE_ONCE)).toString()},Object.defineProperty(O.prototype,"isSleeping",{get:O.prototype.get_isSleeping}),Object.defineProperty(O.prototype,"type",{get:O.prototype.get_type}),Object.defineProperty(O.prototype,"collisionArbiter",{get:O.prototype.get_collisionArbiter}),Object.defineProperty(O.prototype,"fluidArbiter",{get:O.prototype.get_fluidArbiter}),Object.defineProperty(O.prototype,"shape1",{get:O.prototype.get_shape1}),Object.defineProperty(O.prototype,"shape2",{get:O.prototype.get_shape2}),Object.defineProperty(O.prototype,"body1",{get:O.prototype.get_body1}),Object.defineProperty(O.prototype,"body2",{get:O.prototype.get_body2}),Object.defineProperty(O.prototype,"state",{get:O.prototype.get_state}),O.prototype.__class__=O;var Xe=nape.dynamics.ArbiterIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Xe.__name__=["nape","dynamics","ArbiterIterator"],Xe.get=function(e){var t;if(null==Xe.zpp_pool){Dn.internal=!0;var i=new Xe;Dn.internal=!1,t=i}else{var n=Xe.zpp_pool;Xe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Xe.prototype.zpp_inner=null,Xe.prototype.zpp_i=null,Xe.prototype.zpp_critical=null,Xe.prototype.zpp_next=null,Xe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=this).zpp_inner=null,!1)},Xe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Xe.prototype.__class__=Xe;var A=nape.dynamics.ArbiterList=function(){this.zpp_inner=null,this.zpp_inner=new Dn,this.zpp_inner.outer=this};A.__name__=["nape","dynamics","ArbiterList"],A.fromArray=function(e){for(var t=new A,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},A.prototype.zpp_inner=null,A.prototype.get_length=function(){return this.zpp_gl()},A.prototype.zpp_gl=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.head;null!=e;)e.elt.active&&this.zpp_inner.user_length++,e=e.next}return this.zpp_inner.user_length},A.prototype.zpp_vm=function(){this.zpp_inner.valmod()},A.prototype.has=function(e){return this.zpp_vm(),this.zpp_inner.inner.has(e.zpp_inner)},A.prototype.at=function(e){if(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;for(;this.zpp_inner.at_index!=e;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},A.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(e.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},A.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)):this.zpp_inner.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},A.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var i=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},A.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var t=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},A.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},A.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},A.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},A.prototype.empty=function(){return 0==this.zpp_gl()},A.prototype.iterator=function(){return this.zpp_vm(),Xe.get(this)},A.prototype.copy=function(e){null==e&&(e=!1);for(var t=new A,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,!(i.zpp_i<n||(i.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var r=i.zpp_inner.at(i.zpp_i++);t.push(e?null:r)}return t},A.prototype.merge=function(e){for(var t=e.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,!(t.zpp_i<i||(t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var n=t.zpp_inner.at(t.zpp_i++);this.has(n)||this.add(n)}},A.prototype.toString=function(){for(var e="[",t=!0,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,!(i.zpp_i<n||(i.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var r=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==r?"NULL":r.toString(),t=!1}return e+"]"},A.prototype.foreach=function(e){for(var t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,!(t.zpp_i<i||(t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null;break}}return this},A.prototype.filter=function(e){for(var t=0;t<this.zpp_gl();){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(A.prototype,"length",{get:A.prototype.get_length}),A.prototype.__class__=A;var E=nape.dynamics.ArbiterType=function(){};E.__name__=["nape","dynamics","ArbiterType"],E.COLLISION=null,E.get_COLLISION=function(){return null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new E,Uo.internal=!1),Uo.ArbiterType_COLLISION},E.SENSOR=null,E.get_SENSOR=function(){return null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new E,Uo.internal=!1),Uo.ArbiterType_SENSOR},E.FLUID=null,E.get_FLUID=function(){return null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new E,Uo.internal=!1),Uo.ArbiterType_FLUID},E.prototype.toString=function(){return null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new E,Uo.internal=!1),this==Uo.ArbiterType_COLLISION?"COLLISION":(null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new E,Uo.internal=!1),this==Uo.ArbiterType_SENSOR?"SENSOR":(null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new E,Uo.internal=!1),this==Uo.ArbiterType_FLUID?"FLUID":""))},Object.defineProperty(E,"COLLISION",{get:E.get_COLLISION}),Object.defineProperty(E,"SENSOR",{get:E.get_SENSOR}),Object.defineProperty(E,"FLUID",{get:E.get_FLUID}),E.prototype.__class__=E;var I=nape.dynamics.CollisionArbiter=function(){O.call(this)};I.__name__=["nape","dynamics","CollisionArbiter"],I.__super__=O,I.prototype=Object.create(O.prototype),I.prototype.get_contacts=function(){return null==this.zpp_inner.colarb.wrap_contacts&&this.zpp_inner.colarb.setupcontacts(),this.zpp_inner.colarb.wrap_contacts},I.prototype.get_normal=function(){return null==this.zpp_inner.colarb.wrap_normal&&this.zpp_inner.colarb.getnormal(),this.zpp_inner.colarb.wrap_normal},I.prototype.get_radius=function(){return this.zpp_inner.colarb.radius},I.prototype.get_referenceEdge1=function(){var e=this.zpp_inner.colarb.__ref_edge1;return null==e||1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner.type&&(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner==e.polygon||(e=this.zpp_inner.colarb.__ref_edge2),null==e?null:e.wrapper()},I.prototype.get_referenceEdge2=function(){var e=this.zpp_inner.colarb.__ref_edge1;return null==e||1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner.type&&(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner==e.polygon||(e=this.zpp_inner.colarb.__ref_edge2),null==e?null:e.wrapper()},I.prototype.firstVertex=function(){return null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2)&&-1==this.zpp_inner.colarb.__ref_vertex},I.prototype.secondVertex=function(){return null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2)&&1==this.zpp_inner.colarb.__ref_vertex},I.prototype.normalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().normalImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var p=a.zpp_inner;null!=p._validate&&p._validate(),n+=a.zpp_inner.y;var l=a.zpp_inner;null!=l._validate&&l._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().normalImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var d=h.zpp_inner;null!=d._validate&&d._validate(),n+=h.zpp_inner.y;var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=h.zpp_inner.z,h.dispose()}return K.get(i,n,r)},I.prototype.tangentImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().tangentImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var p=a.zpp_inner;null!=p._validate&&p._validate(),n+=a.zpp_inner.y;var l=a.zpp_inner;null!=l._validate&&l._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().tangentImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var d=h.zpp_inner;null!=d._validate&&d._validate(),n+=h.zpp_inner.y;var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=h.zpp_inner.z,h.dispose()}return K.get(i,n,r)},I.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().totalImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var p=a.zpp_inner;null!=p._validate&&p._validate(),n+=a.zpp_inner.y;var l=a.zpp_inner;null!=l._validate&&l._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().totalImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var d=h.zpp_inner;null!=d._validate&&d._validate(),n+=h.zpp_inner.y;var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=h.zpp_inner.z,h.dispose()}return K.get(i,n,r)},I.prototype.rollingImpulse=function(e,t){null==t&&(t=!1);var i=this.zpp_inner.colarb;return!t||i.oc1.fresh?i.oc1.wrapper().rollingImpulse(e):0},I.prototype.get_elasticity=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.restitution},I.prototype.set_elasticity=function(e){var t=this.zpp_inner.colarb;t.restitution=e,t.userdef_restitution=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.restitution},I.prototype.get_dynamicFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.dyn_fric},I.prototype.set_dynamicFriction=function(e){var t=this.zpp_inner.colarb;t.dyn_fric=e,t.userdef_dyn_fric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.dyn_fric},I.prototype.get_staticFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.stat_fric},I.prototype.set_staticFriction=function(e){var t=this.zpp_inner.colarb;t.stat_fric=e,t.userdef_stat_fric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.stat_fric},I.prototype.get_rollingFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.rfric},I.prototype.set_rollingFriction=function(e){var t=this.zpp_inner.colarb;t.rfric=e,t.userdef_rfric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.rfric},Object.defineProperty(I.prototype,"contacts",{get:I.prototype.get_contacts}),Object.defineProperty(I.prototype,"normal",{get:I.prototype.get_normal}),Object.defineProperty(I.prototype,"radius",{get:I.prototype.get_radius}),Object.defineProperty(I.prototype,"referenceEdge1",{get:I.prototype.get_referenceEdge1}),Object.defineProperty(I.prototype,"referenceEdge2",{get:I.prototype.get_referenceEdge2}),Object.defineProperty(I.prototype,"elasticity",{get:I.prototype.get_elasticity,set:I.prototype.set_elasticity}),Object.defineProperty(I.prototype,"dynamicFriction",{get:I.prototype.get_dynamicFriction,set:I.prototype.set_dynamicFriction}),Object.defineProperty(I.prototype,"staticFriction",{get:I.prototype.get_staticFriction,set:I.prototype.set_staticFriction}),Object.defineProperty(I.prototype,"rollingFriction",{get:I.prototype.get_rollingFriction,set:I.prototype.set_rollingFriction}),I.prototype.__class__=I;var B=nape.dynamics.Contact=function(){this.zpp_inner=null};B.__name__=["nape","dynamics","Contact"],B.prototype.zpp_inner=null,B.prototype.get_arbiter=function(){if(null==this.zpp_inner.arbiter)return null;var e=this.zpp_inner.arbiter.outer;return e.zpp_inner.type==ln.COL?e.zpp_inner.colarb.outer_zn:null},B.prototype.get_penetration=function(){return-this.zpp_inner.dist},B.prototype.get_position=function(){return null==this.zpp_inner.wrap_position&&this.zpp_inner.getposition(),this.zpp_inner.wrap_position},B.prototype.get_fresh=function(){return this.zpp_inner.fresh},B.prototype.normalImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jnAcc;return null==e?K.get(t.nx*n,t.ny*n):e==t.b1.outer?K.get(t.nx*-n,t.ny*-n,-(t.ny*i.r1x-t.nx*i.r1y)*n):K.get(t.nx*n,t.ny*n,(t.ny*i.r2x-t.nx*i.r2y)*n)},B.prototype.tangentImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jtAcc;return null==e?K.get(-t.ny*n,t.nx*n):e==t.b1.outer?K.get(t.ny*n,-t.nx*n,-(i.r1x*t.nx+i.r1y*t.ny)*n):K.get(-t.ny*n,t.nx*n,(i.r2x*t.nx+i.r2y*t.ny)*n)},B.prototype.rollingImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.arbiter.colarb.jrAcc;return null==e?i:e==t.b1.outer?-i:i},B.prototype.totalImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jnAcc,r=i.jtAcc,o=t.jrAcc;if(null==e)return K.get(t.nx*n-t.ny*r,t.ny*n+t.nx*r,o);var a=t.nx*n-t.ny*r,s=t.ny*n+t.nx*r;return e==t.b1.outer?K.get(-a,-s,-(s*i.r1x-a*i.r1y)-o):K.get(a,s,s*i.r2x-a*i.r2y+o)},B.prototype.get_friction=function(){return this.zpp_inner.inner.friction},B.prototype.toString=function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},Object.defineProperty(B.prototype,"arbiter",{get:B.prototype.get_arbiter}),Object.defineProperty(B.prototype,"penetration",{get:B.prototype.get_penetration}),Object.defineProperty(B.prototype,"position",{get:B.prototype.get_position}),Object.defineProperty(B.prototype,"fresh",{get:B.prototype.get_fresh}),Object.defineProperty(B.prototype,"friction",{get:B.prototype.get_friction}),B.prototype.__class__=B;var qe=nape.dynamics.ContactIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};qe.__name__=["nape","dynamics","ContactIterator"],qe.get=function(e){var t;if(null==qe.zpp_pool){Rn.internal=!0;var i=new qe;Rn.internal=!1,t=i}else{var n=qe.zpp_pool;qe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},qe.prototype.zpp_inner=null,qe.prototype.zpp_i=null,qe.prototype.zpp_critical=null,qe.prototype.zpp_next=null,qe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;if(e.zpp_inner.valmod(),e.zpp_inner.zip_length){e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=0;for(var t=e.zpp_inner.inner.next;null!=t;){var i=t;i.active&&i.arbiter.active&&e.zpp_inner.user_length++,t=t.next}}var n=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<n||(this.zpp_next=qe.zpp_pool,(qe.zpp_pool=this).zpp_inner=null,!1)},qe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},qe.prototype.__class__=qe;var L=nape.dynamics.ContactList=function(){this.zpp_inner=null,this.zpp_inner=new Rn,this.zpp_inner.outer=this};L.__name__=["nape","dynamics","ContactList"],L.fromArray=function(e){for(var t=new L,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},L.prototype.zpp_inner=null,L.prototype.get_length=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}return this.zpp_inner.user_length},L.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},L.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var t=this.zpp_inner.inner.next;null!=t;){var i=t;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,t=t.next}}e=this.zpp_inner.user_length-1-e}if(e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var n=this.zpp_inner.at_ite;if(n.active&&n.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=e;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){var r=this.zpp_inner.at_ite;if(r.active&&r.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.wrapper()},L.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(null==this.zpp_inner.push_ite){var i;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=i}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},L.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var i;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=i}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},L.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(1==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)}var s=(e=null==i?this.zpp_inner.inner.next:i.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(s),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},L.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(1==this.zpp_inner.user_length)t=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var r=this.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&this.zpp_inner.user_length++,r=r.next}}t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)}var a=(e=null==t?this.zpp_inner.inner.next:t.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var s=(e=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(s),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},L.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},L.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.next;null!=i;){if(i==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},L.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}if(0==this.zpp_inner.user_length)break;this.pop()}else for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(0==this.zpp_inner.user_length)break;this.shift()}},L.prototype.empty=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}return 0==this.zpp_inner.user_length},L.prototype.iterator=function(){return this.zpp_inner.valmod(),qe.get(this)},L.prototype.copy=function(e){null==e&&(e=!1);var t=new L;this.zpp_inner.valmod();for(var i=qe.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;if(n.zpp_inner.valmod(),n.zpp_inner.zip_length){n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=0;for(var r=n.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&n.zpp_inner.user_length++,r=r.next}}var a=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<a||(i.zpp_next=qe.zpp_pool,(qe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var s=i.zpp_inner.at(i.zpp_i++);t.push(e?null:s)}return t},L.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=qe.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;if(i.zpp_inner.valmod(),i.zpp_inner.zip_length){i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=0;for(var n=i.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&i.zpp_inner.user_length++,n=n.next}}var o=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<o||(t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var a=t.zpp_inner.at(t.zpp_i++);this.has(a)||(this.zpp_inner.reverse_flag?this.push(a):this.unshift(a))}},L.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=qe.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;if(n.zpp_inner.valmod(),n.zpp_inner.zip_length){n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=0;for(var r=n.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&n.zpp_inner.user_length++,r=r.next}}var a=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<a||(i.zpp_next=qe.zpp_pool,(qe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var s=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==s?"NULL":s.toString(),t=!1}return e+"]"},L.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=qe.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;if(i.zpp_inner.valmod(),i.zpp_inner.zip_length){i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=0;for(var n=i.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&i.zpp_inner.user_length++,n=n.next}}var o=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<o||(t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null;break}}return this},L.prototype.filter=function(e){for(var t=0;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(!(t<this.zpp_inner.user_length))break;var r=this.at(t);try{e(r)?++t:this.remove(r)}catch(e){break}}return this},Object.defineProperty(L.prototype,"length",{get:L.prototype.get_length}),L.prototype.__class__=L;var D=nape.dynamics.FluidArbiter=function(){O.call(this)};D.__name__=["nape","dynamics","FluidArbiter"],D.__super__=O,D.prototype=Object.create(O.prototype),D.prototype.get_position=function(){return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},D.prototype.set_position=function(e){null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition();var t=this.zpp_inner.fluidarb.wrap_position,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},D.prototype.get_overlap=function(){return this.zpp_inner.fluidarb.overlap},D.prototype.set_overlap=function(e){return this.zpp_inner.fluidarb.overlap=e,this.zpp_inner.fluidarb.overlap},D.prototype.buoyancyImpulse=function(e){var t=this.zpp_inner.fluidarb;return null==e?K.get(t.buoyx,t.buoyy,0):e.zpp_inner==this.zpp_inner.b2?K.get(t.buoyx,t.buoyy,t.buoyy*t.r2x-t.buoyx*t.r2y):K.get(-t.buoyx,-t.buoyy,-(t.buoyy*t.r1x-t.buoyx*t.r1y))},D.prototype.dragImpulse=function(e){var t=this.zpp_inner.fluidarb,i=null==e||e.zpp_inner==this.zpp_inner.b2?1:-1;return K.get(t.dampx*i,t.dampy*i,t.adamp*i)},D.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=this.buoyancyImpulse(e),n=this.dragImpulse(e),r=n.zpp_inner;null!=r._validate&&r._validate();var o=n.zpp_inner.x,a=i.zpp_inner;null!=a._validate&&a._validate(),n.zpp_inner.x=o+i.zpp_inner.x;var s=n.zpp_inner;null!=s._validate&&s._validate();var p=n.zpp_inner;null!=p._validate&&p._validate();var l=n.zpp_inner.y,h=i.zpp_inner;null!=h._validate&&h._validate(),n.zpp_inner.y=l+i.zpp_inner.y;var u=n.zpp_inner;null!=u._validate&&u._validate();var d=n.zpp_inner;null!=d._validate&&d._validate();var c=n.zpp_inner.z,_=i.zpp_inner;null!=_._validate&&_._validate(),n.zpp_inner.z=c+i.zpp_inner.z;var y=n.zpp_inner;return null!=y._validate&&y._validate(),i.dispose(),n},Object.defineProperty(D.prototype,"position",{get:D.prototype.get_position,set:D.prototype.set_position}),Object.defineProperty(D.prototype,"overlap",{get:D.prototype.get_overlap,set:D.prototype.set_overlap}),D.prototype.__class__=D;var R=nape.dynamics.InteractionFilter=function(e,t,i,n,r,o){null==o&&(o=-1),null==r&&(r=1),null==n&&(n=-1),null==i&&(i=1),null==t&&(t=-1),null==e&&(e=1),(this.zpp_inner=null)==mt.zpp_pool?this.zpp_inner=new mt:(this.zpp_inner=mt.zpp_pool,mt.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),(this.zpp_inner.outer=this).zpp_inner.collisionGroup!=e&&(this.zpp_inner.collisionGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask!=t&&(this.zpp_inner.collisionMask=t,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup!=i&&(this.zpp_inner.sensorGroup=i,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask!=n&&(this.zpp_inner.sensorMask=n,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup!=r&&(this.zpp_inner.fluidGroup=r,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask!=o&&(this.zpp_inner.fluidMask=o,this.zpp_inner.invalidate())};R.__name__=["nape","dynamics","InteractionFilter"],R.prototype.zpp_inner=null,R.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},R.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=Bn.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},R.prototype.get_collisionGroup=function(){return this.zpp_inner.collisionGroup},R.prototype.set_collisionGroup=function(e){return this.zpp_inner.collisionGroup!=e&&(this.zpp_inner.collisionGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionGroup},R.prototype.get_collisionMask=function(){return this.zpp_inner.collisionMask},R.prototype.set_collisionMask=function(e){return this.zpp_inner.collisionMask!=e&&(this.zpp_inner.collisionMask=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask},R.prototype.get_sensorGroup=function(){return this.zpp_inner.sensorGroup},R.prototype.set_sensorGroup=function(e){return this.zpp_inner.sensorGroup!=e&&(this.zpp_inner.sensorGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup},R.prototype.get_sensorMask=function(){return this.zpp_inner.sensorMask},R.prototype.set_sensorMask=function(e){return this.zpp_inner.sensorMask!=e&&(this.zpp_inner.sensorMask=e,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask},R.prototype.get_fluidGroup=function(){return this.zpp_inner.fluidGroup},R.prototype.set_fluidGroup=function(e){return this.zpp_inner.fluidGroup!=e&&(this.zpp_inner.fluidGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup},R.prototype.get_fluidMask=function(){return this.zpp_inner.fluidMask},R.prototype.set_fluidMask=function(e){return this.zpp_inner.fluidMask!=e&&(this.zpp_inner.fluidMask=e,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask},R.prototype.shouldCollide=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&t.collisionGroup)},R.prototype.shouldSense=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.sensorMask&i.sensorGroup)&&0!=(i.sensorMask&t.sensorGroup)},R.prototype.shouldFlow=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.fluidMask&i.fluidGroup)&&0!=(i.fluidMask&t.fluidGroup)},R.prototype.copy=function(){return new R(this.zpp_inner.collisionGroup,this.zpp_inner.collisionMask,this.zpp_inner.sensorGroup,this.zpp_inner.sensorMask,this.zpp_inner.fluidGroup,this.zpp_inner.fluidMask)},R.prototype.toString=function(){return"{ collision: "+e.hex(this.zpp_inner.collisionGroup,8)+"~"+e.hex(this.zpp_inner.collisionMask,8)+" sensor: "+e.hex(this.zpp_inner.sensorGroup,8)+"~"+e.hex(this.zpp_inner.sensorMask,8)+" fluid: "+e.hex(this.zpp_inner.fluidGroup,8)+"~"+e.hex(this.zpp_inner.fluidMask,8)+" }"},Object.defineProperty(R.prototype,"userData",{get:R.prototype.get_userData}),Object.defineProperty(R.prototype,"shapes",{get:R.prototype.get_shapes}),Object.defineProperty(R.prototype,"collisionGroup",{get:R.prototype.get_collisionGroup,set:R.prototype.set_collisionGroup}),Object.defineProperty(R.prototype,"collisionMask",{get:R.prototype.get_collisionMask,set:R.prototype.set_collisionMask}),Object.defineProperty(R.prototype,"sensorGroup",{get:R.prototype.get_sensorGroup,set:R.prototype.set_sensorGroup}),Object.defineProperty(R.prototype,"sensorMask",{get:R.prototype.get_sensorMask,set:R.prototype.set_sensorMask}),Object.defineProperty(R.prototype,"fluidGroup",{get:R.prototype.get_fluidGroup,set:R.prototype.set_fluidGroup}),Object.defineProperty(R.prototype,"fluidMask",{get:R.prototype.get_fluidMask,set:R.prototype.set_fluidMask}),R.prototype.__class__=R;var F=nape.dynamics.InteractionGroup=function(e){null==e&&(e=!1),this.zpp_inner=null,this.zpp_inner=new ft,(this.zpp_inner.outer=this).zpp_inner.ignore!=e&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=e)};F.__name__=["nape","dynamics","InteractionGroup"],F.prototype.zpp_inner=null,F.prototype.get_group=function(){return null==this.zpp_inner.group?null:this.zpp_inner.group.outer},F.prototype.set_group=function(e){return this.zpp_inner.setGroup(null==e?null:e.zpp_inner),null==this.zpp_inner.group?null:this.zpp_inner.group.outer},F.prototype.get_ignore=function(){return this.zpp_inner.ignore},F.prototype.set_ignore=function(e){return this.zpp_inner.ignore!=e&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=e),this.zpp_inner.ignore},F.prototype.get_interactors=function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=vn.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},F.prototype.get_groups=function(){return null==this.zpp_inner.wrap_groups&&(this.zpp_inner.wrap_groups=Ln.get(this.zpp_inner.groups,!0)),this.zpp_inner.wrap_groups},F.prototype.toString=function(){var e="InteractionGroup";return this.zpp_inner.ignore&&(e="InteractionGroup:ignore"),e},Object.defineProperty(F.prototype,"group",{get:F.prototype.get_group,set:F.prototype.set_group}),Object.defineProperty(F.prototype,"ignore",{get:F.prototype.get_ignore,set:F.prototype.set_ignore}),Object.defineProperty(F.prototype,"interactors",{get:F.prototype.get_interactors}),Object.defineProperty(F.prototype,"groups",{get:F.prototype.get_groups}),F.prototype.__class__=F;var Ye=nape.dynamics.InteractionGroupIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ye.__name__=["nape","dynamics","InteractionGroupIterator"],Ye.get=function(e){var t;if(null==Ye.zpp_pool){Ln.internal=!0;var i=new Ye;Ln.internal=!1,t=i}else{var n=Ye.zpp_pool;Ye.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ye.prototype.zpp_inner=null,Ye.prototype.zpp_i=null,Ye.prototype.zpp_critical=null,Ye.prototype.zpp_next=null,Ye.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=this).zpp_inner=null,!1)},Ye.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ye.prototype.__class__=Ye;var j=nape.dynamics.InteractionGroupList=function(){this.zpp_inner=null,this.zpp_inner=new Ln,this.zpp_inner.outer=this};j.__name__=["nape","dynamics","InteractionGroupList"],j.fromArray=function(e){for(var t=new j,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},j.prototype.zpp_inner=null,j.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},j.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},j.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},j.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},j.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},j.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},j.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},j.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},j.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},j.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},j.prototype.empty=function(){return null==this.zpp_inner.inner.head},j.prototype.iterator=function(){return this.zpp_inner.valmod(),Ye.get(this)},j.prototype.copy=function(e){null==e&&(e=!1);var t=new j;this.zpp_inner.valmod();for(var i=Ye.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},j.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ye.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},j.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ye.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},j.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ye.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null;break}}return this},j.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(j.prototype,"length",{get:j.prototype.get_length}),j.prototype.__class__=j;var N=nape.geom.AABB=function(e,t,i,n){var r;null==n&&(n=0),null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),(this.zpp_inner=null)==Oo.zpp_pool?r=new Oo:(r=Oo.zpp_pool,Oo.zpp_pool=r.next,r.next=null),r.minx=e,r.miny=t,r.maxx=e+i,r.maxy=t+n,this.zpp_inner=r,this.zpp_inner.outer=this};N.__name__=["nape","geom","AABB"],N.prototype.zpp_inner=null,N.prototype.copy=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t,i=this.zpp_inner,n=i.minx,r=i.miny,o=i.maxx,a=i.maxy;return null==Oo.zpp_pool?t=new Oo:(t=Oo.zpp_pool,Oo.zpp_pool=t.next,t.next=null),t.minx=n,t.miny=r,t.maxx=o,t.maxy=a,t.wrapper()},N.prototype.get_min=function(){return this.zpp_inner.getmin()},N.prototype.set_min=function(e){var t=this.zpp_inner.getmin(),i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return this.zpp_inner.getmin()},N.prototype.get_max=function(){return this.zpp_inner.getmax()},N.prototype.set_max=function(e){var t=this.zpp_inner.getmax(),i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return this.zpp_inner.getmax()},N.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.minx},N.prototype.set_x=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.minx!=e){this.zpp_inner.maxx+=e-this.zpp_inner.minx,this.zpp_inner.minx=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.minx},N.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.miny},N.prototype.set_y=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.miny!=e){this.zpp_inner.maxy+=e-this.zpp_inner.miny,this.zpp_inner.miny=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.miny},N.prototype.get_width=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner;return t.maxx-t.minx},N.prototype.set_width=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner;if(i.maxx-i.minx!=e){var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.maxx=this.zpp_inner.minx+e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner;return a.maxx-a.minx},N.prototype.get_height=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner;return t.maxy-t.miny},N.prototype.set_height=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner;if(i.maxy-i.miny!=e){var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.maxy=this.zpp_inner.miny+e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner;return a.maxy-a.miny},N.prototype.toString=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.toString()},Object.defineProperty(N.prototype,"min",{get:N.prototype.get_min,set:N.prototype.set_min}),Object.defineProperty(N.prototype,"max",{get:N.prototype.get_max,set:N.prototype.set_max}),Object.defineProperty(N.prototype,"x",{get:N.prototype.get_x,set:N.prototype.set_x}),Object.defineProperty(N.prototype,"y",{get:N.prototype.get_y,set:N.prototype.set_y}),Object.defineProperty(N.prototype,"width",{get:N.prototype.get_width,set:N.prototype.set_width}),Object.defineProperty(N.prototype,"height",{get:N.prototype.get_height,set:N.prototype.set_height}),N.prototype.__class__=N;var U=nape.geom.ConvexResult=function(){this.zpp_inner=null};U.__name__=["nape","geom","ConvexResult"],U.prototype.zpp_inner=null,U.prototype.get_normal=function(){return this.zpp_inner.normal},U.prototype.get_position=function(){return this.zpp_inner.position},U.prototype.get_toi=function(){return this.zpp_inner.toiDistance},U.prototype.get_shape=function(){return this.zpp_inner.shape},U.prototype.dispose=function(){this.zpp_inner.free()},U.prototype.toString=function(){return"{ shape: "+n.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},Object.defineProperty(U.prototype,"normal",{get:U.prototype.get_normal}),Object.defineProperty(U.prototype,"position",{get:U.prototype.get_position}),Object.defineProperty(U.prototype,"toi",{get:U.prototype.get_toi}),Object.defineProperty(U.prototype,"shape",{get:U.prototype.get_shape}),U.prototype.__class__=U;var Ze=nape.geom.ConvexResultIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ze.__name__=["nape","geom","ConvexResultIterator"],Ze.get=function(e){var t;if(null==Ze.zpp_pool){En.internal=!0;var i=new Ze;En.internal=!1,t=i}else{var n=Ze.zpp_pool;Ze.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ze.prototype.zpp_inner=null,Ze.prototype.zpp_i=null,Ze.prototype.zpp_critical=null,Ze.prototype.zpp_next=null,Ze.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=this).zpp_inner=null,!1)},Ze.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ze.prototype.__class__=Ze;var pt=nape.geom.ConvexResultList=function(){this.zpp_inner=null,this.zpp_inner=new En,this.zpp_inner.outer=this};pt.__name__=["nape","geom","ConvexResultList"],pt.fromArray=function(e){for(var t=new pt,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},pt.prototype.zpp_inner=null,pt.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},pt.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e)},pt.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},pt.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},pt.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}else this.zpp_inner.inner.add(e);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},pt.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e},pt.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e},pt.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},pt.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e),this.zpp_inner.invalidate()),t},pt.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},pt.prototype.empty=function(){return null==this.zpp_inner.inner.head},pt.prototype.iterator=function(){return this.zpp_inner.valmod(),Ze.get(this)},pt.prototype.copy=function(e){null==e&&(e=!1);var t=new pt;this.zpp_inner.valmod();for(var i=Ze.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},pt.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ze.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},pt.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ze.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},pt.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ze.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null;break}}return this},pt.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(pt.prototype,"length",{get:pt.prototype.get_length}),pt.prototype.__class__=pt;var H=nape.geom.Geom=function(){};H.__name__=["nape","geom","Geom"],H.distanceBody=function(e,t,i,n){for(var r=e.zpp_inner.shapes.head;null!=r;)wt.validateShape(r.elt),r=r.next;for(var o=t.zpp_inner.shapes.head;null!=o;)wt.validateShape(o.elt),o=o.next;return Vt.distanceBody(e.zpp_inner,t.zpp_inner,i.zpp_inner,n.zpp_inner)},H.distance=function(e,t,i,n){var r;wt.validateShape(e.zpp_inner),wt.validateShape(t.zpp_inner),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1;var o,a=e.zpp_inner,s=t.zpp_inner,p=i.zpp_inner,l=n.zpp_inner;if(0==a.type&&0==s.type){var h,u=a.circle,d=s.circle,c=0,_=0;c=d.worldCOMx-u.worldCOMx,_=d.worldCOMy-u.worldCOMy;var y=Math.sqrt(c*c+_*_);if((h=y-(u.radius+d.radius))<1e100){if(0==y)c=1,_=0;else{var x=1/y;c*=x,_*=x}var m=u.radius;p.x=u.worldCOMx+c*m,p.y=u.worldCOMy+_*m;var f=-d.radius;l.x=d.worldCOMx+c*f,l.y=d.worldCOMy+_*f,r.x=c,r.y=_}o=h}else{var v=!1;if(0==a.type&&1==s.type){var g=a;a=s,s=g;var z=p;p=l,l=z,v=!0}if(1==a.type&&0==s.type){for(var b=a.polygon,w=s.circle,S=-1e100,C=null,M=b.edges.head;null!=M;){var P=M.elt,k=P.gnormx*w.worldCOMx+P.gnormy*w.worldCOMy-P.gprojection-w.radius;if(1e100<k){S=k;break}0<k?S<k&&(S=k,C=P):S<0&&S<k&&(S=k,C=P),M=M.next}if(S<1e100){var T=C.gp0,G=C.gp1,O=w.worldCOMy*C.gnormx-w.worldCOMx*C.gnormy;if(O<=T.y*C.gnormx-T.x*C.gnormy){var A=0,E=0;A=w.worldCOMx-T.x,E=w.worldCOMy-T.y;var I=Math.sqrt(A*A+E*E);if((S=I-w.radius)<1e100){if(0==I)A=1,E=0;else{var B=1/I;A*=B,E*=B}p.x=T.x+0*A,p.y=T.y+0*E;var L=-w.radius;l.x=w.worldCOMx+A*L,l.y=w.worldCOMy+E*L,r.x=A,r.y=E}}else if(O>=G.y*C.gnormx-G.x*C.gnormy){var D=0,R=0;D=w.worldCOMx-G.x,R=w.worldCOMy-G.y;var F=Math.sqrt(D*D+R*R);if((S=F-w.radius)<1e100){if(0==F)D=1,R=0;else{var j=1/F;D*=j,R*=j}p.x=G.x+0*D,p.y=G.y+0*R;var N=-w.radius;l.x=w.worldCOMx+D*N,l.y=w.worldCOMy+R*N,r.x=D,r.y=R}}else{var U=-w.radius;l.x=w.worldCOMx+C.gnormx*U,l.y=w.worldCOMy+C.gnormy*U;var H=-S;p.x=l.x+C.gnormx*H,p.y=l.y+C.gnormy*H,r.x=C.gnormx,r.y=C.gnormy}}v&&(r.x=-r.x,r.y=-r.y),o=S}else{for(var V=a.polygon,W=s.polygon,X=-1e100,q=null,Y=null,Z=0,K=V.edges.head;null!=K;){for(var J=K.elt,Q=1e100,$=W.gverts.next;null!=$;){var ee=$,te=J.gnormx*ee.x+J.gnormy*ee.y;te<Q&&(Q=te),$=$.next}if(1e100<(Q-=J.gprojection)){X=Q;break}0<Q?X<Q&&(X=Q,q=J,Z=1):X<0&&X<Q&&(X=Q,q=J,Z=1),K=K.next}if(X<1e100){for(var ie=W.edges.head;null!=ie;){for(var ne=ie.elt,re=1e100,oe=V.gverts.next;null!=oe;){var ae=oe,se=ne.gnormx*ae.x+ne.gnormy*ae.y;se<re&&(re=se),oe=oe.next}if(1e100<(re-=ne.gprojection)){X=re;break}0<re?X<re&&(X=re,Y=ne,Z=2):X<0&&X<re&&(X=re,Y=ne,Z=2),ie=ie.next}if(X<1e100){var pe,le;if(1==Z)pe=W,le=q;else{pe=V,le=Y;var he=p;p=l,l=he,v=!v}for(var ue=null,de=1e100,ce=pe.edges.head;null!=ce;){var _e=ce.elt,ye=le.gnormx*_e.gnormx+le.gnormy*_e.gnormy;ye<de&&(de=ye,ue=_e),ce=ce.next}if(v?(r.x=-le.gnormx,r.y=-le.gnormy):(r.x=le.gnormx,r.y=le.gnormy),0<=X){var xe,me,fe,ve,ge=le.gp0,ze=le.gp1,be=ue.gp0,we=ue.gp1,Se=1/((xe=ze.x-ge.x)*xe+(me=ze.y-ge.y)*me),Ce=1/((fe=we.x-be.x)*fe+(ve=we.y-be.y)*ve),Me=-(xe*(ge.x-be.x)+me*(ge.y-be.y))*Se,Pe=-(xe*(ge.x-we.x)+me*(ge.y-we.y))*Se,ke=-(fe*(be.x-ge.x)+ve*(be.y-ge.y))*Ce,Te=-(fe*(be.x-ze.x)+ve*(be.y-ze.y))*Ce;Me<0?Me=0:1<Me&&(Me=1),Pe<0?Pe=0:1<Pe&&(Pe=1),ke<0?ke=0:1<ke&&(ke=1),Te<0?Te=0:1<Te&&(Te=1);var Ge,Oe,Ae=Me;Ge=ge.x+xe*Ae,Oe=ge.y+me*Ae;var Ee,Ie,Be=Pe;Ee=ge.x+xe*Be,Ie=ge.y+me*Be;var Le,De,Re=ke;Le=be.x+fe*Re,De=be.y+ve*Re;var Fe,je,Ne=Te;Fe=be.x+fe*Ne,je=be.y+ve*Ne;var Ue,He,Ve,We,Xe,qe,Ye,Ze,Ke=(Ue=Ge-be.x)*Ue+(He=Oe-be.y)*He,Je=(Ve=Ee-we.x)*Ve+(We=Ie-we.y)*We,Qe=(Xe=Le-ge.x)*Xe+(qe=De-ge.y)*qe,$e=(Ye=Fe-ze.x)*Ye+(Ze=je-ze.y)*Ze,et=0,tt=0,it=null;Ke<Je?(et=Ge,tt=Oe,it=be):(et=Ee,tt=Ie,it=we,Ke=Je);var nt=0,rt=0,ot=null;if(Qe<$e?(nt=Le,rt=De,ot=ge):(nt=Fe,rt=je,ot=ze,Qe=$e),0!=(X=Ke<Qe?(p.x=et,p.y=tt,l.x=it.x,l.y=it.y,Math.sqrt(Ke)):(l.x=nt,l.y=rt,p.x=ot.x,p.y=ot.y,Math.sqrt(Qe)))){r.x=l.x-p.x,r.y=l.y-p.y;var at=1/X;r.x*=at,r.y*=at,v&&(r.x=-r.x,r.y=-r.y)}o=X}else{var st=0,pt=0;st=ue.gp0.x,pt=ue.gp0.y;var lt,ht,ut=0,dt=0;lt=(ut=ue.gp1.x)-st,ht=(dt=ue.gp1.y)-pt;var ct=le.gnormy*st-le.gnormx*pt,_t=le.gnormy*ut-le.gnormx*dt,yt=1/(_t-ct),xt=(-le.tp1-ct)*yt;xt>Qs.epsilon&&(st+=lt*xt,pt+=ht*xt);var mt=(-le.tp0-_t)*yt;mt<-Qs.epsilon&&(ut+=lt*mt,dt+=ht*mt);var ft=st*le.gnormx+pt*le.gnormy-le.gprojection,vt=ut*le.gnormx+dt*le.gnormy-le.gprojection;if(ft<vt){l.x=st,l.y=pt;var gt=-ft;p.x=l.x+le.gnormx*gt,p.y=l.y+le.gnormy*gt,o=ft}else{l.x=ut,l.y=dt;var zt=-vt;p.x=l.x+le.gnormx*zt,p.y=l.y+le.gnormy*zt,o=vt}}}else o=1e100}else o=1e100}}var bt=r;return null!=bt.outer&&(bt.outer.zpp_inner=null,bt.outer=null),bt._isimmutable=null,bt._validate=null,bt._invalidate=null,bt.next=ep.zpp_pool,ep.zpp_pool=bt,o},H.intersectsBody=function(e,t){for(var i=e.zpp_inner.shapes.head;null!=i;)wt.validateShape(i.elt),i=i.next;for(var n=t.zpp_inner.shapes.head;null!=n;)wt.validateShape(n.elt),n=n.next;var r=e.zpp_inner.aabb,o=t.zpp_inner.aabb;if(o.miny<=r.maxy&&r.miny<=o.maxy&&o.minx<=r.maxx&&r.minx<=o.maxx){for(var a=e.zpp_inner.shapes.head;null!=a;){for(var s=a.elt,p=t.zpp_inner.shapes.head;null!=p;){if($s.testCollide_safe(s,p.elt))return!0;p=p.next}a=a.next}return!1}return!1},H.intersects=function(e,t){wt.validateShape(e.zpp_inner),wt.validateShape(t.zpp_inner);var i=e.zpp_inner.aabb,n=t.zpp_inner.aabb;return n.miny<=i.maxy&&i.miny<=n.maxy&&n.minx<=i.maxx&&i.minx<=n.maxx&&$s.testCollide_safe(e.zpp_inner,t.zpp_inner)},H.contains=function(e,t){return wt.validateShape(e.zpp_inner),wt.validateShape(t.zpp_inner),$s.containTest(e.zpp_inner,t.zpp_inner)},H.prototype.__class__=H;var bn=nape.geom.GeomPoly=function(e){if(this.zpp_inner=null,this.zpp_pool=null,this.zpp_inner=new St(this),null!=e){if(e instanceof Array&&null==e.__enum__)for(var t=e,i=0;i<t.length;){var n=t[i];++i;var r=n,o=r.zpp_inner;null!=o._validate&&o._validate();var a=r.zpp_inner.x,s=r.zpp_inner;null!=s._validate&&s._validate();var p,l=r.zpp_inner.y;null==cr.zpp_pool?p=new cr:(p=cr.zpp_pool,cr.zpp_pool=p.next,p.next=null),p.forced=!1,p.x=a,p.y=l;var h=p;null==this.zpp_inner.vertices?this.zpp_inner.vertices=h.prev=h.next=h:(h.prev=this.zpp_inner.vertices,h.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=h,this.zpp_inner.vertices.next=h),this.zpp_inner.vertices=h}else if(ve.__instanceof(e,ge))for(var u=e.iterator();;){u.zpp_inner.zpp_inner.valmod();var d=u.zpp_inner.zpp_gl();if(u.zpp_critical=!0,!(u.zpp_i<d||(u.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=u).zpp_inner=null,!1)))break;u.zpp_critical=!1;var c=u.zpp_inner.at(u.zpp_i++),_=c.zpp_inner;null!=_._validate&&_._validate();var y=c.zpp_inner.x,x=c.zpp_inner;null!=x._validate&&x._validate();var m,f=c.zpp_inner.y;null==cr.zpp_pool?m=new cr:(m=cr.zpp_pool,cr.zpp_pool=m.next,m.next=null),m.forced=!1,m.x=y,m.y=f;var v=m;null==this.zpp_inner.vertices?this.zpp_inner.vertices=v.prev=v.next=v:(v.prev=this.zpp_inner.vertices,v.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=v,this.zpp_inner.vertices.next=v),this.zpp_inner.vertices=v}else if(ve.__instanceof(e,bn)){var g=e.zpp_inner.vertices;if(null!=g)for(var z=g;;){var b,w=z.x,S=z.y;if(null==jn.poolVec2?b=new lt:(b=jn.poolVec2,jn.poolVec2=b.zpp_pool,b.zpp_pool=null),null==b.zpp_inner){var C;null==ep.zpp_pool?C=new ep:(C=ep.zpp_pool,ep.zpp_pool=C.next,C.next=null),C.weak=!1,C._immutable=!1,C.x=w,C.y=S,b.zpp_inner=C,b.zpp_inner.outer=b}else{var M,P=b.zpp_inner;if(null!=P._validate&&P._validate(),b.zpp_inner.x==w){var k=b.zpp_inner;null!=k._validate&&k._validate(),M=b.zpp_inner.y==S}else M=!1;if(!M){b.zpp_inner.x=w,b.zpp_inner.y=S;var T=b.zpp_inner;null!=T._invalidate&&T._invalidate(T)}}b.zpp_inner.weak=!1;var G=b;z=z.next;var O=G.zpp_inner;null!=O._validate&&O._validate();var A=G.zpp_inner.x,E=G.zpp_inner;null!=E._validate&&E._validate();var I,B=G.zpp_inner.y;null==cr.zpp_pool?I=new cr:(I=cr.zpp_pool,cr.zpp_pool=I.next,I.next=null),I.forced=!1,I.x=A,I.y=B;var L=I;null==this.zpp_inner.vertices?this.zpp_inner.vertices=L.prev=L.next=L:(L.prev=this.zpp_inner.vertices,L.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=L,this.zpp_inner.vertices.next=L),this.zpp_inner.vertices=L;var D=G.zpp_inner;G.zpp_inner.outer=null,G.zpp_inner=null;var R=G;R.zpp_pool=jn.poolVec2,jn.poolVec2=R;var F=D;if(null!=F.outer&&(F.outer.zpp_inner=null,F.outer=null),F._isimmutable=null,F._validate=null,F._invalidate=null,F.next=ep.zpp_pool,ep.zpp_pool=F,z==g)break}}if(this.skipForward(1),e instanceof Array&&null==e.__enum__)for(var j=e,N=0;N<j.length;){var U,H=j[N];if(H.zpp_inner.weak){var V=H.zpp_inner;H.zpp_inner.outer=null,H.zpp_inner=null;var W=H;W.zpp_pool=jn.poolVec2,jn.poolVec2=W;var X=V;null!=X.outer&&(X.outer.zpp_inner=null,X.outer=null),X._isimmutable=null,X._validate=null,X._invalidate=null,X.next=ep.zpp_pool,ep.zpp_pool=X,U=!0}else U=!1;U?j.splice(N,1):++N}else if(ve.__instanceof(e,ge)){var q=e;null!=q.zpp_inner._validate&&q.zpp_inner._validate();for(var Y=q.zpp_inner.inner,Z=null,K=Y.head;null!=K;){var J=K.elt;if(J.outer.zpp_inner.weak){if(K=Y.erase(Z),J.outer.zpp_inner.weak){var Q=J.outer,$=Q.zpp_inner;Q.zpp_inner.outer=null,Q.zpp_inner=null;var ee=Q;ee.zpp_pool=jn.poolVec2,jn.poolVec2=ee;var te=$;null!=te.outer&&(te.outer.zpp_inner=null,te.outer=null),te._isimmutable=null,te._validate=null,te._invalidate=null,te.next=ep.zpp_pool,ep.zpp_pool=te}}else K=(Z=K).next}}}};bn.__name__=["nape","geom","GeomPoly"],bn.get=function(e){var t;if(null==jn.poolGeomPoly?t=new bn:(t=jn.poolGeomPoly,jn.poolGeomPoly=t.zpp_pool,t.zpp_pool=null),null!=e){if(e instanceof Array&&null==e.__enum__)for(var i=e,n=0;n<i.length;){var r=i[n];++n;var o=r,a=o.zpp_inner;null!=a._validate&&a._validate();var s=o.zpp_inner.x,p=o.zpp_inner;null!=p._validate&&p._validate();var l,h=o.zpp_inner.y;null==cr.zpp_pool?l=new cr:(l=cr.zpp_pool,cr.zpp_pool=l.next,l.next=null),l.forced=!1,l.x=s,l.y=h;var u=l;null==t.zpp_inner.vertices?t.zpp_inner.vertices=u.prev=u.next=u:(u.prev=t.zpp_inner.vertices,u.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=u,t.zpp_inner.vertices.next=u),t.zpp_inner.vertices=u}else if(ve.__instanceof(e,ge))for(var d=e.iterator();;){d.zpp_inner.zpp_inner.valmod();var c=d.zpp_inner.zpp_gl();if(d.zpp_critical=!0,!(d.zpp_i<c||(d.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=d).zpp_inner=null,!1)))break;d.zpp_critical=!1;var _=d.zpp_inner.at(d.zpp_i++),y=_.zpp_inner;null!=y._validate&&y._validate();var x=_.zpp_inner.x,m=_.zpp_inner;null!=m._validate&&m._validate();var f,v=_.zpp_inner.y;null==cr.zpp_pool?f=new cr:(f=cr.zpp_pool,cr.zpp_pool=f.next,f.next=null),f.forced=!1,f.x=x,f.y=v;var g=f;null==t.zpp_inner.vertices?t.zpp_inner.vertices=g.prev=g.next=g:(g.prev=t.zpp_inner.vertices,g.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=g,t.zpp_inner.vertices.next=g),t.zpp_inner.vertices=g}else if(ve.__instanceof(e,bn)){var z=e.zpp_inner.vertices;if(null!=z)for(var b=z;;){var w,S=b.x,C=b.y;if(null==jn.poolVec2?w=new lt:(w=jn.poolVec2,jn.poolVec2=w.zpp_pool,w.zpp_pool=null),null==w.zpp_inner){var M;null==ep.zpp_pool?M=new ep:(M=ep.zpp_pool,ep.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=S,M.y=C,w.zpp_inner=M,w.zpp_inner.outer=w}else{var P,k=w.zpp_inner;if(null!=k._validate&&k._validate(),w.zpp_inner.x==S){var T=w.zpp_inner;null!=T._validate&&T._validate(),P=w.zpp_inner.y==C}else P=!1;if(!P){w.zpp_inner.x=S,w.zpp_inner.y=C;var G=w.zpp_inner;null!=G._invalidate&&G._invalidate(G)}}w.zpp_inner.weak=!1;var O=w;b=b.next;var A=O.zpp_inner;null!=A._validate&&A._validate();var E=O.zpp_inner.x,I=O.zpp_inner;null!=I._validate&&I._validate();var B,L=O.zpp_inner.y;null==cr.zpp_pool?B=new cr:(B=cr.zpp_pool,cr.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=E,B.y=L;var D=B;null==t.zpp_inner.vertices?t.zpp_inner.vertices=D.prev=D.next=D:(D.prev=t.zpp_inner.vertices,D.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=D,t.zpp_inner.vertices.next=D),t.zpp_inner.vertices=D;var R=O.zpp_inner;O.zpp_inner.outer=null,O.zpp_inner=null;var F=O;F.zpp_pool=jn.poolVec2,jn.poolVec2=F;var j=R;if(null!=j.outer&&(j.outer.zpp_inner=null,j.outer=null),j._isimmutable=null,j._validate=null,j._invalidate=null,j.next=ep.zpp_pool,ep.zpp_pool=j,b==z)break}}if(t.skipForward(1),e instanceof Array&&null==e.__enum__)for(var N=e,U=0;U<N.length;){var H,V=N[U];if(V.zpp_inner.weak){var W=V.zpp_inner;V.zpp_inner.outer=null,V.zpp_inner=null;var X=V;X.zpp_pool=jn.poolVec2,jn.poolVec2=X;var q=W;null!=q.outer&&(q.outer.zpp_inner=null,q.outer=null),q._isimmutable=null,q._validate=null,q._invalidate=null,q.next=ep.zpp_pool,ep.zpp_pool=q,H=!0}else H=!1;H?N.splice(U,1):++U}else if(ve.__instanceof(e,ge)){var Y=e;null!=Y.zpp_inner._validate&&Y.zpp_inner._validate();for(var Z=Y.zpp_inner.inner,K=null,J=Z.head;null!=J;){var Q=J.elt;if(Q.outer.zpp_inner.weak){if(J=Z.erase(K),Q.outer.zpp_inner.weak){var $=Q.outer,ee=$.zpp_inner;$.zpp_inner.outer=null,$.zpp_inner=null;var te=$;te.zpp_pool=jn.poolVec2,jn.poolVec2=te;var ie=ee;null!=ie.outer&&(ie.outer.zpp_inner=null,ie.outer=null),ie._isimmutable=null,ie._validate=null,ie._invalidate=null,ie.next=ep.zpp_pool,ep.zpp_pool=ie}}else J=(K=J).next}}}return t},bn.prototype.zpp_pool=null,bn.prototype.zpp_inner=null,bn.prototype.empty=function(){return null==this.zpp_inner.vertices},bn.prototype.size=function(){var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;++e,(n=n.next)!=i;);return e},bn.prototype.iterator=function(){return Ct.get(this.zpp_inner.vertices,!0)},bn.prototype.forwardIterator=function(){return Ct.get(this.zpp_inner.vertices,!0)},bn.prototype.backwardsIterator=function(){return Ct.get(this.zpp_inner.vertices,!1)},bn.prototype.current=function(){var e=this.zpp_inner.vertices;if(null==e.wrap){var t,i=e.x,n=e.y;if(null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}t.zpp_inner.weak=!1,e.wrap=t,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.push=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y;null==cr.zpp_pool?r=new cr:(r=cr.zpp_pool,cr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=i,r.y=o;var a=r;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=a.prev=a.next=a:(a.prev=this.zpp_inner.vertices,a.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=a,this.zpp_inner.vertices.next=a),this.zpp_inner.vertices=a,e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return this},bn.prototype.pop=function(){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=null;else{var i=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,t.wrap=null}return t.prev=t.next=null,t.next=cr.zpp_pool,cr.zpp_pool=t,this},bn.prototype.unshift=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y;null==cr.zpp_pool?r=new cr:(r=cr.zpp_pool,cr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=i,r.y=o;var a=r;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=a.prev=a.next=a:(a.next=this.zpp_inner.vertices,a.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.prev.next=a,this.zpp_inner.vertices.prev=a),this.zpp_inner.vertices=a,e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return this},bn.prototype.shift=function(){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=this.zpp_inner.vertices=null;else{var i=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,t.wrap=null}return t.prev=t.next=null,t.next=cr.zpp_pool,cr.zpp_pool=t,this},bn.prototype.skipForward=function(e){if(null!=this.zpp_inner.vertices)if(0<e)for(;0<e--;)this.zpp_inner.vertices=this.zpp_inner.vertices.next;else if(e<0)for(;e++<0;)this.zpp_inner.vertices=this.zpp_inner.vertices.prev;return this},bn.prototype.skipBackwards=function(e){return this.skipForward(-e)},bn.prototype.erase=function(e){for(;0!=e&&null!=this.zpp_inner.vertices;){var t=this.zpp_inner.vertices;if(0<e){var i;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,i=this.zpp_inner.vertices=null;else{var n=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,i=n}this.zpp_inner.vertices=i,--e}else if(e<0){var r;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,r=null;else{var o=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,r=o}this.zpp_inner.vertices=r,++e}if(null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var a=t.wrap,s=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null,a.zpp_pool=jn.poolVec2,jn.poolVec2=a,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s,t.wrap=null}t.prev=t.next=null,t.next=cr.zpp_pool,cr.zpp_pool=t}return this},bn.prototype.clear=function(){for(;null!=this.zpp_inner.vertices;){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=this.zpp_inner.vertices=null;else{var i=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,t.wrap=null}t.prev=t.next=null,t.next=cr.zpp_pool,cr.zpp_pool=t}return this},bn.prototype.copy=function(){var e=bn.get(),t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r,o=n,a=o.x,s=o.y;null==cr.zpp_pool?r=new cr:(r=cr.zpp_pool,cr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=a,r.y=s;var p=r;if(null==e.zpp_inner.vertices?e.zpp_inner.vertices=p.prev=p.next=p:(p.prev=e.zpp_inner.vertices,p.next=e.zpp_inner.vertices.next,e.zpp_inner.vertices.next.prev=p,e.zpp_inner.vertices.next=p),e.zpp_inner.vertices=p,(n=n.next)==i)break}return e.skipForward(1)},bn.prototype.dispose=function(){this.clear();this.zpp_pool=jn.poolGeomPoly,jn.poolGeomPoly=this},bn.prototype.toString=function(){var e="GeomPoly[",t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r!=this.zpp_inner.vertices&&(e+=","),e+="{"+r.x+","+r.y+"}",(n=n.next)==i)break}return e+"]"},bn.prototype.area=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return 0;var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(e+=r.x*(r.next.y-r.prev.y),(n=n.next)==i)break}var o=.5*e;return o<0?-o:o},bn.prototype.winding=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED;var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(e+=r.x*(r.next.y-r.prev.y),(n=n.next)==i)break}var o=.5*e;return 0<o?(null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),Uo.Winding_CLOCKWISE):0==o?(null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED):(null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),Uo.Winding_ANTICLOCKWISE)},bn.prototype.contains=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.y,o=!1,a=this.zpp_inner.vertices,s=this.zpp_inner.vertices;if(null!=a)for(var p=a;;){var l=p,h=l.prev;if((l.y<r&&h.y>=r||h.y<r&&l.y>=r)&&(l.x<=i||h.x<=i)&&l.x+(r-l.y)/(h.y-l.y)*(h.x-l.x)<i&&(o=!o),(p=p.next)==s)break}var u=o;if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}return u},bn.prototype.isClockwise=function(){var e=this.winding();return null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),e==Uo.Winding_CLOCKWISE},bn.prototype.isConvex=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return!0;var e=!1,t=!1,i=!0,n=this.zpp_inner.vertices,r=this.zpp_inner.vertices;if(null!=n)for(var o=n;;){var a,s,p=o,l=p.prev,h=p.next;a=h.x-p.x,s=h.y-p.y;var u;u=p.x-l.x;var d=(p.y-l.y)*a-u*s;if(0<d?t=!0:d<0&&(e=!0),t&&e){i=!1;break}if((o=o.next)==r)break}return i},bn.prototype.isSimple=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||Dt.isSimple(this.zpp_inner.vertices)},bn.prototype.isMonotone=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||Tt.isMonotone(this.zpp_inner.vertices)},bn.prototype.isDegenerate=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||this.area()<Qs.epsilon},bn.prototype.simplify=function(e){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return this.copy();var t=jt.simplify(this.zpp_inner.vertices,e),i=bn.get();return i.zpp_inner.vertices=t,i},bn.prototype.simpleDecomposition=function(e){null==Ot.sharedGVList&&(Ot.sharedGVList=new Si);for(var t=Dt.decompose(this.zpp_inner.vertices,Ot.sharedGVList),i=null==e?new wn:e;null!=t.head;){var n=t.pop_unsafe(),r=bn.get();r.zpp_inner.vertices=n,i.zpp_inner.reverse_flag?i.push(r):i.unshift(r)}return i},bn.prototype.monotoneDecomposition=function(e){null==Tt.sharedPPoly&&(Tt.sharedPPoly=new Ot);var t=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==Ot.sharedGVList&&(Ot.sharedGVList=new Si);for(var i=t.extract(Ot.sharedGVList),n=null==e?new wn:e;null!=i.head;){var r=i.pop_unsafe(),o=bn.get();o.zpp_inner.vertices=r,n.zpp_inner.reverse_flag?n.push(o):n.unshift(o)}return n},bn.prototype.convexDecomposition=function(e,t){null==e&&(e=!1),null==Tt.sharedPPoly&&(Tt.sharedPPoly=new Ot);var i=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==Ot.sharedPPList&&(Ot.sharedPPList=new wi);for(var n=i.extract_partitions(Ot.sharedPPList),r=null==t?new wn:t;null!=n.head;){var o=n.pop_unsafe();Ut.triangulate(o),e&&Ut.optimise(o),zt.optimise(o),null==Ot.sharedGVList&&(Ot.sharedGVList=new Si);var a=o.extract(Ot.sharedGVList);for(o.next=Ot.zpp_pool,Ot.zpp_pool=o;null!=a.head;){var s=a.pop_unsafe(),p=bn.get();p.zpp_inner.vertices=s,r.zpp_inner.reverse_flag?r.push(p):r.unshift(p)}}return r},bn.prototype.triangularDecomposition=function(e,t){null==e&&(e=!1),null==Tt.sharedPPoly&&(Tt.sharedPPoly=new Ot);var i=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==Ot.sharedPPList&&(Ot.sharedPPList=new wi);for(var n=i.extract_partitions(Ot.sharedPPList),r=null==t?new wn:t;null!=n.head;){var o=n.pop_unsafe();Ut.triangulate(o),e&&Ut.optimise(o),null==Ot.sharedGVList&&(Ot.sharedGVList=new Si);var a=o.extract(Ot.sharedGVList);for(o.next=Ot.zpp_pool,Ot.zpp_pool=o;null!=a.head;){var s=a.pop_unsafe(),p=bn.get();p.zpp_inner.vertices=s,r.zpp_inner.reverse_flag?r.push(p):r.unshift(p)}}return r},bn.prototype.inflate=function(e){var t=bn.get(),i=this.winding();null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),i==Uo.Winding_CLOCKWISE&&(e=-e);var n=this.zpp_inner.vertices,r=this.zpp_inner.vertices;if(null!=n)for(var o=n;;){var a,s,p,l,h=o,u=h.prev,d=h.next;a=h.x-u.x,s=h.y-u.y,p=d.x-h.x,l=d.y-h.y;var c=0,_=0,y=0,x=0;c=a,_=s;var m=1/Math.sqrt(c*c+_*_),f=c*=m;c=-(_*=m),_=f;c*=e,_*=e,y=p,x=l;var v=1/Math.sqrt(y*y+x*x),g=y*=v;y=-(x*=v),x=g;var z=l*((y*=e)-c)-p*((x*=e)-_),b=0==z?0:z/(l*a-p*s),w=0,S=0;w=h.x+c,S=h.y+_;var C;if(w+=a*b,S+=s*b,null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var M;null==ep.zpp_pool?M=new ep:(M=ep.zpp_pool,ep.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=w,M.y=S,C.zpp_inner=M,C.zpp_inner.outer=C}else{var P,k=C.zpp_inner;if(null!=k._validate&&k._validate(),C.zpp_inner.x==w){var T=C.zpp_inner;null!=T._validate&&T._validate(),P=C.zpp_inner.y==S}else P=!1;if(!P){C.zpp_inner.x=w,C.zpp_inner.y=S;var G=C.zpp_inner;null!=G._invalidate&&G._invalidate(G)}}if(C.zpp_inner.weak=!1,t.push(C),(o=o.next)==r)break}return t.skipForward(1)},bn.prototype.cut=function(e,t,i,n,r){null==n&&(n=!1),null==i&&(i=!1);var o=Mn.run(this.zpp_inner.vertices,e,t,i,n,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}if(t.zpp_inner.weak){var s=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return o},bn.prototype.transform=function(e){var t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n,o=e.zpp_inner.a*r.x+e.zpp_inner.b*r.y+e.zpp_inner.tx;if(r.y=e.zpp_inner.c*r.x+e.zpp_inner.d*r.y+e.zpp_inner.ty,r.x=o,(n=n.next)==i)break}return this},bn.prototype.bounds=function(){var e=1e100,t=1e100,i=-1e100,n=-1e100,r=this.zpp_inner.vertices,o=this.zpp_inner.vertices;if(null!=r)for(var a=r;;){var s=a;if(s.x<e&&(e=s.x),s.y<t&&(t=s.y),s.x>i&&(i=s.x),s.y>n&&(n=s.y),(a=a.next)==o)break}return new N(e,t,i-e,n-t)},bn.prototype.top=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.y<e.y&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var p;null==ep.zpp_pool?p=new ep:(p=ep.zpp_pool,ep.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=a,p.y=s,o.zpp_inner=p,o.zpp_inner.outer=o}else{var l,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),l=o.zpp_inner.y==s}else l=!1;if(!l){o.zpp_inner.x=a,o.zpp_inner.y=s;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.bottom=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.y>e.y&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var p;null==ep.zpp_pool?p=new ep:(p=ep.zpp_pool,ep.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=a,p.y=s,o.zpp_inner=p,o.zpp_inner.outer=o}else{var l,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),l=o.zpp_inner.y==s}else l=!1;if(!l){o.zpp_inner.x=a,o.zpp_inner.y=s;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.left=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.x<e.x&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var p;null==ep.zpp_pool?p=new ep:(p=ep.zpp_pool,ep.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=a,p.y=s,o.zpp_inner=p,o.zpp_inner.outer=o}else{var l,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),l=o.zpp_inner.y==s}else l=!1;if(!l){o.zpp_inner.x=a,o.zpp_inner.y=s;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.right=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.x>e.x&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var p;null==ep.zpp_pool?p=new ep:(p=ep.zpp_pool,ep.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=a,p.y=s,o.zpp_inner=p,o.zpp_inner.outer=o}else{var l,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),l=o.zpp_inner.y==s}else l=!1;if(!l){o.zpp_inner.x=a,o.zpp_inner.y=s;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.__class__=bn;var Ke=nape.geom.GeomPolyIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ke.__name__=["nape","geom","GeomPolyIterator"],Ke.get=function(e){var t;if(null==Ke.zpp_pool){On.internal=!0;var i=new Ke;On.internal=!1,t=i}else{var n=Ke.zpp_pool;Ke.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ke.prototype.zpp_inner=null,Ke.prototype.zpp_i=null,Ke.prototype.zpp_critical=null,Ke.prototype.zpp_next=null,Ke.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=this).zpp_inner=null,!1)},Ke.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ke.prototype.__class__=Ke;var wn=nape.geom.GeomPolyList=function(){this.zpp_inner=null,this.zpp_inner=new On,this.zpp_inner.outer=this};wn.__name__=["nape","geom","GeomPolyList"],wn.fromArray=function(e){for(var t=new wn,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},wn.prototype.zpp_inner=null,wn.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},wn.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},wn.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},wn.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},wn.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},wn.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},wn.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},wn.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},wn.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},wn.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},wn.prototype.empty=function(){return null==this.zpp_inner.inner.head},wn.prototype.iterator=function(){return this.zpp_inner.valmod(),Ke.get(this)},wn.prototype.copy=function(e){null==e&&(e=!1);var t=new wn;this.zpp_inner.valmod();for(var i=Ke.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},wn.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ke.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},wn.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ke.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},wn.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ke.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null;break}}return this},wn.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(wn.prototype,"length",{get:wn.prototype.get_length}),wn.prototype.__class__=wn;var V=nape.geom.GeomVertexIterator=function(){};V.__name__=["nape","geom","GeomVertexIterator"],V.prototype.zpp_inner=null,V.prototype.hasNext=function(){var e=this.zpp_inner.ptr!=this.zpp_inner.start||this.zpp_inner.first;if(this.zpp_inner.first=!1,!e){var t=this.zpp_inner;t.outer.zpp_inner=null,t.ptr=t.start=null,t.next=Ct.zpp_pool,Ct.zpp_pool=t}return e},V.prototype.next=function(){var e=this.zpp_inner.ptr;if(null==e.wrap){var t,i=e.x,n=e.y;if(null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}t.zpp_inner.weak=!1,e.wrap=t,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}var l=e.wrap;return this.zpp_inner.ptr=this.zpp_inner.forward?this.zpp_inner.ptr.next:this.zpp_inner.ptr.prev,l},V.prototype.__class__=V;var W=nape.geom.MarchingSquares=function(){};W.__name__=["nape","geom","MarchingSquares"],W.run=function(e,t,i,n,r,o,a){null==o&&(o=!0),null==n&&(n=2);var s=null!=a?a:new wn;if(null==r){var p=t.zpp_inner;null!=p._validate&&p._validate();var l=t.zpp_inner.minx,h=t.zpp_inner;null!=h._validate&&h._validate();var u=t.zpp_inner.miny,d=t.zpp_inner.getmax(),c=d.zpp_inner;null!=c._validate&&c._validate();var _=d.zpp_inner.x,y=t.zpp_inner.getmax(),x=y.zpp_inner;null!=x._validate&&x._validate(),yr.run(e,l,u,_,y.zpp_inner.y,i,n,o,s)}else{var m=t.zpp_inner;null!=m._validate&&m._validate();var f=t.zpp_inner,v=f.maxx-f.minx,g=r.zpp_inner;null!=g._validate&&g._validate();var z=v/r.zpp_inner.x,b=t.zpp_inner;null!=b._validate&&b._validate();var w=t.zpp_inner,S=w.maxy-w.miny,C=r.zpp_inner;null!=C._validate&&C._validate();var M=S/r.zpp_inner.y,P=0|z,k=0|M;P!=z&&++P,k!=M&&++k;for(var T=0,G=P;T<G;){var O=T++,A=t.zpp_inner;null!=A._validate&&A._validate();var E=t.zpp_inner.minx,I=r.zpp_inner;null!=I._validate&&I._validate();var B,L=E+r.zpp_inner.x*O;if(O==P-1){var D=t.zpp_inner.getmax(),R=D.zpp_inner;null!=R._validate&&R._validate(),B=D.zpp_inner.x}else{var F=r.zpp_inner;null!=F._validate&&F._validate(),B=L+r.zpp_inner.x}for(var j=0,N=k;j<N;){var U=j++,H=t.zpp_inner;null!=H._validate&&H._validate();var V=t.zpp_inner.miny,W=r.zpp_inner;null!=W._validate&&W._validate();var X,q=V+r.zpp_inner.y*U;if(U==k-1){var Y=t.zpp_inner.getmax(),Z=Y.zpp_inner;null!=Z._validate&&Z._validate(),X=Y.zpp_inner.y}else{var K=r.zpp_inner;null!=K._validate&&K._validate(),X=q+r.zpp_inner.y}yr.run(e,L,q,B,X,i,n,o,s)}}}if(i.zpp_inner.weak){var J=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=J.outer&&(J.outer.zpp_inner=null,J.outer=null),J._isimmutable=null,J._validate=null,J._invalidate=null,J.next=ep.zpp_pool,ep.zpp_pool=J}if(null!=r&&r.zpp_inner.weak){var Q=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=Q.outer&&(Q.outer.zpp_inner=null,Q.outer=null),Q._isimmutable=null,Q._validate=null,Q._invalidate=null,Q.next=ep.zpp_pool,ep.zpp_pool=Q}return s},W.prototype.__class__=W;var ne=nape.geom.Mat23=function(e,t,i,n,r,o){null==o&&(o=0),null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==t&&(t=0),null==e&&(e=1),this.zpp_inner=null,this.zpp_inner=Pt.get(),(this.zpp_inner.outer=this).zpp_inner.a=e;var a=this.zpp_inner;null!=a._invalidate&&a._invalidate(),this.zpp_inner.b=t;var s=this.zpp_inner;null!=s._invalidate&&s._invalidate(),this.zpp_inner.tx=r;var p=this.zpp_inner;null!=p._invalidate&&p._invalidate(),this.zpp_inner.c=i;var l=this.zpp_inner;null!=l._invalidate&&l._invalidate(),this.zpp_inner.d=n;var h=this.zpp_inner;null!=h._invalidate&&h._invalidate(),this.zpp_inner.ty=o;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate()};ne.__name__=["nape","geom","Mat23"],ne.rotation=function(e){var t=Math.cos(e),i=Math.sin(e);return new ne(t,-i,i,t,0,0)},ne.translation=function(e,t){return new ne(1,0,0,1,e,t)},ne.scale=function(e,t){return new ne(e,0,0,t,0,0)},ne.prototype.zpp_inner=null,ne.prototype.get_a=function(){return this.zpp_inner.a},ne.prototype.set_a=function(e){this.zpp_inner.a=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.a},ne.prototype.get_b=function(){return this.zpp_inner.b},ne.prototype.set_b=function(e){this.zpp_inner.b=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.b},ne.prototype.get_c=function(){return this.zpp_inner.c},ne.prototype.set_c=function(e){this.zpp_inner.c=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.c},ne.prototype.get_d=function(){return this.zpp_inner.d},ne.prototype.set_d=function(e){this.zpp_inner.d=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.d},ne.prototype.get_tx=function(){return this.zpp_inner.tx},ne.prototype.set_tx=function(e){this.zpp_inner.tx=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.tx},ne.prototype.get_ty=function(){return this.zpp_inner.ty},ne.prototype.set_ty=function(e){this.zpp_inner.ty=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.ty},ne.prototype.copy=function(){return new ne(this.zpp_inner.a,this.zpp_inner.b,this.zpp_inner.c,this.zpp_inner.d,this.zpp_inner.tx,this.zpp_inner.ty)},ne.prototype.set=function(e){var t=e.zpp_inner;this.zpp_inner.setas(t.a,t.b,t.c,t.d,t.tx,t.ty);var i=this.zpp_inner;return null!=i._invalidate&&i._invalidate(),this},ne.prototype.setAs=function(e,t,i,n,r,o){null==o&&(o=0),null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==t&&(t=0),null==e&&(e=1),this.zpp_inner.setas(e,t,i,n,r,o);var a=this.zpp_inner;return null!=a._invalidate&&a._invalidate(),this},ne.prototype.reset=function(){return this.setAs()},ne.prototype.get_determinant=function(){return this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c},ne.prototype.singular=function(){var e=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d,t=this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c;return t<0&&(t=-t),e>Qs.illConditionedThreshold*t},ne.prototype.inverse=function(){var e=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);return new ne(this.zpp_inner.d*e,-this.zpp_inner.b*e,-this.zpp_inner.c*e,this.zpp_inner.a*e,(this.zpp_inner.b*this.zpp_inner.ty-this.zpp_inner.d*this.zpp_inner.tx)*e,(this.zpp_inner.c*this.zpp_inner.tx-this.zpp_inner.a*this.zpp_inner.ty)*e)},ne.prototype.transpose=function(){return new ne(this.zpp_inner.a,this.zpp_inner.c,this.zpp_inner.b,this.zpp_inner.d,-this.zpp_inner.a*this.zpp_inner.tx-this.zpp_inner.c*this.zpp_inner.ty,-this.zpp_inner.b*this.zpp_inner.tx-this.zpp_inner.d*this.zpp_inner.ty)},ne.prototype.concat=function(e){return new ne(e.zpp_inner.a*this.zpp_inner.a+e.zpp_inner.b*this.zpp_inner.c,e.zpp_inner.a*this.zpp_inner.b+e.zpp_inner.b*this.zpp_inner.d,e.zpp_inner.c*this.zpp_inner.a+e.zpp_inner.d*this.zpp_inner.c,e.zpp_inner.c*this.zpp_inner.b+e.zpp_inner.d*this.zpp_inner.d,e.zpp_inner.a*this.zpp_inner.tx+e.zpp_inner.b*this.zpp_inner.ty+e.zpp_inner.tx,e.zpp_inner.c*this.zpp_inner.tx+e.zpp_inner.d*this.zpp_inner.ty+e.zpp_inner.ty)},ne.prototype.transform=function(e,t,i){var n;if(null==i&&(i=!1),null==t&&(t=!1),t){var r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x*this.zpp_inner.a,a=e.zpp_inner;null!=a._validate&&a._validate();var s=o+e.zpp_inner.y*this.zpp_inner.b,p=e.zpp_inner;null!=p._validate&&p._validate();var l=e.zpp_inner.x*this.zpp_inner.c,h=e.zpp_inner;null!=h._validate&&h._validate();var u,d=l+e.zpp_inner.y*this.zpp_inner.d;if(null==jn.poolVec2?u=new lt:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var c;null==ep.zpp_pool?c=new ep:(c=ep.zpp_pool,ep.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=s,c.y=d,u.zpp_inner=c,u.zpp_inner.outer=u}else{var _,y=u.zpp_inner;if(null!=y._validate&&y._validate(),u.zpp_inner.x==s){var x=u.zpp_inner;null!=x._validate&&x._validate(),_=u.zpp_inner.y==d}else _=!1;if(!_){u.zpp_inner.x=s,u.zpp_inner.y=d;var m=u.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}u.zpp_inner.weak=i,n=u}else{var f=e.zpp_inner;null!=f._validate&&f._validate();var v=e.zpp_inner.x*this.zpp_inner.a,g=e.zpp_inner;null!=g._validate&&g._validate();var z=v+e.zpp_inner.y*this.zpp_inner.b+this.zpp_inner.tx,b=e.zpp_inner;null!=b._validate&&b._validate();var w=e.zpp_inner.x*this.zpp_inner.c,S=e.zpp_inner;null!=S._validate&&S._validate();var C,M=w+e.zpp_inner.y*this.zpp_inner.d+this.zpp_inner.ty;if(null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==ep.zpp_pool?P=new ep:(P=ep.zpp_pool,ep.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=z,P.y=M,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==z){var G=C.zpp_inner;null!=G._validate&&G._validate(),k=C.zpp_inner.y==M}else k=!1;if(!k){C.zpp_inner.x=z,C.zpp_inner.y=M;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}C.zpp_inner.weak=i,n=C}if(e.zpp_inner.weak){var A=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=A.outer&&(A.outer.zpp_inner=null,A.outer=null),A._isimmutable=null,A._validate=null,A._invalidate=null,A.next=ep.zpp_pool,ep.zpp_pool=A}return n},ne.prototype.inverseTransform=function(e,t,i){null==i&&(i=!1),null==t&&(t=!1);var n,r=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);if(t){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x*this.zpp_inner.d,s=e.zpp_inner;null!=s._validate&&s._validate();var p=(a-e.zpp_inner.y*this.zpp_inner.b)*r,l=e.zpp_inner;null!=l._validate&&l._validate();var h=e.zpp_inner.y*this.zpp_inner.a,u=e.zpp_inner;null!=u._validate&&u._validate();var d,c=(h-e.zpp_inner.x*this.zpp_inner.c)*r;if(null==jn.poolVec2?d=new lt:(d=jn.poolVec2,jn.poolVec2=d.zpp_pool,d.zpp_pool=null),null==d.zpp_inner){var _;null==ep.zpp_pool?_=new ep:(_=ep.zpp_pool,ep.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=p,_.y=c,d.zpp_inner=_,d.zpp_inner.outer=d}else{var y,x=d.zpp_inner;if(null!=x._validate&&x._validate(),d.zpp_inner.x==p){var m=d.zpp_inner;null!=m._validate&&m._validate(),y=d.zpp_inner.y==c}else y=!1;if(!y){d.zpp_inner.x=p,d.zpp_inner.y=c;var f=d.zpp_inner;null!=f._invalidate&&f._invalidate(f)}}d.zpp_inner.weak=i,n=d}else{var v=e.zpp_inner;null!=v._validate&&v._validate();var g=e.zpp_inner.x-this.zpp_inner.tx,z=e.zpp_inner;null!=z._validate&&z._validate();var b,w=e.zpp_inner.y-this.zpp_inner.ty,S=(g*this.zpp_inner.d-w*this.zpp_inner.b)*r,C=(w*this.zpp_inner.a-g*this.zpp_inner.c)*r;if(null==jn.poolVec2?b=new lt:(b=jn.poolVec2,jn.poolVec2=b.zpp_pool,b.zpp_pool=null),null==b.zpp_inner){var M;null==ep.zpp_pool?M=new ep:(M=ep.zpp_pool,ep.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=S,M.y=C,b.zpp_inner=M,b.zpp_inner.outer=b}else{var P,k=b.zpp_inner;if(null!=k._validate&&k._validate(),b.zpp_inner.x==S){var T=b.zpp_inner;null!=T._validate&&T._validate(),P=b.zpp_inner.y==C}else P=!1;if(!P){b.zpp_inner.x=S,b.zpp_inner.y=C;var G=b.zpp_inner;null!=G._invalidate&&G._invalidate(G)}}b.zpp_inner.weak=i,n=b}if(e.zpp_inner.weak){var O=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=O.outer&&(O.outer.zpp_inner=null,O.outer=null),O._isimmutable=null,O._validate=null,O._invalidate=null,O.next=ep.zpp_pool,ep.zpp_pool=O}return n},ne.prototype.toString=function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},ne.prototype.equiorthogonal=function(){if(this.singular())return!1;var e=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(e*e<Qs.epsilon){var t=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-this.zpp_inner.c*this.zpp_inner.c-this.zpp_inner.d*this.zpp_inner.d;return t*t<Qs.epsilon}return!1},ne.prototype.orthogonal=function(){var e=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(e*e<Qs.epsilon){var t=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-1,i=this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d-1;return t*t<Qs.epsilon&&i*i<Qs.epsilon}return!1},ne.prototype.equiorthogonalise=function(){if(!this.equiorthogonal()){var e=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),t=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d),i=(e+t)/2;e=i/e,t=i/t;this.zpp_inner.a=this.zpp_inner.a*e;var n=this.zpp_inner;null!=n._invalidate&&n._invalidate();this.zpp_inner.c=this.zpp_inner.c*e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate();this.zpp_inner.b=this.zpp_inner.b*t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate();this.zpp_inner.d=this.zpp_inner.d*t;var a=this.zpp_inner;null!=a._invalidate&&a._invalidate();var s=.25*Math.PI-.5*Math.acos((this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d)/(i*i));0<this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c&&(s=-s);var p=Math.sin(s),l=Math.cos(s),h=this.zpp_inner.a*l-this.zpp_inner.c*p,u=this.zpp_inner.b*l+this.zpp_inner.d*p;this.zpp_inner.c=this.zpp_inner.c*l+this.zpp_inner.a*p;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(),this.zpp_inner.a=h;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(),this.zpp_inner.d=this.zpp_inner.d*l-this.zpp_inner.b*p;var _=this.zpp_inner;null!=_._invalidate&&_._invalidate(),this.zpp_inner.b=u;var y=this.zpp_inner;null!=y._invalidate&&y._invalidate();var x=this.zpp_inner;null!=x._invalidate&&x._invalidate()}return this},ne.prototype.orthogonalise=function(){if(!this.orthogonal()){var e=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),t=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);e=1/e,t=1/t;this.zpp_inner.a=this.zpp_inner.a*e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate();this.zpp_inner.c=this.zpp_inner.c*e;var n=this.zpp_inner;null!=n._invalidate&&n._invalidate();this.zpp_inner.b=this.zpp_inner.b*t;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate();this.zpp_inner.d=this.zpp_inner.d*t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate();var a=.25*Math.PI-.5*Math.acos((this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d)/1);0<this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c&&(a=-a);var s=Math.sin(a),p=Math.cos(a),l=this.zpp_inner.a*p-this.zpp_inner.c*s,h=this.zpp_inner.b*p+this.zpp_inner.d*s;this.zpp_inner.c=this.zpp_inner.c*p+this.zpp_inner.a*s;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate(),this.zpp_inner.a=l;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(),this.zpp_inner.d=this.zpp_inner.d*p-this.zpp_inner.b*s;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(),this.zpp_inner.b=h;var _=this.zpp_inner;null!=_._invalidate&&_._invalidate();var y=this.zpp_inner;null!=y._invalidate&&y._invalidate()}return this},Object.defineProperty(ne.prototype,"a",{get:ne.prototype.get_a,set:ne.prototype.set_a}),Object.defineProperty(ne.prototype,"b",{get:ne.prototype.get_b,set:ne.prototype.set_b}),Object.defineProperty(ne.prototype,"c",{get:ne.prototype.get_c,set:ne.prototype.set_c}),Object.defineProperty(ne.prototype,"d",{get:ne.prototype.get_d,set:ne.prototype.set_d}),Object.defineProperty(ne.prototype,"tx",{get:ne.prototype.get_tx,set:ne.prototype.set_tx}),Object.defineProperty(ne.prototype,"ty",{get:ne.prototype.get_ty,set:ne.prototype.set_ty}),Object.defineProperty(ne.prototype,"determinant",{get:ne.prototype.get_determinant}),ne.prototype.__class__=ne;var X=nape.geom.MatMN=function(e,t){this.zpp_inner=null,this.zpp_inner=new kt(e,t),this.zpp_inner.outer=this};X.__name__=["nape","geom","MatMN"],X.prototype.zpp_inner=null,X.prototype.get_rows=function(){return this.zpp_inner.m},X.prototype.get_cols=function(){return this.zpp_inner.n},X.prototype.x=function(e,t){return this.zpp_inner.x[e*this.zpp_inner.n+t]},X.prototype.setx=function(e,t,i){return this.zpp_inner.x[e*this.zpp_inner.n+t]=i},X.prototype.toString=function(){for(var e="{ ",t=!0,i=0,n=this.zpp_inner.m;i<n;){var r=i++;t||(e+="; "),t=!1;for(var o=0,a=this.zpp_inner.n;o<a;)e+=this.zpp_inner.x[r*this.zpp_inner.n+o++]+" "}return e+="}"},X.prototype.transpose=function(){for(var e=new X(this.zpp_inner.n,this.zpp_inner.m),t=0,i=this.zpp_inner.m;t<i;)for(var n=t++,r=0,o=this.zpp_inner.n;r<o;){var a=r++;e.zpp_inner.x[a*e.zpp_inner.n+n]=this.zpp_inner.x[n*this.zpp_inner.n+a]}return e},X.prototype.mul=function(e){for(var t=new X(this.zpp_inner.m,e.zpp_inner.n),i=0,n=this.zpp_inner.m;i<n;)for(var r=i++,o=0,a=e.zpp_inner.n;o<a;){for(var s=o++,p=0,l=0,h=this.zpp_inner.n;l<h;){var u=l++;p+=this.zpp_inner.x[r*this.zpp_inner.n+u]*e.zpp_inner.x[u*e.zpp_inner.n+s]}t.zpp_inner.x[r*t.zpp_inner.n+s]=p}return t},Object.defineProperty(X.prototype,"rows",{get:X.prototype.get_rows}),Object.defineProperty(X.prototype,"cols",{get:X.prototype.get_cols}),X.prototype.__class__=X;var q=nape.geom.Ray=function(e,t){this.zpp_inner=null,this.zpp_inner=new At;var i=this.zpp_inner.origin,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a,s=e.zpp_inner.y,p=i.zpp_inner;if(null!=p._validate&&p._validate(),i.zpp_inner.x==r){var l=i.zpp_inner;null!=l._validate&&l._validate(),a=i.zpp_inner.y==s}else a=!1;if(!a){i.zpp_inner.x=r,i.zpp_inner.y=s;var h=i.zpp_inner;null!=h._invalidate&&h._invalidate(h)}if(e.zpp_inner.weak){var u=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=ep.zpp_pool,ep.zpp_pool=u}var d=this.zpp_inner.direction,c=t.zpp_inner;null!=c._validate&&c._validate();var _=t.zpp_inner.x,y=t.zpp_inner;null!=y._validate&&y._validate();var x,m=t.zpp_inner.y,f=d.zpp_inner;if(null!=f._validate&&f._validate(),d.zpp_inner.x==_){var v=d.zpp_inner;null!=v._validate&&v._validate(),x=d.zpp_inner.y==m}else x=!1;if(!x){d.zpp_inner.x=_,d.zpp_inner.y=m;var g=d.zpp_inner;null!=g._invalidate&&g._invalidate(g)}if(t.zpp_inner.weak){var z=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=z.outer&&(z.outer.zpp_inner=null,z.outer=null),z._isimmutable=null,z._validate=null,z._invalidate=null,z.next=ep.zpp_pool,ep.zpp_pool=z}this.zpp_inner.zip_dir=!0,this.zpp_inner.maxdist=1/0};q.__name__=["nape","geom","Ray"],q.fromSegment=function(e,t){var i=new q(e,t.sub(e,!0)),n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.y,s=t.zpp_inner;null!=s._validate&&s._validate();var p=t.zpp_inner.x,l=t.zpp_inner;null!=l._validate&&l._validate();var h,u;if(h=r-p,u=a-t.zpp_inner.y,i.zpp_inner.maxdist=Math.sqrt(h*h+u*u),e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(t.zpp_inner.weak){var c=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return i},q.prototype.zpp_inner=null,q.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},q.prototype.get_origin=function(){return this.zpp_inner.origin},q.prototype.set_origin=function(e){var t=this.zpp_inner.origin,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return this.zpp_inner.origin},q.prototype.get_direction=function(){return this.zpp_inner.direction},q.prototype.set_direction=function(e){var t=this.zpp_inner.direction,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return this.zpp_inner.zip_dir=!0,this.zpp_inner.direction},q.prototype.get_maxDistance=function(){return this.zpp_inner.maxdist},q.prototype.set_maxDistance=function(e){return this.zpp_inner.maxdist=e,this.zpp_inner.maxdist},q.prototype.aabb=function(){return this.zpp_inner.rayAABB().wrapper()},q.prototype.at=function(e,t){null==t&&(t=!1),this.zpp_inner.validate_dir();var i=this.zpp_inner.origin,n=i.zpp_inner;null!=n._validate&&n._validate();var r=i.zpp_inner.x+e*this.zpp_inner.dirx,o=this.zpp_inner.origin,a=o.zpp_inner;null!=a._validate&&a._validate();var s,p=o.zpp_inner.y+e*this.zpp_inner.diry;if(null==jn.poolVec2?s=new lt:(s=jn.poolVec2,jn.poolVec2=s.zpp_pool,s.zpp_pool=null),null==s.zpp_inner){var l;null==ep.zpp_pool?l=new ep:(l=ep.zpp_pool,ep.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=r,l.y=p,s.zpp_inner=l,s.zpp_inner.outer=s}else{var h,u=s.zpp_inner;if(null!=u._validate&&u._validate(),s.zpp_inner.x==r){var d=s.zpp_inner;null!=d._validate&&d._validate(),h=s.zpp_inner.y==p}else h=!1;if(!h){s.zpp_inner.x=r,s.zpp_inner.y=p;var c=s.zpp_inner;null!=c._invalidate&&c._invalidate(c)}}return s.zpp_inner.weak=t,s},q.prototype.copy=function(){var e=new q(this.zpp_inner.origin,this.zpp_inner.direction);return e.zpp_inner.maxdist=this.zpp_inner.maxdist,e},Object.defineProperty(q.prototype,"userData",{get:q.prototype.get_userData}),Object.defineProperty(q.prototype,"origin",{get:q.prototype.get_origin,set:q.prototype.set_origin}),Object.defineProperty(q.prototype,"direction",{get:q.prototype.get_direction,set:q.prototype.set_direction}),Object.defineProperty(q.prototype,"maxDistance",{get:q.prototype.get_maxDistance,set:q.prototype.set_maxDistance}),q.prototype.__class__=q;var Y=nape.geom.RayResult=function(){this.zpp_inner=null};Y.__name__=["nape","geom","RayResult"],Y.prototype.zpp_inner=null,Y.prototype.get_normal=function(){return this.zpp_inner.normal},Y.prototype.get_distance=function(){return this.zpp_inner.toiDistance},Y.prototype.get_inner=function(){return this.zpp_inner.inner},Y.prototype.get_shape=function(){return this.zpp_inner.shape},Y.prototype.dispose=function(){this.zpp_inner.free()},Y.prototype.toString=function(){return"{ shape: "+n.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+n.string(this.zpp_inner.inner)+" }"},Object.defineProperty(Y.prototype,"normal",{get:Y.prototype.get_normal}),Object.defineProperty(Y.prototype,"distance",{get:Y.prototype.get_distance}),Object.defineProperty(Y.prototype,"inner",{get:Y.prototype.get_inner}),Object.defineProperty(Y.prototype,"shape",{get:Y.prototype.get_shape}),Y.prototype.__class__=Y;var Je=nape.geom.RayResultIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Je.__name__=["nape","geom","RayResultIterator"],Je.get=function(e){var t;if(null==Je.zpp_pool){An.internal=!0;var i=new Je;An.internal=!1,t=i}else{var n=Je.zpp_pool;Je.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Je.prototype.zpp_inner=null,Je.prototype.zpp_i=null,Je.prototype.zpp_critical=null,Je.prototype.zpp_next=null,Je.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Je.zpp_pool,(Je.zpp_pool=this).zpp_inner=null,!1)},Je.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Je.prototype.__class__=Je;var Z=nape.geom.RayResultList=function(){this.zpp_inner=null,this.zpp_inner=new An,this.zpp_inner.outer=this};Z.__name__=["nape","geom","RayResultList"],Z.fromArray=function(e){for(var t=new Z,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},Z.prototype.zpp_inner=null,Z.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},Z.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e)},Z.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},Z.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},Z.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}else this.zpp_inner.inner.add(e);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},Z.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e},Z.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e},Z.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},Z.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e),this.zpp_inner.invalidate()),t},Z.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},Z.prototype.empty=function(){return null==this.zpp_inner.inner.head},Z.prototype.iterator=function(){return this.zpp_inner.valmod(),Je.get(this)},Z.prototype.copy=function(e){null==e&&(e=!1);var t=new Z;this.zpp_inner.valmod();for(var i=Je.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Je.zpp_pool,(Je.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},Z.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Je.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},Z.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Je.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Je.zpp_pool,(Je.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},Z.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Je.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null;break}}return this},Z.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(Z.prototype,"length",{get:Z.prototype.get_length}),Z.prototype.__class__=Z;var lt=nape.geom.Vec2=function(e,t){var i;null==t&&(t=0),null==e&&(e=0),this.zpp_pool=null,(this.zpp_inner=null)==ep.zpp_pool?i=new ep:(i=ep.zpp_pool,ep.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,this.zpp_inner=i,this.zpp_inner.outer=this};lt.__name__=["nape","geom","Vec2"],lt.weak=function(e,t){var i;if(null==t&&(t=0),null==e&&(e=0),null==jn.poolVec2?i=new lt:(i=jn.poolVec2,jn.poolVec2=i.zpp_pool,i.zpp_pool=null),null==i.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=e,n.y=t,i.zpp_inner=n,i.zpp_inner.outer=i}else{var r,o=i.zpp_inner;if(null!=o._validate&&o._validate(),i.zpp_inner.x==e){var a=i.zpp_inner;null!=a._validate&&a._validate(),r=i.zpp_inner.y==t}else r=!1;if(!r){i.zpp_inner.x=e,i.zpp_inner.y=t;var s=i.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}return i.zpp_inner.weak=!0,i},lt.get=function(e,t,i){var n;if(null==i&&(i=!1),null==t&&(t=0),null==e&&(e=0),null==jn.poolVec2?n=new lt:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var r;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t,n.zpp_inner=r,n.zpp_inner.outer=n}else{var o,a=n.zpp_inner;if(null!=a._validate&&a._validate(),n.zpp_inner.x==e){var s=n.zpp_inner;null!=s._validate&&s._validate(),o=n.zpp_inner.y==t}else o=!1;if(!o){n.zpp_inner.x=e,n.zpp_inner.y=t;var p=n.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}return n.zpp_inner.weak=i,n},lt.fromPolar=function(e,t,i){null==i&&(i=!1);var n,r=e*Math.cos(t),o=e*Math.sin(t);if(null==jn.poolVec2?n=new lt:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=r,a.y=o,n.zpp_inner=a,n.zpp_inner.outer=n}else{var s,p=n.zpp_inner;if(null!=p._validate&&p._validate(),n.zpp_inner.x==r){var l=n.zpp_inner;null!=l._validate&&l._validate(),s=n.zpp_inner.y==o}else s=!1;if(!s){n.zpp_inner.x=r,n.zpp_inner.y=o;var h=n.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return n.zpp_inner.weak=i,n},lt.dsq=function(e,t){var i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.y,a=t.zpp_inner;null!=a._validate&&a._validate();var s=t.zpp_inner.x,p=t.zpp_inner;null!=p._validate&&p._validate();var l,h,u=(l=n-s)*l+(h=o-t.zpp_inner.y)*h;if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(t.zpp_inner.weak){var c=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return u},lt.distance=function(e,t){var i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.y,a=t.zpp_inner;null!=a._validate&&a._validate();var s=t.zpp_inner.x,p=t.zpp_inner;null!=p._validate&&p._validate();var l,h;l=n-s,h=o-t.zpp_inner.y;var u=Math.sqrt(l*l+h*h);if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(t.zpp_inner.weak){var c=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return u},lt.prototype.zpp_inner=null,lt.prototype.zpp_pool=null,lt.prototype.dispose=function(){var e=this.zpp_inner;this.zpp_inner.outer=null,this.zpp_inner=null;this.zpp_pool=jn.poolVec2,jn.poolVec2=this,null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=ep.zpp_pool,ep.zpp_pool=e},lt.prototype.copy=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y;if(null==jn.poolVec2?r=new lt:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,p=r.zpp_inner;if(null!=p._validate&&p._validate(),r.zpp_inner.x==i){var l=r.zpp_inner;null!=l._validate&&l._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},lt.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.x},lt.prototype.set_x=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.x!=e){this.zpp_inner.x=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.x},lt.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.y},lt.prototype.set_y=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.y!=e){this.zpp_inner.y=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.y},lt.prototype.get_length=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;return null!=a._validate&&a._validate(),Math.sqrt(n+o*this.zpp_inner.y)},lt.prototype.set_length=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var p=e/Math.sqrt(r+a*this.zpp_inner.y),l=this.zpp_inner;null!=l._validate&&l._validate();var h=this.zpp_inner.x*p,u=this.zpp_inner;if(null!=u._validate&&u._validate(),this.zpp_inner.x!=h){this.zpp_inner.x=h;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(d)}var c=this.zpp_inner;null!=c._validate&&c._validate();var _=this.zpp_inner;null!=_._validate&&_._validate();var y=this.zpp_inner.y*p,x=this.zpp_inner;if(null!=x._validate&&x._validate(),this.zpp_inner.y!=y){this.zpp_inner.y=y;var m=this.zpp_inner;null!=m._invalidate&&m._invalidate(m)}var f=this.zpp_inner;null!=f._validate&&f._validate();var v=this.zpp_inner;null!=v._invalidate&&v._invalidate(v);var g=this.zpp_inner;null!=g._validate&&g._validate();var z=this.zpp_inner.x,b=this.zpp_inner;null!=b._validate&&b._validate();var w=z*this.zpp_inner.x,S=this.zpp_inner;null!=S._validate&&S._validate();var C=this.zpp_inner.y,M=this.zpp_inner;return null!=M._validate&&M._validate(),Math.sqrt(w+C*this.zpp_inner.y)},lt.prototype.lsq=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;return null!=a._validate&&a._validate(),n+o*this.zpp_inner.y},lt.prototype.set=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y,a=this.zpp_inner;if(null!=a._validate&&a._validate(),this.zpp_inner.x==i){var s=this.zpp_inner;null!=s._validate&&s._validate(),r=this.zpp_inner.y==o}else r=!1;if(!r){this.zpp_inner.x=i,this.zpp_inner.y=o;var p=this.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var l=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=l.outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=ep.zpp_pool,ep.zpp_pool=l}return this},lt.prototype.setxy=function(e,t){var i,n=this.zpp_inner;if(null!=n._validate&&n._validate(),this.zpp_inner.x==e){var r=this.zpp_inner;null!=r._validate&&r._validate(),i=this.zpp_inner.y==t}else i=!1;if(!i){this.zpp_inner.x=e,this.zpp_inner.y=t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate(o)}return this},lt.prototype.get_angle=function(){var e,t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;if(null!=n._validate&&n._validate(),i==this.zpp_inner.y){var r=this.zpp_inner;null!=r._validate&&r._validate(),e=0==this.zpp_inner.x}else e=!1;if(e)return 0;var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;return null!=s._validate&&s._validate(),Math.atan2(a,this.zpp_inner.x)},lt.prototype.set_angle=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var p,l,h=Math.sqrt(r+a*this.zpp_inner.y),u=h*Math.cos(e),d=h*Math.sin(e),c=this.zpp_inner;if(null!=c._validate&&c._validate(),this.zpp_inner.x==u){var _=this.zpp_inner;null!=_._validate&&_._validate(),p=this.zpp_inner.y==d}else p=!1;if(!p){this.zpp_inner.x=u,this.zpp_inner.y=d;var y=this.zpp_inner;null!=y._invalidate&&y._invalidate(y)}var x=this.zpp_inner;null!=x._validate&&x._validate();var m=this.zpp_inner.x,f=this.zpp_inner;if(null!=f._validate&&f._validate(),m==this.zpp_inner.y){var v=this.zpp_inner;null!=v._validate&&v._validate(),l=0==this.zpp_inner.x}else l=!1;if(l)return 0;var g=this.zpp_inner;null!=g._validate&&g._validate();var z=this.zpp_inner.y,b=this.zpp_inner;return null!=b._validate&&b._validate(),Math.atan2(z,this.zpp_inner.x)},lt.prototype.rotate=function(e){if(e%(2*Math.PI)!=0){var t=Math.sin(e),i=Math.cos(e),n=i*this.zpp_inner.x-t*this.zpp_inner.y;this.zpp_inner.y=this.zpp_inner.x*t+this.zpp_inner.y*i,this.zpp_inner.x=n;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}return this},lt.prototype.reflect=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o,a=this.zpp_inner.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var s;null==ep.zpp_pool?s=new ep:(s=ep.zpp_pool,ep.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=n,s.y=a,o.zpp_inner=s,o.zpp_inner.outer=o}else{var p,l=o.zpp_inner;if(null!=l._validate&&l._validate(),o.zpp_inner.x==n){var h=o.zpp_inner;null!=h._validate&&h._validate(),p=o.zpp_inner.y==a}else p=!1;if(!p){o.zpp_inner.x=n,o.zpp_inner.y=a;var u=o.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}o.zpp_inner.weak=!0;var d=o.normalise(),c=e.sub(d.muleq(2*d.dot(e)),t);if(e.zpp_inner.weak){var _=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_}return c},lt.prototype.normalise=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=1/Math.sqrt(n+o*this.zpp_inner.y),p=this.zpp_inner;null!=p._validate&&p._validate();var l=this.zpp_inner.x*s,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x!=l){this.zpp_inner.x=l;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate(u)}var d=this.zpp_inner;null!=d._validate&&d._validate();var c=this.zpp_inner;null!=c._validate&&c._validate();var _=this.zpp_inner.y*s,y=this.zpp_inner;if(null!=y._validate&&y._validate(),this.zpp_inner.y!=_){this.zpp_inner.y=_;var x=this.zpp_inner;null!=x._invalidate&&x._invalidate(x)}var m=this.zpp_inner;null!=m._validate&&m._validate();var f=this.zpp_inner;return null!=f._invalidate&&f._invalidate(f),this},lt.prototype.unit=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var p=1/Math.sqrt(r+a*this.zpp_inner.y),l=this.zpp_inner;null!=l._validate&&l._validate();var h=this.zpp_inner.x*p,u=this.zpp_inner;null!=u._validate&&u._validate();var d,c=this.zpp_inner.y*p;if(null==jn.poolVec2?d=new lt:(d=jn.poolVec2,jn.poolVec2=d.zpp_pool,d.zpp_pool=null),null==d.zpp_inner){var _;null==ep.zpp_pool?_=new ep:(_=ep.zpp_pool,ep.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=h,_.y=c,d.zpp_inner=_,d.zpp_inner.outer=d}else{var y,x=d.zpp_inner;if(null!=x._validate&&x._validate(),d.zpp_inner.x==h){var m=d.zpp_inner;null!=m._validate&&m._validate(),y=d.zpp_inner.y==c}else y=!1;if(!y){d.zpp_inner.x=h,d.zpp_inner.y=c;var f=d.zpp_inner;null!=f._invalidate&&f._invalidate(f)}}return d.zpp_inner.weak=e,d},lt.prototype.add=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=n+e.zpp_inner.x,a=this.zpp_inner;null!=a._validate&&a._validate();var s=this.zpp_inner.y,p=e.zpp_inner;null!=p._validate&&p._validate();var l,h=s+e.zpp_inner.y;if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var u;null==ep.zpp_pool?u=new ep:(u=ep.zpp_pool,ep.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=o,u.y=h,l.zpp_inner=u,l.zpp_inner.outer=l}else{var d,c=l.zpp_inner;if(null!=c._validate&&c._validate(),l.zpp_inner.x==o){var _=l.zpp_inner;null!=_._validate&&_._validate(),d=l.zpp_inner.y==h}else d=!1;if(!d){l.zpp_inner.x=o,l.zpp_inner.y=h;var y=l.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}l.zpp_inner.weak=t;var x=l;if(e.zpp_inner.weak){var m=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=ep.zpp_pool,ep.zpp_pool=m}return x},lt.prototype.addMul=function(e,t,i){null==i&&(i=!1);var n=this.zpp_inner;null!=n._validate&&n._validate();var r=this.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=r+e.zpp_inner.x*t,s=this.zpp_inner;null!=s._validate&&s._validate();var p=this.zpp_inner.y,l=e.zpp_inner;null!=l._validate&&l._validate();var h,u=p+e.zpp_inner.y*t;if(null==jn.poolVec2?h=new lt:(h=jn.poolVec2,jn.poolVec2=h.zpp_pool,h.zpp_pool=null),null==h.zpp_inner){var d;null==ep.zpp_pool?d=new ep:(d=ep.zpp_pool,ep.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=a,d.y=u,h.zpp_inner=d,h.zpp_inner.outer=h}else{var c,_=h.zpp_inner;if(null!=_._validate&&_._validate(),h.zpp_inner.x==a){var y=h.zpp_inner;null!=y._validate&&y._validate(),c=h.zpp_inner.y==u}else c=!1;if(!c){h.zpp_inner.x=a,h.zpp_inner.y=u;var x=h.zpp_inner;null!=x._invalidate&&x._invalidate(x)}}h.zpp_inner.weak=i;var m=h;if(e.zpp_inner.weak){var f=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=f.outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=ep.zpp_pool,ep.zpp_pool=f}return m},lt.prototype.sub=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=n-e.zpp_inner.x,a=this.zpp_inner;null!=a._validate&&a._validate();var s=this.zpp_inner.y,p=e.zpp_inner;null!=p._validate&&p._validate();var l,h=s-e.zpp_inner.y;if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var u;null==ep.zpp_pool?u=new ep:(u=ep.zpp_pool,ep.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=o,u.y=h,l.zpp_inner=u,l.zpp_inner.outer=l}else{var d,c=l.zpp_inner;if(null!=c._validate&&c._validate(),l.zpp_inner.x==o){var _=l.zpp_inner;null!=_._validate&&_._validate(),d=l.zpp_inner.y==h}else d=!1;if(!d){l.zpp_inner.x=o,l.zpp_inner.y=h;var y=l.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}l.zpp_inner.weak=t;var x=l;if(e.zpp_inner.weak){var m=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=ep.zpp_pool,ep.zpp_pool=m}return x},lt.prototype.mul=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x*e,r=this.zpp_inner;null!=r._validate&&r._validate();var o,a=this.zpp_inner.y*e;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var s;null==ep.zpp_pool?s=new ep:(s=ep.zpp_pool,ep.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=n,s.y=a,o.zpp_inner=s,o.zpp_inner.outer=o}else{var p,l=o.zpp_inner;if(null!=l._validate&&l._validate(),o.zpp_inner.x==n){var h=o.zpp_inner;null!=h._validate&&h._validate(),p=o.zpp_inner.y==a}else p=!1;if(!p){o.zpp_inner.x=n,o.zpp_inner.y=a;var u=o.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}return o.zpp_inner.weak=t,o},lt.prototype.addeq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i+e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var p,l=a+e.zpp_inner.y,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x==r){var u=this.zpp_inner;null!=u._validate&&u._validate(),p=this.zpp_inner.y==l}else p=!1;if(!p){this.zpp_inner.x=r,this.zpp_inner.y=l;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(d)}if(e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return this},lt.prototype.subeq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i-e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var p,l=a-e.zpp_inner.y,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x==r){var u=this.zpp_inner;null!=u._validate&&u._validate(),p=this.zpp_inner.y==l}else p=!1;if(!p){this.zpp_inner.x=r,this.zpp_inner.y=l;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(d)}if(e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return this},lt.prototype.muleq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x*e,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y*e,a=this.zpp_inner;if(null!=a._validate&&a._validate(),this.zpp_inner.x==i){var s=this.zpp_inner;null!=s._validate&&s._validate(),r=this.zpp_inner.y==o}else r=!1;if(!r){this.zpp_inner.x=i,this.zpp_inner.y=o;var p=this.zpp_inner;null!=p._invalidate&&p._invalidate(p)}return this},lt.prototype.dot=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i*e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var p=r+a*e.zpp_inner.y;if(e.zpp_inner.weak){var l=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=l.outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=ep.zpp_pool,ep.zpp_pool=l}return p},lt.prototype.cross=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.y,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=this.zpp_inner;null!=s._validate&&s._validate();var p=r-a*this.zpp_inner.y;if(e.zpp_inner.weak){var l=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=l.outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=ep.zpp_pool,ep.zpp_pool=l}return p},lt.prototype.perp=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=-this.zpp_inner.y,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.x;if(null==jn.poolVec2?r=new lt:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,p=r.zpp_inner;if(null!=p._validate&&p._validate(),r.zpp_inner.x==i){var l=r.zpp_inner;null!=l._validate&&l._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},lt.prototype.toString=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.toString()},Object.defineProperty(lt.prototype,"x",{get:lt.prototype.get_x,set:lt.prototype.set_x}),Object.defineProperty(lt.prototype,"y",{get:lt.prototype.get_y,set:lt.prototype.set_y}),Object.defineProperty(lt.prototype,"length",{get:lt.prototype.get_length,set:lt.prototype.set_length}),Object.defineProperty(lt.prototype,"angle",{get:lt.prototype.get_angle,set:lt.prototype.set_angle}),lt.prototype.__class__=lt;var Qe=nape.geom.Vec2Iterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Qe.__name__=["nape","geom","Vec2Iterator"],Qe.get=function(e){var t;if(null==Qe.zpp_pool){Gn.internal=!0;var i=new Qe;Gn.internal=!1,t=i}else{var n=Qe.zpp_pool;Qe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Qe.prototype.zpp_inner=null,Qe.prototype.zpp_i=null,Qe.prototype.zpp_critical=null,Qe.prototype.zpp_next=null,Qe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=this).zpp_inner=null,!1)},Qe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Qe.prototype.__class__=Qe;var ge=nape.geom.Vec2List=function(){this.zpp_inner=null,this.zpp_inner=new Gn,this.zpp_inner.outer=this};ge.__name__=["nape","geom","Vec2List"],ge.fromArray=function(e){for(var t=new ge,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ge.prototype.zpp_inner=null,ge.prototype.get_length=function(){return this.zpp_gl()},ge.prototype.zpp_gl=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ge.prototype.zpp_vm=function(){this.zpp_inner.valmod()},ge.prototype.has=function(e){return this.zpp_vm(),this.zpp_inner.inner.has(e.zpp_inner)},ge.prototype.at=function(e){if(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;var t=this.zpp_inner.at_ite.elt;if(null==t.outer){t.outer=new lt;var i=t.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,t.outer.zpp_inner=t}return t.outer},ge.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(e.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},ge.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)):this.zpp_inner.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},ge.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(null==(e=this.zpp_inner.inner.head.elt).outer){e.outer=new lt;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,e.outer.zpp_inner=e}var i=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var n=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==n?this.zpp_inner.inner.head.elt:n.next.elt).outer){e.outer=new lt;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(n)}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new lt;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},ge.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var t=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer){e.outer=new lt;var i=e.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,e.outer.zpp_inner=e}var n=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{if(null==(e=this.zpp_inner.inner.head.elt).outer){e.outer=new lt;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new lt;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},ge.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ge.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ge.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},ge.prototype.empty=function(){return 0==this.zpp_gl()},ge.prototype.iterator=function(){return this.zpp_vm(),Qe.get(this)},ge.prototype.copy=function(e){null==e&&(e=!1);for(var t=new ge,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,!(i.zpp_i<n||(i.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var r,o=i.zpp_inner.at(i.zpp_i++);if(e){var a=o.zpp_inner;null!=a._validate&&a._validate();var s=o.zpp_inner.x,p=o.zpp_inner;null!=p._validate&&p._validate();var l,h=o.zpp_inner.y;if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var u;null==ep.zpp_pool?u=new ep:(u=ep.zpp_pool,ep.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=s,u.y=h,l.zpp_inner=u,l.zpp_inner.outer=l}else{var d,c=l.zpp_inner;if(null!=c._validate&&c._validate(),l.zpp_inner.x==s){var _=l.zpp_inner;null!=_._validate&&_._validate(),d=l.zpp_inner.y==h}else d=!1;if(!d){l.zpp_inner.x=s,l.zpp_inner.y=h;var y=l.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}l.zpp_inner.weak=!1,r=l}else r=o;t.push(r)}return t},ge.prototype.merge=function(e){for(var t=e.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,!(t.zpp_i<i||(t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var n=t.zpp_inner.at(t.zpp_i++);this.has(n)||this.add(n)}},ge.prototype.toString=function(){for(var e="[",t=!0,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,!(i.zpp_i<n||(i.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var r=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==r?"NULL":r.toString(),t=!1}return e+"]"},ge.prototype.foreach=function(e){for(var t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,!(t.zpp_i<i||(t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null;break}}return this},ge.prototype.filter=function(e){for(var t=0;t<this.zpp_gl();){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ge.prototype,"length",{get:ge.prototype.get_length}),ge.prototype.__class__=ge;var K=nape.geom.Vec3=function(e,t,i){null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),this.zpp_pool=null,this.zpp_inner=null,this.zpp_inner=new Wt,(this.zpp_inner.outer=this).zpp_inner.x=e;var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.y=t;var r=this.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.z=i;var o=this.zpp_inner;null!=o._validate&&o._validate()};K.__name__=["nape","geom","Vec3"],K.get=function(e,t,i){var n;return null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),null==jn.poolVec3?n=new K:(n=jn.poolVec3,jn.poolVec3=n.zpp_pool,n.zpp_pool=null),n.setxyz(e,t,i),n.zpp_inner.immutable=!1,n.zpp_inner._validate=null,n},K.prototype.zpp_inner=null,K.prototype.zpp_pool=null,K.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.x},K.prototype.set_x=function(e){this.zpp_inner.x=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.x},K.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.y},K.prototype.set_y=function(e){this.zpp_inner.y=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.y},K.prototype.get_z=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.z},K.prototype.set_z=function(e){this.zpp_inner.z=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.z},K.prototype.dispose=function(){this.zpp_pool=jn.poolVec3,jn.poolVec3=this},K.prototype.get_length=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=n+o*this.zpp_inner.y,p=this.zpp_inner;null!=p._validate&&p._validate();var l=this.zpp_inner.z,h=this.zpp_inner;return null!=h._validate&&h._validate(),Math.sqrt(s+l*this.zpp_inner.z)},K.prototype.set_length=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var p=r+a*this.zpp_inner.y,l=this.zpp_inner;null!=l._validate&&l._validate();var h=this.zpp_inner.z,u=this.zpp_inner;null!=u._validate&&u._validate();var d=e/Math.sqrt(p+h*this.zpp_inner.z),c=this.zpp_inner;null!=c._validate&&c._validate(),this.zpp_inner.x=this.zpp_inner.x*d;var _=this.zpp_inner;null!=_._validate&&_._validate();var y=this.zpp_inner;null!=y._validate&&y._validate(),this.zpp_inner.y=this.zpp_inner.y*d;var x=this.zpp_inner;null!=x._validate&&x._validate();var m=this.zpp_inner;null!=m._validate&&m._validate(),this.zpp_inner.z=this.zpp_inner.z*d;var f=this.zpp_inner;null!=f._validate&&f._validate();var v=this.zpp_inner;null!=v._validate&&v._validate();var g=this.zpp_inner.x,z=this.zpp_inner;null!=z._validate&&z._validate();var b=g*this.zpp_inner.x,w=this.zpp_inner;null!=w._validate&&w._validate();var S=this.zpp_inner.y,C=this.zpp_inner;null!=C._validate&&C._validate();var M=b+S*this.zpp_inner.y,P=this.zpp_inner;null!=P._validate&&P._validate();var k=this.zpp_inner.z,T=this.zpp_inner;return null!=T._validate&&T._validate(),Math.sqrt(M+k*this.zpp_inner.z)},K.prototype.lsq=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=n+o*this.zpp_inner.y,p=this.zpp_inner;null!=p._validate&&p._validate();var l=this.zpp_inner.z,h=this.zpp_inner;return null!=h._validate&&h._validate(),s+l*this.zpp_inner.z},K.prototype.set=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.y,o=e.zpp_inner;return null!=o._validate&&o._validate(),this.setxyz(i,r,e.zpp_inner.z)},K.prototype.setxyz=function(e,t,i){this.zpp_inner.x=e;var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.y=t;var r=this.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.z=i;var o=this.zpp_inner;return null!=o._validate&&o._validate(),this},K.prototype.xy=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y;if(null==jn.poolVec2?r=new lt:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,p=r.zpp_inner;if(null!=p._validate&&p._validate(),r.zpp_inner.x==i){var l=r.zpp_inner;null!=l._validate&&l._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},K.prototype.toString=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t="{ x: "+this.zpp_inner.x+" y: ",i=this.zpp_inner;null!=i._validate&&i._validate();var n=t+this.zpp_inner.y+" z: ",r=this.zpp_inner;return null!=r._validate&&r._validate(),n+this.zpp_inner.z+" }"},Object.defineProperty(K.prototype,"x",{get:K.prototype.get_x,set:K.prototype.set_x}),Object.defineProperty(K.prototype,"y",{get:K.prototype.get_y,set:K.prototype.set_y}),Object.defineProperty(K.prototype,"z",{get:K.prototype.get_z,set:K.prototype.set_z}),Object.defineProperty(K.prototype,"length",{get:K.prototype.get_length,set:K.prototype.set_length}),K.prototype.__class__=K;var J=nape.geom.Winding=function(){};J.__name__=["nape","geom","Winding"],J.UNDEFINED=null,J.get_UNDEFINED=function(){return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED},J.CLOCKWISE=null,J.get_CLOCKWISE=function(){return null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),Uo.Winding_CLOCKWISE},J.ANTICLOCKWISE=null,J.get_ANTICLOCKWISE=function(){return null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),Uo.Winding_ANTICLOCKWISE},J.prototype.toString=function(){return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),this==Uo.Winding_UNDEFINED?"UNDEFINED":(null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),this==Uo.Winding_CLOCKWISE?"CLOCKWISE":(null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),this==Uo.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""))},Object.defineProperty(J,"UNDEFINED",{get:J.get_UNDEFINED}),Object.defineProperty(J,"CLOCKWISE",{get:J.get_CLOCKWISE}),Object.defineProperty(J,"ANTICLOCKWISE",{get:J.get_ANTICLOCKWISE}),J.prototype.__class__=J;var Q=nape.phys.Interactor=function(){this.zpp_inner_i=null};Q.__name__=["nape","phys","Interactor"],Q.prototype.zpp_inner_i=null,Q.prototype.get_id=function(){return this.zpp_inner_i.id},Q.prototype.get_userData=function(){return null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={}),this.zpp_inner_i.userData},Q.prototype.isShape=function(){return null!=this.zpp_inner_i.ishape},Q.prototype.isBody=function(){return null!=this.zpp_inner_i.ibody},Q.prototype.isCompound=function(){return null!=this.zpp_inner_i.icompound},Q.prototype.get_castShape=function(){return null!=this.zpp_inner_i.ishape?this.zpp_inner_i.ishape.outer:null},Q.prototype.get_castBody=function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:null},Q.prototype.get_castCompound=function(){return null!=this.zpp_inner_i.icompound?this.zpp_inner_i.icompound.outer:null},Q.prototype.get_group=function(){return null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},Q.prototype.set_group=function(e){return this.zpp_inner_i.immutable_midstep("Interactor::group"),this.zpp_inner_i.setGroup(null==e?null:e.zpp_inner),null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},Q.prototype.get_cbTypes=function(){return null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes(),this.zpp_inner_i.wrap_cbTypes},Q.prototype.toString=function(){return""},Object.defineProperty(Q.prototype,"id",{get:Q.prototype.get_id}),Object.defineProperty(Q.prototype,"userData",{get:Q.prototype.get_userData}),Object.defineProperty(Q.prototype,"castShape",{get:Q.prototype.get_castShape}),Object.defineProperty(Q.prototype,"castBody",{get:Q.prototype.get_castBody}),Object.defineProperty(Q.prototype,"castCompound",{get:Q.prototype.get_castCompound}),Object.defineProperty(Q.prototype,"group",{get:Q.prototype.get_group,set:Q.prototype.set_group}),Object.defineProperty(Q.prototype,"cbTypes",{get:Q.prototype.get_cbTypes}),Q.prototype.__class__=Q;var re=nape.phys.Body=function(e,t){if(this.debugDraw=!0,this.zpp_inner=null,Q.call(this),this.zpp_inner=new qt,((this.zpp_inner.outer=this).zpp_inner.outer_i=this).zpp_inner_i=this.zpp_inner,null!=t){var i=t.zpp_inner;null!=i._validate&&i._validate(),this.zpp_inner.posx=t.zpp_inner.x;var n=t.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.posy=t.zpp_inner.y}else this.zpp_inner.posx=0,this.zpp_inner.posy=0;var r,o;(r=null==e?(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),Uo.BodyType_DYNAMIC):e,this.zpp_inner.immutable_midstep("Body::type"),qt.types[this.zpp_inner.type]!=r)&&(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),1==(o=r==Uo.BodyType_DYNAMIC?2:(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),r==Uo.BodyType_KINEMATIC?3:1))&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,o):this.zpp_inner.type=o);if(null!=t&&t.zpp_inner.weak){var a=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}this.zpp_inner_i.insert_cbtype(Be.ANY_BODY.zpp_inner)};re.__name__=["nape","phys","Body"],re.__super__=Q,re.prototype=Object.create(Q.prototype),re.prototype.zpp_inner=null,re.prototype.debugDraw=null,re.prototype.get_type=function(){return qt.types[this.zpp_inner.type]},re.prototype.set_type=function(e){var t;(this.zpp_inner.immutable_midstep("Body::type"),qt.types[this.zpp_inner.type]!=e)&&(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),1==(t=e==Uo.BodyType_DYNAMIC?2:(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),e==Uo.BodyType_KINEMATIC?3:1))&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,t):this.zpp_inner.type=t);return qt.types[this.zpp_inner.type]},re.prototype.get_isBullet=function(){return this.zpp_inner.bulletEnabled},re.prototype.set_isBullet=function(e){return this.zpp_inner.bulletEnabled=e,this.zpp_inner.bulletEnabled},re.prototype.get_disableCCD=function(){return this.zpp_inner.disableCCD},re.prototype.set_disableCCD=function(e){return this.zpp_inner.disableCCD=e,this.zpp_inner.disableCCD},re.prototype.integrate=function(e){if(this.zpp_inner.immutable_midstep("Body::space"),0==e)return this;var t=this.zpp_inner;t.sweepTime=0,t.sweep_angvel=t.angvel;var i=e-t.sweepTime;if(0!=i&&(t.sweepTime=e,t.posx+=t.velx*i,t.posy+=t.vely*i,0!=t.angvel)){var n=t.sweep_angvel*i;if(t.rot+=n,1e-4<n*n)t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot);else{var r=n*n,o=1-.5*r,a=1-r*r/8,s=(o*t.axisx+n*t.axisy)*a;t.axisy=(o*t.axisy-n*t.axisx)*a,t.axisx=s}}for(var p=t.shapes.head;null!=p;){var l=p.elt;1==l.type&&(l.polygon.invalidate_gverts(),l.polygon.invalidate_gaxi()),l.invalidate_worldCOM(),p=p.next}t.zip_worldCOM=!0,t.zip_axis=!0;for(var h=t.shapes.head;null!=h;){var u=h.elt;1==u.type&&(u.polygon.invalidate_gverts(),u.polygon.invalidate_gaxi()),u.invalidate_worldCOM(),h=h.next}return t.zip_worldCOM=!0,t.sweepTime=0,this},re.prototype.isStatic=function(){return 1==this.zpp_inner.type},re.prototype.isDynamic=function(){return 2==this.zpp_inner.type},re.prototype.isKinematic=function(){return 3==this.zpp_inner.type},re.prototype.get_shapes=function(){return this.zpp_inner.wrap_shapes},re.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},re.prototype.set_compound=function(e){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(this),null!=e)){var t=e.zpp_inner.wrap_bodies;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},re.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},re.prototype.set_space=function(e){if(this.zpp_inner.immutable_midstep("Body::space"),(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.component.woken=!1),null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this),null!=e)){var t=e.zpp_inner.wrap_bodies;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},re.prototype.get_arbiters=function(){return null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0)),this.zpp_inner.wrap_arbiters},re.prototype.get_isSleeping=function(){return this.zpp_inner.component.sleeping},re.prototype.get_constraints=function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=mn.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},re.prototype.copy=function(){return this.zpp_inner.copy()},re.prototype.get_position=function(){return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},re.prototype.set_position=function(e){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var t=this.zpp_inner.wrap_pos,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},re.prototype.get_velocity=function(){return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},re.prototype.set_velocity=function(e){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var t=this.zpp_inner.wrap_vel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},re.prototype.setVelocityFromTarget=function(e,t,i){var n=1/i;null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var r=this.zpp_inner.wrap_vel;null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var o=e.sub(this.zpp_inner.wrap_pos,!0).muleq(n),a=o.zpp_inner;null!=a._validate&&a._validate();var s=o.zpp_inner.x,p=o.zpp_inner;null!=p._validate&&p._validate();var l,h=o.zpp_inner.y,u=r.zpp_inner;if(null!=u._validate&&u._validate(),r.zpp_inner.x==s){var d=r.zpp_inner;null!=d._validate&&d._validate(),l=r.zpp_inner.y==h}else l=!1;if(!l){r.zpp_inner.x=s,r.zpp_inner.y=h;var c=r.zpp_inner;null!=c._invalidate&&c._invalidate(c)}if(o.zpp_inner.weak){var _=o.zpp_inner;o.zpp_inner.outer=null,o.zpp_inner=null,o.zpp_pool=jn.poolVec2,jn.poolVec2=o,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_}var y=(t-this.zpp_inner.rot)*n;if(this.zpp_inner.angvel!=y&&(this.zpp_inner.angvel=y,this.zpp_inner.wake()),e.zpp_inner.weak){var x=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=ep.zpp_pool,ep.zpp_pool=x}return this},re.prototype.get_kinematicVel=function(){return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},re.prototype.set_kinematicVel=function(e){null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel();var t=this.zpp_inner.wrap_kinvel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},re.prototype.get_surfaceVel=function(){return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},re.prototype.set_surfaceVel=function(e){null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel();var t=this.zpp_inner.wrap_svel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},re.prototype.get_force=function(){return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},re.prototype.set_force=function(e){null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce();var t=this.zpp_inner.wrap_force,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},re.prototype.get_constraintVelocity=function(){return null==this.zpp_inner.wrapcvel&&this.zpp_inner.setup_cvel(),this.zpp_inner.wrapcvel},re.prototype.get_rotation=function(){return this.zpp_inner.rot},re.prototype.set_rotation=function(e){if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.rot!=e){this.zpp_inner.rot=e;var t=this.zpp_inner;t.zip_axis=!0;for(var i=t.shapes.head;null!=i;){var n=i.elt;1==n.type&&(n.polygon.invalidate_gverts(),n.polygon.invalidate_gaxi()),n.invalidate_worldCOM(),i=i.next}t.zip_worldCOM=!0,this.zpp_inner.wake()}return this.zpp_inner.rot},re.prototype.get_angularVel=function(){return this.zpp_inner.angvel},re.prototype.set_angularVel=function(e){return this.zpp_inner.angvel!=e&&(this.zpp_inner.angvel=e,this.zpp_inner.wake()),this.zpp_inner.angvel},re.prototype.get_kinAngVel=function(){return this.zpp_inner.kinangvel},re.prototype.set_kinAngVel=function(e){return this.zpp_inner.kinangvel!=e&&(this.zpp_inner.kinangvel=e,this.zpp_inner.wake()),this.zpp_inner.kinangvel},re.prototype.get_torque=function(){return this.zpp_inner.torque},re.prototype.set_torque=function(e){return this.zpp_inner.torque!=e&&(this.zpp_inner.torque=e,this.zpp_inner.wake()),this.zpp_inner.torque},re.prototype.get_bounds=function(){return this.zpp_inner.aabb.wrapper()},re.prototype.get_allowMovement=function(){return!this.zpp_inner.nomove},re.prototype.set_allowMovement=function(e){return this.zpp_inner.immutable_midstep("Body::"+(null==e?"null":""+e)),!this.zpp_inner.nomove!=e&&(this.zpp_inner.nomove=!e,this.zpp_inner.invalidate_mass()),!this.zpp_inner.nomove},re.prototype.get_allowRotation=function(){return!this.zpp_inner.norotate},re.prototype.set_allowRotation=function(e){return this.zpp_inner.immutable_midstep("Body::"+(null==e?"null":""+e)),!this.zpp_inner.norotate!=e&&(this.zpp_inner.norotate=!e,this.zpp_inner.invalidate_inertia()),!this.zpp_inner.norotate},re.prototype.get_massMode=function(){null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1);var e=Uo.MassMode_DEFAULT;return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),[e,Uo.MassMode_FIXED][this.zpp_inner.massMode]},re.prototype.set_massMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::massMode"),null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),t=e==Uo.MassMode_DEFAULT?0:1,this.zpp_inner.massMode=t,this.zpp_inner.invalidate_mass(),null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1);var i=Uo.MassMode_DEFAULT;return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),[i,Uo.MassMode_FIXED][this.zpp_inner.massMode]},re.prototype.get_constraintMass=function(){return this.zpp_inner.world||this.zpp_inner.validate_mass(),this.zpp_inner.smass},re.prototype.get_mass=function(){return this.zpp_inner.validate_mass(),this.zpp_inner.cmass},re.prototype.set_mass=function(e){return this.zpp_inner.immutable_midstep("Body::mass"),this.zpp_inner.massMode=1,this.zpp_inner.cmass=e,this.zpp_inner.invalidate_mass(),this.zpp_inner.validate_mass(),this.zpp_inner.cmass},re.prototype.get_gravMassMode=function(){null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1);var e=Uo.GravMassMode_DEFAULT;null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new pe,Uo.internal=!1);var t=Uo.GravMassMode_FIXED;return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),[e,t,Uo.GravMassMode_SCALED][this.zpp_inner.massMode]},re.prototype.set_gravMassMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::gravMassMode"),null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),t=e==Uo.GravMassMode_SCALED?2:(null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1),e==Uo.GravMassMode_DEFAULT?0:1),this.zpp_inner.gravMassMode=t,this.zpp_inner.invalidate_gravMass(),null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1);var i=Uo.GravMassMode_DEFAULT;null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new pe,Uo.internal=!1);var n=Uo.GravMassMode_FIXED;return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),[i,n,Uo.GravMassMode_SCALED][this.zpp_inner.massMode]},re.prototype.get_gravMass=function(){return this.zpp_inner.validate_gravMass(),this.zpp_inner.gravMass},re.prototype.set_gravMass=function(e){return this.zpp_inner.immutable_midstep("Body::gravMass"),this.zpp_inner.gravMassMode=1,this.zpp_inner.gravMass=e,this.zpp_inner.invalidate_gravMass(),this.zpp_inner.validate_gravMass(),this.zpp_inner.gravMass},re.prototype.get_gravMassScale=function(){return this.zpp_inner.validate_gravMassScale(),this.zpp_inner.gravMassScale},re.prototype.set_gravMassScale=function(e){return this.zpp_inner.immutable_midstep("Body::gravMassScale"),this.zpp_inner.gravMassMode=2,this.zpp_inner.gravMassScale=e,this.zpp_inner.invalidate_gravMassScale(),this.zpp_inner.validate_gravMassScale(),this.zpp_inner.gravMassScale},re.prototype.get_inertiaMode=function(){null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new le,Uo.internal=!1);var e=Uo.InertiaMode_DEFAULT;return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),[e,Uo.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},re.prototype.set_inertiaMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::inertiaMode"),null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),t=e==Uo.InertiaMode_FIXED?1:0,this.zpp_inner.inertiaMode=t,this.zpp_inner.invalidate_inertia(),null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new le,Uo.internal=!1);var i=Uo.InertiaMode_DEFAULT;return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),[i,Uo.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},re.prototype.get_constraintInertia=function(){return this.zpp_inner.world||this.zpp_inner.validate_inertia(),this.zpp_inner.sinertia},re.prototype.get_inertia=function(){return this.zpp_inner.validate_inertia(),this.zpp_inner.cinertia},re.prototype.set_inertia=function(e){return this.zpp_inner.immutable_midstep("Body::inertia"),this.zpp_inner.inertiaMode=1,this.zpp_inner.cinertia=e,this.zpp_inner.invalidate_inertia(),this.zpp_inner.validate_inertia(),this.zpp_inner.cinertia},re.prototype.connectedBodies=function(e,t){return null==e&&(e=-1),this.zpp_inner.connectedBodies(e,t)},re.prototype.interactingBodies=function(e,t,i){var n;return null==t&&(t=-1),n=null==e?ln.COL|ln.SENSOR|ln.FLUID:(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),e==Uo.InteractionType_COLLISION?ln.COL:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?ln.SENSOR:ln.FLUID)),this.zpp_inner.interactingBodies(n,t,i)},re.prototype.crushFactor=function(){var e,t=0;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var i;null==ep.zpp_pool?i=new ep:(i=ep.zpp_pool,ep.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,e.zpp_inner=i,e.zpp_inner.outer=e}else{var n,r=e.zpp_inner;if(null!=r._validate&&r._validate(),0==e.zpp_inner.x){var o=e.zpp_inner;null!=o._validate&&o._validate(),n=0==e.zpp_inner.y}else n=!1;if(!n){e.zpp_inner.x=0,e.zpp_inner.y=0;var a=e.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}e.zpp_inner.weak=!1;var s=e;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var p=this.zpp_inner.wrap_arbiters.iterator();;){p.zpp_inner.zpp_inner.valmod();var l=p.zpp_inner.zpp_gl();if(p.zpp_critical=!0,!(p.zpp_i<l||(p.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=p).zpp_inner=null,!1)))break;p.zpp_critical=!1;var h=p.zpp_inner.at(p.zpp_i++).totalImpulse(this),u=h.xy();s.addeq(u);var d=u.zpp_inner;null!=d._validate&&d._validate();var c=u.zpp_inner.x,_=u.zpp_inner;null!=_._validate&&_._validate();var y=c*u.zpp_inner.x,x=u.zpp_inner;null!=x._validate&&x._validate();var m=u.zpp_inner.y,f=u.zpp_inner;null!=f._validate&&f._validate(),t+=Math.sqrt(y+m*u.zpp_inner.y);var v=u.zpp_inner;u.zpp_inner.outer=null,u.zpp_inner=null,u.zpp_pool=jn.poolVec2,jn.poolVec2=u,null!=v.outer&&(v.outer.zpp_inner=null,v.outer=null),v._isimmutable=null,v._validate=null,v._invalidate=null,v.next=ep.zpp_pool,ep.zpp_pool=v,h.dispose()}null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=mn.get(this.zpp_inner.constraints,!0));var g=this.zpp_inner.wrap_constraints;g.zpp_inner.valmod();for(var z=We.get(g);;){z.zpp_inner.zpp_inner.valmod();var b=z.zpp_inner;b.zpp_inner.valmod(),b.zpp_inner.zip_length&&(b.zpp_inner.zip_length=!1,b.zpp_inner.user_length=b.zpp_inner.inner.length);var w=b.zpp_inner.user_length;if(z.zpp_critical=!0,!(z.zpp_i<w||(z.zpp_next=We.zpp_pool,(We.zpp_pool=z).zpp_inner=null,!1)))break;z.zpp_critical=!1;var S=z.zpp_inner.at(z.zpp_i++).bodyImpulse(this),C=S.xy();s.addeq(C);var M=C.zpp_inner;null!=M._validate&&M._validate();var P=C.zpp_inner.x,k=C.zpp_inner;null!=k._validate&&k._validate();var T=P*C.zpp_inner.x,G=C.zpp_inner;null!=G._validate&&G._validate();var O=C.zpp_inner.y,A=C.zpp_inner;null!=A._validate&&A._validate(),t+=Math.sqrt(T+O*C.zpp_inner.y);var E=C.zpp_inner;C.zpp_inner.outer=null,C.zpp_inner=null,C.zpp_pool=jn.poolVec2,jn.poolVec2=C,null!=E.outer&&(E.outer.zpp_inner=null,E.outer=null),E._isimmutable=null,E._validate=null,E._invalidate=null,E.next=ep.zpp_pool,ep.zpp_pool=E,S.dispose()}var I=s.zpp_inner;null!=I._validate&&I._validate();var B=s.zpp_inner.x,L=s.zpp_inner;null!=L._validate&&L._validate();var D=B*s.zpp_inner.x,R=s.zpp_inner;null!=R._validate&&R._validate();var F=s.zpp_inner.y,j=s.zpp_inner;null!=j._validate&&j._validate();var N=t-Math.sqrt(D+F*s.zpp_inner.y);this.zpp_inner.validate_mass();var U=N/(this.zpp_inner.cmass*(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.pre_dt),H=s.zpp_inner;return s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=H.outer&&(H.outer.zpp_inner=null,H.outer=null),H._isimmutable=null,H._validate=null,H._invalidate=null,H.next=ep.zpp_pool,ep.zpp_pool=H,U},re.prototype.localPointToWorld=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.axisy*e.zpp_inner.x,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a-this.zpp_inner.axisx*e.zpp_inner.y;var p=e.zpp_inner;null!=p._validate&&p._validate();var l=e.zpp_inner.x*this.zpp_inner.axisx,h=e.zpp_inner;if(null!=h._validate&&h._validate(),r=l+e.zpp_inner.y*this.zpp_inner.axisy,e.zpp_inner.weak){var u=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=ep.zpp_pool,ep.zpp_pool=u}var d,c=n+this.zpp_inner.posx,_=r+this.zpp_inner.posy;if(null==jn.poolVec2?d=new lt:(d=jn.poolVec2,jn.poolVec2=d.zpp_pool,d.zpp_pool=null),null==d.zpp_inner){var y;null==ep.zpp_pool?y=new ep:(y=ep.zpp_pool,ep.zpp_pool=y.next,y.next=null),y.weak=!1,y._immutable=!1,y.x=c,y.y=_,d.zpp_inner=y,d.zpp_inner.outer=d}else{var x,m=d.zpp_inner;if(null!=m._validate&&m._validate(),d.zpp_inner.x==c){var f=d.zpp_inner;null!=f._validate&&f._validate(),x=d.zpp_inner.y==_}else x=!1;if(!x){d.zpp_inner.x=c,d.zpp_inner.y=_;var v=d.zpp_inner;null!=v._invalidate&&v._invalidate(v)}}return d.zpp_inner.weak=t,d},re.prototype.worldPointToLocal=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o,a,s=e.zpp_inner;null!=s._validate&&s._validate(),o=e.zpp_inner.x-this.zpp_inner.posx;var p,l=e.zpp_inner;if(null!=l._validate&&l._validate(),a=e.zpp_inner.y-this.zpp_inner.posy,n=o*this.zpp_inner.axisy+a*this.zpp_inner.axisx,r=a*this.zpp_inner.axisy-o*this.zpp_inner.axisx,e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}if(null==jn.poolVec2?p=new lt:(p=jn.poolVec2,jn.poolVec2=p.zpp_pool,p.zpp_pool=null),null==p.zpp_inner){var u;null==ep.zpp_pool?u=new ep:(u=ep.zpp_pool,ep.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=n,u.y=r,p.zpp_inner=u,p.zpp_inner.outer=p}else{var d,c=p.zpp_inner;if(null!=c._validate&&c._validate(),p.zpp_inner.x==n){var _=p.zpp_inner;null!=_._validate&&_._validate(),d=p.zpp_inner.y==r}else d=!1;if(!d){p.zpp_inner.x=n,p.zpp_inner.y=r;var y=p.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}return p.zpp_inner.weak=t,p},re.prototype.localVectorToWorld=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.axisy*e.zpp_inner.x,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a-this.zpp_inner.axisx*e.zpp_inner.y;var p=e.zpp_inner;null!=p._validate&&p._validate();var l,h=e.zpp_inner.x*this.zpp_inner.axisx,u=e.zpp_inner;if(null!=u._validate&&u._validate(),r=h+e.zpp_inner.y*this.zpp_inner.axisy,e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var c;null==ep.zpp_pool?c=new ep:(c=ep.zpp_pool,ep.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=n,c.y=r,l.zpp_inner=c,l.zpp_inner.outer=l}else{var _,y=l.zpp_inner;if(null!=y._validate&&y._validate(),l.zpp_inner.x==n){var x=l.zpp_inner;null!=x._validate&&x._validate(),_=l.zpp_inner.y==r}else _=!1;if(!_){l.zpp_inner.x=n,l.zpp_inner.y=r;var m=l.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}return l.zpp_inner.weak=t,l},re.prototype.worldVectorToLocal=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x*this.zpp_inner.axisy,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a+e.zpp_inner.y*this.zpp_inner.axisx;var p=e.zpp_inner;null!=p._validate&&p._validate();var l,h=e.zpp_inner.y*this.zpp_inner.axisy,u=e.zpp_inner;if(null!=u._validate&&u._validate(),r=h-e.zpp_inner.x*this.zpp_inner.axisx,e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var c;null==ep.zpp_pool?c=new ep:(c=ep.zpp_pool,ep.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=n,c.y=r,l.zpp_inner=c,l.zpp_inner.outer=l}else{var _,y=l.zpp_inner;if(null!=y._validate&&y._validate(),l.zpp_inner.x==n){var x=l.zpp_inner;null!=x._validate&&x._validate(),_=l.zpp_inner.y==r}else _=!1;if(!_){l.zpp_inner.x=n,l.zpp_inner.y=r;var m=l.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}return l.zpp_inner.weak=t,l},re.prototype.applyImpulse=function(e,t,i){if(null==i&&(i=!1),i&&this.zpp_inner.component.sleeping){if(e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}if(null!=t&&t.zpp_inner.weak){var r=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r}return this}this.zpp_inner.validate_mass();var o=this.zpp_inner.imass,a=e.zpp_inner;null!=a._validate&&a._validate(),this.zpp_inner.velx+=e.zpp_inner.x*o;var s=e.zpp_inner;if(null!=s._validate&&s._validate(),this.zpp_inner.vely+=e.zpp_inner.y*o,null!=t){var p,l,h=t.zpp_inner;null!=h._validate&&h._validate(),p=t.zpp_inner.x-this.zpp_inner.posx;var u=t.zpp_inner;null!=u._validate&&u._validate(),l=t.zpp_inner.y-this.zpp_inner.posy,this.zpp_inner.validate_inertia();var d=e.zpp_inner;null!=d._validate&&d._validate();var c=e.zpp_inner.y*p,_=e.zpp_inner;if(null!=_._validate&&_._validate(),this.zpp_inner.angvel+=(c-e.zpp_inner.x*l)*this.zpp_inner.iinertia,t.zpp_inner.weak){var y=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=ep.zpp_pool,ep.zpp_pool=y}}if(i||2==this.zpp_inner.type&&this.zpp_inner.wake(),e.zpp_inner.weak){var x=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=ep.zpp_pool,ep.zpp_pool=x}return this},re.prototype.applyAngularImpulse=function(e,t){return null==t&&(t=!1),t&&this.zpp_inner.component.sleeping||(this.zpp_inner.validate_inertia(),this.zpp_inner.angvel+=e*this.zpp_inner.iinertia,t||2==this.zpp_inner.type&&this.zpp_inner.wake()),this},re.prototype.translateShapes=function(e){this.zpp_inner.immutable_midstep("Body::translateShapes()");var t=e.zpp_inner.weak;e.zpp_inner.weak=!1;for(var i=this.zpp_inner.shapes.head;null!=i;)i.elt.outer.translate(e),i=i.next;if(e.zpp_inner.weak=t,e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}return this},re.prototype.rotateShapes=function(e){this.zpp_inner.immutable_midstep("Body::rotateShapes()");for(var t=this.zpp_inner.shapes.head;null!=t;)t.elt.outer.rotate(e),t=t.next;return this},re.prototype.scaleShapes=function(e,t){this.zpp_inner.immutable_midstep("Body::scaleShapes()");for(var i=this.zpp_inner.shapes.head;null!=i;)i.elt.outer.scale(e,t),i=i.next;return this},re.prototype.transformShapes=function(e){this.zpp_inner.immutable_midstep("Body::transformShapes()");for(var t=this.zpp_inner.shapes.head;null!=t;)t.elt.outer.transform(e),t=t.next;return this},re.prototype.align=function(){this.zpp_inner.immutable_midstep("Body::align()"),this.zpp_inner.validate_localCOM();var e,t=-this.zpp_inner.localCOMx,i=-this.zpp_inner.localCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1;var p=e;this.translateShapes(p);var l=this.localVectorToWorld(p);if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos.subeq(l),this.zpp_inner.pre_posx<1/0){var h=l.zpp_inner;null!=h._validate&&h._validate(),this.zpp_inner.pre_posx-=l.zpp_inner.x;var u=l.zpp_inner;null!=u._validate&&u._validate(),this.zpp_inner.pre_posy-=l.zpp_inner.y}var d=p.zpp_inner;p.zpp_inner.outer=null,p.zpp_inner=null,p.zpp_pool=jn.poolVec2,jn.poolVec2=p,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d;var c=l.zpp_inner;return l.zpp_inner.outer=null,l.zpp_inner=null,l.zpp_pool=jn.poolVec2,jn.poolVec2=l,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c,this},re.prototype.rotate=function(e,t){var i=e.zpp_inner.weak;e.zpp_inner.weak=!1,null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var n=this.zpp_inner.wrap_pos.sub(e);n.rotate(t);var r=e.add(n,!0);null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var o=this.zpp_inner.wrap_pos,a=r.zpp_inner;null!=a._validate&&a._validate();var s=r.zpp_inner.x,p=r.zpp_inner;null!=p._validate&&p._validate();var l,h=r.zpp_inner.y,u=o.zpp_inner;if(null!=u._validate&&u._validate(),o.zpp_inner.x==s){var d=o.zpp_inner;null!=d._validate&&d._validate(),l=o.zpp_inner.y==h}else l=!1;if(!l){o.zpp_inner.x=s,o.zpp_inner.y=h;var c=o.zpp_inner;null!=c._invalidate&&c._invalidate(c)}if(r.zpp_inner.weak){var _=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_}null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var y=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=ep.zpp_pool,ep.zpp_pool=y;var x=this.zpp_inner.rot+t;if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.rot!=x){this.zpp_inner.rot=x;var m=this.zpp_inner;m.zip_axis=!0;for(var f=m.shapes.head;null!=f;){var v=f.elt;1==v.type&&(v.polygon.invalidate_gverts(),v.polygon.invalidate_gaxi()),v.invalidate_worldCOM(),f=f.next}m.zip_worldCOM=!0,this.zpp_inner.wake()}if(e.zpp_inner.weak=i,e.zpp_inner.weak){var g=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=g.outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=ep.zpp_pool,ep.zpp_pool=g}return this},re.prototype.setShapeMaterials=function(e){this.zpp_inner.immutable_midstep("Body::setShapeMaterials()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.immutable_midstep("Shape::material"),i.zpp_inner.setMaterial(e.zpp_inner),i.zpp_inner.material.wrapper(),t=t.next}return this},re.prototype.setShapeFilters=function(e){this.zpp_inner.immutable_midstep("Body::setShapeFilters()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.immutable_midstep("Shape::filter"),i.zpp_inner.setFilter(e.zpp_inner),i.zpp_inner.filter.wrapper(),t=t.next}return this},re.prototype.setShapeFluidProperties=function(e){this.zpp_inner.immutable_midstep("Body::setShapeFluidProperties()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.setFluid(e.zpp_inner),i.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==i.zpp_inner.fluidProperties&&i.zpp_inner.setFluid((new se).zpp_inner),i.zpp_inner.fluidProperties.wrapper(),t=t.next}return this},re.prototype.get_localCOM=function(){if(null==this.zpp_inner.wrap_localCOM){var e,t=this.zpp_inner.localCOMx,i=this.zpp_inner.localCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_localCOM=e,this.zpp_inner.wrap_localCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_localCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_localCOM.zpp_inner._validate=$(d=this.zpp_inner,d.getlocalCOM)}return this.zpp_inner.wrap_localCOM},re.prototype.get_worldCOM=function(){if(null==this.zpp_inner.wrap_worldCOM){var e,t=this.zpp_inner.worldCOMx,i=this.zpp_inner.worldCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=e,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(d=this.zpp_inner,d.getworldCOM)}return this.zpp_inner.wrap_worldCOM},re.prototype.normalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,!(o.zpp_i<a||(o.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1;var s=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(s.type==ln.COL&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var p=s.wrapper(),l=(p.zpp_inner.type==ln.COL?p.zpp_inner.colarb.outer_zn:null).normalImpulse(this,t),h=l.zpp_inner;null!=h._validate&&h._validate(),i+=l.zpp_inner.x;var u=l.zpp_inner;null!=u._validate&&u._validate(),n+=l.zpp_inner.y;var d=l.zpp_inner;null!=d._validate&&d._validate(),r+=l.zpp_inner.z,l.dispose()}}return K.get(i,n,r)},re.prototype.tangentImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,!(o.zpp_i<a||(o.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1;var s=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(s.type==ln.COL&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var p=s.wrapper(),l=(p.zpp_inner.type==ln.COL?p.zpp_inner.colarb.outer_zn:null).tangentImpulse(this,t),h=l.zpp_inner;null!=h._validate&&h._validate(),i+=l.zpp_inner.x;var u=l.zpp_inner;null!=u._validate&&u._validate(),n+=l.zpp_inner.y;var d=l.zpp_inner;null!=d._validate&&d._validate(),r+=l.zpp_inner.z,l.dispose()}}return K.get(i,n,r)},re.prototype.totalContactsImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,!(o.zpp_i<a||(o.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1;var s=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(s.type==ln.COL&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var p=s.wrapper(),l=(p.zpp_inner.type==ln.COL?p.zpp_inner.colarb.outer_zn:null).totalImpulse(this,t),h=l.zpp_inner;null!=h._validate&&h._validate(),i+=l.zpp_inner.x;var u=l.zpp_inner;null!=u._validate&&u._validate(),n+=l.zpp_inner.y;var d=l.zpp_inner;null!=d._validate&&d._validate(),r+=l.zpp_inner.z,l.dispose()}}return K.get(i,n,r)},re.prototype.rollingImpulse=function(e,t){null==t&&(t=!1);var i=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var n=this.zpp_inner.wrap_arbiters.iterator();;){n.zpp_inner.zpp_inner.valmod();var r=n.zpp_inner.zpp_gl();if(n.zpp_critical=!0,!(n.zpp_i<r||(n.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=n).zpp_inner=null,!1)))break;n.zpp_critical=!1;var o=n.zpp_inner.at(n.zpp_i++).zpp_inner;if(o.type==ln.COL&&(null==e||o.b2==e.zpp_inner||o.b1==e.zpp_inner)){var a=o.wrapper();i+=(a.zpp_inner.type==ln.COL?a.zpp_inner.colarb.outer_zn:null).rollingImpulse(this,t)}}return i},re.prototype.buoyancyImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,!(r.zpp_i<o||(r.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=r).zpp_inner=null,!1)))break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==ln.FLUID&&(null==e||a.b2==e.zpp_inner||a.b1==e.zpp_inner)){var s=a.wrapper(),p=(s.zpp_inner.type==ln.FLUID?s.zpp_inner.fluidarb.outer_zn:null).buoyancyImpulse(this),l=p.zpp_inner;null!=l._validate&&l._validate(),t+=p.zpp_inner.x;var h=p.zpp_inner;null!=h._validate&&h._validate(),i+=p.zpp_inner.y;var u=p.zpp_inner;null!=u._validate&&u._validate(),n+=p.zpp_inner.z,p.dispose()}}return K.get(t,i,n)},re.prototype.dragImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,!(r.zpp_i<o||(r.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=r).zpp_inner=null,!1)))break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==ln.FLUID&&(null==e||a.b2==e.zpp_inner||a.b1==e.zpp_inner)){var s=a.wrapper(),p=(s.zpp_inner.type==ln.FLUID?s.zpp_inner.fluidarb.outer_zn:null).dragImpulse(this),l=p.zpp_inner;null!=l._validate&&l._validate(),t+=p.zpp_inner.x;var h=p.zpp_inner;null!=h._validate&&h._validate(),i+=p.zpp_inner.y;var u=p.zpp_inner;null!=u._validate&&u._validate(),n+=p.zpp_inner.z,p.dispose()}}return K.get(t,i,n)},re.prototype.totalFluidImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,!(r.zpp_i<o||(r.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=r).zpp_inner=null,!1)))break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==ln.FLUID&&(null==e||a.b2==e.zpp_inner||a.b1==e.zpp_inner)){var s=a.wrapper(),p=(s.zpp_inner.type==ln.FLUID?s.zpp_inner.fluidarb.outer_zn:null).totalImpulse(this),l=p.zpp_inner;null!=l._validate&&l._validate(),t+=p.zpp_inner.x;var h=p.zpp_inner;null!=h._validate&&h._validate(),i+=p.zpp_inner.y;var u=p.zpp_inner;null!=u._validate&&u._validate(),n+=p.zpp_inner.z,p.dispose()}}return K.get(t,i,n)},re.prototype.constraintsImpulse=function(){for(var e=0,t=0,i=0,n=this.zpp_inner.constraints.head;null!=n;){var r=n.elt.outer.bodyImpulse(this),o=r.zpp_inner;null!=o._validate&&o._validate(),e+=r.zpp_inner.x;var a=r.zpp_inner;null!=a._validate&&a._validate(),t+=r.zpp_inner.y;var s=r.zpp_inner;null!=s._validate&&s._validate(),i+=r.zpp_inner.z,r.dispose(),n=n.next}return K.get(e,t,i)},re.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,!(o.zpp_i<a||(o.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1;var s=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(s.type!=ln.SENSOR&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var p=s.wrapper().totalImpulse(this,t),l=p.zpp_inner;null!=l._validate&&l._validate(),i+=p.zpp_inner.x;var h=p.zpp_inner;null!=h._validate&&h._validate(),n+=p.zpp_inner.y;var u=p.zpp_inner;null!=u._validate&&u._validate(),r+=p.zpp_inner.z,p.dispose()}}for(var d=this.zpp_inner.constraints.head;null!=d;){var c=d.elt;if(c.active){var _=c.outer.bodyImpulse(this),y=_.zpp_inner;null!=y._validate&&y._validate(),i+=_.zpp_inner.x;var x=_.zpp_inner;null!=x._validate&&x._validate(),n+=_.zpp_inner.y;var m=_.zpp_inner;null!=m._validate&&m._validate(),r+=_.zpp_inner.z,_.dispose()}d=d.next}return K.get(i,n,r)},re.prototype.contains=function(e){var t,i=e.zpp_inner.weak;t=e.zpp_inner.weak=!1;for(var n=this.zpp_inner.shapes.head;null!=n;){if(n.elt.outer.contains(e)){t=!0;break}n=n.next}if(e.zpp_inner.weak=i,e.zpp_inner.weak){var r=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r}return t},re.prototype.toString=function(){return(this.zpp_inner.world?"(space::world":"("+(2==this.zpp_inner.type?"dynamic":1==this.zpp_inner.type?"static":"kinematic"))+")#"+this.zpp_inner_i.id},Object.defineProperty(re.prototype,"type",{get:re.prototype.get_type,set:re.prototype.set_type}),Object.defineProperty(re.prototype,"isBullet",{get:re.prototype.get_isBullet,set:re.prototype.set_isBullet}),Object.defineProperty(re.prototype,"disableCCD",{get:re.prototype.get_disableCCD,set:re.prototype.set_disableCCD}),Object.defineProperty(re.prototype,"shapes",{get:re.prototype.get_shapes}),Object.defineProperty(re.prototype,"compound",{get:re.prototype.get_compound,set:re.prototype.set_compound}),Object.defineProperty(re.prototype,"space",{get:re.prototype.get_space,set:re.prototype.set_space}),Object.defineProperty(re.prototype,"arbiters",{get:re.prototype.get_arbiters}),Object.defineProperty(re.prototype,"isSleeping",{get:re.prototype.get_isSleeping}),Object.defineProperty(re.prototype,"constraints",{get:re.prototype.get_constraints}),Object.defineProperty(re.prototype,"position",{get:re.prototype.get_position,set:re.prototype.set_position}),Object.defineProperty(re.prototype,"velocity",{get:re.prototype.get_velocity,set:re.prototype.set_velocity}),Object.defineProperty(re.prototype,"kinematicVel",{get:re.prototype.get_kinematicVel,set:re.prototype.set_kinematicVel}),Object.defineProperty(re.prototype,"surfaceVel",{get:re.prototype.get_surfaceVel,set:re.prototype.set_surfaceVel}),Object.defineProperty(re.prototype,"force",{get:re.prototype.get_force,set:re.prototype.set_force}),Object.defineProperty(re.prototype,"constraintVelocity",{get:re.prototype.get_constraintVelocity}),Object.defineProperty(re.prototype,"rotation",{get:re.prototype.get_rotation,set:re.prototype.set_rotation}),Object.defineProperty(re.prototype,"angularVel",{get:re.prototype.get_angularVel,set:re.prototype.set_angularVel}),Object.defineProperty(re.prototype,"kinAngVel",{get:re.prototype.get_kinAngVel,set:re.prototype.set_kinAngVel}),Object.defineProperty(re.prototype,"torque",{get:re.prototype.get_torque,set:re.prototype.set_torque}),Object.defineProperty(re.prototype,"bounds",{get:re.prototype.get_bounds}),Object.defineProperty(re.prototype,"allowMovement",{get:re.prototype.get_allowMovement,set:re.prototype.set_allowMovement}),Object.defineProperty(re.prototype,"allowRotation",{get:re.prototype.get_allowRotation,set:re.prototype.set_allowRotation}),Object.defineProperty(re.prototype,"massMode",{get:re.prototype.get_massMode,set:re.prototype.set_massMode}),Object.defineProperty(re.prototype,"constraintMass",{get:re.prototype.get_constraintMass}),Object.defineProperty(re.prototype,"mass",{get:re.prototype.get_mass,set:re.prototype.set_mass}),Object.defineProperty(re.prototype,"gravMassMode",{get:re.prototype.get_gravMassMode,set:re.prototype.set_gravMassMode}),Object.defineProperty(re.prototype,"gravMass",{get:re.prototype.get_gravMass,set:re.prototype.set_gravMass}),Object.defineProperty(re.prototype,"gravMassScale",{get:re.prototype.get_gravMassScale,set:re.prototype.set_gravMassScale}),Object.defineProperty(re.prototype,"inertiaMode",{get:re.prototype.get_inertiaMode,set:re.prototype.set_inertiaMode}),Object.defineProperty(re.prototype,"constraintInertia",{get:re.prototype.get_constraintInertia}),Object.defineProperty(re.prototype,"inertia",{get:re.prototype.get_inertia,set:re.prototype.set_inertia}),Object.defineProperty(re.prototype,"localCOM",{get:re.prototype.get_localCOM}),Object.defineProperty(re.prototype,"worldCOM",{get:re.prototype.get_worldCOM}),re.prototype.__class__=re;var $e=nape.phys.BodyIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};$e.__name__=["nape","phys","BodyIterator"],$e.get=function(e){var t;if(null==$e.zpp_pool){fn.internal=!0;var i=new $e;fn.internal=!1,t=i}else{var n=$e.zpp_pool;$e.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},$e.prototype.zpp_inner=null,$e.prototype.zpp_i=null,$e.prototype.zpp_critical=null,$e.prototype.zpp_next=null,$e.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=$e.zpp_pool,($e.zpp_pool=this).zpp_inner=null,!1)},$e.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},$e.prototype.__class__=$e;var ee=nape.phys.BodyList=function(){this.zpp_inner=null,this.zpp_inner=new fn,this.zpp_inner.outer=this};ee.__name__=["nape","phys","BodyList"],ee.fromArray=function(e){for(var t=new ee,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ee.prototype.zpp_inner=null,ee.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ee.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ee.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},ee.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ee.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ee.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},ee.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},ee.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ee.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ee.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ee.prototype.empty=function(){return null==this.zpp_inner.inner.head},ee.prototype.iterator=function(){return this.zpp_inner.valmod(),$e.get(this)},ee.prototype.copy=function(e){null==e&&(e=!1);var t=new ee;this.zpp_inner.valmod();for(var i=$e.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},ee.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=$e.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},ee.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=$e.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},ee.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=$e.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null;break}}return this},ee.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ee.prototype,"length",{get:ee.prototype.get_length}),ee.prototype.__class__=ee;var oe=nape.phys.BodyType=function(){};oe.__name__=["nape","phys","BodyType"],oe.STATIC=null,oe.get_STATIC=function(){return null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1),Uo.BodyType_STATIC},oe.DYNAMIC=null,oe.get_DYNAMIC=function(){return null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),Uo.BodyType_DYNAMIC},oe.KINEMATIC=null,oe.get_KINEMATIC=function(){return null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),Uo.BodyType_KINEMATIC},oe.prototype.toString=function(){return null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1),this==Uo.BodyType_STATIC?"STATIC":(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),this==Uo.BodyType_DYNAMIC?"DYNAMIC":(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),this==Uo.BodyType_KINEMATIC?"KINEMATIC":""))},Object.defineProperty(oe,"STATIC",{get:oe.get_STATIC}),Object.defineProperty(oe,"DYNAMIC",{get:oe.get_DYNAMIC}),Object.defineProperty(oe,"KINEMATIC",{get:oe.get_KINEMATIC}),oe.prototype.__class__=oe;var ie=nape.phys.Compound=function(){this.zpp_inner=null,Q.call(this),this.zpp_inner=new Yt,((this.zpp_inner.outer=this).zpp_inner.outer_i=this).zpp_inner_i=this.zpp_inner,this.zpp_inner.insert_cbtype(Be.ANY_COMPOUND.zpp_inner)};ie.__name__=["nape","phys","Compound"],ie.__super__=Q,ie.prototype=Object.create(Q.prototype),ie.prototype.zpp_inner=null,ie.prototype.get_bodies=function(){return this.zpp_inner.wrap_bodies},ie.prototype.get_constraints=function(){return this.zpp_inner.wrap_constraints},ie.prototype.get_compounds=function(){return this.zpp_inner.wrap_compounds},ie.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},ie.prototype.set_compound=function(e){if(this.zpp_inner.immutable_midstep("Compound::compound"),(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(this),null!=e)){var t=e.zpp_inner.wrap_compounds;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},ie.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},ie.prototype.set_space=function(e){if(this.zpp_inner.immutable_midstep("Compound::space"),(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_compounds.remove(this),null!=e)){var t=e.zpp_inner.wrap_compounds;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},ie.prototype.toString=function(){return"Compound"+this.zpp_inner_i.id},ie.prototype.copy=function(){return this.zpp_inner.copy()},ie.prototype.breakApart=function(){this.zpp_inner.breakApart()},ie.prototype.visitBodies=function(e){var t=this.zpp_inner.wrap_bodies;t.zpp_inner.valmod();for(var i=$e.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var o=this.zpp_inner.wrap_compounds;o.zpp_inner.valmod();for(var a=et.get(o);;){a.zpp_inner.zpp_inner.valmod();var s=a.zpp_inner;s.zpp_inner.valmod(),s.zpp_inner.zip_length&&(s.zpp_inner.zip_length=!1,s.zpp_inner.user_length=s.zpp_inner.inner.length);var p=s.zpp_inner.user_length;if(a.zpp_critical=!0,!(a.zpp_i<p||(a.zpp_next=et.zpp_pool,(et.zpp_pool=a).zpp_inner=null,!1)))break;a.zpp_critical=!1,a.zpp_inner.at(a.zpp_i++).visitBodies(e)}},ie.prototype.visitConstraints=function(e){var t=this.zpp_inner.wrap_constraints;t.zpp_inner.valmod();for(var i=We.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var o=this.zpp_inner.wrap_compounds;o.zpp_inner.valmod();for(var a=et.get(o);;){a.zpp_inner.zpp_inner.valmod();var s=a.zpp_inner;s.zpp_inner.valmod(),s.zpp_inner.zip_length&&(s.zpp_inner.zip_length=!1,s.zpp_inner.user_length=s.zpp_inner.inner.length);var p=s.zpp_inner.user_length;if(a.zpp_critical=!0,!(a.zpp_i<p||(a.zpp_next=et.zpp_pool,(et.zpp_pool=a).zpp_inner=null,!1)))break;a.zpp_critical=!1,a.zpp_inner.at(a.zpp_i++).visitConstraints(e)}},ie.prototype.visitCompounds=function(e){var t=this.zpp_inner.wrap_compounds;t.zpp_inner.valmod();for(var i=et.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);e(o),o.visitCompounds(e)}},ie.prototype.COM=function(e){var t;if(null==e&&(e=!1),null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var i;null==ep.zpp_pool?i=new ep:(i=ep.zpp_pool,ep.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,t.zpp_inner=i,t.zpp_inner.outer=t}else{var n,r=t.zpp_inner;if(null!=r._validate&&r._validate(),0==t.zpp_inner.x){var o=t.zpp_inner;null!=o._validate&&o._validate(),n=0==t.zpp_inner.y}else n=!1;if(!n){t.zpp_inner.x=0,t.zpp_inner.y=0;var a=t.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}t.zpp_inner.weak=e;var h=t,u=0;return this.visitBodies(function(e){if(null!=e.zpp_inner.wrap_shapes.zpp_inner.inner.head){if(null==e.zpp_inner.wrap_worldCOM){var t,i=e.zpp_inner.worldCOMx,n=e.zpp_inner.worldCOMy;if(null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}t.zpp_inner.weak=!1,e.zpp_inner.wrap_worldCOM=t,e.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,e.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,e.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(d=e.zpp_inner,d.getworldCOM)}var l=e.zpp_inner.wrap_worldCOM;e.zpp_inner.validate_mass(),h.addeq(l.mul(e.zpp_inner.cmass,!0)),e.zpp_inner.validate_mass(),u+=e.zpp_inner.cmass}}),h.muleq(1/u),h},ie.prototype.translate=function(t){var e=t.zpp_inner.weak;if(t.zpp_inner.weak=!1,this.visitBodies(function(e){null==e.zpp_inner.wrap_pos&&e.zpp_inner.setupPosition(),e.zpp_inner.wrap_pos.addeq(t)}),t.zpp_inner.weak=e,t.zpp_inner.weak){var i=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null;var n=t;n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i}return this},ie.prototype.rotate=function(t,i){var e=t.zpp_inner.weak;if(t.zpp_inner.weak=!1,this.visitBodies(function(e){e.rotate(t,i)}),t.zpp_inner.weak=e,t.zpp_inner.weak){var n=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null;var r=t;r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}return this},Object.defineProperty(ie.prototype,"bodies",{get:ie.prototype.get_bodies}),Object.defineProperty(ie.prototype,"constraints",{get:ie.prototype.get_constraints}),Object.defineProperty(ie.prototype,"compounds",{get:ie.prototype.get_compounds}),Object.defineProperty(ie.prototype,"compound",{get:ie.prototype.get_compound,set:ie.prototype.set_compound}),Object.defineProperty(ie.prototype,"space",{get:ie.prototype.get_space,set:ie.prototype.set_space}),ie.prototype.__class__=ie;var et=nape.phys.CompoundIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};et.__name__=["nape","phys","CompoundIterator"],et.get=function(e){var t;if(null==et.zpp_pool){gn.internal=!0;var i=new et;gn.internal=!1,t=i}else{var n=et.zpp_pool;et.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},et.prototype.zpp_inner=null,et.prototype.zpp_i=null,et.prototype.zpp_critical=null,et.prototype.zpp_next=null,et.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=et.zpp_pool,(et.zpp_pool=this).zpp_inner=null,!1)},et.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},et.prototype.__class__=et;var ae=nape.phys.CompoundList=function(){this.zpp_inner=null,this.zpp_inner=new gn,this.zpp_inner.outer=this};ae.__name__=["nape","phys","CompoundList"],ae.fromArray=function(e){for(var t=new ae,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ae.prototype.zpp_inner=null,ae.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ae.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ae.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},ae.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ae.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ae.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},ae.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},ae.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ae.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ae.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ae.prototype.empty=function(){return null==this.zpp_inner.inner.head},ae.prototype.iterator=function(){return this.zpp_inner.valmod(),et.get(this)},ae.prototype.copy=function(e){null==e&&(e=!1);var t=new ae;this.zpp_inner.valmod();for(var i=et.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},ae.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=et.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},ae.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=et.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},ae.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=et.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null;break}}return this},ae.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ae.prototype,"length",{get:ae.prototype.get_length}),ae.prototype.__class__=ae;var se=nape.phys.FluidProperties=function(e,t){null==t&&(t=1),null==e&&(e=1),(this.zpp_inner=null)==Zt.zpp_pool?this.zpp_inner=new Zt:(this.zpp_inner=Zt.zpp_pool,Zt.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),e!=1e3*(this.zpp_inner.outer=this).zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate()),t!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=t/1,this.zpp_inner.invalidate())};se.__name__=["nape","phys","FluidProperties"],se.prototype.zpp_inner=null,se.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},se.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=Bn.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},se.prototype.copy=function(){var e=new se(1e3*this.zpp_inner.density,this.zpp_inner.viscosity);null!=this.zpp_inner.userData&&(e.zpp_inner.userData=_.copy(this.zpp_inner.userData));var t=this.zpp_inner.wrap_gravity;if(null==t){if(null!=e.zpp_inner.wrap_gravity){e.zpp_inner.wrap_gravity.zpp_inner._inuse=!1;var i=e.zpp_inner.wrap_gravity,n=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n,e.zpp_inner.wrap_gravity=null}}else{null==e.zpp_inner.wrap_gravity&&e.zpp_inner.getgravity();var r=e.zpp_inner.wrap_gravity,o=t.zpp_inner;null!=o._validate&&o._validate();var a=t.zpp_inner.x,s=t.zpp_inner;null!=s._validate&&s._validate();var p,l=t.zpp_inner.y,h=r.zpp_inner;if(null!=h._validate&&h._validate(),r.zpp_inner.x==a){var u=r.zpp_inner;null!=u._validate&&u._validate(),p=r.zpp_inner.y==l}else p=!1;if(!p){r.zpp_inner.x=a,r.zpp_inner.y=l;var d=r.zpp_inner;null!=d._invalidate&&d._invalidate(d)}if(t.zpp_inner.weak){var c=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}}return e},se.prototype.get_density=function(){return 1e3*this.zpp_inner.density},se.prototype.set_density=function(e){return e!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate()),1e3*this.zpp_inner.density},se.prototype.get_viscosity=function(){return this.zpp_inner.viscosity},se.prototype.set_viscosity=function(e){return e!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=e/1,this.zpp_inner.invalidate()),this.zpp_inner.viscosity},se.prototype.get_gravity=function(){return this.zpp_inner.wrap_gravity},se.prototype.set_gravity=function(e){if(null==e){if(null!=this.zpp_inner.wrap_gravity){this.zpp_inner.wrap_gravity.zpp_inner._inuse=!1;var t=this.zpp_inner.wrap_gravity,i=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,this.zpp_inner.wrap_gravity=null}}else{null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();var n=this.zpp_inner.wrap_gravity,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x,a=e.zpp_inner;null!=a._validate&&a._validate();var s,p=e.zpp_inner.y,l=n.zpp_inner;if(null!=l._validate&&l._validate(),n.zpp_inner.x==o){var h=n.zpp_inner;null!=h._validate&&h._validate(),s=n.zpp_inner.y==p}else s=!1;if(!s){n.zpp_inner.x=o,n.zpp_inner.y=p;var u=n.zpp_inner;null!=u._invalidate&&u._invalidate(u)}if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}}return this.zpp_inner.wrap_gravity},se.prototype.toString=function(){return"{ density: "+1e3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+n.string(this.zpp_inner.wrap_gravity)+" }"},Object.defineProperty(se.prototype,"userData",{get:se.prototype.get_userData}),Object.defineProperty(se.prototype,"shapes",{get:se.prototype.get_shapes}),Object.defineProperty(se.prototype,"density",{get:se.prototype.get_density,set:se.prototype.set_density}),Object.defineProperty(se.prototype,"viscosity",{get:se.prototype.get_viscosity,set:se.prototype.set_viscosity}),Object.defineProperty(se.prototype,"gravity",{get:se.prototype.get_gravity,set:se.prototype.set_gravity}),se.prototype.__class__=se;var pe=nape.phys.GravMassMode=function(){};pe.__name__=["nape","phys","GravMassMode"],pe.DEFAULT=null,pe.get_DEFAULT=function(){return null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1),Uo.GravMassMode_DEFAULT},pe.FIXED=null,pe.get_FIXED=function(){return null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new pe,Uo.internal=!1),Uo.GravMassMode_FIXED},pe.SCALED=null,pe.get_SCALED=function(){return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),Uo.GravMassMode_SCALED},pe.prototype.toString=function(){return null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1),this==Uo.GravMassMode_DEFAULT?"DEFAULT":(null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new pe,Uo.internal=!1),this==Uo.GravMassMode_FIXED?"FIXED":(null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),this==Uo.GravMassMode_SCALED?"SCALED":""))},Object.defineProperty(pe,"DEFAULT",{get:pe.get_DEFAULT}),Object.defineProperty(pe,"FIXED",{get:pe.get_FIXED}),Object.defineProperty(pe,"SCALED",{get:pe.get_SCALED}),pe.prototype.__class__=pe;var le=nape.phys.InertiaMode=function(){};le.__name__=["nape","phys","InertiaMode"],le.DEFAULT=null,le.get_DEFAULT=function(){return null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new le,Uo.internal=!1),Uo.InertiaMode_DEFAULT},le.FIXED=null,le.get_FIXED=function(){return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),Uo.InertiaMode_FIXED},le.prototype.toString=function(){return null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new le,Uo.internal=!1),this==Uo.InertiaMode_DEFAULT?"DEFAULT":(null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),this==Uo.InertiaMode_FIXED?"FIXED":"")},Object.defineProperty(le,"DEFAULT",{get:le.get_DEFAULT}),Object.defineProperty(le,"FIXED",{get:le.get_FIXED}),le.prototype.__class__=le;var tt=nape.phys.InteractorIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};tt.__name__=["nape","phys","InteractorIterator"],tt.get=function(e){var t;if(null==tt.zpp_pool){vn.internal=!0;var i=new tt;vn.internal=!1,t=i}else{var n=tt.zpp_pool;tt.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},tt.prototype.zpp_inner=null,tt.prototype.zpp_i=null,tt.prototype.zpp_critical=null,tt.prototype.zpp_next=null,tt.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=tt.zpp_pool,(tt.zpp_pool=this).zpp_inner=null,!1)},tt.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},tt.prototype.__class__=tt;var he=nape.phys.InteractorList=function(){this.zpp_inner=null,this.zpp_inner=new vn,this.zpp_inner.outer=this};he.__name__=["nape","phys","InteractorList"],he.fromArray=function(e){for(var t=new he,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},he.prototype.zpp_inner=null,he.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},he.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner_i)},he.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},he.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner_i);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner_i)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},he.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner_i)}else this.zpp_inner.inner.add(e.zpp_inner_i);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},he.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer_i},he.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer_i},he.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},he.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner_i){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner_i),this.zpp_inner.invalidate()),t},he.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},he.prototype.empty=function(){return null==this.zpp_inner.inner.head},he.prototype.iterator=function(){return this.zpp_inner.valmod(),tt.get(this)},he.prototype.copy=function(e){null==e&&(e=!1);var t=new he;this.zpp_inner.valmod();for(var i=tt.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=tt.zpp_pool,(tt.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},he.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=tt.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},he.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=tt.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=tt.zpp_pool,(tt.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},he.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=tt.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null;break}}return this},he.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(he.prototype,"length",{get:he.prototype.get_length}),he.prototype.__class__=he;var ue=nape.phys.MassMode=function(){};ue.__name__=["nape","phys","MassMode"],ue.DEFAULT=null,ue.get_DEFAULT=function(){return null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),Uo.MassMode_DEFAULT},ue.FIXED=null,ue.get_FIXED=function(){return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),Uo.MassMode_FIXED},ue.prototype.toString=function(){return null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),this==Uo.MassMode_DEFAULT?"DEFAULT":(null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),this==Uo.MassMode_FIXED?"FIXED":"")},Object.defineProperty(ue,"DEFAULT",{get:ue.get_DEFAULT}),Object.defineProperty(ue,"FIXED",{get:ue.get_FIXED}),ue.prototype.__class__=ue;var de=nape.phys.Material=function(e,t,i,n,r){null==r&&(r=.001),null==n&&(n=1),null==i&&(i=2),null==t&&(t=1),null==e&&(e=0),(this.zpp_inner=null)==Kt.zpp_pool?this.zpp_inner=new Kt:(this.zpp_inner=Kt.zpp_pool,Kt.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),e!=(this.zpp_inner.outer=this).zpp_inner.elasticity&&(this.zpp_inner.elasticity=e/1,this.zpp_inner.invalidate(Kt.WAKE|Kt.ARBITERS)),t!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=t/1,this.zpp_inner.invalidate(Kt.WAKE|Kt.ANGDRAG|Kt.ARBITERS)),i!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=i/1,this.zpp_inner.invalidate(Kt.WAKE|Kt.ARBITERS)),n!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=n/1e3,this.zpp_inner.invalidate(Kt.WAKE|Kt.PROPS)),r!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=r/1,this.zpp_inner.invalidate(Kt.WAKE|Kt.ARBITERS))};de.__name__=["nape","phys","Material"],de.wood=function(){return new de(.4,.2,.38,.7,.005)},de.steel=function(){return new de(.2,.57,.74,7.8,.001)},de.ice=function(){return new de(.3,.03,.1,.9,1e-4)},de.rubber=function(){return new de(.8,1,1.4,1.5,.01)},de.glass=function(){return new de(.4,.4,.94,2.6,.002)},de.sand=function(){return new de(-1,.45,.6,1.6,16)},de.prototype.zpp_inner=null,de.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},de.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=Bn.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},de.prototype.copy=function(){var e=new de(this.zpp_inner.elasticity,this.zpp_inner.dynamicFriction,this.zpp_inner.staticFriction,1e3*this.zpp_inner.density,this.zpp_inner.rollingFriction);return null!=this.zpp_inner.userData&&(e.zpp_inner.userData=_.copy(this.zpp_inner.userData)),e},de.prototype.get_elasticity=function(){return this.zpp_inner.elasticity},de.prototype.set_elasticity=function(e){return e!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=e/1,this.zpp_inner.invalidate(Kt.WAKE|Kt.ARBITERS)),this.zpp_inner.elasticity},de.prototype.get_dynamicFriction=function(){return this.zpp_inner.dynamicFriction},de.prototype.set_dynamicFriction=function(e){return e!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=e/1,this.zpp_inner.invalidate(Kt.WAKE|Kt.ANGDRAG|Kt.ARBITERS)),this.zpp_inner.dynamicFriction},de.prototype.get_staticFriction=function(){return this.zpp_inner.staticFriction},de.prototype.set_staticFriction=function(e){return e!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=e/1,this.zpp_inner.invalidate(Kt.WAKE|Kt.ARBITERS)),this.zpp_inner.staticFriction},de.prototype.get_density=function(){return 1e3*this.zpp_inner.density},de.prototype.set_density=function(e){return e!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate(Kt.WAKE|Kt.PROPS)),1e3*this.zpp_inner.density},de.prototype.get_rollingFriction=function(){return this.zpp_inner.rollingFriction},de.prototype.set_rollingFriction=function(e){return e!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=e/1,this.zpp_inner.invalidate(Kt.WAKE|Kt.ARBITERS)),this.zpp_inner.rollingFriction},de.prototype.toString=function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1e3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},Object.defineProperty(de.prototype,"userData",{get:de.prototype.get_userData}),Object.defineProperty(de.prototype,"shapes",{get:de.prototype.get_shapes}),Object.defineProperty(de.prototype,"elasticity",{get:de.prototype.get_elasticity,set:de.prototype.set_elasticity}),Object.defineProperty(de.prototype,"dynamicFriction",{get:de.prototype.get_dynamicFriction,set:de.prototype.set_dynamicFriction}),Object.defineProperty(de.prototype,"staticFriction",{get:de.prototype.get_staticFriction,set:de.prototype.set_staticFriction}),Object.defineProperty(de.prototype,"density",{get:de.prototype.get_density,set:de.prototype.set_density}),Object.defineProperty(de.prototype,"rollingFriction",{get:de.prototype.get_rollingFriction,set:de.prototype.set_rollingFriction}),de.prototype.__class__=de;var ze=nape.shape.Shape=function(){this.zpp_inner=null,Q.call(this)};ze.__name__=["nape","shape","Shape"],ze.__super__=Q,ze.prototype=Object.create(Q.prototype),ze.prototype.zpp_inner=null,ze.prototype.get_type=function(){return Jt.types[this.zpp_inner.type]},ze.prototype.isCircle=function(){return 0==this.zpp_inner.type},ze.prototype.isPolygon=function(){return 1==this.zpp_inner.type},ze.prototype.get_body=function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},ze.prototype.set_body=function(e){if(this.zpp_inner.immutable_midstep("Shape::body"),(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null)!=e&&(null!=this.zpp_inner.body&&(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(this),null!=e)){var t=e.zpp_inner.wrap_shapes;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},ze.prototype.get_castCircle=function(){return 0==this.zpp_inner.type?this.zpp_inner.circle.outer_zn:null},ze.prototype.get_castPolygon=function(){return 1==this.zpp_inner.type?this.zpp_inner.polygon.outer_zn:null},ze.prototype.get_worldCOM=function(){if(null==this.zpp_inner.wrap_worldCOM){var e,t=this.zpp_inner.worldCOMx,i=this.zpp_inner.worldCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=e,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(d=this.zpp_inner,d.getworldCOM)}return this.zpp_inner.wrap_worldCOM},ze.prototype.get_localCOM=function(){return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},ze.prototype.set_localCOM=function(e){this.zpp_inner.immutable_midstep("Body::localCOM"),null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());var t=this.zpp_inner.wrap_localCOM,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},ze.prototype.get_area=function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.area},ze.prototype.get_inertia=function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.inertia},ze.prototype.get_angDrag=function(){return this.zpp_inner.validate_angDrag(),this.zpp_inner.angDrag},ze.prototype.get_material=function(){return this.zpp_inner.material.wrapper()},ze.prototype.set_material=function(e){return this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(e.zpp_inner),this.zpp_inner.material.wrapper()},ze.prototype.get_filter=function(){return this.zpp_inner.filter.wrapper()},ze.prototype.set_filter=function(e){return this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(e.zpp_inner),this.zpp_inner.filter.wrapper()},ze.prototype.get_fluidProperties=function(){return this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},ze.prototype.set_fluidProperties=function(e){return this.zpp_inner.setFluid(e.zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},ze.prototype.get_fluidEnabled=function(){return this.zpp_inner.fluidEnabled},ze.prototype.set_fluidEnabled=function(e){return this.zpp_inner.immutable_midstep("Shape::fluidEnabled"),(this.zpp_inner.fluidEnabled=e)&&null==this.zpp_inner.fluidProperties&&(this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()),this.zpp_inner.wake(),this.zpp_inner.fluidEnabled},ze.prototype.get_sensorEnabled=function(){return this.zpp_inner.sensorEnabled},ze.prototype.set_sensorEnabled=function(e){return this.zpp_inner.immutable_midstep("Shape::sensorEnabled"),this.zpp_inner.sensorEnabled=e,this.zpp_inner.wake(),this.zpp_inner.sensorEnabled},ze.prototype.get_bounds=function(){return this.zpp_inner.aabb.wrapper()},ze.prototype.translate=function(e){if(this.zpp_inner.immutable_midstep("Shape::translate()"),0<e.lsq())if(0==this.zpp_inner.type){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.circle.__translate(i,e.zpp_inner.y)}else{var r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x,a=e.zpp_inner;null!=a._validate&&a._validate(),this.zpp_inner.polygon.__translate(o,e.zpp_inner.y)}if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return this},ze.prototype.scale=function(e,t){if(this.zpp_inner.immutable_midstep("Shape::scale()"),0==this.zpp_inner.type){var i=e*e-t*t;i*i<Qs.epsilon*Qs.epsilon&&this.zpp_inner.circle.__scale(e,t)}else this.zpp_inner.polygon.__scale(e,t);return this},ze.prototype.rotate=function(e){if(this.zpp_inner.immutable_midstep("Shape::rotate()"),e%(2*Math.PI)!=0){var t=Math.cos(e),i=Math.sin(e);0==this.zpp_inner.type?this.zpp_inner.circle.__rotate(i,t):this.zpp_inner.polygon.__rotate(i,t)}return this},ze.prototype.transform=function(e){return this.zpp_inner.immutable_midstep("Shape::transform()"),0==this.zpp_inner.type?e.equiorthogonal()&&this.zpp_inner.circle.__transform(e):this.zpp_inner.polygon.__transform(e),this},ze.prototype.contains=function(e){wt.validateShape(this.zpp_inner);var t=e.zpp_inner;null!=t._validate&&t._validate();var i=$s.shapeContains(this.zpp_inner,e.zpp_inner);if(e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}return i},ze.prototype.copy=function(){return this.zpp_inner.copy()},ze.prototype.toString=function(){return(0==this.zpp_inner.type?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},Object.defineProperty(ze.prototype,"type",{get:ze.prototype.get_type}),Object.defineProperty(ze.prototype,"body",{get:ze.prototype.get_body,set:ze.prototype.set_body}),Object.defineProperty(ze.prototype,"castCircle",{get:ze.prototype.get_castCircle}),Object.defineProperty(ze.prototype,"castPolygon",{get:ze.prototype.get_castPolygon}),Object.defineProperty(ze.prototype,"worldCOM",{get:ze.prototype.get_worldCOM}),Object.defineProperty(ze.prototype,"localCOM",{get:ze.prototype.get_localCOM,set:ze.prototype.set_localCOM}),Object.defineProperty(ze.prototype,"area",{get:ze.prototype.get_area}),Object.defineProperty(ze.prototype,"inertia",{get:ze.prototype.get_inertia}),Object.defineProperty(ze.prototype,"angDrag",{get:ze.prototype.get_angDrag}),Object.defineProperty(ze.prototype,"material",{get:ze.prototype.get_material,set:ze.prototype.set_material}),Object.defineProperty(ze.prototype,"filter",{get:ze.prototype.get_filter,set:ze.prototype.set_filter}),Object.defineProperty(ze.prototype,"fluidProperties",{get:ze.prototype.get_fluidProperties,set:ze.prototype.set_fluidProperties}),Object.defineProperty(ze.prototype,"fluidEnabled",{get:ze.prototype.get_fluidEnabled,set:ze.prototype.set_fluidEnabled}),Object.defineProperty(ze.prototype,"sensorEnabled",{get:ze.prototype.get_sensorEnabled,set:ze.prototype.set_sensorEnabled}),Object.defineProperty(ze.prototype,"bounds",{get:ze.prototype.get_bounds}),ze.prototype.__class__=ze;var ce=nape.shape.Circle=function(e,t,i,n){if(this.zpp_inner_zn=null,ze.call(this),this.zpp_inner_zn=new Qt,((this.zpp_inner_zn.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,(this.zpp_inner_i.outer_i=this).zpp_inner.immutable_midstep("Circle::radius"),e!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=e,this.zpp_inner_zn.invalidate_radius()),null==t)this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0;else{var r=t.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.localCOMx=t.zpp_inner.x;var o=t.zpp_inner;if(null!=o._validate&&o._validate(),this.zpp_inner.localCOMy=t.zpp_inner.y,t.zpp_inner.weak){var a=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}}null==i?null==Kt.zpp_pool?this.zpp_inner.material=new Kt:(this.zpp_inner.material=Kt.zpp_pool,Kt.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(i.zpp_inner),this.zpp_inner.material.wrapper()),null==n?null==mt.zpp_pool?this.zpp_inner.filter=new mt:(this.zpp_inner.filter=mt.zpp_pool,mt.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(n.zpp_inner),this.zpp_inner.filter.wrapper()),this.zpp_inner_i.insert_cbtype(Be.ANY_SHAPE.zpp_inner)};ce.__name__=["nape","shape","Circle"],ce.__super__=ze,ce.prototype=Object.create(ze.prototype),ce.prototype.zpp_inner_zn=null,ce.prototype.get_radius=function(){return this.zpp_inner_zn.radius},ce.prototype.set_radius=function(e){return this.zpp_inner.immutable_midstep("Circle::radius"),e!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=e,this.zpp_inner_zn.invalidate_radius()),this.zpp_inner_zn.radius},Object.defineProperty(ce.prototype,"radius",{get:ce.prototype.get_radius,set:ce.prototype.set_radius}),ce.prototype.__class__=ce;var _e=nape.shape.Edge=function(){this.zpp_inner=null};_e.__name__=["nape","shape","Edge"],_e.prototype.zpp_inner=null,_e.prototype.get_polygon=function(){return this.zpp_inner.polygon.outer_zn},_e.prototype.get_localNormal=function(){return null==this.zpp_inner.wrap_lnorm&&this.zpp_inner.getlnorm(),this.zpp_inner.wrap_lnorm},_e.prototype.get_worldNormal=function(){return null==this.zpp_inner.wrap_gnorm&&this.zpp_inner.getgnorm(),this.zpp_inner.wrap_gnorm},_e.prototype.get_length=function(){return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.length},_e.prototype.get_localProjection=function(){return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.lprojection},_e.prototype.get_worldProjection=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}return this.zpp_inner.gprojection},_e.prototype.get_localVertex1=function(){this.zpp_inner.polygon.validate_laxi();var e=this.zpp_inner.lp0;if(null==e.outer){e.outer=new lt;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,e.outer.zpp_inner=e}return e.outer},_e.prototype.get_localVertex2=function(){this.zpp_inner.polygon.validate_laxi();var e=this.zpp_inner.lp1;if(null==e.outer){e.outer=new lt;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,e.outer.zpp_inner=e}return e.outer},_e.prototype.get_worldVertex1=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}var c=this.zpp_inner.gp0;if(null==c.outer){c.outer=new lt;var _=c.outer.zpp_inner;null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_,c.outer.zpp_inner=c}return c.outer},_e.prototype.get_worldVertex2=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}var c=this.zpp_inner.gp1;if(null==c.outer){c.outer=new lt;var _=c.outer.zpp_inner;null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_,c.outer.zpp_inner=c}return c.outer},_e.prototype.toString=function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } }";var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}return"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } worldNormal : { x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" } }"},Object.defineProperty(_e.prototype,"polygon",{get:_e.prototype.get_polygon}),Object.defineProperty(_e.prototype,"localNormal",{get:_e.prototype.get_localNormal}),Object.defineProperty(_e.prototype,"worldNormal",{get:_e.prototype.get_worldNormal}),Object.defineProperty(_e.prototype,"length",{get:_e.prototype.get_length}),Object.defineProperty(_e.prototype,"localProjection",{get:_e.prototype.get_localProjection}),Object.defineProperty(_e.prototype,"worldProjection",{get:_e.prototype.get_worldProjection}),Object.defineProperty(_e.prototype,"localVertex1",{get:_e.prototype.get_localVertex1}),Object.defineProperty(_e.prototype,"localVertex2",{get:_e.prototype.get_localVertex2}),Object.defineProperty(_e.prototype,"worldVertex1",{get:_e.prototype.get_worldVertex1}),Object.defineProperty(_e.prototype,"worldVertex2",{get:_e.prototype.get_worldVertex2}),_e.prototype.__class__=_e;var it=nape.shape.EdgeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};it.__name__=["nape","shape","EdgeIterator"],it.get=function(e){var t;if(null==it.zpp_pool){In.internal=!0;var i=new it;In.internal=!1,t=i}else{var n=it.zpp_pool;it.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},it.prototype.zpp_inner=null,it.prototype.zpp_i=null,it.prototype.zpp_critical=null,it.prototype.zpp_next=null,it.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=it.zpp_pool,(it.zpp_pool=this).zpp_inner=null,!1)},it.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},it.prototype.__class__=it;var ye=nape.shape.EdgeList=function(){this.zpp_inner=null,this.zpp_inner=new In,this.zpp_inner.outer=this};ye.__name__=["nape","shape","EdgeList"],ye.fromArray=function(e){for(var t=new ye,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ye.prototype.zpp_inner=null,ye.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ye.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ye.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=e==this.zpp_inner.user_length-1?e:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length-2-e)),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},ye.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ye.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ye.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},ye.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},ye.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ye.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ye.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ye.prototype.empty=function(){return null==this.zpp_inner.inner.head},ye.prototype.iterator=function(){return this.zpp_inner.valmod(),it.get(this)},ye.prototype.copy=function(e){null==e&&(e=!1);var t=new ye;this.zpp_inner.valmod();for(var i=it.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=it.zpp_pool,(it.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},ye.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=it.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},ye.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=it.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=it.zpp_pool,(it.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},ye.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=it.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null;break}}return this},ye.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ye.prototype,"length",{get:ye.prototype.get_length}),ye.prototype.__class__=ye;var xe=nape.shape.Polygon=function(e,t,i){if(this.zpp_inner_zn=null,ze.call(this),this.zpp_inner_zn=new ei,((this.zpp_inner_zn.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,this.zpp_inner_i.outer_i=this,e instanceof Array&&null==e.__enum__)for(var n=e,r=0;r<n.length;){var o=n[r];++r;var a=o;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var s=this.zpp_inner_zn.wrap_lverts,p=a.zpp_inner;null!=p._validate&&p._validate();var l=a.zpp_inner.x,h=a.zpp_inner;null!=h._validate&&h._validate();var u,d=a.zpp_inner.y;if(null==jn.poolVec2?u=new lt:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var c;null==ep.zpp_pool?c=new ep:(c=ep.zpp_pool,ep.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=l,c.y=d,u.zpp_inner=c,u.zpp_inner.outer=u}else{var _,y=u.zpp_inner;if(null!=y._validate&&y._validate(),u.zpp_inner.x==l){var x=u.zpp_inner;null!=x._validate&&x._validate(),_=u.zpp_inner.y==d}else _=!1;if(!_){u.zpp_inner.x=l,u.zpp_inner.y=d;var m=u.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}u.zpp_inner.weak=!1,s.push(u)}else if(ve.__instanceof(e,ge))for(var f=e.iterator();;){f.zpp_inner.zpp_inner.valmod();var v=f.zpp_inner.zpp_gl();if(f.zpp_critical=!0,!(f.zpp_i<v||(f.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=f).zpp_inner=null,!1)))break;f.zpp_critical=!1;var g=f.zpp_inner.at(f.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var z=this.zpp_inner_zn.wrap_lverts,b=g.zpp_inner;null!=b._validate&&b._validate();var w=g.zpp_inner.x,S=g.zpp_inner;null!=S._validate&&S._validate();var C,M=g.zpp_inner.y;if(null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==ep.zpp_pool?P=new ep:(P=ep.zpp_pool,ep.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=w,P.y=M,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==w){var G=C.zpp_inner;null!=G._validate&&G._validate(),k=C.zpp_inner.y==M}else k=!1;if(!k){C.zpp_inner.x=w,C.zpp_inner.y=M;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}C.zpp_inner.weak=!1,z.push(C)}else if(ve.__instanceof(e,bn)){var A=e.zpp_inner.vertices;if(null!=A)for(var E=A;;){var I,B=E.x,L=E.y;if(null==jn.poolVec2?I=new lt:(I=jn.poolVec2,jn.poolVec2=I.zpp_pool,I.zpp_pool=null),null==I.zpp_inner){var D;null==ep.zpp_pool?D=new ep:(D=ep.zpp_pool,ep.zpp_pool=D.next,D.next=null),D.weak=!1,D._immutable=!1,D.x=B,D.y=L,I.zpp_inner=D,I.zpp_inner.outer=I}else{var R,F=I.zpp_inner;if(null!=F._validate&&F._validate(),I.zpp_inner.x==B){var j=I.zpp_inner;null!=j._validate&&j._validate(),R=I.zpp_inner.y==L}else R=!1;if(!R){I.zpp_inner.x=B,I.zpp_inner.y=L;var N=I.zpp_inner;null!=N._invalidate&&N._invalidate(N)}}I.zpp_inner.weak=!1;var U=I;E=E.next,null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var H=this.zpp_inner_zn.wrap_lverts,V=U.zpp_inner;null!=V._validate&&V._validate();var W=U.zpp_inner.x,X=U.zpp_inner;null!=X._validate&&X._validate();var q,Y=U.zpp_inner.y;if(null==jn.poolVec2?q=new lt:(q=jn.poolVec2,jn.poolVec2=q.zpp_pool,q.zpp_pool=null),null==q.zpp_inner){var Z;null==ep.zpp_pool?Z=new ep:(Z=ep.zpp_pool,ep.zpp_pool=Z.next,Z.next=null),Z.weak=!1,Z._immutable=!1,Z.x=W,Z.y=Y,q.zpp_inner=Z,q.zpp_inner.outer=q}else{var K,J=q.zpp_inner;if(null!=J._validate&&J._validate(),q.zpp_inner.x==W){var Q=q.zpp_inner;null!=Q._validate&&Q._validate(),K=q.zpp_inner.y==Y}else K=!1;if(!K){q.zpp_inner.x=W,q.zpp_inner.y=Y;var $=q.zpp_inner;null!=$._invalidate&&$._invalidate($)}}q.zpp_inner.weak=!1,H.push(q);var ee=U.zpp_inner;U.zpp_inner.outer=null,U.zpp_inner=null;var te=U;te.zpp_pool=jn.poolVec2,jn.poolVec2=te;var ie=ee;if(null!=ie.outer&&(ie.outer.zpp_inner=null,ie.outer=null),ie._isimmutable=null,ie._validate=null,ie._invalidate=null,ie.next=ep.zpp_pool,ep.zpp_pool=ie,E==A)break}}if(e instanceof Array&&null==e.__enum__)for(var ne=e,re=0;re<ne.length;){var oe,ae=ne[re];if(ae.zpp_inner.weak){var se=ae.zpp_inner;ae.zpp_inner.outer=null,ae.zpp_inner=null;var pe=ae;pe.zpp_pool=jn.poolVec2,jn.poolVec2=pe;var le=se;null!=le.outer&&(le.outer.zpp_inner=null,le.outer=null),le._isimmutable=null,le._validate=null,le._invalidate=null,le.next=ep.zpp_pool,ep.zpp_pool=le,oe=!0}else oe=!1;oe?ne.splice(re,1):++re}else if(ve.__instanceof(e,ge)){var he=e;null!=he.zpp_inner._validate&&he.zpp_inner._validate();for(var ue=he.zpp_inner.inner,de=null,ce=ue.head;null!=ce;){var _e=ce.elt;if(_e.outer.zpp_inner.weak){if(ce=ue.erase(de),_e.outer.zpp_inner.weak){var ye=_e.outer,xe=ye.zpp_inner;ye.zpp_inner.outer=null,ye.zpp_inner=null;var me=ye;me.zpp_pool=jn.poolVec2,jn.poolVec2=me;var fe=xe;null!=fe.outer&&(fe.outer.zpp_inner=null,fe.outer=null),fe._isimmutable=null,fe._validate=null,fe._invalidate=null,fe.next=ep.zpp_pool,ep.zpp_pool=fe}}else ce=(de=ce).next}}null==t?null==Kt.zpp_pool?this.zpp_inner.material=new Kt:(this.zpp_inner.material=Kt.zpp_pool,Kt.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(t.zpp_inner),this.zpp_inner.material.wrapper()),null==i?null==mt.zpp_pool?this.zpp_inner.filter=new mt:(this.zpp_inner.filter=mt.zpp_pool,mt.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(i.zpp_inner),this.zpp_inner.filter.wrapper()),this.zpp_inner_i.insert_cbtype(Be.ANY_SHAPE.zpp_inner)};xe.__name__=["nape","shape","Polygon"],xe.__super__=ze,xe.prototype=Object.create(ze.prototype),xe.rect=function(e,t,i,n,r){var o;if(null==r&&(r=!1),null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=e,a.y=t,o.zpp_inner=a,o.zpp_inner.outer=o}else{var s,p=o.zpp_inner;if(null!=p._validate&&p._validate(),o.zpp_inner.x==e){var l=o.zpp_inner;null!=l._validate&&l._validate(),s=o.zpp_inner.y==t}else s=!1;if(!s){o.zpp_inner.x=e,o.zpp_inner.y=t;var h=o.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}o.zpp_inner.weak=r;var u,d=o,c=e+i;if(null==jn.poolVec2?u=new lt:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var _;null==ep.zpp_pool?_=new ep:(_=ep.zpp_pool,ep.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=c,_.y=t,u.zpp_inner=_,u.zpp_inner.outer=u}else{var y,x=u.zpp_inner;if(null!=x._validate&&x._validate(),u.zpp_inner.x==c){var m=u.zpp_inner;null!=m._validate&&m._validate(),y=u.zpp_inner.y==t}else y=!1;if(!y){u.zpp_inner.x=c,u.zpp_inner.y=t;var f=u.zpp_inner;null!=f._invalidate&&f._invalidate(f)}}u.zpp_inner.weak=r;var v,g=u,z=e+i,b=t+n;if(null==jn.poolVec2?v=new lt:(v=jn.poolVec2,jn.poolVec2=v.zpp_pool,v.zpp_pool=null),null==v.zpp_inner){var w;null==ep.zpp_pool?w=new ep:(w=ep.zpp_pool,ep.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=z,w.y=b,v.zpp_inner=w,v.zpp_inner.outer=v}else{var S,C=v.zpp_inner;if(null!=C._validate&&C._validate(),v.zpp_inner.x==z){var M=v.zpp_inner;null!=M._validate&&M._validate(),S=v.zpp_inner.y==b}else S=!1;if(!S){v.zpp_inner.x=z,v.zpp_inner.y=b;var P=v.zpp_inner;null!=P._invalidate&&P._invalidate(P)}}v.zpp_inner.weak=r;var k,T=v,G=t+n;if(null==jn.poolVec2?k=new lt:(k=jn.poolVec2,jn.poolVec2=k.zpp_pool,k.zpp_pool=null),null==k.zpp_inner){var O;null==ep.zpp_pool?O=new ep:(O=ep.zpp_pool,ep.zpp_pool=O.next,O.next=null),O.weak=!1,O._immutable=!1,O.x=e,O.y=G,k.zpp_inner=O,k.zpp_inner.outer=k}else{var A,E=k.zpp_inner;if(null!=E._validate&&E._validate(),k.zpp_inner.x==e){var I=k.zpp_inner;null!=I._validate&&I._validate(),A=k.zpp_inner.y==G}else A=!1;if(!A){k.zpp_inner.x=e,k.zpp_inner.y=G;var B=k.zpp_inner;null!=B._invalidate&&B._invalidate(B)}}return k.zpp_inner.weak=r,[d,g,T,k]},xe.box=function(e,t,i){return null==i&&(i=!1),xe.rect(-e/2,-t/2,e,t,i)},xe.regular=function(e,t,i,n,r){null==r&&(r=!1),null==n&&(n=0);for(var o=[],a=2*Math.PI/i,s=0;s<i;){var p,l=s++*a+n,h=Math.cos(l)*e,u=Math.sin(l)*t;if(null==jn.poolVec2?p=new lt:(p=jn.poolVec2,jn.poolVec2=p.zpp_pool,p.zpp_pool=null),null==p.zpp_inner){var d;null==ep.zpp_pool?d=new ep:(d=ep.zpp_pool,ep.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=h,d.y=u,p.zpp_inner=d,p.zpp_inner.outer=p}else{var c,_=p.zpp_inner;if(null!=_._validate&&_._validate(),p.zpp_inner.x==h){var y=p.zpp_inner;null!=y._validate&&y._validate(),c=p.zpp_inner.y==u}else c=!1;if(!c){p.zpp_inner.x=h,p.zpp_inner.y=u;var x=p.zpp_inner;null!=x._invalidate&&x._invalidate(x)}}p.zpp_inner.weak=r,o.push(p)}return o},xe.prototype.zpp_inner_zn=null,xe.prototype.get_localVerts=function(){return null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts(),this.zpp_inner_zn.wrap_lverts},xe.prototype.get_worldVerts=function(){return null==this.zpp_inner_zn.wrap_gverts&&this.zpp_inner_zn.getgverts(),this.zpp_inner_zn.wrap_gverts},xe.prototype.get_edges=function(){return null==this.zpp_inner_zn.wrap_edges&&this.zpp_inner_zn.getedges(),this.zpp_inner_zn.wrap_edges},xe.prototype.validity=function(){return this.zpp_inner_zn.valid()},Object.defineProperty(xe.prototype,"localVerts",{get:xe.prototype.get_localVerts}),Object.defineProperty(xe.prototype,"worldVerts",{get:xe.prototype.get_worldVerts}),Object.defineProperty(xe.prototype,"edges",{get:xe.prototype.get_edges}),xe.prototype.__class__=xe;var ht=nape.shape.ShapeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};ht.__name__=["nape","shape","ShapeIterator"],ht.get=function(e){var t;if(null==ht.zpp_pool){Bn.internal=!0;var i=new ht;Bn.internal=!1,t=i}else{var n=ht.zpp_pool;ht.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},ht.prototype.zpp_inner=null,ht.prototype.zpp_i=null,ht.prototype.zpp_critical=null,ht.prototype.zpp_next=null,ht.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=ht.zpp_pool,(ht.zpp_pool=this).zpp_inner=null,!1)},ht.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},ht.prototype.__class__=ht;var me=nape.shape.ShapeList=function(){this.zpp_inner=null,this.zpp_inner=new Bn,this.zpp_inner.outer=this};me.__name__=["nape","shape","ShapeList"],me.fromArray=function(e){for(var t=new me,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},me.prototype.zpp_inner=null,me.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},me.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},me.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},me.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},me.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},me.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},me.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},me.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},me.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},me.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},me.prototype.empty=function(){return null==this.zpp_inner.inner.head},me.prototype.iterator=function(){return this.zpp_inner.valmod(),ht.get(this)},me.prototype.copy=function(e){null==e&&(e=!1);var t=new me;this.zpp_inner.valmod();for(var i=ht.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=ht.zpp_pool,(ht.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},me.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=ht.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=ht.zpp_pool,(ht.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},me.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=ht.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=ht.zpp_pool,(ht.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},me.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=ht.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=ht.zpp_pool,(ht.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=ht.zpp_pool,(ht.zpp_pool=t).zpp_inner=null;break}}return this},me.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(me.prototype,"length",{get:me.prototype.get_length}),me.prototype.__class__=me;var fe=nape.shape.ShapeType=function(){};fe.__name__=["nape","shape","ShapeType"],fe.CIRCLE=null,fe.get_CIRCLE=function(){return null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new fe,Uo.internal=!1),Uo.ShapeType_CIRCLE},fe.POLYGON=null,fe.get_POLYGON=function(){return null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new fe,Uo.internal=!1),Uo.ShapeType_POLYGON},fe.prototype.toString=function(){return null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new fe,Uo.internal=!1),this==Uo.ShapeType_CIRCLE?"CIRCLE":(null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new fe,Uo.internal=!1),this==Uo.ShapeType_POLYGON?"POLYGON":"")},Object.defineProperty(fe,"CIRCLE",{get:fe.get_CIRCLE}),Object.defineProperty(fe,"POLYGON",{get:fe.get_POLYGON}),fe.prototype.__class__=fe;var be=nape.shape.ValidationResult=function(){};be.__name__=["nape","shape","ValidationResult"],be.VALID=null,be.get_VALID=function(){return null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new be,Uo.internal=!1),Uo.ValidationResult_VALID},be.DEGENERATE=null,be.get_DEGENERATE=function(){return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new be,Uo.internal=!1),Uo.ValidationResult_DEGENERATE},be.CONCAVE=null,be.get_CONCAVE=function(){return null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new be,Uo.internal=!1),Uo.ValidationResult_CONCAVE},be.SELF_INTERSECTING=null,be.get_SELF_INTERSECTING=function(){return null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new be,Uo.internal=!1),Uo.ValidationResult_SELF_INTERSECTING},be.prototype.toString=function(){return null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new be,Uo.internal=!1),this==Uo.ValidationResult_VALID?"VALID":(null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new be,Uo.internal=!1),this==Uo.ValidationResult_DEGENERATE?"DEGENERATE":(null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new be,Uo.internal=!1),this==Uo.ValidationResult_CONCAVE?"CONCAVE":(null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new be,Uo.internal=!1),this==Uo.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")))},Object.defineProperty(be,"VALID",{get:be.get_VALID}),Object.defineProperty(be,"DEGENERATE",{get:be.get_DEGENERATE}),Object.defineProperty(be,"CONCAVE",{get:be.get_CONCAVE}),Object.defineProperty(be,"SELF_INTERSECTING",{get:be.get_SELF_INTERSECTING}),be.prototype.__class__=be;var we=nape.space.Broadphase=function(){};we.__name__=["nape","space","Broadphase"],we.DYNAMIC_AABB_TREE=null,we.get_DYNAMIC_AABB_TREE=function(){return null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new we,Uo.internal=!1),Uo.Broadphase_DYNAMIC_AABB_TREE},we.SWEEP_AND_PRUNE=null,we.get_SWEEP_AND_PRUNE=function(){return null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new we,Uo.internal=!1),Uo.Broadphase_SWEEP_AND_PRUNE},we.prototype.toString=function(){return null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new we,Uo.internal=!1),this==Uo.Broadphase_DYNAMIC_AABB_TREE?"DYNAMIC_AABB_TREE":(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new we,Uo.internal=!1),this==Uo.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"")},Object.defineProperty(we,"DYNAMIC_AABB_TREE",{get:we.get_DYNAMIC_AABB_TREE}),Object.defineProperty(we,"SWEEP_AND_PRUNE",{get:we.get_SWEEP_AND_PRUNE}),we.prototype.__class__=we;var Se=nape.space.Space=function(e,t){if(this.zpp_inner=null,this.zpp_inner=new si(null==e?null:e.zpp_inner,t),this.zpp_inner.outer=this,null!=e&&e.zpp_inner.weak){var i=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i}};Se.__name__=["nape","space","Space"],Se.prototype.zpp_inner=null,Se.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Se.prototype.get_gravity=function(){return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},Se.prototype.set_gravity=function(e){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();var t=this.zpp_inner.wrap_gravity,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},Se.prototype.get_broadphase=function(){return this.zpp_inner.bphase.is_sweep?(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new we,Uo.internal=!1),Uo.Broadphase_SWEEP_AND_PRUNE):(null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new we,Uo.internal=!1),Uo.Broadphase_DYNAMIC_AABB_TREE)},Se.prototype.get_sortContacts=function(){return this.zpp_inner.sortcontacts},Se.prototype.set_sortContacts=function(e){return this.zpp_inner.sortcontacts=e,this.zpp_inner.sortcontacts},Se.prototype.get_worldAngularDrag=function(){return this.zpp_inner.global_ang_drag},Se.prototype.set_worldAngularDrag=function(e){return this.zpp_inner.global_ang_drag=e,this.zpp_inner.global_ang_drag},Se.prototype.get_worldLinearDrag=function(){return this.zpp_inner.global_lin_drag},Se.prototype.set_worldLinearDrag=function(e){return this.zpp_inner.global_lin_drag=e,this.zpp_inner.global_lin_drag},Se.prototype.get_compounds=function(){return this.zpp_inner.wrap_compounds},Se.prototype.get_bodies=function(){return this.zpp_inner.wrap_bodies},Se.prototype.get_liveBodies=function(){return this.zpp_inner.wrap_live},Se.prototype.get_constraints=function(){return this.zpp_inner.wrap_constraints},Se.prototype.get_liveConstraints=function(){return this.zpp_inner.wrap_livecon},Se.prototype.visitBodies=function(e){var t=this.zpp_inner.wrap_bodies;t.zpp_inner.valmod();for(var i=$e.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var o=this.zpp_inner.wrap_compounds;o.zpp_inner.valmod();for(var a=et.get(o);;){a.zpp_inner.zpp_inner.valmod();var s=a.zpp_inner;s.zpp_inner.valmod(),s.zpp_inner.zip_length&&(s.zpp_inner.zip_length=!1,s.zpp_inner.user_length=s.zpp_inner.inner.length);var p=s.zpp_inner.user_length;if(a.zpp_critical=!0,!(a.zpp_i<p||(a.zpp_next=et.zpp_pool,(et.zpp_pool=a).zpp_inner=null,!1)))break;a.zpp_critical=!1,a.zpp_inner.at(a.zpp_i++).visitBodies(e)}},Se.prototype.visitConstraints=function(e){var t=this.zpp_inner.wrap_constraints;t.zpp_inner.valmod();for(var i=We.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var o=this.zpp_inner.wrap_compounds;o.zpp_inner.valmod();for(var a=et.get(o);;){a.zpp_inner.zpp_inner.valmod();var s=a.zpp_inner;s.zpp_inner.valmod(),s.zpp_inner.zip_length&&(s.zpp_inner.zip_length=!1,s.zpp_inner.user_length=s.zpp_inner.inner.length);var p=s.zpp_inner.user_length;if(a.zpp_critical=!0,!(a.zpp_i<p||(a.zpp_next=et.zpp_pool,(et.zpp_pool=a).zpp_inner=null,!1)))break;a.zpp_critical=!1,a.zpp_inner.at(a.zpp_i++).visitConstraints(e)}},Se.prototype.visitCompounds=function(e){var t=this.zpp_inner.wrap_compounds;t.zpp_inner.valmod();for(var i=et.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);e(o),o.visitCompounds(e)}},Se.prototype.get_world=function(){return this.zpp_inner.__static},Se.prototype.get_arbiters=function(){if(null==this.zpp_inner.wrap_arbiters){var e=new vt;e.space=this.zpp_inner,this.zpp_inner.wrap_arbiters=e}return this.zpp_inner.wrap_arbiters},Se.prototype.get_listeners=function(){return this.zpp_inner.wrap_listeners},Se.prototype.clear=function(){this.zpp_inner.clear()},Se.prototype.step=function(e,t,i){null==i&&(i=10),null==t&&(t=10),this.zpp_inner.step(e,t,i)},Se.prototype.get_timeStamp=function(){return this.zpp_inner.stamp},Se.prototype.get_elapsedTime=function(){return this.zpp_inner.time},Se.prototype.interactionType=function(e,t){if(1==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null).zpp_inner.type&&1==(null!=t.zpp_inner.body?t.zpp_inner.body.outer:null).zpp_inner.type)return null;if((null!=e.zpp_inner.body?e.zpp_inner.body.outer:null)==(null!=t.zpp_inner.body?t.zpp_inner.body.outer:null))return null;var i,n=e.zpp_inner,r=t.zpp_inner,o=n.body,a=r.body;i=!1;for(var s,p,l=o.constraints.head;null!=l;){var h=l.elt;if(h.ignore&&h.pair_exists(o.id,a.id)){i=!0;break}l=l.next}if(i)p=!1;else{for(var u=n;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var d,c=null==u?null:u.group;if(null==c)d=!1;else{for(var _=r;null!=_&&null==_.group;)_=null!=_.ishape?_.ishape.body:null!=_.icompound?_.icompound.compound:_.ibody.compound;var y=null==_?null:_.group;if(null==y)d=!1;else{for(var x=!1;null!=c&&null!=y;){if(c==y){x=c.ignore;break}c.depth<y.depth?y=y.group:c=c.group}d=x}}p=!d}if(p){var m;if(n.sensorEnabled||r.sensorEnabled){var f=n.filter,v=r.filter;m=0!=(f.sensorMask&v.sensorGroup)&&0!=(v.sensorMask&f.sensorGroup)}else m=!1;if(m)s=2;else{var g;if(n.fluidEnabled||r.fluidEnabled){var z=n.filter,b=r.filter;g=0!=(z.fluidMask&b.fluidGroup)&&0!=(b.fluidMask&z.fluidGroup)}else g=!1;if(!!g&&!(0==o.imass&&0==a.imass&&0==o.iinertia&&0==a.iinertia))s=0;else{var w=n.filter,S=r.filter;s=0!=(w.collisionMask&S.collisionGroup)&&0!=(S.collisionMask&w.collisionGroup)&&!(0==o.imass&&0==a.imass&&0==o.iinertia&&0==a.iinertia)?1:-1}}}else s=-1;switch(s){case 0:return null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID;case 1:return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION;case 2:return null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR;default:return null}},Se.prototype.shapesUnderPoint=function(e,t,i){var n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.shapesUnderPoint(r,e.zpp_inner.y,null==t?null:t.zpp_inner,i);if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return a},Se.prototype.bodiesUnderPoint=function(e,t,i){var n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.bodiesUnderPoint(r,e.zpp_inner.y,null==t?null:t.zpp_inner,i);if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return a},Se.prototype.shapesInAABB=function(e,t,i,n,r){return null==i&&(i=!0),null==t&&(t=!1),this.zpp_inner.shapesInAABB(e,i,t,null==n?null:n.zpp_inner,r)},Se.prototype.bodiesInAABB=function(e,t,i,n,r){return null==i&&(i=!0),null==t&&(t=!1),this.zpp_inner.bodiesInAABB(e,i,t,null==n?null:n.zpp_inner,r)},Se.prototype.shapesInCircle=function(e,t,i,n,r){null==i&&(i=!1);var o=this.zpp_inner.shapesInCircle(e,t,i,null==n?null:n.zpp_inner,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}return o},Se.prototype.bodiesInCircle=function(e,t,i,n,r){null==i&&(i=!1);var o=this.zpp_inner.bodiesInCircle(e,t,i,null==n?null:n.zpp_inner,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}return o},Se.prototype.shapesInShape=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.shapesInShape(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},Se.prototype.bodiesInShape=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.bodiesInShape(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},Se.prototype.shapesInBody=function(e,t,i){var n=null==i?new me:i,r=e.zpp_inner.wrap_shapes;r.zpp_inner.valmod();for(var o=ht.get(r);;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner;a.zpp_inner.valmod(),a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);var s=a.zpp_inner.user_length;if(o.zpp_critical=!0,!(o.zpp_i<s||(o.zpp_next=ht.zpp_pool,(ht.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1,this.shapesInShape(o.zpp_inner.at(o.zpp_i++),!1,t,n)}return n},Se.prototype.bodiesInBody=function(e,t,i){var n=null==i?new ee:i,r=e.zpp_inner.wrap_shapes;r.zpp_inner.valmod();for(var o=ht.get(r);;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner;a.zpp_inner.valmod(),a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);var s=a.zpp_inner.user_length;if(o.zpp_critical=!0,!(o.zpp_i<s||(o.zpp_next=ht.zpp_pool,(ht.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1,this.bodiesInShape(o.zpp_inner.at(o.zpp_i++),!1,t,n)}return n},Se.prototype.convexCast=function(e,t,i,n){return null==i&&(i=!1),this.zpp_inner.convexCast(e.zpp_inner,t,n,i)},Se.prototype.convexMultiCast=function(e,t,i,n,r){return null==i&&(i=!1),this.zpp_inner.convexMultiCast(e.zpp_inner,t,n,i,r)},Se.prototype.rayCast=function(e,t,i){return null==t&&(t=!1),this.zpp_inner.rayCast(e,t,i)},Se.prototype.rayMultiCast=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.rayMultiCast(e,t,i,n)},Object.defineProperty(Se.prototype,"userData",{get:Se.prototype.get_userData}),Object.defineProperty(Se.prototype,"gravity",{get:Se.prototype.get_gravity,set:Se.prototype.set_gravity}),Object.defineProperty(Se.prototype,"broadphase",{get:Se.prototype.get_broadphase}),Object.defineProperty(Se.prototype,"sortContacts",{get:Se.prototype.get_sortContacts,set:Se.prototype.set_sortContacts}),Object.defineProperty(Se.prototype,"worldAngularDrag",{get:Se.prototype.get_worldAngularDrag,set:Se.prototype.set_worldAngularDrag}),Object.defineProperty(Se.prototype,"worldLinearDrag",{get:Se.prototype.get_worldLinearDrag,set:Se.prototype.set_worldLinearDrag}),Object.defineProperty(Se.prototype,"compounds",{get:Se.prototype.get_compounds}),Object.defineProperty(Se.prototype,"bodies",{get:Se.prototype.get_bodies}),Object.defineProperty(Se.prototype,"liveBodies",{get:Se.prototype.get_liveBodies}),Object.defineProperty(Se.prototype,"constraints",{get:Se.prototype.get_constraints}),Object.defineProperty(Se.prototype,"liveConstraints",{get:Se.prototype.get_liveConstraints}),Object.defineProperty(Se.prototype,"world",{get:Se.prototype.get_world}),Object.defineProperty(Se.prototype,"arbiters",{get:Se.prototype.get_arbiters}),Object.defineProperty(Se.prototype,"listeners",{get:Se.prototype.get_listeners}),Object.defineProperty(Se.prototype,"timeStamp",{get:Se.prototype.get_timeStamp}),Object.defineProperty(Se.prototype,"elapsedTime",{get:Se.prototype.get_elapsedTime}),Se.prototype.__class__=Se;var Ce=nape.util.Debug=function(){};Ce.__name__=["nape","util","Debug"],Ce.version=function(){return"Nape 2.0.19"},Ce.clearObjectPools=function(){for(;null!=We.zpp_pool;){var e=We.zpp_pool.zpp_next;We.zpp_pool.zpp_next=null,We.zpp_pool=e}for(;null!=tt.zpp_pool;){var t=tt.zpp_pool.zpp_next;tt.zpp_pool.zpp_next=null,tt.zpp_pool=t}for(;null!=$e.zpp_pool;){var i=$e.zpp_pool.zpp_next;$e.zpp_pool.zpp_next=null,$e.zpp_pool=i}for(;null!=et.zpp_pool;){var n=et.zpp_pool.zpp_next;et.zpp_pool.zpp_next=null,et.zpp_pool=n}for(;null!=Ve.zpp_pool;){var r=Ve.zpp_pool.zpp_next;Ve.zpp_pool.zpp_next=null,Ve.zpp_pool=r}for(;null!=He.zpp_pool;){var o=He.zpp_pool.zpp_next;He.zpp_pool.zpp_next=null,He.zpp_pool=o}for(;null!=Ze.zpp_pool;){var a=Ze.zpp_pool.zpp_next;Ze.zpp_pool.zpp_next=null,Ze.zpp_pool=a}for(;null!=Ke.zpp_pool;){var s=Ke.zpp_pool.zpp_next;Ke.zpp_pool.zpp_next=null,Ke.zpp_pool=s}for(;null!=Qe.zpp_pool;){var p=Qe.zpp_pool.zpp_next;Qe.zpp_pool.zpp_next=null,Qe.zpp_pool=p}for(;null!=Je.zpp_pool;){var l=Je.zpp_pool.zpp_next;Je.zpp_pool.zpp_next=null,Je.zpp_pool=l}for(;null!=ht.zpp_pool;){var h=ht.zpp_pool.zpp_next;ht.zpp_pool.zpp_next=null,ht.zpp_pool=h}for(;null!=it.zpp_pool;){var u=it.zpp_pool.zpp_next;it.zpp_pool.zpp_next=null,it.zpp_pool=u}for(;null!=qe.zpp_pool;){var d=qe.zpp_pool.zpp_next;qe.zpp_pool.zpp_next=null,qe.zpp_pool=d}for(;null!=Xe.zpp_pool;){var c=Xe.zpp_pool.zpp_next;Xe.zpp_pool.zpp_next=null,Xe.zpp_pool=c}for(;null!=Ye.zpp_pool;){var _=Ye.zpp_pool.zpp_next;Ye.zpp_pool.zpp_next=null,Ye.zpp_pool=_}for(;null!=ji.zpp_pool;){var y=ji.zpp_pool.next;ji.zpp_pool.next=null,ji.zpp_pool=y}for(;null!=Ni.zpp_pool;){var x=Ni.zpp_pool.next;Ni.zpp_pool.next=null,Ni.zpp_pool=x}for(;null!=Kt.zpp_pool;){var m=Kt.zpp_pool.next;Kt.zpp_pool.next=null,Kt.zpp_pool=m}for(;null!=Ui.zpp_pool;){var f=Ui.zpp_pool.next;Ui.zpp_pool.next=null,Ui.zpp_pool=f}for(;null!=Zt.zpp_pool;){var v=Zt.zpp_pool.next;Zt.zpp_pool.next=null,Zt.zpp_pool=v}for(;null!=Hi.zpp_pool;){var g=Hi.zpp_pool.next;Hi.zpp_pool.next=null,Hi.zpp_pool=g}for(;null!=Vi.zpp_pool;){var z=Vi.zpp_pool.next;Vi.zpp_pool.next=null,Vi.zpp_pool=z}for(;null!=Wi.zpp_pool;){var b=Wi.zpp_pool.next;Wi.zpp_pool.next=null,Wi.zpp_pool=b}for(;null!=Zo.zpp_pool;){var w=Zo.zpp_pool.next;Zo.zpp_pool.next=null,Zo.zpp_pool=w}for(;null!=Nn.zpp_pool;){var S=Nn.zpp_pool.next;Nn.zpp_pool.next=null,Nn.zpp_pool=S}for(;null!=No.zpp_pool;){var C=No.zpp_pool.next;No.zpp_pool.next=null,No.zpp_pool=C}for(;null!=Ko.zpp_pool;){var M=Ko.zpp_pool.next;Ko.zpp_pool.next=null,Ko.zpp_pool=M}for(;null!=Xi.zpp_pool;){var P=Xi.zpp_pool.next;Xi.zpp_pool.next=null,Xi.zpp_pool=P}for(;null!=Jo.zpp_pool;){var k=Jo.zpp_pool.next;Jo.zpp_pool.next=null,Jo.zpp_pool=k}for(;null!=qi.zpp_pool;){var T=qi.zpp_pool.next;qi.zpp_pool.next=null,qi.zpp_pool=T}for(;null!=nt.zpp_pool;){var G=nt.zpp_pool.next;nt.zpp_pool.next=null,nt.zpp_pool=G}for(;null!=jo.zpp_pool;){var O=jo.zpp_pool.next;jo.zpp_pool.next=null,jo.zpp_pool=O}for(;null!=Yi.zpp_pool;){var A=Yi.zpp_pool.next;Yi.zpp_pool.next=null,Yi.zpp_pool=A}for(;null!=Zi.zpp_pool;){var E=Zi.zpp_pool.next;Zi.zpp_pool.next=null,Zi.zpp_pool=E}for(;null!=cr.zpp_pool;){var I=cr.zpp_pool.next;cr.zpp_pool.next=null,cr.zpp_pool=I}for(;null!=Ct.zpp_pool;){var B=Ct.zpp_pool.next;Ct.zpp_pool.next=null,Ct.zpp_pool=B}for(;null!=Pt.zpp_pool;){var L=Pt.zpp_pool.next;Pt.zpp_pool.next=null,Pt.zpp_pool=L}for(;null!=Un.zpp_pool;){var D=Un.zpp_pool.next;Un.zpp_pool.next=null,Un.zpp_pool=D}for(;null!=Sn.zpp_pool;){var R=Sn.zpp_pool.next;Sn.zpp_pool.next=null,Sn.zpp_pool=R}for(;null!=Cn.zpp_pool;){var F=Cn.zpp_pool.next;Cn.zpp_pool.next=null,Cn.zpp_pool=F}for(;null!=Ki.zpp_pool;){var j=Ki.zpp_pool.next;Ki.zpp_pool.next=null,Ki.zpp_pool=j}for(;null!=Ji.zpp_pool;){var N=Ji.zpp_pool.next;Ji.zpp_pool.next=null,Ji.zpp_pool=N}for(;null!=ep.zpp_pool;){var U=ep.zpp_pool.next;ep.zpp_pool.next=null,ep.zpp_pool=U}for(;null!=Qi.zpp_pool;){var H=Qi.zpp_pool.next;Qi.zpp_pool.next=null,Qi.zpp_pool=H}for(;null!=Gt.zpp_pool;){var V=Gt.zpp_pool.next;Gt.zpp_pool.next=null,Gt.zpp_pool=V}for(;null!=Hn.zpp_pool;){var W=Hn.zpp_pool.next;Hn.zpp_pool.next=null,Hn.zpp_pool=W}for(;null!=Rt.zpp_pool;){var X=Rt.zpp_pool.next;Rt.zpp_pool.next=null,Rt.zpp_pool=X}for(;null!=Ft.zpp_pool;){var q=Ft.zpp_pool.next;Ft.zpp_pool.next=null,Ft.zpp_pool=q}for(;null!=Ot.zpp_pool;){var Y=Ot.zpp_pool.next;Ot.zpp_pool.next=null,Ot.zpp_pool=Y}for(;null!=$i.zpp_pool;){var Z=$i.zpp_pool.next;$i.zpp_pool.next=null,$i.zpp_pool=Z}for(;null!=en.zpp_pool;){var K=en.zpp_pool.next;en.zpp_pool.next=null,en.zpp_pool=K}for(;null!=Nt.zpp_pool;){var J=Nt.zpp_pool.next;Nt.zpp_pool.next=null,Nt.zpp_pool=J}for(;null!=Vn.zpp_pool;){var Q=Vn.zpp_pool.next;Vn.zpp_pool.next=null,Vn.zpp_pool=Q}for(;null!=tn.zpp_pool;){var $=tn.zpp_pool.next;tn.zpp_pool.next=null,tn.zpp_pool=$}for(;null!=Oo.zpp_pool;){var ee=Oo.zpp_pool.next;Oo.zpp_pool.next=null,Oo.zpp_pool=ee}for(;null!=Wn.zpp_pool;){var te=Wn.zpp_pool.next;Wn.zpp_pool.next=null,Wn.zpp_pool=te}for(;null!=Et.zpp_pool;){var ie=Et.zpp_pool.next;Et.zpp_pool.next=null,Et.zpp_pool=ie}for(;null!=It.zpp_pool;){var ne=It.zpp_pool.next;It.zpp_pool.next=null,It.zpp_pool=ne}for(;null!=Xn.zpp_pool;){var re=Xn.zpp_pool.next;Xn.zpp_pool.next=null,Xn.zpp_pool=re}for(;null!=qn.zpp_pool;){var oe=qn.zpp_pool.next;qn.zpp_pool.next=null,qn.zpp_pool=oe}for(;null!=Bt.zpp_pool;){var ae=Bt.zpp_pool.next;Bt.zpp_pool.next=null,Bt.zpp_pool=ae}for(;null!=ci.zpp_pool;){var se=ci.zpp_pool.next;ci.zpp_pool.next=null,ci.zpp_pool=se}for(;null!=Ht.zpp_pool;){var pe=Ht.zpp_pool.next;Ht.zpp_pool.next=null,Ht.zpp_pool=pe}for(;null!=nn.zpp_pool;){var le=nn.zpp_pool.next;nn.zpp_pool.next=null,nn.zpp_pool=le}for(;null!=rn.zpp_pool;){var he=rn.zpp_pool.next;rn.zpp_pool.next=null,rn.zpp_pool=he}for(;null!=Mt.zpp_pool;){var ue=Mt.zpp_pool.next;Mt.zpp_pool.next=null,Mt.zpp_pool=ue}for(;null!=_r.zpp_pool;){var de=_r.zpp_pool.next;_r.zpp_pool.next=null,_r.zpp_pool=de}for(;null!=on.zpp_pool;){var ce=on.zpp_pool.next;on.zpp_pool.next=null,on.zpp_pool=ce}for(;null!=$t.zpp_pool;){var _e=$t.zpp_pool.next;$t.zpp_pool.next=null,$t.zpp_pool=_e}for(;null!=rr.zpp_pool;){var ye=rr.zpp_pool.next;rr.zpp_pool.next=null,rr.zpp_pool=ye}for(;null!=an.zpp_pool;){var xe=an.zpp_pool.next;an.zpp_pool.next=null,an.zpp_pool=xe}for(;null!=pi.zpp_pool;){var me=pi.zpp_pool.next;pi.zpp_pool.next=null,pi.zpp_pool=me}for(;null!=Ao.zpp_pool;){var fe=Ao.zpp_pool.next;Ao.zpp_pool.next=null,Ao.zpp_pool=fe}for(;null!=nr.zpp_pool;){var ve=nr.zpp_pool.next;nr.zpp_pool.next=null,nr.zpp_pool=ve}for(;null!=sn.zpp_pool;){var ge=sn.zpp_pool.next;sn.zpp_pool.next=null,sn.zpp_pool=ge}for(;null!=Xo.zpp_pool;){var ze=Xo.zpp_pool.next;Xo.zpp_pool.next=null,Xo.zpp_pool=ze}for(;null!=pn.zpp_pool;){var be=pn.zpp_pool.next;pn.zpp_pool.next=null,pn.zpp_pool=be}for(;null!=ni.zpp_pool;){var we=ni.zpp_pool.next;ni.zpp_pool.next=null,ni.zpp_pool=we}for(;null!=oi.zpp_pool;){var Se=oi.zpp_pool.next;oi.zpp_pool.next=null,oi.zpp_pool=Se}for(;null!=Yo.zpp_pool;){var Ce=Yo.zpp_pool.next;Yo.zpp_pool.next=null,Yo.zpp_pool=Ce}for(;null!=Ho.zpp_pool;){var Me=Ho.zpp_pool.next;Ho.zpp_pool.next=null,Ho.zpp_pool=Me}for(;null!=Vo.zpp_pool;){var Pe=Vo.zpp_pool.next;Vo.zpp_pool.next=null,Vo.zpp_pool=Pe}for(;null!=Yn.zpp_pool;){var ke=Yn.zpp_pool.next;Yn.zpp_pool.next=null,Yn.zpp_pool=ke}for(;null!=Qo.zpp_pool;){var Te=Qo.zpp_pool.next;Qo.zpp_pool.next=null,Qo.zpp_pool=Te}for(;null!=Wo.zpp_pool;){var Ge=Wo.zpp_pool.next;Wo.zpp_pool.next=null,Wo.zpp_pool=Ge}for(;null!=$o.zpp_pool;){var Oe=$o.zpp_pool.next;$o.zpp_pool.next=null,$o.zpp_pool=Oe}for(;null!=hn.zpp_pool;){var Ae=hn.zpp_pool.next;hn.zpp_pool.next=null,hn.zpp_pool=Ae}for(;null!=ea.zpp_pool;){var Ee=ea.zpp_pool.next;ea.zpp_pool.next=null,ea.zpp_pool=Ee}for(;null!=un.zpp_pool;){var Ie=un.zpp_pool.next;un.zpp_pool.next=null,un.zpp_pool=Ie}for(;null!=dn.zpp_pool;){var Be=dn.zpp_pool.next;dn.zpp_pool.next=null,dn.zpp_pool=Be}for(;null!=mt.zpp_pool;){var Le=mt.zpp_pool.next;mt.zpp_pool.next=null,mt.zpp_pool=Le}for(;null!=cn.zpp_pool;){var De=cn.zpp_pool.next;cn.zpp_pool.next=null,cn.zpp_pool=De}for(;null!=_n.zpp_pool;){var Re=_n.zpp_pool.next;_n.zpp_pool.next=null,_n.zpp_pool=Re}for(;null!=yn.zpp_pool;){var Fe=yn.zpp_pool.next;yn.zpp_pool.next=null,yn.zpp_pool=Fe}for(;null!=jn.poolGeomPoly;){var je=jn.poolGeomPoly.zpp_pool;jn.poolGeomPoly.zpp_pool=null,jn.poolGeomPoly=je}for(;null!=jn.poolVec2;){var Ne=jn.poolVec2.zpp_pool;jn.poolVec2.zpp_pool=null,jn.poolVec2=Ne}for(;null!=jn.poolVec3;){var Ue=jn.poolVec3.zpp_pool;jn.poolVec3.zpp_pool=null,jn.poolVec3=Ue}},Ce.prototype.__class__=Ce;var Me=sandbox.Main=function(){};Me.__name__=["sandbox","Main"],Me.main=function(){},Me.prototype.__class__=Me;var Pe=zpp_nape.ZPP_Const=function(){};Pe.__name__=["zpp_nape","ZPP_Const"],Pe.POSINF=function(){return 1/0},Pe.NEGINF=function(){return-1/0},Pe.prototype.__class__=Pe;var ke=zpp_nape.ZPP_ID=function(){};ke.__name__=["zpp_nape","ZPP_ID"],ke.Constraint=function(){return ke._Constraint++},ke.Interactor=function(){return ke._Interactor++},ke.CbType=function(){return ke._CbType++},ke.CbSet=function(){return ke._CbSet++},ke.Listener=function(){return ke._Listener++},ke.ZPP_SimpleVert=function(){return ke._ZPP_SimpleVert++},ke.ZPP_SimpleSeg=function(){return ke._ZPP_SimpleSeg++},ke.Space=function(){return ke._Space++},ke.InteractionGroup=function(){return ke._InteractionGroup++},ke.prototype.__class__=ke;var nt=zpp_nape.callbacks.ZPP_Callback=function(){this.constraint=null,this.body=null,this.pre_swapped=!1,this.pre_arbiter=null,this.wrap_arbiters=null,this.set=null,this.int2=null,this.int1=null,this.length=0,this.prev=null,this.next=null,this.index=0,this.space=null,this.listener=null,this.event=0,this.outer_int=null,this.outer_con=null,this.outer_body=null,this.length=0};nt.__name__=["zpp_nape","callbacks","ZPP_Callback"],nt.prototype.outer_body=null,nt.prototype.outer_con=null,nt.prototype.outer_int=null,nt.prototype.wrapper_body=function(){return null==this.outer_body&&(this.outer_body=new i,this.outer_body.zpp_inner=this),this.outer_body},nt.prototype.wrapper_con=function(){return null==this.outer_con&&(this.outer_con=new a,this.outer_con.zpp_inner=this),this.outer_con},nt.prototype.wrapper_int=function(){return null==this.outer_int&&(this.outer_int=new p,this.outer_int.zpp_inner=this),null==this.wrap_arbiters?this.wrap_arbiters=Dn.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null,this.outer_int},nt.prototype.event=null,nt.prototype.listener=null,nt.prototype.space=null,nt.prototype.index=null,nt.prototype.next=null,nt.prototype.prev=null,nt.prototype.length=null,nt.prototype.push=function(e){null!=this.prev?this.prev.next=e:this.next=e,e.prev=this.prev,e.next=null,this.prev=e,this.length++},nt.prototype.push_rev=function(e){null!=this.next?this.next.prev=e:this.prev=e,e.next=this.next,e.prev=null,this.next=e,this.length++},nt.prototype.pop=function(){var e=this.next;return this.next=e.next,null==this.next?this.prev=null:this.next.prev=null,this.length--,e},nt.prototype.pop_rev=function(){var e=this.prev;return this.prev=e.prev,null==this.prev?this.next=null:this.prev.next=null,this.length--,e},nt.prototype.empty=function(){return null==this.next},nt.prototype.clear=function(){for(;!this.empty();)this.pop()},nt.prototype.splice=function(e){var t=e.next;return null==e.prev?(this.next=e.next,null!=this.next?this.next.prev=null:this.prev=null):(e.prev.next=e.next,null!=e.next?e.next.prev=e.prev:this.prev=e.prev),this.length--,t},nt.prototype.rotateL=function(){this.push(this.pop())},nt.prototype.rotateR=function(){this.push_rev(this.pop_rev())},nt.prototype.cycleNext=function(e){return null==e.next?this.next:e.next},nt.prototype.cyclePrev=function(e){return null==e.prev?this.prev:e.prev},nt.prototype.at=function(e){for(var t=this.next;0!=e--;)t=t.next;return t},nt.prototype.rev_at=function(e){for(var t=this.prev;0!=e--;)t=t.prev;return t},nt.prototype.free=function(){this.int1=this.int2=null,this.body=null,this.constraint=null,(this.listener=null)!=this.wrap_arbiters&&(this.wrap_arbiters.zpp_inner.inner=null),this.set=null},nt.prototype.alloc=function(){},nt.prototype.int1=null,nt.prototype.int2=null,nt.prototype.set=null,nt.prototype.wrap_arbiters=null,nt.prototype.pre_arbiter=null,nt.prototype.pre_swapped=null,nt.prototype.genarbs=function(){null==this.wrap_arbiters?this.wrap_arbiters=Dn.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null},nt.prototype.body=null,nt.prototype.constraint=null,nt.prototype.__class__=nt;var jo=zpp_nape.callbacks.ZPP_CbSet=function(){this.wrap_constraints=null,this.constraints=null,this.wrap_interactors=null,this.interactors=null,this.zip_conlisteners=!1,this.conlisteners=null,this.zip_bodylisteners=!1,this.bodylisteners=null,this.zip_listeners=!1,this.listeners=null,this.cbpairs=null,this.manager=null,this.id=0,this.next=null,this.count=0,this.cbTypes=null,this.cbTypes=new Fe,this.listeners=new Te,this.zip_listeners=!0,this.bodylisteners=new Ge,this.zip_bodylisteners=!0,this.conlisteners=new Oe,this.zip_conlisteners=!0,this.constraints=new Ae,this.interactors=new Ee,this.id=ke.CbSet(),this.cbpairs=new gi};jo.__name__=["zpp_nape","callbacks","ZPP_CbSet"],jo.setlt=function(e,t){for(var i=e.cbTypes.head,n=t.cbTypes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r.id<o.id)return!0;if(o.id<r.id)return!1;i=i.next,n=n.next}return null!=n&&null==i},jo.get=function(e){var t;null==jo.zpp_pool?t=new jo:(t=jo.zpp_pool,jo.zpp_pool=t.next,t.next=null);for(var i=null,n=e.head;null!=n;){var r=n.elt;i=t.cbTypes.insert(i,r),r.cbsets.add(t),n=n.next}return t},jo.compatible=function(e,t,i){var n,r=e.options1,o=t.cbTypes;if(r.nonemptyintersection(o,r.includes)&&!r.nonemptyintersection(o,r.excludes)){var a=e.options2,s=i.cbTypes;n=!!a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)}else n=!1;if(n)return!0;var p=e.options2,l=t.cbTypes;if(!p.nonemptyintersection(l,p.includes)||p.nonemptyintersection(l,p.excludes))return!1;var h=e.options1,u=i.cbTypes;return!!h.nonemptyintersection(u,h.includes)&&!h.nonemptyintersection(u,h.excludes)},jo.empty_intersection=function(e,t){for(var i,n=null,r=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=r;){var o=r.elt;if(o.a==e&&o.b==t||o.a==t&&o.b==e){n=o;break}r=r.next}null==n&&(null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),n=i,e.cbpairs.add(n),t!=e&&t.cbpairs.add(n));return n.zip_listeners&&(n.zip_listeners=!1,n.__validate()),null==n.listeners.head},jo.single_intersection=function(e,t,i){for(var n,r=null,o=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=o;){var a=o.elt;if(a.a==e&&a.b==t||a.a==t&&a.b==e){r=a;break}o=o.next}null==r&&(null==No.zpp_pool?n=new No:(n=No.zpp_pool,No.zpp_pool=n.next,n.next=null),n.zip_listeners=!0,jo.setlt(e,t)?(n.a=e,n.b=t):(n.a=t,n.b=e),r=n,e.cbpairs.add(r),t!=e&&t.cbpairs.add(r));r.zip_listeners&&(r.zip_listeners=!1,r.__validate());var s=r.listeners.head;return null!=s&&s.elt==i&&null==s.next},jo.find_all=function(e,t,i,n){for(var r,o=null,a=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=a;){var s=a.elt;if(s.a==e&&s.b==t||s.a==t&&s.b==e){o=s;break}a=a.next}null==o&&(null==No.zpp_pool?r=new No:(r=No.zpp_pool,No.zpp_pool=r.next,r.next=null),r.zip_listeners=!0,jo.setlt(e,t)?(r.a=e,r.b=t):(r.a=t,r.b=e),o=r,e.cbpairs.add(o),t!=e&&t.cbpairs.add(o));o.zip_listeners&&(o.zip_listeners=!1,o.__validate());for(var p=o.listeners.head;null!=p;){var l=p.elt;l.event==i&&n(l),p=p.next}},jo.prototype.cbTypes=null,jo.prototype.count=null,jo.prototype.next=null,jo.prototype.id=null,jo.prototype.manager=null,jo.prototype.cbpairs=null,jo.prototype.increment=function(){this.count++},jo.prototype.decrement=function(){return 0==--this.count},jo.prototype.invalidate_pairs=function(){for(var e=this.cbpairs.head;null!=e;)e.elt.zip_listeners=!0,e=e.next},jo.prototype.listeners=null,jo.prototype.zip_listeners=null,jo.prototype.invalidate_listeners=function(){this.zip_listeners=!0,this.invalidate_pairs()},jo.prototype.validate_listeners=function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners())},jo.prototype.realvalidate_listeners=function(){this.listeners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.listeners.head,n=e.elt.listeners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){if(r.space==this.manager.space){var s,p=this.listeners;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=r;var l=s;null==t?(l.next=p.head,p.head=l):(l.next=t.next,t.next=l),p.pushmod=p.modified=!0,p.length++,t=l}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.bodylisteners=null,jo.prototype.zip_bodylisteners=null,jo.prototype.invalidate_bodylisteners=function(){this.zip_bodylisteners=!0},jo.prototype.validate_bodylisteners=function(){this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners())},jo.prototype.realvalidate_bodylisteners=function(){this.bodylisteners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.bodylisteners.head,n=e.elt.bodylisteners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){var s=r.options;if(!s.nonemptyintersection(this.cbTypes,s.excludes)&&r.space==this.manager.space){var p,l=this.bodylisteners;null==qi.zpp_pool?p=new qi:(p=qi.zpp_pool,qi.zpp_pool=p.next,p.next=null),p.elt=r;var h=p;null==t?(h.next=l.head,l.head=h):(h.next=t.next,t.next=h),l.pushmod=l.modified=!0,l.length++,t=h}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.conlisteners=null,jo.prototype.zip_conlisteners=null,jo.prototype.invalidate_conlisteners=function(){this.zip_conlisteners=!0},jo.prototype.validate_conlisteners=function(){this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},jo.prototype.realvalidate_conlisteners=function(){this.conlisteners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.conlisteners.head,n=e.elt.conlisteners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){var s=r.options;if(!s.nonemptyintersection(this.cbTypes,s.excludes)&&r.space==this.manager.space){var p,l=this.conlisteners;null==Zi.zpp_pool?p=new Zi:(p=Zi.zpp_pool,Zi.zpp_pool=p.next,p.next=null),p.elt=r;var h=p;null==t?(h.next=l.head,l.head=h):(h.next=t.next,t.next=h),l.pushmod=l.modified=!0,l.length++,t=h}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.validate=function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners()),this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners()),this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},jo.prototype.interactors=null,jo.prototype.wrap_interactors=null,jo.prototype.constraints=null,jo.prototype.wrap_constraints=null,jo.prototype.addConstraint=function(e){this.constraints.add(e)},jo.prototype.addInteractor=function(e){this.interactors.add(e)},jo.prototype.remConstraint=function(e){this.constraints.remove(e)},jo.prototype.remInteractor=function(e){this.interactors.remove(e)},jo.prototype.free=function(){for(this.listeners.clear(),this.zip_listeners=!0,this.bodylisteners.clear(),this.zip_bodylisteners=!0,this.conlisteners.clear(),this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},jo.prototype.alloc=function(){},jo.prototype.__class__=jo;var No=zpp_nape.callbacks.ZPP_CbSetPair=function(){this.listeners=null,this.zip_listeners=!1,this.next=null,this.b=null,this.a=null,this.listeners=new Te};No.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"],No.get=function(e,t){var i;return null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),i},No.setlt=function(e,t){return!!jo.setlt(e.a,t.a)||e.a==t.a&&jo.setlt(e.b,t.b)},No.prototype.a=null,No.prototype.b=null,No.prototype.next=null,No.prototype.free=function(){this.a=this.b=null,this.listeners.clear()},No.prototype.alloc=function(){this.zip_listeners=!0},No.prototype.compatible=function(e){var t,i=e.options1,n=this.a.cbTypes;if(i.nonemptyintersection(n,i.includes)&&!i.nonemptyintersection(n,i.excludes)){var r=e.options2,o=this.b.cbTypes;t=!!r.nonemptyintersection(o,r.includes)&&!r.nonemptyintersection(o,r.excludes)}else t=!1;if(t)return!0;var a=e.options2,s=this.a.cbTypes;if(!a.nonemptyintersection(s,a.includes)||a.nonemptyintersection(s,a.excludes))return!1;var p=e.options1,l=this.b.cbTypes;return!!p.nonemptyintersection(l,p.includes)&&!p.nonemptyintersection(l,p.excludes)},No.prototype.zip_listeners=null,No.prototype.listeners=null,No.prototype.invalidate=function(){this.zip_listeners=!0},No.prototype.validate=function(){this.zip_listeners&&(this.zip_listeners=!1,this.__validate())},No.prototype.__validate=function(){this.listeners.clear();for(var e=this.a.listeners.head,t=this.b.listeners.head;null!=e&&null!=t;){var i=e.elt,n=t.elt;if(i==n){var r,o,a=i.options1,s=this.a.cbTypes;if(a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)){var p=i.options2,l=this.b.cbTypes;o=!!p.nonemptyintersection(l,p.includes)&&!p.nonemptyintersection(l,p.excludes)}else o=!1;if(o)r=!0;else{var h=i.options2,u=this.a.cbTypes;if(h.nonemptyintersection(u,h.includes)&&!h.nonemptyintersection(u,h.excludes)){var d=i.options1,c=this.b.cbTypes;r=!!d.nonemptyintersection(c,d.includes)&&!d.nonemptyintersection(c,d.excludes)}else r=!1}r&&this.listeners.add(i),e=e.next,t=t.next}else i.precedence>n.precedence||i.precedence==n.precedence&&i.id>n.id?e=e.next:t=t.next}},No.prototype.empty_intersection=function(){return null==this.listeners.head},No.prototype.single_intersection=function(e){var t=this.listeners.head;return null!=t&&t.elt==e&&null==t.next},No.prototype.forall=function(e,t){for(var i=this.listeners.head;null!=i;){var n=i.elt;n.event==e&&t(n),i=i.next}},No.prototype.__class__=No;var Te=zpp_nape.util.ZNPList_ZPP_InteractionListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Te.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"],Te.prototype.head=null,Te.prototype.begin=function(){return this.head},Te.prototype.modified=null,Te.prototype.pushmod=null,Te.prototype.length=null,Te.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Te.prototype.add=function(e){var t;null==Ko.zpp_pool?t=new Ko:(t=Ko.zpp_pool,Ko.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Te.prototype.inlined_add=function(e){var t;null==Ko.zpp_pool?t=new Ko:(t=Ko.zpp_pool,Ko.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Te.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Te.prototype.insert=function(e,t){var i;null==Ko.zpp_pool?i=new Ko:(i=Ko.zpp_pool,Ko.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Te.prototype.inlined_insert=function(e,t){var i;null==Ko.zpp_pool?i=new Ko:(i=Ko.zpp_pool,Ko.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Te.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Te.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Te.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Te.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Te.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Te.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Te.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Te.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ko.zpp_pool,Ko.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Te.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ko.zpp_pool,Ko.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Te.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ko.zpp_pool,Ko.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Te.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Te.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Te.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Te.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Te.prototype.empty=function(){return null==this.head},Te.prototype.size=function(){return this.length},Te.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Te.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Te.prototype.front=function(){return this.head.elt},Te.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Te.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Te.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Te.prototype.__class__=Te;var Ge=zpp_nape.util.ZNPList_ZPP_BodyListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ge.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"],Ge.prototype.head=null,Ge.prototype.begin=function(){return this.head},Ge.prototype.modified=null,Ge.prototype.pushmod=null,Ge.prototype.length=null,Ge.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ge.prototype.add=function(e){var t;null==qi.zpp_pool?t=new qi:(t=qi.zpp_pool,qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ge.prototype.inlined_add=function(e){var t;null==qi.zpp_pool?t=new qi:(t=qi.zpp_pool,qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ge.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ge.prototype.insert=function(e,t){var i;null==qi.zpp_pool?i=new qi:(i=qi.zpp_pool,qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ge.prototype.inlined_insert=function(e,t){var i;null==qi.zpp_pool?i=new qi:(i=qi.zpp_pool,qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ge.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ge.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ge.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ge.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ge.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=qi.zpp_pool,qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ge.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ge.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=qi.zpp_pool,qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ge.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=qi.zpp_pool,qi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ge.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=qi.zpp_pool,qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ge.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=qi.zpp_pool,qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ge.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ge.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ge.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ge.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ge.prototype.empty=function(){return null==this.head},Ge.prototype.size=function(){return this.length},Ge.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ge.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ge.prototype.front=function(){return this.head.elt},Ge.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ge.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ge.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ge.prototype.__class__=Ge;var Oe=zpp_nape.util.ZNPList_ZPP_ConstraintListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Oe.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"],Oe.prototype.head=null,Oe.prototype.begin=function(){return this.head},Oe.prototype.modified=null,Oe.prototype.pushmod=null,Oe.prototype.length=null,Oe.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Oe.prototype.add=function(e){var t;null==Zi.zpp_pool?t=new Zi:(t=Zi.zpp_pool,Zi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oe.prototype.inlined_add=function(e){var t;null==Zi.zpp_pool?t=new Zi:(t=Zi.zpp_pool,Zi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oe.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Oe.prototype.insert=function(e,t){var i;null==Zi.zpp_pool?i=new Zi:(i=Zi.zpp_pool,Zi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oe.prototype.inlined_insert=function(e,t){var i;null==Zi.zpp_pool?i=new Zi:(i=Zi.zpp_pool,Zi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oe.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oe.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oe.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oe.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oe.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zi.zpp_pool,Zi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oe.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Oe.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zi.zpp_pool,Zi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oe.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Zi.zpp_pool,Zi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Oe.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zi.zpp_pool,Zi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oe.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zi.zpp_pool,Zi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oe.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Oe.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oe.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oe.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Oe.prototype.empty=function(){return null==this.head},Oe.prototype.size=function(){return this.length},Oe.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oe.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oe.prototype.front=function(){return this.head.elt},Oe.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Oe.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Oe.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Oe.prototype.__class__=Oe;var Ae=zpp_nape.util.ZNPList_ZPP_Constraint=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ae.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"],Ae.prototype.head=null,Ae.prototype.begin=function(){return this.head},Ae.prototype.modified=null,Ae.prototype.pushmod=null,Ae.prototype.length=null,Ae.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ae.prototype.add=function(e){var t;null==Vi.zpp_pool?t=new Vi:(t=Vi.zpp_pool,Vi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ae.prototype.inlined_add=function(e){var t;null==Vi.zpp_pool?t=new Vi:(t=Vi.zpp_pool,Vi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ae.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ae.prototype.insert=function(e,t){var i;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ae.prototype.inlined_insert=function(e,t){var i;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ae.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ae.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ae.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ae.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ae.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Vi.zpp_pool,Vi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ae.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ae.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Vi.zpp_pool,Vi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ae.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Vi.zpp_pool,Vi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ae.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Vi.zpp_pool,Vi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ae.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Vi.zpp_pool,Vi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ae.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ae.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ae.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ae.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ae.prototype.empty=function(){return null==this.head},Ae.prototype.size=function(){return this.length},Ae.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ae.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ae.prototype.front=function(){return this.head.elt},Ae.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ae.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ae.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ae.prototype.__class__=Ae;var Ee=zpp_nape.util.ZNPList_ZPP_Interactor=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ee.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"],Ee.prototype.head=null,Ee.prototype.begin=function(){return this.head},Ee.prototype.modified=null,Ee.prototype.pushmod=null,Ee.prototype.length=null,Ee.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ee.prototype.add=function(e){var t;null==Jo.zpp_pool?t=new Jo:(t=Jo.zpp_pool,Jo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ee.prototype.inlined_add=function(e){var t;null==Jo.zpp_pool?t=new Jo:(t=Jo.zpp_pool,Jo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ee.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ee.prototype.insert=function(e,t){var i;null==Jo.zpp_pool?i=new Jo:(i=Jo.zpp_pool,Jo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ee.prototype.inlined_insert=function(e,t){var i;null==Jo.zpp_pool?i=new Jo:(i=Jo.zpp_pool,Jo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ee.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ee.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ee.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ee.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ee.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ee.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ee.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ee.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Jo.zpp_pool,Jo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ee.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ee.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ee.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ee.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ee.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ee.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ee.prototype.empty=function(){return null==this.head},Ee.prototype.size=function(){return this.length},Ee.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ee.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ee.prototype.front=function(){return this.head.elt},Ee.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ee.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ee.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ee.prototype.__class__=Ee;var Ie=zpp_nape.util.ZNPList_ZPP_CbSet=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ie.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"],Ie.prototype.head=null,Ie.prototype.begin=function(){return this.head},Ie.prototype.modified=null,Ie.prototype.pushmod=null,Ie.prototype.length=null,Ie.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ie.prototype.add=function(e){var t;null==Xi.zpp_pool?t=new Xi:(t=Xi.zpp_pool,Xi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ie.prototype.inlined_add=function(e){var t;null==Xi.zpp_pool?t=new Xi:(t=Xi.zpp_pool,Xi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ie.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ie.prototype.insert=function(e,t){var i;null==Xi.zpp_pool?i=new Xi:(i=Xi.zpp_pool,Xi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ie.prototype.inlined_insert=function(e,t){var i;null==Xi.zpp_pool?i=new Xi:(i=Xi.zpp_pool,Xi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ie.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ie.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ie.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ie.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ie.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Xi.zpp_pool,Xi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ie.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ie.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Xi.zpp_pool,Xi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ie.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Xi.zpp_pool,Xi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ie.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Xi.zpp_pool,Xi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ie.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Xi.zpp_pool,Xi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ie.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ie.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ie.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ie.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ie.prototype.empty=function(){return null==this.head},Ie.prototype.size=function(){return this.length},Ie.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ie.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ie.prototype.front=function(){return this.head.elt},Ie.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ie.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ie.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ie.prototype.__class__=Ie;var Be=zpp_nape.callbacks.ZPP_CbType=function(){this.conlisteners=null,this.bodylisteners=null,this.listeners=null,this.cbsets=null,this.id=0,this.userData=null,this.outer=null,this.id=ke.CbType(),this.listeners=new Te,this.bodylisteners=new Ge,this.conlisteners=new Oe,this.constraints=new Ae,this.interactors=new Ee,this.cbsets=new Ie};Be.__name__=["zpp_nape","callbacks","ZPP_CbType"],Be.setlt=function(e,t){return e.id<t.id},Be.prototype.outer=null,Be.prototype.userData=null,Be.prototype.id=null,Be.prototype.cbsets=null,Be.prototype.interactors=null,Be.prototype.wrap_interactors=null,Be.prototype.constraints=null,Be.prototype.wrap_constraints=null,Be.prototype.addConstraint=function(e){this.constraints.add(e)},Be.prototype.addInteractor=function(e){this.interactors.add(e)},Be.prototype.remConstraint=function(e){this.constraints.remove(e)},Be.prototype.remInteractor=function(e){this.interactors.remove(e)},Be.prototype.listeners=null,Be.prototype.addint=function(e){for(var t=null,i=this.listeners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.listeners;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;){var p=s.elt;p.zip_listeners=!0,p.invalidate_pairs(),s=s.next}},Be.prototype.removeint=function(e){this.listeners.remove(e);for(var t=this.cbsets.head;null!=t;){var i=t.elt;i.zip_listeners=!0,i.invalidate_pairs(),t=t.next}},Be.prototype.invalidateint=function(){for(var e=this.cbsets.head;null!=e;){var t=e.elt;t.zip_listeners=!0,t.invalidate_pairs(),e=e.next}},Be.prototype.bodylisteners=null,Be.prototype.addbody=function(e){for(var t=null,i=this.bodylisteners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.bodylisteners;null==qi.zpp_pool?r=new qi:(r=qi.zpp_pool,qi.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;)s.elt.zip_bodylisteners=!0,s=s.next},Be.prototype.removebody=function(e){this.bodylisteners.remove(e);for(var t=this.cbsets.head;null!=t;)t.elt.zip_bodylisteners=!0,t=t.next},Be.prototype.invalidatebody=function(){for(var e=this.cbsets.head;null!=e;)e.elt.zip_bodylisteners=!0,e=e.next},Be.prototype.conlisteners=null,Be.prototype.addconstraint=function(e){for(var t=null,i=this.conlisteners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.conlisteners;null==Zi.zpp_pool?r=new Zi:(r=Zi.zpp_pool,Zi.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;)s.elt.zip_conlisteners=!0,s=s.next},Be.prototype.removeconstraint=function(e){this.conlisteners.remove(e);for(var t=this.cbsets.head;null!=t;)t.elt.zip_conlisteners=!0,t=t.next},Be.prototype.invalidateconstraint=function(){for(var e=this.cbsets.head;null!=e;)e.elt.zip_conlisteners=!0,e=e.next},Be.prototype.__class__=Be;var Uo=zpp_nape.util.ZPP_Flags=function(){};Uo.__name__=["zpp_nape","util","ZPP_Flags"],Uo.GravMassMode_DEFAULT=null,Uo.GravMassMode_FIXED=null,Uo.GravMassMode_SCALED=null,Uo.InertiaMode_DEFAULT=null,Uo.InertiaMode_FIXED=null,Uo.MassMode_DEFAULT=null,Uo.MassMode_FIXED=null,Uo.BodyType_STATIC=null,Uo.BodyType_DYNAMIC=null,Uo.BodyType_KINEMATIC=null,Uo.ListenerType_BODY=null,Uo.PreFlag_ACCEPT=null,Uo.ListenerType_CONSTRAINT=null,Uo.PreFlag_IGNORE=null,Uo.ListenerType_INTERACTION=null,Uo.PreFlag_ACCEPT_ONCE=null,Uo.ListenerType_PRE=null,Uo.PreFlag_IGNORE_ONCE=null,Uo.CbEvent_BEGIN=null,Uo.InteractionType_COLLISION=null,Uo.CbEvent_ONGOING=null,Uo.InteractionType_SENSOR=null,Uo.CbEvent_END=null,Uo.InteractionType_FLUID=null,Uo.CbEvent_WAKE=null,Uo.InteractionType_ANY=null,Uo.CbEvent_SLEEP=null,Uo.CbEvent_BREAK=null,Uo.CbEvent_PRE=null,Uo.Winding_UNDEFINED=null,Uo.Winding_CLOCKWISE=null,Uo.Winding_ANTICLOCKWISE=null,Uo.ValidationResult_VALID=null,Uo.ValidationResult_DEGENERATE=null,Uo.ValidationResult_CONCAVE=null,Uo.ValidationResult_SELF_INTERSECTING=null,Uo.ShapeType_CIRCLE=null,Uo.ShapeType_POLYGON=null,Uo.Broadphase_DYNAMIC_AABB_TREE=null,Uo.Broadphase_SWEEP_AND_PRUNE=null,Uo.ArbiterType_COLLISION=null,Uo.ArbiterType_SENSOR=null,Uo.ArbiterType_FLUID=null,Uo.prototype.__class__=Uo;var Le=zpp_nape.callbacks.ZPP_Listener=function(){this.space=null,this.interaction=null,this.constraint=null,this.body=null,this.precedence=0,this.event=0,this.type=0,this.id=0,this.outer=null,this.id=ke.Listener()};Le.__name__=["zpp_nape","callbacks","ZPP_Listener"],Le.setlt=function(e,t){return!(e.precedence<=t.precedence)||e.precedence==t.precedence&&e.id>t.id},Le.prototype.outer=null,Le.prototype.id=null,Le.prototype.type=null,Le.prototype.event=null,Le.prototype.precedence=null,Le.prototype.body=null,Le.prototype.constraint=null,Le.prototype.interaction=null,Le.prototype.space=null,Le.prototype.swapEvent=function(e){},Le.prototype.invalidate_precedence=function(){},Le.prototype.addedToSpace=function(){},Le.prototype.removedFromSpace=function(){},Le.prototype.__class__=Le;var De=zpp_nape.callbacks.ZPP_BodyListener=function(e,t,i){this.handler=null,this.options=null,this.outer_zn=null,Le.call(this),this.event=t,this.handler=i,(this.body=this).type=0,this.options=e.zpp_inner};De.__name__=["zpp_nape","callbacks","ZPP_BodyListener"],De.__super__=Le,De.prototype=Object.create(Le.prototype),De.prototype.outer_zn=null,De.prototype.options=null,De.prototype.handler=null,De.prototype.addedToSpace=function(){this.options.handler=$(this,this.cbtype_change);for(var e=this.options.includes.head;null!=e;){for(var t=e.elt,i=null,n=t.bodylisteners.head;null!=n;){var r=n.elt;if(this.precedence>r.precedence||this.precedence==r.precedence&&this.id>r.id)break;n=(i=n).next}var o,a=t.bodylisteners;null==qi.zpp_pool?o=new qi:(o=qi.zpp_pool,qi.zpp_pool=o.next,o.next=null),o.elt=this;var s=o;null==i?(s.next=a.head,a.head=s):(s.next=i.next,i.next=s),a.pushmod=a.modified=!0,a.length++;for(var p=t.cbsets.head;null!=p;)p.elt.zip_bodylisteners=!0,p=p.next;e=e.next}},De.prototype.removedFromSpace=function(){for(var e=this.options.includes.head;null!=e;){var t=e.elt;t.bodylisteners.remove(this);for(var i=t.cbsets.head;null!=i;)i.elt.zip_bodylisteners=!0,i=i.next;e=e.next}this.options.handler=null},De.prototype.cbtype_change=function(e,t,i){this.removedFromSpace();var n=this.options;if(t)if(i){for(var r=null,o=n.includes.head;null!=o&&!(e.id<o.elt.id);)o=(r=o).next;var a,s=n.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=e;var p=a;null==r?(p.next=s.head,s.head=p):(p.next=r.next,r.next=p),s.pushmod=s.modified=!0,s.length++}else n.includes.remove(e);else if(i){for(var l=null,h=n.excludes.head;null!=h&&!(e.id<h.elt.id);)h=(l=h).next;var u,d=n.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=e;var c=u;null==l?(c.next=d.head,d.head=c):(c.next=l.next,l.next=c),d.pushmod=d.modified=!0,d.length++}else n.excludes.remove(e);this.addedToSpace()},De.prototype.invalidate_precedence=function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},De.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},De.prototype.__class__=De;var Re=zpp_nape.callbacks.ZPP_ConstraintListener=function(e,t,i){this.handler=null,this.options=null,this.outer_zn=null,Le.call(this),this.event=t,this.handler=i,(this.constraint=this).type=1,this.options=e.zpp_inner};Re.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"],Re.__super__=Le,Re.prototype=Object.create(Le.prototype),Re.prototype.outer_zn=null,Re.prototype.options=null,Re.prototype.handler=null,Re.prototype.addedToSpace=function(){this.options.handler=$(this,this.cbtype_change);for(var e=this.options.includes.head;null!=e;){for(var t=e.elt,i=null,n=t.conlisteners.head;null!=n;){var r=n.elt;if(this.precedence>r.precedence||this.precedence==r.precedence&&this.id>r.id)break;n=(i=n).next}var o,a=t.conlisteners;null==Zi.zpp_pool?o=new Zi:(o=Zi.zpp_pool,Zi.zpp_pool=o.next,o.next=null),o.elt=this;var s=o;null==i?(s.next=a.head,a.head=s):(s.next=i.next,i.next=s),a.pushmod=a.modified=!0,a.length++;for(var p=t.cbsets.head;null!=p;)p.elt.zip_conlisteners=!0,p=p.next;e=e.next}},Re.prototype.removedFromSpace=function(){for(var e=this.options.includes.head;null!=e;){var t=e.elt;t.conlisteners.remove(this);for(var i=t.cbsets.head;null!=i;)i.elt.zip_conlisteners=!0,i=i.next;e=e.next}this.options.handler=null},Re.prototype.cbtype_change=function(e,t,i){this.removedFromSpace();var n=this.options;if(t)if(i){for(var r=null,o=n.includes.head;null!=o&&!(e.id<o.elt.id);)o=(r=o).next;var a,s=n.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=e;var p=a;null==r?(p.next=s.head,s.head=p):(p.next=r.next,r.next=p),s.pushmod=s.modified=!0,s.length++}else n.includes.remove(e);else if(i){for(var l=null,h=n.excludes.head;null!=h&&!(e.id<h.elt.id);)h=(l=h).next;var u,d=n.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=e;var c=u;null==l?(c.next=d.head,d.head=c):(c.next=l.next,l.next=c),d.pushmod=d.modified=!0,d.length++}else n.excludes.remove(e);this.addedToSpace()},Re.prototype.invalidate_precedence=function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},Re.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},Re.prototype.__class__=Re;var Fe=zpp_nape.util.ZNPList_ZPP_CbType=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Fe.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"],Fe.prototype.head=null,Fe.prototype.begin=function(){return this.head},Fe.prototype.modified=null,Fe.prototype.pushmod=null,Fe.prototype.length=null,Fe.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Fe.prototype.add=function(e){var t;null==ji.zpp_pool?t=new ji:(t=ji.zpp_pool,ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fe.prototype.inlined_add=function(e){var t;null==ji.zpp_pool?t=new ji:(t=ji.zpp_pool,ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fe.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Fe.prototype.insert=function(e,t){var i;null==ji.zpp_pool?i=new ji:(i=ji.zpp_pool,ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fe.prototype.inlined_insert=function(e,t){var i;null==ji.zpp_pool?i=new ji:(i=ji.zpp_pool,ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fe.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fe.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fe.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fe.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fe.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ji.zpp_pool,ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fe.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Fe.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ji.zpp_pool,ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fe.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=ji.zpp_pool,ji.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Fe.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ji.zpp_pool,ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fe.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ji.zpp_pool,ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fe.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Fe.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fe.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fe.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Fe.prototype.empty=function(){return null==this.head},Fe.prototype.size=function(){return this.length},Fe.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fe.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fe.prototype.front=function(){return this.head.elt},Fe.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Fe.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Fe.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Fe.prototype.__class__=Fe;var ri=zpp_nape.callbacks.ZPP_InteractionListener=function(e,t,i,n){this.handlerp=null,this.pure=!1,this.allowSleepingCallbacks=!1,this.handleri=null,this.options2=null,this.options1=null,this.itype=0,this.outer_znp=null,this.outer_zni=null,Le.call(this),this.type=n,(this.interaction=this).event=i,this.options1=e.zpp_inner,this.options2=t.zpp_inner,this.allowSleepingCallbacks=!1};ri.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"],ri.__super__=Le,ri.prototype=Object.create(Le.prototype),ri.prototype.outer_zni=null,ri.prototype.outer_znp=null,ri.prototype.itype=null,ri.prototype.options1=null,ri.prototype.options2=null,ri.prototype.handleri=null,ri.prototype.allowSleepingCallbacks=null,ri.prototype.pure=null,ri.prototype.handlerp=null,ri.prototype.setInteractionType=function(e){this.itype=e},ri.prototype.wake=function(){for(var e=this.options1.includes.head,t=this.options2.includes.head;null!=e&&null!=t;){var i=e.elt,n=t.elt;if(i==n){for(var r=i.interactors.head;null!=r;)r.elt.wake(),r=r.next;e=e.next,t=t.next}else if(i.id<n.id){for(var o=i.interactors.head;null!=o;)o.elt.wake(),o=o.next;e=e.next}else{for(var a=n.interactors.head;null!=a;)a.elt.wake(),a=a.next;t=t.next}}for(;null!=e;){for(var s=e.elt.interactors.head;null!=s;)s.elt.wake(),s=s.next;e=e.next}for(;null!=t;){for(var p=t.elt.interactors.head;null!=p;)p.elt.wake(),p=p.next;t=t.next}},ri.prototype.CbSetset=function(e,t,i){for(var n=ri.UCbSet,r=ri.VCbSet,o=ri.WCbSet,a=e.head,s=t.head;null!=a&&null!=s;){var p=a.elt,l=s.elt;if(p==l){var h;null==Xi.zpp_pool?h=new Xi:(h=Xi.zpp_pool,Xi.zpp_pool=h.next,h.next=null),h.elt=p;var u=h;u.next=o.head,o.head=u,o.modified=!0,o.length++,a=a.next,s=s.next}else if(jo.setlt(p,l)){var d;null==Xi.zpp_pool?d=new Xi:(d=Xi.zpp_pool,Xi.zpp_pool=d.next,d.next=null),d.elt=p;var c=d;c.next=n.head,n.head=c,n.modified=!0,n.length++,a=a.next}else{var _;null==Xi.zpp_pool?_=new Xi:(_=Xi.zpp_pool,Xi.zpp_pool=_.next,_.next=null),_.elt=l;var y=_;y.next=r.head,r.head=y,r.modified=!0,r.length++,s=s.next}}for(;null!=a;){var x,m=a.elt;null==Xi.zpp_pool?x=new Xi:(x=Xi.zpp_pool,Xi.zpp_pool=x.next,x.next=null),x.elt=m;var f=x;f.next=n.head,n.head=f,n.modified=!0,n.length++,a=a.next}for(;null!=s;){var v,g=s.elt;null==Xi.zpp_pool?v=new Xi:(v=Xi.zpp_pool,Xi.zpp_pool=v.next,v.next=null),v.elt=g;var z=v;z.next=r.head,r.head=z,r.modified=!0,r.length++,s=s.next}for(;null!=n.head;)for(var b=n.pop_unsafe(),w=t.head;null!=w;)i(b,w.elt),w=w.next;for(;null!=r.head;)for(var S=r.pop_unsafe(),C=o.head;null!=C;)i(S,C.elt),C=C.next;for(;null!=o.head;){var M=o.pop_unsafe();i(M,M);for(var P=o.head;null!=P;)i(M,P.elt),P=P.next}},ri.prototype.CbTypeset=function(e,t,i){for(var n=ri.UCbType,r=ri.VCbType,o=ri.WCbType,a=e.head,s=t.head;null!=a&&null!=s;){var p=a.elt,l=s.elt;if(p==l){var h;null==ji.zpp_pool?h=new ji:(h=ji.zpp_pool,ji.zpp_pool=h.next,h.next=null),h.elt=p;var u=h;u.next=o.head,o.head=u,o.modified=!0,o.length++,a=a.next,s=s.next}else if(p.id<l.id){var d;null==ji.zpp_pool?d=new ji:(d=ji.zpp_pool,ji.zpp_pool=d.next,d.next=null),d.elt=p;var c=d;c.next=n.head,n.head=c,n.modified=!0,n.length++,a=a.next}else{var _;null==ji.zpp_pool?_=new ji:(_=ji.zpp_pool,ji.zpp_pool=_.next,_.next=null),_.elt=l;var y=_;y.next=r.head,r.head=y,r.modified=!0,r.length++,s=s.next}}for(;null!=a;){var x,m=a.elt;null==ji.zpp_pool?x=new ji:(x=ji.zpp_pool,ji.zpp_pool=x.next,x.next=null),x.elt=m;var f=x;f.next=n.head,n.head=f,n.modified=!0,n.length++,a=a.next}for(;null!=s;){var v,g=s.elt;null==ji.zpp_pool?v=new ji:(v=ji.zpp_pool,ji.zpp_pool=v.next,v.next=null),v.elt=g;var z=v;z.next=r.head,r.head=z,r.modified=!0,r.length++,s=s.next}for(;null!=n.head;)for(var b=n.pop_unsafe(),w=t.head;null!=w;)i(b,w.elt),w=w.next;for(;null!=r.head;)for(var S=r.pop_unsafe(),C=o.head;null!=C;)i(S,C.elt),C=C.next;for(;null!=o.head;){var M=o.pop_unsafe();i(M,M);for(var P=o.head;null!=P;)i(M,P.elt),P=P.next}},ri.prototype.with_uniquesets=function(e){var t,i=this;null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.lt=No.setlt;for(var n=this.options2.includes,r=ri.UCbType,o=ri.VCbType,a=ri.WCbType,s=this.options1.includes.head,p=n.head;null!=s&&null!=p;){var l=s.elt,h=p.elt;if(l==h){var u;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=l;var d=u;d.next=a.head,a.head=d,a.modified=!0,a.length++,s=s.next,p=p.next}else if(l.id<h.id){var c;null==ji.zpp_pool?c=new ji:(c=ji.zpp_pool,ji.zpp_pool=c.next,c.next=null),c.elt=l;var _=c;_.next=r.head,r.head=_,r.modified=!0,r.length++,s=s.next}else{var y;null==ji.zpp_pool?y=new ji:(y=ji.zpp_pool,ji.zpp_pool=y.next,y.next=null),y.elt=h;var x=y;x.next=o.head,o.head=x,o.modified=!0,o.length++,p=p.next}}for(;null!=s;){var m,f=s.elt;null==ji.zpp_pool?m=new ji:(m=ji.zpp_pool,ji.zpp_pool=m.next,m.next=null),m.elt=f;var v=m;v.next=r.head,r.head=v,r.modified=!0,r.length++,s=s.next}for(;null!=p;){var g,z=p.elt;null==ji.zpp_pool?g=new ji:(g=ji.zpp_pool,ji.zpp_pool=g.next,g.next=null),g.elt=z;var b=g;b.next=o.head,o.head=b,o.modified=!0,o.length++,p=p.next}for(;null!=r.head;)for(var w=r.pop_unsafe(),S=n.head;null!=S;){for(var C=S.elt.cbsets,M=ri.UCbSet,P=ri.VCbSet,k=ri.WCbSet,T=w.cbsets.head,G=C.head;null!=T&&null!=G;){var O=T.elt,A=G.elt;if(O==A){var E;null==Xi.zpp_pool?E=new Xi:(E=Xi.zpp_pool,Xi.zpp_pool=E.next,E.next=null),E.elt=O;var I=E;I.next=k.head,k.head=I,k.modified=!0,k.length++,T=T.next,G=G.next}else if(jo.setlt(O,A)){var B;null==Xi.zpp_pool?B=new Xi:(B=Xi.zpp_pool,Xi.zpp_pool=B.next,B.next=null),B.elt=O;var L=B;L.next=M.head,M.head=L,M.modified=!0,M.length++,T=T.next}else{var D;null==Xi.zpp_pool?D=new Xi:(D=Xi.zpp_pool,Xi.zpp_pool=D.next,D.next=null),D.elt=A;var R=D;R.next=P.head,P.head=R,P.modified=!0,P.length++,G=G.next}}for(;null!=T;){var F,j=T.elt;null==Xi.zpp_pool?F=new Xi:(F=Xi.zpp_pool,Xi.zpp_pool=F.next,F.next=null),F.elt=j;var N=F;N.next=M.head,M.head=N,M.modified=!0,M.length++,T=T.next}for(;null!=G;){var U,H=G.elt;null==Xi.zpp_pool?U=new Xi:(U=Xi.zpp_pool,Xi.zpp_pool=U.next,U.next=null),U.elt=H;var V=U;V.next=P.head,P.head=V,P.modified=!0,P.length++,G=G.next}for(;null!=M.head;)for(var W=M.pop_unsafe(),X=C.head;null!=X;){var q,Y=X.elt;if(W.validate(),Y.validate(),jo.single_intersection(W,Y,i))null==No.zpp_pool?q=new No:(q=No.zpp_pool,No.zpp_pool=q.next,q.next=null),q.zip_listeners=!0,jo.setlt(W,Y)?(q.a=W,q.b=Y):(q.a=Y,q.b=W),t.try_insert(q);X=X.next}for(;null!=P.head;)for(var Z=P.pop_unsafe(),K=k.head;null!=K;){var J,Q=K.elt;if(Z.validate(),Q.validate(),jo.single_intersection(Z,Q,i))null==No.zpp_pool?J=new No:(J=No.zpp_pool,No.zpp_pool=J.next,J.next=null),J.zip_listeners=!0,jo.setlt(Z,Q)?(J.a=Z,J.b=Q):(J.a=Q,J.b=Z),t.try_insert(J);K=K.next}for(;null!=k.head;){var $,ee=k.pop_unsafe();if(ee.validate(),ee.validate(),jo.single_intersection(ee,ee,i))null==No.zpp_pool?$=new No:($=No.zpp_pool,No.zpp_pool=$.next,$.next=null),$.zip_listeners=!0,jo.setlt(ee,ee),$.a=ee,$.b=ee,t.try_insert($);for(var te=k.head;null!=te;){var ie,ne=te.elt;if(ee.validate(),ne.validate(),jo.single_intersection(ee,ne,i))null==No.zpp_pool?ie=new No:(ie=No.zpp_pool,No.zpp_pool=ie.next,ie.next=null),ie.zip_listeners=!0,jo.setlt(ee,ne)?(ie.a=ee,ie.b=ne):(ie.a=ne,ie.b=ee),t.try_insert(ie);te=te.next}}S=S.next}for(;null!=o.head;)for(var re=o.pop_unsafe(),oe=a.head;null!=oe;){for(var ae=oe.elt.cbsets,se=ri.UCbSet,pe=ri.VCbSet,le=ri.WCbSet,he=re.cbsets.head,ue=ae.head;null!=he&&null!=ue;){var de=he.elt,ce=ue.elt;if(de==ce){var _e;null==Xi.zpp_pool?_e=new Xi:(_e=Xi.zpp_pool,Xi.zpp_pool=_e.next,_e.next=null),_e.elt=de;var ye=_e;ye.next=le.head,le.head=ye,le.modified=!0,le.length++,he=he.next,ue=ue.next}else if(jo.setlt(de,ce)){var xe;null==Xi.zpp_pool?xe=new Xi:(xe=Xi.zpp_pool,Xi.zpp_pool=xe.next,xe.next=null),xe.elt=de;var me=xe;me.next=se.head,se.head=me,se.modified=!0,se.length++,he=he.next}else{var fe;null==Xi.zpp_pool?fe=new Xi:(fe=Xi.zpp_pool,Xi.zpp_pool=fe.next,fe.next=null),fe.elt=ce;var ve=fe;ve.next=pe.head,pe.head=ve,pe.modified=!0,pe.length++,ue=ue.next}}for(;null!=he;){var ge,ze=he.elt;null==Xi.zpp_pool?ge=new Xi:(ge=Xi.zpp_pool,Xi.zpp_pool=ge.next,ge.next=null),ge.elt=ze;var be=ge;be.next=se.head,se.head=be,se.modified=!0,se.length++,he=he.next}for(;null!=ue;){var we,Se=ue.elt;null==Xi.zpp_pool?we=new Xi:(we=Xi.zpp_pool,Xi.zpp_pool=we.next,we.next=null),we.elt=Se;var Ce=we;Ce.next=pe.head,pe.head=Ce,pe.modified=!0,pe.length++,ue=ue.next}for(;null!=se.head;)for(var Me=se.pop_unsafe(),Pe=ae.head;null!=Pe;){var ke,Te=Pe.elt;if(Me.validate(),Te.validate(),jo.single_intersection(Me,Te,i))null==No.zpp_pool?ke=new No:(ke=No.zpp_pool,No.zpp_pool=ke.next,ke.next=null),ke.zip_listeners=!0,jo.setlt(Me,Te)?(ke.a=Me,ke.b=Te):(ke.a=Te,ke.b=Me),t.try_insert(ke);Pe=Pe.next}for(;null!=pe.head;)for(var Ge=pe.pop_unsafe(),Oe=le.head;null!=Oe;){var Ae,Ee=Oe.elt;if(Ge.validate(),Ee.validate(),jo.single_intersection(Ge,Ee,i))null==No.zpp_pool?Ae=new No:(Ae=No.zpp_pool,No.zpp_pool=Ae.next,Ae.next=null),Ae.zip_listeners=!0,jo.setlt(Ge,Ee)?(Ae.a=Ge,Ae.b=Ee):(Ae.a=Ee,Ae.b=Ge),t.try_insert(Ae);Oe=Oe.next}for(;null!=le.head;){var Ie,Be=le.pop_unsafe();if(Be.validate(),Be.validate(),jo.single_intersection(Be,Be,i))null==No.zpp_pool?Ie=new No:(Ie=No.zpp_pool,No.zpp_pool=Ie.next,Ie.next=null),Ie.zip_listeners=!0,jo.setlt(Be,Be),Ie.a=Be,Ie.b=Be,t.try_insert(Ie);for(var Le=le.head;null!=Le;){var De,Re=Le.elt;if(Be.validate(),Re.validate(),jo.single_intersection(Be,Re,i))null==No.zpp_pool?De=new No:(De=No.zpp_pool,No.zpp_pool=De.next,De.next=null),De.zip_listeners=!0,jo.setlt(Be,Re)?(De.a=Be,De.b=Re):(De.a=Re,De.b=Be),t.try_insert(De);Le=Le.next}}oe=oe.next}for(;null!=a.head;){for(var Fe=a.pop_unsafe(),je=Fe.cbsets,Ne=ri.UCbSet,Ue=ri.VCbSet,He=ri.WCbSet,Ve=Fe.cbsets.head,We=je.head;null!=Ve&&null!=We;){var Xe=Ve.elt,qe=We.elt;if(Xe==qe){var Ye;null==Xi.zpp_pool?Ye=new Xi:(Ye=Xi.zpp_pool,Xi.zpp_pool=Ye.next,Ye.next=null),Ye.elt=Xe;var Ze=Ye;Ze.next=He.head,He.head=Ze,He.modified=!0,He.length++,Ve=Ve.next,We=We.next}else if(jo.setlt(Xe,qe)){var Ke;null==Xi.zpp_pool?Ke=new Xi:(Ke=Xi.zpp_pool,Xi.zpp_pool=Ke.next,Ke.next=null),Ke.elt=Xe;var Je=Ke;Je.next=Ne.head,Ne.head=Je,Ne.modified=!0,Ne.length++,Ve=Ve.next}else{var Qe;null==Xi.zpp_pool?Qe=new Xi:(Qe=Xi.zpp_pool,Xi.zpp_pool=Qe.next,Qe.next=null),Qe.elt=qe;var $e=Qe;$e.next=Ue.head,Ue.head=$e,Ue.modified=!0,Ue.length++,We=We.next}}for(;null!=Ve;){var et,tt=Ve.elt;null==Xi.zpp_pool?et=new Xi:(et=Xi.zpp_pool,Xi.zpp_pool=et.next,et.next=null),et.elt=tt;var it=et;it.next=Ne.head,Ne.head=it,Ne.modified=!0,Ne.length++,Ve=Ve.next}for(;null!=We;){var nt,rt=We.elt;null==Xi.zpp_pool?nt=new Xi:(nt=Xi.zpp_pool,Xi.zpp_pool=nt.next,nt.next=null),nt.elt=rt;var ot=nt;ot.next=Ue.head,Ue.head=ot,Ue.modified=!0,Ue.length++,We=We.next}for(;null!=Ne.head;)for(var at=Ne.pop_unsafe(),st=je.head;null!=st;){var pt,lt=st.elt;if(at.validate(),lt.validate(),jo.single_intersection(at,lt,i))null==No.zpp_pool?pt=new No:(pt=No.zpp_pool,No.zpp_pool=pt.next,pt.next=null),pt.zip_listeners=!0,jo.setlt(at,lt)?(pt.a=at,pt.b=lt):(pt.a=lt,pt.b=at),t.try_insert(pt);st=st.next}for(;null!=Ue.head;)for(var ht=Ue.pop_unsafe(),ut=He.head;null!=ut;){var dt,ct=ut.elt;if(ht.validate(),ct.validate(),jo.single_intersection(ht,ct,i))null==No.zpp_pool?dt=new No:(dt=No.zpp_pool,No.zpp_pool=dt.next,dt.next=null),dt.zip_listeners=!0,jo.setlt(ht,ct)?(dt.a=ht,dt.b=ct):(dt.a=ct,dt.b=ht),t.try_insert(dt);ut=ut.next}for(;null!=He.head;){var _t,yt=He.pop_unsafe();if(yt.validate(),yt.validate(),jo.single_intersection(yt,yt,i))null==No.zpp_pool?_t=new No:(_t=No.zpp_pool,No.zpp_pool=_t.next,_t.next=null),_t.zip_listeners=!0,jo.setlt(yt,yt),_t.a=yt,_t.b=yt,t.try_insert(_t);for(var xt=He.head;null!=xt;){var mt,ft=xt.elt;if(yt.validate(),ft.validate(),jo.single_intersection(yt,ft,i))null==No.zpp_pool?mt=new No:(mt=No.zpp_pool,No.zpp_pool=mt.next,mt.next=null),mt.zip_listeners=!0,jo.setlt(yt,ft)?(mt.a=yt,mt.b=ft):(mt.a=ft,mt.b=yt),t.try_insert(mt);xt=xt.next}}for(var vt=a.head;null!=vt;){for(var gt=vt.elt.cbsets,zt=ri.UCbSet,bt=ri.VCbSet,wt=ri.WCbSet,St=Fe.cbsets.head,Ct=gt.head;null!=St&&null!=Ct;){var Mt=St.elt,Pt=Ct.elt;if(Mt==Pt){var kt;null==Xi.zpp_pool?kt=new Xi:(kt=Xi.zpp_pool,Xi.zpp_pool=kt.next,kt.next=null),kt.elt=Mt;var Tt=kt;Tt.next=wt.head,wt.head=Tt,wt.modified=!0,wt.length++,St=St.next,Ct=Ct.next}else if(jo.setlt(Mt,Pt)){var Gt;null==Xi.zpp_pool?Gt=new Xi:(Gt=Xi.zpp_pool,Xi.zpp_pool=Gt.next,Gt.next=null),Gt.elt=Mt;var Ot=Gt;Ot.next=zt.head,zt.head=Ot,zt.modified=!0,zt.length++,St=St.next}else{var At;null==Xi.zpp_pool?At=new Xi:(At=Xi.zpp_pool,Xi.zpp_pool=At.next,At.next=null),At.elt=Pt;var Et=At;Et.next=bt.head,bt.head=Et,bt.modified=!0,bt.length++,Ct=Ct.next}}for(;null!=St;){var It,Bt=St.elt;null==Xi.zpp_pool?It=new Xi:(It=Xi.zpp_pool,Xi.zpp_pool=It.next,It.next=null),It.elt=Bt;var Lt=It;Lt.next=zt.head,zt.head=Lt,zt.modified=!0,zt.length++,St=St.next}for(;null!=Ct;){var Dt,Rt=Ct.elt;null==Xi.zpp_pool?Dt=new Xi:(Dt=Xi.zpp_pool,Xi.zpp_pool=Dt.next,Dt.next=null),Dt.elt=Rt;var Ft=Dt;Ft.next=bt.head,bt.head=Ft,bt.modified=!0,bt.length++,Ct=Ct.next}for(;null!=zt.head;)for(var jt=zt.pop_unsafe(),Nt=gt.head;null!=Nt;){var Ut,Ht=Nt.elt;if(jt.validate(),Ht.validate(),jo.single_intersection(jt,Ht,i))null==No.zpp_pool?Ut=new No:(Ut=No.zpp_pool,No.zpp_pool=Ut.next,Ut.next=null),Ut.zip_listeners=!0,jo.setlt(jt,Ht)?(Ut.a=jt,Ut.b=Ht):(Ut.a=Ht,Ut.b=jt),t.try_insert(Ut);Nt=Nt.next}for(;null!=bt.head;)for(var Vt=bt.pop_unsafe(),Wt=wt.head;null!=Wt;){var Xt,qt=Wt.elt;if(Vt.validate(),qt.validate(),jo.single_intersection(Vt,qt,i))null==No.zpp_pool?Xt=new No:(Xt=No.zpp_pool,No.zpp_pool=Xt.next,Xt.next=null),Xt.zip_listeners=!0,jo.setlt(Vt,qt)?(Xt.a=Vt,Xt.b=qt):(Xt.a=qt,Xt.b=Vt),t.try_insert(Xt);Wt=Wt.next}for(;null!=wt.head;){var Yt,Zt=wt.pop_unsafe();if(Zt.validate(),Zt.validate(),jo.single_intersection(Zt,Zt,i))null==No.zpp_pool?Yt=new No:(Yt=No.zpp_pool,No.zpp_pool=Yt.next,Yt.next=null),Yt.zip_listeners=!0,jo.setlt(Zt,Zt),Yt.a=Zt,Yt.b=Zt,t.try_insert(Yt);for(var Kt=wt.head;null!=Kt;){var Jt,Qt=Kt.elt;if(Zt.validate(),Qt.validate(),jo.single_intersection(Zt,Qt,i))null==No.zpp_pool?Jt=new No:(Jt=No.zpp_pool,No.zpp_pool=Jt.next,Jt.next=null),Jt.zip_listeners=!0,jo.setlt(Zt,Qt)?(Jt.a=Zt,Jt.b=Qt):(Jt.a=Qt,Jt.b=Zt),t.try_insert(Jt);Kt=Kt.next}}vt=vt.next}}if(null!=t.parent){for(var $t=t.parent;null!=$t;)if(null!=$t.prev)$t=$t.prev;else if(null!=$t.next)$t=$t.next;else{var ei=$t.data;e?i.space.freshListenerType(ei.a,ei.b):i.space.nullListenerType(ei.a,ei.b),ei.a=ei.b=null,ei.listeners.clear(),ei.next=No.zpp_pool,No.zpp_pool=ei;var ti=$t.parent;null!=ti&&($t==ti.prev?ti.prev=null:ti.next=null,$t.parent=null);var ii=$t;ii.data=null,ii.lt=null,ii.swapped=null,ii.next=Un.zpp_pool,Un.zpp_pool=ii,$t=ti}t.parent=null}var ni=t;ni.data=null,ni.lt=null,ni.swapped=null,ni.next=Un.zpp_pool,Un.zpp_pool=ni},ri.prototype.with_union=function(e){for(var t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){var n=t.elt,r=i.elt;n==r?(e(n),t=t.next,i=i.next):n.id<r.id?(e(n),t=t.next):(e(r),i=i.next)}for(;null!=t;)e(t.elt),t=t.next;for(;null!=i;)e(i.elt),i=i.next},ri.prototype.addedToSpace=function(){for(var e=this,t=3==this.type,i=this.options1.includes.head,n=this.options2.includes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r==o){for(var a=null,s=r.listeners.head;null!=s;){var p=s.elt;if(e.precedence>p.precedence||e.precedence==p.precedence&&e.id>p.id)break;s=(a=s).next}var l,h=r.listeners;null==Ko.zpp_pool?l=new Ko:(l=Ko.zpp_pool,Ko.zpp_pool=l.next,l.next=null),l.elt=e;var u=l;null==a?(u.next=h.head,h.head=u):(u.next=a.next,a.next=u),h.pushmod=h.modified=!0,h.length++;for(var d=r.cbsets.head;null!=d;){var c=d.elt;c.zip_listeners=!0,c.invalidate_pairs(),d=d.next}if(t)for(var _=r.interactors.head;null!=_;)_.elt.wake(),_=_.next;i=i.next,n=n.next}else if(r.id<o.id){for(var y=null,x=r.listeners.head;null!=x;){var m=x.elt;if(e.precedence>m.precedence||e.precedence==m.precedence&&e.id>m.id)break;x=(y=x).next}var f,v=r.listeners;null==Ko.zpp_pool?f=new Ko:(f=Ko.zpp_pool,Ko.zpp_pool=f.next,f.next=null),f.elt=e;var g=f;null==y?(g.next=v.head,v.head=g):(g.next=y.next,y.next=g),v.pushmod=v.modified=!0,v.length++;for(var z=r.cbsets.head;null!=z;){var b=z.elt;b.zip_listeners=!0,b.invalidate_pairs(),z=z.next}if(t)for(var w=r.interactors.head;null!=w;)w.elt.wake(),w=w.next;i=i.next}else{for(var S=null,C=o.listeners.head;null!=C;){var M=C.elt;if(e.precedence>M.precedence||e.precedence==M.precedence&&e.id>M.id)break;C=(S=C).next}var P,k=o.listeners;null==Ko.zpp_pool?P=new Ko:(P=Ko.zpp_pool,Ko.zpp_pool=P.next,P.next=null),P.elt=e;var T=P;null==S?(T.next=k.head,k.head=T):(T.next=S.next,S.next=T),k.pushmod=k.modified=!0,k.length++;for(var G=o.cbsets.head;null!=G;){var O=G.elt;O.zip_listeners=!0,O.invalidate_pairs(),G=G.next}if(t)for(var A=o.interactors.head;null!=A;)A.elt.wake(),A=A.next;n=n.next}}for(;null!=i;){for(var E=i.elt,I=null,B=E.listeners.head;null!=B;){var L=B.elt;if(e.precedence>L.precedence||e.precedence==L.precedence&&e.id>L.id)break;B=(I=B).next}var D,R=E.listeners;null==Ko.zpp_pool?D=new Ko:(D=Ko.zpp_pool,Ko.zpp_pool=D.next,D.next=null),D.elt=e;var F=D;null==I?(F.next=R.head,R.head=F):(F.next=I.next,I.next=F),R.pushmod=R.modified=!0,R.length++;for(var j=E.cbsets.head;null!=j;){var N=j.elt;N.zip_listeners=!0,N.invalidate_pairs(),j=j.next}if(t)for(var U=E.interactors.head;null!=U;)U.elt.wake(),U=U.next;i=i.next}for(;null!=n;){for(var H=n.elt,V=null,W=H.listeners.head;null!=W;){var X=W.elt;if(e.precedence>X.precedence||e.precedence==X.precedence&&e.id>X.id)break;W=(V=W).next}var q,Y=H.listeners;null==Ko.zpp_pool?q=new Ko:(q=Ko.zpp_pool,Ko.zpp_pool=q.next,q.next=null),q.elt=e;var Z=q;null==V?(Z.next=Y.head,Y.head=Z):(Z.next=V.next,V.next=Z),Y.pushmod=Y.modified=!0,Y.length++;for(var K=H.cbsets.head;null!=K;){var J=K.elt;J.zip_listeners=!0,J.invalidate_pairs(),K=K.next}if(t)for(var Q=H.interactors.head;null!=Q;)Q.elt.wake(),Q=Q.next;n=n.next}this.options1.handler=$(this,this.cbtype_change1),this.options2.handler=$(this,this.cbtype_change2),this.with_uniquesets(!0)},ri.prototype.removedFromSpace=function(){this.with_uniquesets(!1);for(var e=3==this.type,t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){var n=t.elt,r=i.elt;if(n==r){n.listeners.remove(this);for(var o=n.cbsets.head;null!=o;){var a=o.elt;a.zip_listeners=!0,a.invalidate_pairs(),o=o.next}if(e)for(var s=n.interactors.head;null!=s;)s.elt.wake(),s=s.next;t=t.next,i=i.next}else if(n.id<r.id){n.listeners.remove(this);for(var p=n.cbsets.head;null!=p;){var l=p.elt;l.zip_listeners=!0,l.invalidate_pairs(),p=p.next}if(e)for(var h=n.interactors.head;null!=h;)h.elt.wake(),h=h.next;t=t.next}else{r.listeners.remove(this);for(var u=r.cbsets.head;null!=u;){var d=u.elt;d.zip_listeners=!0,d.invalidate_pairs(),u=u.next}if(e)for(var c=r.interactors.head;null!=c;)c.elt.wake(),c=c.next;i=i.next}}for(;null!=t;){var _=t.elt;_.listeners.remove(this);for(var y=_.cbsets.head;null!=y;){var x=y.elt;x.zip_listeners=!0,x.invalidate_pairs(),y=y.next}if(e)for(var m=_.interactors.head;null!=m;)m.elt.wake(),m=m.next;t=t.next}for(;null!=i;){var f=i.elt;f.listeners.remove(this);for(var v=f.cbsets.head;null!=v;){var g=v.elt;g.zip_listeners=!0,g.invalidate_pairs(),v=v.next}if(e)for(var z=f.interactors.head;null!=z;)z.elt.wake(),z=z.next;i=i.next}this.options1.handler=null,this.options2.handler=null},ri.prototype.invalidate_precedence=function(){var e=this;if(null!=this.space){for(var t=3==this.type,i=this.options1.includes.head,n=this.options2.includes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r==o){r.listeners.remove(e);for(var a=r.cbsets.head;null!=a;){var s=a.elt;s.zip_listeners=!0,s.invalidate_pairs(),a=a.next}for(var p=null,l=r.listeners.head;null!=l;){var h=l.elt;if(e.precedence>h.precedence||e.precedence==h.precedence&&e.id>h.id)break;l=(p=l).next}var u,d=r.listeners;null==Ko.zpp_pool?u=new Ko:(u=Ko.zpp_pool,Ko.zpp_pool=u.next,u.next=null),u.elt=e;var c=u;null==p?(c.next=d.head,d.head=c):(c.next=p.next,p.next=c),d.pushmod=d.modified=!0,d.length++;for(var _=r.cbsets.head;null!=_;){var y=_.elt;y.zip_listeners=!0,y.invalidate_pairs(),_=_.next}if(t)for(var x=r.interactors.head;null!=x;)x.elt.wake(),x=x.next;i=i.next,n=n.next}else if(r.id<o.id){r.listeners.remove(e);for(var m=r.cbsets.head;null!=m;){var f=m.elt;f.zip_listeners=!0,f.invalidate_pairs(),m=m.next}for(var v=null,g=r.listeners.head;null!=g;){var z=g.elt;if(e.precedence>z.precedence||e.precedence==z.precedence&&e.id>z.id)break;g=(v=g).next}var b,w=r.listeners;null==Ko.zpp_pool?b=new Ko:(b=Ko.zpp_pool,Ko.zpp_pool=b.next,b.next=null),b.elt=e;var S=b;null==v?(S.next=w.head,w.head=S):(S.next=v.next,v.next=S),w.pushmod=w.modified=!0,w.length++;for(var C=r.cbsets.head;null!=C;){var M=C.elt;M.zip_listeners=!0,M.invalidate_pairs(),C=C.next}if(t)for(var P=r.interactors.head;null!=P;)P.elt.wake(),P=P.next;i=i.next}else{o.listeners.remove(e);for(var k=o.cbsets.head;null!=k;){var T=k.elt;T.zip_listeners=!0,T.invalidate_pairs(),k=k.next}for(var G=null,O=o.listeners.head;null!=O;){var A=O.elt;if(e.precedence>A.precedence||e.precedence==A.precedence&&e.id>A.id)break;O=(G=O).next}var E,I=o.listeners;null==Ko.zpp_pool?E=new Ko:(E=Ko.zpp_pool,Ko.zpp_pool=E.next,E.next=null),E.elt=e;var B=E;null==G?(B.next=I.head,I.head=B):(B.next=G.next,G.next=B),I.pushmod=I.modified=!0,I.length++;for(var L=o.cbsets.head;null!=L;){var D=L.elt;D.zip_listeners=!0,D.invalidate_pairs(),L=L.next}if(t)for(var R=o.interactors.head;null!=R;)R.elt.wake(),R=R.next;n=n.next}}for(;null!=i;){var F=i.elt;F.listeners.remove(e);for(var j=F.cbsets.head;null!=j;){var N=j.elt;N.zip_listeners=!0,N.invalidate_pairs(),j=j.next}for(var U=null,H=F.listeners.head;null!=H;){var V=H.elt;if(e.precedence>V.precedence||e.precedence==V.precedence&&e.id>V.id)break;H=(U=H).next}var W,X=F.listeners;null==Ko.zpp_pool?W=new Ko:(W=Ko.zpp_pool,Ko.zpp_pool=W.next,W.next=null),W.elt=e;var q=W;null==U?(q.next=X.head,X.head=q):(q.next=U.next,U.next=q),X.pushmod=X.modified=!0,X.length++;for(var Y=F.cbsets.head;null!=Y;){var Z=Y.elt;Z.zip_listeners=!0,Z.invalidate_pairs(),Y=Y.next}if(t)for(var K=F.interactors.head;null!=K;)K.elt.wake(),K=K.next;i=i.next}for(;null!=n;){var J=n.elt;J.listeners.remove(e);for(var Q=J.cbsets.head;null!=Q;){var $=Q.elt;$.zip_listeners=!0,$.invalidate_pairs(),Q=Q.next}for(var ee=null,te=J.listeners.head;null!=te;){var ie=te.elt;if(e.precedence>ie.precedence||e.precedence==ie.precedence&&e.id>ie.id)break;te=(ee=te).next}var ne,re=J.listeners;null==Ko.zpp_pool?ne=new Ko:(ne=Ko.zpp_pool,Ko.zpp_pool=ne.next,ne.next=null),ne.elt=e;var oe=ne;null==ee?(oe.next=re.head,re.head=oe):(oe.next=ee.next,ee.next=oe),re.pushmod=re.modified=!0,re.length++;for(var ae=J.cbsets.head;null!=ae;){var se=ae.elt;se.zip_listeners=!0,se.invalidate_pairs(),ae=ae.next}if(t)for(var pe=J.interactors.head;null!=pe;)pe.elt.wake(),pe=pe.next;n=n.next}}},ri.prototype.cbtype_change1=function(e,t,i){this.cbtype_change(this.options1,e,t,i)},ri.prototype.cbtype_change2=function(e,t,i){this.cbtype_change(this.options2,e,t,i)},ri.prototype.cbtype_change=function(e,t,i,n){if(this.removedFromSpace(),i)if(n){for(var r=null,o=e.includes.head;null!=o&&!(t.id<o.elt.id);)o=(r=o).next;var a,s=e.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=t;var p=a;null==r?(p.next=s.head,s.head=p):(p.next=r.next,r.next=p),s.pushmod=s.modified=!0,s.length++}else e.includes.remove(t);else if(n){for(var l=null,h=e.excludes.head;null!=h&&!(t.id<h.elt.id);)h=(l=h).next;var u,d=e.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=t;var c=u;null==l?(c.next=d.head,d.head=c):(c.next=l.next,l.next=c),d.pushmod=d.modified=!0,d.length++}else e.excludes.remove(t);this.addedToSpace()},ri.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},ri.prototype.__class__=ri;var je=zpp_nape.callbacks.ZPP_OptionType=function(){this.wrap_excludes=null,this.wrap_includes=null,this.excludes=null,this.includes=null,this.handler=null,this.outer=null,this.includes=new Fe,this.excludes=new Fe};je.__name__=["zpp_nape","callbacks","ZPP_OptionType"],je.argument=function(e){return null==e?new f:ve.__instanceof(e,f)?e:(new f).including(e)},je.prototype.outer=null,je.prototype.handler=null,je.prototype.includes=null,je.prototype.excludes=null,je.prototype.wrap_includes=null,je.prototype.wrap_excludes=null,je.prototype.setup_includes=function(){this.wrap_includes=Tn.get(this.includes,!0)},je.prototype.setup_excludes=function(){this.wrap_excludes=Tn.get(this.excludes,!0)},je.prototype.excluded=function(e){return this.nonemptyintersection(e,this.excludes)},je.prototype.included=function(e){return this.nonemptyintersection(e,this.includes)},je.prototype.compatible=function(e){return!!this.nonemptyintersection(e,this.includes)&&!this.nonemptyintersection(e,this.excludes)},je.prototype.nonemptyintersection=function(e,t){for(var i=!1,n=e.head,r=t.head;null!=r&&null!=n;){var o=r.elt,a=n.elt;if(o==a){i=!0;break}o.id<a.id?r=r.next:n=n.next}return i},je.prototype.effect_change=function(e,t,i){if(t)if(i){for(var n=null,r=this.includes.head;null!=r&&!(e.id<r.elt.id);)r=(n=r).next;var o,a=this.includes;null==ji.zpp_pool?o=new ji:(o=ji.zpp_pool,ji.zpp_pool=o.next,o.next=null),o.elt=e;var s=o;null==n?(s.next=a.head,a.head=s):(s.next=n.next,n.next=s),a.pushmod=a.modified=!0,a.length++}else this.includes.remove(e);else if(i){for(var p=null,l=this.excludes.head;null!=l&&!(e.id<l.elt.id);)l=(p=l).next;var h,u=this.excludes;null==ji.zpp_pool?h=new ji:(h=ji.zpp_pool,ji.zpp_pool=h.next,h.next=null),h.elt=e;var d=h;null==p?(d.next=u.head,u.head=d):(d.next=p.next,p.next=d),u.pushmod=u.modified=!0,u.length++}else this.excludes.remove(e)},je.prototype.append_type=function(e,t){if(e==this.includes){if(!this.includes.has(t))if(this.excludes.has(t))null!=this.handler?this.handler(t,!1,!1):this.excludes.remove(t);else if(null!=this.handler)this.handler(t,!0,!0);else{for(var i=null,n=this.includes.head;null!=n&&!(t.id<n.elt.id);)n=(i=n).next;var r,o=this.includes;null==ji.zpp_pool?r=new ji:(r=ji.zpp_pool,ji.zpp_pool=r.next,r.next=null),r.elt=t;var a=r;null==i?(a.next=o.head,o.head=a):(a.next=i.next,i.next=a),o.pushmod=o.modified=!0,o.length++}}else if(!this.excludes.has(t))if(this.includes.has(t))null!=this.handler?this.handler(t,!0,!1):this.includes.remove(t);else if(null!=this.handler)this.handler(t,!1,!0);else{for(var s=null,p=this.excludes.head;null!=p&&!(t.id<p.elt.id);)p=(s=p).next;var l,h=this.excludes;null==ji.zpp_pool?l=new ji:(l=ji.zpp_pool,ji.zpp_pool=l.next,l.next=null),l.elt=t;var u=l;null==s?(u.next=h.head,h.head=u):(u.next=s.next,s.next=u),h.pushmod=h.modified=!0,h.length++}},je.prototype.set=function(e){if(e!=this){for(;null!=this.includes.head;)this.append_type(this.excludes,this.includes.head.elt);for(;null!=this.excludes.head;)this.append_type(this.includes,this.excludes.head.elt);for(var t=e.excludes.head;null!=t;)this.append_type(this.excludes,t.elt),t=t.next;for(var i=e.includes.head;null!=i;)this.append_type(this.includes,i.elt),i=i.next}return this},je.prototype.append=function(e,t){if(ve.__instanceof(t,c)){var i=t;this.append_type(e,i.zpp_inner)}else if(ve.__instanceof(t,y)){var n=t;n.zpp_inner.valmod();for(var r=He.get(n);;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner;o.zpp_inner.valmod(),o.zpp_inner.zip_length&&(o.zpp_inner.zip_length=!1,o.zpp_inner.user_length=o.zpp_inner.inner.length);var a=o.zpp_inner.user_length;if(r.zpp_critical=!0,!(r.zpp_i<a||(r.zpp_next=He.zpp_pool,(He.zpp_pool=r).zpp_inner=null,!1)))break;r.zpp_critical=!1,this.append_type(e,r.zpp_inner.at(r.zpp_i++).zpp_inner)}}else if(t instanceof Array&&null==t.__enum__)for(var s=t,p=0;p<s.length;){var l=s[p];++p;var h=l;this.append_type(e,h.zpp_inner)}},je.prototype.__class__=je;var Ne=zpp_nape.constraint.ZPP_Constraint=function(){this.pre_dt=0,this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.__velocity=!1,this.ignore=!1,this.component=null,this.removeOnBreak=!1,this.breakUnderError=!1,this.breakUnderForce=!1,this.maxError=0,this.maxForce=0,this.damping=0,this.frequency=0,this.stiff=!1,this.active=!1,this.space=null,this.compound=null,this.userData=null,this.id=0,this.outer=null,this.__velocity=!1,this.id=ke.Constraint(),this.stiff=!0,this.active=!0,this.ignore=!1,this.frequency=10,this.damping=1,this.maxForce=1/0,this.maxError=1/0,this.breakUnderForce=!1,this.removeOnBreak=!0,this.pre_dt=-1,this.cbTypes=new Fe};Ne.__name__=["zpp_nape","constraint","ZPP_Constraint"],Ne.prototype.outer=null,Ne.prototype.clear=function(){},Ne.prototype.id=null,Ne.prototype.userData=null,Ne.prototype.compound=null,Ne.prototype.space=null,Ne.prototype.active=null,Ne.prototype.stiff=null,Ne.prototype.frequency=null,Ne.prototype.damping=null,Ne.prototype.maxForce=null,Ne.prototype.maxError=null,Ne.prototype.breakUnderForce=null,Ne.prototype.breakUnderError=null,Ne.prototype.removeOnBreak=null,Ne.prototype.component=null,Ne.prototype.ignore=null,Ne.prototype.__velocity=null,Ne.prototype.immutable_midstep=function(e){},Ne.prototype.cbTypes=null,Ne.prototype.cbSet=null,Ne.prototype.wrap_cbTypes=null,Ne.prototype.setupcbTypes=function(){this.wrap_cbTypes=Tn.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0},Ne.prototype.wrap_cbTypes_subber=function(e){var t=e.zpp_inner;this.cbTypes.has(t)&&(null!=this.space&&(this.dealloc_cbSet(),t.constraints.remove(this)),this.cbTypes.remove(t),null!=this.space&&(this.alloc_cbSet(),this.wake()))},Ne.prototype.wrap_cbTypes_adder=function(e){return this.insert_cbtype(e.zpp_inner),!1},Ne.prototype.insert_cbtype=function(e){if(!this.cbTypes.has(e)){null!=this.space&&(this.dealloc_cbSet(),e.constraints.add(this));for(var t=null,i=this.cbTypes.head;null!=i&&!(e.id<i.elt.id);)i=(t=i).next;var n,r=this.cbTypes;null==ji.zpp_pool?n=new ji:(n=ji.zpp_pool,ji.zpp_pool=n.next,n.next=null),n.elt=e;var o=n;null==t?(o.next=r.head,r.head=o):(o.next=t.next,t.next=o),r.pushmod=r.modified=!0,r.length++,null!=this.space&&(this.alloc_cbSet(),this.wake())}},Ne.prototype.alloc_cbSet=function(){null!=(this.cbSet=this.space.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.constraints.add(this))},Ne.prototype.dealloc_cbSet=function(){if(null!=this.cbSet){if(this.cbSet.constraints.remove(this),0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var e=this.cbSet;for(e.listeners.clear(),e.zip_listeners=!0,e.bodylisteners.clear(),e.zip_bodylisteners=!0,e.conlisteners.clear(),e.zip_conlisteners=!0;null!=e.cbTypes.head;)e.cbTypes.pop_unsafe().cbsets.remove(e);e.next=jo.zpp_pool,jo.zpp_pool=e}this.cbSet=null}},Ne.prototype.activate=function(){null!=this.space&&this.activeInSpace()},Ne.prototype.deactivate=function(){null!=this.space&&this.inactiveOrOutSpace()},Ne.prototype.addedToSpace=function(){this.active&&this.activeInSpace(),this.activeBodies();for(var e=this.cbTypes.head;null!=e;)e.elt.constraints.add(this),e=e.next},Ne.prototype.removedFromSpace=function(){this.active&&this.inactiveOrOutSpace(),this.inactiveBodies();for(var e=this.cbTypes.head;null!=e;)e.elt.constraints.remove(this),e=e.next},Ne.prototype.activeInSpace=function(){this.alloc_cbSet(),null==oi.zpp_pool?this.component=new oi:(this.component=oi.zpp_pool,oi.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!1,this.component.constraint=this},Ne.prototype.inactiveOrOutSpace=function(){this.dealloc_cbSet();var e=this.component;e.body=null,e.constraint=null,e.next=oi.zpp_pool,oi.zpp_pool=e,this.component=null},Ne.prototype.activeBodies=function(){},Ne.prototype.inactiveBodies=function(){},Ne.prototype.clearcache=function(){},Ne.prototype.validate=function(){},Ne.prototype.wake_connected=function(){},Ne.prototype.forest=function(){},Ne.prototype.pair_exists=function(e,t){return!1},Ne.prototype.broken=function(){},Ne.prototype.warmStart=function(){},Ne.prototype.pre_dt=null,Ne.prototype.preStep=function(e){return!1},Ne.prototype.applyImpulseVel=function(){return!1},Ne.prototype.applyImpulsePos=function(){return!1},Ne.prototype.wake=function(){null!=this.space&&this.space.wake_constraint(this)},Ne.prototype.draw=function(e){},Ne.prototype.copy=function(e,t){return null},Ne.prototype.copyto=function(e){var t=this.outer;null==t.zpp_inner.wrap_cbTypes&&t.zpp_inner.setupcbTypes();var i=t.zpp_inner.wrap_cbTypes;i.zpp_inner.valmod();for(var n=He.get(i);;){n.zpp_inner.zpp_inner.valmod();var r=n.zpp_inner;r.zpp_inner.valmod(),r.zpp_inner.zip_length&&(r.zpp_inner.zip_length=!1,r.zpp_inner.user_length=r.zpp_inner.inner.length);var o=r.zpp_inner.user_length;if(n.zpp_critical=!0,!(n.zpp_i<o||(n.zpp_next=He.zpp_pool,(He.zpp_pool=n).zpp_inner=null,!1)))break;n.zpp_critical=!1;var a=n.zpp_inner.at(n.zpp_i++);null==e.zpp_inner.wrap_cbTypes&&e.zpp_inner.setupcbTypes();var s=e.zpp_inner.wrap_cbTypes;s.zpp_inner.reverse_flag?s.push(a):s.unshift(a)}e.zpp_inner.removeOnBreak=t.zpp_inner.removeOnBreak;var p=t.zpp_inner.breakUnderError;e.zpp_inner.breakUnderError!=p&&(e.zpp_inner.breakUnderError=p,e.zpp_inner.wake());var l=t.zpp_inner.breakUnderForce;e.zpp_inner.breakUnderForce!=l&&(e.zpp_inner.breakUnderForce=l,e.zpp_inner.wake());var h=t.zpp_inner.maxError;e.zpp_inner.maxError!=h&&(e.zpp_inner.maxError=h,e.zpp_inner.wake());var u=t.zpp_inner.maxForce;e.zpp_inner.maxForce!=u&&(e.zpp_inner.maxForce=u,e.zpp_inner.wake());var d=t.zpp_inner.damping;e.zpp_inner.damping!=d&&(e.zpp_inner.damping=d,e.zpp_inner.stiff||e.zpp_inner.wake());var c=t.zpp_inner.frequency;e.zpp_inner.frequency!=c&&(e.zpp_inner.frequency=c,e.zpp_inner.stiff||e.zpp_inner.wake());var _=t.zpp_inner.stiff;e.zpp_inner.stiff!=_&&(e.zpp_inner.stiff=_,e.zpp_inner.wake());var y=t.zpp_inner.ignore;e.zpp_inner.ignore!=y&&(e.zpp_inner.ignore=y,e.zpp_inner.wake());var x=t.zpp_inner.active;e.zpp_inner.active!=x&&(null!=e.zpp_inner.component&&(e.zpp_inner.component.woken=!1),e.zpp_inner.clearcache(),x?(e.zpp_inner.active=x,e.zpp_inner.activate(),null!=e.zpp_inner.space&&(null!=e.zpp_inner.component&&(e.zpp_inner.component.sleeping=!0),e.zpp_inner.space.wake_constraint(e.zpp_inner,!0))):(null!=e.zpp_inner.space&&(e.zpp_inner.wake(),e.zpp_inner.space.live_constraints.remove(e.zpp_inner)),e.zpp_inner.active=x,e.zpp_inner.deactivate()))},Ne.prototype.__class__=Ne;var Ue=zpp_nape.constraint.ZPP_AngleJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.scale=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=0,this.outer_zn=null,Ne.call(this),this.ratio=1,this.jAcc=0,this.slack=!1,this.jMax=1/0,this.stepped=!1};Ue.__name__=["zpp_nape","constraint","ZPP_AngleJoint"],Ue.__super__=Ne,Ue.prototype=Object.create(Ne.prototype),Ue.prototype.outer_zn=null,Ue.prototype.ratio=null,Ue.prototype.jointMin=null,Ue.prototype.jointMax=null,Ue.prototype.slack=null,Ue.prototype.equal=null,Ue.prototype.scale=null,Ue.prototype.is_slack=function(){var e,t=this.ratio*this.b2.rot-this.b1.rot;return this.equal?(e=!1,this.scale=1):e=t<this.jointMin?!(this.scale=-1):t>this.jointMax?(t-=this.jointMax,!(this.scale=1)):!(t=this.scale=0),e},Ue.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?K.get(0,0,-this.scale*this.jAcc):K.get(0,0,this.ratio*this.scale*this.jAcc):K.get(0,0,0)},Ue.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},Ue.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},Ue.prototype.b1=null,Ue.prototype.b2=null,Ue.prototype.kMass=null,Ue.prototype.jAcc=null,Ue.prototype.jMax=null,Ue.prototype.gamma=null,Ue.prototype.bias=null,Ue.prototype.stepped=null,Ue.prototype.copy=function(e,t){var i=new z(null,null,this.jointMin,this.jointMax,this.ratio);if(this.copyto(i),null!=e&&null!=this.b1){for(var n=null,r=0;r<e.length;){var o=e[r];if(++r,o.id==this.b1.id){n=o.bc;break}}null!=n?i.zpp_inner_zn.b1=n.zpp_inner:t.push(rt.todo(this.b1.id,function(e){i.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b2.id){a=p.bc;break}}null!=a?i.zpp_inner_zn.b2=a.zpp_inner:t.push(rt.todo(this.b2.id,function(e){i.zpp_inner_zn.b2=e.zpp_inner}))}return i},Ue.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: AngleJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: AngleJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},Ue.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},Ue.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var f=x.parent;x.parent=m,m=x,x=f}for(;null!=m;){var v=m.parent;m.parent=x,m=v}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},Ue.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},Ue.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1,this.slack=!1},Ue.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax;var i=this.ratio*this.b2.rot-this.b1.rot;this.equal?(i-=this.jointMax,this.slack=!1,this.scale=1):i<this.jointMin?(i=this.jointMin-i,this.scale=-1,this.slack=!1):i>this.jointMax?(i-=this.jointMax,this.scale=1,this.slack=!1):(i=this.scale=0,this.slack=!0);var n=i;if(!this.slack){if(this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&n*n>this.maxError*this.maxError)return!0;var r,o=2*Math.PI*this.frequency;this.gamma=1/(e*o*(2*this.damping+o*e));var a=1/(1+this.gamma);r=e*o*o*this.gamma,this.gamma*=a,this.kMass*=a,this.bias=-n*r,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},Ue.prototype.warmStart=function(){this.slack||(this.b1.angvel-=this.scale*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*this.jAcc)},Ue.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-this.scale*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel))-this.jAcc*this.gamma,t=this.jAcc;return this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),!(!this.breakUnderForce||!(this.jAcc>this.jMax||this.jAcc<-this.jMax))||(this.stiff||(this.jAcc>this.jMax?this.jAcc=this.jMax:this.jAcc<-this.jMax&&(this.jAcc=-this.jMax)),e=this.jAcc-t,this.b1.angvel-=this.scale*this.b1.iinertia*e,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*e,!1)},Ue.prototype.applyImpulsePos=function(){var e,t,i,n=this.ratio*this.b2.rot-this.b1.rot;if(this.equal?(n-=this.jointMax,i=!1,this.scale=1):i=n<this.jointMin?(n=this.jointMin-n,!(this.scale=-1)):n>this.jointMax?(n-=this.jointMax,!(this.scale=1)):!(n=this.scale=0),e=n,!i){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(t=-(e*=.5)*this.kMass,this.equal||t<0){var r=this.b1,o=-this.scale*t*this.b1.iinertia;if(r.rot+=o,1e-4<o*o)r.axisx=Math.sin(r.rot),r.axisy=Math.cos(r.rot);else{var a=o*o,s=1-.5*a,p=1-a*a/8,l=(s*r.axisx+o*r.axisy)*p;r.axisy=(s*r.axisy-o*r.axisx)*p,r.axisx=l}var h=this.b2,u=this.ratio*this.scale*t*this.b2.iinertia;if(h.rot+=u,1e-4<u*u)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var d=u*u,c=1-.5*d,_=1-d*d/8,y=(c*h.axisx+u*h.axisy)*_;h.axisy=(c*h.axisy-u*h.axisx)*_,h.axisx=y}}}return!1},Ue.prototype.draw=function(e){},Ue.prototype.__class__=Ue;var rt=zpp_nape.constraint.ZPP_CopyHelper=function(){this.cb=null,this.bc=null,this.id=0};rt.__name__=["zpp_nape","constraint","ZPP_CopyHelper"],rt.dict=function(e,t){var i=new rt;return i.id=e,i.bc=t,i},rt.todo=function(e,t){var i=new rt;return i.id=e,i.cb=t,i},rt.prototype.id=null,rt.prototype.bc=null,rt.prototype.cb=null,rt.prototype.__class__=rt;var ot=zpp_nape.constraint.ZPP_DistanceJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx2=0,this.cx1=0,this.ny=0,this.nx=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=0};ot.__name__=["zpp_nape","constraint","ZPP_DistanceJoint"],ot.__super__=Ne,ot.prototype=Object.create(Ne.prototype),ot.prototype.outer_zn=null,ot.prototype.jointMin=null,ot.prototype.jointMax=null,ot.prototype.slack=null,ot.prototype.equal=null,ot.prototype.is_slack=function(){var e;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var t=0,i=0,n=(t=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx))*t+(i=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely))*i;if(n<Qs.epsilon)e=!0;else{var r=1/(n=Math.sqrt(n));t*=r,i*=r,e=!this.equal&&(!(n<this.jointMin)&&(n>this.jointMax?(n-=this.jointMax,!1):!(n=i=t=0)))}return e},ot.prototype.nx=null,ot.prototype.ny=null,ot.prototype.cx1=null,ot.prototype.cx2=null,ot.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?K.get(-this.jAcc*this.nx,-this.jAcc*this.ny,-this.cx1*this.jAcc):K.get(this.jAcc*this.nx,this.jAcc*this.ny,this.cx2*this.jAcc):K.get(0,0,0)},ot.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},ot.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},ot.prototype.b1=null,ot.prototype.a1localx=null,ot.prototype.a1localy=null,ot.prototype.a1relx=null,ot.prototype.a1rely=null,ot.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},ot.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},ot.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},ot.prototype.wrap_a1=null,ot.prototype.b2=null,ot.prototype.a2localx=null,ot.prototype.a2localy=null,ot.prototype.a2relx=null,ot.prototype.a2rely=null,ot.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},ot.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},ot.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},ot.prototype.wrap_a2=null,ot.prototype.kMass=null,ot.prototype.jAcc=null,ot.prototype.jMax=null,ot.prototype.gamma=null,ot.prototype.bias=null,ot.prototype.stepped=null,ot.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new w(null,null,n,r.zpp_inner_zn.wrap_a2,this.jointMin,this.jointMax);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b1.id){a=p.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var l=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){l=u.bc;break}}null!=l?o.zpp_inner_zn.b2=l.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},ot.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: DistanceJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: DistanceJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},ot.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},ot.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var f=x.parent;x.parent=m,m=x,x=f}for(;null!=m;){var v=m.parent;m.parent=x,m=v}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},ot.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},ot.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},ot.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var i=this.nx*this.nx+this.ny*this.ny;if(i<Qs.epsilon)this.nx=0,i=this.ny=0,this.slack=!0;else{var n=1/(i=Math.sqrt(i));this.nx*=n,this.ny*=n,this.equal?(i-=this.jointMax,this.slack=!1):i<this.jointMin?(i=this.jointMin-i,this.nx=-this.nx,this.ny=-this.ny,this.slack=!1):i>this.jointMax?(i-=this.jointMax,this.slack=!1):(this.nx=0,i=this.ny=0,this.slack=!0)}var r=i;if(!this.slack){if(this.cx1=this.ny*this.a1relx-this.nx*this.a1rely,this.cx2=this.ny*this.a2relx-this.nx*this.a2rely,this.kMass=this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&r*r>this.maxError*this.maxError)return!0;var o,a=2*Math.PI*this.frequency;this.gamma=1/(e*a*(2*this.damping+a*e));var s=1/(1+this.gamma);o=e*a*a*this.gamma,this.gamma*=s,this.kMass*=s,this.bias=-r*o,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},ot.prototype.warmStart=function(){if(!this.slack){var e=this.b1.imass*this.jAcc;this.b1.velx-=this.nx*e,this.b1.vely-=this.ny*e;var t=this.b2.imass*this.jAcc;this.b2.velx+=this.nx*t,this.b2.vely+=this.ny*t,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc}},ot.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-(this.nx*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.ny*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1))-this.jAcc*this.gamma,t=this.jAcc;if(this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),e=this.jAcc-t;var i=this.b1.imass*e;this.b1.velx-=this.nx*i,this.b1.vely-=this.ny*i;var n=this.b2.imass*e;return this.b2.velx+=this.nx*n,this.b2.vely+=this.ny*n,this.b1.angvel-=this.cx1*this.b1.iinertia*e,this.b2.angvel+=this.cx2*this.b2.iinertia*e,!1},ot.prototype.applyImpulsePos=function(){var e,t,i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o,a;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var s=0,p=0,l=(s=this.b2.posx+r-(this.b1.posx+i))*s+(p=this.b2.posy+o-(this.b1.posy+n))*p;if(l<Qs.epsilon)a=!(l=p=s=0);else{var h=1/(l=Math.sqrt(l));s*=h,p*=h,a=this.equal?(l-=this.jointMax,!1):l<this.jointMin?(l=this.jointMin-l,s=-s,p=-p,!1):l>this.jointMax?(l-=this.jointMax,!1):!(l=p=s=0)}if(e=l,!a){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(e*e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;if(6<(e*=.5)*e){var u=this.b1.smass+this.b2.smass;if(u>Qs.epsilon&&(t=-e*(u=.75/u),this.equal||t<0)){var d=t*this.b1.imass;this.b1.posx-=s*d,this.b1.posy-=p*d;var c=t*this.b2.imass;this.b2.posx+=s*c,this.b2.posy+=p*c;var _=(s=this.b2.posx+r-(this.b1.posx+i))*s+(p=this.b2.posy+o-(this.b1.posy+n))*p;if(_<Qs.epsilon)_=p=s=0;else{var y=1/(_=Math.sqrt(_));s*=y,p*=y,this.equal?_-=this.jointMax:_<this.jointMin?(_=this.jointMin-_,s=-s,p=-p):_>this.jointMax?_-=this.jointMax:_=p=s=0}e=_,e*=.5}}var x,m;x=p*i-s*n,m=p*r-s*o;var f=this.b1.smass+this.b2.smass+x*x*this.b1.sinertia+m*m*this.b2.sinertia;if(0!=f&&(f=1/f),t=-e*f,this.equal||t<0){var v=this.b1.imass*t;this.b1.posx-=s*v,this.b1.posy-=p*v;var g=this.b2.imass*t;this.b2.posx+=s*g,this.b2.posy+=p*g;var z=this.b1,b=-x*this.b1.iinertia*t;if(z.rot+=b,1e-4<b*b)z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot);else{var w=b*b,S=1-.5*w,C=1-w*w/8,M=(S*z.axisx+b*z.axisy)*C;z.axisy=(S*z.axisy-b*z.axisx)*C,z.axisx=M}var P=this.b2,k=m*this.b2.iinertia*t;if(P.rot+=k,1e-4<k*k)P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot);else{var T=k*k,G=1-.5*T,O=1-T*T/8,A=(G*P.axisx+k*P.axisy)*O;P.axisy=(G*P.axisy-k*P.axisx)*O,P.axisx=A}}}return!1},ot.prototype.draw=function(e){},ot.prototype.__class__=ot;var at=zpp_nape.constraint.ZPP_LineJoint=function(){this.biasy=0,this.biasx=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_n=null,this.nrely=0,this.nrelx=0,this.nlocaly=0,this.nlocalx=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.cx2=0,this.cx1=0,this.dot2=0,this.dot1=0,this.equal=!1,this.jointMax=0,this.jointMin=0,this.scale=0,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.nlocalx=0,this.nlocaly=0,this.nrelx=0,this.nrely=0,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.jointMin=-1/0,this.jointMax=1/0,this.stepped=!1};at.__name__=["zpp_nape","constraint","ZPP_LineJoint"],at.__super__=Ne,at.prototype=Object.create(Ne.prototype),at.prototype.outer_zn=null,at.prototype.scale=null,at.prototype.jointMin=null,at.prototype.jointMax=null,at.prototype.equal=null,at.prototype.dot1=null,at.prototype.dot2=null,at.prototype.cx1=null,at.prototype.cx2=null,at.prototype.bodyImpulse=function(e){if(this.stepped){var t=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,i=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;return e==this.b1?K.get(-t,-i,this.scale*this.cx1*i-this.dot1*t):K.get(t,i,this.scale*this.cx1*i-this.dot1*t)}return K.get(0,0,0)},at.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},at.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},at.prototype.b1=null,at.prototype.a1localx=null,at.prototype.a1localy=null,at.prototype.a1relx=null,at.prototype.a1rely=null,at.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},at.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},at.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},at.prototype.wrap_a1=null,at.prototype.b2=null,at.prototype.a2localx=null,at.prototype.a2localy=null,at.prototype.a2relx=null,at.prototype.a2rely=null,at.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},at.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},at.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},at.prototype.wrap_a2=null,at.prototype.zip_n=null,at.prototype.nlocalx=null,at.prototype.nlocaly=null,at.prototype.nrelx=null,at.prototype.nrely=null,at.prototype.validate_n=function(){this.wrap_n.zpp_inner.x=this.nlocalx,this.wrap_n.zpp_inner.y=this.nlocaly},at.prototype.invalidate_n=function(e){this.immutable_midstep("Constraint::n"),this.nlocalx=e.x,this.nlocaly=e.y,this.zip_n=!0,this.wake()},at.prototype.setup_n=function(){var e,t=this.nlocalx,i=this.nlocaly;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_n=e,this.wrap_n.zpp_inner._inuse=!0,this.wrap_n.zpp_inner._validate=$(this,this.validate_n),this.wrap_n.zpp_inner._invalidate=$(this,this.invalidate_n)},at.prototype.wrap_n=null,at.prototype.validate_norm=function(){if(this.zip_n){this.zip_n=!1;var e=1/Math.sqrt(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly);this.nlocalx*=e,this.nlocaly*=e}},at.prototype.kMassa=null,at.prototype.kMassb=null,at.prototype.kMassc=null,at.prototype.jAccx=null,at.prototype.jAccy=null,at.prototype.jMax=null,at.prototype.gamma=null,at.prototype.biasx=null,at.prototype.biasy=null,at.prototype.stepped=null,at.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=r.zpp_inner_zn.wrap_a2,a=this.outer_zn;null==a.zpp_inner_zn.wrap_n&&a.zpp_inner_zn.setup_n();var s=new S(null,null,n,o,a.zpp_inner_zn.wrap_n,this.jointMin,this.jointMax);if(this.copyto(s),null!=e&&null!=this.b1){for(var p=null,l=0;l<e.length;){var h=e[l];if(++l,h.id==this.b1.id){p=h.bc;break}}null!=p?s.zpp_inner_zn.b1=p.zpp_inner:t.push(rt.todo(this.b1.id,function(e){s.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var u=null,d=0;d<e.length;){var c=e[d];if(++d,c.id==this.b2.id){u=c.bc;break}}null!=u?s.zpp_inner_zn.b2=u.zpp_inner:t.push(rt.todo(this.b2.id,function(e){s.zpp_inner_zn.b2=e.zpp_inner}))}return s},at.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: DistanceJoint must have jointMin <= jointMax");if(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly<Qs.epsilon)throw new r("Error: DistanceJoint direction must be non-degenerate");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},at.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},at.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var f=x.parent;x.parent=m,m=x,x=f}for(;null!=m;){var v=m.parent;m.parent=x,m=v}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},at.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},at.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},at.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.equal=this.jointMin==this.jointMax,this.stepped=!0,this.validate_norm(),this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.nrelx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,this.nrely=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i,n,r,o=0;i=this.b2.posx+this.a2relx-this.b1.posx-this.a1relx,r=(n=this.b2.posy+this.a2rely-this.b1.posy-this.a1rely)*this.nrelx-i*this.nrely,o=this.nrelx*i+this.nrely*n,this.equal?(o-=this.jointMin,this.scale=1):o>this.jointMax?(o-=this.jointMax,this.scale=1):o<this.jointMin?(o=this.jointMin-o,this.scale=-1):(o=0,this.scale=0);var a,s;a=i+this.a1relx,s=n+this.a1rely,this.dot1=this.nrelx*a+this.nrely*s,this.cx1=s*this.nrelx-a*this.nrely,this.dot2=this.nrelx*this.a2relx+this.nrely*this.a2rely,this.cx2=this.a2rely*this.nrelx-this.a2relx*this.nrely,this.kMassa=this.b1.smass+this.b2.smass+this.dot1*this.dot1*this.b1.sinertia+this.dot2*this.dot2*this.b2.sinertia,this.kMassb=-this.scale*(this.dot1*this.cx1*this.b1.sinertia+this.dot2*this.cx2*this.b2.sinertia),this.kMassc=this.scale*this.scale*(this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia);var p,l=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(l!=l)this.kMassa=this.kMassb=this.kMassc=0,p=3;else if(0==l){var h=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,h=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,h|=2),this.kMassb=0,p=h}else{l=1/l;var u=this.kMassc*l;this.kMassc=this.kMassa*l,this.kMassa=u,this.kMassb*=-l,p=0}if(0!=(1&p)&&(this.jAccx=0),0!=(2&p)&&(this.jAccy=0),this.stiff)this.gamma=0,this.biasx=0,this.biasy=0;else{if(this.breakUnderError&&r*r+o*o>this.maxError*this.maxError)return!0;var d,c=2*Math.PI*this.frequency;this.gamma=1/(e*c*(2*this.damping+c*e));var _=1/(1+this.gamma);d=e*c*c*this.gamma,this.gamma*=_,this.kMassa*=_,this.kMassb*=_,this.kMassc*=_,this.biasx=r,this.biasy=o;var y=-d;this.biasx*=y,this.biasy*=y;var x=this.maxError,m=this.biasx*this.biasx+this.biasy*this.biasy;if(x*x<m){var f=x*(1/Math.sqrt(m));this.biasx*=f,this.biasy*=f}}return this.jAccx*=t,this.jAccy*=t,this.jMax=this.maxForce*e,!1},at.prototype.warmStart=function(){var e=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,t=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy,i=this.b1.imass;this.b1.velx-=e*i,this.b1.vely-=t*i;var n=this.b2.imass;this.b2.velx+=e*n,this.b2.vely+=t*n,this.b1.angvel+=(this.scale*this.cx1*this.jAccy-this.dot1*this.jAccx)*this.b1.iinertia,this.b2.angvel+=(this.dot2*this.jAccx-this.scale*this.cx2*this.jAccy)*this.b2.iinertia},at.prototype.applyImpulseVel=function(){var e,t,i=0,n=0;i=this.b2.velx-this.b1.velx,n=this.b2.vely-this.b1.vely,i+=this.b2.kinvelx-this.b1.kinvelx,e=(n+=this.b2.kinvely-this.b1.kinvely)*this.nrelx-i*this.nrely+(this.b2.angvel+this.b2.kinangvel)*this.dot2-(this.b1.angvel+this.b1.kinangvel)*this.dot1,t=this.scale*(this.nrelx*i+this.nrely*n-(this.b2.angvel+this.b2.kinangvel)*this.cx2+(this.b1.angvel+this.b1.kinangvel)*this.cx1);var r=0,o=0;r=this.biasx-e,o=this.biasy-t;var a=this.kMassa*r+this.kMassb*o;o=this.kMassb*r+this.kMassc*o,r=a;var s=this.gamma;r-=this.jAccx*s,o-=this.jAccy*s;var p,l;if(p=this.jAccx,l=this.jAccy,this.jAccx+=r,this.jAccy+=o,0<this.jAccy&&(this.jAccy=0),this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){var h=this.jMax,u=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(h*h<u){var d=h*(1/Math.sqrt(u));this.jAccx*=d,this.jAccy*=d}}r=this.jAccx-p,o=this.jAccy-l;var c=this.scale*this.nrelx*o-this.nrely*r,_=this.nrelx*r+this.scale*this.nrely*o,y=this.b1.imass;this.b1.velx-=c*y,this.b1.vely-=_*y;var x=this.b2.imass;return this.b2.velx+=c*x,this.b2.vely+=_*x,this.b1.angvel+=(this.scale*this.cx1*o-this.dot1*r)*this.b1.iinertia,this.b2.angvel+=(this.dot2*r-this.scale*this.cx2*o)*this.b2.iinertia,!1},at.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,t=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;var i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var a,s=0,p=0,l=0,h=0;if(s=this.b2.posx+r-this.b1.posx-i,l=(p=this.b2.posy+o-this.b1.posy-n)*e-s*t,h=e*s+t*p,a=this.equal?(h-=this.jointMin,1):h>this.jointMax?(h-=this.jointMax,1):h<this.jointMin?(h=this.jointMin-h,-1):h=0,this.breakUnderError&&l*l+h*h>this.maxError*this.maxError)return!0;if(l*l+h*h<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;var u,d,c,_,y=0,x=0;if(6<(l*=.5)*l+(h*=.5)*h){var m=this.b1.smass+this.b2.smass;if(m>Qs.epsilon){var f=(m=.8/m)*(t*l-a*e*h),v=m*(e*l*a-t*l),g=this.b1.imass;this.b1.posx-=f*g,this.b1.posy-=v*g;var z=this.b2.imass;this.b2.posx+=f*z,this.b2.posy+=v*z,s=this.b2.posx+r-this.b1.posx-i,l=(p=this.b2.posy+o-this.b1.posy-n)*e-s*t,h=e*s+t*p,a=this.equal?(h-=this.jointMin,1):h>this.jointMax?(h-=this.jointMax,1):h<this.jointMin?(h=this.jointMin-h,-1):h=0,l*=.5,h*=.5}}var b,w,S,C,M;u=e*(C=s+i)+t*(M=p+n),c=M*e-C*t,d=e*r+t*o,_=o*e-r*t,b=this.b1.smass+this.b2.smass+u*u*this.b1.sinertia+d*d*this.b2.sinertia,w=-a*(u*c*this.b1.sinertia+d*_*this.b2.sinertia),y=-l,x=-h;var P=b*(S=a*a*(this.b1.smass+this.b2.smass+c*c*this.b1.sinertia+_*_*this.b2.sinertia))-w*w;if(P!=P)y=x=0;else if(0==P)0!=b?y/=b:y=0,0!=S?x/=S:x=0;else{var k=(P=1/P)*(S*y-w*x);x=P*(b*x-w*y),y=k}0<x&&(x=0);var T=a*e*x-t*y,G=e*y+a*t*x,O=this.b1.imass;this.b1.posx-=T*O,this.b1.posy-=G*O;var A=this.b2.imass;this.b2.posx+=T*A,this.b2.posy+=G*A;var E=this.b1,I=(a*c*x-u*y)*this.b1.iinertia;if(E.rot+=I,1e-4<I*I)E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot);else{var B=I*I,L=1-.5*B,D=1-B*B/8,R=(L*E.axisx+I*E.axisy)*D;E.axisy=(L*E.axisy-I*E.axisx)*D,E.axisx=R}var F=this.b2,j=(d*y-a*_*x)*this.b2.iinertia;if(F.rot+=j,1e-4<j*j)F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot);else{var N=j*j,U=1-.5*N,H=1-N*N/8,V=(U*F.axisx+j*F.axisy)*H;F.axisy=(U*F.axisy-j*F.axisx)*H,F.axisx=V}return!1},at.prototype.draw=function(e){},at.prototype.__class__=at;var st=zpp_nape.constraint.ZPP_MotorJoint=function(){this.stepped=!1,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.rate=0,this.ratio=0,this.outer_zn=null,Ne.call(this),this.jAcc=0,this.stepped=!1,this.__velocity=!0};st.__name__=["zpp_nape","constraint","ZPP_MotorJoint"],st.__super__=Ne,st.prototype=Object.create(Ne.prototype),st.prototype.outer_zn=null,st.prototype.ratio=null,st.prototype.rate=null,st.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?K.get(0,0,-this.jAcc):K.get(0,0,this.ratio*this.jAcc):K.get(0,0,0)},st.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},st.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},st.prototype.b1=null,st.prototype.b2=null,st.prototype.kMass=null,st.prototype.jAcc=null,st.prototype.jMax=null,st.prototype.stepped=null,st.prototype.copy=function(e,t){var i=new M(null,null,this.rate,this.ratio);if(this.copyto(i),null!=e&&null!=this.b1){for(var n=null,r=0;r<e.length;){var o=e[r];if(++r,o.id==this.b1.id){n=o.bc;break}}null!=n?i.zpp_inner_zn.b1=n.zpp_inner:t.push(rt.todo(this.b1.id,function(e){i.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b2.id){a=p.bc;break}}null!=a?i.zpp_inner_zn.b2=a.zpp_inner:t.push(rt.todo(this.b2.id,function(e){i.zpp_inner_zn.b2=e.zpp_inner}))}return i},st.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: MotorJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},st.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},st.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var f=x.parent;x.parent=m,m=x,x=f}for(;null!=m;){var v=m.parent;m.parent=x,m=v}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},st.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},st.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},st.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;return this.pre_dt=e,this.stepped=!0,this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,this.kMass=1/this.kMass,this.jAcc*=t,this.jMax=this.maxForce*e,!1},st.prototype.warmStart=function(){this.b1.angvel-=this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.b2.iinertia*this.jAcc},st.prototype.applyImpulseVel=function(){var e=-this.kMass*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel-this.rate),t=this.jAcc;if(this.jAcc+=e,this.breakUnderForce){if(this.jAcc>this.jMax||this.jAcc<-this.jMax)return!0}else this.jAcc<-this.jMax?this.jAcc=-this.jMax:this.jAcc>this.jMax&&(this.jAcc=this.jMax);return e=this.jAcc-t,this.b1.angvel-=this.b1.iinertia*e,this.b2.angvel+=this.ratio*this.b2.iinertia*e,!1},st.prototype.applyImpulsePos=function(){return!1},st.prototype.__class__=st;var ut=zpp_nape.constraint.ZPP_PivotJoint=function(){this.stepped=!1,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,Ne.call(this),this.stepped=!1,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0};ut.__name__=["zpp_nape","constraint","ZPP_PivotJoint"],ut.__super__=Ne,ut.prototype=Object.create(Ne.prototype),ut.prototype.outer_zn=null,ut.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?K.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely)):K.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely):K.get(0,0,0)},ut.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},ut.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},ut.prototype.b1=null,ut.prototype.a1localx=null,ut.prototype.a1localy=null,ut.prototype.a1relx=null,ut.prototype.a1rely=null,ut.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},ut.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},ut.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},ut.prototype.wrap_a1=null,ut.prototype.b2=null,ut.prototype.a2localx=null,ut.prototype.a2localy=null,ut.prototype.a2relx=null,ut.prototype.a2rely=null,ut.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},ut.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},ut.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},ut.prototype.wrap_a2=null,ut.prototype.kMassa=null,ut.prototype.kMassb=null,ut.prototype.kMassc=null,ut.prototype.jAccx=null,ut.prototype.jAccy=null,ut.prototype.jMax=null,ut.prototype.gamma=null,ut.prototype.biasx=null,ut.prototype.biasy=null,ut.prototype.stepped=null,ut.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new P(null,null,n,r.zpp_inner_zn.wrap_a2);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b1.id){a=p.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var l=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){l=u.bc;break}}null!=l?o.zpp_inner_zn.b2=l.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},ut.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: PivotJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: PivotJoint cannot be simulated with body1 == body2 (body1=body2="+this.b1.outer.toString()+")");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")")},ut.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},ut.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var f=x.parent;x.parent=m,m=x,x=f}for(;null!=m;){var v=m.parent;m.parent=x,m=v}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},ut.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},ut.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},ut.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i=this.b1.smass+this.b2.smass;if(this.kMassa=i,this.kMassb=0,this.kMassc=i,0!=this.b1.sinertia){var n=this.a1relx*this.b1.sinertia,r=this.a1rely*this.b1.sinertia;this.kMassa+=r*this.a1rely,this.kMassb+=-r*this.a1relx,this.kMassc+=n*this.a1relx}if(0!=this.b2.sinertia){var o=this.a2relx*this.b2.sinertia,a=this.a2rely*this.b2.sinertia;this.kMassa+=a*this.a2rely,this.kMassb+=-a*this.a2relx,this.kMassc+=o*this.a2relx}var s,p=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(p!=p)this.kMassa=this.kMassb=this.kMassc=0,s=3;else if(0==p){var l=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,l=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,l|=2),this.kMassb=0,s=l}else{p=1/p;var h=this.kMassc*p;this.kMassc=this.kMassa*p,this.kMassa=h,this.kMassb*=-p,s=0}if(0!=(1&s)&&(this.jAccx=0),0!=(2&s)&&(this.jAccy=0),this.stiff)this.biasx=0,this.biasy=0,this.gamma=0;else{var u,d=2*Math.PI*this.frequency;this.gamma=1/(e*d*(2*this.damping+d*e));var c=1/(1+this.gamma);if(u=e*d*d*this.gamma,this.gamma*=c,this.kMassa*=c,this.kMassb*=c,this.kMassc*=c,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy>this.maxError*this.maxError)return!0;var _=-u;this.biasx*=_,this.biasy*=_;var y=this.maxError,x=this.biasx*this.biasx+this.biasy*this.biasy;if(y*y<x){var m=y*(1/Math.sqrt(x));this.biasx*=m,this.biasy*=m}}return this.jAccx*=t,this.jAccy*=t,this.jMax=this.maxForce*e,!1},ut.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.jAccx*e,this.b1.vely-=this.jAccy*e;var t=this.b2.imass;this.b2.velx+=this.jAccx*t,this.b2.vely+=this.jAccy*t,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},ut.prototype.applyImpulseVel=function(){var e,t;e=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),t=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));var i=0,n=0;i=this.biasx-e,n=this.biasy-t;var r=this.kMassa*i+this.kMassb*n;n=this.kMassb*i+this.kMassc*n,i=r;var o=this.gamma;i-=this.jAccx*o,n-=this.jAccy*o;var a,s;if(a=this.jAccx,s=this.jAccy,this.jAccx+=i,this.jAccy+=n,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){var p=this.jMax,l=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(p*p<l){var h=p*(1/Math.sqrt(l));this.jAccx*=h,this.jAccy*=h}}i=this.jAccx-a,n=this.jAccy-s;var u=this.b1.imass;this.b1.velx-=i*u,this.b1.vely-=n*u;var d=this.b2.imass;return this.b2.velx+=i*d,this.b2.vely+=n*d,this.b1.angvel-=(n*this.a1relx-i*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(n*this.a2relx-i*this.a2rely)*this.b2.iinertia,!1},ut.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i,n;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,n=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r=0,o=0;if(r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),this.breakUnderError&&r*r+o*o>this.maxError*this.maxError)return!0;if(r*r+o*o<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;var a=0,s=0;if(6<(r*=.5)*r+(o*=.5)*o){var p=this.b1.smass+this.b2.smass;if(p>Qs.epsilon){var l=(a=-r*(p=.75/p))*a+(s=-o*p)*s;if(400<l){var h=1/Math.sqrt(l)*20;a*=h,s*=h}var u=this.b1.imass;this.b1.posx-=a*u,this.b1.posy-=s*u;var d=this.b2.imass;this.b2.posx+=a*d,this.b2.posy+=s*d,r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),r*=.5,o*=.5}}var c=0,_=0,y=0,x=this.b1.smass+this.b2.smass;if(y=c=x,(_=0)!=this.b1.sinertia){var m=e*this.b1.sinertia,f=t*this.b1.sinertia;c=x+f*t,_+=-f*e,y=x+m*e}if(0!=this.b2.sinertia){var v=i*this.b2.sinertia,g=n*this.b2.sinertia;c+=g*n,_+=-g*i,y+=v*i}var z=(a=-r)*a+(s=-o)*s;if(36<z){var b=1/Math.sqrt(z)*6;a*=b,s*=b}var w=c*y-_*_;if(w!=w)a=s=0;else if(0==w)0!=c?a/=c:a=0,0!=y?s/=y:s=0;else{var S=(w=1/w)*(y*a-_*s);s=w*(c*s-_*a),a=S}var C=this.b1.imass;this.b1.posx-=a*C,this.b1.posy-=s*C;var M=this.b2.imass;this.b2.posx+=a*M,this.b2.posy+=s*M;var P=this.b1,k=-(s*e-a*t)*this.b1.iinertia;if(P.rot+=k,1e-4<k*k)P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot);else{var T=k*k,G=1-.5*T,O=1-T*T/8,A=(G*P.axisx+k*P.axisy)*O;P.axisy=(G*P.axisy-k*P.axisx)*O,P.axisx=A}var E=this.b2,I=(s*i-a*n)*this.b2.iinertia;if(E.rot+=I,1e-4<I*I)E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot);else{var B=I*I,L=1-.5*B,D=1-B*B/8,R=(L*E.axisx+I*E.axisy)*D;E.axisy=(L*E.axisy-I*E.axisx)*D,E.axisx=R}return!1},ut.prototype.draw=function(e){},ut.prototype.__class__=ut;var dt=zpp_nape.constraint.ZPP_PulleyJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a4=null,this.a4rely=0,this.a4relx=0,this.a4localy=0,this.a4localx=0,this.b4=null,this.wrap_a3=null,this.a3rely=0,this.a3relx=0,this.a3localy=0,this.a3localx=0,this.b3=null,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx4=0,this.cx3=0,this.cx2=0,this.cx1=0,this.n34y=0,this.n34x=0,this.n12y=0,this.n12x=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=1,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.a3localx=0,this.a3localy=0,this.a3relx=0,this.a3rely=0,this.a4localx=0,this.a4localy=0,this.a4relx=0,this.a4rely=0,this.n12x=1,this.n12y=0,this.n34x=1,this.n34y=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=this.cx3=this.cx4=0};dt.__name__=["zpp_nape","constraint","ZPP_PulleyJoint"],dt.__super__=Ne,dt.prototype=Object.create(Ne.prototype),dt.prototype.outer_zn=null,dt.prototype.ratio=null,dt.prototype.jointMin=null,dt.prototype.jointMax=null,dt.prototype.slack=null,dt.prototype.equal=null,dt.prototype.is_slack=function(){this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var e,t,i,n;e=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),t=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),i=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),n=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var r=Math.sqrt(e*e+t*t),o=Math.sqrt(i*i+n*n);0==o&&Math.sqrt(0);var a=r+this.ratio*o;return!this.equal&&(!(a<this.jointMin)&&(a>this.jointMax?(a-=this.jointMax,!1):!(a=0)))},dt.prototype.n12x=null,dt.prototype.n12y=null,dt.prototype.n34x=null,dt.prototype.n34y=null,dt.prototype.cx1=null,dt.prototype.cx2=null,dt.prototype.cx3=null,dt.prototype.cx4=null,dt.prototype.bodyImpulse=function(e){if(this.stepped){var t=K.get();if(e==this.b1){var i=t.zpp_inner;null!=i._validate&&i._validate(),t.zpp_inner.x=t.zpp_inner.x-this.jAcc*this.n12x;var n=t.zpp_inner;null!=n._validate&&n._validate();var r=t.zpp_inner;null!=r._validate&&r._validate(),t.zpp_inner.y=t.zpp_inner.y-this.jAcc*this.n12y;var o=t.zpp_inner;null!=o._validate&&o._validate();var a=t.zpp_inner;null!=a._validate&&a._validate(),t.zpp_inner.z=t.zpp_inner.z-this.cx1*this.jAcc;var s=t.zpp_inner;null!=s._validate&&s._validate()}if(e==this.b2){var p=t.zpp_inner;null!=p._validate&&p._validate(),t.zpp_inner.x=t.zpp_inner.x+this.jAcc*this.n12x;var l=t.zpp_inner;null!=l._validate&&l._validate();var h=t.zpp_inner;null!=h._validate&&h._validate(),t.zpp_inner.y=t.zpp_inner.y+this.jAcc*this.n12y;var u=t.zpp_inner;null!=u._validate&&u._validate();var d=t.zpp_inner;null!=d._validate&&d._validate(),t.zpp_inner.z=t.zpp_inner.z+this.cx2*this.jAcc;var c=t.zpp_inner;null!=c._validate&&c._validate()}if(e==this.b3){var _=t.zpp_inner;null!=_._validate&&_._validate(),t.zpp_inner.x=t.zpp_inner.x-this.jAcc*this.n34x;var y=t.zpp_inner;null!=y._validate&&y._validate();var x=t.zpp_inner;null!=x._validate&&x._validate(),t.zpp_inner.y=t.zpp_inner.y-this.jAcc*this.n34y;var m=t.zpp_inner;null!=m._validate&&m._validate();var f=t.zpp_inner;null!=f._validate&&f._validate(),t.zpp_inner.z=t.zpp_inner.z-this.cx3*this.jAcc;var v=t.zpp_inner;null!=v._validate&&v._validate()}if(e==this.b4){var g=t.zpp_inner;null!=g._validate&&g._validate(),t.zpp_inner.x=t.zpp_inner.x+this.jAcc*this.n34x;var z=t.zpp_inner;null!=z._validate&&z._validate();var b=t.zpp_inner;null!=b._validate&&b._validate(),t.zpp_inner.y=t.zpp_inner.y+this.jAcc*this.n34y;var w=t.zpp_inner;null!=w._validate&&w._validate();var S=t.zpp_inner;null!=S._validate&&S._validate(),t.zpp_inner.z=t.zpp_inner.z+this.cx4*this.jAcc;var C=t.zpp_inner;null!=C._validate&&C._validate()}return t}return K.get(0,0,0)},dt.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.add(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.add(this)},dt.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.remove(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.remove(this)},dt.prototype.b1=null,dt.prototype.a1localx=null,dt.prototype.a1localy=null,dt.prototype.a1relx=null,dt.prototype.a1rely=null,dt.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},dt.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},dt.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},dt.prototype.wrap_a1=null,dt.prototype.b2=null,dt.prototype.a2localx=null,dt.prototype.a2localy=null,dt.prototype.a2relx=null,dt.prototype.a2rely=null,dt.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},dt.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},dt.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},dt.prototype.wrap_a2=null,dt.prototype.b3=null,dt.prototype.a3localx=null,dt.prototype.a3localy=null,dt.prototype.a3relx=null,dt.prototype.a3rely=null,dt.prototype.validate_a3=function(){this.wrap_a3.zpp_inner.x=this.a3localx,this.wrap_a3.zpp_inner.y=this.a3localy},dt.prototype.invalidate_a3=function(e){this.immutable_midstep("Constraint::a3"),this.a3localx=e.x,this.a3localy=e.y,this.wake()},dt.prototype.setup_a3=function(){var e,t=this.a3localx,i=this.a3localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a3=e,this.wrap_a3.zpp_inner._inuse=!0,this.wrap_a3.zpp_inner._validate=$(this,this.validate_a3),this.wrap_a3.zpp_inner._invalidate=$(this,this.invalidate_a3)},dt.prototype.wrap_a3=null,dt.prototype.b4=null,dt.prototype.a4localx=null,dt.prototype.a4localy=null,dt.prototype.a4relx=null,dt.prototype.a4rely=null,dt.prototype.validate_a4=function(){this.wrap_a4.zpp_inner.x=this.a4localx,this.wrap_a4.zpp_inner.y=this.a4localy},dt.prototype.invalidate_a4=function(e){this.immutable_midstep("Constraint::a4"),this.a4localx=e.x,this.a4localy=e.y,this.wake()},dt.prototype.setup_a4=function(){var e,t=this.a4localx,i=this.a4localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a4=e,this.wrap_a4.zpp_inner._inuse=!0,this.wrap_a4.zpp_inner._validate=$(this,this.validate_a4),this.wrap_a4.zpp_inner._invalidate=$(this,this.invalidate_a4)},dt.prototype.wrap_a4=null,dt.prototype.kMass=null,dt.prototype.jAcc=null,dt.prototype.jMax=null,dt.prototype.gamma=null,dt.prototype.bias=null,dt.prototype.stepped=null,dt.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=r.zpp_inner_zn.wrap_a2,a=this.outer_zn;null==a.zpp_inner_zn.wrap_a3&&a.zpp_inner_zn.setup_a3();var s=a.zpp_inner_zn.wrap_a3,p=this.outer_zn;null==p.zpp_inner_zn.wrap_a4&&p.zpp_inner_zn.setup_a4();var l=new k(null,null,null,null,n,o,s,p.zpp_inner_zn.wrap_a4,this.jointMin,this.jointMax,this.ratio);if(this.copyto(l),null!=e&&null!=this.b1){for(var h=null,u=0;u<e.length;){var d=e[u];if(++u,d.id==this.b1.id){h=d.bc;break}}null!=h?l.zpp_inner_zn.b1=h.zpp_inner:t.push(rt.todo(this.b1.id,function(e){l.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var c=null,_=0;_<e.length;){var y=e[_];if(++_,y.id==this.b2.id){c=y.bc;break}}null!=c?l.zpp_inner_zn.b2=c.zpp_inner:t.push(rt.todo(this.b2.id,function(e){l.zpp_inner_zn.b2=e.zpp_inner}))}if(null!=e&&null!=this.b3){for(var x=null,m=0;m<e.length;){var f=e[m];if(++m,f.id==this.b3.id){x=f.bc;break}}null!=x?l.zpp_inner_zn.b3=x.zpp_inner:t.push(rt.todo(this.b3.id,function(e){l.zpp_inner_zn.b3=e.zpp_inner}))}if(null!=e&&null!=this.b4){for(var v=null,g=0;g<e.length;){var z=e[g];if(++g,z.id==this.b4.id){v=z.bc;break}}null!=v?l.zpp_inner_zn.b4=v.zpp_inner:t.push(rt.todo(this.b4.id,function(e){l.zpp_inner_zn.b4=e.zpp_inner}))}return l},dt.prototype.validate=function(){if(null==this.b1||null==this.b2||null==this.b3||null==this.b4)throw new r("Error: PulleyJoint cannot be simulated with null bodies");if(this.b1==this.b2||this.b3==this.b4)throw new r("Error: PulleyJoint cannot have body1==body2 or body3==body4");if(this.b1.space!=this.space||this.b2.space!=this.space||this.b3.space!=this.space||this.b4.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: PulleyJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic");if(2!=this.b3.type&&2!=this.b4.type)throw new r("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic")},dt.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake(),null!=this.b3&&2==this.b3.type&&this.b3.wake(),null!=this.b4&&2==this.b4.type&&this.b4.wake()},dt.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var f=x.parent;x.parent=m,m=x,x=f}for(;null!=m;){var v=m.parent;m.parent=x,m=v}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}if(2==this.b3.type){var g,z;if(this.b3.component==this.b3.component.parent)g=this.b3.component;else{for(var b=this.b3.component,w=null;b!=b.parent;){var S=b.parent;b.parent=w,w=b,b=S}for(;null!=w;){var C=w.parent;w.parent=b,w=C}g=b}if(this.component==this.component.parent)z=this.component;else{for(var M=this.component,P=null;M!=M.parent;){var k=M.parent;M.parent=P,P=M,M=k}for(;null!=P;){var T=P.parent;P.parent=M,P=T}z=M}g!=z&&(g.rank<z.rank?g.parent=z:g.rank>z.rank?z.parent=g:(z.parent=g).rank++)}if(2==this.b4.type){var G,O;if(this.b4.component==this.b4.component.parent)G=this.b4.component;else{for(var A=this.b4.component,E=null;A!=A.parent;){var I=A.parent;A.parent=E,E=A,A=I}for(;null!=E;){var B=E.parent;E.parent=A,E=B}G=A}if(this.component==this.component.parent)O=this.component;else{for(var L=this.component,D=null;L!=L.parent;){var R=L.parent;L.parent=D,D=L,L=R}for(;null!=D;){var F=D.parent;D.parent=L,D=F}O=L}G!=O&&(G.rank<O.rank?G.parent=O:G.rank>O.rank?O.parent=G:(O.parent=G).rank++)}},dt.prototype.pair_exists=function(e,t){return this.b1.id==e&&(this.b2.id==t||this.b3.id==t||this.b4.id==t)||this.b2.id==e&&(this.b3.id==t||this.b4.id==t||this.b1.id==t)||this.b3.id==e&&(this.b4.id==t||this.b1.id==t||this.b2.id==t)||this.b4.id==e&&(this.b1.id==t||this.b2.id==t||this.b3.id==t)},dt.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},dt.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var i,n,r,o;i=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),n=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),r=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),o=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var a=Math.sqrt(i*i+n*n),s=Math.sqrt(r*r+o*o);if(0!=a){var p=1/a;this.n12x=i*p,this.n12y=n*p}if(0!=s){var l=1/s;this.n34x=r*l,this.n34y=o*l;var h=this.ratio;this.n34x*=h,this.n34y*=h}else{var u=this.ratio/Math.sqrt(this.n34x*this.n34x+this.n34y*this.n34y);this.n34x*=u,this.n34y*=u}var d=a+this.ratio*s;this.equal?(d-=this.jointMax,this.slack=!1):d<this.jointMin?(d=this.jointMin-d,this.n12x=-this.n12x,this.n12y=-this.n12y,this.n34x=-this.n34x,this.n34y=-this.n34y,this.slack=!1):d>this.jointMax?(d-=this.jointMax,this.slack=!1):(this.n12x=0,this.n12y=0,this.n34x=0,d=this.n34y=0,this.slack=!0);var c=d;if(!this.slack){this.cx1=this.n12y*this.a1relx-this.n12x*this.a1rely,this.cx2=this.n12y*this.a2relx-this.n12x*this.a2rely,this.cx3=this.n34y*this.a3relx-this.n34x*this.a3rely,this.cx4=this.n34y*this.a4relx-this.n34x*this.a4rely;var _=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*this.cx1*this.cx1+this.b2.sinertia*this.cx2*this.cx2+this.b3.sinertia*this.cx3*this.cx3+this.b4.sinertia*this.cx4*this.cx4;if(this.b1==this.b4&&(_-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx4*this.b1.sinertia)),this.b1==this.b3&&(_+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx3*this.b1.sinertia)),this.b2==this.b3&&(_-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx3*this.b2.sinertia)),this.b2==this.b4&&(_+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx4*this.b2.sinertia)),this.kMass=_,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&c*c>this.maxError*this.maxError)return!0;var y,x=2*Math.PI*this.frequency;this.gamma=1/(e*x*(2*this.damping+x*e));var m=1/(1+this.gamma);y=e*x*x*this.gamma,this.gamma*=m,this.kMass*=m,this.bias=-c*y,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},dt.prototype.warmStart=function(){if(!this.slack){var e=this.b1.imass*this.jAcc;this.b1.velx-=this.n12x*e,this.b1.vely-=this.n12y*e;var t=this.b2.imass*this.jAcc;this.b2.velx+=this.n12x*t,this.b2.vely+=this.n12y*t;var i=this.b3.imass*this.jAcc;this.b3.velx-=this.n34x*i,this.b3.vely-=this.n34y*i;var n=this.b4.imass*this.jAcc;this.b4.velx+=this.n34x*n,this.b4.vely+=this.n34y*n,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc,this.b3.angvel-=this.cx3*this.b3.iinertia*this.jAcc,this.b4.angvel+=this.cx4*this.b4.iinertia*this.jAcc}},dt.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-(this.n12x*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.n12y*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+this.n34x*(this.b4.velx+this.b4.kinvelx-this.b3.velx-this.b3.kinvelx)+this.n34y*(this.b4.vely+this.b4.kinvely-this.b3.vely-this.b3.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1+(this.b4.angvel+this.b4.kinangvel)*this.cx4-(this.b3.angvel+this.b3.kinangvel)*this.cx3))-this.jAcc*this.gamma,t=this.jAcc;if(this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),e=this.jAcc-t;var i=this.b1.imass*e;this.b1.velx-=this.n12x*i,this.b1.vely-=this.n12y*i;var n=this.b2.imass*e;this.b2.velx+=this.n12x*n,this.b2.vely+=this.n12y*n;var r=this.b3.imass*e;this.b3.velx-=this.n34x*r,this.b3.vely-=this.n34y*r;var o=this.b4.imass*e;return this.b4.velx+=this.n34x*o,this.b4.vely+=this.n34y*o,this.b1.angvel-=this.cx1*this.b1.iinertia*e,this.b2.angvel+=this.cx2*this.b2.iinertia*e,this.b3.angvel-=this.cx3*this.b3.iinertia*e,this.b4.angvel+=this.cx4*this.b4.iinertia*e,!1},dt.prototype.applyImpulsePos=function(){var e,t,i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var a,s;a=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,s=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;var p,l,h;p=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,l=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var u=0,d=0,c=0,_=0;u=this.n12x,d=this.n12y,c=this.n34x,_=this.n34y;var y,x,m,f;y=this.b2.posx+r-(this.b1.posx+i),x=this.b2.posy+o-(this.b1.posy+n),m=this.b4.posx+p-(this.b3.posx+a),f=this.b4.posy+l-(this.b3.posy+s);var v=Math.sqrt(y*y+x*x),g=Math.sqrt(m*m+f*f);if(0!=v){var z=1/v;u=y*z,d=x*z}if(0!=g){var b=1/g;c=m*b,_=f*b;var w=this.ratio;c*=w,_*=w}else{var S=this.ratio/Math.sqrt(c*c+_*_);c*=S,_*=S}var C=v+this.ratio*g;if(h=this.equal?(C-=this.jointMax,!1):C<this.jointMin?(C=this.jointMin-C,u=-u,d=-d,c=-c,_=-_,!1):C>this.jointMax?(C-=this.jointMax,!1):!(C=_=c=d=u=0),e=C,!h){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(e*e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;if(6<(e*=.5)*e){var M=this.b1.smass+this.b2.smass;if(M>Qs.epsilon&&(t=-e*(M=.75/M),this.equal||t<0)){var P=t*this.b1.imass;this.b1.posx-=u*P,this.b1.posy-=d*P;var k=t*this.b2.imass;this.b2.posx+=u*k,this.b2.posy+=d*k;var T=t*this.b3.imass;this.b3.posx-=c*T,this.b3.posy-=_*T;var G=t*this.b4.imass;this.b4.posx+=c*G,this.b4.posy+=_*G;var O,A,E,I;O=this.b2.posx+r-(this.b1.posx+i),A=this.b2.posy+o-(this.b1.posy+n),E=this.b4.posx+p-(this.b3.posx+a),I=this.b4.posy+l-(this.b3.posy+s);var B=Math.sqrt(O*O+A*A),L=Math.sqrt(E*E+I*I);if(0!=B){var D=1/B;u=O*D,d=A*D}if(0!=L){var R=1/L;c=E*R,_=I*R;var F=this.ratio;c*=F,_*=F}else{var j=this.ratio/Math.sqrt(c*c+_*_);c*=j,_*=j}var N=B+this.ratio*L;this.equal?N-=this.jointMax:N<this.jointMin?(N=this.jointMin-N,u=-u,d=-d,c=-c,_=-_):N>this.jointMax?N-=this.jointMax:N=_=c=d=u=0,e=N,e*=.5}}var U,H,V,W;U=d*i-u*n,H=d*r-u*o,V=_*a-c*s,W=_*p-c*l;var X=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*U*U+this.b2.sinertia*H*H+this.b3.sinertia*V*V+this.b4.sinertia*W*W;this.b1==this.b4&&(X-=2*((u*c+d*_)*this.b1.smass+U*W*this.b1.sinertia)),this.b1==this.b3&&(X+=2*((u*c+d*_)*this.b1.smass+U*V*this.b1.sinertia)),this.b2==this.b3&&(X-=2*((u*c+d*_)*this.b2.smass+H*V*this.b2.sinertia)),this.b2==this.b4&&(X+=2*((u*c+d*_)*this.b2.smass+H*W*this.b2.sinertia));var q=X;if(0!=q&&(q=1/q),t=-e*q,this.equal||t<0){var Y=this.b1.imass*t;this.b1.posx-=u*Y,this.b1.posy-=d*Y;var Z=this.b2.imass*t;this.b2.posx+=u*Z,this.b2.posy+=d*Z;var K=this.b3.imass*t;this.b3.posx-=c*K,this.b3.posy-=_*K;var J=this.b4.imass*t;this.b4.posx+=c*J,this.b4.posy+=_*J;var Q=this.b1,$=-U*this.b1.iinertia*t;if(Q.rot+=$,1e-4<$*$)Q.axisx=Math.sin(Q.rot),Q.axisy=Math.cos(Q.rot);else{var ee=$*$,te=1-.5*ee,ie=1-ee*ee/8,ne=(te*Q.axisx+$*Q.axisy)*ie;Q.axisy=(te*Q.axisy-$*Q.axisx)*ie,Q.axisx=ne}var re=this.b2,oe=H*this.b2.iinertia*t;if(re.rot+=oe,1e-4<oe*oe)re.axisx=Math.sin(re.rot),re.axisy=Math.cos(re.rot);else{var ae=oe*oe,se=1-.5*ae,pe=1-ae*ae/8,le=(se*re.axisx+oe*re.axisy)*pe;re.axisy=(se*re.axisy-oe*re.axisx)*pe,re.axisx=le}var he=this.b3,ue=-V*this.b3.iinertia*t;if(he.rot+=ue,1e-4<ue*ue)he.axisx=Math.sin(he.rot),he.axisy=Math.cos(he.rot);else{var de=ue*ue,ce=1-.5*de,_e=1-de*de/8,ye=(ce*he.axisx+ue*he.axisy)*_e;he.axisy=(ce*he.axisy-ue*he.axisx)*_e,he.axisx=ye}var xe=this.b4,me=W*this.b4.iinertia*t;if(xe.rot+=me,1e-4<me*me)xe.axisx=Math.sin(xe.rot),xe.axisy=Math.cos(xe.rot);else{var fe=me*me,ve=1-.5*fe,ge=1-fe*fe/8,ze=(ve*xe.axisx+me*xe.axisy)*ge;xe.axisy=(ve*xe.axisy-me*xe.axisx)*ge,xe.axisx=ze}}}return!1},dt.prototype.draw=function(e){},dt.prototype.__class__=dt;var ct=zpp_nape.constraint.ZPP_UserConstraint=function(e,t){this.jOld=null,this.J=null,this.vec3=null,this.Keff=null,this.jMax=0,this.velonly=!1,this.gamma=0,this.soft=0,this.y=null,this.L=null,this.stepped=!1,this.bias=null,this.jAcc=null,this.dim=0,this.bodies=null,this.outer_zn=null,Ne.call(this),this.bodies=[],this.dim=e,this.velonly=t,this.jAcc=[],this.bias=[],this.L=[],this.J=[],this.jOld=[],this.y=[],this.Keff=[],this.vec3=K.get(0,0,0);for(var i=0;i<e;){var n=i++;this.J[n]=this.jOld[n]=this.y[n]=0,this.bias[n]=0;for(var r=this.jAcc[n]=0;r<e;)this.L[n*e+r++]=0}this.stepped=!1};ct.__name__=["zpp_nape","constraint","ZPP_UserConstraint"],ct.__super__=Ne,ct.prototype=Object.create(Ne.prototype),ct.prototype.outer_zn=null,ct.prototype.bindVec2_invalidate=function(e){this.outer_zn.__invalidate()},ct.prototype.bodies=null,ct.prototype.dim=null,ct.prototype.jAcc=null,ct.prototype.bias=null,ct.prototype.addBody=function(e){for(var t=null,i=0,n=this.bodies;i<n.length;){var r=n[i];if(++i,r.body==e){t=r;break}}null==t?(this.bodies.push(new _t(1,e)),this.active&&null!=this.space&&null!=e&&e.constraints.add(this)):t.cnt++},ct.prototype.remBody=function(e){for(var t=null,i=0|this.bodies.length,n=0;n<i;){var r=this.bodies[n];if(r.body==e){r.cnt--,0==r.cnt&&(0<i&&(this.bodies[n]=this.bodies[i-1]),this.bodies.pop(),this.active&&null!=this.space&&null!=e&&e.constraints.remove(this)),t=r;break}++n}return null!=t},ct.prototype.bodyImpulse=function(e){for(var t=0,i=this.dim;t<i;){var n=t++;this.J[n]=this.jAcc[n]}var r=K.get(0,0,0);return this.stepped&&this.outer_zn.__impulse(this.J,e.outer,r),r},ct.prototype.activeBodies=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,null!=i.body&&i.body.constraints.add(this)}},ct.prototype.inactiveBodies=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,null!=i.body&&i.body.constraints.remove(this)}},ct.prototype.stepped=null,ct.prototype.copy=function(e,t){throw this.copyto(this.outer_zn.__copy()),new r("not done yet")},ct.prototype.validate=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];if(++e,i.body.space!=this.space)throw new r("Error: Constraints must have each body within the same sapce to which the constraint has been assigned")}this.outer_zn.__validate()},ct.prototype.wake_connected=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,2==i.body.type&&i.body.wake()}},ct.prototype.forest=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];if(++e,2==i.body.type){var n,r;if(i.body.component==i.body.component.parent)n=i.body.component;else{for(var o=i.body.component,a=null;o!=o.parent;){var s=o.parent;o.parent=a,a=o,o=s}for(;null!=a;){var p=a.parent;a.parent=o,a=p}n=o}if(this.component==this.component.parent)r=this.component;else{for(var l=this.component,h=null;l!=l.parent;){var u=l.parent;l.parent=h,h=l,l=u}for(;null!=h;){var d=h.parent;h.parent=l,h=d}r=l}n!=r&&(n.rank<r.rank?n.parent=r:n.rank>r.rank?r.parent=n:(r.parent=n).rank++)}}},ct.prototype.pair_exists=function(e,t){for(var i=!1,n=0|this.bodies.length,r=0;r<n;){for(var o=r++,a=this.bodies[o].body,s=o+1;s<n;){var p=this.bodies[s++].body;if(a.id==e&&p.id==t||a.id==t&&p.id==e){i=!0;break}}if(i)break}return i},ct.prototype.broken=function(){this.outer_zn.__broken()},ct.prototype.clearcache=function(){for(var e=0,t=this.dim;e<t;)this.jAcc[e++]=0;this.pre_dt=-1},ct.prototype.lsq=function(e){for(var t=0,i=0,n=this.dim;i<n;){var r=i++;t+=e[r]*e[r]}return t},ct.prototype._clamp=function(e,t){var i=this.lsq(e);if(t*t<i)for(var n=t/Math.sqrt(i),r=0,o=this.dim;r<o;)e[r++]*=n},ct.prototype.L=null,ct.prototype.solve=function(e){for(var t=0,i=0,n=this.dim;i<n;){for(var r=i++,o=0,a=0,s=r-1;a<s;){var p=a++;o+=this.L[r*this.dim+p]*this.L[r*this.dim+p]}var l=Math.sqrt(e[t++]-o);if(0!=(this.L[r*this.dim+r]=l)){l=1/l;for(var h=r+1,u=this.dim;h<u;){for(var d=h++,c=0,_=0,y=r-1;_<y;){var x=_++;c+=this.L[d*this.dim+x]*this.L[r*this.dim+x]}this.L[d*this.dim+r]=l*(e[t++]-c)}}else{for(var m=r+1,f=this.dim;m<f;)this.L[m++*this.dim+r]=0;t+=this.dim-r-1}}return this.L},ct.prototype.y=null,ct.prototype.transform=function(e,t){for(var i=0,n=this.dim;i<n;){var r=i++,o=t[r],a=e[r*this.dim+r];if(0!=a){for(var s=0;s<r;){var p=s++;o-=e[r*this.dim+p]*this.y[p]}this.y[r]=o/a}else this.y[r]=0}for(var l=0,h=this.dim;l<h;){var u=this.dim-1-l++,d=e[u*this.dim+u];if(0!=d){for(var c=this.y[u],_=u+1,y=this.dim;_<y;){var x=_++;c-=e[x*this.dim+u]*t[x]}t[u]=c/d}else t[u]=0}},ct.prototype.soft=null,ct.prototype.gamma=null,ct.prototype.velonly=null,ct.prototype.jMax=null,ct.prototype.Keff=null,ct.prototype.preStep=function(e){this.outer_zn.__validate(),-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;if(this.pre_dt=e,this.stepped=!0,this.outer_zn.__prepare(),this.outer_zn.__eff_mass(this.Keff),this.L=this.solve(this.Keff),this.stiff||this.velonly){for(var i=0,n=this.dim;i<n;)this.bias[i++]=0;this.gamma=0,this.soft=1}else{var r,o=2*Math.PI*this.frequency;this.gamma=1/(e*o*(2*this.damping+o*e));var a=1/(1+this.gamma);if(r=e*o*o*this.gamma,this.gamma*=a,this.soft=a,this.outer_zn.__position(this.bias),this.breakUnderError&&this.lsq(this.bias)>this.maxError*this.maxError)return!0;for(var s=0,p=this.dim;s<p;)this.bias[s++]*=-r;this._clamp(this.bias,this.maxError)}for(var l=0,h=this.dim;l<h;)this.jAcc[l++]*=t;return this.jMax=this.maxForce*e,!1},ct.prototype.vec3=null,ct.prototype.warmStart=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e;var n=i.body;this.outer_zn.__impulse(this.jAcc,n.outer,this.vec3);var r=n.imass,o=this.vec3,a=o.zpp_inner;null!=a._validate&&a._validate(),n.velx+=o.zpp_inner.x*r;var s=this.vec3,p=s.zpp_inner;null!=p._validate&&p._validate(),n.vely+=s.zpp_inner.y*r;var l=this.vec3,h=l.zpp_inner;null!=h._validate&&h._validate(),n.angvel+=l.zpp_inner.z*n.iinertia}},ct.prototype.J=null,ct.prototype.jOld=null,ct.prototype.applyImpulseVel=function(){this.outer_zn.__velocity(this.J);for(var e=0,t=this.dim;e<t;){var i=e++;this.J[i]=this.bias[i]-this.J[i]}this.transform(this.L,this.J);for(var n=0,r=this.dim;n<r;){var o=n++;this.jOld[o]=this.jAcc[o],this.jAcc[o]+=this.J[o]=this.J[o]*this.soft-this.jAcc[o]*this.gamma}if(this.outer_zn.__clamp(this.jAcc),(this.breakUnderForce||!this.stiff)&&this.lsq(this.jAcc)>this.jMax*this.jMax){if(this.breakUnderForce)return!0;this.stiff||this._clamp(this.jAcc,this.jMax)}for(var a=0,s=this.dim;a<s;){var p=a++;this.J[p]=this.jAcc[p]-this.jOld[p]}for(var l=0,h=this.bodies;l<h.length;){var u=h[l];++l;var d=u.body;this.outer_zn.__impulse(this.J,d.outer,this.vec3);var c=d.imass,_=this.vec3,y=_.zpp_inner;null!=y._validate&&y._validate(),d.velx+=_.zpp_inner.x*c;var x=this.vec3,m=x.zpp_inner;null!=m._validate&&m._validate(),d.vely+=x.zpp_inner.y*c;var f=this.vec3,v=f.zpp_inner;null!=v._validate&&v._validate(),d.angvel+=f.zpp_inner.z*d.iinertia}return!1},ct.prototype.applyImpulsePos=function(){if(this.velonly)return!1;this.outer_zn.__prepare(),this.outer_zn.__position(this.J);var e=this.lsq(this.J);if(this.breakUnderError&&e>this.maxError*this.maxError)return!0;if(e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;for(var t=0,i=this.dim;t<i;)this.J[t++]*=-1;this.outer_zn.__eff_mass(this.Keff),this.transform(this.solve(this.Keff),this.J),this.outer_zn.__clamp(this.J);for(var n=0,r=this.bodies;n<r.length;){var o=r[n];++n;var a=o.body;this.outer_zn.__impulse(this.J,a.outer,this.vec3);var s=a.imass,p=this.vec3,l=p.zpp_inner;null!=l._validate&&l._validate(),a.posx+=p.zpp_inner.x*s;var h=this.vec3,u=h.zpp_inner;null!=u._validate&&u._validate(),a.posy+=h.zpp_inner.y*s;var d=this.vec3,c=d.zpp_inner;null!=c._validate&&c._validate();var _=d.zpp_inner.z*a.iinertia;if(a.rot+=_,1e-4<_*_)a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot);else{var y=_*_,x=1-.5*y,m=1-y*y/8,f=(x*a.axisx+_*a.axisy)*m;a.axisy=(x*a.axisy-_*a.axisx)*m,a.axisx=f}}return!1},ct.prototype.draw=function(e){this.outer_zn.__draw(e)},ct.prototype.__class__=ct;var _t=zpp_nape.constraint.ZPP_UserBody=function(e,t){this.body=null,this.cnt=0,this.cnt=e,this.body=t};_t.__name__=["zpp_nape","constraint","ZPP_UserBody"],_t.prototype.cnt=null,_t.prototype.body=null,_t.prototype.__class__=_t;var yt=zpp_nape.constraint.ZPP_WeldJoint=function(){this.stepped=!1,this.biasz=0,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccz=0,this.jAccy=0,this.jAccx=0,this.kMassf=0,this.kMasse=0,this.kMassc=0,this.kMassd=0,this.kMassb=0,this.kMassa=0,this.phase=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,Ne.call(this),this.phase=0,this.jAccx=0,this.jAccy=0,this.jAccz=0,this.jMax=1/0,this.stepped=!1,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0};yt.__name__=["zpp_nape","constraint","ZPP_WeldJoint"],yt.__super__=Ne,yt.prototype=Object.create(Ne.prototype),yt.prototype.outer_zn=null,yt.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?K.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)):K.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz):K.get(0,0,0)},yt.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},yt.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},yt.prototype.b1=null,yt.prototype.a1localx=null,yt.prototype.a1localy=null,yt.prototype.a1relx=null,yt.prototype.a1rely=null,yt.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},yt.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},yt.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},yt.prototype.wrap_a1=null,yt.prototype.b2=null,yt.prototype.a2localx=null,yt.prototype.a2localy=null,yt.prototype.a2relx=null,yt.prototype.a2rely=null,yt.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},yt.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},yt.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},yt.prototype.wrap_a2=null,yt.prototype.phase=null,yt.prototype.kMassa=null,yt.prototype.kMassb=null,yt.prototype.kMassd=null,yt.prototype.kMassc=null,yt.prototype.kMasse=null,yt.prototype.kMassf=null,yt.prototype.jAccx=null,yt.prototype.jAccy=null,yt.prototype.jAccz=null,yt.prototype.jMax=null,yt.prototype.gamma=null,yt.prototype.biasx=null,yt.prototype.biasy=null,yt.prototype.biasz=null,yt.prototype.stepped=null,yt.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new G(null,null,n,r.zpp_inner_zn.wrap_a2);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b1.id){a=p.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var l=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){l=u.bc;break}}null!=l?o.zpp_inner_zn.b2=l.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},yt.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: WeldJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},yt.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},yt.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var f=x.parent;x.parent=m,m=x,x=f}for(;null!=m;){var v=m.parent;m.parent=x,m=v}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},yt.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},yt.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.jAccz=0,this.pre_dt=-1},yt.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i=this.b1.smass+this.b2.smass;if(this.kMassa=i,this.kMassb=0,this.kMassd=i,this.kMassc=0,this.kMasse=0,(this.kMassf=0)!=this.b1.sinertia){var n=this.a1relx*this.b1.sinertia,r=this.a1rely*this.b1.sinertia;this.kMassa+=r*this.a1rely,this.kMassb+=-r*this.a1relx,this.kMassd+=n*this.a1relx,this.kMassc+=-r,this.kMasse+=n,this.kMassf+=this.b1.sinertia}if(0!=this.b2.sinertia){var o=this.a2relx*this.b2.sinertia,a=this.a2rely*this.b2.sinertia;this.kMassa+=a*this.a2rely,this.kMassb+=-a*this.a2relx,this.kMassd+=o*this.a2relx,this.kMassc+=-a,this.kMasse+=o,this.kMassf+=this.b2.sinertia}var s,p=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);if(p!=p)this.kMassa=0,this.kMassb=0,this.kMassd=0,this.kMassc=0,this.kMasse=0,this.kMassf=0,s=7;else if(0==p){var l=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,l=1),0!=this.kMassd?this.kMassd=1/this.kMassd:(this.kMassd=0,l|=2),0!=this.kMassf?this.kMassf=1/this.kMassf:(this.kMassf=0,l|=4),this.kMassb=this.kMassc=this.kMasse=0,s=l}else{var h=(p=1/p)*(this.kMassd*this.kMassf-this.kMasse*this.kMasse),u=p*(this.kMasse*this.kMassc-this.kMassb*this.kMassf),d=p*(this.kMassa*this.kMassf-this.kMassc*this.kMassc),c=p*(this.kMassb*this.kMasse-this.kMassc*this.kMassd),_=p*(this.kMassb*this.kMassc-this.kMassa*this.kMasse),y=this.kMassa*this.kMassd-this.kMassb*this.kMassb;this.kMassa=h,this.kMassb=u,this.kMassd=d,this.kMassc=c,this.kMasse=_,this.kMassf=p*y,s=0}if(0!=(1&s)&&(this.jAccx=0),0!=(2&s)&&(this.jAccy=0),0!=(4&s)&&(this.jAccz=0),this.stiff)this.biasx=0,this.biasy=0,this.biasz=0,this.gamma=0;else{var x,m=2*Math.PI*this.frequency;this.gamma=1/(e*m*(2*this.damping+m*e));var f=1/(1+this.gamma);if(x=e*m*m*this.gamma,this.gamma*=f,this.kMassa*=f,this.kMassb*=f,this.kMassd*=f,this.kMassc*=f,this.kMasse*=f,this.kMassf*=f,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.biasz=this.b2.rot-this.b1.rot-this.phase,this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError)return!0;var v=-x;this.biasx*=v,this.biasy*=v,this.biasz*=v;var g=this.maxError,z=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;if(g*g<z){var b=g*(1/Math.sqrt(z));this.biasx*=b,this.biasy*=b,this.biasz*=b}}return this.jAccx*=t,this.jAccy*=t,this.jAccz*=t,this.jMax=this.maxForce*e,!1},yt.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.jAccx*e,this.b1.vely-=this.jAccy*e;var t=this.b2.imass;this.b2.velx+=this.jAccx*t,this.b2.vely+=this.jAccy*t,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},yt.prototype.applyImpulseVel=function(){var e,t,i;e=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),t=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel)),i=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel;var n=0,r=0,o=0;n=this.biasx-e,r=this.biasy-t,o=this.biasz-i;var a=this.kMassa*n+this.kMassb*r+this.kMassc*o,s=this.kMassb*n+this.kMassd*r+this.kMasse*o;o=this.kMassc*n+this.kMasse*r+this.kMassf*o,n=a,r=s;var p=this.gamma;n-=this.jAccx*p,r-=this.jAccy*p,o-=this.jAccz*p;var l,h,u;if(l=this.jAccx,h=this.jAccy,u=this.jAccz,this.jAccx+=n,this.jAccy+=r,this.jAccz+=o,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax)return!0}else if(!this.stiff){var d=this.jMax,c=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz;if(d*d<c){var _=d*(1/Math.sqrt(c));this.jAccx*=_,this.jAccy*=_,this.jAccz*=_}}n=this.jAccx-l,r=this.jAccy-h,o=this.jAccz-u;var y=this.b1.imass;this.b1.velx-=n*y,this.b1.vely-=r*y;var x=this.b2.imass;return this.b2.velx+=n*x,this.b2.vely+=r*x,this.b1.angvel-=(r*this.a1relx-n*this.a1rely+o)*this.b1.iinertia,this.b2.angvel+=(r*this.a2relx-n*this.a2rely+o)*this.b2.iinertia,!1},yt.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i,n;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,n=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r=0,o=0,a=0;r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),a=this.b2.rot-this.b1.rot-this.phase;var s=0,p=0,l=0;if(this.breakUnderError&&r*r+o*o+a*a>this.maxError*this.maxError)return!0;var h=!0;r*r+o*o<Qs.constraintLinearSlop*Qs.constraintLinearSlop&&(h=!1,o=r=0);var u=a*a,d=Qs.constraintAngularSlop;if(u<d*d){if(!h)return!1;a=0}if(a*=.5,6<(r*=.5)*r+(o*=.5)*o){var c=this.b1.smass+this.b2.smass;if(c>Qs.epsilon){var _=(s=-r*(c=.75/c))*s+(p=-o*c)*p;if(400<_){var y=1/Math.sqrt(_)*20;s*=y,p*=y}var x=this.b1.imass;this.b1.posx-=s*x,this.b1.posy-=p*x;var m=this.b2.imass;this.b2.posx+=s*m,this.b2.posy+=p*m,r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),a=this.b2.rot-this.b1.rot-this.phase,r*=.5,o*=.5,a*=.5}}var f=0,v=0,g=0,z=0,b=0,w=0,S=this.b1.smass+this.b2.smass;if(g=f=S,(w=b=z=v=0)!=this.b1.sinertia){var C=e*this.b1.sinertia,M=t*this.b1.sinertia;f=S+M*t,v+=-M*e,g=S+C*e,z+=-M,b+=C,w+=this.b1.sinertia}if(0!=this.b2.sinertia){var P=i*this.b2.sinertia,k=n*this.b2.sinertia;f+=k*n,v+=-k*i,g+=P*i,z+=-k,b+=P,w+=this.b2.sinertia}l=-a;var T=(s=-r)*s+(p=-o)*p;if(36<T){var G=1/Math.sqrt(T)*6;s*=G,p*=G}var O=f*(g*w-b*b)+v*(z*b-v*w)+z*(v*b-z*g);if(O!=O)s=p=l=0;else if(0==O)0!=f?s/=f:s=0,0!=g?p/=g:p=0,0!=w?l/=w:l=0;else{var A=b*z-v*w,E=v*b-z*g,I=v*z-f*b,B=(O=1/O)*(s*(g*w-b*b)+p*A+l*E),L=O*(s*A+p*(f*w-z*z)+l*I);l=O*(s*E+p*I+l*(f*g-v*v)),s=B,p=L}var D=this.b1.imass;this.b1.posx-=s*D,this.b1.posy-=p*D;var R=this.b2.imass;this.b2.posx+=s*R,this.b2.posy+=p*R;var F=this.b1,j=-(p*e-s*t+l)*this.b1.iinertia;if(F.rot+=j,1e-4<j*j)F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot);else{var N=j*j,U=1-.5*N,H=1-N*N/8,V=(U*F.axisx+j*F.axisy)*H;F.axisy=(U*F.axisy-j*F.axisx)*H,F.axisx=V}var W=this.b2,X=(p*i-s*n+l)*this.b2.iinertia;if(W.rot+=X,1e-4<X*X)W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot);else{var q=X*X,Y=1-.5*q,Z=1-q*q/8,K=(Y*W.axisx+X*W.axisy)*Z;W.axisy=(Y*W.axisy-X*W.axisx)*Z,W.axisx=K}return!1},yt.prototype.draw=function(e){},yt.prototype.__class__=yt;var ln=zpp_nape.dynamics.ZPP_Arbiter=function(){this.sensorarb=null,this.fluidarb=null,this.colarb=null,this.type=0,this.pair=null,this.ws2=null,this.ws1=null,this.b2=null,this.b1=null,this.invalidated=!1,this.immState=0,this.fresh=!1,this.continuous=!1,this.presentable=!1,this.intchange=!1,this.present=0,this.sleeping=!1,this.cleared=!1,this.active=!1,this.endGenerated=0,this.sleep_stamp=0,this.up_stamp=0,this.stamp=0,this.di=0,this.id=0,this.hnext=null,this.outer=null};ln.__name__=["zpp_nape","dynamics","ZPP_Arbiter"],ln.prototype.outer=null,ln.prototype.wrapper=function(){return null==this.outer&&(ln.internal=!0,this.type==ln.COL?(this.colarb.outer_zn=new I,this.outer=this.colarb.outer_zn):this.type==ln.FLUID?(this.fluidarb.outer_zn=new D,this.outer=this.fluidarb.outer_zn):this.outer=new O,this.outer.zpp_inner=this,ln.internal=!1),this.outer},ln.prototype.inactiveme=function(){return!this.active},ln.prototype.hnext=null,ln.prototype.id=null,ln.prototype.di=null,ln.prototype.stamp=null,ln.prototype.up_stamp=null,ln.prototype.sleep_stamp=null,ln.prototype.endGenerated=null,ln.prototype.active=null,ln.prototype.cleared=null,ln.prototype.sleeping=null,ln.prototype.present=null,ln.prototype.intchange=null,ln.prototype.presentable=null,ln.prototype.continuous=null,ln.prototype.fresh=null,ln.prototype.immState=null,ln.prototype.acting=function(){return!!this.active&&0!=(1&this.immState)},ln.prototype.invalidated=null,ln.prototype.b1=null,ln.prototype.b2=null,ln.prototype.ws1=null,ln.prototype.ws2=null,ln.prototype.pair=null,ln.prototype.swap_features=function(){var e=this.b1;this.b1=this.b2,this.b2=e;var t=this.ws1;this.ws1=this.ws2,this.ws2=t;var i=this.colarb.s1;this.colarb.s1=this.colarb.s2,this.colarb.s2=i},ln.prototype.type=null,ln.prototype.colarb=null,ln.prototype.fluidarb=null,ln.prototype.sensorarb=null,ln.prototype.lazyRetire=function(e,t){if(this.cleared=!0,null==t||this.b2==t)for(var i=this.b1.arbiters,n=null,r=i.head;null!=r;){if(r.elt==this){var o,a;null==n?(a=(o=i.head).next,i.head=a,null==i.head&&(i.pushmod=!0)):(a=(o=n.next).next,null==(n.next=a)&&(i.pushmod=!0));var s=o;s.elt=null,s.next=Zo.zpp_pool,Zo.zpp_pool=s,i.modified=!0,i.length--,i.pushmod=!0;break}r=(n=r).next}if(null==t||this.b1==t)for(var p=this.b2.arbiters,l=null,h=p.head;null!=h;){if(h.elt==this){var u,d;null==l?(d=(u=p.head).next,p.head=d,null==p.head&&(p.pushmod=!0)):(d=(u=l.next).next,null==(l.next=d)&&(p.pushmod=!0));var c=u;c.elt=null,c.next=Zo.zpp_pool,Zo.zpp_pool=c,p.modified=!0,p.length--,p.pushmod=!0;break}h=(l=h).next}null!=this.pair&&(this.pair.arb=null,this.pair=null),this.active=!1,e.f_arbiters.modified=!0},ln.prototype.sup_assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Zo.zpp_pool?r=new Zo:(r=Zo.zpp_pool,Zo.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,p=this.b2.arbiters;null==Zo.zpp_pool?s=new Zo:(s=Zo.zpp_pool,Zo.zpp_pool=s.next,s.next=null),s.elt=this;var l=s;l.next=p.head,p.head=l,p.modified=!0,p.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},ln.prototype.sup_retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,p=a.head;null!=p;){if(p.elt==this){var l,h;null==s?(h=(l=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(l=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=l;u.elt=null,u.next=Zo.zpp_pool,Zo.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}p=(s=p).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1},ln.prototype.__class__=ln;var Ho=zpp_nape.dynamics.ZPP_SensorArbiter=function(){this.next=null,ln.call(this),this.type=ln.SENSOR,this.sensorarb=this};Ho.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"],Ho.__super__=ln,Ho.prototype=Object.create(ln.prototype),Ho.prototype.next=null,Ho.prototype.alloc=function(){},Ho.prototype.free=function(){},Ho.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Zo.zpp_pool?r=new Zo:(r=Zo.zpp_pool,Zo.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,p=this.b2.arbiters;null==Zo.zpp_pool?s=new Zo:(s=Zo.zpp_pool,Zo.zpp_pool=s.next,s.next=null),s.elt=this;var l=s;l.next=p.head,p.head=l,p.modified=!0,p.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},Ho.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,p=a.head;null!=p;){if(p.elt==this){var l,h;null==s?(h=(l=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(l=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=l;u.elt=null,u.next=Zo.zpp_pool,Zo.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}p=(s=p).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1;this.next=Ho.zpp_pool,Ho.zpp_pool=this},Ho.prototype.makemutable=function(){},Ho.prototype.makeimmutable=function(){},Ho.prototype.__class__=Ho;var Vo=zpp_nape.dynamics.ZPP_FluidArbiter=function(){this.pre_dt=0,this.mutable=!1,this.wrap_position=null,this.buoyy=0,this.buoyx=0,this.ny=0,this.nx=0,this.lgamma=0,this.dampy=0,this.dampx=0,this.vMassc=0,this.vMassb=0,this.vMassa=0,this.agamma=0,this.adamp=0,this.wMass=0,this.nodrag=!1,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0,this.overlap=0,this.centroidy=0,this.centroidx=0,this.next=null,this.outer_zn=null,ln.call(this),this.type=ln.FLUID,(this.fluidarb=this).buoyx=0,this.buoyy=0,this.pre_dt=-1};Vo.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"],Vo.__super__=ln,Vo.prototype=Object.create(ln.prototype),Vo.prototype.outer_zn=null,Vo.prototype.next=null,Vo.prototype.alloc=function(){},Vo.prototype.free=function(){},Vo.prototype.centroidx=null,Vo.prototype.centroidy=null,Vo.prototype.overlap=null,Vo.prototype.r1x=null,Vo.prototype.r1y=null,Vo.prototype.r2x=null,Vo.prototype.r2y=null,Vo.prototype.nodrag=null,Vo.prototype.wMass=null,Vo.prototype.adamp=null,Vo.prototype.agamma=null,Vo.prototype.vMassa=null,Vo.prototype.vMassb=null,Vo.prototype.vMassc=null,Vo.prototype.dampx=null,Vo.prototype.dampy=null,Vo.prototype.lgamma=null,Vo.prototype.nx=null,Vo.prototype.ny=null,Vo.prototype.buoyx=null,Vo.prototype.buoyy=null,Vo.prototype.position_validate=function(){this.wrap_position.zpp_inner.x=this.centroidx,this.wrap_position.zpp_inner.y=this.centroidy},Vo.prototype.position_invalidate=function(e){this.centroidx=e.x,this.centroidy=e.y},Vo.prototype.wrap_position=null,Vo.prototype.getposition=function(){var e;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==ep.zpp_pool?t=new ep:(t=ep.zpp_pool,ep.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_position=e,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!this.mutable,this.wrap_position.zpp_inner._validate=$(this,this.position_validate),this.wrap_position.zpp_inner._invalidate=$(this,this.position_invalidate)},Vo.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Zo.zpp_pool?r=new Zo:(r=Zo.zpp_pool,Zo.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,p=this.b2.arbiters;null==Zo.zpp_pool?s=new Zo:(s=Zo.zpp_pool,Zo.zpp_pool=s.next,s.next=null),s.elt=this;var l=s;l.next=p.head,p.head=l,p.modified=!0,p.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.nx=0,this.ny=1,this.dampx=0,this.dampy=0,this.adamp=0},Vo.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,p=a.head;null!=p;){if(p.elt==this){var l,h;null==s?(h=(l=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(l=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=l;u.elt=null,u.next=Zo.zpp_pool,Zo.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}p=(s=p).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1;this.next=Vo.zpp_pool,(Vo.zpp_pool=this).pre_dt=-1},Vo.prototype.mutable=null,Vo.prototype.makemutable=function(){this.mutable=!0,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!1)},Vo.prototype.makeimmutable=function(){this.mutable=!1,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!0)},Vo.prototype.inject=function(e,t,i){this.overlap=e,this.centroidx=t,this.centroidy=i},Vo.prototype.pre_dt=null,Vo.prototype.preStep=function(e,t){-1==this.pre_dt&&(this.pre_dt=t);var i=t/this.pre_dt;this.pre_dt=t,this.r1x=this.centroidx-this.b1.posx,this.r1y=this.centroidy-this.b1.posy,this.r2x=this.centroidx-this.b2.posx,this.r2y=this.centroidy-this.b2.posy;var n=0,r=0;r=this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(n=this.ws1.fluidProperties.gravityx,this.ws1.fluidProperties.gravityy):(n=e.gravityx,e.gravityy);var o=0,a=0;a=this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(o=this.ws2.fluidProperties.gravityx,this.ws2.fluidProperties.gravityy):(o=e.gravityx,e.gravityy);var s=0,p=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var l=this.overlap*this.ws1.fluidProperties.density,h=this.overlap*this.ws2.fluidProperties.density;if(h<l){var u=l+h;s-=n*u,p-=r*u}else if(l<h){var d=l+h;s+=o*d,p+=a*d}else{var c=0,_=0;if(c=n+o,_=r+a,c*=.5,_*=.5,this.ws1.worldCOMx*c+this.ws1.worldCOMy*_>this.ws2.worldCOMx*c+this.ws2.worldCOMy*_){var y=l+h;s-=c*y,p-=_*y}else{var x=l+h;s+=c*x,p+=_*x}}}else if(this.ws1.fluidEnabled){var m=this.overlap*this.ws1.fluidProperties.density;s-=n*m,p-=r*m}else if(this.ws2.fluidEnabled){var f=this.overlap*this.ws2.fluidProperties.density;s+=o*f,p+=a*f}if(s*=t,p*=t,this.buoyx=s,this.buoyy=p,2==this.b1.type){var v=this.b1.imass;this.b1.velx-=s*v,this.b1.vely-=p*v,this.b1.angvel-=(p*this.r1x-s*this.r1y)*this.b1.iinertia}if(2==this.b2.type){var g=this.b2.imass;this.b2.velx+=s*g,this.b2.vely+=p*g,this.b2.angvel+=(p*this.r2x-s*this.r2y)*this.b2.iinertia}if(this.ws1.fluidEnabled&&0!=this.ws1.fluidProperties.viscosity||this.ws2.fluidEnabled&&0!=this.ws2.fluidProperties.viscosity){this.nodrag=!1;var z=0;if(this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),z=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area),this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),z+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area),0!=z){var b=this.b1.sinertia+this.b2.sinertia;this.wMass=0!=b?1/b:0,z*=4e-4;var w=2*Math.PI*z;this.agamma=1/(t*w*(2+w*t));var S=1/(1+this.agamma);this.agamma*=S,this.wMass*=S}else this.wMass=0,this.agamma=0;var C=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel)),M=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));if(!(C*C+M*M<Qs.epsilon*Qs.epsilon)){var P=1/Math.sqrt(C*C+M*M);C*=P,M*=P,this.nx=C,this.ny=M}var k=0;if(this.ws1.fluidEnabled){var T=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area;if(0==this.ws2.type)k=0-T*this.ws2.circle.radius*Qs.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{for(var G=0,O=0,A=this.ws2.polygon.edges.head;null!=A;){var E=A.elt;G+=E.length;var I=T*E.length*(E.gnormx*this.nx+E.gnormy*this.ny);0<I&&(I=I*=-Qs.fluidVacuumDrag),O-=.5*I*Qs.fluidLinearDrag,A=A.next}k=O/G}}if(this.ws2.fluidEnabled){var B=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area;if(0==this.ws1.type)k-=B*this.ws1.circle.radius*Qs.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{for(var L=0,D=0,R=this.ws1.polygon.edges.head;null!=R;){var F=R.elt;L+=F.length;var j=B*F.length*(F.gnormx*this.nx+F.gnormy*this.ny);0<j&&(j=j*=-Qs.fluidVacuumDrag),D-=.5*j*Qs.fluidLinearDrag,R=R.next}k+=D/L}}if(0!=k){var N=this.b1.smass+this.b2.smass,U=0,H=0,V=0;if(V=U=N,(H=0)!=this.b1.sinertia){var W=this.r1x*this.b1.sinertia,X=this.r1y*this.b1.sinertia;U=N+X*this.r1y,H+=-X*this.r1x,V=N+W*this.r1x}if(0!=this.b2.sinertia){var q=this.r2x*this.b2.sinertia,Y=this.r2y*this.b2.sinertia;U+=Y*this.r2y,H+=-Y*this.r2x,V+=q*this.r2x}var Z=U*V-H*H;if(Z!=Z)U=H=V=0;else if(0==Z)U=0!=U?1/U:0,V=0!=V?1/V:0,H=0;else{var K=V*(Z=1/Z);V=U*Z,U=K,H*=-Z}this.vMassa=U,this.vMassb=H,this.vMassc=V;var J=2*Math.PI*k;this.lgamma=1/(t*J*(2+J*t));var Q=1/(1+this.lgamma);this.lgamma*=Q,this.vMassa*=Q,this.vMassb*=Q,this.vMassc*=Q}else this.vMassa=0,this.vMassb=0,this.vMassc=0,this.lgamma=0}else this.nodrag=!0,this.dampx=0,this.dampy=0,this.adamp=0;this.dampx*=i,this.dampy*=i,this.adamp*=i},Vo.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.dampx*e,this.b1.vely-=this.dampy*e;var t=this.b2.imass;this.b2.velx+=this.dampx*t,this.b2.vely+=this.dampy*t,this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y),this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y),this.b1.angvel-=this.adamp*this.b1.iinertia,this.b2.angvel+=this.adamp*this.b2.iinertia},Vo.prototype.applyImpulseVel=function(){if(!this.nodrag){var e=this.b1.angvel+this.b1.kinangvel,t=this.b2.angvel+this.b2.kinangvel,i=this.b1.velx+this.b1.kinvelx-this.r1y*e-(this.b2.velx+this.b2.kinvelx-this.r2y*t),n=this.b1.vely+this.b1.kinvely+this.r1x*e-(this.b2.vely+this.b2.kinvely+this.r2x*t),r=this.vMassa*i+this.vMassb*n;n=this.vMassb*i+this.vMassc*n,i=r;var o=this.lgamma;i-=this.dampx*o,n-=this.dampy*o,this.dampx+=i,this.dampy+=n;var a=this.b1.imass;this.b1.velx-=i*a,this.b1.vely-=n*a;var s=this.b2.imass;this.b2.velx+=i*s,this.b2.vely+=n*s,this.b1.angvel-=this.b1.iinertia*(n*this.r1x-i*this.r1y),this.b2.angvel+=this.b2.iinertia*(n*this.r2x-i*this.r2y);var p=(e-t)*this.wMass-this.adamp*this.agamma;this.adamp+=p,this.b1.angvel-=p*this.b1.iinertia,this.b2.angvel+=p*this.b2.iinertia}},Vo.prototype.__class__=Vo;var Wo=zpp_nape.dynamics.ZPP_ColArbiter=function(){this.pre_dt=0,this.mutable=!1,this.stat=!1,this.next=null,this.hpc2=!1,this.hc2=!1,this.oc2=null,this.c2=null,this.oc1=null,this.c1=null,this.__ref_vertex=0,this.__ref_edge2=null,this.__ref_edge1=null,this.biasCoef=0,this.rev=!1,this.radius=0,this.lproj=0,this.lnormy=0,this.lnormx=0,this.surfacey=0,this.surfacex=0,this.k2y=0,this.k2x=0,this.k1y=0,this.k1x=0,this.rt2b=0,this.rn2b=0,this.rt2a=0,this.rn2a=0,this.rt1b=0,this.rn1b=0,this.rt1a=0,this.rn1a=0,this.jrAcc=0,this.rMass=0,this.Kc=0,this.Kb=0,this.Ka=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_normal=null,this.ny=0,this.nx=0,this.innards=null,this.wrap_contacts=null,this.contacts=null,this.s2=null,this.s1=null,this.userdef_rfric=!1,this.userdef_restitution=!1,this.userdef_stat_fric=!1,this.userdef_dyn_fric=!1,this.rfric=0,this.restitution=0,this.stat_fric=0,this.dyn_fric=0,this.outer_zn=null,ln.call(this),this.pre_dt=-1,this.contacts=new Xo,this.innards=new xt,this.type=ln.COL,this.colarb=this};Wo.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"],Wo.__super__=ln,Wo.prototype=Object.create(ln.prototype),Wo.prototype.outer_zn=null,Wo.prototype.dyn_fric=null,Wo.prototype.stat_fric=null,Wo.prototype.restitution=null,Wo.prototype.rfric=null,Wo.prototype.userdef_dyn_fric=null,Wo.prototype.userdef_stat_fric=null,Wo.prototype.userdef_restitution=null,Wo.prototype.userdef_rfric=null,Wo.prototype.s1=null,Wo.prototype.s2=null,Wo.prototype.contacts=null,Wo.prototype.wrap_contacts=null,Wo.prototype.innards=null,Wo.prototype.nx=null,Wo.prototype.ny=null,Wo.prototype.normal_validate=function(){if(this.cleared)throw new r("Error: Arbiter not currently in use");this.wrap_normal.zpp_inner.x=this.nx,this.wrap_normal.zpp_inner.y=this.ny,this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},Wo.prototype.wrap_normal=null,Wo.prototype.getnormal=function(){var e;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==ep.zpp_pool?t=new ep:(t=ep.zpp_pool,ep.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_normal=e,this.wrap_normal.zpp_inner._immutable=!0,this.wrap_normal.zpp_inner._inuse=!0,this.wrap_normal.zpp_inner._validate=$(this,this.normal_validate)},Wo.prototype.kMassa=null,Wo.prototype.kMassb=null,Wo.prototype.kMassc=null,Wo.prototype.Ka=null,Wo.prototype.Kb=null,Wo.prototype.Kc=null,Wo.prototype.rMass=null,Wo.prototype.jrAcc=null,Wo.prototype.rn1a=null,Wo.prototype.rt1a=null,Wo.prototype.rn1b=null,Wo.prototype.rt1b=null,Wo.prototype.rn2a=null,Wo.prototype.rt2a=null,Wo.prototype.rn2b=null,Wo.prototype.rt2b=null,Wo.prototype.k1x=null,Wo.prototype.k1y=null,Wo.prototype.k2x=null,Wo.prototype.k2y=null,Wo.prototype.surfacex=null,Wo.prototype.surfacey=null,Wo.prototype.ptype=null,Wo.prototype.lnormx=null,Wo.prototype.lnormy=null,Wo.prototype.lproj=null,Wo.prototype.radius=null,Wo.prototype.rev=null,Wo.prototype.biasCoef=null,Wo.prototype.__ref_edge1=null,Wo.prototype.__ref_edge2=null,Wo.prototype.__ref_vertex=null,Wo.prototype.c1=null,Wo.prototype.oc1=null,Wo.prototype.c2=null,Wo.prototype.oc2=null,Wo.prototype.hc2=null,Wo.prototype.hpc2=null,Wo.prototype.next=null,Wo.prototype.alloc=function(){},Wo.prototype.free=function(){this.userdef_dyn_fric=!1,this.userdef_stat_fric=!1,this.userdef_restitution=!1,this.userdef_rfric=!1,this.__ref_edge1=this.__ref_edge2=null},Wo.prototype.stat=null,Wo.prototype.injectContact=function(e,t,i,n,r,o,a){null==a&&(a=!1);for(var s=null,p=this.contacts.next;null!=p;){var l=p;if(o==l.hash){s=l;break}p=p.next}if(null==s){null==Xo.zpp_pool?s=new Xo:(s=Xo.zpp_pool,Xo.zpp_pool=s.next,s.next=null);var h=s.inner;h.jnAcc=h.jtAcc=0,s.hash=o,s.fresh=!0,(s.arbiter=this).jrAcc=0;var u=this.contacts;s._inuse=!0;var d=s;d.next=u.next,u.next=d,u.modified=!0,u.length++,this.innards.add(h)}else s.fresh=!1;return s.px=e,s.py=t,this.nx=i,this.ny=n,s.dist=r,s.stamp=this.stamp,s.posOnly=a,s},Wo.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Zo.zpp_pool?r=new Zo:(r=Zo.zpp_pool,Zo.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,p=this.b2.arbiters;null==Zo.zpp_pool?s=new Zo:(s=Zo.zpp_pool,Zo.zpp_pool=s.next,s.next=null),s.elt=this;var l=s;l.next=p.head,p.head=l,p.modified=!0,p.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.s1=e,this.s2=t,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},Wo.prototype.calcProperties=function(){this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},Wo.prototype.validate_props=function(){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)))},Wo.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,p=a.head;null!=p;){if(p.elt==this){var l,h;null==s?(h=(l=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(l=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=l;u.elt=null,u.next=Zo.zpp_pool,Zo.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}p=(s=p).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}for(this.b1=this.b2=null,this.active=!1,this.intchange=!1;null!=this.contacts.next;){var d=this.contacts,c=d.next;d.pop(),c.arbiter=null,c.next=Xo.zpp_pool,Xo.zpp_pool=c;var _=this.innards,y=_.next;_.next=y.next,y._inuse=!1,null==_.next&&(_.pushmod=!0),_.modified=!0,_.length--}this.userdef_dyn_fric=!1,this.userdef_stat_fric=!1,this.userdef_restitution=!1,this.userdef_rfric=!1,this.__ref_edge1=this.__ref_edge2=null,this.next=Wo.zpp_pool,(Wo.zpp_pool=this).pre_dt=-1},Wo.prototype.mutable=null,Wo.prototype.makemutable=function(){this.mutable=!0,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!1),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!1)},Wo.prototype.makeimmutable=function(){this.mutable=!1,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!0),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!0)},Wo.prototype.contacts_adder=function(e){return!1},Wo.prototype.contacts_subber=function(e){for(var t=null,i=null,n=this.innards.next,r=this.contacts.next;null!=r;){var o=r;if(o==e.zpp_inner){this.contacts.erase(t),this.innards.erase(i),o.arbiter=null,o.next=Xo.zpp_pool,Xo.zpp_pool=o;break}t=r,n=(i=n).next,r=r.next}},Wo.prototype.setupcontacts=function(){this.wrap_contacts=Rn.get(this.contacts,!0),this.wrap_contacts.zpp_inner.immutable=!this.mutable,this.wrap_contacts.zpp_inner.adder=$(this,this.contacts_adder),this.wrap_contacts.zpp_inner.dontremove=!0,this.wrap_contacts.zpp_inner.subber=$(this,this.contacts_subber)},Wo.prototype.cleanupContacts=function(){var e=!0,t=null,i=null,n=this.innards.next;this.hc2=!1;for(var r=this.contacts.next;null!=r;){var o=r;if(o.stamp+Qs.arbiterExpirationDelay<this.stamp){var a,s,p=this.contacts;null==t?(s=(a=p.next).next,p.next=s,null==p.next&&(p.pushmod=!0)):(s=(a=t.next).next,null==(t.next=s)&&(p.pushmod=!0)),a._inuse=!1,p.modified=!0,p.length--,p.pushmod=!0,r=s;var l,h,u=this.innards;null==i?(h=(l=u.next).next,u.next=h,null==u.next&&(u.pushmod=!0)):(h=(l=i.next).next,null==(i.next=h)&&(u.pushmod=!0)),l._inuse=!1,u.modified=!0,u.length--,u.pushmod=!0,n=h,o.arbiter=null,o.next=Xo.zpp_pool,Xo.zpp_pool=o}else{var d=o.inner,c=o.active;o.active=o.stamp==this.stamp,o.active&&(e?(e=!1,this.c1=d,this.oc1=o):(this.hc2=!0,this.c2=d,this.oc2=o)),c!=o.active&&(this.contacts.modified=!0),t=r,n=(i=n).next,r=r.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var _=this.c1;this.c1=this.c2,this.c2=_;var y=this.oc1;this.oc1=this.oc2,this.oc2=y,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(e=!0)}else this.hpc2=!1;return e},Wo.prototype.pre_dt=null,Wo.prototype.preStep=function(e){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))),-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e;var i=this.b1.smass+this.b2.smass,n=!(this.hc2=!1);this.biasCoef=2!=this.b1.type||2!=this.b2.type?this.continuous?Qs.contactContinuousStaticBiasCoef:Qs.contactStaticBiasCoef:this.continuous?Qs.contactContinuousBiasCoef:Qs.contactBiasCoef,this.continuous=!1;for(var r=null,o=null,a=this.innards.next,s=this.contacts.next;null!=s;){var p=s;if(p.stamp+Qs.arbiterExpirationDelay<this.stamp){var l,h,u=this.contacts;null==r?(h=(l=u.next).next,u.next=h,null==u.next&&(u.pushmod=!0)):(h=(l=r.next).next,null==(r.next=h)&&(u.pushmod=!0)),l._inuse=!1,u.modified=!0,u.length--,u.pushmod=!0,s=h;var d,c,_=this.innards;null==o?(c=(d=_.next).next,_.next=c,null==_.next&&(_.pushmod=!0)):(c=(d=o.next).next,null==(o.next=c)&&(_.pushmod=!0)),d._inuse=!1,_.modified=!0,_.length--,_.pushmod=!0,a=c,p.arbiter=null,p.next=Xo.zpp_pool,Xo.zpp_pool=p}else{var y=p.inner,x=p.active;if(p.active=p.stamp==this.stamp,p.active){n?(n=!1,this.c1=y,this.oc1=p):(this.hc2=!0,this.c2=y,this.oc2=p),y.r2x=p.px-this.b2.posx,y.r2y=p.py-this.b2.posy,y.r1x=p.px-this.b1.posx,y.r1y=p.py-this.b1.posy;var m=y.r2x*this.nx+y.r2y*this.ny,f=i+this.b2.sinertia*(m*m),v=y.r1x*this.nx+y.r1y*this.ny;f+=this.b1.sinertia*(v*v),y.tMass=f<Qs.epsilon*Qs.epsilon?0:1/f;var g=this.ny*y.r2x-this.nx*y.r2y,z=i+this.b2.sinertia*(g*g),b=this.ny*y.r1x-this.nx*y.r1y;z+=this.b1.sinertia*(b*b),y.nMass=z<Qs.epsilon*Qs.epsilon?0:1/z;var w=0,S=0,C=this.b2.angvel+this.b2.kinangvel;w=this.b2.velx+this.b2.kinvelx-y.r2y*C,S=this.b2.vely+this.b2.kinvely+y.r2x*C,C=this.b1.angvel+this.b1.kinangvel,w-=this.b1.velx+this.b1.kinvelx-y.r1y*C,S-=this.b1.vely+this.b1.kinvely+y.r1x*C;var M=this.nx*w+this.ny*S;p.elasticity=this.restitution,y.bounce=M*p.elasticity,y.bounce>-Qs.elasticThreshold&&(y.bounce=0),M=S*this.nx-w*this.ny;var P=Qs.staticFrictionThreshold;y.friction=P*P<M*M?this.dyn_fric:this.stat_fric,y.jnAcc*=t,y.jtAcc*=t}x!=p.active&&(this.contacts.modified=!0),r=s,a=(o=a).next,s=s.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var k=this.c1;this.c1=this.c2,this.c2=k;var T=this.oc1;this.oc1=this.oc2,this.oc2=T,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(n=!0)}else this.hpc2=!1;if(this.jrAcc*=t,n||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel)),this.hc2)if(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=i+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=i+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=i+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<Qs.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)){this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc;var G=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(G!=G)this.kMassa=this.kMassb=this.kMassc=0;else if(0==G)0!=this.kMassa?this.kMassa=1/this.kMassa:this.kMassa=0,0!=this.kMassc?this.kMassc=1/this.kMassc:this.kMassc=0,this.kMassb=0;else{G=1/G;var O=this.kMassc*G;this.kMassc=this.kMassa*G,this.kMassa=O,this.kMassb*=-G}}else{if(this.hc2=!1,this.oc2.dist<this.oc1.dist){var A=this.c1;this.c1=this.c2,this.c2=A}this.oc2.active=!1,this.contacts.modified=!0}return this.surfacex=this.b2.svelx,this.surfacey=this.b2.svely,this.surfacex+=this.b1.svelx,this.surfacey+=this.b1.svely,this.surfacex=-this.surfacex,this.surfacey=-this.surfacey,this.rMass=this.b1.sinertia+this.b2.sinertia,0!=this.rMass&&(this.rMass=1/this.rMass),n},Wo.prototype.warmStart=function(){var e=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,t=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,i=this.b1.imass;this.b1.velx-=e*i,this.b1.vely-=t*i,this.b1.angvel-=this.b1.iinertia*(t*this.c1.r1x-e*this.c1.r1y);var n=this.b2.imass;if(this.b2.velx+=e*n,this.b2.vely+=t*n,this.b2.angvel+=this.b2.iinertia*(t*this.c1.r2x-e*this.c1.r2y),this.hc2){var r=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,o=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,a=this.b1.imass;this.b1.velx-=r*a,this.b1.vely-=o*a,this.b1.angvel-=this.b1.iinertia*(o*this.c2.r1x-r*this.c2.r1y);var s=this.b2.imass;this.b2.velx+=r*s,this.b2.vely+=o*s,this.b2.angvel+=this.b2.iinertia*(o*this.c2.r2x-r*this.c2.r2y)}this.b2.angvel+=this.jrAcc*this.b2.iinertia,this.b1.angvel-=this.jrAcc*this.b1.iinertia},Wo.prototype.applyImpulseVel=function(){var e,t,i,n,r,o,a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);if(i=(s*this.nx-a*this.ny+this.surfacex)*this.c1.tMass,(n=this.c1.friction*this.c1.jnAcc)<(o=(r=this.c1.jtAcc)-i)?o=n:o<-n&&(o=-n),i=o-r,this.c1.jtAcc=o,e=-this.ny*i,t=this.nx*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rt1b*i*this.b2.iinertia,this.b1.angvel-=this.rt1a*i*this.b1.iinertia,this.hc2){var p=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),l=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);i=(l*this.nx-p*this.ny+this.surfacex)*this.c2.tMass,(n=this.c2.friction*this.c2.jnAcc)<(o=(r=this.c2.jtAcc)-i)?o=n:o<-n&&(o=-n),i=o-r,this.c2.jtAcc=o,e=-this.ny*i,t=this.nx*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rt2b*i*this.b2.iinertia,this.b1.angvel-=this.rt2a*i*this.b1.iinertia,a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),p=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),l=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);var h=this.c1.jnAcc,u=this.c2.jnAcc,d=a*this.nx+s*this.ny+this.surfacey+this.c1.bounce-(this.Ka*h+this.Kb*u),c=p*this.nx+l*this.ny+this.surfacey+this.c2.bounce-(this.Kb*h+this.Kc*u),_=-(this.kMassa*d+this.kMassb*c),y=-(this.kMassb*d+this.kMassc*c);0<=_&&0<=y?(d=_-h,c=y-u,this.c1.jnAcc=_,this.c2.jnAcc=y):0<=(_=-this.c1.nMass*d)&&0<=this.Kb*_+c?(d=_-h,c=-u,this.c1.jnAcc=_,this.c2.jnAcc=0):0<=(y=-this.c2.nMass*c)&&0<=this.Kb*y+d?(d=-h,c=y-u,this.c1.jnAcc=0,this.c2.jnAcc=y):0<=d&&0<=c?(d=-h,c=-u,this.c1.jnAcc=this.c2.jnAcc=0):c=d=0,i=d+c,e=this.nx*i,t=this.ny*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=(this.rn1b*d+this.rn2b*c)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*d+this.rn2a*c)*this.b1.iinertia}else 0!=this.radius&&(i=(this.b2.angvel-this.b1.angvel)*this.rMass,n=this.rfric*this.c1.jnAcc,r=this.jrAcc,this.jrAcc-=i,this.jrAcc>n?this.jrAcc=n:this.jrAcc<-n&&(this.jrAcc=-n),i=this.jrAcc-r,this.b2.angvel+=i*this.b2.iinertia,this.b1.angvel-=i*this.b1.iinertia),a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),i=(this.c1.bounce+(this.nx*a+this.ny*s)+this.surfacey)*this.c1.nMass,(o=(r=this.c1.jnAcc)-i)<0&&(o=0),i=o-r,this.c1.jnAcc=o,e=this.nx*i,t=this.ny*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rn1b*i*this.b2.iinertia,this.b1.angvel-=this.rn1a*i*this.b1.iinertia},Wo.prototype.applyImpulsePos=function(){if(2==this.ptype){var e=this.c1,t=0,i=0;t=this.b2.axisy*e.lr2x-this.b2.axisx*e.lr2y,i=e.lr2x*this.b2.axisx+e.lr2y*this.b2.axisy,t+=this.b2.posx,i+=this.b2.posy;var n=0,r=0;n=this.b1.axisy*e.lr1x-this.b1.axisx*e.lr1y,r=e.lr1x*this.b1.axisx+e.lr1y*this.b1.axisy;var o=0,a=0;o=t-(n+=this.b1.posx),a=i-(r+=this.b1.posy);var s=Math.sqrt(o*o+a*a),p=this.radius-Qs.collisionSlop,l=s-p;if(o*this.nx+a*this.ny<0&&(o=-o,a=-a,l-=this.radius),l<0)if(s<Qs.epsilon)0!=this.b1.smass?this.b1.posx+=10*Qs.epsilon:this.b2.posx+=10*Qs.epsilon;else{var h=1/s;o*=h;var u=.5*(n+t),d=.5*(r+i),c=s-p,_=(a*=h)*(n=u-this.b1.posx)-o*(r=d-this.b1.posy),y=a*(t=u-this.b2.posx)-o*(i=d-this.b2.posy),x=this.b2.smass+y*y*this.b2.sinertia+this.b1.smass+_*_*this.b1.sinertia;if(0!=x){var m,f,v=-this.biasCoef*c/x;m=o*v,f=a*v;var g=this.b1.imass;this.b1.posx-=m*g,this.b1.posy-=f*g;var z=this.b1,b=-_*this.b1.iinertia*v;if(z.rot+=b,1e-4<b*b)z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot);else{var w=b*b,S=1-.5*w,C=1-w*w/8,M=(S*z.axisx+b*z.axisy)*C;z.axisy=(S*z.axisy-b*z.axisx)*C,z.axisx=M}var P=this.b2.imass;this.b2.posx+=m*P,this.b2.posy+=f*P;var k=this.b2,T=y*this.b2.iinertia*v;if(k.rot+=T,1e-4<T*T)k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot);else{var G=T*T,O=1-.5*G,A=1-G*G/8,E=(O*k.axisx+T*k.axisy)*A;k.axisy=(O*k.axisy-T*k.axisx)*A,k.axisx=E}}}}else{var I,B=0,L=0,D=0,R=0,F=0,j=0;0==this.ptype?(B=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,L=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,I=this.lproj+(B*this.b1.posx+L*this.b1.posy),D=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,R=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,D+=this.b2.posx,R+=this.b2.posy,this.hpc2&&(F=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,j=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,F+=this.b2.posx,j+=this.b2.posy)):(B=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,L=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,I=this.lproj+(B*this.b2.posx+L*this.b2.posy),D=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,R=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,D+=this.b1.posx,R+=this.b1.posy,this.hpc2&&(F=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,j=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,F+=this.b1.posx,j+=this.b1.posy));var N=D*B+R*L-I-this.radius;N+=Qs.collisionSlop;var U=0;if(this.hpc2&&(U=F*B+j*L-I-this.radius,U+=Qs.collisionSlop),N<0||U<0){this.rev&&(B=-B,L=-L);var H,V;H=D-this.b1.posx,V=R-this.b1.posy;var W,X;W=D-this.b2.posx,X=R-this.b2.posy;if(this.hpc2){var q=L*H-B*V,Y=L*W-B*X,Z=L*(F-this.b1.posx)-B*(j-this.b1.posy),K=L*(F-this.b2.posx)-B*(j-this.b2.posy),J=this.b1.smass+this.b2.smass;this.kMassa=J+this.b1.sinertia*q*q+this.b2.sinertia*Y*Y,this.kMassb=J+this.b1.sinertia*q*Z+this.b2.sinertia*Y*K,this.kMassc=J+this.b1.sinertia*Z*Z+this.b2.sinertia*K*K;var Q,$,ee;Q=this.kMassa,$=this.kMassb,ee=this.kMassc;for(var te=N*this.biasCoef,ie=U*this.biasCoef;;){var ne=0,re=0;ne=-(ne=te),re=-(re=ie);var oe=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(oe!=oe)ne=re=0;else if(0==oe)0!=this.kMassa?ne/=this.kMassa:ne=0,0!=this.kMassc?re/=this.kMassc:re=0;else{var ae=(oe=1/oe)*(this.kMassc*ne-this.kMassb*re);re=oe*(this.kMassa*re-this.kMassb*ne),ne=ae}if(0<=ne&&0<=re){var se=(ne+re)*this.b1.imass;this.b1.posx-=B*se,this.b1.posy-=L*se;var pe=this.b1,le=-this.b1.iinertia*(q*ne+Z*re);if(pe.rot+=le,1e-4<le*le)pe.axisx=Math.sin(pe.rot),pe.axisy=Math.cos(pe.rot);else{var he=le*le,ue=1-.5*he,de=1-he*he/8,ce=(ue*pe.axisx+le*pe.axisy)*de;pe.axisy=(ue*pe.axisy-le*pe.axisx)*de,pe.axisx=ce}var _e=(ne+re)*this.b2.imass;this.b2.posx+=B*_e,this.b2.posy+=L*_e;var ye=this.b2,xe=this.b2.iinertia*(Y*ne+K*re);if(ye.rot+=xe,1e-4<xe*xe)ye.axisx=Math.sin(ye.rot),ye.axisy=Math.cos(ye.rot);else{var me=xe*xe,fe=1-.5*me,ve=1-me*me/8,ge=(fe*ye.axisx+xe*ye.axisy)*ve;ye.axisy=(fe*ye.axisy-xe*ye.axisx)*ve,ye.axisx=ge}break}if((re=0)<=(ne=-te/Q)&&0<=$*ne+ie){var ze=(ne+re)*this.b1.imass;this.b1.posx-=B*ze,this.b1.posy-=L*ze;var be=this.b1,we=-this.b1.iinertia*(q*ne+Z*re);if(be.rot+=we,1e-4<we*we)be.axisx=Math.sin(be.rot),be.axisy=Math.cos(be.rot);else{var Se=we*we,Ce=1-.5*Se,Me=1-Se*Se/8,Pe=(Ce*be.axisx+we*be.axisy)*Me;be.axisy=(Ce*be.axisy-we*be.axisx)*Me,be.axisx=Pe}var ke=(ne+re)*this.b2.imass;this.b2.posx+=B*ke,this.b2.posy+=L*ke;var Te=this.b2,Ge=this.b2.iinertia*(Y*ne+K*re);if(Te.rot+=Ge,1e-4<Ge*Ge)Te.axisx=Math.sin(Te.rot),Te.axisy=Math.cos(Te.rot);else{var Oe=Ge*Ge,Ae=1-.5*Oe,Ee=1-Oe*Oe/8,Ie=(Ae*Te.axisx+Ge*Te.axisy)*Ee;Te.axisy=(Ae*Te.axisy-Ge*Te.axisx)*Ee,Te.axisx=Ie}break}if((ne=0)<=(re=-ie/ee)&&0<=$*re+te){var Be=(ne+re)*this.b1.imass;this.b1.posx-=B*Be,this.b1.posy-=L*Be;var Le=this.b1,De=-this.b1.iinertia*(q*ne+Z*re);if(Le.rot+=De,1e-4<De*De)Le.axisx=Math.sin(Le.rot),Le.axisy=Math.cos(Le.rot);else{var Re=De*De,Fe=1-.5*Re,je=1-Re*Re/8,Ne=(Fe*Le.axisx+De*Le.axisy)*je;Le.axisy=(Fe*Le.axisy-De*Le.axisx)*je,Le.axisx=Ne}var Ue=(ne+re)*this.b2.imass;this.b2.posx+=B*Ue,this.b2.posy+=L*Ue;var He=this.b2,Ve=this.b2.iinertia*(Y*ne+K*re);if(He.rot+=Ve,1e-4<Ve*Ve)He.axisx=Math.sin(He.rot),He.axisy=Math.cos(He.rot);else{var We=Ve*Ve,Xe=1-.5*We,qe=1-We*We/8,Ye=(Xe*He.axisx+Ve*He.axisy)*qe;He.axisy=(Xe*He.axisy-Ve*He.axisx)*qe,He.axisx=Ye}break}break}}else{var Ze=L*H-B*V,Ke=L*W-B*X,Je=this.b2.smass+Ke*Ke*this.b2.sinertia+this.b1.smass+Ze*Ze*this.b1.sinertia;if(0!=Je){var Qe,$e,et=-this.biasCoef*N/Je;Qe=B*et,$e=L*et;var tt=this.b1.imass;this.b1.posx-=Qe*tt,this.b1.posy-=$e*tt;var it=this.b1,nt=-Ze*this.b1.iinertia*et;if(it.rot+=nt,1e-4<nt*nt)it.axisx=Math.sin(it.rot),it.axisy=Math.cos(it.rot);else{var rt=nt*nt,ot=1-.5*rt,at=1-rt*rt/8,st=(ot*it.axisx+nt*it.axisy)*at;it.axisy=(ot*it.axisy-nt*it.axisx)*at,it.axisx=st}var pt=this.b2.imass;this.b2.posx+=Qe*pt,this.b2.posy+=$e*pt;var lt=this.b2,ht=Ke*this.b2.iinertia*et;if(lt.rot+=ht,1e-4<ht*ht)lt.axisx=Math.sin(lt.rot),lt.axisy=Math.cos(lt.rot);else{var ut=ht*ht,dt=1-.5*ut,ct=1-ut*ut/8,_t=(dt*lt.axisx+ht*lt.axisy)*ct;lt.axisy=(dt*lt.axisy-ht*lt.axisx)*ct,lt.axisx=_t}}}}}},Wo.prototype.__class__=Wo;var Xo=zpp_nape.dynamics.ZPP_Contact=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.elasticity=0,this.dist=0,this.fresh=!1,this.hash=0,this.stamp=0,this.posOnly=!1,this.active=!1,this.inner=null,this.arbiter=null,this.wrap_position=null,this.py=0,this.px=0,this.outer=null,this.inner=new xt};Xo.__name__=["zpp_nape","dynamics","ZPP_Contact"],Xo.prototype.outer=null,Xo.prototype.wrapper=function(){return null==this.outer&&(Xo.internal=!0,this.outer=new B,Xo.internal=!1,this.outer.zpp_inner=this),this.outer},Xo.prototype.px=null,Xo.prototype.py=null,Xo.prototype.position_validate=function(){this.wrap_position.zpp_inner.x=this.px,this.wrap_position.zpp_inner.y=this.py},Xo.prototype.wrap_position=null,Xo.prototype.getposition=function(){var e;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==ep.zpp_pool?t=new ep:(t=ep.zpp_pool,ep.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_position=e,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!0,this.wrap_position.zpp_inner._validate=$(this,this.position_validate)},Xo.prototype.inactiveme=function(){return!(this.active&&null!=this.arbiter&&this.arbiter.active)},Xo.prototype.arbiter=null,Xo.prototype.inner=null,Xo.prototype.active=null,Xo.prototype.posOnly=null,Xo.prototype.stamp=null,Xo.prototype.hash=null,Xo.prototype.fresh=null,Xo.prototype.dist=null,Xo.prototype.elasticity=null,Xo.prototype.free=function(){this.arbiter=null},Xo.prototype.alloc=function(){},Xo.prototype.next=null,Xo.prototype.elem=function(){return this},Xo.prototype.begin=function(){return this.next},Xo.prototype._inuse=null,Xo.prototype.modified=null,Xo.prototype.pushmod=null,Xo.prototype.length=null,Xo.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},Xo.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Xo.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Xo.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},Xo.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Xo.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Xo.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Xo.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Xo.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},Xo.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},Xo.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Xo.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Xo.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Xo.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Xo.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Xo.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Xo.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Xo.prototype.clear=function(){},Xo.prototype.inlined_clear=function(){},Xo.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},Xo.prototype.empty=function(){return null==this.next},Xo.prototype.size=function(){return this.length},Xo.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Xo.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Xo.prototype.front=function(){return this.next},Xo.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},Xo.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},Xo.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},Xo.prototype.__class__=Xo;var xt=zpp_nape.dynamics.ZPP_IContact=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.lr2y=0,this.lr2x=0,this.lr1y=0,this.lr1x=0,this.jtAcc=0,this.jnAcc=0,this.friction=0,this.bounce=0,this.tMass=0,this.nMass=0,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0};xt.__name__=["zpp_nape","dynamics","ZPP_IContact"],xt.prototype.r1x=null,xt.prototype.r1y=null,xt.prototype.r2x=null,xt.prototype.r2y=null,xt.prototype.nMass=null,xt.prototype.tMass=null,xt.prototype.bounce=null,xt.prototype.friction=null,xt.prototype.jnAcc=null,xt.prototype.jtAcc=null,xt.prototype.lr1x=null,xt.prototype.lr1y=null,xt.prototype.lr2x=null,xt.prototype.lr2y=null,xt.prototype.next=null,xt.prototype.elem=function(){return this},xt.prototype.begin=function(){return this.next},xt.prototype._inuse=null,xt.prototype.modified=null,xt.prototype.pushmod=null,xt.prototype.length=null,xt.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},xt.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},xt.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},xt.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},xt.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},xt.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},xt.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},xt.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},xt.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},xt.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},xt.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xt.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},xt.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},xt.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},xt.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},xt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},xt.prototype.clear=function(){},xt.prototype.inlined_clear=function(){},xt.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},xt.prototype.empty=function(){return null==this.next},xt.prototype.size=function(){return this.length},xt.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},xt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},xt.prototype.front=function(){return this.next},xt.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},xt.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},xt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},xt.prototype.__class__=xt;var mt=zpp_nape.dynamics.ZPP_InteractionFilter=function(){this.fluidMask=0,this.fluidGroup=0,this.sensorMask=0,this.sensorGroup=0,this.collisionMask=0,this.collisionGroup=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new xi,this.collisionGroup=this.sensorGroup=this.fluidGroup=1,this.collisionMask=this.sensorMask=this.fluidMask=-1};mt.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"],mt.prototype.next=null,mt.prototype.userData=null,mt.prototype.outer=null,mt.prototype.wrapper=function(){if(null==this.outer){this.outer=new R;var e=this.outer.zpp_inner;e.outer=null,e.next=mt.zpp_pool,mt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},mt.prototype.free=function(){this.outer=null},mt.prototype.alloc=function(){},mt.prototype.shapes=null,mt.prototype.wrap_shapes=null,mt.prototype.feature_cons=function(){this.shapes=new xi},mt.prototype.addShape=function(e){this.shapes.add(e)},mt.prototype.remShape=function(e){this.shapes.remove(e)},mt.prototype.copy=function(){var e;return null==mt.zpp_pool?e=new mt:(e=mt.zpp_pool,mt.zpp_pool=e.next,e.next=null),e.collisionGroup=this.collisionGroup,e.collisionMask=this.collisionMask,e.sensorGroup=this.sensorGroup,e.sensorMask=this.sensorMask,e.fluidGroup=this.fluidGroup,e.fluidMask=this.fluidMask,e},mt.prototype.collisionGroup=null,mt.prototype.collisionMask=null,mt.prototype.shouldCollide=function(e){return 0!=(this.collisionMask&e.collisionGroup)&&0!=(e.collisionMask&this.collisionGroup)},mt.prototype.sensorGroup=null,mt.prototype.sensorMask=null,mt.prototype.shouldSense=function(e){return 0!=(this.sensorMask&e.sensorGroup)&&0!=(e.sensorMask&this.sensorGroup)},mt.prototype.fluidGroup=null,mt.prototype.fluidMask=null,mt.prototype.shouldFlow=function(e){return 0!=(this.fluidMask&e.fluidGroup)&&0!=(e.fluidMask&this.fluidGroup)},mt.prototype.invalidate=function(){for(var e=this.shapes.head;null!=e;)e.elt.invalidate_filter(),e=e.next},mt.prototype.__class__=mt;var ft=zpp_nape.dynamics.ZPP_InteractionGroup=function(){this.depth=0,this.wrap_interactors=null,this.interactors=null,this.wrap_groups=null,this.groups=null,this.group=null,this.ignore=!1,this.outer=null,this.depth=0,this.groups=new Bi,this.interactors=new Ee};ft.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"],ft.prototype.outer=null,ft.prototype.ignore=null,ft.prototype.group=null,ft.prototype.setGroup=function(e){this.group!=e&&(null!=this.group&&(this.group.groups.remove(this),this.depth=0,this.group.invalidate(!0)),null!=(this.group=e)?(e.groups.add(this),this.depth=e.depth+1,e.invalidate(!0)):this.invalidate(!0))},ft.prototype.groups=null,ft.prototype.wrap_groups=null,ft.prototype.interactors=null,ft.prototype.wrap_interactors=null,ft.prototype.depth=null,ft.prototype.invalidate=function(e){if(null==e&&(e=!1),e||this.ignore){for(var t=this.interactors.head;null!=t;){var i=t.elt;null!=i.ibody?i.ibody.wake():null!=i.ishape?i.ishape.body.wake():i.icompound.wake(),t=t.next}for(var n=this.groups.head;null!=n;)n.elt.invalidate(e),n=n.next}},ft.prototype.addGroup=function(e){this.groups.add(e),e.depth=this.depth+1},ft.prototype.remGroup=function(e){this.groups.remove(e),e.depth=0},ft.prototype.addInteractor=function(e){this.interactors.add(e)},ft.prototype.remInteractor=function(e,t){null==t&&(t=-1),this.interactors.remove(e)},ft.prototype.__class__=ft;var vt=zpp_nape.dynamics.ZPP_SpaceArbiterList=function(){this.at_index_3=0,this.at_index_2=0,this.at_index_1=0,this.at_index_0=0,this.ite_3=null,this.ite_2=null,this.ite_1=null,this.ite_0=null,this.lengths=null,this.zip_length=!1,this._length=0,this.space=null,A.call(this),this.at_index_0=0,this.at_index_1=0,this.at_index_2=0,this.at_index_3=0,this.zip_length=!0,this._length=0,this.lengths=[];for(var e=0;e<4;)++e,this.lengths.push(0)};vt.__name__=["zpp_nape","dynamics","ZPP_SpaceArbiterList"],vt.__super__=A,vt.prototype=Object.create(A.prototype),vt.prototype.space=null,vt.prototype._length=null,vt.prototype.zip_length=null,vt.prototype.zpp_gl=function(){if(this.zpp_vm(),this.zip_length){for(var e=this._length=0,t=this.space.c_arbiters_true.head;null!=t;)t.elt.active&&++e,t=t.next;this.lengths[0]=e,this._length+=e;for(var i=0,n=this.space.c_arbiters_false.head;null!=n;)n.elt.active&&++i,n=n.next;this.lengths[1]=i,this._length+=i;for(var r=0,o=this.space.f_arbiters.head;null!=o;)o.elt.active&&++r,o=o.next;this.lengths[2]=r,this._length+=r;for(var a=0,s=this.space.s_arbiters.head;null!=s;)s.elt.active&&++a,s=s.next;this.lengths[3]=a,this._length+=a,this.zip_length=!1}return this._length},vt.prototype.lengths=null,vt.prototype.ite_0=null,vt.prototype.ite_1=null,vt.prototype.ite_2=null,vt.prototype.ite_3=null,vt.prototype.at_index_0=null,vt.prototype.at_index_1=null,vt.prototype.at_index_2=null,vt.prototype.at_index_3=null,vt.prototype.zpp_vm=function(){var e=!1;this.space.c_arbiters_true.modified&&(e=!0,this.space.c_arbiters_true.modified=!1),this.space.c_arbiters_false.modified&&(e=!0,this.space.c_arbiters_false.modified=!1),this.space.f_arbiters.modified&&(e=!0,this.space.f_arbiters.modified=!1),this.space.s_arbiters.modified&&(e=!0,this.space.s_arbiters.modified=!1),e&&(this.zip_length=!0,this._length=0,this.ite_0=null,this.ite_1=null,this.ite_2=null,this.ite_3=null)},vt.prototype.push=function(e){return!1},vt.prototype.pop=function(){return null},vt.prototype.unshift=function(e){return!1},vt.prototype.shift=function(){return null},vt.prototype.remove=function(e){return!1},vt.prototype.clear=function(){},vt.prototype.at=function(e){this.zpp_vm();var t=null,i=0;if(null==t)if(e<this.lengths[0]){var n=e;if(n<this.at_index_0||null==this.ite_0)for(this.at_index_0=0,this.ite_0=this.space.c_arbiters_true.head;!this.ite_0.elt.active;)this.ite_0=this.ite_0.next;for(;this.at_index_0!=n;)for(this.at_index_0++,this.ite_0=this.ite_0.next;!this.ite_0.elt.active;)this.ite_0=this.ite_0.next;t=this.ite_0.elt.wrapper()}else i=this.lengths[0];if(null==t)if(e<i+this.lengths[1]){var r=e-i;if(r<this.at_index_1||null==this.ite_1)for(this.at_index_1=0,this.ite_1=this.space.c_arbiters_false.head;!this.ite_1.elt.active;)this.ite_1=this.ite_1.next;for(;this.at_index_1!=r;)for(this.at_index_1++,this.ite_1=this.ite_1.next;!this.ite_1.elt.active;)this.ite_1=this.ite_1.next;t=this.ite_1.elt.wrapper()}else i+=this.lengths[1];if(null==t)if(e<i+this.lengths[2]){var o=e-i;if(o<this.at_index_2||null==this.ite_2)for(this.at_index_2=0,this.ite_2=this.space.f_arbiters.head;!this.ite_2.elt.active;)this.ite_2=this.ite_2.next;for(;this.at_index_2!=o;)for(this.at_index_2++,this.ite_2=this.ite_2.next;!this.ite_2.elt.active;)this.ite_2=this.ite_2.next;t=this.ite_2.elt.wrapper()}else i+=this.lengths[2];if(null==t)if(e<i+this.lengths[3]){var a=e-i;if(a<this.at_index_3||null==this.ite_3)for(this.at_index_3=0,this.ite_3=this.space.s_arbiters.head;!this.ite_3.elt.active;)this.ite_3=this.ite_3.next;for(;this.at_index_3!=a;)for(this.at_index_3++,this.ite_3=this.ite_3.next;!this.ite_3.elt.active;)this.ite_3=this.ite_3.next;t=this.ite_3.elt.wrapper()}else i+=this.lengths[3];return t},vt.prototype.__class__=vt;var Oo=zpp_nape.geom.ZPP_AABB=function(){this.wrap_max=null,this.maxy=0,this.maxx=0,this.wrap_min=null,this.miny=0,this.minx=0,this.next=null,this.outer=null,this._immutable=!1,this._validate=null,this._invalidate=null};Oo.__name__=["zpp_nape","geom","ZPP_AABB"],Oo.get=function(e,t,i,n){var r;return null==Oo.zpp_pool?r=new Oo:(r=Oo.zpp_pool,Oo.zpp_pool=r.next,r.next=null),r.minx=e,r.miny=t,r.maxx=i,r.maxy=n,r},Oo.prototype._invalidate=null,Oo.prototype._validate=null,Oo.prototype._immutable=null,Oo.prototype.validate=function(){null!=this._validate&&this._validate()},Oo.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate(this)},Oo.prototype.outer=null,Oo.prototype.wrapper=function(){if(null==this.outer){this.outer=new N;var e=this.outer.zpp_inner;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e.wrap_min=e.wrap_max=null,e._invalidate=null,e._validate=null,e.next=Oo.zpp_pool,Oo.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Oo.prototype.next=null,Oo.prototype.alloc=function(){},Oo.prototype.free=function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this.wrap_min=this.wrap_max=null,this._invalidate=null,this._validate=null},Oo.prototype.copy=function(){var e,t=this.minx,i=this.miny,n=this.maxx,r=this.maxy;return null==Oo.zpp_pool?e=new Oo:(e=Oo.zpp_pool,Oo.zpp_pool=e.next,e.next=null),e.minx=t,e.miny=i,e.maxx=n,e.maxy=r,e},Oo.prototype.width=function(){return this.maxx-this.minx},Oo.prototype.height=function(){return this.maxy-this.miny},Oo.prototype.perimeter=function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},Oo.prototype.minx=null,Oo.prototype.miny=null,Oo.prototype.wrap_min=null,Oo.prototype.getmin=function(){if(null==this.wrap_min){var e,t=this.minx,i=this.miny;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_min=e,this.wrap_min.zpp_inner._inuse=!0,this._immutable?this.wrap_min.zpp_inner._immutable=!0:this.wrap_min.zpp_inner._invalidate=$(this,this.mod_min),this.wrap_min.zpp_inner._validate=$(this,this.dom_min)}return this.wrap_min},Oo.prototype.dom_min=function(){null!=this._validate&&this._validate(),this.wrap_min.zpp_inner.x=this.minx,this.wrap_min.zpp_inner.y=this.miny},Oo.prototype.mod_min=function(e){e.x==this.minx&&e.y==this.miny||(this.minx=e.x,this.miny=e.y,null!=this._invalidate&&this._invalidate(this))},Oo.prototype.maxx=null,Oo.prototype.maxy=null,Oo.prototype.wrap_max=null,Oo.prototype.getmax=function(){if(null==this.wrap_max){var e,t=this.maxx,i=this.maxy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_max=e,this.wrap_max.zpp_inner._inuse=!0,this._immutable?this.wrap_max.zpp_inner._immutable=!0:this.wrap_max.zpp_inner._invalidate=$(this,this.mod_max),this.wrap_max.zpp_inner._validate=$(this,this.dom_max)}return this.wrap_max},Oo.prototype.dom_max=function(){null!=this._validate&&this._validate(),this.wrap_max.zpp_inner.x=this.maxx,this.wrap_max.zpp_inner.y=this.maxy},Oo.prototype.mod_max=function(e){e.x==this.maxx&&e.y==this.maxy||(this.maxx=e.x,this.maxy=e.y,null!=this._invalidate&&this._invalidate(this))},Oo.prototype.intersectX=function(e){return!(e.minx>this.maxx||this.minx>e.maxx)},Oo.prototype.intersectY=function(e){return!(e.miny>this.maxy||this.miny>e.maxy)},Oo.prototype.intersect=function(e){return e.miny<=this.maxy&&this.miny<=e.maxy&&e.minx<=this.maxx&&this.minx<=e.maxx},Oo.prototype.combine=function(e){e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy)},Oo.prototype.contains=function(e){return e.minx>=this.minx&&e.miny>=this.miny&&e.maxx<=this.maxx&&e.maxy<=this.maxy},Oo.prototype.containsPoint=function(e){return e.x>=this.minx&&e.x<=this.maxx&&e.y>=this.miny&&e.y<=this.maxy},Oo.prototype.setCombine=function(e,t){this.minx=e.minx<t.minx?e.minx:t.minx,this.miny=e.miny<t.miny?e.miny:t.miny,this.maxx=e.maxx>t.maxx?e.maxx:t.maxx,this.maxy=e.maxy>t.maxy?e.maxy:t.maxy},Oo.prototype.setExpand=function(e,t){this.minx=e.minx-t,this.miny=e.miny-t,this.maxx=e.maxx+t,this.maxy=e.maxy+t},Oo.prototype.setExpandPoint=function(e,t){e<this.minx&&(this.minx=e),e>this.maxx&&(this.maxx=e),t<this.miny&&(this.miny=t),t>this.maxy&&(this.maxy=t)},Oo.prototype.toString=function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},Oo.prototype.__class__=Oo;var gt=zpp_nape.util.ZNPList_ZPP_Vec2=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};gt.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"],gt.prototype.head=null,gt.prototype.begin=function(){return this.head},gt.prototype.modified=null,gt.prototype.pushmod=null,gt.prototype.length=null,gt.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},gt.prototype.add=function(e){var t;null==on.zpp_pool?t=new on:(t=on.zpp_pool,on.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},gt.prototype.inlined_add=function(e){var t;null==on.zpp_pool?t=new on:(t=on.zpp_pool,on.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},gt.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},gt.prototype.insert=function(e,t){var i;null==on.zpp_pool?i=new on:(i=on.zpp_pool,on.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},gt.prototype.inlined_insert=function(e,t){var i;null==on.zpp_pool?i=new on:(i=on.zpp_pool,on.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},gt.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},gt.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},gt.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},gt.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},gt.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=on.zpp_pool,on.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},gt.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},gt.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=on.zpp_pool,on.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},gt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=on.zpp_pool,on.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},gt.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=on.zpp_pool,on.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},gt.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=on.zpp_pool,on.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},gt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},gt.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},gt.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},gt.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},gt.prototype.empty=function(){return null==this.head},gt.prototype.size=function(){return this.length},gt.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},gt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},gt.prototype.front=function(){return this.head.elt},gt.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},gt.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},gt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},gt.prototype.__class__=gt;var $s=zpp_nape.geom.ZPP_Collide=function(){};$s.__name__=["zpp_nape","geom","ZPP_Collide"],$s.circleContains=function(e,t){var i,n;return(i=t.x-e.worldCOMx)*i+(n=t.y-e.worldCOMy)*n<e.radius*e.radius},$s.polyContains=function(e,t){var i;i=!0;for(var n=e.edges.head;null!=n;){var r=n.elt;if(!(r.gnormx*t.x+r.gnormy*t.y<=r.gprojection)){i=!1;break}n=n.next}return i},$s.shapeContains=function(e,t){return 0==e.type?$s.circleContains(e.circle,t):$s.polyContains(e.polygon,t)},$s.bodyContains=function(e,t){var i;i=!1;for(var n=e.shapes.head;null!=n;){if($s.shapeContains(n.elt,t)){i=!0;break}n=n.next}return i},$s.containTest=function(e,t){var i=e.aabb,n=t.aabb;if(n.minx>=i.minx&&n.miny>=i.miny&&n.maxx<=i.maxx&&n.maxy<=i.maxy){if(0==e.type){if(0==t.type){var r,o,a=e.circle.radius+-t.circle.radius;return(r=t.circle.worldCOMx-e.circle.worldCOMx)*r+(o=t.circle.worldCOMy-e.circle.worldCOMy)*o<=a*a}var s;s=!0;for(var p=t.polygon.gverts.next;null!=p;){var l,h,u=p,d=e.circle.radius;if(!((l=u.x-e.circle.worldCOMx)*l+(h=u.y-e.circle.worldCOMy)*h<=d*d)){s=!1;break}p=p.next}return s}if(0==t.type){var c;c=!0;for(var _=e.polygon.edges.head;null!=_;){var y=_.elt;if(!(y.gnormx*t.circle.worldCOMx+y.gnormy*t.circle.worldCOMy+t.circle.radius<=y.gprojection)){c=!1;break}_=_.next}return c}var x;x=!0;for(var m=e.polygon.edges.head;null!=m;){for(var f=m.elt,v=-1e100,g=t.polygon.gverts.next;null!=g;){var z=g,b=f.gnormx*z.x+f.gnormy*z.y;v<b&&(v=b),g=g.next}if(!(v<=f.gprojection)){x=!1;break}m=m.next}return x}return!1},$s.contactCollide=function(e,t,i,n){if(1==t.type){if(1==e.type){for(var r=!0,o=-1e100,a=-1,s=null,p=null,l=e.polygon.edges.head;null!=l;){for(var h=l.elt,u=1e100,d=t.polygon.gverts.next;null!=d;){var c=d,_=h.gnormx*c.x+h.gnormy*c.y;if(_<u&&(u=_),u-h.gprojection<=o)break;d=d.next}if(0<=(u-=h.gprojection)){r=!1;break}o<u&&(o=u,s=h,a=1),l=l.next}if(r){for(var y=t.polygon.edges.head;null!=y;){for(var x=y.elt,m=1e100,f=e.polygon.gverts.next;null!=f;){var v=f,g=x.gnormx*v.x+x.gnormy*v.y;if(g<m&&(m=g),m-x.gprojection<=o)break;f=f.next}if(0<=(m-=x.gprojection)){r=!1;break}o<m&&(o=m,p=x,a=2),y=y.next}if(r){var z,b,w;w=1==a?(z=t.polygon,b=s,1):(z=e.polygon,b=p,-1);for(var S=null,C=1e100,M=z.edges.head;null!=M;){var P=M.elt,k=b.gnormx*P.gnormx+b.gnormy*P.gnormy;k<C&&(C=k,S=P),M=M.next}var T=0,G=0;T=S.gp0.x,G=S.gp0.y;var O,A,E=0,I=0;O=(E=S.gp1.x)-T,A=(I=S.gp1.y)-G;var B=b.gnormy*T-b.gnormx*G,L=b.gnormy*E-b.gnormx*I,D=1/(L-B),R=(-b.tp1-B)*D;R>Qs.epsilon&&(T+=O*R,G+=A*R);var F=(-b.tp0-L)*D;F<-Qs.epsilon&&(E+=O*F,I+=A*F);var j=0,N=0,U=w;j=b.gnormx*U,N=b.gnormy*U,i.lnormx=b.lnormx,i.lnormy=b.lnormy,i.lproj=b.lprojection,i.radius=0,i.rev=n!=(-1==w),i.ptype=i.rev?1:0;var H=T*b.gnormx+G*b.gnormy-b.gprojection,V=E*b.gnormx+I*b.gnormy-b.gprojection;if(0<H&&0<V)return!1;n&&(j=-j,N=-N);for(var W=T-b.gnormx*H*.5,X=G-b.gnormy*H*.5,q=i.rev?1:0,Y=null,Z=i.contacts.next;null!=Z;){var K=Z;if(q==K.hash){Y=K;break}Z=Z.next}if(null==Y){null==Xo.zpp_pool?Y=new Xo:(Y=Xo.zpp_pool,Xo.zpp_pool=Y.next,Y.next=null);var J=Y.inner;J.jnAcc=J.jtAcc=0,Y.hash=q,Y.fresh=!0,(Y.arbiter=i).jrAcc=0;var Q=i.contacts;Y._inuse=!0;var $=Y;$.next=Q.next,Q.next=$,Q.modified=!0,Q.length++,i.innards.add(J)}else Y.fresh=!1;Y.px=W,Y.py=X,i.nx=j,i.ny=N,Y.dist=H,Y.stamp=i.stamp,Y.posOnly=0<H;var ee=Y;T-=z.body.posx,G-=z.body.posy,ee.inner.lr1x=T*z.body.axisy+G*z.body.axisx,ee.inner.lr1y=G*z.body.axisy-T*z.body.axisx;for(var te=E-b.gnormx*V*.5,ie=I-b.gnormy*V*.5,ne=i.rev?0:1,re=null,oe=i.contacts.next;null!=oe;){var ae=oe;if(ne==ae.hash){re=ae;break}oe=oe.next}if(null==re){null==Xo.zpp_pool?re=new Xo:(re=Xo.zpp_pool,Xo.zpp_pool=re.next,re.next=null);var se=re.inner;se.jnAcc=se.jtAcc=0,re.hash=ne,re.fresh=!0,(re.arbiter=i).jrAcc=0;var pe=i.contacts;re._inuse=!0;var le=re;le.next=pe.next,pe.next=le,pe.modified=!0,pe.length++,i.innards.add(se)}else re.fresh=!1;return re.px=te,re.py=ie,i.nx=j,i.ny=N,re.dist=V,re.stamp=i.stamp,re.posOnly=0<V,ee=re,E-=z.body.posx,I-=z.body.posy,ee.inner.lr1x=E*z.body.axisy+I*z.body.axisx,ee.inner.lr1y=I*z.body.axisy-E*z.body.axisx,1==a?(i.__ref_edge1=b,i.__ref_edge2=S):(i.__ref_edge2=b,i.__ref_edge1=S),!0}return!1}return!1}for(var he=-1e100,ue=!0,de=null,ce=null,_e=t.polygon.gverts.next,ye=t.polygon.edges.head;null!=ye;){var xe=ye.elt,me=xe.gnormx*e.circle.worldCOMx+xe.gnormy*e.circle.worldCOMy-xe.gprojection-e.circle.radius;if(0<me){ue=!1;break}he<me&&(he=me,de=xe,ce=_e),_e=_e.next,ye=ye.next}if(ue){var fe=ce,ve=null==ce.next?t.polygon.gverts.next:ce.next,ge=e.circle.worldCOMy*de.gnormx-e.circle.worldCOMx*de.gnormy;if(ge<=fe.y*de.gnormx-fe.x*de.gnormy){var ze,be,we,Se=e.circle.radius,Ce=(ze=fe.x-e.circle.worldCOMx)*ze+(be=fe.y-e.circle.worldCOMy)*be;if(Se*Se<Ce)we=null;else if(Ce<Qs.epsilon*Qs.epsilon){for(var Me=e.circle.worldCOMx,Pe=e.circle.worldCOMy,ke=null,Te=i.contacts.next;null!=Te;){var Ge=Te;if(0==Ge.hash){ke=Ge;break}Te=Te.next}if(null==ke){null==Xo.zpp_pool?ke=new Xo:(ke=Xo.zpp_pool,Xo.zpp_pool=ke.next,ke.next=null);var Oe=ke.inner;Oe.jnAcc=Oe.jtAcc=0,ke.hash=0,ke.fresh=!0,(ke.arbiter=i).jrAcc=0;var Ae=i.contacts;ke._inuse=!0;var Ee=ke;Ee.next=Ae.next,Ae.next=Ee,Ae.modified=!0,Ae.length++,i.innards.add(Oe)}else ke.fresh=!1;ke.px=Me,ke.py=Pe,i.nx=1,i.ny=0,ke.dist=-Se,ke.stamp=i.stamp,ke.posOnly=!1,we=ke}else{var Ie=1/Math.sqrt(Ce),Be=Ie<Qs.epsilon?1e100:1/Ie,Le=.5+(e.circle.radius-.5*Se)*Ie;if(n){for(var De=e.circle.worldCOMx+ze*Le,Re=e.circle.worldCOMy+be*Le,Fe=null,je=i.contacts.next;null!=je;){var Ne=je;if(0==Ne.hash){Fe=Ne;break}je=je.next}if(null==Fe){null==Xo.zpp_pool?Fe=new Xo:(Fe=Xo.zpp_pool,Xo.zpp_pool=Fe.next,Fe.next=null);var Ue=Fe.inner;Ue.jnAcc=Ue.jtAcc=0,Fe.hash=0,Fe.fresh=!0,(Fe.arbiter=i).jrAcc=0;var He=i.contacts;Fe._inuse=!0;var Ve=Fe;Ve.next=He.next,He.next=Ve,He.modified=!0,He.length++,i.innards.add(Ue)}else Fe.fresh=!1;Fe.px=De,Fe.py=Re,i.nx=-ze*Ie,i.ny=-be*Ie,Fe.dist=Be-Se,Fe.stamp=i.stamp,Fe.posOnly=!1,we=Fe}else{for(var We=e.circle.worldCOMx+ze*Le,Xe=e.circle.worldCOMy+be*Le,qe=null,Ye=i.contacts.next;null!=Ye;){var Ze=Ye;if(0==Ze.hash){qe=Ze;break}Ye=Ye.next}if(null==qe){null==Xo.zpp_pool?qe=new Xo:(qe=Xo.zpp_pool,Xo.zpp_pool=qe.next,qe.next=null);var Ke=qe.inner;Ke.jnAcc=Ke.jtAcc=0,qe.hash=0,qe.fresh=!0,(qe.arbiter=i).jrAcc=0;var Je=i.contacts;qe._inuse=!0;var Qe=qe;Qe.next=Je.next,Je.next=Qe,Je.modified=!0,Je.length++,i.innards.add(Ke)}else qe.fresh=!1;qe.px=We,qe.py=Xe,i.nx=ze*Ie,i.ny=be*Ie,qe.dist=Be-Se,qe.stamp=i.stamp,qe.posOnly=!1,we=qe}}if(null!=we){var $e=we.inner;i.ptype=2;var et,tt;et=fe.x-t.polygon.body.posx,tt=fe.y-t.polygon.body.posy,i.__ref_edge1=de,i.__ref_vertex=-1,n?($e.lr1x=et*t.polygon.body.axisy+tt*t.polygon.body.axisx,$e.lr1y=tt*t.polygon.body.axisy-et*t.polygon.body.axisx,$e.lr2x=e.circle.localCOMx,$e.lr2y=e.circle.localCOMy):($e.lr2x=et*t.polygon.body.axisy+tt*t.polygon.body.axisx,$e.lr2y=tt*t.polygon.body.axisy-et*t.polygon.body.axisx,$e.lr1x=e.circle.localCOMx,$e.lr1y=e.circle.localCOMy),i.radius=e.circle.radius}return null!=we}if(ge>=ve.y*de.gnormx-ve.x*de.gnormy){var it,nt,rt,ot=e.circle.radius,at=(it=ve.x-e.circle.worldCOMx)*it+(nt=ve.y-e.circle.worldCOMy)*nt;if(ot*ot<at)rt=null;else if(at<Qs.epsilon*Qs.epsilon){for(var st=e.circle.worldCOMx,pt=e.circle.worldCOMy,lt=null,ht=i.contacts.next;null!=ht;){var ut=ht;if(0==ut.hash){lt=ut;break}ht=ht.next}if(null==lt){null==Xo.zpp_pool?lt=new Xo:(lt=Xo.zpp_pool,Xo.zpp_pool=lt.next,lt.next=null);var dt=lt.inner;dt.jnAcc=dt.jtAcc=0,lt.hash=0,lt.fresh=!0,(lt.arbiter=i).jrAcc=0;var ct=i.contacts;lt._inuse=!0;var _t=lt;_t.next=ct.next,ct.next=_t,ct.modified=!0,ct.length++,i.innards.add(dt)}else lt.fresh=!1;lt.px=st,lt.py=pt,i.nx=1,i.ny=0,lt.dist=-ot,lt.stamp=i.stamp,lt.posOnly=!1,rt=lt}else{var yt=1/Math.sqrt(at),xt=yt<Qs.epsilon?1e100:1/yt,mt=.5+(e.circle.radius-.5*ot)*yt;if(n){for(var ft=e.circle.worldCOMx+it*mt,vt=e.circle.worldCOMy+nt*mt,gt=null,zt=i.contacts.next;null!=zt;){var bt=zt;if(0==bt.hash){gt=bt;break}zt=zt.next}if(null==gt){null==Xo.zpp_pool?gt=new Xo:(gt=Xo.zpp_pool,Xo.zpp_pool=gt.next,gt.next=null);var wt=gt.inner;wt.jnAcc=wt.jtAcc=0,gt.hash=0,gt.fresh=!0,(gt.arbiter=i).jrAcc=0;var St=i.contacts;gt._inuse=!0;var Ct=gt;Ct.next=St.next,St.next=Ct,St.modified=!0,St.length++,i.innards.add(wt)}else gt.fresh=!1;gt.px=ft,gt.py=vt,i.nx=-it*yt,i.ny=-nt*yt,gt.dist=xt-ot,gt.stamp=i.stamp,gt.posOnly=!1,rt=gt}else{for(var Mt=e.circle.worldCOMx+it*mt,Pt=e.circle.worldCOMy+nt*mt,kt=null,Tt=i.contacts.next;null!=Tt;){var Gt=Tt;if(0==Gt.hash){kt=Gt;break}Tt=Tt.next}if(null==kt){null==Xo.zpp_pool?kt=new Xo:(kt=Xo.zpp_pool,Xo.zpp_pool=kt.next,kt.next=null);var Ot=kt.inner;Ot.jnAcc=Ot.jtAcc=0,kt.hash=0,kt.fresh=!0,(kt.arbiter=i).jrAcc=0;var At=i.contacts;kt._inuse=!0;var Et=kt;Et.next=At.next,At.next=Et,At.modified=!0,At.length++,i.innards.add(Ot)}else kt.fresh=!1;kt.px=Mt,kt.py=Pt,i.nx=it*yt,i.ny=nt*yt,kt.dist=xt-ot,kt.stamp=i.stamp,kt.posOnly=!1,rt=kt}}if(null!=rt){var It=rt.inner;i.ptype=2;var Bt,Lt;Bt=ve.x-t.polygon.body.posx,Lt=ve.y-t.polygon.body.posy,i.__ref_edge1=de,i.__ref_vertex=1,n?(It.lr1x=Bt*t.polygon.body.axisy+Lt*t.polygon.body.axisx,It.lr1y=Lt*t.polygon.body.axisy-Bt*t.polygon.body.axisx,It.lr2x=e.circle.localCOMx,It.lr2y=e.circle.localCOMy):(It.lr2x=Bt*t.polygon.body.axisy+Lt*t.polygon.body.axisx,It.lr2y=Lt*t.polygon.body.axisy-Bt*t.polygon.body.axisx,It.lr1x=e.circle.localCOMx,It.lr1y=e.circle.localCOMy),i.radius=e.circle.radius}return null!=rt}var Dt,Rt,Ft=e.circle.radius+.5*he;Dt=de.gnormx*Ft,Rt=de.gnormy*Ft;var jt,Nt,Ut;if(jt=e.circle.worldCOMx-Dt,Nt=e.circle.worldCOMy-Rt,n){for(var Ht=de.gnormx,Vt=de.gnormy,Wt=null,Xt=i.contacts.next;null!=Xt;){var qt=Xt;if(0==qt.hash){Wt=qt;break}Xt=Xt.next}if(null==Wt){null==Xo.zpp_pool?Wt=new Xo:(Wt=Xo.zpp_pool,Xo.zpp_pool=Wt.next,Wt.next=null);var Yt=Wt.inner;Yt.jnAcc=Yt.jtAcc=0,Wt.hash=0,Wt.fresh=!0,(Wt.arbiter=i).jrAcc=0;var Zt=i.contacts;Wt._inuse=!0;var Kt=Wt;Kt.next=Zt.next,Zt.next=Kt,Zt.modified=!0,Zt.length++,i.innards.add(Yt)}else Wt.fresh=!1;Wt.px=jt,Wt.py=Nt,i.nx=Ht,i.ny=Vt,Wt.dist=he,Wt.stamp=i.stamp,Wt.posOnly=!1,Ut=Wt}else{for(var Jt=-de.gnormx,Qt=-de.gnormy,$t=null,ei=i.contacts.next;null!=ei;){var ti=ei;if(0==ti.hash){$t=ti;break}ei=ei.next}if(null==$t){null==Xo.zpp_pool?$t=new Xo:($t=Xo.zpp_pool,Xo.zpp_pool=$t.next,$t.next=null);var ii=$t.inner;ii.jnAcc=ii.jtAcc=0,$t.hash=0,$t.fresh=!0,($t.arbiter=i).jrAcc=0;var ni=i.contacts;$t._inuse=!0;var ri=$t;ri.next=ni.next,ni.next=ri,ni.modified=!0,ni.length++,i.innards.add(ii)}else $t.fresh=!1;$t.px=jt,$t.py=Nt,i.nx=Jt,i.ny=Qt,$t.dist=he,$t.stamp=i.stamp,$t.posOnly=!1,Ut=$t}return i.ptype=n?0:1,i.lnormx=de.lnormx,i.lnormy=de.lnormy,i.rev=!n,i.lproj=de.lprojection,i.radius=e.circle.radius,Ut.inner.lr1x=e.circle.localCOMx,Ut.inner.lr1y=e.circle.localCOMy,i.__ref_edge1=de,!(i.__ref_vertex=0)}return!1}var oi,ai,si,pi=e.circle.radius+t.circle.radius,li=(oi=t.circle.worldCOMx-e.circle.worldCOMx)*oi+(ai=t.circle.worldCOMy-e.circle.worldCOMy)*ai;if(pi*pi<li)si=null;else if(li<Qs.epsilon*Qs.epsilon){for(var hi=e.circle.worldCOMx,ui=e.circle.worldCOMy,di=null,ci=i.contacts.next;null!=ci;){var _i=ci;if(0==_i.hash){di=_i;break}ci=ci.next}if(null==di){null==Xo.zpp_pool?di=new Xo:(di=Xo.zpp_pool,Xo.zpp_pool=di.next,di.next=null);var yi=di.inner;yi.jnAcc=yi.jtAcc=0,di.hash=0,di.fresh=!0,(di.arbiter=i).jrAcc=0;var xi=i.contacts;di._inuse=!0;var mi=di;mi.next=xi.next,xi.next=mi,xi.modified=!0,xi.length++,i.innards.add(yi)}else di.fresh=!1;di.px=hi,di.py=ui,i.nx=1,i.ny=0,di.dist=-pi,di.stamp=i.stamp,di.posOnly=!1,si=di}else{var fi=1/Math.sqrt(li),vi=fi<Qs.epsilon?1e100:1/fi,gi=.5+(e.circle.radius-.5*pi)*fi;if(n){for(var zi=e.circle.worldCOMx+oi*gi,bi=e.circle.worldCOMy+ai*gi,wi=null,Si=i.contacts.next;null!=Si;){var Ci=Si;if(0==Ci.hash){wi=Ci;break}Si=Si.next}if(null==wi){null==Xo.zpp_pool?wi=new Xo:(wi=Xo.zpp_pool,Xo.zpp_pool=wi.next,wi.next=null);var Mi=wi.inner;Mi.jnAcc=Mi.jtAcc=0,wi.hash=0,wi.fresh=!0,(wi.arbiter=i).jrAcc=0;var Pi=i.contacts;wi._inuse=!0;var ki=wi;ki.next=Pi.next,Pi.next=ki,Pi.modified=!0,Pi.length++,i.innards.add(Mi)}else wi.fresh=!1;wi.px=zi,wi.py=bi,i.nx=-oi*fi,i.ny=-ai*fi,wi.dist=vi-pi,wi.stamp=i.stamp,wi.posOnly=!1,si=wi}else{for(var Ti=e.circle.worldCOMx+oi*gi,Gi=e.circle.worldCOMy+ai*gi,Oi=null,Ai=i.contacts.next;null!=Ai;){var Ei=Ai;if(0==Ei.hash){Oi=Ei;break}Ai=Ai.next}if(null==Oi){null==Xo.zpp_pool?Oi=new Xo:(Oi=Xo.zpp_pool,Xo.zpp_pool=Oi.next,Oi.next=null);var Ii=Oi.inner;Ii.jnAcc=Ii.jtAcc=0,Oi.hash=0,Oi.fresh=!0,(Oi.arbiter=i).jrAcc=0;var Bi=i.contacts;Oi._inuse=!0;var Li=Oi;Li.next=Bi.next,Bi.next=Li,Bi.modified=!0,Bi.length++,i.innards.add(Ii)}else Oi.fresh=!1;Oi.px=Ti,Oi.py=Gi,i.nx=oi*fi,i.ny=ai*fi,Oi.dist=vi-pi,Oi.stamp=i.stamp,Oi.posOnly=!1,si=Oi}}if(null==si)return!1;var Di=si.inner;return n?(Di.lr1x=t.circle.localCOMx,Di.lr1y=t.circle.localCOMy,Di.lr2x=e.circle.localCOMx,Di.lr2y=e.circle.localCOMy):(Di.lr1x=e.circle.localCOMx,Di.lr1y=e.circle.localCOMy,Di.lr2x=t.circle.localCOMx,Di.lr2y=t.circle.localCOMy),i.radius=e.circle.radius+t.circle.radius,i.ptype=2,!0},$s.testCollide_safe=function(e,t){if(0==t.type){var i=e;e=t,t=i}return $s.testCollide(e,t)},$s.testCollide=function(e,t){if(1==t.type){if(1==e.type){for(var i=!0,n=e.polygon.edges.head;null!=n;){for(var r=n.elt,o=1e100,a=t.polygon.gverts.next;null!=a;){var s=a,p=r.gnormx*s.x+r.gnormy*s.y;p<o&&(o=p),a=a.next}if(0<(o-=r.gprojection)){i=!1;break}n=n.next}if(i){for(var l=t.polygon.edges.head;null!=l;){for(var h=l.elt,u=1e100,d=e.polygon.gverts.next;null!=d;){var c=d,_=h.gnormx*c.x+h.gnormy*c.y;_<u&&(u=_),d=d.next}if(0<(u-=h.gprojection)){i=!1;break}l=l.next}return i}return!1}for(var y=null,x=null,m=!0,f=-1e100,v=t.polygon.gverts.next,g=t.polygon.edges.head;null!=g;){var z=g.elt,b=z.gnormx*e.circle.worldCOMx+z.gnormy*e.circle.worldCOMy-z.gprojection-e.circle.radius;if(0<b){m=!1;break}f<b&&(f=b,y=z,x=v),v=v.next,g=g.next}if(m){var w=x,S=null==x.next?t.polygon.gverts.next:x.next,C=e.circle.worldCOMy*y.gnormx-e.circle.worldCOMx*y.gnormy;if(C<=w.y*y.gnormx-w.x*y.gnormy){var M,P,k=e.circle.radius;return(M=w.x-e.circle.worldCOMx)*M+(P=w.y-e.circle.worldCOMy)*P<=k*k}if(C>=S.y*y.gnormx-S.x*y.gnormy){var T,G,O=e.circle.radius;return(T=S.x-e.circle.worldCOMx)*T+(G=S.y-e.circle.worldCOMy)*G<=O*O}return!0}return!1}var A,E,I=e.circle.radius+t.circle.radius;return(A=t.circle.worldCOMx-e.circle.worldCOMx)*A+(E=t.circle.worldCOMy-e.circle.worldCOMy)*E<=I*I},$s.flowCollide=function(e,t,i){if(1==t.type){if(1==e.type){for(var n=[],r=[],o=!0,a=!0,s=e.polygon.edges.head;null!=s;){for(var p=s.elt,l=1e100,h=0,u=t.polygon.gverts.next;null!=u;){var d=u,c=p.gnormx*d.x+p.gnormy*d.y;c<l&&(l=c),c>=p.gprojection+Qs.epsilon&&(a=!(r[h]=!0)),++h,u=u.next}if(0<(l-=p.gprojection)){o=!1;break}s=s.next}if(a){var _=t.polygon;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var x=y.localCOMy=0,m=y.lverts.next,f=m,v=m=m.next;for(m=m.next;null!=m;){var g=m;x+=v.x*(g.y-f.y);var z=g.y*v.x-g.x*v.y;y.localCOMx+=(v.x+g.x)*z,y.localCOMy+=(v.y+g.y)*z,f=v,v=g,m=m.next}var b=m=y.lverts.next;x+=v.x*(b.y-f.y);var w=b.y*v.x-b.x*v.y;y.localCOMx+=(v.x+b.x)*w,y.localCOMy+=(v.y+b.y)*w,f=v;var S=m=m.next;x+=b.x*(S.y-f.y);var C=S.y*b.x-S.x*b.y;y.localCOMx+=(b.x+S.x)*C,y.localCOMy+=(b.y+S.y)*C;var M=x=1/(3*x);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=t.polygon.area,T=t.polygon.worldCOMx,G=t.polygon.worldCOMy;return i.overlap=k,i.centroidx=T,i.centroidy=G,!0}if(o){a=!0;for(var O=t.polygon.edges.head;null!=O;){for(var A=O.elt,E=1e100,I=0,B=e.polygon.gverts.next;null!=B;){var L=B,D=A.gnormx*L.x+A.gnormy*L.y;D<E&&(E=D),D>=A.gprojection+Qs.epsilon&&(a=!(n[I]=!0)),++I,B=B.next}if(0<(E-=A.gprojection)){o=!1;break}O=O.next}if(a){var R=e.polygon;if(R.zip_worldCOM&&null!=R.body){if(R.zip_worldCOM=!1,R.zip_localCOM){if(R.zip_localCOM=!1,1==R.type){var F=R.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,H=N=N.next;for(N=N.next;null!=N;){var V=N;j+=H.x*(V.y-U.y);var W=V.y*H.x-V.x*H.y;F.localCOMx+=(H.x+V.x)*W,F.localCOMy+=(H.y+V.y)*W,U=H,H=V,N=N.next}var X=N=F.lverts.next;j+=H.x*(X.y-U.y);var q=X.y*H.x-X.x*H.y;F.localCOMx+=(H.x+X.x)*q,F.localCOMy+=(H.y+X.y)*q,U=H;var Y=N=N.next;j+=X.x*(Y.y-U.y);var Z=Y.y*X.x-Y.x*X.y;F.localCOMx+=(X.x+Y.x)*Z,F.localCOMy+=(X.y+Y.y)*Z;var K=j=1/(3*j);F.localCOMx*=K,F.localCOMy*=K}}null!=R.wrap_localCOM&&(R.wrap_localCOM.zpp_inner.x=R.localCOMx,R.wrap_localCOM.zpp_inner.y=R.localCOMy)}var J=R.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),R.worldCOMx=R.body.posx+(R.body.axisy*R.localCOMx-R.body.axisx*R.localCOMy),R.worldCOMy=R.body.posy+(R.localCOMx*R.body.axisx+R.localCOMy*R.body.axisy)}var Q=e.polygon.area,$=e.polygon.worldCOMx,ee=e.polygon.worldCOMy;return i.overlap=Q,i.centroidx=$,i.centroidy=ee,!0}if(o){for(;null!=$s.flowpoly.head;){var te=$s.flowpoly.pop_unsafe();te._inuse||(null!=te.outer&&(te.outer.zpp_inner=null,te.outer=null),te._isimmutable=null,te._validate=null,te._invalidate=null,te.next=ep.zpp_pool,ep.zpp_pool=te)}for(var ie=null,ne=!1,re=e.polygon.gverts.next,oe=0,ae=t.polygon.gverts.next,se=0,pe=0,le=t.polygon.edgeCnt;pe<le;){var he=pe++;if(!r[he]){se=he;break}ae=ae.next}if(null==ae){ae=t.polygon.gverts.next,ne=!0;for(var ue=0,de=e.polygon.edgeCnt;ue<de;){var ce=ue++;if(!n[ce]){oe=ce;break}re=re.next}null==re?re=e.polygon.gverts.next:($s.flowpoly.add(re),ie=$s.flowpoly.head.elt)}else $s.flowpoly.add(ae),ie=$s.flowpoly.head.elt;var _e=1;if(null==$s.flowpoly.head){for(var ye=!0,xe=e.polygon.gverts.next,me=xe,fe=xe.next;null!=fe;){for(var ve=fe,ge=2,ze=t.polygon.gverts.next,be=ze,we=ze.next;null!=we;){var Se,Ce,Me=we,Pe=0;Se=me.x-be.x,Ce=me.y-be.y;var ke,Te;ke=ve.x-me.x;var Ge,Oe,Ae,Ee=(Te=ve.y-me.y)*(Ge=Me.x-be.x)-ke*(Oe=Me.y-be.y);if(Ee*Ee>Qs.epsilon*Qs.epsilon){var Ie=(Oe*Se-Ge*Ce)*(Ee=1/Ee);if(Ie>Qs.epsilon&&Ie<1-Qs.epsilon){var Be=(Te*Se-ke*Ce)*Ee;Ae=Be>Qs.epsilon&&Be<1-Qs.epsilon&&(Pe=Ie,!0)}else Ae=!1}else Ae=!1;Ae&&Pe<ge&&(ge=Pe,ae=ze),be=Me,we=(ze=we).next}for(;;){var Le,De,Re=we=t.polygon.gverts.next,Fe=0;Le=me.x-be.x,De=me.y-be.y;var je,Ne;je=ve.x-me.x;var Ue,He,Ve,We=(Ne=ve.y-me.y)*(Ue=Re.x-be.x)-je*(He=Re.y-be.y);if(We*We>Qs.epsilon*Qs.epsilon){var Xe=(He*Le-Ue*De)*(We=1/We);if(Xe>Qs.epsilon&&Xe<1-Qs.epsilon){var qe=(Ne*Le-je*De)*We;Ve=qe>Qs.epsilon&&qe<1-Qs.epsilon&&(Fe=Xe,!0)}else Ve=!1}else Ve=!1;Ve&&Fe<ge&&(ge=Fe,ae=ze);break}if(2!=ge){var Ye,Ze,Ke,Je=ge;Ye=me.x+(ve.x-me.x)*Je,Ze=me.y+(ve.y-me.y)*Je,null==ep.zpp_pool?Ke=new ep:(Ke=ep.zpp_pool,ep.zpp_pool=Ke.next,Ke.next=null),Ke.weak=!1,Ke._immutable=!1,Ke.x=Ye,Ke.y=Ze,ie=Ke,$s.flowpoly.add(ie),re=xe,ye=!(ne=!0);break}me=ve,fe=(xe=fe).next}if(ye)for(;;){for(var Qe=fe=e.polygon.gverts.next,$e=2,et=t.polygon.gverts.next,tt=et,it=et.next;null!=it;){var nt,rt,ot=it,at=0;nt=me.x-tt.x,rt=me.y-tt.y;var st,pt;st=Qe.x-me.x;var lt,ht,ut,dt=(pt=Qe.y-me.y)*(lt=ot.x-tt.x)-st*(ht=ot.y-tt.y);if(dt*dt>Qs.epsilon*Qs.epsilon){var ct=(ht*nt-lt*rt)*(dt=1/dt);if(ct>Qs.epsilon&&ct<1-Qs.epsilon){var _t=(pt*nt-st*rt)*dt;ut=_t>Qs.epsilon&&_t<1-Qs.epsilon&&(at=ct,!0)}else ut=!1}else ut=!1;ut&&at<$e&&($e=at,ae=et),tt=ot,it=(et=it).next}for(;;){var yt,xt,mt=it=t.polygon.gverts.next,ft=0;yt=me.x-tt.x,xt=me.y-tt.y;var vt,gt;vt=Qe.x-me.x;var zt,bt,wt,St=(gt=Qe.y-me.y)*(zt=mt.x-tt.x)-vt*(bt=mt.y-tt.y);if(St*St>Qs.epsilon*Qs.epsilon){var Ct=(bt*yt-zt*xt)*(St=1/St);if(Ct>Qs.epsilon&&Ct<1-Qs.epsilon){var Mt=(gt*yt-vt*xt)*St;wt=Mt>Qs.epsilon&&Mt<1-Qs.epsilon&&(ft=Ct,!0)}else wt=!1}else wt=!1;wt&&ft<$e&&($e=ft,ae=et);break}if(2==$e)break;var Pt,kt,Tt,Gt=$e;Pt=me.x+(Qe.x-me.x)*Gt,kt=me.y+(Qe.y-me.y)*Gt,null==ep.zpp_pool?Tt=new ep:(Tt=ep.zpp_pool,ep.zpp_pool=Tt.next,Tt.next=null),Tt.weak=!1,Tt._immutable=!1,Tt.x=Pt,Tt.y=kt,ie=Tt,$s.flowpoly.add(ie),ne=!0,re=xe;break}_e=2}for(;;)if(ne)if(++oe,null==(re=re.next)&&(re=e.polygon.gverts.next,oe=0),n[oe]){var Ot=$s.flowpoly.head.elt,At=re,Et=ae,It=ae.next;null==It&&(It=t.polygon.gverts.next);for(var Bt=-1,Lt=null,Dt=0,Rt=0,Ft=It,jt=It;;){var Nt,Ut,Ht=jt,Vt=0;Nt=Et.x-Ot.x,Ut=Et.y-Ot.y;var Wt,Xt;Wt=Ht.x-Et.x;var qt,Yt,Zt,Kt=(Xt=Ht.y-Et.y)*(qt=At.x-Ot.x)-Wt*(Yt=At.y-Ot.y);if(Kt*Kt>Qs.epsilon*Qs.epsilon){var Jt=(Yt*Nt-qt*Ut)*(Kt=1/Kt);if(Jt>Qs.epsilon&&Jt<1-Qs.epsilon){var Qt=(Xt*Nt-Wt*Ut)*Kt;Zt=Qt>Qs.epsilon&&Qt<1-Qs.epsilon&&(Vt=Jt,!0)}else Zt=!1}else Zt=!1;if(Zt&&-1<=Vt){if(Lt=ae,Dt=se,(Rt=1)==_e){Bt=Vt,jt=Ft;break}Bt=Vt}Et=Ht,ae=jt,++se>=t.polygon.edgeCnt&&(se=0),null==(jt=jt.next)&&(jt=t.polygon.gverts.next);break}for(;jt!=Ft;){var $t,ei,ti=jt,ii=0;$t=Et.x-Ot.x,ei=Et.y-Ot.y;var ni,ri;ni=ti.x-Et.x;var oi,ai,si,pi=(ri=ti.y-Et.y)*(oi=At.x-Ot.x)-ni*(ai=At.y-Ot.y);if(pi*pi>Qs.epsilon*Qs.epsilon){var li=(ai*$t-oi*ei)*(pi=1/pi);if(li>Qs.epsilon&&li<1-Qs.epsilon){var hi=(ri*$t-ni*ei)*pi;si=hi>Qs.epsilon&&hi<1-Qs.epsilon&&(ii=li,!0)}else si=!1}else si=!1;if(si&&Bt<=ii){if(Lt=ae,Dt=se,++Rt==_e){Bt=ii;break}Bt=ii}Et=ti,ae=jt,++se>=t.polygon.edgeCnt&&(se=0),null==(jt=jt.next)&&(jt=t.polygon.gverts.next)}if(null==Lt)break;var ui=Lt,di=Lt.next;null==di&&(di=t.polygon.gverts.next);var ci,_i,yi,xi,mi=di,fi=Bt;if(ci=ui.x+(mi.x-ui.x)*fi,_i=ui.y+(mi.y-ui.y)*fi,null!=ie){var vi,gi;yi=(vi=ci-ie.x)*vi+(gi=_i-ie.y)*gi<Qs.epsilon}else yi=!1;if(yi)break;null==ep.zpp_pool?xi=new ep:(xi=ep.zpp_pool,ep.zpp_pool=xi.next,xi.next=null),xi.weak=!1,xi._immutable=!1,xi.x=ci,xi.y=_i,$s.flowpoly.add(xi),null==ie&&(ie=$s.flowpoly.head.elt),ae=Lt,se=Dt,ne=!ne,_e=2}else{var zi,bi=re;if(null!=ie){var wi,Si,Ci=bi.x,Mi=bi.y;zi=(wi=Ci-ie.x)*wi+(Si=Mi-ie.y)*Si<Qs.epsilon}else zi=!1;if(zi)break;$s.flowpoly.add(bi),null==ie&&(ie=$s.flowpoly.head.elt),_e=1}else if(++se,null==(ae=ae.next)&&(ae=t.polygon.gverts.next,se=0),r[se]){var Pi=$s.flowpoly.head.elt,ki=ae,Ti=re,Gi=re.next;null==Gi&&(Gi=e.polygon.gverts.next);for(var Oi=-1,Ai=null,Ei=0,Ii=0,Bi=Gi,Li=Gi;;){var Di,Ri,Fi=Li,ji=0;Di=Ti.x-Pi.x,Ri=Ti.y-Pi.y;var Ni,Ui;Ni=Fi.x-Ti.x;var Hi,Vi,Wi,Xi=(Ui=Fi.y-Ti.y)*(Hi=ki.x-Pi.x)-Ni*(Vi=ki.y-Pi.y);if(Xi*Xi>Qs.epsilon*Qs.epsilon){var qi=(Vi*Di-Hi*Ri)*(Xi=1/Xi);if(qi>Qs.epsilon&&qi<1-Qs.epsilon){var Yi=(Ui*Di-Ni*Ri)*Xi;Wi=Yi>Qs.epsilon&&Yi<1-Qs.epsilon&&(ji=qi,!0)}else Wi=!1}else Wi=!1;if(Wi&&-1<=ji){if(Ai=re,Ei=oe,(Ii=1)==_e){Oi=ji,Li=Bi;break}Oi=ji}Ti=Fi,re=Li,++oe>=e.polygon.edgeCnt&&(oe=0),null==(Li=Li.next)&&(Li=e.polygon.gverts.next);break}for(;Li!=Bi;){var Zi,Ki,Ji=Li,Qi=0;Zi=Ti.x-Pi.x,Ki=Ti.y-Pi.y;var $i,en;$i=Ji.x-Ti.x;var tn,nn,rn,on=(en=Ji.y-Ti.y)*(tn=ki.x-Pi.x)-$i*(nn=ki.y-Pi.y);if(on*on>Qs.epsilon*Qs.epsilon){var an=(nn*Zi-tn*Ki)*(on=1/on);if(an>Qs.epsilon&&an<1-Qs.epsilon){var sn=(en*Zi-$i*Ki)*on;rn=sn>Qs.epsilon&&sn<1-Qs.epsilon&&(Qi=an,!0)}else rn=!1}else rn=!1;if(rn&&Oi<=Qi){if(Ai=re,Ei=oe,++Ii==_e){Oi=Qi;break}Oi=Qi}Ti=Ji,re=Li,++oe>=e.polygon.edgeCnt&&(oe=0),null==(Li=Li.next)&&(Li=e.polygon.gverts.next)}if(null==Ai)break;var pn=Ai,ln=Ai.next;null==ln&&(ln=e.polygon.gverts.next);var hn,un,dn,cn,_n=ln,yn=Oi;if(hn=pn.x+(_n.x-pn.x)*yn,un=pn.y+(_n.y-pn.y)*yn,null!=ie){var xn,mn;dn=(xn=hn-ie.x)*xn+(mn=un-ie.y)*mn<Qs.epsilon}else dn=!1;if(dn)break;null==ep.zpp_pool?cn=new ep:(cn=ep.zpp_pool,ep.zpp_pool=cn.next,cn.next=null),cn.weak=!1,cn._immutable=!1,cn.x=hn,cn.y=un,$s.flowpoly.add(cn),null==ie&&(ie=$s.flowpoly.head.elt),re=Ai,oe=Ei,ne=!ne,_e=2}else{var fn,vn=ae;if(null!=ie){var gn,zn,bn=vn.x,wn=vn.y;fn=(gn=bn-ie.x)*gn+(zn=wn-ie.y)*zn<Qs.epsilon}else fn=!1;if(fn)break;$s.flowpoly.add(vn),null==ie&&(ie=$s.flowpoly.head.elt),_e=1}if(null==$s.flowpoly.head||null==$s.flowpoly.head.next||null==$s.flowpoly.head.next.next)return!1;var Sn=0,Cn=0,Mn=0;Sn=Mn=Cn=0;var Pn=$s.flowpoly.head,kn=Pn.elt,Tn=(Pn=Pn.next).elt;for(Pn=Pn.next;null!=Pn;){var Gn=Pn.elt;Sn+=Tn.x*(Gn.y-kn.y);var On=Gn.y*Tn.x-Gn.x*Tn.y;Cn+=(Tn.x+Gn.x)*On,Mn+=(Tn.y+Gn.y)*On,kn=Tn,Tn=Gn,Pn=Pn.next}var An=(Pn=$s.flowpoly.head).elt;Sn+=Tn.x*(An.y-kn.y);var En=An.y*Tn.x-An.x*Tn.y;Cn+=(Tn.x+An.x)*En,Mn+=(Tn.y+An.y)*En,kn=Tn;var In=(Pn=Pn.next).elt;Sn+=An.x*(In.y-kn.y);var Bn=In.y*An.x-In.x*An.y;Cn+=(An.x+In.x)*Bn,Mn+=(An.y+In.y)*Bn;var Ln=1/(6*(Sn*=.5));return Cn*=Ln,Mn*=Ln,i.overlap=-Sn,i.centroidx=Cn,i.centroidy=Mn,!0}return!1}return!1}for(var Dn=[],Rn=!0,Fn=null,jn=null,Nn=-1e100,Un=!0,Hn=t.polygon.gverts.next,Vn=0,Wn=t.polygon.edges.head;null!=Wn;){var Xn=Wn.elt,qn=Xn.gnormx*e.circle.worldCOMx+Xn.gnormy*e.circle.worldCOMy;if(qn>Xn.gprojection+e.circle.radius){Un=!1;break}qn+e.circle.radius>Xn.gprojection+Qs.epsilon&&(Rn=!1,Dn[Vn]=!0),Nn<(qn-=Xn.gprojection+e.circle.radius)&&(Nn=qn,Fn=Xn,jn=Hn),Hn=Hn.next,++Vn,Wn=Wn.next}if(Un){if(Rn){var Yn=e.circle.area,Zn=e.circle.worldCOMx,Kn=e.circle.worldCOMy;return i.overlap=Yn,i.centroidx=Zn,i.centroidy=Kn,!0}var Jn,Qn=jn,$n=null==jn.next?t.polygon.gverts.next:jn.next,er=e.circle.worldCOMy*Fn.gnormx-e.circle.worldCOMx*Fn.gnormy;if(er<=Qn.y*Fn.gnormx-Qn.x*Fn.gnormy){var tr,ir,nr=e.circle.radius;Jn=(tr=Qn.x-e.circle.worldCOMx)*tr+(ir=Qn.y-e.circle.worldCOMy)*ir<=nr*nr}else if(er>=$n.y*Fn.gnormx-$n.x*Fn.gnormy){var rr,or,ar=e.circle.radius;Jn=(rr=$n.x-e.circle.worldCOMx)*rr+(or=$n.y-e.circle.worldCOMy)*or<=ar*ar}else Jn=!0;if(Jn){for(var sr=[],pr=0,lr=!0,hr=null,ur=0,dr=t.polygon.gverts.next;null!=dr;){var cr,_r,yr=dr,xr=yr.x,mr=yr.y;cr=xr-e.circle.worldCOMx,_r=mr-e.circle.worldCOMy,(sr[pr]=cr*cr+_r*_r<=e.circle.radius*e.circle.radius)?(ur=pr,hr=dr):lr=!1,++pr,dr=dr.next}if(lr){var fr=t.polygon;if(fr.zip_worldCOM&&null!=fr.body){if(fr.zip_worldCOM=!1,fr.zip_localCOM){if(fr.zip_localCOM=!1,1==fr.type){var vr=fr.polygon;if(null==vr.lverts.next.next)vr.localCOMx=vr.lverts.next.x,vr.localCOMy=vr.lverts.next.y;else if(null==vr.lverts.next.next.next)vr.localCOMx=vr.lverts.next.x,vr.localCOMy=vr.lverts.next.y,vr.localCOMx+=vr.lverts.next.next.x,vr.localCOMy+=vr.lverts.next.next.y,vr.localCOMx*=.5,vr.localCOMy*=.5;else{vr.localCOMx=0;var gr=vr.localCOMy=0,zr=vr.lverts.next,br=zr,wr=zr=zr.next;for(zr=zr.next;null!=zr;){var Sr=zr;gr+=wr.x*(Sr.y-br.y);var Cr=Sr.y*wr.x-Sr.x*wr.y;vr.localCOMx+=(wr.x+Sr.x)*Cr,vr.localCOMy+=(wr.y+Sr.y)*Cr,br=wr,wr=Sr,zr=zr.next}var Mr=zr=vr.lverts.next;gr+=wr.x*(Mr.y-br.y);var Pr=Mr.y*wr.x-Mr.x*wr.y;vr.localCOMx+=(wr.x+Mr.x)*Pr,vr.localCOMy+=(wr.y+Mr.y)*Pr,br=wr;var kr=zr=zr.next;gr+=Mr.x*(kr.y-br.y);var Tr=kr.y*Mr.x-kr.x*Mr.y;vr.localCOMx+=(Mr.x+kr.x)*Tr,vr.localCOMy+=(Mr.y+kr.y)*Tr;var Gr=gr=1/(3*gr);vr.localCOMx*=Gr,vr.localCOMy*=Gr}}null!=fr.wrap_localCOM&&(fr.wrap_localCOM.zpp_inner.x=fr.localCOMx,fr.wrap_localCOM.zpp_inner.y=fr.localCOMy)}var Or=fr.body;Or.zip_axis&&(Or.zip_axis=!1,Or.axisx=Math.sin(Or.rot),Or.axisy=Math.cos(Or.rot)),fr.worldCOMx=fr.body.posx+(fr.body.axisy*fr.localCOMx-fr.body.axisx*fr.localCOMy),fr.worldCOMy=fr.body.posy+(fr.localCOMx*fr.body.axisx+fr.localCOMy*fr.body.axisy)}var Ar=t.polygon.area,Er=t.polygon.worldCOMx,Ir=t.polygon.worldCOMy;return i.overlap=Ar,i.centroidx=Er,i.centroidy=Ir,!0}for(;null!=$s.flowpoly.head;){var Br=$s.flowpoly.pop_unsafe();Br._inuse||(null!=Br.outer&&(Br.outer.zpp_inner=null,Br.outer=null),Br._isimmutable=null,Br._validate=null,Br._invalidate=null,Br.next=ep.zpp_pool,ep.zpp_pool=Br)}$s.flowsegs.clear();var Lr=null,Dr=1;for(null==hr?(hr=t.polygon.gverts.next,Dr=2):(Lr=hr,$s.flowpoly.add(Lr));0!=Dr;)if(1==Dr)if(null==(hr=hr.next)&&(hr=t.polygon.gverts.next),++ur>=t.polygon.edgeCnt&&(ur=0),sr[ur]){var Rr,Fr,jr=Lr.x,Nr=Lr.y;if((Rr=jr-hr.x)*Rr+(Fr=Nr-hr.y)*Fr<Qs.epsilon)break;$s.flowpoly.add(hr)}else{var Ur,Hr,Vr,Wr,Xr,qr,Yr=$s.flowpoly.head.elt,Zr=hr,Kr=(Ur=Zr.x-Yr.x)*Ur+(Hr=Zr.y-Yr.y)*Hr,Jr=2*((Vr=Yr.x-e.circle.worldCOMx)*Ur+(Wr=Yr.y-e.circle.worldCOMy)*Hr),Qr=Math.sqrt(Jr*Jr-4*Kr*(Vr*Vr+Wr*Wr-e.circle.radius*e.circle.radius)),$r=(-Jr-Qr)*(Kr=1/(2*Kr)),eo=$r<Qs.epsilon?(-Jr+Qr)*Kr:$r;Xr=Yr.x+(Zr.x-Yr.x)*eo,qr=Yr.y+(Zr.y-Yr.y)*eo;var to,io,no;if((to=Lr.x-Xr)*to+(io=Lr.y-qr)*io<Qs.epsilon)break;null==ep.zpp_pool?no=new ep:(no=ep.zpp_pool,ep.zpp_pool=no.next,no.next=null),no.weak=!1,no._immutable=!1,no.x=Xr,no.y=qr,$s.flowpoly.add(no),Dr=2}else if(2==Dr){var ro=hr.next;null==ro&&(ro=t.polygon.gverts.next);var oo=hr;Dr=0;for(var ao=ro,so=ro;;){var po=so,lo=ur+1;if(lo==t.polygon.edgeCnt&&(lo=0),Dn[ur]){if(sr[lo]){var ho,uo,co,_o,yo,xo,mo=(ho=po.x-oo.x)*ho+(uo=po.y-oo.y)*uo,fo=2*((co=oo.x-e.circle.worldCOMx)*ho+(_o=oo.y-e.circle.worldCOMy)*uo),vo=Math.sqrt(fo*fo-4*mo*(co*co+_o*_o-e.circle.radius*e.circle.radius)),go=(-fo-vo)*(mo=1/(2*mo)),zo=go<Qs.epsilon?(-fo+vo)*mo:go;yo=oo.x+(po.x-oo.x)*zo,xo=oo.y+(po.y-oo.y)*zo;var bo,wo,So;if((bo=Lr.x-yo)*bo+(wo=Lr.y-xo)*wo<Qs.epsilon){Dr=0,so=ao;break}null==ep.zpp_pool?So=new ep:(So=ep.zpp_pool,ep.zpp_pool=So.next,So.next=null),So.weak=!1,So._immutable=!1,So.x=yo,So.y=xo;var Co=So;$s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(Co),$s.flowpoly.add(Co),Dr=1,so=ao;break}var Mo,Po,ko,To,Go,Oo=0,Ao=0,Eo=(Mo=po.x-oo.x)*Mo+(Po=po.y-oo.y)*Po,Io=2*((ko=oo.x-e.circle.worldCOMx)*Mo+(To=oo.y-e.circle.worldCOMy)*Po),Bo=Io*Io-4*Eo*(ko*ko+To*To-e.circle.radius*e.circle.radius);if(Go=Bo*Bo<Qs.epsilon?(Oo=Bo<0?10:Ao=-Io/(2*Eo),!1):(Oo=(-Io-(Bo=Math.sqrt(Bo)))*(Eo=1/(2*Eo)),Ao=(-Io+Bo)*Eo,!0),Oo<1-Qs.epsilon&&Ao>Qs.epsilon){var Lo,Do,Ro,Fo,jo=Oo;if(Lo=oo.x+(po.x-oo.x)*jo,Do=oo.y+(po.y-oo.y)*jo,null!=Lr){var No,Uo;Ro=(No=Lr.x-Lo)*No+(Uo=Lr.y-Do)*Uo<Qs.epsilon}else Ro=!1;if(Ro){Dr=0,so=ao;break}null==ep.zpp_pool?Fo=new ep:(Fo=ep.zpp_pool,ep.zpp_pool=Fo.next,Fo.next=null),Fo.weak=!1,Fo._immutable=!1,Fo.x=Lo,Fo.y=Do;var Ho=Fo;if(null!=$s.flowpoly.head&&($s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(Ho)),$s.flowpoly.add(Ho),null==Lr&&(Lr=$s.flowpoly.head.elt),Go){var Vo,Wo,Xo,qo=Ao;Vo=oo.x+(po.x-oo.x)*qo,Wo=oo.y+(po.y-oo.y)*qo,null==ep.zpp_pool?Xo=new ep:(Xo=ep.zpp_pool,ep.zpp_pool=Xo.next,Xo.next=null),Xo.weak=!1,Xo._immutable=!1,Xo.x=Vo,Xo.y=Wo,$s.flowpoly.add(Xo)}}}oo=po,ur=lo,null==(so=(hr=so).next)&&(so=t.polygon.gverts.next);break}for(;so!=ao;){var Yo=so,Zo=ur+1;if(Zo==t.polygon.edgeCnt&&(Zo=0),Dn[ur]){if(sr[Zo]){var Ko,Jo,Qo,$o,ea,ta,ia=(Ko=Yo.x-oo.x)*Ko+(Jo=Yo.y-oo.y)*Jo,na=2*((Qo=oo.x-e.circle.worldCOMx)*Ko+($o=oo.y-e.circle.worldCOMy)*Jo),ra=Math.sqrt(na*na-4*ia*(Qo*Qo+$o*$o-e.circle.radius*e.circle.radius)),oa=(-na-ra)*(ia=1/(2*ia)),aa=oa<Qs.epsilon?(-na+ra)*ia:oa;ea=oo.x+(Yo.x-oo.x)*aa,ta=oo.y+(Yo.y-oo.y)*aa;var sa,pa,la;if((sa=Lr.x-ea)*sa+(pa=Lr.y-ta)*pa<Qs.epsilon){Dr=0;break}null==ep.zpp_pool?la=new ep:(la=ep.zpp_pool,ep.zpp_pool=la.next,la.next=null),la.weak=!1,la._immutable=!1,la.x=ea,la.y=ta;var ha=la;$s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(ha),$s.flowpoly.add(ha),Dr=1;break}var ua,da,ca,_a,ya,xa=0,ma=0,fa=(ua=Yo.x-oo.x)*ua+(da=Yo.y-oo.y)*da,va=2*((ca=oo.x-e.circle.worldCOMx)*ua+(_a=oo.y-e.circle.worldCOMy)*da),ga=va*va-4*fa*(ca*ca+_a*_a-e.circle.radius*e.circle.radius);if(ya=ga*ga<Qs.epsilon?(xa=ga<0?10:ma=-va/(2*fa),!1):(xa=(-va-(ga=Math.sqrt(ga)))*(fa=1/(2*fa)),ma=(-va+ga)*fa,!0),xa<1-Qs.epsilon&&ma>Qs.epsilon){var za,ba,wa,Sa,Ca=xa;if(za=oo.x+(Yo.x-oo.x)*Ca,ba=oo.y+(Yo.y-oo.y)*Ca,null!=Lr){var Ma,Pa;wa=(Ma=Lr.x-za)*Ma+(Pa=Lr.y-ba)*Pa<Qs.epsilon}else wa=!1;if(wa){Dr=0;break}null==ep.zpp_pool?Sa=new ep:(Sa=ep.zpp_pool,ep.zpp_pool=Sa.next,Sa.next=null),Sa.weak=!1,Sa._immutable=!1,Sa.x=za,Sa.y=ba;var ka=Sa;if(null!=$s.flowpoly.head&&($s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(ka)),$s.flowpoly.add(ka),null==Lr&&(Lr=$s.flowpoly.head.elt),ya){var Ta,Ga,Oa,Aa=ma;Ta=oo.x+(Yo.x-oo.x)*Aa,Ga=oo.y+(Yo.y-oo.y)*Aa,null==ep.zpp_pool?Oa=new ep:(Oa=ep.zpp_pool,ep.zpp_pool=Oa.next,Oa.next=null),Oa.weak=!1,Oa._immutable=!1,Oa.x=Ta,Oa.y=Ga,$s.flowpoly.add(Oa)}}}oo=Yo,ur=Zo,null==(so=(hr=so).next)&&(so=t.polygon.gverts.next)}}if(null==$s.flowpoly.head)return!1;if(null==$s.flowpoly.head.next){for(var Ea=!0,Ia=t.polygon.edges.head;null!=Ia;){var Ba=Ia.elt;if(Ba.gnormx*e.circle.worldCOMx+Ba.gnormy*e.circle.worldCOMy>Ba.gprojection){Ea=!1;break}Ia=Ia.next}if(Ea){var La=e.circle.area,Da=e.circle.worldCOMx,Ra=e.circle.worldCOMy;return i.overlap=La,i.centroidx=Da,i.centroidy=Ra,!0}return!1}var Fa=0,ja=0,Na=0;if(null!=$s.flowpoly.head.next.next){var Ua=0,Ha=0,Va=0;Ua=Va=Ha=0;var Wa=$s.flowpoly.head,Xa=Wa.elt,qa=(Wa=Wa.next).elt;for(Wa=Wa.next;null!=Wa;){var Ya=Wa.elt;Ua+=qa.x*(Ya.y-Xa.y);var Za=Ya.y*qa.x-Ya.x*qa.y;Ha+=(qa.x+Ya.x)*Za,Va+=(qa.y+Ya.y)*Za,Xa=qa,qa=Ya,Wa=Wa.next}var Ka=(Wa=$s.flowpoly.head).elt;Ua+=qa.x*(Ka.y-Xa.y);var Ja=Ka.y*qa.x-Ka.x*qa.y;Ha+=(qa.x+Ka.x)*Ja,Va+=(qa.y+Ka.y)*Ja,Xa=qa;var Qa=(Wa=Wa.next).elt;Ua+=Ka.x*(Qa.y-Xa.y);var $a=Qa.y*Ka.x-Qa.x*Ka.y;Ha+=(Ka.x+Qa.x)*$a,Va+=(Ka.y+Qa.y)*$a;var es=1/(6*(Ua*=.5)),ts=-Ua;Fa+=(Ha*=es)*ts,ja+=(Va*=es)*ts,Na=0-Ua}else $s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add($s.flowpoly.head.next.elt);for(;null!=$s.flowsegs.head;){var is=$s.flowsegs.pop_unsafe(),ns=$s.flowsegs.pop_unsafe(),rs=0,os=0;rs=ns.x-is.x,os=ns.y-is.y;var as=1/Math.sqrt(rs*rs+os*os),ss=rs*=as;rs=-(os*=as),os=ss;var ps=0,ls=0;ps=is.x+ns.x,ls=is.y+ns.y,ps*=.5,ls*=.5;var hs,us,ds=rs*(ps-=e.circle.worldCOMx)+os*(ls-=e.circle.worldCOMy),cs=ds/e.circle.radius,_s=Math.sqrt(1-cs*cs),ys=Math.acos(cs);hs=e.circle.radius*(e.circle.radius*ys-ds*_s),us=.6666666666666666*e.circle.radius*_s*_s*_s/(ys-cs*_s),ps=e.circle.worldCOMx,ls=e.circle.worldCOMy;Fa+=(ps+=rs*us)*hs,ja+=(ls+=os*us)*hs,Na+=hs}var xs=1/Na;return Fa*=xs,ja*=xs,i.overlap=Na,i.centroidx=Fa,i.centroidy=ja,!0}return!1}return!1}var ms,fs,vs=e.circle,gs=t.circle;ms=gs.worldCOMx-vs.worldCOMx,fs=gs.worldCOMy-vs.worldCOMy;var zs=vs.radius+gs.radius,bs=ms*ms+fs*fs;if(zs*zs<bs)return!1;if(bs<Qs.epsilon*Qs.epsilon){if(vs.radius<gs.radius){var ws=vs.area,Ss=vs.worldCOMx,Cs=vs.worldCOMy;i.overlap=ws,i.centroidx=Ss,i.centroidy=Cs}else{var Ms=gs.area,Ps=gs.worldCOMx,ks=gs.worldCOMy;i.overlap=Ms,i.centroidx=Ps,i.centroidy=ks}return!0}var Ts=Math.sqrt(bs),Gs=1/Ts,Os=.5*(Ts-(gs.radius*gs.radius-vs.radius*vs.radius)*Gs);if(Os<=-vs.radius){var As=vs.area,Es=vs.worldCOMx,Is=vs.worldCOMy;i.overlap=As,i.centroidx=Es,i.centroidy=Is}else{var Bs=Ts-Os;if(Bs<=-gs.radius){var Ls=gs.area,Ds=gs.worldCOMx,Rs=gs.worldCOMy;i.overlap=Ls,i.centroidx=Ds,i.centroidy=Rs}else{var Fs,js,Ns,Us=Os/vs.radius,Hs=Math.sqrt(1-Us*Us),Vs=Math.acos(Us);Fs=vs.radius*(vs.radius*Vs-Os*Hs),js=.6666666666666666*vs.radius*Hs*Hs*Hs/(Vs-Us*Hs);var Ws=Bs/gs.radius,Xs=Math.sqrt(1-Ws*Ws),qs=Math.acos(Ws),Ys=Fs+(Ns=gs.radius*(gs.radius*qs-Bs*Xs)),Zs=(js*Fs+(Ts-.6666666666666666*gs.radius*Xs*Xs*Xs/(qs-Ws*Xs))*Ns)/Ys*Gs,Ks=vs.worldCOMx+ms*Zs,Js=vs.worldCOMy+fs*Zs;i.overlap=Ys,i.centroidx=Ks,i.centroidy=Js}}return!0},$s.prototype.__class__=$s;var zt=zpp_nape.geom.ZPP_Convex=function(){};zt.__name__=["zpp_nape","geom","ZPP_Convex"],zt.isinner=function(e,t,i){var n,r;n=e.x-t.x,r=e.y-t.y;var o;return o=i.x-t.x,0<=(i.y-t.y)*n-o*r},zt.optimise=function(e){var t=e.vertices,i=e.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);var r=e.vertices,o=e.vertices;if(null!=r)for(var a=r;;){for(var s=a,p=s.prev,l=null,h=s.diagonals.head;null!=h;){var u=h.elt;if(zt.isinner(null==h.next?s.next:h.next.elt,s,p)){for(var d=!0,c=u.prev,_=null,y=u.diagonals.head;null!=y;){var x=y.elt;if(x==s){d=zt.isinner(null==y.next?u.next:y.next.elt,u,c);break}c=x,y=(_=y).next}d?(h=s.diagonals.erase(l),u.diagonals.erase(_)):(p=u,h=(l=h).next)}else p=u,h=(l=h).next}if((a=a.next)==o)break}},zt.prototype.__class__=zt;var bt=zpp_nape.geom.ZPP_ConvexRayResult=function(){this.toiDistance=0,this.next=null,this.inner=!1,this.ray=null,this.position=null,this.convex=null,this.shape=null,this.normal=null};bt.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"],bt.getRay=function(e,t,i,n){var r;null==bt.rayPool?(bt.internal=!0,(r=new Y).zpp_inner=new bt,r.zpp_inner.ray=r,bt.internal=!1):(r=bt.rayPool.ray,bt.rayPool=bt.rayPool.next,r.zpp_inner.next=null);var o=r.zpp_inner;return(o.normal=e).zpp_inner._immutable=!0,o.toiDistance=t,o.inner=i,o.shape=n,r},bt.getConvex=function(e,t,i,n){var r;null==bt.convexPool?(bt.internal=!0,(r=new U).zpp_inner=new bt,r.zpp_inner.convex=r,bt.internal=!1):(r=bt.convexPool.convex,bt.convexPool=bt.convexPool.next,r.zpp_inner.next=null);var o=r.zpp_inner;return o.normal=e,o.position=t,e.zpp_inner._immutable=!0,t.zpp_inner._immutable=!0,o.toiDistance=i,o.shape=n,r},bt.prototype.normal=null,bt.prototype.shape=null,bt.prototype.convex=null,bt.prototype.position=null,bt.prototype.ray=null,bt.prototype.inner=null,bt.prototype.next=null,bt.prototype.toiDistance=null,bt.prototype.disposed=function(){},bt.prototype.free=function(){this.normal.zpp_inner._immutable=!1;var e=this.normal,t=e.zpp_inner;if(e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,null!=this.position){this.position.zpp_inner._immutable=!1;var i=this.position,n=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}this.shape=null,this.toiDistance=0,null!=this.convex?(this.next=bt.convexPool,bt.convexPool=this):(this.next=bt.rayPool,bt.rayPool=this)},bt.prototype.__class__=bt;var Sn=zpp_nape.geom.ZPP_CutVert=function(){this.used=!1,this.rank=0,this.parent=null,this.positive=!1,this.value=0,this.vert=null,this.posy=0,this.posx=0,this.next=null,this.prev=null};Sn.__name__=["zpp_nape","geom","ZPP_CutVert"],Sn.path=function(e){var t;return null==Sn.zpp_pool?t=new Sn:(t=Sn.zpp_pool,Sn.zpp_pool=t.next,t.next=null),t.vert=e,(t.parent=t).rank=0,t.used=!1,t},Sn.prototype.prev=null,Sn.prototype.next=null,Sn.prototype.posx=null,Sn.prototype.posy=null,Sn.prototype.vert=null,Sn.prototype.value=null,Sn.prototype.positive=null,Sn.prototype.parent=null,Sn.prototype.rank=null,Sn.prototype.used=null,Sn.prototype.alloc=function(){},Sn.prototype.free=function(){this.vert=null,this.parent=null},Sn.prototype.__class__=Sn;var Cn=zpp_nape.geom.ZPP_CutInt=function(){this.path1=null,this.start=null,this.end=null,this.path0=null,this.vertex=!1,this.virtualint=!1,this.time=0,this.next=null};Cn.__name__=["zpp_nape","geom","ZPP_CutInt"],Cn.get=function(e,t,i,n,r,o,a){var s;return null==a&&(a=!1),null==o&&(o=!1),null==Cn.zpp_pool?s=new Cn:(s=Cn.zpp_pool,Cn.zpp_pool=s.next,s.next=null),s.virtualint=o,s.end=t,s.start=i,s.path0=n,s.path1=r,s.time=e,s.vertex=a,s},Cn.prototype.next=null,Cn.prototype.time=null,Cn.prototype.virtualint=null,Cn.prototype.vertex=null,Cn.prototype.path0=null,Cn.prototype.end=null,Cn.prototype.start=null,Cn.prototype.path1=null,Cn.prototype.alloc=function(){},Cn.prototype.free=function(){this.end=this.start=null,this.path0=this.path1=null},Cn.prototype.__class__=Cn;var Mn=zpp_nape.geom.ZPP_Cutter=function(){};Mn.__name__=["zpp_nape","geom","ZPP_Cutter"],Mn.run=function(e,t,i,n,r,o){var a,s,p=t.zpp_inner;null!=p._validate&&p._validate(),a=t.zpp_inner.x;var l=t.zpp_inner;null!=l._validate&&l._validate(),s=t.zpp_inner.y;var h,u,d=i.zpp_inner;null!=d._validate&&d._validate(),h=i.zpp_inner.x-a;var c=i.zpp_inner;null!=c._validate&&c._validate();for(var _=n?0:-1/0,y=r?1:1/0,x=-(s*h-a*(u=i.zpp_inner.y-s)),m=null,f=!1,v=e;;){var g;null==Sn.zpp_pool?g=new Sn:(g=Sn.zpp_pool,Sn.zpp_pool=g.next,g.next=null),g.vert=v,g.posx=g.vert.x,g.posy=g.vert.y,g.value=g.posy*h-g.posx*u+x,g.positive=0<g.value,0==g.value&&(f=!0);var z=g;if(null==m?m=z.prev=z.next=z:(z.prev=m,z.next=m.next,m.next.prev=z,m.next=z),m=z,(v=v.next)==e)break}if(f){var b=null,w=m;if(null!=m)for(var S=m;;){var C=S;if(0!=C.value){b=C;break}if((S=S.next)==w)break}var M=0,P=0;M=h,P=u;var k=1/Math.sqrt(M*M+P*P),T=M*=k;M=-(P*=k),P=T;for(var G=null,O=b;;)if(0==O.value||null!=G&&O!=G.next){var A=G.value*O.value;if(0!=A){var E,I=G.next;if(0<A)E=G.positive;else{var B=I.next,L=0,D=0;L=I.posx+B.posx,D=I.posy+B.posy;var R=(L*=.5)+1e-8*M,F=(D*=.5)+1e-8*P,j=!1;if(null!=e)for(var N=e;;){var U=N,H=U.prev;if((U.y<F&&H.y>=F||H.y<F&&U.y>=F)&&(U.x<=R||H.x<=R)&&U.x+(F-U.y)/(H.y-U.y)*(H.x-U.x)<R&&(j=!j),(N=N.next)==e)break}E=j}var V=O;if(null!=I)for(var W=I;W.positive=E,(W=W.next)!=V;);if((O=(G=O).next)==b)break}else if((O=O.next)==b)break}else if((O=(G=O).next)==b)break;for(;;){if(0!=O.value&&(null==G||O==G.next)){O=(G=O).next;break}var X=G.value*O.value;if(0==X){O=O.next;break}var q,Y=G.next;if(0<X)q=G.positive;else{var Z=Y.next,K=0,J=0;K=Y.posx+Z.posx,J=Y.posy+Z.posy;var Q=(K*=.5)+1e-8*M,$=(J*=.5)+1e-8*P,ee=!1;if(null!=e)for(var te=e;;){var ie=te,ne=ie.prev;if((ie.y<$&&ne.y>=$||ne.y<$&&ie.y>=$)&&(ie.x<=Q||ne.x<=Q)&&ie.x+($-ie.y)/(ne.y-ie.y)*(ne.x-ie.x)<Q&&(ee=!ee),(te=te.next)==e)break}q=ee}var re=O;if(null!=Y)for(var oe=Y;oe.positive=q,(oe=oe.next)!=re;);O=(G=O).next;break}}null==Mn.ints&&(Mn.ints=new Pn),null==Mn.paths&&(Mn.paths=new kn);var ae,se=null,pe=m.posx,le=m.posy;null==cr.zpp_pool?ae=new cr:(ae=cr.zpp_pool,cr.zpp_pool=ae.next,ae.next=null),ae.forced=!1,ae.x=pe,ae.y=le;var he=ae;null==se?se=he.prev=he.next=he:(he.next=se,he.prev=se.prev,se.prev.next=he,se.prev=he);var ue,de=se;null==Sn.zpp_pool?ue=new Sn:(ue=Sn.zpp_pool,Sn.zpp_pool=ue.next,ue.next=null),ue.vert=se,(ue.parent=ue).rank=0,ue.used=!1;var ce=ue;Mn.paths.add(ce);for(var _e=m;;){var ye,xe=_e.next,me=xe.posx,fe=xe.posy;null==cr.zpp_pool?ye=new cr:(ye=cr.zpp_pool,cr.zpp_pool=ye.next,ye.next=null),ye.forced=!1,ye.x=me,ye.y=fe;var ve=ye;if(_e.positive==xe.positive)null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);else{var ge,ze,be=u*(ge=xe.posx-_e.posx)-h*(ze=xe.posy-_e.posy);be=1/be;var we,Se,Ce,Me=(ze*(we=a-_e.posx)-ge*(Se=s-_e.posy))*be;if(Me<_||y<Me)null==Cn.zpp_pool?Ce=new Cn:(Ce=Cn.zpp_pool,Cn.zpp_pool=Ce.next,Ce.next=null),Ce.virtualint=!0,Ce.end=null,Ce.start=null,Ce.path0=null,Ce.path1=null,Ce.time=Me,Ce.vertex=!1,Mn.ints.add(Ce),null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);else if(0==_e.value){var Pe=se.prev;se=null;var ke,Te=Pe.x,Ge=Pe.y;null==cr.zpp_pool?ke=new cr:(ke=cr.zpp_pool,cr.zpp_pool=ke.next,ke.next=null),ke.forced=!1,ke.x=Te,ke.y=Ge;var Oe=ke;null==se?se=Oe.prev=Oe.next=Oe:(Oe.next=se,Oe.prev=se.prev,se.prev.next=Oe,se.prev=Oe),null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);var Ae,Ee=Mn.paths.head.elt;null==Sn.zpp_pool?Ae=new Sn:(Ae=Sn.zpp_pool,Sn.zpp_pool=Ae.next,Ae.next=null),Ae.vert=se,(Ae.parent=Ae).rank=0,Ae.used=!1,Mn.paths.add(Ae);var Ie,Be=Mn.paths.head.elt;null==Cn.zpp_pool?Ie=new Cn:(Ie=Cn.zpp_pool,Cn.zpp_pool=Ie.next,Ie.next=null),Ie.virtualint=!0,Ie.end=Pe,Ie.start=se,Ie.path0=Ee,Ie.path1=Be,Ie.time=Me,Ie.vertex=!1,Mn.ints.add(Ie)}else if(0==xe.value){null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);var Le=se.prev;se=null;var De,Re=xe.posx,Fe=xe.posy;null==cr.zpp_pool?De=new cr:(De=cr.zpp_pool,cr.zpp_pool=De.next,De.next=null),De.forced=!1,De.x=Re,De.y=Fe;var je=De;null==se?se=je.prev=je.next=je:(je.next=se,je.prev=se.prev,se.prev.next=je,se.prev=je);var Ne,Ue=Mn.paths.head.elt;null==Sn.zpp_pool?Ne=new Sn:(Ne=Sn.zpp_pool,Sn.zpp_pool=Ne.next,Ne.next=null),Ne.vert=se,(Ne.parent=Ne).rank=0,Ne.used=!1,Mn.paths.add(Ne);var He,Ve=Mn.paths.head.elt;null==Cn.zpp_pool?He=new Cn:(He=Cn.zpp_pool,Cn.zpp_pool=He.next,He.next=null),He.virtualint=!0,He.end=Le,He.start=se,He.path0=Ue,He.path1=Ve,He.time=Me,He.vertex=!1,Mn.ints.add(He)}else{var We,Xe=(u*we-h*Se)*be,qe=0,Ye=0;qe=_e.posx,Ye=_e.posy,qe+=ge*Xe,Ye+=ze*Xe,null==cr.zpp_pool?We=new cr:(We=cr.zpp_pool,cr.zpp_pool=We.next,We.next=null),We.forced=!1,We.x=qe,We.y=Ye;var Ze=We;null==se?se=Ze.prev=Ze.next=Ze:(Ze.next=se,Ze.prev=se.prev,se.prev.next=Ze,se.prev=Ze);var Ke,Je=se.prev;(se=null)==cr.zpp_pool?Ke=new cr:(Ke=cr.zpp_pool,cr.zpp_pool=Ke.next,Ke.next=null),Ke.forced=!1,Ke.x=qe,Ke.y=Ye;var Qe=Ke;null==se?se=Qe.prev=Qe.next=Qe:(Qe.next=se,Qe.prev=se.prev,se.prev.next=Qe,se.prev=Qe),null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);var $e,et=Mn.paths.head.elt;null==Sn.zpp_pool?$e=new Sn:($e=Sn.zpp_pool,Sn.zpp_pool=$e.next,$e.next=null),$e.vert=se,($e.parent=$e).rank=0,$e.used=!1,Mn.paths.add($e);var tt,it=Mn.paths.head.elt;null==Cn.zpp_pool?tt=new Cn:(tt=Cn.zpp_pool,Cn.zpp_pool=tt.next,tt.next=null),tt.virtualint=!1,tt.end=Je,tt.start=se,tt.path0=et,tt.path1=it,tt.time=Me,tt.vertex=!1,Mn.ints.add(tt)}}if((_e=_e.next)==m)break}var nt=se.prev;nt.next.prev=de.prev,de.prev.next=nt.next,(nt.next=de).prev=nt;var rt,ot,at=Mn.paths.head.elt;if(ce==ce.parent)rt=ce;else{for(var st=ce,pt=null;st!=st.parent;){var lt=st.parent;st.parent=pt,pt=st,st=lt}for(;null!=pt;){var ht=pt.parent;pt.parent=st,pt=ht}rt=st}if(at==at.parent)ot=at;else{for(var ut=at,dt=null;ut!=ut.parent;){var ct=ut.parent;ut.parent=dt,dt=ut,ut=ct}for(;null!=dt;){var _t=dt.parent;dt.parent=ut,dt=_t}ot=ut}rt!=ot&&(rt.rank<ot.rank?rt.parent=ot:rt.rank>ot.rank?ot.parent=rt:(ot.parent=rt).rank++);var yt=Mn.ints;if(null!=yt.head&&null!=yt.head.next){for(var xt,mt,ft,vt=yt.head,gt=null,zt=null,bt=null,wt=null,St=1;;){for(xt=0,zt=vt,gt=vt=null;null!=zt;){for(++xt,bt=zt,mt=0,ft=St;null!=bt&&mt<St;)++mt,bt=bt.next;for(;0<mt||0<ft&&null!=bt;)0==mt?(bt=(wt=bt).next,--ft):0==ft||null==bt?(zt=(wt=zt).next,--mt):zt.elt.time<bt.elt.time?(zt=(wt=zt).next,--mt):(bt=(wt=bt).next,--ft),null!=gt?gt.next=wt:vt=wt,gt=wt;zt=bt}if(gt.next=null,St<<=1,!(1<xt))break}yt.head=vt,yt.modified=!0,yt.pushmod=!0}for(;null!=Mn.ints.head;){var Ct=Mn.ints.pop_unsafe(),Mt=Mn.ints.pop_unsafe();if(Ct.virtualint||Mt.virtualint){if(Ct.virtualint&&!Mt.virtualint){var Pt,kt,Tt;if(null!=Mt.end&&Mt.end.prev==Mt.end){Mt.end.next=Mt.end.prev=null;var Gt=Mt.end;if(null!=Gt.wrap){Gt.wrap.zpp_inner._inuse=!1;var Ot=Gt.wrap,At=Ot.zpp_inner;Ot.zpp_inner.outer=null,Ot.zpp_inner=null,Ot.zpp_pool=jn.poolVec2,jn.poolVec2=Ot,null!=At.outer&&(At.outer.zpp_inner=null,At.outer=null),At._isimmutable=null,At._validate=null,At._invalidate=null,At.next=ep.zpp_pool,ep.zpp_pool=At,Gt.wrap=null}Gt.prev=Gt.next=null,Gt.next=cr.zpp_pool,cr.zpp_pool=Gt,Pt=null}else{var Et=Mt.end.prev;Mt.end.prev.next=Mt.end.next,Mt.end.next.prev=Mt.end.prev,Mt.end.next=Mt.end.prev=null;var It=Mt.end;if(null!=It.wrap){It.wrap.zpp_inner._inuse=!1;var Bt=It.wrap,Lt=Bt.zpp_inner;Bt.zpp_inner.outer=null,Bt.zpp_inner=null,Bt.zpp_pool=jn.poolVec2,jn.poolVec2=Bt,null!=Lt.outer&&(Lt.outer.zpp_inner=null,Lt.outer=null),Lt._isimmutable=null,Lt._validate=null,Lt._invalidate=null,Lt.next=ep.zpp_pool,ep.zpp_pool=Lt,It.wrap=null}It.prev=It.next=null,It.next=cr.zpp_pool,cr.zpp_pool=It,Mt.end=null,Pt=Et}if(Mt.end=Pt,!Mt.vertex)if(Mt.end!=Mt.path0.vert){var Dt;if(Mt.start.x=Mt.end.x,Mt.start.y=Mt.end.y,null!=Mt.end&&Mt.end.prev==Mt.end){Mt.end.next=Mt.end.prev=null;var Rt=Mt.end;if(null!=Rt.wrap){Rt.wrap.zpp_inner._inuse=!1;var Ft=Rt.wrap,jt=Ft.zpp_inner;Ft.zpp_inner.outer=null,Ft.zpp_inner=null,Ft.zpp_pool=jn.poolVec2,jn.poolVec2=Ft,null!=jt.outer&&(jt.outer.zpp_inner=null,jt.outer=null),jt._isimmutable=null,jt._validate=null,jt._invalidate=null,jt.next=ep.zpp_pool,ep.zpp_pool=jt,Rt.wrap=null}Rt.prev=Rt.next=null,Rt.next=cr.zpp_pool,cr.zpp_pool=Rt,Dt=null}else{var Nt=Mt.end.prev;Mt.end.prev.next=Mt.end.next,Mt.end.next.prev=Mt.end.prev,Mt.end.next=Mt.end.prev=null;var Ut=Mt.end;if(null!=Ut.wrap){Ut.wrap.zpp_inner._inuse=!1;var Ht=Ut.wrap,Vt=Ht.zpp_inner;Ht.zpp_inner.outer=null,Ht.zpp_inner=null,Ht.zpp_pool=jn.poolVec2,jn.poolVec2=Ht,null!=Vt.outer&&(Vt.outer.zpp_inner=null,Vt.outer=null),Vt._isimmutable=null,Vt._validate=null,Vt._invalidate=null,Vt.next=ep.zpp_pool,ep.zpp_pool=Vt,Ut.wrap=null}Ut.prev=Ut.next=null,Ut.next=cr.zpp_pool,cr.zpp_pool=Ut,Mt.end=null,Dt=Nt}Mt.end=Dt}else{var Wt=Mt.start.next;if(Mt.start.x=Wt.x,Mt.start.y=Wt.y,null!=Wt&&Wt.prev==Wt){Wt.next=Wt.prev=null;var Xt=Wt;if(null!=Xt.wrap){Xt.wrap.zpp_inner._inuse=!1;var qt=Xt.wrap,Yt=qt.zpp_inner;qt.zpp_inner.outer=null,qt.zpp_inner=null,qt.zpp_pool=jn.poolVec2,jn.poolVec2=qt,null!=Yt.outer&&(Yt.outer.zpp_inner=null,Yt.outer=null),Yt._isimmutable=null,Yt._validate=null,Yt._invalidate=null,Yt.next=ep.zpp_pool,ep.zpp_pool=Yt,Xt.wrap=null}Xt.prev=Xt.next=null,Xt.next=cr.zpp_pool,cr.zpp_pool=Xt,Wt=null}else{Wt.prev.next=Wt.next,Wt.next.prev=Wt.prev,Wt.next=Wt.prev=null;var Zt=Wt;if(null!=Zt.wrap){Zt.wrap.zpp_inner._inuse=!1;var Kt=Zt.wrap,Jt=Kt.zpp_inner;Kt.zpp_inner.outer=null,Kt.zpp_inner=null,Kt.zpp_pool=jn.poolVec2,jn.poolVec2=Kt,null!=Jt.outer&&(Jt.outer.zpp_inner=null,Jt.outer=null),Jt._isimmutable=null,Jt._validate=null,Jt._invalidate=null,Jt.next=ep.zpp_pool,ep.zpp_pool=Jt,Zt.wrap=null}Zt.prev=Zt.next=null,Zt.next=cr.zpp_pool,cr.zpp_pool=Zt}}if(Mt.end.next.prev=Mt.start.prev,Mt.start.prev.next=Mt.end.next,Mt.end.next=Mt.start,Mt.start.prev=Mt.end,Mt.path0==Mt.path0.parent)kt=Mt.path0;else{for(var Qt=Mt.path0,$t=null;Qt!=Qt.parent;){var ei=Qt.parent;Qt.parent=$t,$t=Qt,Qt=ei}for(;null!=$t;){var ti=$t.parent;$t.parent=Qt,$t=ti}kt=Qt}if(Mt.path1==Mt.path1.parent)Tt=Mt.path1;else{for(var ii=Mt.path1,ni=null;ii!=ii.parent;){var ri=ii.parent;ii.parent=ni,ni=ii,ii=ri}for(;null!=ni;){var oi=ni.parent;ni.parent=ii,ni=oi}Tt=ii}kt!=Tt&&(kt.rank<Tt.rank?kt.parent=Tt:kt.rank>Tt.rank?Tt.parent=kt:(Tt.parent=kt).rank++)}else if(Mt.virtualint&&!Ct.virtualint){var ai,si,pi;if(null!=Ct.end&&Ct.end.prev==Ct.end){Ct.end.next=Ct.end.prev=null;var li=Ct.end;if(null!=li.wrap){li.wrap.zpp_inner._inuse=!1;var hi=li.wrap,ui=hi.zpp_inner;hi.zpp_inner.outer=null,hi.zpp_inner=null,hi.zpp_pool=jn.poolVec2,jn.poolVec2=hi,null!=ui.outer&&(ui.outer.zpp_inner=null,ui.outer=null),ui._isimmutable=null,ui._validate=null,ui._invalidate=null,ui.next=ep.zpp_pool,ep.zpp_pool=ui,li.wrap=null}li.prev=li.next=null,li.next=cr.zpp_pool,cr.zpp_pool=li,ai=null}else{var di=Ct.end.prev;Ct.end.prev.next=Ct.end.next,Ct.end.next.prev=Ct.end.prev,Ct.end.next=Ct.end.prev=null;var ci=Ct.end;if(null!=ci.wrap){ci.wrap.zpp_inner._inuse=!1;var _i=ci.wrap,yi=_i.zpp_inner;_i.zpp_inner.outer=null,_i.zpp_inner=null,_i.zpp_pool=jn.poolVec2,jn.poolVec2=_i,null!=yi.outer&&(yi.outer.zpp_inner=null,yi.outer=null),yi._isimmutable=null,yi._validate=null,yi._invalidate=null,yi.next=ep.zpp_pool,ep.zpp_pool=yi,ci.wrap=null}ci.prev=ci.next=null,ci.next=cr.zpp_pool,cr.zpp_pool=ci,Ct.end=null,ai=di}if(Ct.end=ai,!Ct.vertex)if(Ct.end!=Ct.path0.vert){var xi;if(Ct.start.x=Ct.end.x,Ct.start.y=Ct.end.y,null!=Ct.end&&Ct.end.prev==Ct.end){Ct.end.next=Ct.end.prev=null;var mi=Ct.end;if(null!=mi.wrap){mi.wrap.zpp_inner._inuse=!1;var fi=mi.wrap,vi=fi.zpp_inner;fi.zpp_inner.outer=null,fi.zpp_inner=null,fi.zpp_pool=jn.poolVec2,jn.poolVec2=fi,null!=vi.outer&&(vi.outer.zpp_inner=null,vi.outer=null),vi._isimmutable=null,vi._validate=null,vi._invalidate=null,vi.next=ep.zpp_pool,ep.zpp_pool=vi,mi.wrap=null}mi.prev=mi.next=null,mi.next=cr.zpp_pool,cr.zpp_pool=mi,xi=null}else{var gi=Ct.end.prev;Ct.end.prev.next=Ct.end.next,Ct.end.next.prev=Ct.end.prev,Ct.end.next=Ct.end.prev=null;var zi=Ct.end;if(null!=zi.wrap){zi.wrap.zpp_inner._inuse=!1;var bi=zi.wrap,wi=bi.zpp_inner;bi.zpp_inner.outer=null,bi.zpp_inner=null,bi.zpp_pool=jn.poolVec2,jn.poolVec2=bi,null!=wi.outer&&(wi.outer.zpp_inner=null,wi.outer=null),wi._isimmutable=null,wi._validate=null,wi._invalidate=null,wi.next=ep.zpp_pool,ep.zpp_pool=wi,zi.wrap=null}zi.prev=zi.next=null,zi.next=cr.zpp_pool,cr.zpp_pool=zi,Ct.end=null,xi=gi}Ct.end=xi}else{var Si=Ct.start.next;if(Ct.start.x=Si.x,Ct.start.y=Si.y,null!=Si&&Si.prev==Si){Si.next=Si.prev=null;var Ci=Si;if(null!=Ci.wrap){Ci.wrap.zpp_inner._inuse=!1;var Mi=Ci.wrap,Pi=Mi.zpp_inner;Mi.zpp_inner.outer=null,Mi.zpp_inner=null,Mi.zpp_pool=jn.poolVec2,jn.poolVec2=Mi,null!=Pi.outer&&(Pi.outer.zpp_inner=null,Pi.outer=null),Pi._isimmutable=null,Pi._validate=null,Pi._invalidate=null,Pi.next=ep.zpp_pool,ep.zpp_pool=Pi,Ci.wrap=null}Ci.prev=Ci.next=null,Ci.next=cr.zpp_pool,cr.zpp_pool=Ci,Si=null}else{Si.prev.next=Si.next,Si.next.prev=Si.prev,Si.next=Si.prev=null;var ki=Si;if(null!=ki.wrap){ki.wrap.zpp_inner._inuse=!1;var Ti=ki.wrap,Gi=Ti.zpp_inner;Ti.zpp_inner.outer=null,Ti.zpp_inner=null,Ti.zpp_pool=jn.poolVec2,jn.poolVec2=Ti,null!=Gi.outer&&(Gi.outer.zpp_inner=null,Gi.outer=null),Gi._isimmutable=null,Gi._validate=null,Gi._invalidate=null,Gi.next=ep.zpp_pool,ep.zpp_pool=Gi,ki.wrap=null}ki.prev=ki.next=null,ki.next=cr.zpp_pool,cr.zpp_pool=ki}}if(Ct.end.next.prev=Ct.start.prev,Ct.start.prev.next=Ct.end.next,Ct.end.next=Ct.start,Ct.start.prev=Ct.end,Ct.path0==Ct.path0.parent)si=Ct.path0;else{for(var Oi=Ct.path0,Ai=null;Oi!=Oi.parent;){var Ei=Oi.parent;Oi.parent=Ai,Ai=Oi,Oi=Ei}for(;null!=Ai;){var Ii=Ai.parent;Ai.parent=Oi,Ai=Ii}si=Oi}if(Ct.path1==Ct.path1.parent)pi=Ct.path1;else{for(var Bi=Ct.path1,Li=null;Bi!=Bi.parent;){var Di=Bi.parent;Bi.parent=Li,Li=Bi,Bi=Di}for(;null!=Li;){var Ri=Li.parent;Li.parent=Bi,Li=Ri}pi=Bi}si!=pi&&(si.rank<pi.rank?si.parent=pi:si.rank>pi.rank?pi.parent=si:(pi.parent=si).rank++)}}else{var Fi,ji,Ni,Ui;if(Ct.end.next.prev=Mt.start.prev,Mt.start.prev.next=Ct.end.next,Ct.end.next=Mt.start,Mt.start.prev=Ct.end,Mt.end.next.prev=Ct.start.prev,Ct.start.prev.next=Mt.end.next,Mt.end.next=Ct.start,Ct.start.prev=Mt.end,Ct.path0==Ct.path0.parent)Fi=Ct.path0;else{for(var Hi=Ct.path0,Vi=null;Hi!=Hi.parent;){var Wi=Hi.parent;Hi.parent=Vi,Vi=Hi,Hi=Wi}for(;null!=Vi;){var Xi=Vi.parent;Vi.parent=Hi,Vi=Xi}Fi=Hi}if(Mt.path1==Mt.path1.parent)ji=Mt.path1;else{for(var qi=Mt.path1,Yi=null;qi!=qi.parent;){var Zi=qi.parent;qi.parent=Yi,Yi=qi,qi=Zi}for(;null!=Yi;){var Ki=Yi.parent;Yi.parent=qi,Yi=Ki}ji=qi}if(Fi!=ji&&(Fi.rank<ji.rank?Fi.parent=ji:Fi.rank>ji.rank?ji.parent=Fi:(ji.parent=Fi).rank++),Ct.path1==Ct.path1.parent)Ni=Ct.path1;else{for(var Ji=Ct.path1,Qi=null;Ji!=Ji.parent;){var $i=Ji.parent;Ji.parent=Qi,Qi=Ji,Ji=$i}for(;null!=Qi;){var en=Qi.parent;Qi.parent=Ji,Qi=en}Ni=Ji}if(Mt.path0==Mt.path0.parent)Ui=Mt.path0;else{for(var tn=Mt.path0,nn=null;tn!=tn.parent;){var rn=tn.parent;tn.parent=nn,nn=tn,tn=rn}for(;null!=nn;){var on=nn.parent;nn.parent=tn,nn=on}Ui=tn}Ni!=Ui&&(Ni.rank<Ui.rank?Ni.parent=Ui:Ni.rank>Ui.rank?Ui.parent=Ni:(Ui.parent=Ni).rank++)}Ct.end=Ct.start=null,Ct.path0=Ct.path1=null,Ct.next=Cn.zpp_pool,Cn.zpp_pool=Ct,Mt.end=Mt.start=null,Mt.path0=Mt.path1=null,Mt.next=Cn.zpp_pool,Cn.zpp_pool=Mt}for(var an=null==o?new wn:o,sn=Mn.paths.head;null!=sn;){var pn,ln=sn.elt;if(ln==ln.parent)pn=ln;else{for(var hn=ln,un=null;hn!=hn.parent;){var dn=hn.parent;hn.parent=un,un=hn,hn=dn}for(;null!=un;){var cn=un.parent;un.parent=hn,un=cn}pn=hn}if(pn.used)sn=sn.next;else{pn.used=!0;for(var _n=pn.vert,yn=!0;null!=pn.vert&&(yn||_n!=pn.vert);)if(yn=!1,_n.x==_n.next.x&&_n.y==_n.next.y)if(_n==pn.vert&&(pn.vert=_n.next==_n?null:_n.next,yn=!0),null!=_n&&_n.prev==_n)_n.next=_n.prev=null,_n=_n=null;else{var xn=_n.next;_n.prev.next=_n.next,_n.next.prev=_n.prev,_n.next=_n.prev=null,_n=null,_n=xn}else _n=_n.next;if(null!=pn.vert){var mn=bn.get();mn.zpp_inner.vertices=pn.vert,an.zpp_inner.reverse_flag?an.push(mn):an.unshift(mn)}sn=sn.next}}for(;null!=Mn.paths.head;){var fn=Mn.paths.pop_unsafe();fn.vert=null,fn.parent=null,fn.next=Sn.zpp_pool,Sn.zpp_pool=fn}for(;null!=m;)if(null!=m&&m.prev==m){m.next=m.prev=null;var vn=m;vn.vert=null,vn.parent=null,vn.next=Sn.zpp_pool,Sn.zpp_pool=vn,m=m=null}else{var gn=m.next;m.prev.next=m.next,m.next.prev=m.prev,m.next=m.prev=null;var zn=m;zn.vert=null,zn.parent=null,zn.next=Sn.zpp_pool,Sn.zpp_pool=zn,m=null,m=gn}return an},Mn.prototype.__class__=Mn;var wt=zpp_nape.geom.ZPP_Geom=function(){};wt.__name__=["zpp_nape","geom","ZPP_Geom"],wt.validateShape=function(e){if(1==e.type){var t=e.polygon;if(t.zip_gaxi&&null!=t.body){t.zip_gaxi=!1,t.validate_laxi();var i=t.body;if(i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot)),t.zip_gverts&&null!=t.body){t.zip_gverts=!1,t.validate_lverts();var n=t.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var r=t.lverts.next,o=t.gverts.next;null!=o;){var a=o,s=r;r=r.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),o=o.next}}var p=t.edges.head,l=t.gverts.next,h=l;for(l=l.next;null!=l;){var u=l,d=p.elt;p=p.next,d.gp0=h,d.gp1=u,d.gnormx=t.body.axisy*d.lnormx-t.body.axisx*d.lnormy,d.gnormy=d.lnormx*t.body.axisx+d.lnormy*t.body.axisy,d.gprojection=t.body.posx*d.gnormx+t.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy,h=u,l=l.next}var c=p.elt;c.gp0=h,c.gp1=t.gverts.next,c.gnormx=t.body.axisy*c.lnormx-t.body.axisx*c.lnormy,c.gnormy=c.lnormx*t.body.axisx+c.lnormy*t.body.axisy,c.gprojection=t.body.posx*c.gnormx+t.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}}if(e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var _=e.circle;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var x=y.localCOMy=0,m=y.lverts.next,f=m,v=m=m.next;for(m=m.next;null!=m;){var g=m;x+=v.x*(g.y-f.y);var z=g.y*v.x-g.x*v.y;y.localCOMx+=(v.x+g.x)*z,y.localCOMy+=(v.y+g.y)*z,f=v,v=g,m=m.next}var b=m=y.lverts.next;x+=v.x*(b.y-f.y);var w=b.y*v.x-b.x*v.y;y.localCOMx+=(v.x+b.x)*w,y.localCOMy+=(v.y+b.y)*w,f=v;var S=m=m.next;x+=b.x*(S.y-f.y);var C=S.y*b.x-S.x*b.y;y.localCOMx+=(b.x+S.x)*C,y.localCOMy+=(b.y+S.y)*C;var M=x=1/(3*x);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=_.radius,T=_.radius;_.aabb.minx=_.worldCOMx-k,_.aabb.miny=_.worldCOMy-T,_.aabb.maxx=_.worldCOMx+k,_.aabb.maxy=_.worldCOMy+T}else{var G=e.polygon;if(G.zip_gverts&&null!=G.body){G.zip_gverts=!1,G.validate_lverts();var O=G.body;O.zip_axis&&(O.zip_axis=!1,O.axisx=Math.sin(O.rot),O.axisy=Math.cos(O.rot));for(var A=G.lverts.next,E=G.gverts.next;null!=E;){var I=E,B=A;A=A.next,I.x=G.body.posx+(G.body.axisy*B.x-G.body.axisx*B.y),I.y=G.body.posy+(B.x*G.body.axisx+B.y*G.body.axisy),E=E.next}}var L=G.gverts.next;G.aabb.minx=L.x,G.aabb.miny=L.y,G.aabb.maxx=L.x,G.aabb.maxy=L.y;for(var D=G.gverts.next.next;null!=D;){var R=D;R.x<G.aabb.minx&&(G.aabb.minx=R.x),R.x>G.aabb.maxx&&(G.aabb.maxx=R.x),R.y<G.aabb.miny&&(G.aabb.miny=R.y),R.y>G.aabb.maxy&&(G.aabb.maxy=R.y),D=D.next}}if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var F=e.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,H=N=N.next;for(N=N.next;null!=N;){var V=N;j+=H.x*(V.y-U.y);var W=V.y*H.x-V.x*H.y;F.localCOMx+=(H.x+V.x)*W,F.localCOMy+=(H.y+V.y)*W,U=H,H=V,N=N.next}var X=N=F.lverts.next;j+=H.x*(X.y-U.y);var q=X.y*H.x-X.x*H.y;F.localCOMx+=(H.x+X.x)*q,F.localCOMy+=(H.y+X.y)*q,U=H;var Y=N=N.next;j+=X.x*(Y.y-U.y);var Z=Y.y*X.x-Y.x*X.y;F.localCOMx+=(X.x+Y.x)*Z,F.localCOMy+=(X.y+Y.y)*Z;var K=j=1/(3*j);F.localCOMx*=K,F.localCOMy*=K}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var J=e.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}},wt.prototype.__class__=wt;var cr=zpp_nape.geom.ZPP_GeomVert=function(){this.forced=!1,this.wrap=null,this.next=null,this.prev=null,this.y=0,this.x=0};cr.__name__=["zpp_nape","geom","ZPP_GeomVert"],cr.get=function(e,t){var i;return null==cr.zpp_pool?i=new cr:(i=cr.zpp_pool,cr.zpp_pool=i.next,i.next=null),i.forced=!1,i.x=e,i.y=t,i},cr.prototype.x=null,cr.prototype.y=null,cr.prototype.prev=null,cr.prototype.next=null,cr.prototype.wrap=null,cr.prototype.forced=null,cr.prototype.free=function(){if(null!=this.wrap){this.wrap.zpp_inner._inuse=!1;var e=this.wrap,t=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,this.wrap=null}this.prev=this.next=null},cr.prototype.alloc=function(){this.forced=!1},cr.prototype.wrapper=function(){if(null==this.wrap){var e,t=this.x,i=this.y;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap=e,this.wrap.zpp_inner._inuse=!0,this.wrap.zpp_inner._invalidate=$(this,this.modwrap),this.wrap.zpp_inner._validate=$(this,this.getwrap)}return this.wrap},cr.prototype.modwrap=function(e){this.x=e.x,this.y=e.y},cr.prototype.getwrap=function(){this.wrap.zpp_inner.x=this.x,this.wrap.zpp_inner.y=this.y},cr.prototype.__class__=cr;var St=zpp_nape.geom.ZPP_GeomPoly=function(e){this.vertices=null,this.outer=null,this.outer=e};St.__name__=["zpp_nape","geom","ZPP_GeomPoly"],St.prototype.outer=null,St.prototype.vertices=null,St.prototype.__class__=St;var Ct=zpp_nape.geom.ZPP_GeomVertexIterator=function(){this.next=null,this.outer=null,this.forward=!1,this.first=!1,this.start=null,this.ptr=null,this.outer=new V};Ct.__name__=["zpp_nape","geom","ZPP_GeomVertexIterator"],Ct.get=function(e,t){var i;return null==Ct.zpp_pool?i=new Ct:(i=Ct.zpp_pool,Ct.zpp_pool=i.next,i.next=null),(i.outer.zpp_inner=i).ptr=e,i.forward=t,i.start=e,i.first=null!=e,i.outer},Ct.prototype.ptr=null,Ct.prototype.start=null,Ct.prototype.first=null,Ct.prototype.forward=null,Ct.prototype.outer=null,Ct.prototype.next=null,Ct.prototype.free=function(){this.outer.zpp_inner=null,this.ptr=this.start=null},Ct.prototype.alloc=function(){},Ct.prototype.__class__=Ct;var Mt=zpp_nape.geom.ZPP_MarchSpan=function(){this.next=null,this.out=!1,this.rank=0,this.parent=null,this.parent=this};Mt.__name__=["zpp_nape","geom","ZPP_MarchSpan"],Mt.prototype.parent=null,Mt.prototype.rank=null,Mt.prototype.out=null,Mt.prototype.next=null,Mt.prototype.free=function(){this.parent=this},Mt.prototype.alloc=function(){this.out=!1,this.rank=0},Mt.prototype.__class__=Mt;var _r=zpp_nape.geom.ZPP_MarchPair=function(){this.next=null,this.spanr=null,this.span2=null,this.span1=null,this.pd=null,this.okeyr=0,this.keyr=0,this.pr=null,this.okey2=0,this.key2=0,this.p2=null,this.okey1=0,this.key1=0,this.p1=null};_r.__name__=["zpp_nape","geom","ZPP_MarchPair"],_r.prototype.p1=null,_r.prototype.key1=null,_r.prototype.okey1=null,_r.prototype.p2=null,_r.prototype.key2=null,_r.prototype.okey2=null,_r.prototype.pr=null,_r.prototype.keyr=null,_r.prototype.okeyr=null,_r.prototype.pd=null,_r.prototype.span1=null,_r.prototype.span2=null,_r.prototype.spanr=null,_r.prototype.next=null,_r.prototype.free=function(){this.p1=this.p2=this.pr=this.pd=null,this.span1=this.span2=this.spanr=null},_r.prototype.alloc=function(){},_r.prototype.__class__=_r;var yr=zpp_nape.geom.ZPP_MarchingSquares=function(){};yr.__name__=["zpp_nape","geom","ZPP_MarchingSquares"],yr.isos=null,yr.ints=null,yr.map=null,yr.run=function(e,t,i,n,r,o,a,s,p){var l=n-t,h=o.zpp_inner;null!=h._validate&&h._validate();var u=l/o.zpp_inner.x,d=0|u,c=r-i,_=o.zpp_inner;null!=_._validate&&_._validate();var y=c/o.zpp_inner.y,x=0|y;u!=d&&++d,y!=x&&++x,s&&(null==yr.map?yr.map=new di(d,x):yr.map.resize(d,x,null)),null==yr.isos?yr.isos=new hi(d+1,x+1):yr.isos.resize(d+1,x+1,0);for(var m=0,f=x+1;m<f;){var v,g=m++;if(0==g)v=i;else if(g<=x){var z=o.zpp_inner;null!=z._validate&&z._validate(),v=i+o.zpp_inner.y*g}else v=r;for(var b=0,w=d+1;b<w;){var S,C=b++;if(0==C)S=t;else if(C<=d){var M=o.zpp_inner;null!=M._validate&&M._validate(),S=t+o.zpp_inner.x*C}else S=n;var P=yr.isos,k=e(S,v);P.list[g*P.width+C]=k}}null==yr.ints?yr.ints=new ui(d+1,1+(x<<1)):yr.ints.resize(d+1,1+(x<<1),null);var T=null;s&&(null==Mt.zpp_pool?T=new Mt:(T=Mt.zpp_pool,Mt.zpp_pool=T.next,T.next=null),T.out=!1,T.rank=0);for(var G=i,O=0,A=x;O<A;){var E,I=O++,B=G;if(I==x-1)E=r;else{var L=o.zpp_inner;null!=L._validate&&L._validate(),E=i+o.zpp_inner.y*(I+1)}G=E;for(var D=t,R=null,F=0,j=d;F<j;){var N,U=F++,H=D;if(U==d-1)N=n;else{var V=o.zpp_inner;null!=V._validate&&V._validate(),N=t+o.zpp_inner.x*(U+1)}D=N;var W=yr.me.marchSquare(e,yr.isos,yr.ints,H,B,N,E,U,I,0==U||!s,0==I||!s,U==d-1||!s,I==x-1||!s,a);if(null!=W)if(s){var X=null!=W.p2&&14!=W.okey2?W.p2:W.p1;W.pd=0==(128&(X==W.p2?W.okey2:W.okey1))?X.prev:X.prev.prev;var q,Y=yr.map;if(Y.list[I*Y.width+U]=W,null!=R){var Z=W.key1,K=1&Z|(192&Z)>>5,J=0;0!=(1&K)&&(J=1),0!=(2&K)&&++J,0!=(4&K)&&++J,q=2<=J}else q=!1;if(q)yr.me.combLR(R,W),W.span1=R.spanr;else{null==Mt.zpp_pool?W.span1=new Mt:(W.span1=Mt.zpp_pool,Mt.zpp_pool=W.span1.next,W.span1.next=null);var Q=W.span1;Q.out=!1,Q.rank=0,W.span1.next=T,T=W.span1}if(null!=W.p2){null==Mt.zpp_pool?W.span2=new Mt:(W.span2=Mt.zpp_pool,Mt.zpp_pool=W.span2.next,W.span2.next=null);var $=W.span2;$.out=!1,$.rank=0,W.span2.next=T,T=W.span2,W.spanr=W.span2}else W.spanr=W.span1;var ee=(28&W.keyr)>>2,te=0;0!=(1&ee)&&(te=1),0!=(2&ee)&&++te,0!=(4&ee)&&++te,R=2<=te?W:null}else yr.me.output(p,W.p1),null!=W.p2&&yr.me.output(p,W.p2),W.p1=W.p2=W.pr=W.pd=null,W.span1=W.span2=W.spanr=null,W.next=_r.zpp_pool,_r.zpp_pool=W;else R=null}}if(s){for(var ie=1,ne=x;ie<ne;)for(var re=ie++,oe=null,ae=0,se=d;ae<se;){var pe=ae++,le=yr.map,he=le.list[re*le.width+pe];if(null!=he){var ue=7&(null!=he.p2&&14==he.okey2?he.okey2:he.okey1),de=0;if(0!=(1&ue)&&(de=1),0!=(2&ue)&&++de,0!=(4&ue)&&++de,de<2)oe=null;else{var ce=yr.map,_e=ce.list[(re-1)*ce.width+pe];if(null!=_e){var ye=(112&(null!=_e.p2&&56==_e.okey2?_e.okey2:_e.okey1))>>4,xe=0;if(0!=(1&ye)&&(xe=1),0!=(2&ye)&&++xe,0!=(4&ye)&&++xe,xe<2)oe=null;else{var me,fe,ve=null!=_e.p2&&56==_e.okey2?_e.span2:_e.span1,ge=null!=he.p2&&14==he.okey2?he.span2:he.span1;if(ve==ve.parent)me=ve;else{for(var ze=ve,be=null;ze!=ze.parent;){var we=ze.parent;ze.parent=be,be=ze,ze=we}for(;null!=be;){var Se=be.parent;be.parent=ze,be=Se}me=ze}if(ge==ge.parent)fe=ge;else{for(var Ce=ge,Me=null;Ce!=Ce.parent;){var Pe=Ce.parent;Ce.parent=Me,Me=Ce,Ce=Pe}for(;null!=Me;){var ke=Me.parent;Me.parent=Ce,Me=ke}fe=Ce}if(me==fe)oe!=ge&&yr.me.combUD_virtual(_e,he);else{var Te,Ge;if(ve==ve.parent)Te=ve;else{for(var Oe=ve,Ae=null;Oe!=Oe.parent;){var Ee=Oe.parent;Oe.parent=Ae,Ae=Oe,Oe=Ee}for(;null!=Ae;){var Ie=Ae.parent;Ae.parent=Oe,Ae=Ie}Te=Oe}if(ge==ge.parent)Ge=ge;else{for(var Be=ge,Le=null;Be!=Be.parent;){var De=Be.parent;Be.parent=Le,Le=Be,Be=De}for(;null!=Le;){var Re=Le.parent;Le.parent=Be,Le=Re}Ge=Be}Te!=Ge&&(Te.rank<Ge.rank?Te.parent=Ge:Te.rank>Ge.rank?Ge.parent=Te:(Ge.parent=Te).rank++),yr.me.combUD(_e,he)}oe=0!=(4&(ge==he.span2?he.okey2:he.okey1))?ge:null}}else oe=null}}else oe=null}for(var Fe=0,je=x;Fe<je;)for(var Ne=Fe++,Ue=0,He=d;Ue<He;){var Ve=Ue++,We=yr.map,Xe=We.list[Ne*We.width+Ve];if(null!=Xe){var qe;if(Xe.span1==Xe.span1.parent)qe=Xe.span1;else{for(var Ye=Xe.span1,Ze=null;Ye!=Ye.parent;){var Ke=Ye.parent;Ye.parent=Ze,Ze=Ye,Ye=Ke}for(;null!=Ze;){var Je=Ze.parent;Ze.parent=Ye,Ze=Je}qe=Ye}if(qe.out||(qe.out=!0,yr.me.output(p,Xe.p1)),null!=Xe.p2){if(Xe.span2==Xe.span2.parent)qe=Xe.span2;else{for(var Qe=Xe.span2,$e=null;Qe!=Qe.parent;){var et=Qe.parent;Qe.parent=$e,$e=Qe,Qe=et}for(;null!=$e;){var tt=$e.parent;$e.parent=Qe,$e=tt}qe=Qe}qe.out||(qe.out=!0,yr.me.output(p,Xe.p2))}Xe.p1=Xe.p2=Xe.pr=Xe.pd=null,Xe.span1=Xe.span2=Xe.spanr=null,Xe.next=_r.zpp_pool,_r.zpp_pool=Xe;var it=yr.map;it.list[Ne*it.width+Ve]=null}}for(;null!=T;){var nt=T;T=nt.next,(nt.parent=nt).next=Mt.zpp_pool,Mt.zpp_pool=nt}}},yr.ISO=function(e,t,i){return e(t,i)},yr.prototype.output=function(e,t){var i;if(null==t||t.next==t||t.next==t.prev)i=!0;else{var n=0,r=t;if(null!=t)for(var o=t;;){var a=o;if(n+=a.x*(a.next.y-a.prev.y),(o=o.next)==r)break}var s=.5*n;i=s*s<Qs.epsilon*Qs.epsilon}if(i)for(;null!=t;)if(null!=t&&t.prev==t)t.next=t.prev=null,t=t=null;else{var p=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null,t=null,t=p}else{var l=bn.get();l.zpp_inner.vertices=t,e.zpp_inner.reverse_flag?e.push(l):e.unshift(l)}},yr.prototype.linkright=function(e,t){var i=7&t;return 0==i?e:3==i?e.next.next:e.next},yr.prototype.linkleft=function(e,t){return 0==(1&t)?e.prev:e},yr.prototype.linkdown=function(e,t){return 0==(128&t)?e.prev:e.prev.prev},yr.prototype.linkup=function(e,t){return e},yr.prototype.combLR=function(e,t){var i=e.pr,n=7&e.okeyr,r=0==n?i:3==n?i.next.next:i.next,o=t.p1,a=0==(1&t.okey1)?o.prev:o,s=r.next,p=a.prev;if(0!=(4&e.keyr)){t.pr==t.p1&&(t.pr=r.prev),t.p1=r.prev,r.prev.next=a.next,a.next.prev=r.prev;var l=r;if(null!=l.wrap){l.wrap.zpp_inner._inuse=!1;var h=l.wrap,u=h.zpp_inner;h.zpp_inner.outer=null,h.zpp_inner=null,h.zpp_pool=jn.poolVec2,jn.poolVec2=h,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=ep.zpp_pool,ep.zpp_pool=u,l.wrap=null}l.prev=l.next=null,l.next=cr.zpp_pool,cr.zpp_pool=l}else r.next=a.next,a.next.prev=r;var d=a;if(null!=d.wrap){d.wrap.zpp_inner._inuse=!1;var c=d.wrap,_=c.zpp_inner;c.zpp_inner.outer=null,c.zpp_inner=null,c.zpp_pool=jn.poolVec2,jn.poolVec2=c,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_,d.wrap=null}if(d.prev=d.next=null,d.next=cr.zpp_pool,cr.zpp_pool=d,0!=(16&e.keyr)){if(t.pd=s.next,s.next.prev=p.prev,p.prev.next=s.next,null!=s.wrap){s.wrap.zpp_inner._inuse=!1;var y=s.wrap,x=y.zpp_inner;y.zpp_inner.outer=null,y.zpp_inner=null,y.zpp_pool=jn.poolVec2,jn.poolVec2=y,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=ep.zpp_pool,ep.zpp_pool=x,s.wrap=null}s.prev=s.next=null,s.next=cr.zpp_pool,cr.zpp_pool=s}else s.prev=p.prev,p.prev.next=s;if(null!=p.wrap){p.wrap.zpp_inner._inuse=!1;var m=p.wrap,f=m.zpp_inner;m.zpp_inner.outer=null,m.zpp_inner=null,m.zpp_pool=jn.poolVec2,jn.poolVec2=m,null!=f.outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=ep.zpp_pool,ep.zpp_pool=f,p.wrap=null}p.prev=p.next=null,p.next=cr.zpp_pool,cr.zpp_pool=p},yr.prototype.combUD=function(e,t){null!=e.p2&&e.key2;var i=null!=t.p2&&14==t.key2?t.p2:t.p1,n=e.pd,r=i,o=n.prev,a=r.next;if(r.next=n.next,n.next.prev=r,null!=n.wrap){n.wrap.zpp_inner._inuse=!1;var s=n.wrap,p=s.zpp_inner;s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=p.outer&&(p.outer.zpp_inner=null,p.outer=null),p._isimmutable=null,p._validate=null,p._invalidate=null,p.next=ep.zpp_pool,ep.zpp_pool=p,n.wrap=null}if(n.prev=n.next=null,n.next=cr.zpp_pool,cr.zpp_pool=n,a.prev=o.prev,o.prev.next=a,o==e.p1&&(e.p1=a),null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var l=o.wrap,h=l.zpp_inner;l.zpp_inner.outer=null,l.zpp_inner=null,l.zpp_pool=jn.poolVec2,jn.poolVec2=l,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h,o.wrap=null}o.prev=o.next=null,o.next=cr.zpp_pool,cr.zpp_pool=o},yr.prototype.combUD_virtual=function(e,t){null!=e.p2&&e.key2;var i=null!=t.p2&&14==t.key2?t.p2:t.p1,n=e.pd,r=i;n.forced=r.forced=n.prev.forced=r.next.forced=!0},yr.prototype.combLeft=function(e){var t=1&e|(192&e)>>5,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combRight=function(e){var t=(28&e)>>2,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combUp=function(e){var t=7&e,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combDown=function(e){var t=(112&e)>>4,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.comb=function(e){var t=0;return 0!=(1&e)&&(t=1),0!=(2&e)&&++t,0!=(4&e)&&++t,2<=t},yr.prototype.marchSquare=function(e,t,i,n,r,o,a,s,p,l,h,u,d,c){var _=0,y=t.list[p*t.width+s];y<0&&(_=8);var x=t.list[p*t.width+(s+1)];x<0&&(_|=4);var m=t.list[(p+1)*t.width+(s+1)];m<0&&(_|=2);var f,v=t.list[(p+1)*t.width+s];if(v<0&&(_|=1),0==_)return null;if(null==_r.zpp_pool?f=new _r:(f=_r.zpp_pool,_r.zpp_pool=f.next,f.next=null),10!=_&&5!=_){var g=yr.look_march[_];f.okey1=g;for(var z=0;z<8;){var b=z++;if(0!=(g&1<<b)){var w,S,C,M,P=null;if(0==b)null==cr.zpp_pool?w=new cr:(w=cr.zpp_pool,cr.zpp_pool=w.next,w.next=null),w.forced=!1,w.x=n,w.y=r,P=w,(l||h)&&(P.forced=!0);else if(2==b)null==cr.zpp_pool?S=new cr:(S=cr.zpp_pool,cr.zpp_pool=S.next,S.next=null),S.forced=!1,S.x=o,S.y=r,P=S,(u||h)&&(P.forced=!0);else if(4==b)null==cr.zpp_pool?C=new cr:(C=cr.zpp_pool,cr.zpp_pool=C.next,C.next=null),C.forced=!1,C.x=o,C.y=a,P=C,(u||d)&&(P.forced=!0);else if(6==b)null==cr.zpp_pool?M=new cr:(M=cr.zpp_pool,cr.zpp_pool=M.next,M.next=null),M.forced=!1,M.x=n,M.y=a,P=M,(l||d)&&(P.forced=!0);else if(1==b){if(null==(P=i.list[(p<<1)*i.width+s])){var k,T=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?k=new cr:(k=cr.zpp_pool,cr.zpp_pool=k.next,k.next=null),k.forced=!1,k.x=T,k.y=r,P=k,i.list[(p<<1)*i.width+s]=P}else{var G,O=P.x,A=P.y;null==cr.zpp_pool?G=new cr:(G=cr.zpp_pool,cr.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=O,G.y=A,P=G}h&&(P.forced=!0),P.x!=n&&P.x!=o||(P.x==n&&0!=(1&g)||P.x==o&&0!=(4&g))&&(g^=2)}else if(5==b){if(null==(P=i.list[(2+(p<<1))*i.width+s])){var E,I=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?E=new cr:(E=cr.zpp_pool,cr.zpp_pool=E.next,E.next=null),E.forced=!1,E.x=I,E.y=a,P=E,i.list[(2+(p<<1))*i.width+s]=P}else{var B,L=P.x,D=P.y;null==cr.zpp_pool?B=new cr:(B=cr.zpp_pool,cr.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=L,B.y=D,P=B}d&&(P.forced=!0),P.x!=n&&P.x!=o||(P.x==n&&0!=(64&g)||P.x==o&&0!=(16&g))&&(g^=32)}else if(3==b){if(null==(P=i.list[(1+(p<<1))*i.width+(s+1)])){var R,F=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?R=new cr:(R=cr.zpp_pool,cr.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=o,R.y=F,P=R,i.list[(1+(p<<1))*i.width+(s+1)]=P}else{var j,N=P.x,U=P.y;null==cr.zpp_pool?j=new cr:(j=cr.zpp_pool,cr.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=N,j.y=U,P=j}u&&(P.forced=!0),P.y!=r&&P.y!=a||(P.y==r&&0!=(4&g)||P.y==a&&0!=(16&g))&&(g^=8)}else{if(null==(P=i.list[(1+(p<<1))*i.width+s])){var H,V=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?H=new cr:(H=cr.zpp_pool,cr.zpp_pool=H.next,H.next=null),H.forced=!1,H.x=n,H.y=V,P=H,i.list[(1+(p<<1))*i.width+s]=P}else{var W,X=P.x,q=P.y;null==cr.zpp_pool?W=new cr:(W=cr.zpp_pool,cr.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=X,W.y=q,P=W}l&&(P.forced=!0),P.y!=r&&P.y!=a||(P.y==r&&0!=(1&g)||P.y==a&&0!=(64&g))&&(g^=128)}var Y=P;null==f.p1?f.p1=Y.prev=Y.next=Y:(Y.prev=f.p1,Y.next=f.p1.next,f.p1.next.prev=Y,f.p1.next=Y),f.p1=Y}}f.p1=f.p1.next,1!=(f.key1=g)&&4!=g&&16!=g&&64!=g&&3!=g&&12!=g&&48!=g&&192!=g&&129!=g&&6!=g&&24!=g&&96!=g&&5!=g&&20!=g&&80!=g&&65!=g&&17!=g&&68!=g||(g=0,f.key1=0,f.p1=null),0==g?f=null:(f.pr=f.p1,f.okeyr=f.okey1,f.keyr=f.key1)}else{var Z=e(.5*(n+o),.5*(r+a))<0;if(10==_)if(Z){var K=187;f.okey1=187;for(var J=0;J<8;){var Q=J++;if(0!=(K&1<<Q)){var $,ee,te,ie,ne=null;if(0==Q)null==cr.zpp_pool?$=new cr:($=cr.zpp_pool,cr.zpp_pool=$.next,$.next=null),$.forced=!1,$.x=n,$.y=r,ne=$,(l||h)&&(ne.forced=!0);else if(2==Q)null==cr.zpp_pool?ee=new cr:(ee=cr.zpp_pool,cr.zpp_pool=ee.next,ee.next=null),ee.forced=!1,ee.x=o,ee.y=r,ne=ee,(u||h)&&(ne.forced=!0);else if(4==Q)null==cr.zpp_pool?te=new cr:(te=cr.zpp_pool,cr.zpp_pool=te.next,te.next=null),te.forced=!1,te.x=o,te.y=a,ne=te,(u||d)&&(ne.forced=!0);else if(6==Q)null==cr.zpp_pool?ie=new cr:(ie=cr.zpp_pool,cr.zpp_pool=ie.next,ie.next=null),ie.forced=!1,ie.x=n,ie.y=a,ne=ie,(l||d)&&(ne.forced=!0);else if(1==Q){if(null==(ne=i.list[(p<<1)*i.width+s])){var re,oe=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?re=new cr:(re=cr.zpp_pool,cr.zpp_pool=re.next,re.next=null),re.forced=!1,re.x=oe,re.y=r,ne=re,i.list[(p<<1)*i.width+s]=ne}else{var ae,se=ne.x,pe=ne.y;null==cr.zpp_pool?ae=new cr:(ae=cr.zpp_pool,cr.zpp_pool=ae.next,ae.next=null),ae.forced=!1,ae.x=se,ae.y=pe,ne=ae}h&&(ne.forced=!0),ne.x!=n&&ne.x!=o||(ne.x==n&&0!=(1&K)||ne.x==o&&0!=(4&K))&&(K^=2)}else if(5==Q){if(null==(ne=i.list[(2+(p<<1))*i.width+s])){var le,he=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?le=new cr:(le=cr.zpp_pool,cr.zpp_pool=le.next,le.next=null),le.forced=!1,le.x=he,le.y=a,ne=le,i.list[(2+(p<<1))*i.width+s]=ne}else{var ue,de=ne.x,ce=ne.y;null==cr.zpp_pool?ue=new cr:(ue=cr.zpp_pool,cr.zpp_pool=ue.next,ue.next=null),ue.forced=!1,ue.x=de,ue.y=ce,ne=ue}d&&(ne.forced=!0),ne.x!=n&&ne.x!=o||(ne.x==n&&0!=(64&K)||ne.x==o&&0!=(16&K))&&(K^=32)}else if(3==Q){if(null==(ne=i.list[(1+(p<<1))*i.width+(s+1)])){var _e,ye=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?_e=new cr:(_e=cr.zpp_pool,cr.zpp_pool=_e.next,_e.next=null),_e.forced=!1,_e.x=o,_e.y=ye,ne=_e,i.list[(1+(p<<1))*i.width+(s+1)]=ne}else{var xe,me=ne.x,fe=ne.y;null==cr.zpp_pool?xe=new cr:(xe=cr.zpp_pool,cr.zpp_pool=xe.next,xe.next=null),xe.forced=!1,xe.x=me,xe.y=fe,ne=xe}u&&(ne.forced=!0),ne.y!=r&&ne.y!=a||(ne.y==r&&0!=(4&K)||ne.y==a&&0!=(16&K))&&(K^=8)}else{if(null==(ne=i.list[(1+(p<<1))*i.width+s])){var ve,ge=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?ve=new cr:(ve=cr.zpp_pool,cr.zpp_pool=ve.next,ve.next=null),ve.forced=!1,ve.x=n,ve.y=ge,ne=ve,i.list[(1+(p<<1))*i.width+s]=ne}else{var ze,be=ne.x,we=ne.y;null==cr.zpp_pool?ze=new cr:(ze=cr.zpp_pool,cr.zpp_pool=ze.next,ze.next=null),ze.forced=!1,ze.x=be,ze.y=we,ne=ze}l&&(ne.forced=!0),ne.y!=r&&ne.y!=a||(ne.y==r&&0!=(1&K)||ne.y==a&&0!=(64&K))&&(K^=128)}var Se=ne;null==f.p1?f.p1=Se.prev=Se.next=Se:(Se.prev=f.p1,Se.next=f.p1.next,f.p1.next.prev=Se,f.p1.next=Se),f.p1=Se}}f.p1=f.p1.next,1!=(f.key1=K)&&4!=K&&16!=K&&64!=K&&3!=K&&12!=K&&48!=K&&192!=K&&129!=K&&6!=K&&24!=K&&96!=K&&5!=K&&20!=K&&80!=K&&65!=K&&17!=K&&68!=K||(K=0,f.key1=0,f.p1=null),0==K?f=null:(f.pr=f.p1,f.okeyr=f.okey1,f.keyr=f.key1)}else{var Ce=131;f.okey1=131;for(var Me=0;Me<8;){var Pe=Me++;if(0!=(Ce&1<<Pe)){var ke,Te,Ge,Oe,Ae=null;if(0==Pe)null==cr.zpp_pool?ke=new cr:(ke=cr.zpp_pool,cr.zpp_pool=ke.next,ke.next=null),ke.forced=!1,ke.x=n,ke.y=r,Ae=ke,(l||h)&&(Ae.forced=!0);else if(2==Pe)null==cr.zpp_pool?Te=new cr:(Te=cr.zpp_pool,cr.zpp_pool=Te.next,Te.next=null),Te.forced=!1,Te.x=o,Te.y=r,Ae=Te,(u||h)&&(Ae.forced=!0);else if(4==Pe)null==cr.zpp_pool?Ge=new cr:(Ge=cr.zpp_pool,cr.zpp_pool=Ge.next,Ge.next=null),Ge.forced=!1,Ge.x=o,Ge.y=a,Ae=Ge,(u||d)&&(Ae.forced=!0);else if(6==Pe)null==cr.zpp_pool?Oe=new cr:(Oe=cr.zpp_pool,cr.zpp_pool=Oe.next,Oe.next=null),Oe.forced=!1,Oe.x=n,Oe.y=a,Ae=Oe,(l||d)&&(Ae.forced=!0);else if(1==Pe){if(null==(Ae=i.list[(p<<1)*i.width+s])){var Ee,Ie=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?Ee=new cr:(Ee=cr.zpp_pool,cr.zpp_pool=Ee.next,Ee.next=null),Ee.forced=!1,Ee.x=Ie,Ee.y=r,Ae=Ee,i.list[(p<<1)*i.width+s]=Ae}else{var Be,Le=Ae.x,De=Ae.y;null==cr.zpp_pool?Be=new cr:(Be=cr.zpp_pool,cr.zpp_pool=Be.next,Be.next=null),Be.forced=!1,Be.x=Le,Be.y=De,Ae=Be}h&&(Ae.forced=!0),Ae.x!=n&&Ae.x!=o||(Ae.x==n&&0!=(1&Ce)||Ae.x==o&&0!=(4&Ce))&&(Ce^=2)}else if(5==Pe){if(null==(Ae=i.list[(2+(p<<1))*i.width+s])){var Re,Fe=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?Re=new cr:(Re=cr.zpp_pool,cr.zpp_pool=Re.next,Re.next=null),Re.forced=!1,Re.x=Fe,Re.y=a,Ae=Re,i.list[(2+(p<<1))*i.width+s]=Ae}else{var je,Ne=Ae.x,Ue=Ae.y;null==cr.zpp_pool?je=new cr:(je=cr.zpp_pool,cr.zpp_pool=je.next,je.next=null),je.forced=!1,je.x=Ne,je.y=Ue,Ae=je}d&&(Ae.forced=!0),Ae.x!=n&&Ae.x!=o||(Ae.x==n&&0!=(64&Ce)||Ae.x==o&&0!=(16&Ce))&&(Ce^=32)}else if(3==Pe){if(null==(Ae=i.list[(1+(p<<1))*i.width+(s+1)])){var He,Ve=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?He=new cr:(He=cr.zpp_pool,cr.zpp_pool=He.next,He.next=null),He.forced=!1,He.x=o,He.y=Ve,Ae=He,i.list[(1+(p<<1))*i.width+(s+1)]=Ae}else{var We,Xe=Ae.x,qe=Ae.y;null==cr.zpp_pool?We=new cr:(We=cr.zpp_pool,cr.zpp_pool=We.next,We.next=null),We.forced=!1,We.x=Xe,We.y=qe,Ae=We}u&&(Ae.forced=!0),Ae.y!=r&&Ae.y!=a||(Ae.y==r&&0!=(4&Ce)||Ae.y==a&&0!=(16&Ce))&&(Ce^=8)}else{if(null==(Ae=i.list[(1+(p<<1))*i.width+s])){var Ye,Ze=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?Ye=new cr:(Ye=cr.zpp_pool,cr.zpp_pool=Ye.next,Ye.next=null),Ye.forced=!1,Ye.x=n,Ye.y=Ze,Ae=Ye,i.list[(1+(p<<1))*i.width+s]=Ae}else{var Ke,Je=Ae.x,Qe=Ae.y;null==cr.zpp_pool?Ke=new cr:(Ke=cr.zpp_pool,cr.zpp_pool=Ke.next,Ke.next=null),Ke.forced=!1,Ke.x=Je,Ke.y=Qe,Ae=Ke}l&&(Ae.forced=!0),Ae.y!=r&&Ae.y!=a||(Ae.y==r&&0!=(1&Ce)||Ae.y==a&&0!=(64&Ce))&&(Ce^=128)}var $e=Ae;null==f.p1?f.p1=$e.prev=$e.next=$e:($e.prev=f.p1,$e.next=f.p1.next,f.p1.next.prev=$e,f.p1.next=$e),f.p1=$e}}if(f.p1=f.p1.next,1!=(f.key1=Ce)&&4!=Ce&&16!=Ce&&64!=Ce&&3!=Ce&&12!=Ce&&48!=Ce&&192!=Ce&&129!=Ce&&6!=Ce&&24!=Ce&&96!=Ce&&5!=Ce&&20!=Ce&&80!=Ce&&65!=Ce&&17!=Ce&&68!=Ce||(Ce=0,f.key1=0,f.p1=null),0!=Ce){var et=56;f.okey2=56;for(var tt=0;tt<8;){var it=tt++;if(0!=(et&1<<it)){var nt,rt,ot,at,st=null;if(0==it)null==cr.zpp_pool?nt=new cr:(nt=cr.zpp_pool,cr.zpp_pool=nt.next,nt.next=null),nt.forced=!1,nt.x=n,nt.y=r,st=nt,(l||h)&&(st.forced=!0);else if(2==it)null==cr.zpp_pool?rt=new cr:(rt=cr.zpp_pool,cr.zpp_pool=rt.next,rt.next=null),rt.forced=!1,rt.x=o,rt.y=r,st=rt,(u||h)&&(st.forced=!0);else if(4==it)null==cr.zpp_pool?ot=new cr:(ot=cr.zpp_pool,cr.zpp_pool=ot.next,ot.next=null),ot.forced=!1,ot.x=o,ot.y=a,st=ot,(u||d)&&(st.forced=!0);else if(6==it)null==cr.zpp_pool?at=new cr:(at=cr.zpp_pool,cr.zpp_pool=at.next,at.next=null),at.forced=!1,at.x=n,at.y=a,st=at,(l||d)&&(st.forced=!0);else if(1==it){if(null==(st=i.list[(p<<1)*i.width+s])){var pt,lt=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?pt=new cr:(pt=cr.zpp_pool,cr.zpp_pool=pt.next,pt.next=null),pt.forced=!1,pt.x=lt,pt.y=r,st=pt,i.list[(p<<1)*i.width+s]=st}else{var ht,ut=st.x,dt=st.y;null==cr.zpp_pool?ht=new cr:(ht=cr.zpp_pool,cr.zpp_pool=ht.next,ht.next=null),ht.forced=!1,ht.x=ut,ht.y=dt,st=ht}h&&(st.forced=!0),st.x!=n&&st.x!=o||(st.x==n&&0!=(1&et)||st.x==o&&0!=(4&et))&&(et^=2)}else if(5==it){if(null==(st=i.list[(2+(p<<1))*i.width+s])){var ct,_t=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?ct=new cr:(ct=cr.zpp_pool,cr.zpp_pool=ct.next,ct.next=null),ct.forced=!1,ct.x=_t,ct.y=a,st=ct,i.list[(2+(p<<1))*i.width+s]=st}else{var yt,xt=st.x,mt=st.y;null==cr.zpp_pool?yt=new cr:(yt=cr.zpp_pool,cr.zpp_pool=yt.next,yt.next=null),yt.forced=!1,yt.x=xt,yt.y=mt,st=yt}d&&(st.forced=!0),st.x!=n&&st.x!=o||(st.x==n&&0!=(64&et)||st.x==o&&0!=(16&et))&&(et^=32)}else if(3==it){if(null==(st=i.list[(1+(p<<1))*i.width+(s+1)])){var ft,vt=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?ft=new cr:(ft=cr.zpp_pool,cr.zpp_pool=ft.next,ft.next=null),ft.forced=!1,ft.x=o,ft.y=vt,st=ft,i.list[(1+(p<<1))*i.width+(s+1)]=st}else{var gt,zt=st.x,bt=st.y;null==cr.zpp_pool?gt=new cr:(gt=cr.zpp_pool,cr.zpp_pool=gt.next,gt.next=null),gt.forced=!1,gt.x=zt,gt.y=bt,st=gt}u&&(st.forced=!0),st.y!=r&&st.y!=a||(st.y==r&&0!=(4&et)||st.y==a&&0!=(16&et))&&(et^=8)}else{if(null==(st=i.list[(1+(p<<1))*i.width+s])){var wt,St=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?wt=new cr:(wt=cr.zpp_pool,cr.zpp_pool=wt.next,wt.next=null),wt.forced=!1,wt.x=n,wt.y=St,st=wt,i.list[(1+(p<<1))*i.width+s]=st}else{var Ct,Mt=st.x,Pt=st.y;null==cr.zpp_pool?Ct=new cr:(Ct=cr.zpp_pool,cr.zpp_pool=Ct.next,Ct.next=null),Ct.forced=!1,Ct.x=Mt,Ct.y=Pt,st=Ct}l&&(st.forced=!0),st.y!=r&&st.y!=a||(st.y==r&&0!=(1&et)||st.y==a&&0!=(64&et))&&(et^=128)}var kt=st;null==f.p2?f.p2=kt.prev=kt.next=kt:(kt.prev=f.p2,kt.next=f.p2.next,f.p2.next.prev=kt,f.p2.next=kt),f.p2=kt}}f.p2=f.p2.next,1!=(f.key2=et)&&4!=et&&16!=et&&64!=et&&3!=et&&12!=et&&48!=et&&192!=et&&129!=et&&6!=et&&24!=et&&96!=et&&5!=et&&20!=et&&80!=et&&65!=et&&17!=et&&68!=et||(et=0,f.key2=0,f.p2=null),0==et?(f.pr=f.p1,f.okeyr=f.okey1,f.keyr=f.key1):(f.pr=f.p2,f.okeyr=f.okey2,f.keyr=f.key2)}else{var Tt=56;f.okey1=56;for(var Gt=0;Gt<8;){var Ot=Gt++;if(0!=(Tt&1<<Ot)){var At,Et,It,Bt,Lt=null;if(0==Ot)null==cr.zpp_pool?At=new cr:(At=cr.zpp_pool,cr.zpp_pool=At.next,At.next=null),At.forced=!1,At.x=n,At.y=r,Lt=At,(l||h)&&(Lt.forced=!0);else if(2==Ot)null==cr.zpp_pool?Et=new cr:(Et=cr.zpp_pool,cr.zpp_pool=Et.next,Et.next=null),Et.forced=!1,Et.x=o,Et.y=r,Lt=Et,(u||h)&&(Lt.forced=!0);else if(4==Ot)null==cr.zpp_pool?It=new cr:(It=cr.zpp_pool,cr.zpp_pool=It.next,It.next=null),It.forced=!1,It.x=o,It.y=a,Lt=It,(u||d)&&(Lt.forced=!0);else if(6==Ot)null==cr.zpp_pool?Bt=new cr:(Bt=cr.zpp_pool,cr.zpp_pool=Bt.next,Bt.next=null),Bt.forced=!1,Bt.x=n,Bt.y=a,Lt=Bt,(l||d)&&(Lt.forced=!0);else if(1==Ot){if(null==(Lt=i.list[(p<<1)*i.width+s])){var Dt,Rt=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?Dt=new cr:(Dt=cr.zpp_pool,cr.zpp_pool=Dt.next,Dt.next=null),Dt.forced=!1,Dt.x=Rt,Dt.y=r,Lt=Dt,i.list[(p<<1)*i.width+s]=Lt}else{var Ft,jt=Lt.x,Nt=Lt.y;null==cr.zpp_pool?Ft=new cr:(Ft=cr.zpp_pool,cr.zpp_pool=Ft.next,Ft.next=null),Ft.forced=!1,Ft.x=jt,Ft.y=Nt,Lt=Ft}h&&(Lt.forced=!0),Lt.x!=n&&Lt.x!=o||(Lt.x==n&&0!=(1&Tt)||Lt.x==o&&0!=(4&Tt))&&(Tt^=2)}else if(5==Ot){if(null==(Lt=i.list[(2+(p<<1))*i.width+s])){var Ut,Ht=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?Ut=new cr:(Ut=cr.zpp_pool,cr.zpp_pool=Ut.next,Ut.next=null),Ut.forced=!1,Ut.x=Ht,Ut.y=a,Lt=Ut,i.list[(2+(p<<1))*i.width+s]=Lt}else{var Vt,Wt=Lt.x,Xt=Lt.y;null==cr.zpp_pool?Vt=new cr:(Vt=cr.zpp_pool,cr.zpp_pool=Vt.next,Vt.next=null),Vt.forced=!1,Vt.x=Wt,Vt.y=Xt,Lt=Vt}d&&(Lt.forced=!0),Lt.x!=n&&Lt.x!=o||(Lt.x==n&&0!=(64&Tt)||Lt.x==o&&0!=(16&Tt))&&(Tt^=32)}else if(3==Ot){if(null==(Lt=i.list[(1+(p<<1))*i.width+(s+1)])){var qt,Yt=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?qt=new cr:(qt=cr.zpp_pool,cr.zpp_pool=qt.next,qt.next=null),qt.forced=!1,qt.x=o,qt.y=Yt,Lt=qt,i.list[(1+(p<<1))*i.width+(s+1)]=Lt}else{var Zt,Kt=Lt.x,Jt=Lt.y;null==cr.zpp_pool?Zt=new cr:(Zt=cr.zpp_pool,cr.zpp_pool=Zt.next,Zt.next=null),Zt.forced=!1,Zt.x=Kt,Zt.y=Jt,Lt=Zt}u&&(Lt.forced=!0),Lt.y!=r&&Lt.y!=a||(Lt.y==r&&0!=(4&Tt)||Lt.y==a&&0!=(16&Tt))&&(Tt^=8)}else{if(null==(Lt=i.list[(1+(p<<1))*i.width+s])){var Qt,$t=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?Qt=new cr:(Qt=cr.zpp_pool,cr.zpp_pool=Qt.next,Qt.next=null),Qt.forced=!1,Qt.x=n,Qt.y=$t,Lt=Qt,i.list[(1+(p<<1))*i.width+s]=Lt}else{var ei,ti=Lt.x,ii=Lt.y;null==cr.zpp_pool?ei=new cr:(ei=cr.zpp_pool,cr.zpp_pool=ei.next,ei.next=null),ei.forced=!1,ei.x=ti,ei.y=ii,Lt=ei}l&&(Lt.forced=!0),Lt.y!=r&&Lt.y!=a||(Lt.y==r&&0!=(1&Tt)||Lt.y==a&&0!=(64&Tt))&&(Tt^=128)}var ni=Lt;null==f.p1?f.p1=ni.prev=ni.next=ni:(ni.prev=f.p1,ni.next=f.p1.next,f.p1.next.prev=ni,f.p1.next=ni),f.p1=ni}}f.p1=f.p1.next,1!=(f.key1=Tt)&&4!=Tt&&16!=Tt&&64!=Tt&&3!=Tt&&12!=Tt&&48!=Tt&&192!=Tt&&129!=Tt&&6!=Tt&&24!=Tt&&96!=Tt&&5!=Tt&&20!=Tt&&80!=Tt&&65!=Tt&&17!=Tt&&68!=Tt||(Tt=0,f.key1=0,f.p1=null),0==Tt?f=null:(f.pr=f.p1,f.okeyr=f.okey1,f.keyr=f.key1)}}else if(Z){var ri=238;f.okey1=238;for(var oi=0;oi<8;){var ai=oi++;if(0!=(ri&1<<ai)){var si,pi,li,hi,ui=null;if(0==ai)null==cr.zpp_pool?si=new cr:(si=cr.zpp_pool,cr.zpp_pool=si.next,si.next=null),si.forced=!1,si.x=n,si.y=r,ui=si,(l||h)&&(ui.forced=!0);else if(2==ai)null==cr.zpp_pool?pi=new cr:(pi=cr.zpp_pool,cr.zpp_pool=pi.next,pi.next=null),pi.forced=!1,pi.x=o,pi.y=r,ui=pi,(u||h)&&(ui.forced=!0);else if(4==ai)null==cr.zpp_pool?li=new cr:(li=cr.zpp_pool,cr.zpp_pool=li.next,li.next=null),li.forced=!1,li.x=o,li.y=a,ui=li,(u||d)&&(ui.forced=!0);else if(6==ai)null==cr.zpp_pool?hi=new cr:(hi=cr.zpp_pool,cr.zpp_pool=hi.next,hi.next=null),hi.forced=!1,hi.x=n,hi.y=a,ui=hi,(l||d)&&(ui.forced=!0);else if(1==ai){if(null==(ui=i.list[(p<<1)*i.width+s])){var di,ci=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?di=new cr:(di=cr.zpp_pool,cr.zpp_pool=di.next,di.next=null),di.forced=!1,di.x=ci,di.y=r,ui=di,i.list[(p<<1)*i.width+s]=ui}else{var _i,yi=ui.x,xi=ui.y;null==cr.zpp_pool?_i=new cr:(_i=cr.zpp_pool,cr.zpp_pool=_i.next,_i.next=null),_i.forced=!1,_i.x=yi,_i.y=xi,ui=_i}h&&(ui.forced=!0),ui.x!=n&&ui.x!=o||(ui.x==n&&0!=(1&ri)||ui.x==o&&0!=(4&ri))&&(ri^=2)}else if(5==ai){if(null==(ui=i.list[(2+(p<<1))*i.width+s])){var mi,fi=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?mi=new cr:(mi=cr.zpp_pool,cr.zpp_pool=mi.next,mi.next=null),mi.forced=!1,mi.x=fi,mi.y=a,ui=mi,i.list[(2+(p<<1))*i.width+s]=ui}else{var vi,gi=ui.x,zi=ui.y;null==cr.zpp_pool?vi=new cr:(vi=cr.zpp_pool,cr.zpp_pool=vi.next,vi.next=null),vi.forced=!1,vi.x=gi,vi.y=zi,ui=vi}d&&(ui.forced=!0),ui.x!=n&&ui.x!=o||(ui.x==n&&0!=(64&ri)||ui.x==o&&0!=(16&ri))&&(ri^=32)}else if(3==ai){if(null==(ui=i.list[(1+(p<<1))*i.width+(s+1)])){var bi,wi=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?bi=new cr:(bi=cr.zpp_pool,cr.zpp_pool=bi.next,bi.next=null),bi.forced=!1,bi.x=o,bi.y=wi,ui=bi,i.list[(1+(p<<1))*i.width+(s+1)]=ui}else{var Si,Ci=ui.x,Mi=ui.y;null==cr.zpp_pool?Si=new cr:(Si=cr.zpp_pool,cr.zpp_pool=Si.next,Si.next=null),Si.forced=!1,Si.x=Ci,Si.y=Mi,ui=Si}u&&(ui.forced=!0),ui.y!=r&&ui.y!=a||(ui.y==r&&0!=(4&ri)||ui.y==a&&0!=(16&ri))&&(ri^=8)}else{if(null==(ui=i.list[(1+(p<<1))*i.width+s])){var Pi,ki=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?Pi=new cr:(Pi=cr.zpp_pool,cr.zpp_pool=Pi.next,Pi.next=null),Pi.forced=!1,Pi.x=n,Pi.y=ki,ui=Pi,i.list[(1+(p<<1))*i.width+s]=ui}else{var Ti,Gi=ui.x,Oi=ui.y;null==cr.zpp_pool?Ti=new cr:(Ti=cr.zpp_pool,cr.zpp_pool=Ti.next,Ti.next=null),Ti.forced=!1,Ti.x=Gi,Ti.y=Oi,ui=Ti}l&&(ui.forced=!0),ui.y!=r&&ui.y!=a||(ui.y==r&&0!=(1&ri)||ui.y==a&&0!=(64&ri))&&(ri^=128)}var Ai=ui;null==f.p1?f.p1=Ai.prev=Ai.next=Ai:(Ai.prev=f.p1,Ai.next=f.p1.next,f.p1.next.prev=Ai,f.p1.next=Ai),f.p1=Ai}}f.p1=f.p1.next,1!=(f.key1=ri)&&4!=ri&&16!=ri&&64!=ri&&3!=ri&&12!=ri&&48!=ri&&192!=ri&&129!=ri&&6!=ri&&24!=ri&&96!=ri&&5!=ri&&20!=ri&&80!=ri&&65!=ri&&17!=ri&&68!=ri||(ri=0,f.key1=0,f.p1=null),0==ri?f=null:(f.pr=f.p1,f.okeyr=f.okey1,f.keyr=f.key1)}else{var Ei=224;f.okey1=224;for(var Ii=0;Ii<8;){var Bi=Ii++;if(0!=(Ei&1<<Bi)){var Li,Di,Ri,Fi,ji=null;if(0==Bi)null==cr.zpp_pool?Li=new cr:(Li=cr.zpp_pool,cr.zpp_pool=Li.next,Li.next=null),Li.forced=!1,Li.x=n,Li.y=r,ji=Li,(l||h)&&(ji.forced=!0);else if(2==Bi)null==cr.zpp_pool?Di=new cr:(Di=cr.zpp_pool,cr.zpp_pool=Di.next,Di.next=null),Di.forced=!1,Di.x=o,Di.y=r,ji=Di,(u||h)&&(ji.forced=!0);else if(4==Bi)null==cr.zpp_pool?Ri=new cr:(Ri=cr.zpp_pool,cr.zpp_pool=Ri.next,Ri.next=null),Ri.forced=!1,Ri.x=o,Ri.y=a,ji=Ri,(u||d)&&(ji.forced=!0);else if(6==Bi)null==cr.zpp_pool?Fi=new cr:(Fi=cr.zpp_pool,cr.zpp_pool=Fi.next,Fi.next=null),Fi.forced=!1,Fi.x=n,Fi.y=a,ji=Fi,(l||d)&&(ji.forced=!0);else if(1==Bi){if(null==(ji=i.list[(p<<1)*i.width+s])){var Ni,Ui=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?Ni=new cr:(Ni=cr.zpp_pool,cr.zpp_pool=Ni.next,Ni.next=null),Ni.forced=!1,Ni.x=Ui,Ni.y=r,ji=Ni,i.list[(p<<1)*i.width+s]=ji}else{var Hi,Vi=ji.x,Wi=ji.y;null==cr.zpp_pool?Hi=new cr:(Hi=cr.zpp_pool,cr.zpp_pool=Hi.next,Hi.next=null),Hi.forced=!1,Hi.x=Vi,Hi.y=Wi,ji=Hi}h&&(ji.forced=!0),ji.x!=n&&ji.x!=o||(ji.x==n&&0!=(1&Ei)||ji.x==o&&0!=(4&Ei))&&(Ei^=2)}else if(5==Bi){if(null==(ji=i.list[(2+(p<<1))*i.width+s])){var Xi,qi=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?Xi=new cr:(Xi=cr.zpp_pool,cr.zpp_pool=Xi.next,Xi.next=null),Xi.forced=!1,Xi.x=qi,Xi.y=a,ji=Xi,i.list[(2+(p<<1))*i.width+s]=ji}else{var Yi,Zi=ji.x,Ki=ji.y;null==cr.zpp_pool?Yi=new cr:(Yi=cr.zpp_pool,cr.zpp_pool=Yi.next,Yi.next=null),Yi.forced=!1,Yi.x=Zi,Yi.y=Ki,ji=Yi}d&&(ji.forced=!0),ji.x!=n&&ji.x!=o||(ji.x==n&&0!=(64&Ei)||ji.x==o&&0!=(16&Ei))&&(Ei^=32)}else if(3==Bi){if(null==(ji=i.list[(1+(p<<1))*i.width+(s+1)])){var Ji,Qi=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?Ji=new cr:(Ji=cr.zpp_pool,cr.zpp_pool=Ji.next,Ji.next=null),Ji.forced=!1,Ji.x=o,Ji.y=Qi,ji=Ji,i.list[(1+(p<<1))*i.width+(s+1)]=ji}else{var $i,en=ji.x,tn=ji.y;null==cr.zpp_pool?$i=new cr:($i=cr.zpp_pool,cr.zpp_pool=$i.next,$i.next=null),$i.forced=!1,$i.x=en,$i.y=tn,ji=$i}u&&(ji.forced=!0),ji.y!=r&&ji.y!=a||(ji.y==r&&0!=(4&Ei)||ji.y==a&&0!=(16&Ei))&&(Ei^=8)}else{if(null==(ji=i.list[(1+(p<<1))*i.width+s])){var nn,rn=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?nn=new cr:(nn=cr.zpp_pool,cr.zpp_pool=nn.next,nn.next=null),nn.forced=!1,nn.x=n,nn.y=rn,ji=nn,i.list[(1+(p<<1))*i.width+s]=ji}else{var on,an=ji.x,sn=ji.y;null==cr.zpp_pool?on=new cr:(on=cr.zpp_pool,cr.zpp_pool=on.next,on.next=null),on.forced=!1,on.x=an,on.y=sn,ji=on}l&&(ji.forced=!0),ji.y!=r&&ji.y!=a||(ji.y==r&&0!=(1&Ei)||ji.y==a&&0!=(64&Ei))&&(Ei^=128)}var pn=ji;null==f.p1?f.p1=pn.prev=pn.next=pn:(pn.prev=f.p1,pn.next=f.p1.next,f.p1.next.prev=pn,f.p1.next=pn),f.p1=pn}}if(f.p1=f.p1.next,1!=(f.key1=Ei)&&4!=Ei&&16!=Ei&&64!=Ei&&3!=Ei&&12!=Ei&&48!=Ei&&192!=Ei&&129!=Ei&&6!=Ei&&24!=Ei&&96!=Ei&&5!=Ei&&20!=Ei&&80!=Ei&&65!=Ei&&17!=Ei&&68!=Ei||(Ei=0,f.key1=0,f.p1=null),0!=Ei){var ln=14;f.okey2=14;for(var hn=0;hn<8;){var un=hn++;if(0!=(ln&1<<un)){var dn,cn,_n,yn,xn=null;if(0==un)null==cr.zpp_pool?dn=new cr:(dn=cr.zpp_pool,cr.zpp_pool=dn.next,dn.next=null),dn.forced=!1,dn.x=n,dn.y=r,xn=dn,(l||h)&&(xn.forced=!0);else if(2==un)null==cr.zpp_pool?cn=new cr:(cn=cr.zpp_pool,cr.zpp_pool=cn.next,cn.next=null),cn.forced=!1,cn.x=o,cn.y=r,xn=cn,(u||h)&&(xn.forced=!0);else if(4==un)null==cr.zpp_pool?_n=new cr:(_n=cr.zpp_pool,cr.zpp_pool=_n.next,_n.next=null),_n.forced=!1,_n.x=o,_n.y=a,xn=_n,(u||d)&&(xn.forced=!0);else if(6==un)null==cr.zpp_pool?yn=new cr:(yn=cr.zpp_pool,cr.zpp_pool=yn.next,yn.next=null),yn.forced=!1,yn.x=n,yn.y=a,xn=yn,(l||d)&&(xn.forced=!0);else if(1==un){if(null==(xn=i.list[(p<<1)*i.width+s])){var mn,fn=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?mn=new cr:(mn=cr.zpp_pool,cr.zpp_pool=mn.next,mn.next=null),mn.forced=!1,mn.x=fn,mn.y=r,xn=mn,i.list[(p<<1)*i.width+s]=xn}else{var vn,gn=xn.x,zn=xn.y;null==cr.zpp_pool?vn=new cr:(vn=cr.zpp_pool,cr.zpp_pool=vn.next,vn.next=null),vn.forced=!1,vn.x=gn,vn.y=zn,xn=vn}h&&(xn.forced=!0),xn.x!=n&&xn.x!=o||(xn.x==n&&0!=(1&ln)||xn.x==o&&0!=(4&ln))&&(ln^=2)}else if(5==un){if(null==(xn=i.list[(2+(p<<1))*i.width+s])){var bn,wn=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?bn=new cr:(bn=cr.zpp_pool,cr.zpp_pool=bn.next,bn.next=null),bn.forced=!1,bn.x=wn,bn.y=a,xn=bn,i.list[(2+(p<<1))*i.width+s]=xn}else{var Sn,Cn=xn.x,Mn=xn.y;null==cr.zpp_pool?Sn=new cr:(Sn=cr.zpp_pool,cr.zpp_pool=Sn.next,Sn.next=null),Sn.forced=!1,Sn.x=Cn,Sn.y=Mn,xn=Sn}d&&(xn.forced=!0),xn.x!=n&&xn.x!=o||(xn.x==n&&0!=(64&ln)||xn.x==o&&0!=(16&ln))&&(ln^=32)}else if(3==un){if(null==(xn=i.list[(1+(p<<1))*i.width+(s+1)])){var Pn,kn=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?Pn=new cr:(Pn=cr.zpp_pool,cr.zpp_pool=Pn.next,Pn.next=null),Pn.forced=!1,Pn.x=o,Pn.y=kn,xn=Pn,i.list[(1+(p<<1))*i.width+(s+1)]=xn}else{var Tn,Gn=xn.x,On=xn.y;null==cr.zpp_pool?Tn=new cr:(Tn=cr.zpp_pool,cr.zpp_pool=Tn.next,Tn.next=null),Tn.forced=!1,Tn.x=Gn,Tn.y=On,xn=Tn}u&&(xn.forced=!0),xn.y!=r&&xn.y!=a||(xn.y==r&&0!=(4&ln)||xn.y==a&&0!=(16&ln))&&(ln^=8)}else{if(null==(xn=i.list[(1+(p<<1))*i.width+s])){var An,En=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?An=new cr:(An=cr.zpp_pool,cr.zpp_pool=An.next,An.next=null),An.forced=!1,An.x=n,An.y=En,xn=An,i.list[(1+(p<<1))*i.width+s]=xn}else{var In,Bn=xn.x,Ln=xn.y;null==cr.zpp_pool?In=new cr:(In=cr.zpp_pool,cr.zpp_pool=In.next,In.next=null),In.forced=!1,In.x=Bn,In.y=Ln,xn=In}l&&(xn.forced=!0),xn.y!=r&&xn.y!=a||(xn.y==r&&0!=(1&ln)||xn.y==a&&0!=(64&ln))&&(ln^=128)}var Dn=xn;null==f.p2?f.p2=Dn.prev=Dn.next=Dn:(Dn.prev=f.p2,Dn.next=f.p2.next,f.p2.next.prev=Dn,f.p2.next=Dn),f.p2=Dn}}f.p2=f.p2.next,1!=(f.key2=ln)&&4!=ln&&16!=ln&&64!=ln&&3!=ln&&12!=ln&&48!=ln&&192!=ln&&129!=ln&&6!=ln&&24!=ln&&96!=ln&&5!=ln&&20!=ln&&80!=ln&&65!=ln&&17!=ln&&68!=ln||(ln=0,f.key2=0,f.p2=null),0==ln?(f.pr=f.p1,f.okeyr=f.okey1,f.keyr=f.key1):(f.pr=f.p2,f.okeyr=f.okey2,f.keyr=f.key2)}else{var Rn=14;f.okey1=14;for(var Fn=0;Fn<8;){var jn=Fn++;if(0!=(Rn&1<<jn)){var Nn,Un,Hn,Vn,Wn=null;if(0==jn)null==cr.zpp_pool?Nn=new cr:(Nn=cr.zpp_pool,cr.zpp_pool=Nn.next,Nn.next=null),Nn.forced=!1,Nn.x=n,Nn.y=r,Wn=Nn,(l||h)&&(Wn.forced=!0);else if(2==jn)null==cr.zpp_pool?Un=new cr:(Un=cr.zpp_pool,cr.zpp_pool=Un.next,Un.next=null),Un.forced=!1,Un.x=o,Un.y=r,Wn=Un,(u||h)&&(Wn.forced=!0);else if(4==jn)null==cr.zpp_pool?Hn=new cr:(Hn=cr.zpp_pool,cr.zpp_pool=Hn.next,Hn.next=null),Hn.forced=!1,Hn.x=o,Hn.y=a,Wn=Hn,(u||d)&&(Wn.forced=!0);else if(6==jn)null==cr.zpp_pool?Vn=new cr:(Vn=cr.zpp_pool,cr.zpp_pool=Vn.next,Vn.next=null),Vn.forced=!1,Vn.x=n,Vn.y=a,Wn=Vn,(l||d)&&(Wn.forced=!0);else if(1==jn){if(null==(Wn=i.list[(p<<1)*i.width+s])){var Xn,qn=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?Xn=new cr:(Xn=cr.zpp_pool,cr.zpp_pool=Xn.next,Xn.next=null),Xn.forced=!1,Xn.x=qn,Xn.y=r,Wn=Xn,i.list[(p<<1)*i.width+s]=Wn}else{var Yn,Zn=Wn.x,Kn=Wn.y;null==cr.zpp_pool?Yn=new cr:(Yn=cr.zpp_pool,cr.zpp_pool=Yn.next,Yn.next=null),Yn.forced=!1,Yn.x=Zn,Yn.y=Kn,Wn=Yn}h&&(Wn.forced=!0),Wn.x!=n&&Wn.x!=o||(Wn.x==n&&0!=(1&Rn)||Wn.x==o&&0!=(4&Rn))&&(Rn^=2)}else if(5==jn){if(null==(Wn=i.list[(2+(p<<1))*i.width+s])){var Jn,Qn=this.xlerp(n,o,a,v,m,e,c);null==cr.zpp_pool?Jn=new cr:(Jn=cr.zpp_pool,cr.zpp_pool=Jn.next,Jn.next=null),Jn.forced=!1,Jn.x=Qn,Jn.y=a,Wn=Jn,i.list[(2+(p<<1))*i.width+s]=Wn}else{var $n,er=Wn.x,tr=Wn.y;null==cr.zpp_pool?$n=new cr:($n=cr.zpp_pool,cr.zpp_pool=$n.next,$n.next=null),$n.forced=!1,$n.x=er,$n.y=tr,Wn=$n}d&&(Wn.forced=!0),Wn.x!=n&&Wn.x!=o||(Wn.x==n&&0!=(64&Rn)||Wn.x==o&&0!=(16&Rn))&&(Rn^=32)}else if(3==jn){if(null==(Wn=i.list[(1+(p<<1))*i.width+(s+1)])){var ir,nr=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?ir=new cr:(ir=cr.zpp_pool,cr.zpp_pool=ir.next,ir.next=null),ir.forced=!1,ir.x=o,ir.y=nr,Wn=ir,i.list[(1+(p<<1))*i.width+(s+1)]=Wn}else{var rr,or=Wn.x,ar=Wn.y;null==cr.zpp_pool?rr=new cr:(rr=cr.zpp_pool,cr.zpp_pool=rr.next,rr.next=null),rr.forced=!1,rr.x=or,rr.y=ar,Wn=rr}u&&(Wn.forced=!0),Wn.y!=r&&Wn.y!=a||(Wn.y==r&&0!=(4&Rn)||Wn.y==a&&0!=(16&Rn))&&(Rn^=8)}else{if(null==(Wn=i.list[(1+(p<<1))*i.width+s])){var sr,pr=this.ylerp(r,a,n,y,v,e,c);null==cr.zpp_pool?sr=new cr:(sr=cr.zpp_pool,cr.zpp_pool=sr.next,sr.next=null),sr.forced=!1,sr.x=n,sr.y=pr,Wn=sr,i.list[(1+(p<<1))*i.width+s]=Wn}else{var lr,hr=Wn.x,ur=Wn.y;null==cr.zpp_pool?lr=new cr:(lr=cr.zpp_pool,cr.zpp_pool=lr.next,lr.next=null),lr.forced=!1,lr.x=hr,lr.y=ur,Wn=lr}l&&(Wn.forced=!0),Wn.y!=r&&Wn.y!=a||(Wn.y==r&&0!=(1&Rn)||Wn.y==a&&0!=(64&Rn))&&(Rn^=128)}var dr=Wn;null==f.p1?f.p1=dr.prev=dr.next=dr:(dr.prev=f.p1,dr.next=f.p1.next,f.p1.next.prev=dr,f.p1.next=dr),f.p1=dr}}f.p1=f.p1.next,1!=(f.key1=Rn)&&4!=Rn&&16!=Rn&&64!=Rn&&3!=Rn&&12!=Rn&&48!=Rn&&192!=Rn&&129!=Rn&&6!=Rn&&24!=Rn&&96!=Rn&&5!=Rn&&20!=Rn&&80!=Rn&&65!=Rn&&17!=Rn&&68!=Rn||(Rn=0,f.key1=0,f.p1=null),0==Rn?f=null:(f.pr=f.p1,f.okeyr=f.okey1,f.keyr=f.key1)}}}return f},yr.prototype.lerp=function(e,t,i,n){if(0==i)return e;if(0==n)return t;var r=i-n,o=r*r<Qs.epsilon*Qs.epsilon?.5:i/r;return o<0?o=0:1<o&&(o=1),e+o*(t-e)},yr.prototype.xlerp=function(e,t,i,n,r,o,a){var s;if(0==n)s=e;else if(0==r)s=t;else{var p=n-r,l=p*p<Qs.epsilon*Qs.epsilon?.5:n/p;l<0?l=0:1<l&&(l=1),s=e+l*(t-e)}for(;0!=a--&&e<s&&s<t;){var h=o(s,i);if(0==h)break;if(n*h<0?(t=s,r=h):(e=s,n=h),0==n)s=e;else if(0==r)s=t;else{var u=n-r,d=u*u<Qs.epsilon*Qs.epsilon?.5:n/u;d<0?d=0:1<d&&(d=1),s=e+d*(t-e)}}return s},yr.prototype.ylerp=function(e,t,i,n,r,o,a){var s;if(0==n)s=e;else if(0==r)s=t;else{var p=n-r,l=p*p<Qs.epsilon*Qs.epsilon?.5:n/p;l<0?l=0:1<l&&(l=1),s=e+l*(t-e)}for(;0!=a--&&e<s&&s<t;){var h=o(i,s);if(0==h)break;if(n*h<0?(t=s,r=h):(e=s,n=h),0==n)s=e;else if(0==r)s=t;else{var u=n-r,d=u*u<Qs.epsilon*Qs.epsilon?.5:n/u;d<0?d=0:1<d&&(d=1),s=e+d*(t-e)}}return s},yr.prototype.__class__=yr;var Pt=zpp_nape.geom.ZPP_Mat23=function(){this.next=null,this._invalidate=null,this.ty=0,this.tx=0,this.d=0,this.c=0,this.b=0,this.a=0,this.outer=null};Pt.__name__=["zpp_nape","geom","ZPP_Mat23"],Pt.get=function(){var e;return null==Pt.zpp_pool?e=new Pt:(e=Pt.zpp_pool,Pt.zpp_pool=e.next,e.next=null),e},Pt.identity=function(){var e=Pt.get();return e.setas(1,0,0,1,0,0),e},Pt.prototype.outer=null,Pt.prototype.wrapper=function(){if(null==this.outer){this.outer=new ne;var e=this.outer.zpp_inner;e.next=Pt.zpp_pool,Pt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Pt.prototype.a=null,Pt.prototype.b=null,Pt.prototype.c=null,Pt.prototype.d=null,Pt.prototype.tx=null,Pt.prototype.ty=null,Pt.prototype._invalidate=null,Pt.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate()},Pt.prototype.set=function(e){this.setas(e.a,e.b,e.c,e.d,e.tx,e.ty)},Pt.prototype.setas=function(e,t,i,n,r,o){this.tx=r,this.ty=o,this.a=e,this.b=t,this.c=i,this.d=n},Pt.prototype.next=null,Pt.prototype.free=function(){},Pt.prototype.alloc=function(){},Pt.prototype.__class__=Pt;var kt=zpp_nape.geom.ZPP_MatMN=function(e,t){this.x=null,this.n=0,this.m=0,this.outer=null,this.m=e,this.n=t,this.x=[];for(var i=0,n=e*t;i<n;)++i,this.x.push(0)};kt.__name__=["zpp_nape","geom","ZPP_MatMN"],kt.prototype.outer=null,kt.prototype.m=null,kt.prototype.n=null,kt.prototype.x=null,kt.prototype.__class__=kt;var Tt=zpp_nape.geom.ZPP_Monotone=function(){};Tt.__name__=["zpp_nape","geom","ZPP_Monotone"],Tt.bisector=function(e){var t,i,n=e.prev,r=e.next;t=e.x-n.x,i=e.y-n.y;var o,a,s;o=r.x-e.x,a=r.y-e.y,null==ep.zpp_pool?s=new ep:(s=ep.zpp_pool,ep.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=-i-a,s.y=t+o;var p=s,l=1/Math.sqrt(p.x*p.x+p.y*p.y);return p.x*=l,p.y*=l,a*t-o*i<0&&(p.x=-p.x,p.y=-p.y),p},Tt.below=function(e,t){if(e.y<t.y)return!0;if(e.y>t.y)return!1;if(e.x<t.x)return!0;if(e.x>t.x)return!1;var i=Tt.bisector(e),n=Tt.bisector(t);i.x+=e.x,i.y+=e.y,n.x+=t.x,n.y+=t.y;var r=i.x<n.x||i.x==n.x&&i.y<n.y;return null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n,r},Tt.above=function(e,t){return Tt.below(t,e)},Tt.left_vertex=function(e){var t=e.prev;return t.y>e.y||t.y==e.y&&e.next.y<e.y},Tt.isMonotone=function(e){var t=e,i=e,n=e.next;if(null!=n)for(var r=n;;){var o=r;if(o.y<t.y&&(t=o),o.y>i.y&&(i=o),(r=r.next)==e)break}var a=!0,s=t;if(i!=t.next){var p=t.next,l=i;if(null!=p)for(var h=p;;){var u=h;if(u.y<s.y){a=!1;break}if(s=u,(h=h.next)==l)break}}if(!a)return!1;if(i!=(s=t).prev){var d=t.prev,c=i;if(null!=d)for(var _=d;;){var y=_;if(y.y<s.y){a=!1;break}if(s=y,(_=_.prev)==c)break}}return a},Tt.sharedPPoly=null,Tt.getShared=function(){return null==Tt.sharedPPoly&&(Tt.sharedPPoly=new Ot),Tt.sharedPPoly},Tt.decompose=function(e,t){if(null==t?t=new Ot(e):t.init(e),null==t.vertices)return t;null==Tt.queue&&(Tt.queue=new zi);var i=t.vertices,n=t.vertices;if(null!=i)for(var r=i;;){var o=r;Tt.queue.add(o);var a,s;a=o.next.x-o.x,s=o.next.y-o.y;var p;p=o.prev.x-o.x;var l=0<(o.prev.y-o.y)*a-p*s;if(o.type=Tt.below(o.prev,o)?Tt.below(o.next,o)?l?0:3:4:Tt.below(o,o.next)?l?1:2:4,(r=r.next)==n)break}var h=Tt.queue;if(null!=h.head&&null!=h.head.next){for(var u,d,c,_=h.head,y=null,x=null,m=null,f=null,v=1;;){for(u=0,x=_,y=_=null;null!=x;){for(++u,m=x,d=0,c=v;null!=m&&d<v;)++d,m=m.next;for(;0<d||0<c&&null!=m;)0==d?(m=(f=m).next,--c):0==c||null==m?(x=(f=x).next,--d):Tt.above(x.elt,m.elt)?(x=(f=x).next,--d):(m=(f=m).next,--c),null!=y?y.next=f:_=f,y=f;x=m}if(y.next=null,v<<=1,!(1<u))break}h.head=_,h.modified=!0,h.pushmod=!0}for(null==Tt.edges&&(null==Hn.zpp_pool?Tt.edges=new Hn:(Tt.edges=Hn.zpp_pool,Hn.zpp_pool=Tt.edges.next,Tt.edges.next=null),Tt.edges.lt=Gt.edge_lt,Tt.edges.swapped=Gt.edge_swap);null!=Tt.queue.head;){var g=Tt.queue.pop_unsafe();switch(g.type){case 0:(g.helper=g).node=Tt.edges.insert(g);break;case 1:var z=g.prev;2==z.helper.type&&t.add_diagonal(g,z.helper),Tt.edges.remove_node(z.node);break;case 2:var b=g.prev;2==b.helper.type&&t.add_diagonal(g,b.helper),Tt.edges.remove_node(b.node);var w=null;if(!Tt.edges.empty()){for(var S=Tt.edges.parent;null!=S.prev;)S=S.prev;for(;null!=S;){var C=S.data;if(!Gt.vert_lt(C,g)){w=C;break}if(null!=S.next)for(S=S.next;null!=S.prev;)S=S.prev;else{for(;null!=S.parent&&S==S.parent.next;)S=S.parent;S=S.parent}}}var M=w;null!=M&&(2==M.helper.type&&t.add_diagonal(g,M.helper),M.helper=g);break;case 3:var P=null;if(!Tt.edges.empty()){for(var k=Tt.edges.parent;null!=k.prev;)k=k.prev;for(;null!=k;){var T=k.data;if(!Gt.vert_lt(T,g)){P=T;break}if(null!=k.next)for(k=k.next;null!=k.prev;)k=k.prev;else{for(;null!=k.parent&&k==k.parent.next;)k=k.parent;k=k.parent}}}var G=P;null!=G&&(t.add_diagonal(g,G.helper),G.helper=g),g.node=Tt.edges.insert(g),g.helper=g;break;case 4:var O=g.prev;if(Tt.left_vertex(g))2==O.helper.type&&t.add_diagonal(g,O.helper),Tt.edges.remove_node(O.node),g.node=Tt.edges.insert(g),g.helper=g;else{var A=null;if(!Tt.edges.empty()){for(var E=Tt.edges.parent;null!=E.prev;)E=E.prev;for(;null!=E;){var I=E.data;if(!Gt.vert_lt(I,g)){A=I;break}if(null!=E.next)for(E=E.next;null!=E.prev;)E=E.prev;else{for(;null!=E.parent&&E==E.parent.next;)E=E.parent;E=E.parent}}}var B=A;2==B.helper.type&&t.add_diagonal(g,B.helper),B.helper=g}}}return t},Tt.prototype.__class__=Tt;var Gt=zpp_nape.geom.ZPP_PartitionVertex=function(){this.node=null,this.prev=null,this.next=null,this.rightchain=!1,this.helper=null,this.type=0,this.diagonals=null,this.forced=!1,this.y=0,this.x=0,this.mag=0,this.id=0,this.id=Gt.nextId++,this.diagonals=new zi};Gt.__name__=["zpp_nape","geom","ZPP_PartitionVertex"],Gt.get=function(e){var t;return null==Gt.zpp_pool?t=new Gt:(t=Gt.zpp_pool,Gt.zpp_pool=t.next,t.next=null),t.x=e.x,t.y=e.y,t},Gt.rightdistance=function(e,t){var i,n,r=e.next.y>e.y;i=e.next.x-e.x,n=e.next.y-e.y;var o;return o=t.x-e.x,(r?-1:1)*((t.y-e.y)*i-o*n)},Gt.vert_lt=function(e,t){if(t==e||t==e.next)return!0;if(e.y!=e.next.y)return Gt.rightdistance(e,t)<=0;var i=e.x,n=e.next.x;return(i<n?i:n)<=t.x},Gt.edge_swap=function(e,t){var i=e.node;e.node=t.node,t.node=i},Gt.edge_lt=function(e,t){if(e==t&&e.next==t.next)return!1;if(e==t.next)return!Gt.vert_lt(e,t);if(t==e.next)return Gt.vert_lt(t,e);if(e.y==e.next.y){if(t.y!=t.next.y)return 0<Gt.rightdistance(t,e)||0<Gt.rightdistance(t,e.next);var i=e.x,n=e.next.x,r=n<i?i:n,o=t.x,a=t.next.x;return(a<o?o:a)<r}var s=Gt.rightdistance(e,t),p=Gt.rightdistance(e,t.next);if(0==s&&0==p){var l=e.x,h=e.next.x,u=h<l?l:h,d=t.x,c=t.next.x;return(c<d?d:c)<u}if(0<=s*p)return s<0||p<0;var _=Gt.rightdistance(t,e),y=Gt.rightdistance(t,e.next);return 0<=_*y&&(0<_||0<y)},Gt.prototype.id=null,Gt.prototype.mag=null,Gt.prototype.x=null,Gt.prototype.y=null,Gt.prototype.forced=null,Gt.prototype.diagonals=null,Gt.prototype.type=null,Gt.prototype.helper=null,Gt.prototype.rightchain=null,Gt.prototype.next=null,Gt.prototype.prev=null,Gt.prototype.alloc=function(){},Gt.prototype.free=function(){this.helper=null},Gt.prototype.copy=function(){var e;return null==Gt.zpp_pool?e=new Gt:(e=Gt.zpp_pool,Gt.zpp_pool=e.next,e.next=null),e.x=this.x,e.y=this.y,e.forced=this.forced,e},Gt.prototype.sort=function(){var e=0,t=0,i=0;e=this.prev.x-this.x,t=this.prev.y-this.y,i=this.next.x-this.x;var n=(this.next.y-this.y)*e-i*t,r=0<n?-1:0==n?0:1,o=this.diagonals;if(null!=o.head&&null!=o.head.next){for(var a,s,p,l=o.head,h=null,u=null,d=null,c=null,_=1;;){for(a=0,u=l,h=l=null;null!=u;){for(++a,d=u,s=0,p=_;null!=d&&s<_;)++s,d=d.next;for(;0<s||0<p&&null!=d;){if(0==s)d=(c=d).next,--p;else if(0==p||null==d)u=(c=u).next,--s;else{var y;if(1==r){e=u.elt.x-this.x,t=u.elt.y-this.y,i=d.elt.x-this.x;var x=(d.elt.y-this.y)*e-i*t;y=1==(0<x?-1:0==x?0:1)}else{e=this.prev.x-this.x,t=this.prev.y-this.y,i=u.elt.x-this.x;var m=(u.elt.y-this.y)*e-i*t,f=0<m?-1:0==m?0:1;e=this.prev.x-this.x,t=this.prev.y-this.y,i=d.elt.x-this.x;var v=(d.elt.y-this.y)*e-i*t,g=0<v?-1:0==v?0:1;if(f*g==1||f*g==0&&(1==f||1==g)){e=u.elt.x-this.x,t=u.elt.y-this.y,i=d.elt.x-this.x;var z=(d.elt.y-this.y)*e-i*t;y=1==(0<z?-1:0==z?0:1)}else if(-1==f||-1==g)y=-1==g;else if(0==f&&0==g){e=this.x-this.prev.x,t=this.y-this.prev.y;var b=e*(i=u.elt.x-this.x)+t*(u.elt.y-this.y),w=e*(i=d.elt.x-this.x)+t*(d.elt.y-this.y);y=b<0&&0<w||!(w<0&&0<b)}else y=!0}y?(u=(c=u).next,--s):(d=(c=d).next,--p)}null!=h?h.next=c:l=c,h=c}u=d}if(h.next=null,_<<=1,!(1<a))break}o.head=l,o.modified=!0,o.pushmod=!0}},Gt.prototype.node=null,Gt.prototype.__class__=Gt;var Ot=zpp_nape.geom.ZPP_PartitionedPoly=function(e){this.next=null,this.vertices=null,this.init(e)};Ot.__name__=["zpp_nape","geom","ZPP_PartitionedPoly"],Ot.sharedPPList=null,Ot.getSharedPP=function(){return null==Ot.sharedPPList&&(Ot.sharedPPList=new wi),Ot.sharedPPList},Ot.sharedGVList=null,Ot.getShared=function(){return null==Ot.sharedGVList&&(Ot.sharedGVList=new Si),Ot.sharedGVList},Ot.prototype.vertices=null,Ot.prototype.eq=function(e,t){var i,n,r=e.x,o=e.y;return(i=r-t.x)*i+(n=o-t.y)*n<Qs.epsilon*Qs.epsilon},Ot.prototype.next=null,Ot.prototype.alloc=function(){},Ot.prototype.free=function(){},Ot.prototype.init=function(e){if(null!=e){var t=0;if(null!=e)for(var i=e;;){var n=i;if(t+=n.x*(n.next.y-n.prev.y),(i=i.next)==e)break}for(var r=0<.5*t,o=e;;){var a;if(r){var s;null==Gt.zpp_pool?s=new Gt:(s=Gt.zpp_pool,Gt.zpp_pool=s.next,s.next=null),s.x=o.x,s.y=o.y;var p=s;null==this.vertices?this.vertices=p.prev=p.next=p:(p.prev=this.vertices,p.next=this.vertices.next,this.vertices.next.prev=p,this.vertices.next=p),a=p}else{var l;null==Gt.zpp_pool?l=new Gt:(l=Gt.zpp_pool,Gt.zpp_pool=l.next,l.next=null),l.x=o.x,l.y=o.y;var h=l;null==this.vertices?this.vertices=h.prev=h.next=h:(h.next=this.vertices,h.prev=this.vertices.prev,this.vertices.prev.next=h,this.vertices.prev=h),a=h}if(this.vertices=a,this.vertices.forced=o.forced,(o=o.next)==e)break}this.remove_collinear_vertices()}},Ot.prototype.remove_collinear_vertices=function(){for(var e,t=this.vertices,i=!0;i||t!=this.vertices;)if(i=!1,this.eq(t,t.next)){if(t==this.vertices&&(this.vertices=t.next,i=!0),t.forced&&(t.next.forced=!0),null!=t&&t.prev==t){t.next=t.prev=null;var n=t;n.helper=null,n.next=Gt.zpp_pool,Gt.zpp_pool=n,t=t=null}else{var r=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null;var o=t;o.helper=null,o.next=Gt.zpp_pool,Gt.zpp_pool=o,t=null,t=r}if(null==t){this.vertices=null;break}}else t=t.next;if(null==this.vertices)return!0;for(;;){for(e=!1,t=this.vertices,i=!0;i||t!=this.vertices;){i=!1;var a,s,p=t.prev;a=t.x-p.x,s=t.y-p.y;var l;l=t.next.x-t.x;var h=(t.next.y-t.y)*a-l*s;if(h*h>=Qs.epsilon*Qs.epsilon)t=t.next;else{if(t==this.vertices&&(this.vertices=t.next,i=!0),null!=t&&t.prev==t){t.next=t.prev=null;var u=t;u.helper=null,u.next=Gt.zpp_pool,Gt.zpp_pool=u,t=t=null}else{var d=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null;var c=t;c.helper=null,c.next=Gt.zpp_pool,Gt.zpp_pool=c,t=null,t=d}if(e=!0,null==t){e=!1,this.vertices=null;break}}}if(!e)break}return null==this.vertices},Ot.prototype.add_diagonal=function(e,t){e.diagonals.add(t),t.diagonals.add(e),e.forced=t.forced=!0},Ot.prototype.extract_partitions=function(e){if(null==e&&(e=new wi),null!=this.vertices){var t=this.vertices,i=this.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);for(this.pull_partitions(this.vertices,e);null!=this.vertices;){var r;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var o=this.vertices;o.helper=null,o.next=Gt.zpp_pool,Gt.zpp_pool=o,r=this.vertices=null}else{var a=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var s=this.vertices;s.helper=null,s.next=Gt.zpp_pool,Gt.zpp_pool=s,this.vertices=null,r=a}this.vertices=r}for(var p=null,l=e.head;null!=l;)l.elt.remove_collinear_vertices()?e.erase(p):l=(p=l).next}return e},Ot.prototype.pull_partitions=function(e,t){var i;null==Ot.zpp_pool?i=new Ot:(i=Ot.zpp_pool,Ot.zpp_pool=i.next,i.next=null);for(var n=e;;){var r;null==Gt.zpp_pool?r=new Gt:(r=Gt.zpp_pool,Gt.zpp_pool=r.next,r.next=null),r.x=n.x,r.y=n.y,r.forced=n.forced;var o=r;if(null==i.vertices?i.vertices=o.prev=o.next=o:(o.prev=i.vertices,o.next=i.vertices.next,i.vertices.next.prev=o,i.vertices.next=o),i.vertices=o,i.vertices.forced=n.forced,null!=n.diagonals.head){var a=n.diagonals,s=a.head.elt;if(a.pop(),s==e)break;n=this.pull_partitions(n,t)}else n=n.next;if(n==e)break}var p=0,l=i.vertices,h=i.vertices;if(null!=l)for(var u=l;;){var d=u;if(p+=d.x*(d.next.y-d.prev.y),(u=u.next)==h)break}return.5*p!=0&&t.add(i),n},Ot.prototype.extract=function(e){if(null==e&&(e=new Si),null!=this.vertices){var t=this.vertices,i=this.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);for(this.pull(this.vertices,e);null!=this.vertices;){var r;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var o=this.vertices;o.helper=null,o.next=Gt.zpp_pool,Gt.zpp_pool=o,r=this.vertices=null}else{var a=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var s=this.vertices;s.helper=null,s.next=Gt.zpp_pool,Gt.zpp_pool=s,this.vertices=null,r=a}this.vertices=r}}return e},Ot.prototype.pull=function(e,t){for(var i=null,n=e;;){var r,o=n.x,a=n.y;null==cr.zpp_pool?r=new cr:(r=cr.zpp_pool,cr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=o,r.y=a;var s=r;if(null==i?i=s.prev=s.next=s:(s.prev=i,s.next=i.next,i.next.prev=s,i.next=s),(i=s).forced=n.forced,null!=n.diagonals.head){var p=n.diagonals,l=p.head.elt;if(p.pop(),l==e)break;n=this.pull(n,t)}else n=n.next;if(n==e)break}var h=0,u=i;if(null!=i)for(var d=i;;){var c=d;if(h+=c.x*(c.next.y-c.prev.y),(d=d.next)==u)break}var _=.5*h;if(_*_>=Qs.epsilon*Qs.epsilon){for(var y=i,x=!0;x||y!=i;){x=!1;var m,f,v=y.x,g=y.y;if((m=v-y.next.x)*m+(f=g-y.next.y)*f<Qs.epsilon*Qs.epsilon){if(y==i&&(i=y.next,x=!0),y.forced&&(y.next.forced=!0),null!=y&&y.prev==y)y.next=y.prev=null,y=y=null;else{var z=y.next;y.prev.next=y.next,y.next.prev=y.prev,y.next=y.prev=null,y=null,y=z}if(null==y){i=null;break}}else y=y.next}if(null!=i)for(var b;;){for(y=i,x=!(b=!1);x||y!=i;){x=!1;var w,S,C=y.prev;w=y.x-C.x,S=y.y-C.y;var M;M=y.next.x-y.x;var P=(y.next.y-y.y)*w-M*S;if(P*P>=Qs.epsilon*Qs.epsilon)y=y.next;else{if(y==i&&(i=y.next,x=!0),null!=y&&y.prev==y)y.next=y.prev=null,y=y=null;else{var k=y.next;y.prev.next=y.next,y.next.prev=y.prev,y.next=y.prev=null,y=null,y=k}if(b=!0,null==y){b=!1,i=null;break}}}if(!b)break}null!=i&&t.add(i)}return n},Ot.prototype.__class__=Ot;var At=zpp_nape.geom.ZPP_Ray=function(){var e,t;if(this.zip_dir=!1,this.absnormaly=0,this.absnormalx=0,this.normaly=0,this.normalx=0,this.idiry=0,this.idirx=0,this.diry=0,this.dirx=0,this.originy=0,this.originx=0,this.userData=null,this.maxdist=0,this.direction=null,(this.origin=null)==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var i;null==ep.zpp_pool?i=new ep:(i=ep.zpp_pool,ep.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,e.zpp_inner=i,e.zpp_inner.outer=e}else{var n,r=e.zpp_inner;if(null!=r._validate&&r._validate(),0==e.zpp_inner.x){var o=e.zpp_inner;null!=o._validate&&o._validate(),n=0==e.zpp_inner.y}else n=!1;if(!n){e.zpp_inner.x=0,e.zpp_inner.y=0;var a=e.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}if(e.zpp_inner.weak=!1,this.origin=e,this.origin.zpp_inner._invalidate=$(this,this.origin_invalidate),null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var s;null==ep.zpp_pool?s=new ep:(s=ep.zpp_pool,ep.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=0,s.y=0,t.zpp_inner=s,t.zpp_inner.outer=t}else{var p,l=t.zpp_inner;if(null!=l._validate&&l._validate(),0==t.zpp_inner.x){var h=t.zpp_inner;null!=h._validate&&h._validate(),p=0==t.zpp_inner.y}else p=!1;if(!p){t.zpp_inner.x=0,t.zpp_inner.y=0;var u=t.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}t.zpp_inner.weak=!1,this.direction=t,this.direction.zpp_inner._invalidate=$(this,this.direction_invalidate),this.originx=0,this.originy=0,this.dirx=0,this.diry=0,this.zip_dir=!1};At.__name__=["zpp_nape","geom","ZPP_Ray"],At.prototype.origin=null,At.prototype.direction=null,At.prototype.maxdist=null,At.prototype.userData=null,At.prototype.originx=null,At.prototype.originy=null,At.prototype.dirx=null,At.prototype.diry=null,At.prototype.idirx=null,At.prototype.idiry=null,At.prototype.normalx=null,At.prototype.normaly=null,At.prototype.absnormalx=null,At.prototype.absnormaly=null,At.prototype.origin_invalidate=function(e){this.originx=e.x,this.originy=e.y},At.prototype.direction_invalidate=function(e){this.dirx=e.x,this.diry=e.y,this.zip_dir=!0},At.prototype.zip_dir=null,At.prototype.invalidate_dir=function(){this.zip_dir=!0},At.prototype.validate_dir=function(){if(this.zip_dir){this.zip_dir=!1;var e=1/Math.sqrt(this.dirx*this.dirx+this.diry*this.diry);this.dirx*=e,this.diry*=e,this.idirx=1/this.dirx,this.idiry=1/this.diry,this.normalx=-this.diry,this.normaly=this.dirx;var t=this.normalx;this.absnormalx=t<0?-t:t;var i=this.normaly;this.absnormaly=i<0?-i:i}},At.prototype.rayAABB=function(){var e,t=this.originx,i=t,n=this.originy,r=n;if(this.maxdist>=1/0?(0<this.dirx?i=1/0:this.dirx<0&&(i=-1/0),0<this.diry?r=1/0:this.diry<0&&(r=-1/0)):(i+=this.maxdist*this.dirx,r+=this.maxdist*this.diry),i<t){var o=t;t=i,i=o}if(r<n){var a=n;n=r,r=a}return null==Oo.zpp_pool?e=new Oo:(e=Oo.zpp_pool,Oo.zpp_pool=e.next,e.next=null),e.minx=t,e.miny=n,e.maxx=i,e.maxy=r,e},At.prototype.aabbtest=function(e){var t=this.normalx*(this.originx-.5*(e.minx+e.maxx))+this.normaly*(this.originy-.5*(e.miny+e.maxy));return(t<0?-t:t)<.5*this.absnormalx*(e.maxx-e.minx)+.5*this.absnormaly*(e.maxy-e.miny)},At.prototype.aabbsect=function(e){var t=this.originx>=e.minx&&this.originx<=e.maxx,i=this.originy>=e.miny&&this.originy<=e.maxy;if(t&&i)return 0;for(var n=-1;!(0<=this.dirx&&this.originx>=e.maxx||this.dirx<=0&&this.originx<=e.minx||0<=this.diry&&this.originy>=e.maxy||this.diry<=0&&this.originy<=e.miny);){if(0<this.dirx){var r=(e.minx-this.originx)*this.idirx;if(0<=r&&r<=this.maxdist){var o=this.originy+r*this.diry;if(o>=e.miny&&o<=e.maxy){n=r;break}}}else if(this.dirx<0){var a=(e.maxx-this.originx)*this.idirx;if(0<=a&&a<=this.maxdist){var s=this.originy+a*this.diry;if(s>=e.miny&&s<=e.maxy){n=a;break}}}if(0<this.diry){var p=(e.miny-this.originy)*this.idiry;if(0<=p&&p<=this.maxdist){var l=this.originx+p*this.dirx;if(l>=e.minx&&l<=e.maxx){n=p;break}}}else if(this.diry<0){var h=(e.maxy-this.originy)*this.idiry;if(0<=h&&h<=this.maxdist){var u=this.originx+h*this.dirx;if(u>=e.minx&&u<=e.maxx){n=h;break}}}break}return n},At.prototype.circlesect=function(e,t,i){if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var n=e.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var y=e.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var x,m;x=this.originx-e.worldCOMx,m=this.originy-e.worldCOMy;var f=this.dirx*this.dirx+this.diry*this.diry,v=2*(x*this.dirx+m*this.diry),g=x*x+m*m-e.radius*e.radius,z=v*v-4*f*g;if(0==z){var b=-v/2*f;if((!t||0<g)&&0<b&&b<i&&b<=this.maxdist){var w=0,S=0;w=this.originx,S=this.originy,w+=this.dirx*b,S+=this.diry*b,w-=e.worldCOMx,S-=e.worldCOMy;var C,M=1/Math.sqrt(w*w+S*S);if(w*=M,S*=M,g<=0&&(w=-w,S=-S),null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==ep.zpp_pool?P=new ep:(P=ep.zpp_pool,ep.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=w,P.y=S,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==w){var G=C.zpp_inner;null!=G._validate&&G._validate(),k=C.zpp_inner.y==S}else k=!1;if(!k){C.zpp_inner.x=w,C.zpp_inner.y=S;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}return C.zpp_inner.weak=!1,bt.getRay(C,b,g<=0,e.outer)}return null}var A=(-v-(z=Math.sqrt(z)))*(f=1/(2*f)),E=(-v+z)*f;if(0<A){if(A<i&&A<=this.maxdist){var I=0,B=0;I=this.originx,B=this.originy,I+=this.dirx*A,B+=this.diry*A,I-=e.worldCOMx,B-=e.worldCOMy;var L,D=1/Math.sqrt(I*I+B*B);if(I*=D,B*=D,null==jn.poolVec2?L=new lt:(L=jn.poolVec2,jn.poolVec2=L.zpp_pool,L.zpp_pool=null),null==L.zpp_inner){var R;null==ep.zpp_pool?R=new ep:(R=ep.zpp_pool,ep.zpp_pool=R.next,R.next=null),R.weak=!1,R._immutable=!1,R.x=I,R.y=B,L.zpp_inner=R,L.zpp_inner.outer=L}else{var F,j=L.zpp_inner;if(null!=j._validate&&j._validate(),L.zpp_inner.x==I){var N=L.zpp_inner;null!=N._validate&&N._validate(),F=L.zpp_inner.y==B}else F=!1;if(!F){L.zpp_inner.x=I,L.zpp_inner.y=B;var U=L.zpp_inner;null!=U._invalidate&&U._invalidate(U)}}return L.zpp_inner.weak=!1,bt.getRay(L,A,!1,e.outer)}return null}if(0<E&&t){if(E<i&&E<=this.maxdist){var H=0,V=0;H=this.originx,V=this.originy,H+=this.dirx*E,V+=this.diry*E,H-=e.worldCOMx,V-=e.worldCOMy;var W,X=1/Math.sqrt(H*H+V*V);if(H=-(H*=X),V=-(V*=X),null==jn.poolVec2?W=new lt:(W=jn.poolVec2,jn.poolVec2=W.zpp_pool,W.zpp_pool=null),null==W.zpp_inner){var q;null==ep.zpp_pool?q=new ep:(q=ep.zpp_pool,ep.zpp_pool=q.next,q.next=null),q.weak=!1,q._immutable=!1,q.x=H,q.y=V,W.zpp_inner=q,W.zpp_inner.outer=W}else{var Y,Z=W.zpp_inner;if(null!=Z._validate&&Z._validate(),W.zpp_inner.x==H){var K=W.zpp_inner;null!=K._validate&&K._validate(),Y=W.zpp_inner.y==V}else Y=!1;if(!Y){W.zpp_inner.x=H,W.zpp_inner.y=V;var J=W.zpp_inner;null!=J._invalidate&&J._invalidate(J)}}return W.zpp_inner.weak=!1,bt.getRay(W,E,!0,e.outer)}return null}return null},At.prototype.circlesect2=function(e,t,i){if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var n=e.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var y=e.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var x,m;x=this.originx-e.worldCOMx,m=this.originy-e.worldCOMy;var f=this.dirx*this.dirx+this.diry*this.diry,v=2*(x*this.dirx+m*this.diry),g=x*x+m*m-e.radius*e.radius,z=v*v-4*f*g;if(0==z){var b=-v/2*f;if((!t||0<g)&&0<b&&b<=this.maxdist){var w=0,S=0;w=this.originx,S=this.originy,w+=this.dirx*b,S+=this.diry*b,w-=e.worldCOMx,S-=e.worldCOMy;var C,M=1/Math.sqrt(w*w+S*S);if(w*=M,S*=M,g<=0&&(w=-w,S=-S),null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==ep.zpp_pool?P=new ep:(P=ep.zpp_pool,ep.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=w,P.y=S,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==w){var G=C.zpp_inner;null!=G._validate&&G._validate(),k=C.zpp_inner.y==S}else k=!1;if(!k){C.zpp_inner.x=w,C.zpp_inner.y=S;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}C.zpp_inner.weak=!1;for(var A=bt.getRay(C,b,g<=0,e.outer),E=null,I=i.zpp_inner.inner.head;null!=I&&!(A.zpp_inner.toiDistance<I.elt.zpp_inner.toiDistance);)I=(E=I).next;var B,L=i.zpp_inner.inner;null==yn.zpp_pool?B=new yn:(B=yn.zpp_pool,yn.zpp_pool=B.next,B.next=null),B.elt=A;var D=B;null==E?(D.next=L.head,L.head=D):(D.next=E.next,E.next=D),L.pushmod=L.modified=!0,L.length++}}else{var R=(-v-(z=Math.sqrt(z)))*(f=1/(2*f)),F=(-v+z)*f;if(0<R&&R<=this.maxdist){var j=0,N=0;j=this.originx,N=this.originy,j+=this.dirx*R,N+=this.diry*R,j-=e.worldCOMx,N-=e.worldCOMy;var U,H=1/Math.sqrt(j*j+N*N);if(j*=H,N*=H,null==jn.poolVec2?U=new lt:(U=jn.poolVec2,jn.poolVec2=U.zpp_pool,U.zpp_pool=null),null==U.zpp_inner){var V;null==ep.zpp_pool?V=new ep:(V=ep.zpp_pool,ep.zpp_pool=V.next,V.next=null),V.weak=!1,V._immutable=!1,V.x=j,V.y=N,U.zpp_inner=V,U.zpp_inner.outer=U}else{var W,X=U.zpp_inner;if(null!=X._validate&&X._validate(),U.zpp_inner.x==j){var q=U.zpp_inner;null!=q._validate&&q._validate(),W=U.zpp_inner.y==N}else W=!1;if(!W){U.zpp_inner.x=j,U.zpp_inner.y=N;var Y=U.zpp_inner;null!=Y._invalidate&&Y._invalidate(Y)}}U.zpp_inner.weak=!1;for(var Z=bt.getRay(U,R,!1,e.outer),K=null,J=i.zpp_inner.inner.head;null!=J&&!(Z.zpp_inner.toiDistance<J.elt.zpp_inner.toiDistance);)J=(K=J).next;var Q,$=i.zpp_inner.inner;null==yn.zpp_pool?Q=new yn:(Q=yn.zpp_pool,yn.zpp_pool=Q.next,Q.next=null),Q.elt=Z;var ee=Q;null==K?(ee.next=$.head,$.head=ee):(ee.next=K.next,K.next=ee),$.pushmod=$.modified=!0,$.length++}if(0<F&&F<=this.maxdist&&t){var te=0,ie=0;te=this.originx,ie=this.originy,te+=this.dirx*F,ie+=this.diry*F,te-=e.worldCOMx,ie-=e.worldCOMy;var ne,re=1/Math.sqrt(te*te+ie*ie);if(te=-(te*=re),ie=-(ie*=re),null==jn.poolVec2?ne=new lt:(ne=jn.poolVec2,jn.poolVec2=ne.zpp_pool,ne.zpp_pool=null),null==ne.zpp_inner){var oe;null==ep.zpp_pool?oe=new ep:(oe=ep.zpp_pool,ep.zpp_pool=oe.next,oe.next=null),oe.weak=!1,oe._immutable=!1,oe.x=te,oe.y=ie,ne.zpp_inner=oe,ne.zpp_inner.outer=ne}else{var ae,se=ne.zpp_inner;if(null!=se._validate&&se._validate(),ne.zpp_inner.x==te){var pe=ne.zpp_inner;null!=pe._validate&&pe._validate(),ae=ne.zpp_inner.y==ie}else ae=!1;if(!ae){ne.zpp_inner.x=te,ne.zpp_inner.y=ie;var le=ne.zpp_inner;null!=le._invalidate&&le._invalidate(le)}}ne.zpp_inner.weak=!1;for(var he=bt.getRay(ne,F,!0,e.outer),ue=null,de=i.zpp_inner.inner.head;null!=de&&!(he.zpp_inner.toiDistance<de.elt.zpp_inner.toiDistance);)de=(ue=de).next;var ce,_e=i.zpp_inner.inner;null==yn.zpp_pool?ce=new yn:(ce=yn.zpp_pool,yn.zpp_pool=ce.next,ce.next=null),ce.elt=he;var ye=ce;null==ue?(ye.next=_e.head,_e.head=ye):(ye.next=ue.next,ue.next=ye),_e.pushmod=_e.modified=!0,_e.length++}}},At.prototype.polysect=function(e,t,i){for(var n=i,r=null,o=e.edges.head,a=e.gverts.next,s=a,p=a.next;null!=p;){var l=p,h=o.elt;if(t||h.gnormx*this.dirx+h.gnormy*this.diry<0){var u,d;u=l.x-s.x,d=l.y-s.y;var c,_;c=s.x-this.originx,_=s.y-this.originy;var y=d*this.dirx-u*this.diry;if(y*y>Qs.epsilon){var x=(d*c-u*_)*(y=1/y);if(0<x&&x<n&&x<=this.maxdist){var m=(this.diry*c-this.dirx*_)*y;m>-Qs.epsilon&&m<1+Qs.epsilon&&(n=x,r=o.elt)}}}o=o.next,s=l,p=(a=p).next}for(;;){var f=p=e.gverts.next,v=o.elt;if(t||v.gnormx*this.dirx+v.gnormy*this.diry<0){var g,z;g=f.x-s.x,z=f.y-s.y;var b,w;b=s.x-this.originx,w=s.y-this.originy;var S=z*this.dirx-g*this.diry;if(S*S>Qs.epsilon){var C=(z*b-g*w)*(S=1/S);if(0<C&&C<n&&C<=this.maxdist){var M=(this.diry*b-this.dirx*w)*S;M>-Qs.epsilon&&M<1+Qs.epsilon&&(n=C,r=o.elt)}}}o=o.next;break}if(null==r)return null;var P=0,k=0;P=r.gnormx,k=r.gnormy;var T,G=0<P*this.dirx+k*this.diry;if(G&&(P=-P,k=-k),null==jn.poolVec2?T=new lt:(T=jn.poolVec2,jn.poolVec2=T.zpp_pool,T.zpp_pool=null),null==T.zpp_inner){var O;null==ep.zpp_pool?O=new ep:(O=ep.zpp_pool,ep.zpp_pool=O.next,O.next=null),O.weak=!1,O._immutable=!1,O.x=P,O.y=k,T.zpp_inner=O,T.zpp_inner.outer=T}else{var A,E=T.zpp_inner;if(null!=E._validate&&E._validate(),T.zpp_inner.x==P){var I=T.zpp_inner;null!=I._validate&&I._validate(),A=T.zpp_inner.y==k}else A=!1;if(!A){T.zpp_inner.x=P,T.zpp_inner.y=k;var B=T.zpp_inner;null!=B._invalidate&&B._invalidate(B)}}return T.zpp_inner.weak=!1,bt.getRay(T,n,G,e.outer)},At.prototype.polysect2=function(e,t,i){for(var n=1/0,r=-1,o=null,a=null,s=e.edges.head,p=e.gverts.next,l=p,h=p.next;null!=h;){var u=h,d=s.elt;if(t||d.gnormx*this.dirx+d.gnormy*this.diry<0){var c,_;c=u.x-l.x,_=u.y-l.y;var y,x;y=l.x-this.originx,x=l.y-this.originy;var m=_*this.dirx-c*this.diry;if(m*m>Qs.epsilon){var f=(_*y-c*x)*(m=1/m);if(0<f&&f<=this.maxdist&&(f<n||r<f)){var v=(this.diry*y-this.dirx*x)*m;v>-Qs.epsilon&&v<1+Qs.epsilon&&(f<n&&(n=f,o=s.elt),r<f&&(r=f,a=s.elt))}}}s=s.next,l=u,h=(p=h).next}for(;;){var g=h=e.gverts.next,z=s.elt;if(t||z.gnormx*this.dirx+z.gnormy*this.diry<0){var b,w;b=g.x-l.x,w=g.y-l.y;var S,C;S=l.x-this.originx,C=l.y-this.originy;var M=w*this.dirx-b*this.diry;if(M*M>Qs.epsilon){var P=(w*S-b*C)*(M=1/M);if(0<P&&P<=this.maxdist&&(P<n||r<P)){var k=(this.diry*S-this.dirx*C)*M;k>-Qs.epsilon&&k<1+Qs.epsilon&&(P<n&&(n=P,o=s.elt),r<P&&(r=P,a=s.elt))}}}s=s.next;break}if(null!=o){var T=0,G=0;T=o.gnormx,G=o.gnormy;var O,A=0<T*this.dirx+G*this.diry;if(A&&(T=-T,G=-G),null==jn.poolVec2?O=new lt:(O=jn.poolVec2,jn.poolVec2=O.zpp_pool,O.zpp_pool=null),null==O.zpp_inner){var E;null==ep.zpp_pool?E=new ep:(E=ep.zpp_pool,ep.zpp_pool=E.next,E.next=null),E.weak=!1,E._immutable=!1,E.x=T,E.y=G,O.zpp_inner=E,O.zpp_inner.outer=O}else{var I,B=O.zpp_inner;if(null!=B._validate&&B._validate(),O.zpp_inner.x==T){var L=O.zpp_inner;null!=L._validate&&L._validate(),I=O.zpp_inner.y==G}else I=!1;if(!I){O.zpp_inner.x=T,O.zpp_inner.y=G;var D=O.zpp_inner;null!=D._invalidate&&D._invalidate(D)}}O.zpp_inner.weak=!1;for(var R=bt.getRay(O,n,A,e.outer),F=null,j=i.zpp_inner.inner.head;null!=j&&!(R.zpp_inner.toiDistance<j.elt.zpp_inner.toiDistance);)j=(F=j).next;var N,U=i.zpp_inner.inner;null==yn.zpp_pool?N=new yn:(N=yn.zpp_pool,yn.zpp_pool=N.next,N.next=null),N.elt=R;var H=N;null==F?(H.next=U.head,U.head=H):(H.next=F.next,F.next=H),U.pushmod=U.modified=!0,U.length++}if(null!=a&&o!=a){var V=0,W=0;V=a.gnormx,W=a.gnormy;var X,q=0<V*this.dirx+W*this.diry;if(q&&(V=-V,W=-W),null==jn.poolVec2?X=new lt:(X=jn.poolVec2,jn.poolVec2=X.zpp_pool,X.zpp_pool=null),null==X.zpp_inner){var Y;null==ep.zpp_pool?Y=new ep:(Y=ep.zpp_pool,ep.zpp_pool=Y.next,Y.next=null),Y.weak=!1,Y._immutable=!1,Y.x=V,Y.y=W,X.zpp_inner=Y,X.zpp_inner.outer=X}else{var Z,K=X.zpp_inner;if(null!=K._validate&&K._validate(),X.zpp_inner.x==V){var J=X.zpp_inner;null!=J._validate&&J._validate(),Z=X.zpp_inner.y==W}else Z=!1;if(!Z){X.zpp_inner.x=V,X.zpp_inner.y=W;var Q=X.zpp_inner;null!=Q._invalidate&&Q._invalidate(Q)}}X.zpp_inner.weak=!1;for(var $=bt.getRay(X,r,q,e.outer),ee=null,te=i.zpp_inner.inner.head;null!=te&&!($.zpp_inner.toiDistance<te.elt.zpp_inner.toiDistance);)te=(ee=te).next;var ie,ne=i.zpp_inner.inner;null==yn.zpp_pool?ie=new yn:(ie=yn.zpp_pool,yn.zpp_pool=ie.next,ie.next=null),ie.elt=$;var re=ie;null==ee?(re.next=ne.head,ne.head=re):(re.next=ee.next,ee.next=re),ne.pushmod=ne.modified=!0,ne.length++}},At.prototype.__class__=At;var Et=zpp_nape.geom.ZPP_SimpleVert=function(){this.node=null,this.next=null,this.id=0,this.links=null,this.y=0,this.x=0,this.forced=!1,this.id=ke.ZPP_SimpleVert(),null==Wn.zpp_pool?this.links=new Wn:(this.links=Wn.zpp_pool,Wn.zpp_pool=this.links.next,this.links.next=null),this.links.lt=Et.less_xy};Et.__name__=["zpp_nape","geom","ZPP_SimpleVert"],Et.less_xy=function(e,t){return e.y<t.y||e.y==t.y&&e.x<t.x},Et.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},Et.get=function(e,t){var i;return null==Et.zpp_pool?i=new Et:(i=Et.zpp_pool,Et.zpp_pool=i.next,i.next=null),i.x=e,i.y=t,i},Et.prototype.forced=null,Et.prototype.x=null,Et.prototype.y=null,Et.prototype.links=null,Et.prototype.id=null,Et.prototype.next=null,Et.prototype.node=null,Et.prototype.free=function(){this.links.clear(),this.node=null,this.forced=!1},Et.prototype.alloc=function(){},Et.prototype.__class__=Et;var It=zpp_nape.geom.ZPP_SimpleSeg=function(){this.node=null,this.prev=null,this.next=null,this.id=0,this.vertices=null,this.right=null,this.left=null,this.id=ke.ZPP_SimpleSeg(),null==Wn.zpp_pool?this.vertices=new Wn:(this.vertices=Wn.zpp_pool,Wn.zpp_pool=this.vertices.next,this.vertices.next=null),this.vertices.lt=$(this,this.less_xy)};It.__name__=["zpp_nape","geom","ZPP_SimpleSeg"],It.get=function(e,t){var i;return null==It.zpp_pool?i=new It:(i=It.zpp_pool,It.zpp_pool=i.next,i.next=null),i.left=e,i.right=t,i.vertices.insert(e),i.vertices.insert(t),i},It.prototype.left=null,It.prototype.right=null,It.prototype.vertices=null,It.prototype.id=null,It.prototype.next=null,It.prototype.free=function(){this.left=this.right=null,this.prev=null,this.node=null,this.vertices.clear()},It.prototype.alloc=function(){},It.prototype.prev=null,It.prototype.node=null,It.prototype.less_xy=function(e,t){return e.x<t.x||e.x==t.x&&e.y<t.y},It.prototype.__class__=It;var Bt=zpp_nape.geom.ZPP_SimpleEvent=function(){this.next=null,this.node=null,this.segment2=null,this.segment=null,this.vertex=null,this.type=0};Bt.__name__=["zpp_nape","geom","ZPP_SimpleEvent"],Bt.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},Bt.less_xy=function(e,t){return e.vertex.x<t.vertex.x||!(e.vertex.x>t.vertex.x)&&(e.vertex.y<t.vertex.y||!(e.vertex.y>t.vertex.y)&&e.type<t.type)},Bt.get=function(e){var t;return null==Bt.zpp_pool?t=new Bt:(t=Bt.zpp_pool,Bt.zpp_pool=t.next,t.next=null),t.vertex=e,t},Bt.prototype.type=null,Bt.prototype.vertex=null,Bt.prototype.segment=null,Bt.prototype.segment2=null,Bt.prototype.node=null,Bt.prototype.next=null,Bt.prototype.free=function(){this.vertex=null,this.segment=this.segment2=null,this.node=null},Bt.prototype.alloc=function(){},Bt.prototype.__class__=Bt;var Lt=zpp_nape.geom.ZPP_SimpleSweep=function(){this.tree=null,this.sweepx=0,null==Xn.zpp_pool?this.tree=new Xn:(this.tree=Xn.zpp_pool,Xn.zpp_pool=this.tree.next,this.tree.next=null),this.tree.lt=$(this,this.edge_lt),this.tree.swapped=$(this,this.swap_nodes)};Lt.__name__=["zpp_nape","geom","ZPP_SimpleSweep"],Lt.prototype.sweepx=null,Lt.prototype.tree=null,Lt.prototype.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},Lt.prototype.edge_lt=function(e,t){var i,n=0,r=0,o=0,a=0;if(e.left==t.left&&e.right==t.right)return!1;if(e.left==t.right)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.left.y:e.right.y>t.left.y:(i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.left.x-e.left.x,a=t.left.y-e.left.y,(i?r*o-n*a:a*n-o*r)<0);if(e.right==t.left)return!(t.left.x==t.right.x?t.left.y<t.right.y?t.left.y>e.left.y:t.right.y>e.left.y:(i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.left.x-t.left.x,a=e.left.y-t.left.y,(i?r*o-n*a:a*n-o*r)<0));if(e.left==t.left)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.right.y:e.right.y>t.right.y:(i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.right.x-e.left.x,a=t.right.y-e.left.y,(i?r*o-n*a:a*n-o*r)<0);if(e.right==t.right)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.left.y:e.right.y>t.left.y:(i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.left.x-e.left.x,a=t.left.y-e.left.y,(i?r*o-n*a:a*n-o*r)<0);if(e.left.x==e.right.x){if(t.left.x==t.right.x)return(e.left.y<e.right.y?e.right:e.left).y>(t.left.y<t.right.y?t.right:t.left).y;i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.left.x-t.left.x,a=e.left.y-t.left.y;var s=i?r*o-n*a:a*n-o*r;return i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.right.x-t.left.x,a=e.right.y-t.left.y,0<=s*(i?r*o-n*a:a*n-o*r)?0<=s:this.sweepx>=e.left.x}if(t.left.x==t.right.x){i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.left.x-e.left.x,a=t.left.y-e.left.y;var p=i?r*o-n*a:a*n-o*r;return i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.right.x-e.left.x,a=t.right.y-e.left.y,0<=p*(i?r*o-n*a:a*n-o*r)?p<0:this.sweepx<t.left.x}i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.left.x-e.left.x,a=t.left.y-e.left.y;var l=(i?r*o-n*a:a*n-o*r)<0;if(i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.right.x-e.left.x,a=t.right.y-e.left.y,l==(i?r*o-n*a:a*n-o*r)<0)return l;i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.left.x-t.left.x,a=e.left.y-t.left.y;var h=0<=(i?r*o-n*a:a*n-o*r);return i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.right.x-t.left.x,a=e.right.y-t.left.y,h==0<=(i?r*o-n*a:a*n-o*r)?h:(this.sweepx-e.left.x)/(e.right.x-e.left.x)*(e.right.y-e.left.y)+e.left.y>(this.sweepx-t.left.x)/(t.right.x-t.left.x)*(t.right.y-t.left.y)+t.left.y},Lt.prototype.clear=function(){this.tree.clear()},Lt.prototype.add=function(e){e.node=this.tree.insert(e);var t=this.tree.successor_node(e.node),i=this.tree.predecessor_node(e.node);return null!=t&&(e.next=t.data,t.data.prev=e),null!=i&&(e.prev=i.data,i.data.next=e),e},Lt.prototype.remove=function(e){var t=this.tree.successor_node(e.node),i=this.tree.predecessor_node(e.node);null!=t&&(t.data.prev=e.prev),null!=i&&(i.data.next=e.next),this.tree.remove_node(e.node),e.node=null},Lt.prototype.intersect=function(e,t){if(null==e||null==t)return!1;if(e.left==t.left||e.left==t.right||e.right==t.left||e.right==t.right)return!1;var i=(t.left.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(t.left.y-e.left.y),n=(t.right.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(t.right.y-e.left.y);if(0<i*n)return!1;var r=(e.left.x-t.left.x)*(t.right.y-t.left.y)-(t.right.x-t.left.x)*(e.left.y-t.left.y),o=(e.right.x-t.left.x)*(t.right.y-t.left.y)-(t.right.x-t.left.x)*(e.right.y-t.left.y);return!(0<r*o)},Lt.prototype.intersection=function(e,t){if(null==e||null==t)return null;if(e.left==t.left||e.left==t.right||e.right==t.left||e.right==t.right)return null;var i,n;i=e.right.x-e.left.x,n=e.right.y-e.left.y;var r,o;r=t.right.x-t.left.x;var a=(o=t.right.y-t.left.y)*i-r*n;if(0==a)return null;a=1/a;var s,p,l=(o*(s=t.left.x-e.left.x)-r*(p=t.left.y-e.left.y))*a;if(l<0||1<l)return null;var h,u,d=(n*s-i*p)*a;if(d<0||1<d)return null;if(0==d||1==d||0==l||1==l)h=0==d?t.left:1==d?t.right:0==l?e.left:e.right;else{var c,_=.5*(e.left.x+i*l+t.left.x+r*d),y=.5*(e.left.y+n*l+t.left.y+o*d);null==Et.zpp_pool?c=new Et:(c=Et.zpp_pool,Et.zpp_pool=c.next,c.next=null),c.x=_,c.y=y,h=c}null==Bt.zpp_pool?u=new Bt:(u=Bt.zpp_pool,Bt.zpp_pool=u.next,u.next=null),u.vertex=h;var x=u;return x.type=0,x.segment=e,x.segment2=t,x},Lt.prototype.__class__=Lt;var Dt=zpp_nape.geom.ZPP_Simple=function(){};Dt.__name__=["zpp_nape","geom","ZPP_Simple"],Dt.decompose=function(e,t){null==Dt.sweep&&(Dt.sweep=new Lt,Dt.inthash=new _i),null==Dt.vertices&&(null==Wn.zpp_pool?Dt.vertices=new Wn:(Dt.vertices=Wn.zpp_pool,Wn.zpp_pool=Dt.vertices.next,Dt.vertices.next=null),Dt.vertices.lt=Et.less_xy,Dt.vertices.swapped=Et.swap_nodes),null==Dt.queue&&(null==qn.zpp_pool?Dt.queue=new qn:(Dt.queue=qn.zpp_pool,qn.zpp_pool=Dt.queue.next,Dt.queue.next=null),Dt.queue.lt=Bt.less_xy,Dt.queue.swapped=Bt.swap_nodes);var i,n=null,r=null;if(null!=e)for(var o=e;;){var a,s=o,p=s.x,l=s.y;null==Et.zpp_pool?a=new Et:(a=Et.zpp_pool,Et.zpp_pool=a.next,a.next=null),a.x=p,a.y=l;for(var h=a,u=Dt.vertices.parent;null!=u;)if(Dt.vertices.lt(h,u.data))u=u.prev;else{if(!Dt.vertices.lt(u.data,h))break;u=u.next}var d=u;if(null!=d){var c=h;c.links.clear(),c.node=null,c.forced=!1,c.next=Et.zpp_pool,Et.zpp_pool=c,h=d.data}else h.node=Dt.vertices.insert(h);if(null!=r){var _;null==Bt.zpp_pool?_=new Bt:(_=Bt.zpp_pool,Bt.zpp_pool=_.next,_.next=null),_.vertex=r;var y,x=_;null==Bt.zpp_pool?y=new Bt:(y=Bt.zpp_pool,Bt.zpp_pool=y.next,y.next=null),y.vertex=h;var m,f=y;m=Bt.less_xy(x,f)?(x.type=1,f.type=2,It.get(r,h)):(x.type=2,f.type=1,It.get(h,r)),x.segment=f.segment=m,Dt.queue.insert(x),Dt.queue.insert(f),r.links.insert(h),h.links.insert(r)}if(r=h,null==n&&(n=h),(o=o.next)==e)break}null==Bt.zpp_pool?i=new Bt:(i=Bt.zpp_pool,Bt.zpp_pool=i.next,i.next=null),i.vertex=r;var v,g=i;null==Bt.zpp_pool?v=new Bt:(v=Bt.zpp_pool,Bt.zpp_pool=v.next,v.next=null),v.vertex=n;var z,b=v;for(z=Bt.less_xy(g,b)?(g.type=1,b.type=2,It.get(r,n)):(g.type=2,b.type=1,It.get(n,r)),g.segment=b.segment=z,Dt.queue.insert(g),Dt.queue.insert(b),r.links.insert(n),n.links.insert(r),null==Dt.ints&&(null==qn.zpp_pool?Dt.ints=new qn:(Dt.ints=qn.zpp_pool,qn.zpp_pool=Dt.ints.next,Dt.ints.next=null),Dt.ints.lt=Bt.less_xy);!Dt.queue.empty();){var w=Dt.queue.pop_front();if(Dt.sweep.sweepx=w.vertex.x,1==w.type){var S=w.segment;if(Dt.sweep.add(S),null!=S.next&&null!=S&&!(S.next.id<S.id?Dt.inthash.has(S.next.id,S.id):Dt.inthash.has(S.id,S.next.id))){var C=Dt.sweep.intersection(S.next,S);if(null!=C)if(C.vertex.x>=Dt.sweep.sweepx){for(var M=Dt.queue.parent;null!=M;)if(Dt.queue.lt(C,M.data))M=M.prev;else{if(!Dt.queue.lt(M.data,C))break;M=M.next}if(null==M){for(var P=Dt.ints.parent;null!=P;)if(Dt.ints.lt(C,P.data))P=P.prev;else{if(!Dt.ints.lt(P.data,C))break;P=P.next}var k=P;if(null!=k){var T=C.vertex;T.links.clear(),T.node=null,T.forced=!1,T.next=Et.zpp_pool,Et.zpp_pool=T,C.vertex=k.data.vertex,k.data=C,Dt.queue.insert(C)}else Dt.queue.insert(C),Dt.ints.insert(C);if(S.next.id<S.id){var G,O=S.next.id,A=S.id;null==ci.zpp_pool?G=new ci:(G=ci.zpp_pool,ci.zpp_pool=G.next,G.next=null),G.id=O,G.di=A;var E=G;E.value=!0,Dt.inthash.add(E)}else{var I,B=S.id,L=S.next.id;null==ci.zpp_pool?I=new ci:(I=ci.zpp_pool,ci.zpp_pool=I.next,I.next=null),I.id=B,I.di=L;var D=I;D.value=!0,Dt.inthash.add(D)}}else{var R=C.vertex;R.links.clear(),R.node=null,R.forced=!1,R.next=Et.zpp_pool,Et.zpp_pool=R,C.vertex=null,C.segment=C.segment2=null,C.node=null,C.next=Bt.zpp_pool,Bt.zpp_pool=C}}else{var F=C.vertex;F.links.clear(),F.node=null,F.forced=!1,F.next=Et.zpp_pool,Et.zpp_pool=F,C.vertex=null,C.segment=C.segment2=null,C.node=null,C.next=Bt.zpp_pool,Bt.zpp_pool=C}}if(null!=S&&null!=S.prev&&!(S.id<S.prev.id?Dt.inthash.has(S.id,S.prev.id):Dt.inthash.has(S.prev.id,S.id))){var j=Dt.sweep.intersection(S,S.prev);if(null!=j)if(j.vertex.x>=Dt.sweep.sweepx){for(var N=Dt.queue.parent;null!=N;)if(Dt.queue.lt(j,N.data))N=N.prev;else{if(!Dt.queue.lt(N.data,j))break;N=N.next}if(null==N){for(var U=Dt.ints.parent;null!=U;)if(Dt.ints.lt(j,U.data))U=U.prev;else{if(!Dt.ints.lt(U.data,j))break;U=U.next}var H=U;if(null!=H){var V=j.vertex;V.links.clear(),V.node=null,V.forced=!1,V.next=Et.zpp_pool,Et.zpp_pool=V,j.vertex=H.data.vertex,H.data=j,Dt.queue.insert(j)}else Dt.queue.insert(j),Dt.ints.insert(j);if(S.id<S.prev.id){var W,X=S.id,q=S.prev.id;null==ci.zpp_pool?W=new ci:(W=ci.zpp_pool,ci.zpp_pool=W.next,W.next=null),W.id=X,W.di=q;var Y=W;Y.value=!0,Dt.inthash.add(Y)}else{var Z,K=S.prev.id,J=S.id;null==ci.zpp_pool?Z=new ci:(Z=ci.zpp_pool,ci.zpp_pool=Z.next,Z.next=null),Z.id=K,Z.di=J;var Q=Z;Q.value=!0,Dt.inthash.add(Q)}}else{var $=j.vertex;$.links.clear(),$.node=null,$.forced=!1,$.next=Et.zpp_pool,Et.zpp_pool=$,j.vertex=null,j.segment=j.segment2=null,j.node=null,j.next=Bt.zpp_pool,Bt.zpp_pool=j}}else{var ee=j.vertex;ee.links.clear(),ee.node=null,ee.forced=!1,ee.next=Et.zpp_pool,Et.zpp_pool=ee,j.vertex=null,j.segment=j.segment2=null,j.node=null,j.next=Bt.zpp_pool,Bt.zpp_pool=j}}}else if(2==w.type){var te=w.segment;if(null!=te.node){var ie=te.next,ne=te.prev;if(Dt.sweep.remove(te),te.left=te.right=null,te.prev=null,te.node=null,te.vertices.clear(),te.next=It.zpp_pool,It.zpp_pool=te,null!=ie&&null!=ne&&!(ie.id<ne.id?Dt.inthash.has(ie.id,ne.id):Dt.inthash.has(ne.id,ie.id))){var re=Dt.sweep.intersection(ie,ne);if(null!=re)if(re.vertex.x>=Dt.sweep.sweepx){for(var oe=Dt.queue.parent;null!=oe;)if(Dt.queue.lt(re,oe.data))oe=oe.prev;else{if(!Dt.queue.lt(oe.data,re))break;oe=oe.next}if(null==oe){for(var ae=Dt.ints.parent;null!=ae;)if(Dt.ints.lt(re,ae.data))ae=ae.prev;else{if(!Dt.ints.lt(ae.data,re))break;ae=ae.next}var se=ae;if(null!=se){var pe=re.vertex;pe.links.clear(),pe.node=null,pe.forced=!1,pe.next=Et.zpp_pool,Et.zpp_pool=pe,re.vertex=se.data.vertex,se.data=re,Dt.queue.insert(re)}else Dt.queue.insert(re),Dt.ints.insert(re);if(ie.id<ne.id){var le,he=ie.id,ue=ne.id;null==ci.zpp_pool?le=new ci:(le=ci.zpp_pool,ci.zpp_pool=le.next,le.next=null),le.id=he,le.di=ue;var de=le;de.value=!0,Dt.inthash.add(de)}else{var ce,_e=ne.id,ye=ie.id;null==ci.zpp_pool?ce=new ci:(ce=ci.zpp_pool,ci.zpp_pool=ce.next,ce.next=null),ce.id=_e,ce.di=ye;var xe=ce;xe.value=!0,Dt.inthash.add(xe)}}else{var me=re.vertex;me.links.clear(),me.node=null,me.forced=!1,me.next=Et.zpp_pool,Et.zpp_pool=me,re.vertex=null,re.segment=re.segment2=null,re.node=null,re.next=Bt.zpp_pool,Bt.zpp_pool=re}}else{var fe=re.vertex;fe.links.clear(),fe.node=null,fe.forced=!1,fe.next=Et.zpp_pool,Et.zpp_pool=fe,re.vertex=null,re.segment=re.segment2=null,re.node=null,re.next=Bt.zpp_pool,Bt.zpp_pool=re}}}}else{var ve=w.vertex,ge=null==ve.node,ze=w.segment,be=w.segment2;if(be.next!=ze){var we=ze;ze=be,be=we}for(var Se=ze.vertices.parent;null!=Se;)if(ze.vertices.lt(ve,Se.data))Se=Se.prev;else{if(!ze.vertices.lt(Se.data,ve))break;Se=Se.next}for(var Ce=null==Se,Me=be.vertices.parent;null!=Me;)if(be.vertices.lt(ve,Me.data))Me=Me.prev;else{if(!be.vertices.lt(Me.data,ve))break;Me=Me.next}var Pe=null==Me;if(Ce){var ke=ze.vertices.insert(ve),Te=ve==ze.left?ve:ze.vertices.predecessor_node(ke).data,Ge=ve==ze.right?ve:ze.vertices.successor_node(ke).data;Te.links.remove(Ge),ve!=Te&&Te.links.insert(ve),Ge.links.remove(Te),ve!=Ge&&Ge.links.insert(ve),ve!=Te&&ve.links.insert(Te),ve!=Ge&&ve.links.insert(Ge)}if(Pe){var Oe=be.vertices.insert(ve),Ae=ve==be.left?ve:be.vertices.predecessor_node(Oe).data,Ee=ve==be.right?ve:be.vertices.successor_node(Oe).data;Ae.links.remove(Ee),ve!=Ae&&Ae.links.insert(ve),Ee.links.remove(Ae),ve!=Ee&&Ee.links.insert(ve),ve!=Ae&&ve.links.insert(Ae),ve!=Ee&&ve.links.insert(Ee)}if(ge&&(ve.node=Dt.vertices.insert(ve)),ve.forced=!0,ge){var Ie=ze.node,Be=be.node;Ie.data=be,(Be.data=ze).node=Be,be.node=Ie,be.next=ze.next,ze.next=be,ze.prev=be.prev,null!=(be.prev=ze).prev&&(ze.prev.next=ze),null!=be.next&&(be.next.prev=be)}if(null!=be.next&&null!=be&&!(be.next.id<be.id?Dt.inthash.has(be.next.id,be.id):Dt.inthash.has(be.id,be.next.id))){var Le=Dt.sweep.intersection(be.next,be);if(null!=Le)if(Le.vertex.x>=Dt.sweep.sweepx){for(var De=Dt.queue.parent;null!=De;)if(Dt.queue.lt(Le,De.data))De=De.prev;else{if(!Dt.queue.lt(De.data,Le))break;De=De.next}if(null==De){for(var Re=Dt.ints.parent;null!=Re;)if(Dt.ints.lt(Le,Re.data))Re=Re.prev;else{if(!Dt.ints.lt(Re.data,Le))break;Re=Re.next}var Fe=Re;if(null!=Fe){var je=Le.vertex;je.links.clear(),je.node=null,je.forced=!1,je.next=Et.zpp_pool,Et.zpp_pool=je,Le.vertex=Fe.data.vertex,Fe.data=Le,Dt.queue.insert(Le)}else Dt.queue.insert(Le),Dt.ints.insert(Le);if(be.next.id<be.id){var Ne,Ue=be.next.id,He=be.id;null==ci.zpp_pool?Ne=new ci:(Ne=ci.zpp_pool,ci.zpp_pool=Ne.next,Ne.next=null),Ne.id=Ue,Ne.di=He;var Ve=Ne;Ve.value=!0,Dt.inthash.add(Ve)}else{var We,Xe=be.id,qe=be.next.id;null==ci.zpp_pool?We=new ci:(We=ci.zpp_pool,ci.zpp_pool=We.next,We.next=null),We.id=Xe,We.di=qe;var Ye=We;Ye.value=!0,Dt.inthash.add(Ye)}}else{var Ze=Le.vertex;Ze.links.clear(),Ze.node=null,Ze.forced=!1,Ze.next=Et.zpp_pool,Et.zpp_pool=Ze,Le.vertex=null,Le.segment=Le.segment2=null,Le.node=null,Le.next=Bt.zpp_pool,Bt.zpp_pool=Le}}else{var Ke=Le.vertex;Ke.links.clear(),Ke.node=null,Ke.forced=!1,Ke.next=Et.zpp_pool,Et.zpp_pool=Ke,Le.vertex=null,Le.segment=Le.segment2=null,Le.node=null,Le.next=Bt.zpp_pool,Bt.zpp_pool=Le}}if(null!=ze&&null!=ze.prev&&!(ze.id<ze.prev.id?Dt.inthash.has(ze.id,ze.prev.id):Dt.inthash.has(ze.prev.id,ze.id))){var Je=Dt.sweep.intersection(ze,ze.prev);if(null!=Je)if(Je.vertex.x>=Dt.sweep.sweepx){for(var Qe=Dt.queue.parent;null!=Qe;)if(Dt.queue.lt(Je,Qe.data))Qe=Qe.prev;else{if(!Dt.queue.lt(Qe.data,Je))break;Qe=Qe.next}if(null==Qe){for(var $e=Dt.ints.parent;null!=$e;)if(Dt.ints.lt(Je,$e.data))$e=$e.prev;else{if(!Dt.ints.lt($e.data,Je))break;$e=$e.next}var et=$e;if(null!=et){var tt=Je.vertex;tt.links.clear(),tt.node=null,tt.forced=!1,tt.next=Et.zpp_pool,Et.zpp_pool=tt,Je.vertex=et.data.vertex,et.data=Je,Dt.queue.insert(Je)}else Dt.queue.insert(Je),Dt.ints.insert(Je);if(ze.id<ze.prev.id){var it,nt=ze.id,rt=ze.prev.id;null==ci.zpp_pool?it=new ci:(it=ci.zpp_pool,ci.zpp_pool=it.next,it.next=null),it.id=nt,it.di=rt;var ot=it;ot.value=!0,Dt.inthash.add(ot)}else{var at,st=ze.prev.id,pt=ze.id;null==ci.zpp_pool?at=new ci:(at=ci.zpp_pool,ci.zpp_pool=at.next,at.next=null),at.id=st,at.di=pt;var lt=at;lt.value=!0,Dt.inthash.add(lt)}}else{var ht=Je.vertex;ht.links.clear(),ht.node=null,ht.forced=!1,ht.next=Et.zpp_pool,Et.zpp_pool=ht,Je.vertex=null,Je.segment=Je.segment2=null,Je.node=null,Je.next=Bt.zpp_pool,Bt.zpp_pool=Je}}else{var ut=Je.vertex;ut.links.clear(),ut.node=null,ut.forced=!1,ut.next=Et.zpp_pool,Et.zpp_pool=ut,Je.vertex=null,Je.segment=Je.segment2=null,Je.node=null,Je.next=Bt.zpp_pool,Bt.zpp_pool=Je}}Dt.ints.remove(w)}w.vertex=null,w.segment=w.segment2=null,w.node=null,w.next=Bt.zpp_pool,Bt.zpp_pool=w}for(var dt=0,ct=Dt.inthash.table.length;dt<ct;){var _t=dt++,yt=Dt.inthash.table[_t];if(null!=yt){for(;null!=yt;){var xt=yt.hnext;yt.hnext=null;var mt=yt;mt.next=ci.zpp_pool,ci.zpp_pool=mt,yt=xt}Dt.inthash.table[_t]=null}}for(null==t&&(t=new Si);!Dt.vertices.empty();)Dt.clip_polygon(Dt.vertices,t);return t},Dt.clip_polygon=function(e,t){var i,n,r=null,o=e.first(),a=o,s=o.links.parent,p=null==s.prev?s.next:s.prev,l=s.data,h=p.data;i=o.x-l.x,n=o.y-l.y;var u;u=h.x-o.x,(h.y-o.y)*i-u*n<0&&(h=l);var d,c=o.x,_=o.y;null==cr.zpp_pool?d=new cr:(d=cr.zpp_pool,cr.zpp_pool=d.next,d.next=null),d.forced=!1,d.x=c,d.y=_;var y=d;for(null==r?r=y.prev=y.next=y:(y.prev=r,y.next=r.next,r.next.prev=y,r.next=y),(r=y).forced=o.forced;;){if(o.links.remove(h),h.links.remove(o),h==a){if(o.links.empty()){e.remove(o);var x=o;x.links.clear(),x.node=null,x.forced=!1,x.next=Et.zpp_pool,Et.zpp_pool=x}break}var m,f=h.x,v=h.y;null==cr.zpp_pool?m=new cr:(m=cr.zpp_pool,cr.zpp_pool=m.next,m.next=null),m.forced=!1,m.x=f,m.y=v;var g=m;if(null==r?r=g.prev=g.next=g:(g.prev=r,g.next=r.next,r.next.prev=g,r.next=g),(r=g).forced=h.forced,h.links.singular()){if(o.links.empty()){e.remove(o);var z=o;z.links.clear(),z.node=null,z.forced=!1,z.next=Et.zpp_pool,Et.zpp_pool=z}h=(o=h).links.parent.data}else{var b=null,w=0;if(!h.links.empty()){for(var S=h.links.parent;null!=S.prev;)S=S.prev;for(;null!=S;){var C=S.data;if(null==b){b=C;var M,P;M=h.x-o.x,P=h.y-o.y;var k;k=C.x-h.x,w=(C.y-h.y)*M-k*P}else{var T,G;T=h.x-o.x,G=h.y-o.y;var O;O=C.x-h.x;var A=(C.y-h.y)*T-O*G;if(0<A&&w<=0)b=C,w=A;else if(0<=w*A){var E,I;E=h.x-C.x,I=h.y-C.y;var B;B=b.x-h.x,0<(b.y-h.y)*E-B*I&&(b=C,w=A)}}if(null!=S.next)for(S=S.next;null!=S.prev;)S=S.prev;else{for(;null!=S.parent&&S==S.parent.next;)S=S.parent;S=S.parent}}}if(o.links.empty()){e.remove(o);var L=o;L.links.clear(),L.node=null,L.forced=!1,L.next=Et.zpp_pool,Et.zpp_pool=L}o=h,h=b}}e.remove(a),a.links.clear(),a.node=null,a.forced=!1,a.next=Et.zpp_pool,Et.zpp_pool=a,t.add(r)},Dt.isSimple=function(e){null==Dt.sweep&&(Dt.sweep=new Lt,Dt.inthash=new _i);var t=Dt.list_vertices;if(null==t&&(t=Dt.list_vertices=new Ci),null!=e)for(var i=e;;){var n,r=i,o=r.x,a=r.y;if(null==Et.zpp_pool?n=new Et:(n=Et.zpp_pool,Et.zpp_pool=n.next,n.next=null),n.x=o,n.y=a,t.add(n),(i=i.next)==e)break}var s=Dt.list_queue;null==s&&(s=Dt.list_queue=new Mi);var p=t.head,l=p.elt;for(p=p.next;null!=p;){var h,u=p.elt;null==Bt.zpp_pool?h=new Bt:(h=Bt.zpp_pool,Bt.zpp_pool=h.next,h.next=null),h.vertex=l;var d,c=s.add(h);null==Bt.zpp_pool?d=new Bt:(d=Bt.zpp_pool,Bt.zpp_pool=d.next,d.next=null),d.vertex=u;var _,y=s.add(d);_=Bt.less_xy(c,y)?(c.type=1,y.type=2,It.get(l,u)):(c.type=2,y.type=1,It.get(u,l)),c.segment=y.segment=_,l=u,p=p.next}var x,m=t.head.elt;null==Bt.zpp_pool?x=new Bt:(x=Bt.zpp_pool,Bt.zpp_pool=x.next,x.next=null),x.vertex=l;var f,v=s.add(x);null==Bt.zpp_pool?f=new Bt:(f=Bt.zpp_pool,Bt.zpp_pool=f.next,f.next=null),f.vertex=m;var g,z=s.add(f);g=Bt.less_xy(v,z)?(v.type=1,z.type=2,It.get(l,m)):(v.type=2,z.type=1,It.get(m,l)),v.segment=z.segment=g;var b=s;if(null!=b.head&&null!=b.head.next){for(var w,S,C,M=b.head,P=null,k=null,T=null,G=null,O=1;;){for(w=0,k=M,P=M=null;null!=k;){for(++w,T=k,S=0,C=O;null!=T&&S<O;)++S,T=T.next;for(;0<S||0<C&&null!=T;)0==S?(T=(G=T).next,--C):0==C||null==T?(k=(G=k).next,--S):Bt.less_xy(k.elt,T.elt)?(k=(G=k).next,--S):(T=(G=T).next,--C),null!=P?P.next=G:M=G,P=G;k=T}if(P.next=null,O<<=1,!(1<w))break}b.head=M,b.modified=!0,b.pushmod=!0}for(var A=!0;null!=s.head;){var E=s.pop_unsafe(),I=E.segment;if(1==E.type){if(Dt.sweep.add(I),Dt.sweep.intersect(I,I.next)||Dt.sweep.intersect(I,I.prev)){A=!1;break}}else if(2==E.type){if(Dt.sweep.intersect(I.prev,I.next)){A=!1;break}Dt.sweep.remove(I),I.left=I.right=null,I.prev=null,I.node=null,I.vertices.clear(),I.next=It.zpp_pool,It.zpp_pool=I}E.vertex=null,E.segment=E.segment2=null,E.node=null,E.next=Bt.zpp_pool,Bt.zpp_pool=E}for(;null!=s.head;){var B=s.pop_unsafe();if(2==B.type){var L=B.segment;L.left=L.right=null,L.prev=null,L.node=null,L.vertices.clear(),L.next=It.zpp_pool,It.zpp_pool=L}B.vertex=null,B.segment=B.segment2=null,B.node=null,B.next=Bt.zpp_pool,Bt.zpp_pool=B}for(Dt.sweep.clear();null!=t.head;){var D=t.pop_unsafe();D.links.clear(),D.node=null,D.forced=!1,D.next=Et.zpp_pool,Et.zpp_pool=D}return A},Dt.prototype.__class__=Dt;var Rt=zpp_nape.geom.ZPP_SimplifyV=function(){this.forced=!1,this.flag=!1,this.prev=null,this.next=null,this.y=0,this.x=0};Rt.__name__=["zpp_nape","geom","ZPP_SimplifyV"],Rt.get=function(e){var t;return null==Rt.zpp_pool?t=new Rt:(t=Rt.zpp_pool,Rt.zpp_pool=t.next,t.next=null),t.x=e.x,t.y=e.y,t.flag=!1,t},Rt.prototype.x=null,Rt.prototype.y=null,Rt.prototype.next=null,Rt.prototype.prev=null,Rt.prototype.flag=null,Rt.prototype.forced=null,Rt.prototype.free=function(){},Rt.prototype.alloc=function(){},Rt.prototype.__class__=Rt;var Ft=zpp_nape.geom.ZPP_SimplifyP=function(){this.max=null,this.min=null,this.next=null};Ft.__name__=["zpp_nape","geom","ZPP_SimplifyP"],Ft.get=function(e,t){var i;return null==Ft.zpp_pool?i=new Ft:(i=Ft.zpp_pool,Ft.zpp_pool=i.next,i.next=null),i.min=e,i.max=t,i},Ft.prototype.next=null,Ft.prototype.min=null,Ft.prototype.max=null,Ft.prototype.free=function(){this.min=this.max=null},Ft.prototype.alloc=function(){},Ft.prototype.__class__=Ft;var jt=zpp_nape.geom.ZPP_Simplify=function(){};jt.__name__=["zpp_nape","geom","ZPP_Simplify"],jt.lessval=function(e,t){return e.x-t.x+(e.y-t.y)},jt.less=function(e,t){return e.x-t.x+(e.y-t.y)<0},jt.distance=function(e,t,i){var n,r;n=i.x-t.x,r=i.y-t.y;var o=0,a=0;if(o=e.x-t.x,a=e.y-t.y,n*n+r*r==0)return o*o+a*a;var s=(o*n+a*r)/(n*n+r*r);if(s<=0)return o*o+a*a;if(1<=s){var p,l,h=e.x,u=e.y;return(p=h-i.x)*p+(l=u-i.y)*l}return(o-=n*s)*o+(a-=r*s)*a},jt.simplify=function(e,t){var i=null,n=null,r=null;t*=t,null==jt.stack&&(jt.stack=new bi);for(var o,a=null,s=null,p=e;;){var l;null==Rt.zpp_pool?l=new Rt:(l=Rt.zpp_pool,Rt.zpp_pool=l.next,l.next=null),l.x=p.x,l.y=p.y,l.flag=!1;var h=l;if(h.forced=p.forced,h.forced){var u;if(h.flag=!0,null!=a)null==Ft.zpp_pool?u=new Ft:(u=Ft.zpp_pool,Ft.zpp_pool=u.next,u.next=null),u.min=a,u.max=h,jt.stack.add(u);else s=h;a=h}if(null==i?i=h.prev=h.next=h:(h.prev=i,h.next=i.next,i.next.prev=h,i.next=h),i=h,null==n?r=n=h:(h.x-n.x+(h.y-n.y)<0&&(n=h),r.x-h.x+(r.y-h.y)<0&&(r=h)),(p=p.next)==e)break}if(null==jt.stack.head)if(null==s){var d,c;n.flag=r.flag=!0,null==Ft.zpp_pool?d=new Ft:(d=Ft.zpp_pool,Ft.zpp_pool=d.next,d.next=null),d.min=n,d.max=r,jt.stack.add(d),null==Ft.zpp_pool?c=new Ft:(c=Ft.zpp_pool,Ft.zpp_pool=c.next,c.next=null),c.min=r,c.max=n,jt.stack.add(c)}else{var _=n.x-s.x+(n.y-s.y);_<0&&(_=-_);var y,x,m,f,v=r.x-s.x+(r.y-s.y);if(v<0&&(v=-v),v<_)n.flag=s.flag=!0,null==Ft.zpp_pool?y=new Ft:(y=Ft.zpp_pool,Ft.zpp_pool=y.next,y.next=null),y.min=n,y.max=s,jt.stack.add(y),null==Ft.zpp_pool?x=new Ft:(x=Ft.zpp_pool,Ft.zpp_pool=x.next,x.next=null),x.min=s,x.max=n,jt.stack.add(x);else r.flag=s.flag=!0,null==Ft.zpp_pool?m=new Ft:(m=Ft.zpp_pool,Ft.zpp_pool=m.next,m.next=null),m.min=r,m.max=s,jt.stack.add(m),null==Ft.zpp_pool?f=new Ft:(f=Ft.zpp_pool,Ft.zpp_pool=f.next,f.next=null),f.min=s,f.max=r,jt.stack.add(f)}else null==Ft.zpp_pool?o=new Ft:(o=Ft.zpp_pool,Ft.zpp_pool=o.next,o.next=null),o.min=a,o.max=s,jt.stack.add(o);for(;null!=jt.stack.head;){var g=jt.stack.pop_unsafe(),z=g.min,b=g.max;g.min=g.max=null,g.next=Ft.zpp_pool,Ft.zpp_pool=g;for(var w,S,C=t,M=null,P=z.next;P!=b;){var k=jt.distance(P,z,b);C<k&&(C=k,M=P),P=P.next}if(null!=M)M.flag=!0,null==Ft.zpp_pool?w=new Ft:(w=Ft.zpp_pool,Ft.zpp_pool=w.next,w.next=null),w.min=z,w.max=M,jt.stack.add(w),null==Ft.zpp_pool?S=new Ft:(S=Ft.zpp_pool,Ft.zpp_pool=S.next,S.next=null),S.min=M,S.max=b,jt.stack.add(S)}for(var T=null;null!=i;){if(i.flag){var G,O=i.x,A=i.y;null==cr.zpp_pool?G=new cr:(G=cr.zpp_pool,cr.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=O,G.y=A;var E=G;null==T?T=E.prev=E.next=E:(E.prev=T,E.next=T.next,T.next.prev=E,T.next=E),(T=E).forced=i.forced}if(null!=i&&i.prev==i){i.next=i.prev=null;var I=i;I.next=Rt.zpp_pool,Rt.zpp_pool=I,i=i=null}else{var B=i.next;i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null;var L=i;L.next=Rt.zpp_pool,Rt.zpp_pool=L,i=null,i=B}}return T},jt.prototype.__class__=jt;var Ht=zpp_nape.geom.ZPP_ToiEvent=function(){this.kinematic=!1,this.failed=!1,this.slipped=!1,this.axis=null,this.c2=null,this.c1=null,this.frozen2=!1,this.frozen1=!1,this.arbiter=null,this.s2=null,this.s1=null,this.toi=0,this.next=null,this.c1=new ep,this.c2=new ep,this.axis=new ep};Ht.__name__=["zpp_nape","geom","ZPP_ToiEvent"],Ht.prototype.next=null,Ht.prototype.alloc=function(){this.failed=!1,this.s1=this.s2=null,this.arbiter=null},Ht.prototype.free=function(){},Ht.prototype.toi=null,Ht.prototype.s1=null,Ht.prototype.s2=null,Ht.prototype.arbiter=null,Ht.prototype.frozen1=null,Ht.prototype.frozen2=null,Ht.prototype.c1=null,Ht.prototype.c2=null,Ht.prototype.axis=null,Ht.prototype.slipped=null,Ht.prototype.failed=null,Ht.prototype.kinematic=null,Ht.prototype.__class__=Ht;var Vt=zpp_nape.geom.ZPP_SweepDistance=function(){};Vt.__name__=["zpp_nape","geom","ZPP_SweepDistance"],Vt.dynamicSweep=function(e,t,i,n,r){null==r&&(r=!1);var o,a,s=e.s1,p=e.s2,l=s.body,h=p.body;o=h.velx-l.velx,a=h.vely-l.vely;var u=l.angvel;u<0&&(u=-u);var d=h.angvel;d<0&&(d=-d);var c=s.sweepCoef*u+p.sweepCoef*d;if(!r&&!e.kinematic&&o*o+a*a<Qs.dynamicSweepLinearThreshold*Qs.dynamicSweepLinearThreshold&&c<Qs.dynamicSweepAngularThreshold)return e.toi=-1,void(e.failed=!0);for(var _=e.c1,y=e.c2,x=e.axis,m=i,f=0;;){var v=m*t,g=v-l.sweepTime;if(0!=g&&(l.sweepTime=v,l.posx+=l.velx*g,l.posy+=l.vely*g,0!=l.angvel)){var z=l.sweep_angvel*g;if(l.rot+=z,1e-4<z*z)l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot);else{var b=z*z,w=1-.5*b,S=1-b*b/8,C=(w*l.axisx+z*l.axisy)*S;l.axisy=(w*l.axisy-z*l.axisx)*S,l.axisx=C}}if(0==s.type)s.worldCOMx=l.posx+(l.axisy*s.localCOMx-l.axisx*s.localCOMy),s.worldCOMy=l.posy+(s.localCOMx*l.axisx+s.localCOMy*l.axisy);else{for(var M=s.polygon,P=M.lverts.next,k=M.gverts.next;null!=k;){var T=k,G=P;P=P.next,T.x=l.posx+(l.axisy*G.x-l.axisx*G.y),T.y=l.posy+(G.x*l.axisx+G.y*l.axisy),k=k.next}var O=M.edges.head,A=M.gverts.next,E=A;for(A=A.next;null!=A;){var I=A,B=O.elt;O=O.next,B.gnormx=l.axisy*B.lnormx-l.axisx*B.lnormy,B.gnormy=B.lnormx*l.axisx+B.lnormy*l.axisy,B.gprojection=l.posx*B.gnormx+l.posy*B.gnormy+B.lprojection,B.tp0=E.y*B.gnormx-E.x*B.gnormy,B.tp1=I.y*B.gnormx-I.x*B.gnormy,E=I,A=A.next}var L=M.gverts.next,D=O.elt;D.gnormx=l.axisy*D.lnormx-l.axisx*D.lnormy,D.gnormy=D.lnormx*l.axisx+D.lnormy*l.axisy,D.gprojection=l.posx*D.gnormx+l.posy*D.gnormy+D.lprojection,D.tp0=E.y*D.gnormx-E.x*D.gnormy,D.tp1=L.y*D.gnormx-L.x*D.gnormy}var R=m*t,F=R-h.sweepTime;if(0!=F&&(h.sweepTime=R,h.posx+=h.velx*F,h.posy+=h.vely*F,0!=h.angvel)){var j=h.sweep_angvel*F;if(h.rot+=j,1e-4<j*j)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var N=j*j,U=1-.5*N,H=1-N*N/8,V=(U*h.axisx+j*h.axisy)*H;h.axisy=(U*h.axisy-j*h.axisx)*H,h.axisx=V}}if(0==p.type)p.worldCOMx=h.posx+(h.axisy*p.localCOMx-h.axisx*p.localCOMy),p.worldCOMy=h.posy+(p.localCOMx*h.axisx+p.localCOMy*h.axisy);else{for(var W=p.polygon,X=W.lverts.next,q=W.gverts.next;null!=q;){var Y=q,Z=X;X=X.next,Y.x=h.posx+(h.axisy*Z.x-h.axisx*Z.y),Y.y=h.posy+(Z.x*h.axisx+Z.y*h.axisy),q=q.next}var K=W.edges.head,J=W.gverts.next,Q=J;for(J=J.next;null!=J;){var $=J,ee=K.elt;K=K.next,ee.gnormx=h.axisy*ee.lnormx-h.axisx*ee.lnormy,ee.gnormy=ee.lnormx*h.axisx+ee.lnormy*h.axisy,ee.gprojection=h.posx*ee.gnormx+h.posy*ee.gnormy+ee.lprojection,ee.tp0=Q.y*ee.gnormx-Q.x*ee.gnormy,ee.tp1=$.y*ee.gnormx-$.x*ee.gnormy,Q=$,J=J.next}var te=W.gverts.next,ie=K.elt;ie.gnormx=h.axisy*ie.lnormx-h.axisx*ie.lnormy,ie.gnormy=ie.lnormx*h.axisx+ie.lnormy*h.axisy,ie.gprojection=h.posx*ie.gnormx+h.posy*ie.gnormy+ie.lprojection,ie.tp0=Q.y*ie.gnormx-Q.x*ie.gnormy,ie.tp1=te.y*ie.gnormx-te.x*ie.gnormy}var ne,re=s,oe=p,ae=_,se=y;if(0==s.type&&0==p.type){var pe,le=s.circle,he=p.circle,ue=0,de=0;ue=he.worldCOMx-le.worldCOMx,de=he.worldCOMy-le.worldCOMy;var ce=Math.sqrt(ue*ue+de*de);if((pe=ce-(le.radius+he.radius))<1e100){if(0==ce)ue=1,de=0;else{var _e=1/ce;ue*=_e,de*=_e}var ye=le.radius;_.x=le.worldCOMx+ue*ye,_.y=le.worldCOMy+de*ye;var xe=-he.radius;y.x=he.worldCOMx+ue*xe,y.y=he.worldCOMy+de*xe,x.x=ue,x.y=de}ne=pe}else{var me=!1;if(0==s.type&&1==p.type)re=p,oe=s,ae=y,se=_,me=!0;if(1==re.type&&0==oe.type){for(var fe=re.polygon,ve=oe.circle,ge=-1e100,ze=null,be=fe.edges.head;null!=be;){var we=be.elt,Se=we.gnormx*ve.worldCOMx+we.gnormy*ve.worldCOMy-we.gprojection-ve.radius;if(1e100<Se){ge=Se;break}0<Se?ge<Se&&(ge=Se,ze=we):ge<0&&ge<Se&&(ge=Se,ze=we),be=be.next}if(ge<1e100){var Ce=ze.gp0,Me=ze.gp1,Pe=ve.worldCOMy*ze.gnormx-ve.worldCOMx*ze.gnormy;if(Pe<=Ce.y*ze.gnormx-Ce.x*ze.gnormy){var ke=0,Te=0;ke=ve.worldCOMx-Ce.x,Te=ve.worldCOMy-Ce.y;var Ge=Math.sqrt(ke*ke+Te*Te);if((ge=Ge-ve.radius)<1e100){if(0==Ge)ke=1,Te=0;else{var Oe=1/Ge;ke*=Oe,Te*=Oe}ae.x=Ce.x+0*ke,ae.y=Ce.y+0*Te;var Ae=-ve.radius;se.x=ve.worldCOMx+ke*Ae,se.y=ve.worldCOMy+Te*Ae,x.x=ke,x.y=Te}}else if(Pe>=Me.y*ze.gnormx-Me.x*ze.gnormy){var Ee=0,Ie=0;Ee=ve.worldCOMx-Me.x,Ie=ve.worldCOMy-Me.y;var Be=Math.sqrt(Ee*Ee+Ie*Ie);if((ge=Be-ve.radius)<1e100){if(0==Be)Ee=1,Ie=0;else{var Le=1/Be;Ee*=Le,Ie*=Le}ae.x=Me.x+0*Ee,ae.y=Me.y+0*Ie;var De=-ve.radius;se.x=ve.worldCOMx+Ee*De,se.y=ve.worldCOMy+Ie*De,x.x=Ee,x.y=Ie}}else{var Re=-ve.radius;se.x=ve.worldCOMx+ze.gnormx*Re,se.y=ve.worldCOMy+ze.gnormy*Re;var Fe=-ge;ae.x=se.x+ze.gnormx*Fe,ae.y=se.y+ze.gnormy*Fe,x.x=ze.gnormx,x.y=ze.gnormy}}me&&(x.x=-x.x,x.y=-x.y),ne=ge}else{for(var je=re.polygon,Ne=oe.polygon,Ue=-1e100,He=null,Ve=null,We=0,Xe=je.edges.head;null!=Xe;){for(var qe=Xe.elt,Ye=1e100,Ze=Ne.gverts.next;null!=Ze;){var Ke=Ze,Je=qe.gnormx*Ke.x+qe.gnormy*Ke.y;Je<Ye&&(Ye=Je),Ze=Ze.next}if(1e100<(Ye-=qe.gprojection)){Ue=Ye;break}0<Ye?Ue<Ye&&(Ue=Ye,He=qe,We=1):Ue<0&&Ue<Ye&&(Ue=Ye,He=qe,We=1),Xe=Xe.next}if(Ue<1e100){for(var Qe=Ne.edges.head;null!=Qe;){for(var $e=Qe.elt,et=1e100,tt=je.gverts.next;null!=tt;){var it=tt,nt=$e.gnormx*it.x+$e.gnormy*it.y;nt<et&&(et=nt),tt=tt.next}if(1e100<(et-=$e.gprojection)){Ue=et;break}0<et?Ue<et&&(Ue=et,Ve=$e,We=2):Ue<0&&Ue<et&&(Ue=et,Ve=$e,We=2),Qe=Qe.next}if(Ue<1e100){var rt,ot;if(1==We)rt=Ne,ot=He;else{rt=je,ot=Ve;var at=ae;ae=se,se=at,me=!me}for(var st=null,pt=1e100,lt=rt.edges.head;null!=lt;){var ht=lt.elt,ut=ot.gnormx*ht.gnormx+ot.gnormy*ht.gnormy;ut<pt&&(pt=ut,st=ht),lt=lt.next}if(me?(x.x=-ot.gnormx,x.y=-ot.gnormy):(x.x=ot.gnormx,x.y=ot.gnormy),0<=Ue){var dt,ct,_t,yt,xt=ot.gp0,mt=ot.gp1,ft=st.gp0,vt=st.gp1,gt=1/((dt=mt.x-xt.x)*dt+(ct=mt.y-xt.y)*ct),zt=1/((_t=vt.x-ft.x)*_t+(yt=vt.y-ft.y)*yt),bt=-(dt*(xt.x-ft.x)+ct*(xt.y-ft.y))*gt,wt=-(dt*(xt.x-vt.x)+ct*(xt.y-vt.y))*gt,St=-(_t*(ft.x-xt.x)+yt*(ft.y-xt.y))*zt,Ct=-(_t*(ft.x-mt.x)+yt*(ft.y-mt.y))*zt;bt<0?bt=0:1<bt&&(bt=1),wt<0?wt=0:1<wt&&(wt=1),St<0?St=0:1<St&&(St=1),Ct<0?Ct=0:1<Ct&&(Ct=1);var Mt,Pt,kt=bt;Mt=xt.x+dt*kt,Pt=xt.y+ct*kt;var Tt,Gt,Ot=wt;Tt=xt.x+dt*Ot,Gt=xt.y+ct*Ot;var At,Et,It=St;At=ft.x+_t*It,Et=ft.y+yt*It;var Bt,Lt,Dt=Ct;Bt=ft.x+_t*Dt,Lt=ft.y+yt*Dt;var Rt,Ft,jt,Nt,Ut,Ht,Vt,Wt,Xt=(Rt=Mt-ft.x)*Rt+(Ft=Pt-ft.y)*Ft,qt=(jt=Tt-vt.x)*jt+(Nt=Gt-vt.y)*Nt,Yt=(Ut=At-xt.x)*Ut+(Ht=Et-xt.y)*Ht,Zt=(Vt=Bt-mt.x)*Vt+(Wt=Lt-mt.y)*Wt,Kt=0,Jt=0,Qt=null;Xt<qt?(Kt=Mt,Jt=Pt,Qt=ft):(Kt=Tt,Jt=Gt,Qt=vt,Xt=qt);var $t=0,ei=0,ti=null;if(Yt<Zt?($t=At,ei=Et,ti=xt):($t=Bt,ei=Lt,ti=mt,Yt=Zt),0!=(Ue=Xt<Yt?(ae.x=Kt,ae.y=Jt,se.x=Qt.x,se.y=Qt.y,Math.sqrt(Xt)):(se.x=$t,se.y=ei,ae.x=ti.x,ae.y=ti.y,Math.sqrt(Yt)))){x.x=se.x-ae.x,x.y=se.y-ae.y;var ii=1/Ue;x.x*=ii,x.y*=ii,me&&(x.x=-x.x,x.y=-x.y)}ne=Ue}else{var ni=0,ri=0;ni=st.gp0.x,ri=st.gp0.y;var oi,ai,si=0,pi=0;oi=(si=st.gp1.x)-ni,ai=(pi=st.gp1.y)-ri;var li=ot.gnormy*ni-ot.gnormx*ri,hi=ot.gnormy*si-ot.gnormx*pi,ui=1/(hi-li),di=(-ot.tp1-li)*ui;di>Qs.epsilon&&(ni+=oi*di,ri+=ai*di);var ci=(-ot.tp0-hi)*ui;ci<-Qs.epsilon&&(si+=oi*ci,pi+=ai*ci);var _i=ni*ot.gnormx+ri*ot.gnormy-ot.gprojection,yi=si*ot.gnormx+pi*ot.gnormy-ot.gprojection;if(_i<yi){se.x=ni,se.y=ri;var xi=-_i;ae.x=se.x+ot.gnormx*xi,ae.y=se.y+ot.gnormy*xi,ne=_i}else{se.x=si,se.y=pi;var mi=-yi;ae.x=se.x+ot.gnormx*mi,ae.y=se.y+ot.gnormy*mi,ne=yi}}}else ne=1e100}else ne=1e100}}var fi=ne+n,vi=o*x.x+a*x.y;if(fi<Qs.distanceThresholdCCD){if(r)break;var gi,zi;gi=_.x-l.posx,zi=_.y-l.posy;var bi,wi;bi=y.x-h.posx,wi=y.y-h.posy;var Si=vi-l.sweep_angvel*(x.y*gi-x.x*zi)+h.sweep_angvel*(x.y*bi-x.x*wi);if(0<Si&&(e.slipped=!0),Si<=0||fi<.5*Qs.distanceThresholdCCD)break}var Ci=(c-vi)*t;if(Ci<=0){m=-1;break}var Mi=fi/Ci;if(Mi<1e-6&&(Mi=1e-6),1<=(m+=Mi)){var Pi=(m=1)*t,ki=Pi-l.sweepTime;if(0!=ki&&(l.sweepTime=Pi,l.posx+=l.velx*ki,l.posy+=l.vely*ki,0!=l.angvel)){var Ti=l.sweep_angvel*ki;if(l.rot+=Ti,1e-4<Ti*Ti)l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot);else{var Gi=Ti*Ti,Oi=1-.5*Gi,Ai=1-Gi*Gi/8,Ei=(Oi*l.axisx+Ti*l.axisy)*Ai;l.axisy=(Oi*l.axisy-Ti*l.axisx)*Ai,l.axisx=Ei}}if(0==s.type)s.worldCOMx=l.posx+(l.axisy*s.localCOMx-l.axisx*s.localCOMy),s.worldCOMy=l.posy+(s.localCOMx*l.axisx+s.localCOMy*l.axisy);else{for(var Ii=s.polygon,Bi=Ii.lverts.next,Li=Ii.gverts.next;null!=Li;){var Di=Li,Ri=Bi;Bi=Bi.next,Di.x=l.posx+(l.axisy*Ri.x-l.axisx*Ri.y),Di.y=l.posy+(Ri.x*l.axisx+Ri.y*l.axisy),Li=Li.next}var Fi=Ii.edges.head,ji=Ii.gverts.next,Ni=ji;for(ji=ji.next;null!=ji;){var Ui=ji,Hi=Fi.elt;Fi=Fi.next,Hi.gnormx=l.axisy*Hi.lnormx-l.axisx*Hi.lnormy,Hi.gnormy=Hi.lnormx*l.axisx+Hi.lnormy*l.axisy,Hi.gprojection=l.posx*Hi.gnormx+l.posy*Hi.gnormy+Hi.lprojection,Hi.tp0=Ni.y*Hi.gnormx-Ni.x*Hi.gnormy,Hi.tp1=Ui.y*Hi.gnormx-Ui.x*Hi.gnormy,Ni=Ui,ji=ji.next}var Vi=Ii.gverts.next,Wi=Fi.elt;Wi.gnormx=l.axisy*Wi.lnormx-l.axisx*Wi.lnormy,Wi.gnormy=Wi.lnormx*l.axisx+Wi.lnormy*l.axisy,Wi.gprojection=l.posx*Wi.gnormx+l.posy*Wi.gnormy+Wi.lprojection,Wi.tp0=Ni.y*Wi.gnormx-Ni.x*Wi.gnormy,Wi.tp1=Vi.y*Wi.gnormx-Vi.x*Wi.gnormy}var Xi=m*t,qi=Xi-h.sweepTime;if(0!=qi&&(h.sweepTime=Xi,h.posx+=h.velx*qi,h.posy+=h.vely*qi,0!=h.angvel)){var Yi=h.sweep_angvel*qi;if(h.rot+=Yi,1e-4<Yi*Yi)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var Zi=Yi*Yi,Ki=1-.5*Zi,Ji=1-Zi*Zi/8,Qi=(Ki*h.axisx+Yi*h.axisy)*Ji;h.axisy=(Ki*h.axisy-Yi*h.axisx)*Ji,h.axisx=Qi}}if(0==p.type)p.worldCOMx=h.posx+(h.axisy*p.localCOMx-h.axisx*p.localCOMy),p.worldCOMy=h.posy+(p.localCOMx*h.axisx+p.localCOMy*h.axisy);else{for(var $i=p.polygon,en=$i.lverts.next,tn=$i.gverts.next;null!=tn;){var nn=tn,rn=en;en=en.next,nn.x=h.posx+(h.axisy*rn.x-h.axisx*rn.y),nn.y=h.posy+(rn.x*h.axisx+rn.y*h.axisy),tn=tn.next}var on=$i.edges.head,an=$i.gverts.next,sn=an;for(an=an.next;null!=an;){var pn=an,ln=on.elt;on=on.next,ln.gnormx=h.axisy*ln.lnormx-h.axisx*ln.lnormy,ln.gnormy=ln.lnormx*h.axisx+ln.lnormy*h.axisy,ln.gprojection=h.posx*ln.gnormx+h.posy*ln.gnormy+ln.lprojection,ln.tp0=sn.y*ln.gnormx-sn.x*ln.gnormy,ln.tp1=pn.y*ln.gnormx-pn.x*ln.gnormy,sn=pn,an=an.next}var hn=$i.gverts.next,un=on.elt;un.gnormx=h.axisy*un.lnormx-h.axisx*un.lnormy,un.gnormy=un.lnormx*h.axisx+un.lnormy*h.axisy,un.gprojection=h.posx*un.gnormx+h.posy*un.gnormy+un.lprojection,un.tp0=sn.y*un.gnormx-sn.x*un.gnormy,un.tp1=hn.y*un.gnormx-hn.x*un.gnormy}var dn,cn=s,_n=p,yn=_,xn=y;if(0==s.type&&0==p.type){var mn,fn=s.circle,vn=p.circle,gn=0,zn=0;gn=vn.worldCOMx-fn.worldCOMx,zn=vn.worldCOMy-fn.worldCOMy;var bn=Math.sqrt(gn*gn+zn*zn);if((mn=bn-(fn.radius+vn.radius))<1e100){if(0==bn)gn=1,zn=0;else{var wn=1/bn;gn*=wn,zn*=wn}var Sn=fn.radius;_.x=fn.worldCOMx+gn*Sn,_.y=fn.worldCOMy+zn*Sn;var Cn=-vn.radius;y.x=vn.worldCOMx+gn*Cn,y.y=vn.worldCOMy+zn*Cn,x.x=gn,x.y=zn}dn=mn}else{var Mn=!1;if(0==s.type&&1==p.type)cn=p,_n=s,yn=y,xn=_,Mn=!0;if(1==cn.type&&0==_n.type){for(var Pn=cn.polygon,kn=_n.circle,Tn=-1e100,Gn=null,On=Pn.edges.head;null!=On;){var An=On.elt,En=An.gnormx*kn.worldCOMx+An.gnormy*kn.worldCOMy-An.gprojection-kn.radius;if(1e100<En){Tn=En;break}0<En?Tn<En&&(Tn=En,Gn=An):Tn<0&&Tn<En&&(Tn=En,Gn=An),On=On.next}if(Tn<1e100){var In=Gn.gp0,Bn=Gn.gp1,Ln=kn.worldCOMy*Gn.gnormx-kn.worldCOMx*Gn.gnormy;if(Ln<=In.y*Gn.gnormx-In.x*Gn.gnormy){var Dn=0,Rn=0;Dn=kn.worldCOMx-In.x,Rn=kn.worldCOMy-In.y;var Fn=Math.sqrt(Dn*Dn+Rn*Rn);if((Tn=Fn-kn.radius)<1e100){if(0==Fn)Dn=1,Rn=0;else{var jn=1/Fn;Dn*=jn,Rn*=jn}yn.x=In.x+0*Dn,yn.y=In.y+0*Rn;var Nn=-kn.radius;xn.x=kn.worldCOMx+Dn*Nn,xn.y=kn.worldCOMy+Rn*Nn,x.x=Dn,x.y=Rn}}else if(Ln>=Bn.y*Gn.gnormx-Bn.x*Gn.gnormy){var Un=0,Hn=0;Un=kn.worldCOMx-Bn.x,Hn=kn.worldCOMy-Bn.y;var Vn=Math.sqrt(Un*Un+Hn*Hn);if((Tn=Vn-kn.radius)<1e100){if(0==Vn)Un=1,Hn=0;else{var Wn=1/Vn;Un*=Wn,Hn*=Wn}yn.x=Bn.x+0*Un,yn.y=Bn.y+0*Hn;var Xn=-kn.radius;xn.x=kn.worldCOMx+Un*Xn,xn.y=kn.worldCOMy+Hn*Xn,x.x=Un,x.y=Hn}}else{var qn=-kn.radius;xn.x=kn.worldCOMx+Gn.gnormx*qn,xn.y=kn.worldCOMy+Gn.gnormy*qn;var Yn=-Tn;yn.x=xn.x+Gn.gnormx*Yn,yn.y=xn.y+Gn.gnormy*Yn,x.x=Gn.gnormx,x.y=Gn.gnormy}}Mn&&(x.x=-x.x,x.y=-x.y),dn=Tn}else{for(var Zn=cn.polygon,Kn=_n.polygon,Jn=-1e100,Qn=null,$n=null,er=0,tr=Zn.edges.head;null!=tr;){for(var ir=tr.elt,nr=1e100,rr=Kn.gverts.next;null!=rr;){var or=rr,ar=ir.gnormx*or.x+ir.gnormy*or.y;ar<nr&&(nr=ar),rr=rr.next}if(1e100<(nr-=ir.gprojection)){Jn=nr;break}0<nr?Jn<nr&&(Jn=nr,Qn=ir,er=1):Jn<0&&Jn<nr&&(Jn=nr,Qn=ir,er=1),tr=tr.next}if(Jn<1e100){for(var sr=Kn.edges.head;null!=sr;){for(var pr=sr.elt,lr=1e100,hr=Zn.gverts.next;null!=hr;){var ur=hr,dr=pr.gnormx*ur.x+pr.gnormy*ur.y;dr<lr&&(lr=dr),hr=hr.next}if(1e100<(lr-=pr.gprojection)){Jn=lr;break}0<lr?Jn<lr&&(Jn=lr,$n=pr,er=2):Jn<0&&Jn<lr&&(Jn=lr,$n=pr,er=2),sr=sr.next}if(Jn<1e100){var cr,_r;if(1==er)cr=Kn,_r=Qn;else{cr=Zn,_r=$n;var yr=yn;yn=xn,xn=yr,Mn=!Mn}for(var xr=null,mr=1e100,fr=cr.edges.head;null!=fr;){var vr=fr.elt,gr=_r.gnormx*vr.gnormx+_r.gnormy*vr.gnormy;gr<mr&&(mr=gr,xr=vr),fr=fr.next}if(Mn?(x.x=-_r.gnormx,x.y=-_r.gnormy):(x.x=_r.gnormx,x.y=_r.gnormy),0<=Jn){var zr,br,wr,Sr,Cr=_r.gp0,Mr=_r.gp1,Pr=xr.gp0,kr=xr.gp1,Tr=1/((zr=Mr.x-Cr.x)*zr+(br=Mr.y-Cr.y)*br),Gr=1/((wr=kr.x-Pr.x)*wr+(Sr=kr.y-Pr.y)*Sr),Or=-(zr*(Cr.x-Pr.x)+br*(Cr.y-Pr.y))*Tr,Ar=-(zr*(Cr.x-kr.x)+br*(Cr.y-kr.y))*Tr,Er=-(wr*(Pr.x-Cr.x)+Sr*(Pr.y-Cr.y))*Gr,Ir=-(wr*(Pr.x-Mr.x)+Sr*(Pr.y-Mr.y))*Gr;Or<0?Or=0:1<Or&&(Or=1),Ar<0?Ar=0:1<Ar&&(Ar=1),Er<0?Er=0:1<Er&&(Er=1),Ir<0?Ir=0:1<Ir&&(Ir=1);var Br,Lr,Dr=Or;Br=Cr.x+zr*Dr,Lr=Cr.y+br*Dr;var Rr,Fr,jr=Ar;Rr=Cr.x+zr*jr,Fr=Cr.y+br*jr;var Nr,Ur,Hr=Er;Nr=Pr.x+wr*Hr,Ur=Pr.y+Sr*Hr;var Vr,Wr,Xr=Ir;Vr=Pr.x+wr*Xr,Wr=Pr.y+Sr*Xr;var qr,Yr,Zr,Kr,Jr,Qr,$r,eo,to=(qr=Br-Pr.x)*qr+(Yr=Lr-Pr.y)*Yr,io=(Zr=Rr-kr.x)*Zr+(Kr=Fr-kr.y)*Kr,no=(Jr=Nr-Cr.x)*Jr+(Qr=Ur-Cr.y)*Qr,ro=($r=Vr-Mr.x)*$r+(eo=Wr-Mr.y)*eo,oo=0,ao=0,so=null;to<io?(oo=Br,ao=Lr,so=Pr):(oo=Rr,ao=Fr,so=kr,to=io);var po=0,lo=0,ho=null;if(no<ro?(po=Nr,lo=Ur,ho=Cr):(po=Vr,lo=Wr,ho=Mr,no=ro),0!=(Jn=to<no?(yn.x=oo,yn.y=ao,xn.x=so.x,xn.y=so.y,Math.sqrt(to)):(xn.x=po,xn.y=lo,yn.x=ho.x,yn.y=ho.y,Math.sqrt(no)))){x.x=xn.x-yn.x,x.y=xn.y-yn.y;var uo=1/Jn;x.x*=uo,x.y*=uo,Mn&&(x.x=-x.x,x.y=-x.y)}dn=Jn}else{var co=0,_o=0;co=xr.gp0.x,_o=xr.gp0.y;var yo,xo,mo=0,fo=0;yo=(mo=xr.gp1.x)-co,xo=(fo=xr.gp1.y)-_o;var vo=_r.gnormy*co-_r.gnormx*_o,go=_r.gnormy*mo-_r.gnormx*fo,zo=1/(go-vo),bo=(-_r.tp1-vo)*zo;bo>Qs.epsilon&&(co+=yo*bo,_o+=xo*bo);var wo=(-_r.tp0-go)*zo;wo<-Qs.epsilon&&(mo+=yo*wo,fo+=xo*wo);var So=co*_r.gnormx+_o*_r.gnormy-_r.gprojection,Co=mo*_r.gnormx+fo*_r.gnormy-_r.gprojection;if(So<Co){xn.x=co,xn.y=_o;var Mo=-So;yn.x=xn.x+_r.gnormx*Mo,yn.y=xn.y+_r.gnormy*Mo,dn=So}else{xn.x=mo,xn.y=fo;var Po=-Co;yn.x=xn.x+_r.gnormx*Po,yn.y=xn.y+_r.gnormy*Po,dn=Co}}}else dn=1e100}else dn=1e100}}var ko=dn+n,To=o*x.x+a*x.y;if(ko<Qs.distanceThresholdCCD){if(r)break;var Go,Oo;Go=_.x-l.posx,Oo=_.y-l.posy;var Ao,Eo;Ao=y.x-h.posx,Eo=y.y-h.posy;var Io=To-l.sweep_angvel*(x.y*Go-x.x*Oo)+h.sweep_angvel*(x.y*Ao-x.x*Eo);if(0<Io&&(e.slipped=!0),Io<=0||ko<.5*Qs.distanceThresholdCCD)break}m=-1;break}if(40<=++f){n<fi&&(e.failed=!0);break}}e.toi=m},Vt.staticSweep=function(e,t,i,n){var r,o,a=e.s1,s=e.s2,p=a.body;r=-p.velx,o=-p.vely;var l=p.sweep_angvel;l<0&&(l=-l);for(var h=a.sweepCoef*l,u=e.c1,d=e.c2,c=e.axis,_=i,y=0;;){var x=_*t,m=x-p.sweepTime;if(0!=m&&(p.sweepTime=x,p.posx+=p.velx*m,p.posy+=p.vely*m,0!=p.angvel)){var f=p.sweep_angvel*m;if(p.rot+=f,1e-4<f*f)p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot);else{var v=f*f,g=1-.5*v,z=1-v*v/8,b=(g*p.axisx+f*p.axisy)*z;p.axisy=(g*p.axisy-f*p.axisx)*z,p.axisx=b}}if(0==a.type)a.worldCOMx=p.posx+(p.axisy*a.localCOMx-p.axisx*a.localCOMy),a.worldCOMy=p.posy+(a.localCOMx*p.axisx+a.localCOMy*p.axisy);else{for(var w=a.polygon,S=w.lverts.next,C=w.gverts.next;null!=C;){var M=C,P=S;S=S.next,M.x=p.posx+(p.axisy*P.x-p.axisx*P.y),M.y=p.posy+(P.x*p.axisx+P.y*p.axisy),C=C.next}var k=w.edges.head,T=w.gverts.next,G=T;for(T=T.next;null!=T;){var O=T,A=k.elt;k=k.next,A.gnormx=p.axisy*A.lnormx-p.axisx*A.lnormy,A.gnormy=A.lnormx*p.axisx+A.lnormy*p.axisy,A.gprojection=p.posx*A.gnormx+p.posy*A.gnormy+A.lprojection,A.tp0=G.y*A.gnormx-G.x*A.gnormy,A.tp1=O.y*A.gnormx-O.x*A.gnormy,G=O,T=T.next}var E=w.gverts.next,I=k.elt;I.gnormx=p.axisy*I.lnormx-p.axisx*I.lnormy,I.gnormy=I.lnormx*p.axisx+I.lnormy*p.axisy,I.gprojection=p.posx*I.gnormx+p.posy*I.gnormy+I.lprojection,I.tp0=G.y*I.gnormx-G.x*I.gnormy,I.tp1=E.y*I.gnormx-E.x*I.gnormy}var B,L=a,D=s,R=u,F=d;if(0==a.type&&0==s.type){var j,N=a.circle,U=s.circle,H=0,V=0;H=U.worldCOMx-N.worldCOMx,V=U.worldCOMy-N.worldCOMy;var W=Math.sqrt(H*H+V*V);if((j=W-(N.radius+U.radius))<1e100){if(0==W)H=1,V=0;else{var X=1/W;H*=X,V*=X}var q=N.radius;u.x=N.worldCOMx+H*q,u.y=N.worldCOMy+V*q;var Y=-U.radius;d.x=U.worldCOMx+H*Y,d.y=U.worldCOMy+V*Y,c.x=H,c.y=V}B=j}else{var Z=!1;if(0==a.type&&1==s.type)L=s,D=a,R=d,F=u,Z=!0;if(1==L.type&&0==D.type){for(var K=L.polygon,J=D.circle,Q=-1e100,$=null,ee=K.edges.head;null!=ee;){var te=ee.elt,ie=te.gnormx*J.worldCOMx+te.gnormy*J.worldCOMy-te.gprojection-J.radius;if(1e100<ie){Q=ie;break}0<ie?Q<ie&&(Q=ie,$=te):Q<0&&Q<ie&&(Q=ie,$=te),ee=ee.next}if(Q<1e100){var ne=$.gp0,re=$.gp1,oe=J.worldCOMy*$.gnormx-J.worldCOMx*$.gnormy;if(oe<=ne.y*$.gnormx-ne.x*$.gnormy){var ae=0,se=0;ae=J.worldCOMx-ne.x,se=J.worldCOMy-ne.y;var pe=Math.sqrt(ae*ae+se*se);if((Q=pe-J.radius)<1e100){if(0==pe)ae=1,se=0;else{var le=1/pe;ae*=le,se*=le}R.x=ne.x+0*ae,R.y=ne.y+0*se;var he=-J.radius;F.x=J.worldCOMx+ae*he,F.y=J.worldCOMy+se*he,c.x=ae,c.y=se}}else if(oe>=re.y*$.gnormx-re.x*$.gnormy){var ue=0,de=0;ue=J.worldCOMx-re.x,de=J.worldCOMy-re.y;var ce=Math.sqrt(ue*ue+de*de);if((Q=ce-J.radius)<1e100){if(0==ce)ue=1,de=0;else{var _e=1/ce;ue*=_e,de*=_e}R.x=re.x+0*ue,R.y=re.y+0*de;var ye=-J.radius;F.x=J.worldCOMx+ue*ye,F.y=J.worldCOMy+de*ye,c.x=ue,c.y=de}}else{var xe=-J.radius;F.x=J.worldCOMx+$.gnormx*xe,F.y=J.worldCOMy+$.gnormy*xe;var me=-Q;R.x=F.x+$.gnormx*me,R.y=F.y+$.gnormy*me,c.x=$.gnormx,c.y=$.gnormy}}Z&&(c.x=-c.x,c.y=-c.y),B=Q}else{for(var fe=L.polygon,ve=D.polygon,ge=-1e100,ze=null,be=null,we=0,Se=fe.edges.head;null!=Se;){for(var Ce=Se.elt,Me=1e100,Pe=ve.gverts.next;null!=Pe;){var ke=Pe,Te=Ce.gnormx*ke.x+Ce.gnormy*ke.y;Te<Me&&(Me=Te),Pe=Pe.next}if(1e100<(Me-=Ce.gprojection)){ge=Me;break}0<Me?ge<Me&&(ge=Me,ze=Ce,we=1):ge<0&&ge<Me&&(ge=Me,ze=Ce,we=1),Se=Se.next}if(ge<1e100){for(var Ge=ve.edges.head;null!=Ge;){for(var Oe=Ge.elt,Ae=1e100,Ee=fe.gverts.next;null!=Ee;){var Ie=Ee,Be=Oe.gnormx*Ie.x+Oe.gnormy*Ie.y;Be<Ae&&(Ae=Be),Ee=Ee.next}if(1e100<(Ae-=Oe.gprojection)){ge=Ae;break}0<Ae?ge<Ae&&(ge=Ae,be=Oe,we=2):ge<0&&ge<Ae&&(ge=Ae,be=Oe,we=2),Ge=Ge.next}if(ge<1e100){var Le,De;if(1==we)Le=ve,De=ze;else{Le=fe,De=be;var Re=R;R=F,F=Re,Z=!Z}for(var Fe=null,je=1e100,Ne=Le.edges.head;null!=Ne;){var Ue=Ne.elt,He=De.gnormx*Ue.gnormx+De.gnormy*Ue.gnormy;He<je&&(je=He,Fe=Ue),Ne=Ne.next}if(Z?(c.x=-De.gnormx,c.y=-De.gnormy):(c.x=De.gnormx,c.y=De.gnormy),0<=ge){var Ve,We,Xe,qe,Ye=De.gp0,Ze=De.gp1,Ke=Fe.gp0,Je=Fe.gp1,Qe=1/((Ve=Ze.x-Ye.x)*Ve+(We=Ze.y-Ye.y)*We),$e=1/((Xe=Je.x-Ke.x)*Xe+(qe=Je.y-Ke.y)*qe),et=-(Ve*(Ye.x-Ke.x)+We*(Ye.y-Ke.y))*Qe,tt=-(Ve*(Ye.x-Je.x)+We*(Ye.y-Je.y))*Qe,it=-(Xe*(Ke.x-Ye.x)+qe*(Ke.y-Ye.y))*$e,nt=-(Xe*(Ke.x-Ze.x)+qe*(Ke.y-Ze.y))*$e;et<0?et=0:1<et&&(et=1),tt<0?tt=0:1<tt&&(tt=1),it<0?it=0:1<it&&(it=1),nt<0?nt=0:1<nt&&(nt=1);var rt,ot,at=et;rt=Ye.x+Ve*at,ot=Ye.y+We*at;var st,pt,lt=tt;st=Ye.x+Ve*lt,pt=Ye.y+We*lt;var ht,ut,dt=it;ht=Ke.x+Xe*dt,ut=Ke.y+qe*dt;var ct,_t,yt=nt;ct=Ke.x+Xe*yt,_t=Ke.y+qe*yt;var xt,mt,ft,vt,gt,zt,bt,wt,St=(xt=rt-Ke.x)*xt+(mt=ot-Ke.y)*mt,Ct=(ft=st-Je.x)*ft+(vt=pt-Je.y)*vt,Mt=(gt=ht-Ye.x)*gt+(zt=ut-Ye.y)*zt,Pt=(bt=ct-Ze.x)*bt+(wt=_t-Ze.y)*wt,kt=0,Tt=0,Gt=null;St<Ct?(kt=rt,Tt=ot,Gt=Ke):(kt=st,Tt=pt,Gt=Je,St=Ct);var Ot=0,At=0,Et=null;if(Mt<Pt?(Ot=ht,At=ut,Et=Ye):(Ot=ct,At=_t,Et=Ze,Mt=Pt),0!=(ge=St<Mt?(R.x=kt,R.y=Tt,F.x=Gt.x,F.y=Gt.y,Math.sqrt(St)):(F.x=Ot,F.y=At,R.x=Et.x,R.y=Et.y,Math.sqrt(Mt)))){c.x=F.x-R.x,c.y=F.y-R.y;var It=1/ge;c.x*=It,c.y*=It,Z&&(c.x=-c.x,c.y=-c.y)}B=ge}else{var Bt=0,Lt=0;Bt=Fe.gp0.x,Lt=Fe.gp0.y;var Dt,Rt,Ft=0,jt=0;Dt=(Ft=Fe.gp1.x)-Bt,Rt=(jt=Fe.gp1.y)-Lt;var Nt=De.gnormy*Bt-De.gnormx*Lt,Ut=De.gnormy*Ft-De.gnormx*jt,Ht=1/(Ut-Nt),Vt=(-De.tp1-Nt)*Ht;Vt>Qs.epsilon&&(Bt+=Dt*Vt,Lt+=Rt*Vt);var Wt=(-De.tp0-Ut)*Ht;Wt<-Qs.epsilon&&(Ft+=Dt*Wt,jt+=Rt*Wt);var Xt=Bt*De.gnormx+Lt*De.gnormy-De.gprojection,qt=Ft*De.gnormx+jt*De.gnormy-De.gprojection;if(Xt<qt){F.x=Bt,F.y=Lt;var Yt=-Xt;R.x=F.x+De.gnormx*Yt,R.y=F.y+De.gnormy*Yt,B=Xt}else{F.x=Ft,F.y=jt;var Zt=-qt;R.x=F.x+De.gnormx*Zt,R.y=F.y+De.gnormy*Zt,B=qt}}}else B=1e100}else B=1e100}}var Kt=B+n,Jt=r*c.x+o*c.y;if(Kt<Qs.distanceThresholdCCD){var Qt,$t;Qt=u.x-p.posx,$t=u.y-p.posy;var ei=Jt-p.sweep_angvel*(c.y*Qt-c.x*$t);if(0<ei&&(e.slipped=!0),ei<=0||Kt<.5*Qs.distanceThresholdCCD)break}var ti=(h-Jt)*t;if(ti<=0){_=-1;break}var ii=Kt/ti;if(ii<1e-6&&(ii=1e-6),1<=(_+=ii)){var ni=(_=1)*t,ri=ni-p.sweepTime;if(0!=ri&&(p.sweepTime=ni,p.posx+=p.velx*ri,p.posy+=p.vely*ri,0!=p.angvel)){var oi=p.sweep_angvel*ri;if(p.rot+=oi,1e-4<oi*oi)p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot);else{var ai=oi*oi,si=1-.5*ai,pi=1-ai*ai/8,li=(si*p.axisx+oi*p.axisy)*pi;p.axisy=(si*p.axisy-oi*p.axisx)*pi,p.axisx=li}}if(0==a.type)a.worldCOMx=p.posx+(p.axisy*a.localCOMx-p.axisx*a.localCOMy),a.worldCOMy=p.posy+(a.localCOMx*p.axisx+a.localCOMy*p.axisy);else{for(var hi=a.polygon,ui=hi.lverts.next,di=hi.gverts.next;null!=di;){var ci=di,_i=ui;ui=ui.next,ci.x=p.posx+(p.axisy*_i.x-p.axisx*_i.y),ci.y=p.posy+(_i.x*p.axisx+_i.y*p.axisy),di=di.next}var yi=hi.edges.head,xi=hi.gverts.next,mi=xi;for(xi=xi.next;null!=xi;){var fi=xi,vi=yi.elt;yi=yi.next,vi.gnormx=p.axisy*vi.lnormx-p.axisx*vi.lnormy,vi.gnormy=vi.lnormx*p.axisx+vi.lnormy*p.axisy,vi.gprojection=p.posx*vi.gnormx+p.posy*vi.gnormy+vi.lprojection,vi.tp0=mi.y*vi.gnormx-mi.x*vi.gnormy,vi.tp1=fi.y*vi.gnormx-fi.x*vi.gnormy,mi=fi,xi=xi.next}var gi=hi.gverts.next,zi=yi.elt;zi.gnormx=p.axisy*zi.lnormx-p.axisx*zi.lnormy,zi.gnormy=zi.lnormx*p.axisx+zi.lnormy*p.axisy,zi.gprojection=p.posx*zi.gnormx+p.posy*zi.gnormy+zi.lprojection,zi.tp0=mi.y*zi.gnormx-mi.x*zi.gnormy,zi.tp1=gi.y*zi.gnormx-gi.x*zi.gnormy}var bi,wi=a,Si=s,Ci=u,Mi=d;if(0==a.type&&0==s.type){var Pi,ki=a.circle,Ti=s.circle,Gi=0,Oi=0;Gi=Ti.worldCOMx-ki.worldCOMx,Oi=Ti.worldCOMy-ki.worldCOMy;var Ai=Math.sqrt(Gi*Gi+Oi*Oi);if((Pi=Ai-(ki.radius+Ti.radius))<1e100){if(0==Ai)Gi=1,Oi=0;else{var Ei=1/Ai;Gi*=Ei,Oi*=Ei}var Ii=ki.radius;u.x=ki.worldCOMx+Gi*Ii,u.y=ki.worldCOMy+Oi*Ii;var Bi=-Ti.radius;d.x=Ti.worldCOMx+Gi*Bi,d.y=Ti.worldCOMy+Oi*Bi,c.x=Gi,c.y=Oi}bi=Pi}else{var Li=!1;if(0==a.type&&1==s.type)wi=s,Si=a,Ci=d,Mi=u,Li=!0;if(1==wi.type&&0==Si.type){for(var Di=wi.polygon,Ri=Si.circle,Fi=-1e100,ji=null,Ni=Di.edges.head;null!=Ni;){var Ui=Ni.elt,Hi=Ui.gnormx*Ri.worldCOMx+Ui.gnormy*Ri.worldCOMy-Ui.gprojection-Ri.radius;if(1e100<Hi){Fi=Hi;break}0<Hi?Fi<Hi&&(Fi=Hi,ji=Ui):Fi<0&&Fi<Hi&&(Fi=Hi,ji=Ui),Ni=Ni.next}if(Fi<1e100){var Vi=ji.gp0,Wi=ji.gp1,Xi=Ri.worldCOMy*ji.gnormx-Ri.worldCOMx*ji.gnormy;if(Xi<=Vi.y*ji.gnormx-Vi.x*ji.gnormy){var qi=0,Yi=0;qi=Ri.worldCOMx-Vi.x,Yi=Ri.worldCOMy-Vi.y;var Zi=Math.sqrt(qi*qi+Yi*Yi);if((Fi=Zi-Ri.radius)<1e100){if(0==Zi)qi=1,Yi=0;else{var Ki=1/Zi;qi*=Ki,Yi*=Ki}Ci.x=Vi.x+0*qi,Ci.y=Vi.y+0*Yi;var Ji=-Ri.radius;Mi.x=Ri.worldCOMx+qi*Ji,Mi.y=Ri.worldCOMy+Yi*Ji,c.x=qi,c.y=Yi}}else if(Xi>=Wi.y*ji.gnormx-Wi.x*ji.gnormy){var Qi=0,$i=0;Qi=Ri.worldCOMx-Wi.x,$i=Ri.worldCOMy-Wi.y;var en=Math.sqrt(Qi*Qi+$i*$i);if((Fi=en-Ri.radius)<1e100){if(0==en)Qi=1,$i=0;else{var tn=1/en;Qi*=tn,$i*=tn}Ci.x=Wi.x+0*Qi,Ci.y=Wi.y+0*$i;var nn=-Ri.radius;Mi.x=Ri.worldCOMx+Qi*nn,Mi.y=Ri.worldCOMy+$i*nn,c.x=Qi,c.y=$i}}else{var rn=-Ri.radius;Mi.x=Ri.worldCOMx+ji.gnormx*rn,Mi.y=Ri.worldCOMy+ji.gnormy*rn;var on=-Fi;Ci.x=Mi.x+ji.gnormx*on,Ci.y=Mi.y+ji.gnormy*on,c.x=ji.gnormx,c.y=ji.gnormy}}Li&&(c.x=-c.x,c.y=-c.y),bi=Fi}else{for(var an=wi.polygon,sn=Si.polygon,pn=-1e100,ln=null,hn=null,un=0,dn=an.edges.head;null!=dn;){for(var cn=dn.elt,_n=1e100,yn=sn.gverts.next;null!=yn;){var xn=yn,mn=cn.gnormx*xn.x+cn.gnormy*xn.y;mn<_n&&(_n=mn),yn=yn.next}if(1e100<(_n-=cn.gprojection)){pn=_n;break}0<_n?pn<_n&&(pn=_n,ln=cn,un=1):pn<0&&pn<_n&&(pn=_n,ln=cn,un=1),dn=dn.next}if(pn<1e100){for(var fn=sn.edges.head;null!=fn;){for(var vn=fn.elt,gn=1e100,zn=an.gverts.next;null!=zn;){var bn=zn,wn=vn.gnormx*bn.x+vn.gnormy*bn.y;wn<gn&&(gn=wn),zn=zn.next}if(1e100<(gn-=vn.gprojection)){pn=gn;break}0<gn?pn<gn&&(pn=gn,hn=vn,un=2):pn<0&&pn<gn&&(pn=gn,hn=vn,un=2),fn=fn.next}if(pn<1e100){var Sn,Cn;if(1==un)Sn=sn,Cn=ln;else{Sn=an,Cn=hn;var Mn=Ci;Ci=Mi,Mi=Mn,Li=!Li}for(var Pn=null,kn=1e100,Tn=Sn.edges.head;null!=Tn;){var Gn=Tn.elt,On=Cn.gnormx*Gn.gnormx+Cn.gnormy*Gn.gnormy;On<kn&&(kn=On,Pn=Gn),Tn=Tn.next}if(Li?(c.x=-Cn.gnormx,c.y=-Cn.gnormy):(c.x=Cn.gnormx,c.y=Cn.gnormy),0<=pn){var An,En,In,Bn,Ln=Cn.gp0,Dn=Cn.gp1,Rn=Pn.gp0,Fn=Pn.gp1,jn=1/((An=Dn.x-Ln.x)*An+(En=Dn.y-Ln.y)*En),Nn=1/((In=Fn.x-Rn.x)*In+(Bn=Fn.y-Rn.y)*Bn),Un=-(An*(Ln.x-Rn.x)+En*(Ln.y-Rn.y))*jn,Hn=-(An*(Ln.x-Fn.x)+En*(Ln.y-Fn.y))*jn,Vn=-(In*(Rn.x-Ln.x)+Bn*(Rn.y-Ln.y))*Nn,Wn=-(In*(Rn.x-Dn.x)+Bn*(Rn.y-Dn.y))*Nn;Un<0?Un=0:1<Un&&(Un=1),Hn<0?Hn=0:1<Hn&&(Hn=1),Vn<0?Vn=0:1<Vn&&(Vn=1),Wn<0?Wn=0:1<Wn&&(Wn=1);var Xn,qn,Yn=Un;Xn=Ln.x+An*Yn,qn=Ln.y+En*Yn;var Zn,Kn,Jn=Hn;Zn=Ln.x+An*Jn,Kn=Ln.y+En*Jn;var Qn,$n,er=Vn;Qn=Rn.x+In*er,$n=Rn.y+Bn*er;var tr,ir,nr=Wn;tr=Rn.x+In*nr,ir=Rn.y+Bn*nr;var rr,or,ar,sr,pr,lr,hr,ur,dr=(rr=Xn-Rn.x)*rr+(or=qn-Rn.y)*or,cr=(ar=Zn-Fn.x)*ar+(sr=Kn-Fn.y)*sr,_r=(pr=Qn-Ln.x)*pr+(lr=$n-Ln.y)*lr,yr=(hr=tr-Dn.x)*hr+(ur=ir-Dn.y)*ur,xr=0,mr=0,fr=null;dr<cr?(xr=Xn,mr=qn,fr=Rn):(xr=Zn,mr=Kn,fr=Fn,dr=cr);var vr=0,gr=0,zr=null;if(_r<yr?(vr=Qn,gr=$n,zr=Ln):(vr=tr,gr=ir,zr=Dn,_r=yr),0!=(pn=dr<_r?(Ci.x=xr,Ci.y=mr,Mi.x=fr.x,Mi.y=fr.y,Math.sqrt(dr)):(Mi.x=vr,Mi.y=gr,Ci.x=zr.x,Ci.y=zr.y,Math.sqrt(_r)))){c.x=Mi.x-Ci.x,c.y=Mi.y-Ci.y;var br=1/pn;c.x*=br,c.y*=br,Li&&(c.x=-c.x,c.y=-c.y)}bi=pn}else{var wr=0,Sr=0;wr=Pn.gp0.x,Sr=Pn.gp0.y;var Cr,Mr,Pr=0,kr=0;Cr=(Pr=Pn.gp1.x)-wr,Mr=(kr=Pn.gp1.y)-Sr;var Tr=Cn.gnormy*wr-Cn.gnormx*Sr,Gr=Cn.gnormy*Pr-Cn.gnormx*kr,Or=1/(Gr-Tr),Ar=(-Cn.tp1-Tr)*Or;Ar>Qs.epsilon&&(wr+=Cr*Ar,Sr+=Mr*Ar);var Er=(-Cn.tp0-Gr)*Or;Er<-Qs.epsilon&&(Pr+=Cr*Er,kr+=Mr*Er);var Ir=wr*Cn.gnormx+Sr*Cn.gnormy-Cn.gprojection,Br=Pr*Cn.gnormx+kr*Cn.gnormy-Cn.gprojection;if(Ir<Br){Mi.x=wr,Mi.y=Sr;var Lr=-Ir;Ci.x=Mi.x+Cn.gnormx*Lr,Ci.y=Mi.y+Cn.gnormy*Lr,bi=Ir}else{Mi.x=Pr,Mi.y=kr;var Dr=-Br;Ci.x=Mi.x+Cn.gnormx*Dr,Ci.y=Mi.y+Cn.gnormy*Dr,bi=Br}}}else bi=1e100}else bi=1e100}}var Rr=bi+n,Fr=r*c.x+o*c.y;if(Rr<Qs.distanceThresholdCCD){var jr,Nr;jr=u.x-p.posx,Nr=u.y-p.posy;var Ur=Fr-p.sweep_angvel*(c.y*jr-c.x*Nr);if(0<Ur&&(e.slipped=!0),Ur<=0||Rr<.5*Qs.distanceThresholdCCD)break}_=-1;break}if(40<=++y){n<Kt&&(e.failed=!0);break}}e.toi=_},Vt.distanceBody=function(e,t,i,n){var r,o,a;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,null==ep.zpp_pool?o=new ep:(o=ep.zpp_pool,ep.zpp_pool=o.next,o.next=null),o.weak=!1,null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1;for(var s=1e100,p=e.shapes.head;null!=p;){for(var l=p.elt,h=t.shapes.head;null!=h;){var u,d=h.elt,c=l,_=d,y=r,x=o;if(0==l.type&&0==d.type){var m,f=l.circle,v=d.circle,g=0,z=0;g=v.worldCOMx-f.worldCOMx,z=v.worldCOMy-f.worldCOMy;var b=Math.sqrt(g*g+z*z);if((m=b-(f.radius+v.radius))<s){if(0==b)g=1,z=0;else{var w=1/b;g*=w,z*=w}var S=f.radius;y.x=f.worldCOMx+g*S,y.y=f.worldCOMy+z*S;var C=-v.radius;x.x=v.worldCOMx+g*C,x.y=v.worldCOMy+z*C,a.x=g,a.y=z}u=m}else{var M=!1;if(0==l.type&&1==d.type){c=d,_=l;var P=y;y=x,x=P,M=!0}if(1==c.type&&0==_.type){for(var k=c.polygon,T=_.circle,G=-1e100,O=null,A=k.edges.head;null!=A;){var E=A.elt,I=E.gnormx*T.worldCOMx+E.gnormy*T.worldCOMy-E.gprojection-T.radius;if(s<I){G=I;break}0<I?G<I&&(G=I,O=E):G<0&&G<I&&(G=I,O=E),A=A.next}if(G<s){var B=O.gp0,L=O.gp1,D=T.worldCOMy*O.gnormx-T.worldCOMx*O.gnormy;if(D<=B.y*O.gnormx-B.x*O.gnormy){var R=0,F=0;R=T.worldCOMx-B.x,F=T.worldCOMy-B.y;var j=Math.sqrt(R*R+F*F);if((G=j-T.radius)<s){if(0==j)R=1,F=0;else{var N=1/j;R*=N,F*=N}y.x=B.x+0*R,y.y=B.y+0*F;var U=-T.radius;x.x=T.worldCOMx+R*U,x.y=T.worldCOMy+F*U,a.x=R,a.y=F}}else if(D>=L.y*O.gnormx-L.x*O.gnormy){var H=0,V=0;H=T.worldCOMx-L.x,V=T.worldCOMy-L.y;var W=Math.sqrt(H*H+V*V);if((G=W-T.radius)<s){if(0==W)H=1,V=0;else{var X=1/W;H*=X,V*=X}y.x=L.x+0*H,y.y=L.y+0*V;var q=-T.radius;x.x=T.worldCOMx+H*q,x.y=T.worldCOMy+V*q,a.x=H,a.y=V}}else{var Y=-T.radius;x.x=T.worldCOMx+O.gnormx*Y,x.y=T.worldCOMy+O.gnormy*Y;var Z=-G;y.x=x.x+O.gnormx*Z,y.y=x.y+O.gnormy*Z,a.x=O.gnormx,a.y=O.gnormy}}M&&(a.x=-a.x,a.y=-a.y),u=G}else{for(var K=c.polygon,J=_.polygon,Q=-1e100,$=null,ee=null,te=0,ie=K.edges.head;null!=ie;){for(var ne=ie.elt,re=1e100,oe=J.gverts.next;null!=oe;){var ae=oe,se=ne.gnormx*ae.x+ne.gnormy*ae.y;se<re&&(re=se),oe=oe.next}if(s<(re-=ne.gprojection)){Q=re;break}0<re?Q<re&&(Q=re,$=ne,te=1):Q<0&&Q<re&&(Q=re,$=ne,te=1),ie=ie.next}if(Q<s){for(var pe=J.edges.head;null!=pe;){for(var le=pe.elt,he=1e100,ue=K.gverts.next;null!=ue;){var de=ue,ce=le.gnormx*de.x+le.gnormy*de.y;ce<he&&(he=ce),ue=ue.next}if(s<(he-=le.gprojection)){Q=he;break}0<he?Q<he&&(Q=he,ee=le,te=2):Q<0&&Q<he&&(Q=he,ee=le,te=2),pe=pe.next}if(Q<s){var _e,ye;if(1==te)_e=J,ye=$;else{_e=K,ye=ee;var xe=y;y=x,x=xe,M=!M}for(var me=null,fe=1e100,ve=_e.edges.head;null!=ve;){var ge=ve.elt,ze=ye.gnormx*ge.gnormx+ye.gnormy*ge.gnormy;ze<fe&&(fe=ze,me=ge),ve=ve.next}if(M?(a.x=-ye.gnormx,a.y=-ye.gnormy):(a.x=ye.gnormx,a.y=ye.gnormy),0<=Q){var be,we,Se,Ce,Me=ye.gp0,Pe=ye.gp1,ke=me.gp0,Te=me.gp1,Ge=1/((be=Pe.x-Me.x)*be+(we=Pe.y-Me.y)*we),Oe=1/((Se=Te.x-ke.x)*Se+(Ce=Te.y-ke.y)*Ce),Ae=-(be*(Me.x-ke.x)+we*(Me.y-ke.y))*Ge,Ee=-(be*(Me.x-Te.x)+we*(Me.y-Te.y))*Ge,Ie=-(Se*(ke.x-Me.x)+Ce*(ke.y-Me.y))*Oe,Be=-(Se*(ke.x-Pe.x)+Ce*(ke.y-Pe.y))*Oe;Ae<0?Ae=0:1<Ae&&(Ae=1),Ee<0?Ee=0:1<Ee&&(Ee=1),Ie<0?Ie=0:1<Ie&&(Ie=1),Be<0?Be=0:1<Be&&(Be=1);var Le,De,Re=Ae;Le=Me.x+be*Re,De=Me.y+we*Re;var Fe,je,Ne=Ee;Fe=Me.x+be*Ne,je=Me.y+we*Ne;var Ue,He,Ve=Ie;Ue=ke.x+Se*Ve,He=ke.y+Ce*Ve;var We,Xe,qe=Be;We=ke.x+Se*qe,Xe=ke.y+Ce*qe;var Ye,Ze,Ke,Je,Qe,$e,et,tt,it=(Ye=Le-ke.x)*Ye+(Ze=De-ke.y)*Ze,nt=(Ke=Fe-Te.x)*Ke+(Je=je-Te.y)*Je,rt=(Qe=Ue-Me.x)*Qe+($e=He-Me.y)*$e,ot=(et=We-Pe.x)*et+(tt=Xe-Pe.y)*tt,at=0,st=0,pt=null;it<nt?(at=Le,st=De,pt=ke):(at=Fe,st=je,pt=Te,it=nt);var lt=0,ht=0,ut=null;if(rt<ot?(lt=Ue,ht=He,ut=Me):(lt=We,ht=Xe,ut=Pe,rt=ot),0!=(Q=it<rt?(y.x=at,y.y=st,x.x=pt.x,x.y=pt.y,Math.sqrt(it)):(x.x=lt,x.y=ht,y.x=ut.x,y.y=ut.y,Math.sqrt(rt)))){a.x=x.x-y.x,a.y=x.y-y.y;var dt=1/Q;a.x*=dt,a.y*=dt,M&&(a.x=-a.x,a.y=-a.y)}u=Q}else{var ct=0,_t=0;ct=me.gp0.x,_t=me.gp0.y;var yt,xt,mt=0,ft=0;yt=(mt=me.gp1.x)-ct,xt=(ft=me.gp1.y)-_t;var vt=ye.gnormy*ct-ye.gnormx*_t,gt=ye.gnormy*mt-ye.gnormx*ft,zt=1/(gt-vt),bt=(-ye.tp1-vt)*zt;bt>Qs.epsilon&&(ct+=yt*bt,_t+=xt*bt);var wt=(-ye.tp0-gt)*zt;wt<-Qs.epsilon&&(mt+=yt*wt,ft+=xt*wt);var St=ct*ye.gnormx+_t*ye.gnormy-ye.gprojection,Ct=mt*ye.gnormx+ft*ye.gnormy-ye.gprojection;if(St<Ct){x.x=ct,x.y=_t;var Mt=-St;y.x=x.x+ye.gnormx*Mt,y.y=x.y+ye.gnormy*Mt,u=St}else{x.x=mt,x.y=ft;var Pt=-Ct;y.x=x.x+ye.gnormx*Pt,y.y=x.y+ye.gnormy*Pt,u=Ct}}}else u=s}else u=s}}u<s&&(s=u,i.x=r.x,i.y=r.y,n.x=o.x,n.y=o.y),h=h.next}p=p.next}var kt=r;null!=kt.outer&&(kt.outer.zpp_inner=null,kt.outer=null),kt._isimmutable=null,kt._validate=null,kt._invalidate=null,kt.next=ep.zpp_pool,ep.zpp_pool=kt;var Tt=o;null!=Tt.outer&&(Tt.outer.zpp_inner=null,Tt.outer=null),Tt._isimmutable=null,Tt._validate=null,Tt._invalidate=null,Tt.next=ep.zpp_pool,ep.zpp_pool=Tt;var Gt=a;return null!=Gt.outer&&(Gt.outer.zpp_inner=null,Gt.outer=null),Gt._isimmutable=null,Gt._validate=null,Gt._invalidate=null,Gt.next=ep.zpp_pool,ep.zpp_pool=Gt,s},Vt.distance=function(e,t,i,n,r,o){if(null==o&&(o=1e100),0==e.type&&0==t.type){var a,s=e.circle,p=t.circle,l=0,h=0;l=p.worldCOMx-s.worldCOMx,h=p.worldCOMy-s.worldCOMy;var u=Math.sqrt(l*l+h*h);if((a=u-(s.radius+p.radius))<o){if(0==u)l=1,h=0;else{var d=1/u;l*=d,h*=d}var c=s.radius;i.x=s.worldCOMx+l*c,i.y=s.worldCOMy+h*c;var _=-p.radius;n.x=p.worldCOMx+l*_,n.y=p.worldCOMy+h*_,r.x=l,r.y=h}return a}var y=!1;if(0==e.type&&1==t.type){var x=e;e=t,t=x;var m=i;i=n,n=m,y=!0}if(1==e.type&&0==t.type){for(var f=e.polygon,v=t.circle,g=-1e100,z=null,b=f.edges.head;null!=b;){var w=b.elt,S=w.gnormx*v.worldCOMx+w.gnormy*v.worldCOMy-w.gprojection-v.radius;if(o<S){g=S;break}0<S?g<S&&(g=S,z=w):g<0&&g<S&&(g=S,z=w),b=b.next}if(g<o){var C=z.gp0,M=z.gp1,P=v.worldCOMy*z.gnormx-v.worldCOMx*z.gnormy;if(P<=C.y*z.gnormx-C.x*z.gnormy){var k=0,T=0;k=v.worldCOMx-C.x,T=v.worldCOMy-C.y;var G=Math.sqrt(k*k+T*T);if((g=G-v.radius)<o){if(0==G)k=1,T=0;else{var O=1/G;k*=O,T*=O}i.x=C.x+0*k,i.y=C.y+0*T;var A=-v.radius;n.x=v.worldCOMx+k*A,n.y=v.worldCOMy+T*A,r.x=k,r.y=T}}else if(P>=M.y*z.gnormx-M.x*z.gnormy){var E=0,I=0;E=v.worldCOMx-M.x,I=v.worldCOMy-M.y;var B=Math.sqrt(E*E+I*I);if((g=B-v.radius)<o){if(0==B)E=1,I=0;else{var L=1/B;E*=L,I*=L}i.x=M.x+0*E,i.y=M.y+0*I;var D=-v.radius;n.x=v.worldCOMx+E*D,n.y=v.worldCOMy+I*D,r.x=E,r.y=I}}else{var R=-v.radius;n.x=v.worldCOMx+z.gnormx*R,n.y=v.worldCOMy+z.gnormy*R;var F=-g;i.x=n.x+z.gnormx*F,i.y=n.y+z.gnormy*F,r.x=z.gnormx,r.y=z.gnormy}}return y&&(r.x=-r.x,r.y=-r.y),g}for(var j=e.polygon,N=t.polygon,U=-1e100,H=null,V=null,W=0,X=j.edges.head;null!=X;){for(var q=X.elt,Y=1e100,Z=N.gverts.next;null!=Z;){var K=Z,J=q.gnormx*K.x+q.gnormy*K.y;J<Y&&(Y=J),Z=Z.next}if(o<(Y-=q.gprojection)){U=Y;break}0<Y?U<Y&&(U=Y,H=q,W=1):U<0&&U<Y&&(U=Y,H=q,W=1),X=X.next}if(U<o){for(var Q=N.edges.head;null!=Q;){for(var $=Q.elt,ee=1e100,te=j.gverts.next;null!=te;){var ie=te,ne=$.gnormx*ie.x+$.gnormy*ie.y;ne<ee&&(ee=ne),te=te.next}if(o<(ee-=$.gprojection)){U=ee;break}0<ee?U<ee&&(U=ee,V=$,W=2):U<0&&U<ee&&(U=ee,V=$,W=2),Q=Q.next}if(U<o){var re,oe;if(1==W)re=N,oe=H;else{re=j,oe=V;var ae=i;i=n,n=ae,y=!y}for(var se=null,pe=1e100,le=re.edges.head;null!=le;){var he=le.elt,ue=oe.gnormx*he.gnormx+oe.gnormy*he.gnormy;ue<pe&&(pe=ue,se=he),le=le.next}if(y?(r.x=-oe.gnormx,r.y=-oe.gnormy):(r.x=oe.gnormx,r.y=oe.gnormy),0<=U){var de,ce,_e,ye,xe=oe.gp0,me=oe.gp1,fe=se.gp0,ve=se.gp1,ge=1/((de=me.x-xe.x)*de+(ce=me.y-xe.y)*ce),ze=1/((_e=ve.x-fe.x)*_e+(ye=ve.y-fe.y)*ye),be=-(de*(xe.x-fe.x)+ce*(xe.y-fe.y))*ge,we=-(de*(xe.x-ve.x)+ce*(xe.y-ve.y))*ge,Se=-(_e*(fe.x-xe.x)+ye*(fe.y-xe.y))*ze,Ce=-(_e*(fe.x-me.x)+ye*(fe.y-me.y))*ze;be<0?be=0:1<be&&(be=1),we<0?we=0:1<we&&(we=1),Se<0?Se=0:1<Se&&(Se=1),Ce<0?Ce=0:1<Ce&&(Ce=1);var Me,Pe,ke=be;Me=xe.x+de*ke,Pe=xe.y+ce*ke;var Te,Ge,Oe=we;Te=xe.x+de*Oe,Ge=xe.y+ce*Oe;var Ae,Ee,Ie=Se;Ae=fe.x+_e*Ie,Ee=fe.y+ye*Ie;var Be,Le,De=Ce;Be=fe.x+_e*De,Le=fe.y+ye*De;var Re,Fe,je,Ne,Ue,He,Ve,We,Xe=(Re=Me-fe.x)*Re+(Fe=Pe-fe.y)*Fe,qe=(je=Te-ve.x)*je+(Ne=Ge-ve.y)*Ne,Ye=(Ue=Ae-xe.x)*Ue+(He=Ee-xe.y)*He,Ze=(Ve=Be-me.x)*Ve+(We=Le-me.y)*We,Ke=0,Je=0,Qe=null;Xe<qe?(Ke=Me,Je=Pe,Qe=fe):(Ke=Te,Je=Ge,Qe=ve,Xe=qe);var $e=0,et=0,tt=null;if(Ye<Ze?($e=Ae,et=Ee,tt=xe):($e=Be,et=Le,tt=me,Ye=Ze),0!=(U=Xe<Ye?(i.x=Ke,i.y=Je,n.x=Qe.x,n.y=Qe.y,Math.sqrt(Xe)):(n.x=$e,n.y=et,i.x=tt.x,i.y=tt.y,Math.sqrt(Ye)))){r.x=n.x-i.x,r.y=n.y-i.y;var it=1/U;r.x*=it,r.y*=it,y&&(r.x=-r.x,r.y=-r.y)}return U}var nt=0,rt=0;nt=se.gp0.x,rt=se.gp0.y;var ot,at,st=0,pt=0;ot=(st=se.gp1.x)-nt,at=(pt=se.gp1.y)-rt;var lt=oe.gnormy*nt-oe.gnormx*rt,ht=oe.gnormy*st-oe.gnormx*pt,ut=1/(ht-lt),dt=(-oe.tp1-lt)*ut;dt>Qs.epsilon&&(nt+=ot*dt,rt+=at*dt);var ct=(-oe.tp0-ht)*ut;ct<-Qs.epsilon&&(st+=ot*ct,pt+=at*ct);var _t=nt*oe.gnormx+rt*oe.gnormy-oe.gprojection,yt=st*oe.gnormx+pt*oe.gnormy-oe.gprojection;if(_t<yt){n.x=nt,n.y=rt;var xt=-_t;return i.x=n.x+oe.gnormx*xt,i.y=n.y+oe.gnormy*xt,_t}n.x=st,n.y=pt;var mt=-yt;return i.x=n.x+oe.gnormx*mt,i.y=n.y+oe.gnormy*mt,yt}return o}return o},Vt.prototype.__class__=Vt;var Nt=zpp_nape.geom.ZPP_PartitionPair=function(){this.node=null,this.di=0,this.id=0,this.b=null,this.a=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null};Nt.__name__=["zpp_nape","geom","ZPP_PartitionPair"],Nt.get=function(e,t){var i;return null==Nt.zpp_pool?i=new Nt:(i=Nt.zpp_pool,Nt.zpp_pool=i.next,i.next=null),i.a=e,i.b=t,e.id<t.id?(i.id=e.id,i.di=t.id):(i.id=t.id,i.di=e.id),i},Nt.edge_swap=function(e,t){var i=e.node;e.node=t.node,t.node=i},Nt.edge_lt=function(e,t){return!(e.id>=t.id)||e.id==t.id&&e.di<t.di},Nt.prototype.next=null,Nt.prototype.elem=function(){return this},Nt.prototype.begin=function(){return this.next},Nt.prototype._inuse=null,Nt.prototype.modified=null,Nt.prototype.pushmod=null,Nt.prototype.length=null,Nt.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},Nt.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Nt.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Nt.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},Nt.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Nt.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Nt.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Nt.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Nt.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},Nt.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},Nt.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Nt.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Nt.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Nt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Nt.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Nt.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Nt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Nt.prototype.clear=function(){},Nt.prototype.inlined_clear=function(){},Nt.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},Nt.prototype.empty=function(){return null==this.next},Nt.prototype.size=function(){return this.length},Nt.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Nt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Nt.prototype.front=function(){return this.next},Nt.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},Nt.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},Nt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},Nt.prototype.free=function(){this.a=this.b=null,this.node=null},Nt.prototype.alloc=function(){},Nt.prototype.a=null,Nt.prototype.b=null,Nt.prototype.id=null,Nt.prototype.di=null,Nt.prototype.node=null,Nt.prototype.__class__=Nt;var Ut=zpp_nape.geom.ZPP_Triangular=function(){};Ut.__name__=["zpp_nape","geom","ZPP_Triangular"],Ut.lt=function(e,t){return e.y<t.y||e.y==t.y&&e.x<t.x},Ut.right_turn=function(e,t,i){var n,r;n=i.x-t.x,r=i.y-t.y;var o;return o=t.x-e.x,(t.y-e.y)*n-o*r},Ut.delaunay=function(e,t,i,n){var r=0,o=0,a=0;return r=i.x-t.x,o=i.y-t.y,a=t.x-e.x,!!(!!(!!(0<=(t.y-e.y)*r-a*o||(r=n.x-i.x,o=n.y-i.y,a=i.x-t.x,0<=(i.y-t.y)*r-a*o))||(r=e.x-n.x,o=e.y-n.y,a=n.x-i.x,0<=(n.y-i.y)*r-a*o))||(r=t.x-e.x,o=t.y-e.y,a=e.x-n.x,0<=(e.y-n.y)*r-a*o))||0<t.x*(i.y*n.mag-i.mag*n.y)-i.x*(t.y*n.mag-t.mag*n.y)+n.x*(t.y*i.mag-t.mag*i.y)-(e.x*(i.y*n.mag-i.mag*n.y)-i.x*(e.y*n.mag-e.mag*n.y)+n.x*(e.y*i.mag-e.mag*i.y))+(e.x*(t.y*n.mag-t.mag*n.y)-t.x*(e.y*n.mag-e.mag*n.y)+n.x*(e.y*t.mag-e.mag*t.y))-(e.x*(t.y*i.mag-t.mag*i.y)-t.x*(e.y*i.mag-e.mag*i.y)+i.x*(e.y*t.mag-e.mag*t.y))},Ut.optimise=function(e){var t,i=e.vertices,n=e.vertices;if(null!=i)for(var r=i;;){var o=r;if(o.sort(),o.mag=o.x*o.x+o.y*o.y,(r=r.next)==n)break}null==Ut.edgeSet&&(null==Vn.zpp_pool?Ut.edgeSet=new Vn:(Ut.edgeSet=Vn.zpp_pool,Vn.zpp_pool=Ut.edgeSet.next,Ut.edgeSet.next=null),Ut.edgeSet.lt=Nt.edge_lt,Ut.edgeSet.swapped=Nt.edge_swap),null==Nt.zpp_pool?t=new Nt:(t=Nt.zpp_pool,Nt.zpp_pool=t.next,t.next=null);var a=e.vertices,s=e.vertices;if(null!=a)for(var p=a;;){var l=p,h=l.next;l.diagonals.reverse();for(var u=l.diagonals.head;null!=u;){var d=u.elt;if(d.id<l.id)h=d,u=u.next;else{if(!Ut.delaunay(l,h,d,null==u.next?l.prev:u.next.elt)){var c;null==Nt.zpp_pool?c=new Nt:(c=Nt.zpp_pool,Nt.zpp_pool=c.next,c.next=null),c.a=l,c.b=d,l.id<d.id?(c.id=l.id,c.di=d.id):(c.id=d.id,c.di=l.id);var _=c;t.add(_),_.node=Ut.edgeSet.insert(_)}h=d,u=u.next}}if((p=p.next)==s)break}for(;null!=t.next;){for(var y=t.pop_unsafe(),x=y.a,m=y.b,f=x.next,v=null,g=x.diagonals.head;null!=g;){var z=g.elt;if(z==m){v=null==(g=g.next)?x.prev:g.elt;break}f=z,g=g.next}if(x.diagonals.remove(m),m.diagonals.remove(x),m==f.next)f.diagonals.add(v);else for(var b=f.diagonals.head;null!=b;){if(b.elt==m){f.diagonals.insert(b,v);break}b=b.next}if(x==v.next)v.diagonals.add(f);else for(var w=v.diagonals.head;null!=w;){if(w.elt==x){v.diagonals.insert(w,f);break}w=w.next}Ut.edgeSet.remove_node(y.node),y.a=y.b=null,y.node=null,y.next=Nt.zpp_pool,Nt.zpp_pool=y}var S=t;S.a=S.b=null,S.node=null,S.next=Nt.zpp_pool,Nt.zpp_pool=S},Ut.triangulate=function(e){var t=e.vertices,i=e.vertices,n=e.vertices.next,r=e.vertices;if(null!=n)for(var o=n;;){var a=o;if((a.y<t.y||a.y==t.y&&a.x<t.x)&&(t=a),(i.y<a.y||i.y==a.y&&i.x<a.x)&&(i=a),(o=o.next)==r)break}null==Ut.queue&&(Ut.queue=new zi);var s=i.prev,p=i.next;for(Ut.queue.add(i);s!=t||p!=t;)s==t||p!=t&&(s.y<p.y||s.y==p.y&&s.x<p.x)?(Ut.queue.add(p),p.rightchain=!1,p=p.next):(Ut.queue.add(s),s.rightchain=!0,s=s.prev);Ut.queue.add(t),null==Ut.stack&&(Ut.stack=new zi),Ut.stack.add(Ut.queue.pop_unsafe());var l=Ut.queue.pop_unsafe();for(Ut.stack.add(l);;){var h=Ut.queue.pop_unsafe();if(null==Ut.queue.head)break;if(h.rightchain!=Ut.stack.head.elt.rightchain){for(;;){var u=Ut.stack.pop_unsafe();if(null==Ut.stack.head)break;e.add_diagonal(u,h)}Ut.stack.add(l)}else{for(var d=Ut.stack.pop_unsafe();null!=Ut.stack.head;){var c,_,y=Ut.stack.head.elt;c=h.x-d.x,_=h.y-d.y;var x;x=d.x-y.x;var m=(d.y-y.y)*c-x*_;if(h.rightchain&&0<=m||!h.rightchain&&m<=0)break;e.add_diagonal(y,h),d=y,Ut.stack.pop()}Ut.stack.add(d)}Ut.stack.add(h),l=h}if(null!=Ut.stack.head)for(Ut.stack.pop();null!=Ut.stack.head;){var f=Ut.stack.pop_unsafe();if(null==Ut.stack.head)break;e.add_diagonal(i,f)}return e},Ut.prototype.__class__=Ut;var ep=zpp_nape.geom.ZPP_Vec2=function(){this.y=0,this.x=0,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.weak=!1,this.outer=null,this._isimmutable=null,this._immutable=!1,this._validate=null,this._invalidate=null};ep.__name__=["zpp_nape","geom","ZPP_Vec2"],ep.get=function(e,t,i){var n;return null==i&&(i=!1),null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=i,n.x=e,n.y=t,n},ep.prototype._invalidate=null,ep.prototype._validate=null,ep.prototype.validate=function(){null!=this._validate&&this._validate()},ep.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate(this)},ep.prototype._immutable=null,ep.prototype._isimmutable=null,ep.prototype.immutable=function(){},ep.prototype.outer=null,ep.prototype.wrapper=function(){if(null==this.outer){this.outer=new lt;var e=this.outer.zpp_inner;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=ep.zpp_pool,ep.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},ep.prototype.weak=null,ep.prototype.free=function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this._isimmutable=null,this._validate=null,this._invalidate=null},ep.prototype.alloc=function(){this.weak=!1},ep.prototype.next=null,ep.prototype.elem=function(){return this},ep.prototype.begin=function(){return this.next},ep.prototype._inuse=null,ep.prototype.modified=null,ep.prototype.pushmod=null,ep.prototype.length=null,ep.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},ep.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ep.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ep.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},ep.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ep.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ep.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ep.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ep.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},ep.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},ep.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ep.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},ep.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ep.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},ep.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ep.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ep.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},ep.prototype.clear=function(){},ep.prototype.inlined_clear=function(){},ep.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},ep.prototype.empty=function(){return null==this.next},ep.prototype.size=function(){return this.length},ep.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ep.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ep.prototype.front=function(){return this.next},ep.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},ep.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},ep.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},ep.prototype.x=null,ep.prototype.y=null,ep.prototype.copy=function(){var e,t=this.x,i=this.y;return null==ep.zpp_pool?e=new ep:(e=ep.zpp_pool,ep.zpp_pool=e.next,e.next=null),e.weak=!1,e._immutable=!1,e.x=t,e.y=i,e},ep.prototype.toString=function(){return"{ x: "+this.x+" y: "+this.y+" }"},ep.prototype.__class__=ep;var Wt=zpp_nape.geom.ZPP_Vec3=function(){this._validate=null,this.immutable=!1,this.z=0,this.y=0,this.x=0,this.outer=null,this.immutable=!1,this._validate=null};Wt.__name__=["zpp_nape","geom","ZPP_Vec3"],Wt.prototype.outer=null,Wt.prototype.x=null,Wt.prototype.y=null,Wt.prototype.z=null,Wt.prototype.immutable=null,Wt.prototype._validate=null,Wt.prototype.validate=function(){null!=this._validate&&this._validate()},Wt.prototype.__class__=Wt;var Xt=zpp_nape.geom.ZPP_VecMath=function(){};Xt.__name__=["zpp_nape","geom","ZPP_VecMath"],Xt.vec_dsq=function(e,t,i,n){var r,o;return(r=e-i)*r+(o=t-n)*o},Xt.vec_distance=function(e,t,i,n){var r,o;return r=e-i,o=t-n,Math.sqrt(r*r+o*o)},Xt.prototype.__class__=Xt;var qo=zpp_nape.phys.ZPP_Interactor=function(){this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.group=null,this.cbsets=null,this.icompound=null,this.ibody=null,this.ishape=null,this.userData=null,this.id=0,this.outer_i=null,this.id=ke.Interactor(),this.cbsets=new yi,this.cbTypes=new Fe};qo.__name__=["zpp_nape","phys","ZPP_Interactor"],qo.get=function(e,t){for(var i=e.id<t.id?e.id:t.id,n=e.id<t.id?t.id:e.id,r=null,o=(e.cbsets.length<t.cbsets.length?e.cbsets:t.cbsets).head;null!=o;){var a=o.elt;if(a.id==i&&a.di==n){r=a;break}o=o.next}return r},qo.int_callback=function(e,t,i){var n,r=e.int1,o=e.int2,a=t.options1,s=r.cbTypes;if(a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)){var p=t.options2,l=o.cbTypes;n=!!p.nonemptyintersection(l,p.includes)&&!p.nonemptyintersection(l,p.excludes)}else n=!1;n?(i.int1=r,i.int2=o):(i.int1=o,i.int2=r)},qo.prototype.outer_i=null,qo.prototype.id=null,qo.prototype.userData=null,qo.prototype.ishape=null,qo.prototype.ibody=null,qo.prototype.icompound=null,qo.prototype.isShape=function(){return null!=this.ishape},qo.prototype.isBody=function(){return null!=this.ibody},qo.prototype.isCompound=function(){return null!=this.icompound},qo.prototype.__iaddedToSpace=function(){null!=this.group&&this.group.interactors.add(this);for(var e=this.cbTypes.head;null!=e;)e.elt.interactors.add(this),e=e.next;this.alloc_cbSet()},qo.prototype.__iremovedFromSpace=function(){null!=this.group&&this.group.interactors.remove(this);for(var e=this.cbTypes.head;null!=e;)e.elt.interactors.remove(this),e=e.next;this.dealloc_cbSet()},qo.prototype.wake=function(){if(null!=this.ishape){var e=this.ishape.body;null!=e&&null!=e.space&&e.space.non_inlined_wake(e)}else null!=this.ibody?null!=this.ibody.space&&this.ibody.space.non_inlined_wake(this.ibody):null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound)},qo.prototype.cbsets=null,qo.prototype.getSpace=function(){return null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space},qo.prototype.group=null,qo.prototype.cbTypes=null,qo.prototype.cbSet=null,qo.prototype.wrap_cbTypes=null,qo.prototype.setupcbTypes=function(){this.wrap_cbTypes=Tn.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0},qo.prototype.wrap_cbTypes_subber=function(e){var t=e.zpp_inner;if(this.cbTypes.has(t)){var i=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=i&&(this.dealloc_cbSet(),t.interactors.remove(this)),this.cbTypes.remove(t),null!=i&&(this.alloc_cbSet(),this.wake())}},qo.prototype.wrap_cbTypes_adder=function(e){return this.insert_cbtype(e.zpp_inner),!1},qo.prototype.insert_cbtype=function(e){if(!this.cbTypes.has(e)){var t=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=t&&(this.dealloc_cbSet(),e.interactors.add(this));for(var i=null,n=this.cbTypes.head;null!=n&&!(e.id<n.elt.id);)n=(i=n).next;var r,o=this.cbTypes;null==ji.zpp_pool?r=new ji:(r=ji.zpp_pool,ji.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==i?(a.next=o.head,o.head=a):(a.next=i.next,i.next=a),o.pushmod=o.modified=!0,o.length++,null!=t&&(this.alloc_cbSet(),this.wake())}},qo.prototype.alloc_cbSet=function(){var e=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=(this.cbSet=e.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),e.freshInteractorType(this))},qo.prototype.dealloc_cbSet=function(){var e=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=this.cbSet){if(this.cbSet.interactors.remove(this),e.nullInteractorType(this),0==--this.cbSet.count){e.cbsets.remove(this.cbSet);var t=this.cbSet;for(t.listeners.clear(),t.zip_listeners=!0,t.bodylisteners.clear(),t.zip_bodylisteners=!0,t.conlisteners.clear(),t.zip_conlisteners=!0;null!=t.cbTypes.head;)t.cbTypes.pop_unsafe().cbsets.remove(t);t.next=jo.zpp_pool,jo.zpp_pool=t}this.cbSet=null}},qo.prototype.setGroup=function(e){if(this.group!=e){var t=null!=(null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space);t&&null!=this.group&&this.group.interactors.remove(this),this.group=e,t&&null!=e&&e.interactors.add(this),t&&(null!=this.ishape?this.ishape.body.wake():null!=this.ibody?this.ibody.wake():this.icompound.wake())}},qo.prototype.immutable_midstep=function(e){null==this.ibody&&(null!=this.ishape?this.ishape.__immutable_midstep(e):this.icompound.__imutable_midstep(e))},qo.prototype.lookup_group=function(){for(var e=this;null!=e&&null==e.group;)e=null!=e.ishape?e.ishape.body:null!=e.icompound?e.icompound.compound:e.ibody.compound;return null==e?null:e.group},qo.prototype.copyto=function(e){e.zpp_inner_i.group=this.group;var t=this.outer_i;null==t.zpp_inner_i.wrap_cbTypes&&t.zpp_inner_i.setupcbTypes();var i=t.zpp_inner_i.wrap_cbTypes;i.zpp_inner.valmod();for(var n=He.get(i);;){n.zpp_inner.zpp_inner.valmod();var r=n.zpp_inner;r.zpp_inner.valmod(),r.zpp_inner.zip_length&&(r.zpp_inner.zip_length=!1,r.zpp_inner.user_length=r.zpp_inner.inner.length);var o=r.zpp_inner.user_length;if(n.zpp_critical=!0,!(n.zpp_i<o||(n.zpp_next=He.zpp_pool,(He.zpp_pool=n).zpp_inner=null,!1)))break;n.zpp_critical=!1;var a=n.zpp_inner.at(n.zpp_i++);null==e.zpp_inner_i.wrap_cbTypes&&e.zpp_inner_i.setupcbTypes();var s=e.zpp_inner_i.wrap_cbTypes;s.zpp_inner.reverse_flag?s.push(a):s.unshift(a)}null!=this.userData&&(e.zpp_inner_i.userData=_.copy(this.userData))},qo.prototype.__class__=qo;var qt=zpp_nape.phys.ZPP_Body=function(){var e;this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_aabb=!1,this.aabb=null,this.norotate=!1,this.sinertia=0,this.iinertia=0,this.cinertia=0,this.zip_inertia=!1,this.inertia=0,this.inertiaMode=0,this.zip_gravMassScale=!1,this.gravMassScale=0,this.gravMassMode=0,this.zip_gravMass=!1,this.gravMass=0,this.nomove=!1,this.cmass=0,this.smass=0,this.imass=0,this.massMode=0,this.zip_mass=!1,this.mass=0,this.zip_axis=!1,this.axisy=0,this.axisx=0,this.rot=0,this.pre_rot=0,this.kinangvel=0,this.torque=0,this.angvel=0,this.wrapcvel=null,this.wrap_svel=null,this.svely=0,this.svelx=0,this.wrap_kinvel=null,this.kinvely=0,this.kinvelx=0,this.wrap_force=null,this.forcey=0,this.forcex=0,this.wrap_vel=null,this.vely=0,this.velx=0,this.wrap_pos=null,this.posy=0,this.posx=0,this.pre_posy=0,this.pre_posx=0,this.disableCCD=!1,this.bulletEnabled=!1,this.bullet=!1,this.sweepRadius=0,this.sweepFrozen=!1,this.sweep_angvel=0,this.sweepTime=0,this.graph_depth=0,this.component=null,this.wrap_constraints=null,this.constraints=null,this.wrap_arbiters=null,this.arbiters=null,this.space=null,this.wrap_shapes=null,this.shapes=null,this.compound=null,this.type=0,this.world=!1,this.outer=null,qo.call(this),(this.ibody=this).world=!1,this.bulletEnabled=!1,this.sweepTime=0,this.sweep_angvel=0,this.norotate=this.nomove=!1,this.disableCCD=!1,this.posx=0,this.posy=0,this.rot=0,this.axisx=0,this.axisy=1,this.svelx=0,this.svely=0,this.velx=0,this.vely=0,this.kinvelx=0,this.kinvely=0,this.forcex=0,this.forcey=0,this.torque=this.angvel=this.kinangvel=0,this.pre_posx=1/0,this.pre_posy=1/0,this.pre_rot=1/0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.zip_aabb=!0,null==Oo.zpp_pool?e=new Oo:(e=Oo.zpp_pool,Oo.zpp_pool=e.next,e.next=null),e.minx=0,e.miny=0,e.maxx=0,e.maxy=0,this.aabb=e,this.aabb._immutable=!0,this.aabb._validate=$(this,this.aabb_validate),this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.arbiters=new vi,this.constraints=new Ae,this.shapes=new xi,this.wrap_shapes=Bn.get(this.shapes),this.wrap_shapes.zpp_inner.adder=$(this,this.shapes_adder),this.wrap_shapes.zpp_inner.subber=$(this,this.shapes_subber),this.wrap_shapes.zpp_inner._invalidate=$(this,this.shapes_invalidate),this.kinematicDelaySleep=!1};qt.__name__=["zpp_nape","phys","ZPP_Body"],qt.__super__=qo,qt.prototype=Object.create(qo.prototype),qt.bodysetlt=function(e,t){return e.id<t.id},qt.__static=function(){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var e=new re(Uo.BodyType_STATIC),t=e.zpp_inner;return t.world=!0,t.wrap_shapes.zpp_inner.immutable=!0,t.smass=t.imass=t.cmass=t.mass=t.gravMass=0,t.sinertia=t.iinertia=t.cinertia=t.inertia=0,t.cbTypes.clear(),e},qt.prototype.outer=null,qt.prototype.world=null,qt.prototype.type=null,qt.prototype.isStatic=function(){return 1==this.type},qt.prototype.isDynamic=function(){return 2==this.type},qt.prototype.isKinematic=function(){return 3==this.type},qt.prototype.invalidate_type=function(){this.invalidate_mass(),this.invalidate_inertia()},qt.prototype.compound=null,qt.prototype.shapes=null,qt.prototype.wrap_shapes=null,qt.prototype.invalidate_shapes=function(){this.zip_aabb=!0,this.zip_localCOM=!0,this.zip_worldCOM=!0,this.invalidate_mass(),this.invalidate_inertia()},qt.prototype.space=null,qt.prototype.arbiters=null,qt.prototype.wrap_arbiters=null,qt.prototype.constraints=null,qt.prototype.wrap_constraints=null,qt.prototype.component=null,qt.prototype.graph_depth=null,qt.prototype.init_bodysetlist=function(){null==qt.bodyset&&(qt.bodyset=new Nn,qt.bodyset.lt=qt.bodysetlt,qt.bodystack=new mi)},qt.prototype.connectedBodies_cont=function(e){qt.bodyset.try_insert_bool(e.zpp_inner)&&(qt.bodystack.add(e.zpp_inner),e.zpp_inner.graph_depth=qt.cur_graph_depth+1)},qt.prototype.connectedBodies=function(e,t){null==qt.bodyset&&(qt.bodyset=new Nn,qt.bodyset.lt=qt.bodysetlt,qt.bodystack=new mi);var i=null==t?new ee:t;for(qt.bodystack.add(this),qt.bodyset.insert(this),this.graph_depth=0;null!=qt.bodystack.head;){var n=qt.bodystack.pop_unsafe();if(n.graph_depth!=e){qt.cur_graph_depth=n.graph_depth;for(var r=n.constraints.head;null!=r;)r.elt.outer.visitBodies($(this,this.connectedBodies_cont)),r=r.next}}var o=qt.bodyset;if(null!=o.parent){for(var a=o.parent;null!=a;)if(null!=a.prev)a=a.prev;else if(null!=a.next)a=a.next;else{var s=a.data;if(s!=this){var p=s.outer;i.zpp_inner.reverse_flag?i.push(p):i.unshift(p)}var l=a.parent;null!=l&&(a==l.prev?l.prev=null:l.next=null,a.parent=null);var h=a;h.data=null,h.lt=null,h.swapped=null,h.next=Nn.zpp_pool,Nn.zpp_pool=h,a=l}o.parent=null}return i},qt.prototype.interactingBodies=function(e,t,i){null==qt.bodyset&&(qt.bodyset=new Nn,qt.bodyset.lt=qt.bodysetlt,qt.bodystack=new mi);var n=null==i?new ee:i;for(qt.bodyset.insert(this),qt.bodystack.add(this),this.graph_depth=0;null!=qt.bodystack.head;){var r=qt.bodystack.pop_unsafe();if(r.graph_depth!=t)for(var o=r.arbiters.head;null!=o;){var a=o.elt;if(0!=(a.type&e)){var s=a.b1==r?a.b2:a.b1;qt.bodyset.try_insert_bool(s)&&(qt.bodystack.add(s),s.graph_depth=r.graph_depth+1)}o=o.next}}var p=qt.bodyset;if(null!=p.parent){for(var l=p.parent;null!=l;)if(null!=l.prev)l=l.prev;else if(null!=l.next)l=l.next;else{var h=l.data;if(h!=this){var u=h.outer;n.zpp_inner.reverse_flag?n.push(u):n.unshift(u)}var d=l.parent;null!=d&&(l==d.prev?d.prev=null:d.next=null,l.parent=null);var c=l;c.data=null,c.lt=null,c.swapped=null,c.next=Nn.zpp_pool,Nn.zpp_pool=c,l=d}p.parent=null}return n},qt.prototype.atRest=function(e){if(2!=this.type)return this.component.sleeping;var t,i=Qs.linearSleepThreshold;if(i*=i,this.velx*this.velx+this.vely*this.vely>i)t=!1;else{var n,r,o=this.posx,a=this.posy;if(.25*i*e*e<(n=o-this.pre_posx)*n+(r=a-this.pre_posy)*r)t=!1;else{var s,p,l=(s=this.aabb.maxx-this.aabb.minx)*s+(p=this.aabb.maxy-this.aabb.miny)*p,h=Qs.angularSleepThreshold;if(h*=h,4*this.angvel*this.angvel*l>h)t=!1;else{var u=this.rot-this.pre_rot;t=!(h*e*e<u*u*l)}}}return t||(this.component.waket=this.space.stamp),this.component.waket+Qs.sleepDelay<this.space.stamp},qt.prototype.refreshArbiters=function(){for(var e=this.arbiters.head;null!=e;)e.elt.invalidated=!0,e=e.next},qt.prototype.sweepTime=null,qt.prototype.sweep_angvel=null,qt.prototype.sweepFrozen=null,qt.prototype.sweepRadius=null,qt.prototype.bullet=null,qt.prototype.bulletEnabled=null,qt.prototype.disableCCD=null,qt.prototype.sweepIntegrate=function(e){var t=e-this.sweepTime;if(0!=t&&(this.sweepTime=e,this.posx+=this.velx*t,this.posy+=this.vely*t,0!=this.angvel)){var i=this.sweep_angvel*t;if(this.rot+=i,1e-4<i*i)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var n=i*i,r=1-.5*n,o=1-n*n/8,a=(r*this.axisx+i*this.axisy)*o;this.axisy=(r*this.axisy-i*this.axisx)*o,this.axisx=a}}},qt.prototype.sweepValidate=function(e){if(0==e.type)e.worldCOMx=this.posx+(this.axisy*e.localCOMx-this.axisx*e.localCOMy),e.worldCOMy=this.posy+(e.localCOMx*this.axisx+e.localCOMy*this.axisy);else{for(var t=e.polygon,i=t.lverts.next,n=t.gverts.next;null!=n;){var r=n,o=i;i=i.next,r.x=this.posx+(this.axisy*o.x-this.axisx*o.y),r.y=this.posy+(o.x*this.axisx+o.y*this.axisy),n=n.next}var a=t.edges.head,s=t.gverts.next,p=s;for(s=s.next;null!=s;){var l=s,h=a.elt;a=a.next,h.gnormx=this.axisy*h.lnormx-this.axisx*h.lnormy,h.gnormy=h.lnormx*this.axisx+h.lnormy*this.axisy,h.gprojection=this.posx*h.gnormx+this.posy*h.gnormy+h.lprojection,h.tp0=p.y*h.gnormx-p.x*h.gnormy,h.tp1=l.y*h.gnormx-l.x*h.gnormy,p=l,s=s.next}var u=t.gverts.next,d=a.elt;d.gnormx=this.axisy*d.lnormx-this.axisx*d.lnormy,d.gnormy=d.lnormx*this.axisx+d.lnormy*this.axisy,d.gprojection=this.posx*d.gnormx+this.posy*d.gnormy+d.lprojection,d.tp0=p.y*d.gnormx-p.x*d.gnormy,d.tp1=u.y*d.gnormx-u.x*d.gnormy}},qt.prototype.pre_posx=null,qt.prototype.pre_posy=null,qt.prototype.posx=null,qt.prototype.posy=null,qt.prototype.wrap_pos=null,qt.prototype.velx=null,qt.prototype.vely=null,qt.prototype.wrap_vel=null,qt.prototype.forcex=null,qt.prototype.forcey=null,qt.prototype.wrap_force=null,qt.prototype.kinvelx=null,qt.prototype.kinvely=null,qt.prototype.wrap_kinvel=null,qt.prototype.svelx=null,qt.prototype.svely=null,qt.prototype.wrap_svel=null,qt.prototype.invalidate_pos=function(){for(var e=this.shapes.head;null!=e;){var t=e.elt;1==t.type&&(t.polygon.invalidate_gverts(),t.polygon.invalidate_gaxi()),t.invalidate_worldCOM(),e=e.next}this.zip_worldCOM=!0},qt.prototype.pos_invalidate=function(e){if(this.immutable_midstep("Body::position"),this.posx!=e.x||this.posy!=e.y){this.posx=e.x,this.posy=e.y;for(var t=this.shapes.head;null!=t;){var i=t.elt;1==i.type&&(i.polygon.invalidate_gverts(),i.polygon.invalidate_gaxi()),i.invalidate_worldCOM(),t=t.next}this.zip_worldCOM=!0,this.wake()}},qt.prototype.pos_validate=function(){this.wrap_pos.zpp_inner.x=this.posx,this.wrap_pos.zpp_inner.y=this.posy},qt.prototype.vel_invalidate=function(e){this.velx=e.x,this.vely=e.y,this.wake()},qt.prototype.vel_validate=function(){this.wrap_vel.zpp_inner.x=this.velx,this.wrap_vel.zpp_inner.y=this.vely},qt.prototype.kinvel_invalidate=function(e){this.kinvelx=e.x,this.kinvely=e.y,this.wake()},qt.prototype.kinvel_validate=function(){this.wrap_kinvel.zpp_inner.x=this.kinvelx,this.wrap_kinvel.zpp_inner.y=this.kinvely},qt.prototype.svel_invalidate=function(e){this.svelx=e.x,this.svely=e.y,this.wake()},qt.prototype.svel_validate=function(){this.wrap_svel.zpp_inner.x=this.svelx,this.wrap_svel.zpp_inner.y=this.svely},qt.prototype.force_invalidate=function(e){this.forcex=e.x,this.forcey=e.y,this.wake()},qt.prototype.force_validate=function(){this.wrap_force.zpp_inner.x=this.forcex,this.wrap_force.zpp_inner.y=this.forcey},qt.prototype.setupPosition=function(){var e,t=this.posx,i=this.posy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_pos=e,this.wrap_pos.zpp_inner._inuse=!0,this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=$(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=$(this,this.pos_validate))},qt.prototype.setupVelocity=function(){var e,t=this.velx,i=this.vely;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_vel=e,this.wrap_vel.zpp_inner._inuse=!0,this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=$(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=$(this,this.vel_validate))},qt.prototype.setupkinvel=function(){var e,t=this.kinvelx,i=this.kinvely;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_kinvel=e,this.wrap_kinvel.zpp_inner._inuse=!0,this.world?this.wrap_kinvel.zpp_inner._immutable=!0:(this.wrap_kinvel.zpp_inner._invalidate=$(this,this.kinvel_invalidate),this.wrap_kinvel.zpp_inner._validate=$(this,this.kinvel_validate))},qt.prototype.setupsvel=function(){var e,t=this.svelx,i=this.svely;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_svel=e,this.wrap_svel.zpp_inner._inuse=!0,this.world?this.wrap_svel.zpp_inner._immutable=!0:(this.wrap_svel.zpp_inner._invalidate=$(this,this.svel_invalidate),this.wrap_svel.zpp_inner._validate=$(this,this.svel_validate))},qt.prototype.setupForce=function(){var e,t=this.forcex,i=this.forcey;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_force=e,this.wrap_force.zpp_inner._inuse=!0,this.world?this.wrap_force.zpp_inner._immutable=!0:(this.wrap_force.zpp_inner._invalidate=$(this,this.force_invalidate),this.wrap_force.zpp_inner._validate=$(this,this.force_validate))},qt.prototype.cvel_validate=function(){this.wrapcvel.zpp_inner.x=this.velx+this.kinvelx,this.wrapcvel.zpp_inner.y=this.vely+this.kinvely,this.wrapcvel.zpp_inner.z=this.angvel+this.kinangvel},qt.prototype.wrapcvel=null,qt.prototype.setup_cvel=function(){this.wrapcvel=K.get(),this.wrapcvel.zpp_inner.immutable=!0,this.wrapcvel.zpp_inner._validate=$(this,this.cvel_validate)},qt.prototype.angvel=null,qt.prototype.torque=null,qt.prototype.kinangvel=null,qt.prototype.pre_rot=null,qt.prototype.rot=null,qt.prototype.invalidate_rot=function(){this.zip_axis=!0;for(var e=this.shapes.head;null!=e;){var t=e.elt;1==t.type&&(t.polygon.invalidate_gverts(),t.polygon.invalidate_gaxi()),t.invalidate_worldCOM(),e=e.next}this.zip_worldCOM=!0},qt.prototype.axisx=null,qt.prototype.axisy=null,qt.prototype.zip_axis=null,qt.prototype.validate_axis=function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot))},qt.prototype.quick_validate_axis=function(){this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)},qt.prototype.delta_rot=function(e){if(this.rot+=e,1e-4<e*e)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var t=e*e,i=1-.5*t,n=1-t*t/8,r=(i*this.axisx+e*this.axisy)*n;this.axisy=(i*this.axisy-e*this.axisx)*n,this.axisx=r}},qt.prototype.kinematicDelaySleep=null,qt.prototype.mass=null,qt.prototype.zip_mass=null,qt.prototype.massMode=null,qt.prototype.imass=null,qt.prototype.smass=null,qt.prototype.cmass=null,qt.prototype.nomove=null,qt.prototype.invalidate_mass=function(){this.zip_mass=!0,this.invalidate_gravMass()},qt.prototype.validate_mass=function(){if(this.zip_mass||(this.massMode,0)){if(this.zip_mass=!1,0==this.massMode){this.cmass=0;for(var e=this.shapes.head;null!=e;){var t=e.elt;t.refmaterial.density=t.material.density,t.validate_area_inertia(),this.cmass+=t.area*t.material.density,e=e.next}}2!=this.type||this.nomove?(this.mass=1/0,this.imass=this.smass=0):(this.mass=this.cmass,this.imass=this.smass=1/this.mass)}},qt.prototype.gravMass=null,qt.prototype.zip_gravMass=null,qt.prototype.gravMassMode=null,qt.prototype.gravMassScale=null,qt.prototype.zip_gravMassScale=null,qt.prototype.invalidate_gravMass=function(){1!=this.gravMassMode&&(this.zip_gravMass=!0),2!=this.gravMassMode&&(this.zip_gravMassScale=!0),this.wake()},qt.prototype.validate_gravMass=function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),0==this.gravMassMode?(this.validate_mass(),this.gravMass=this.cmass):2==this.gravMassMode&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},qt.prototype.invalidate_gravMassScale=function(){2!=this.gravMassMode?this.zip_gravMassScale=!0:this.invalidate_gravMass()},qt.prototype.validate_gravMassScale=function(){this.zip_gravMassScale&&(this.zip_gravMassScale=!1,0==this.gravMassMode?this.gravMassScale=1:1==this.gravMassMode&&(this.validate_mass(),this.gravMassScale=this.gravMass/this.cmass))},qt.prototype.inertiaMode=null,qt.prototype.inertia=null,qt.prototype.zip_inertia=null,qt.prototype.cinertia=null,qt.prototype.iinertia=null,qt.prototype.sinertia=null,qt.prototype.norotate=null,qt.prototype.invalidate_inertia=function(){this.zip_inertia=!0,this.wake()},qt.prototype.validate_inertia=function(){if(this.zip_inertia||(this.inertiaMode,0)){if(this.zip_inertia=!1,0==this.inertiaMode){this.cinertia=0;for(var e=this.shapes.head;null!=e;){var t=e.elt;t.refmaterial.density=t.material.density,t.validate_area_inertia(),this.cinertia+=t.inertia*t.area*t.material.density,e=e.next}}2!=this.type||this.norotate?(this.inertia=1/0,this.sinertia=this.iinertia=0):(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia)}},qt.prototype.invalidate_wake=function(){this.wake()},qt.prototype.aabb=null,qt.prototype.zip_aabb=null,qt.prototype.validate_aabb=function(){if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var e=this.shapes.head;null!=e;){var t=e.elt;if(t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var i=t.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var x=i.radius,m=i.radius;i.aabb.minx=i.worldCOMx-x,i.aabb.miny=i.worldCOMy-m,i.aabb.maxx=i.worldCOMx+x,i.aabb.maxy=i.worldCOMy+m}else{var f=t.polygon;if(f.zip_gverts&&null!=f.body){f.zip_gverts=!1,f.validate_lverts();var v=f.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var g=f.lverts.next,z=f.gverts.next;null!=z;){var b=z,w=g;g=g.next,b.x=f.body.posx+(f.body.axisy*w.x-f.body.axisx*w.y),b.y=f.body.posy+(w.x*f.body.axisx+w.y*f.body.axisy),z=z.next}}var S=f.gverts.next;f.aabb.minx=S.x,f.aabb.miny=S.y,f.aabb.maxx=S.x,f.aabb.maxy=S.y;for(var C=f.gverts.next.next;null!=C;){var M=C;M.x<f.aabb.minx&&(f.aabb.minx=M.x),M.x>f.aabb.maxx&&(f.aabb.maxx=M.x),M.y<f.aabb.miny&&(f.aabb.miny=M.y),M.y>f.aabb.maxy&&(f.aabb.maxy=M.y),C=C.next}}var P=this.aabb,k=t.aabb;k.minx<P.minx&&(P.minx=k.minx),k.maxx>P.maxx&&(P.maxx=k.maxx),k.miny<P.miny&&(P.miny=k.miny),k.maxy>P.maxy&&(P.maxy=k.maxy),e=e.next}}},qt.prototype.invalidate_aabb=function(){this.zip_aabb=!0},qt.prototype.localCOMx=null,qt.prototype.localCOMy=null,qt.prototype.zip_localCOM=null,qt.prototype.worldCOMx=null,qt.prototype.worldCOMy=null,qt.prototype.zip_worldCOM=null,qt.prototype.wrap_localCOM=null,qt.prototype.wrap_worldCOM=null,qt.prototype.invalidate_localCOM=function(){this.zip_localCOM=!0,this.zip_worldCOM=!0},qt.prototype.invalidate_worldCOM=function(){this.zip_worldCOM=!0},qt.prototype.validate_localCOM=function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var e=0,t=0,i=0,n=this.shapes.head;null!=n;){var r=n.elt;if(r.zip_localCOM){if(r.zip_localCOM=!1,1==r.type){var o=r.polygon;if(null==o.lverts.next.next)o.localCOMx=o.lverts.next.x,o.localCOMy=o.lverts.next.y;else if(null==o.lverts.next.next.next)o.localCOMx=o.lverts.next.x,o.localCOMy=o.lverts.next.y,o.localCOMx+=o.lverts.next.next.x,o.localCOMy+=o.lverts.next.next.y,o.localCOMx*=.5,o.localCOMy*=.5;else{o.localCOMx=0;var a=o.localCOMy=0,s=o.lverts.next,p=s,l=s=s.next;for(s=s.next;null!=s;){var h=s;a+=l.x*(h.y-p.y);var u=h.y*l.x-h.x*l.y;o.localCOMx+=(l.x+h.x)*u,o.localCOMy+=(l.y+h.y)*u,p=l,l=h,s=s.next}var d=s=o.lverts.next;a+=l.x*(d.y-p.y);var c=d.y*l.x-d.x*l.y;o.localCOMx+=(l.x+d.x)*c,o.localCOMy+=(l.y+d.y)*c,p=l;var _=s=s.next;a+=d.x*(_.y-p.y);var y=_.y*d.x-_.x*d.y;o.localCOMx+=(d.x+_.x)*y,o.localCOMy+=(d.y+_.y)*y;var x=a=1/(3*a);o.localCOMx*=x,o.localCOMy*=x}}null!=r.wrap_localCOM&&(r.wrap_localCOM.zpp_inner.x=r.localCOMx,r.wrap_localCOM.zpp_inner.y=r.localCOMy)}r.validate_area_inertia();var m=r.area*r.material.density;e+=r.localCOMx*m,t+=r.localCOMy*m,i+=r.area*r.material.density,n=n.next}if(0!=i){var f=1/i;this.localCOMx=e*f,this.localCOMy=t*f}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy),this.zip_mass&&0==this.massMode&&(this.zip_mass=!1,this.cmass=i,2==this.type?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=1/0,this.imass=this.smass=0))}},qt.prototype.validate_worldCOM=function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},qt.prototype.getlocalCOM=function(){this.validate_localCOM()},qt.prototype.getworldCOM=function(){this.validate_worldCOM()},qt.prototype.__immutable_midstep=function(e){},qt.prototype.clear=function(){for(;null!=this.shapes.head;){var e=this.shapes.pop_unsafe();e.removedFromBody(),e.body=null}this.invalidate_shapes(),this.pre_posx=0,this.pre_posy=0,this.posx=0,this.posy=0,this.velx=0,this.vely=0,this.forcex=0,this.forcey=0,this.kinvelx=0,this.kinvely=0,this.svelx=0,this.svely=0,this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=0;for(var t=this.shapes.head;null!=t;){var i=t.elt;1==i.type&&(i.polygon.invalidate_gverts(),i.polygon.invalidate_gaxi()),i.invalidate_worldCOM(),t=t.next}this.zip_worldCOM=!0,this.zip_axis=!0;for(var n=this.shapes.head;null!=n;){var r=n.elt;1==r.type&&(r.polygon.invalidate_gverts(),r.polygon.invalidate_gaxi()),r.invalidate_worldCOM(),n=n.next}this.zip_worldCOM=!0,this.axisx=0,this.axisy=1,this.zip_axis=!1,this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.norotate=!1,this.nomove=!1},qt.prototype.aabb_validate=function(){if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var e=this.shapes.head;null!=e;){var t=e.elt;if(t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var i=t.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var x=i.radius,m=i.radius;i.aabb.minx=i.worldCOMx-x,i.aabb.miny=i.worldCOMy-m,i.aabb.maxx=i.worldCOMx+x,i.aabb.maxy=i.worldCOMy+m}else{var f=t.polygon;if(f.zip_gverts&&null!=f.body){f.zip_gverts=!1,f.validate_lverts();var v=f.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var g=f.lverts.next,z=f.gverts.next;null!=z;){var b=z,w=g;g=g.next,b.x=f.body.posx+(f.body.axisy*w.x-f.body.axisx*w.y),b.y=f.body.posy+(w.x*f.body.axisx+w.y*f.body.axisy),z=z.next}}var S=f.gverts.next;f.aabb.minx=S.x,f.aabb.miny=S.y,f.aabb.maxx=S.x,f.aabb.maxy=S.y;for(var C=f.gverts.next.next;null!=C;){var M=C;M.x<f.aabb.minx&&(f.aabb.minx=M.x),M.x>f.aabb.maxx&&(f.aabb.maxx=M.x),M.y<f.aabb.miny&&(f.aabb.miny=M.y),M.y>f.aabb.maxy&&(f.aabb.maxy=M.y),C=C.next}}var P=this.aabb,k=t.aabb;k.minx<P.minx&&(P.minx=k.minx),k.maxx>P.maxx&&(P.maxx=k.maxx),k.miny<P.miny&&(P.miny=k.miny),k.maxy>P.maxy&&(P.maxy=k.maxy),e=e.next}}},qt.prototype.shapes_adder=function(e){if(e.zpp_inner.body==this)return!1;if(null!=e.zpp_inner.body&&e.zpp_inner.body.wrap_shapes.remove(e),e.zpp_inner.body=this,e.zpp_inner.addedToBody(),null!=this.space){var t=this.space,i=e.zpp_inner,n=i.body;n.world||(n.component.waket=t.stamp+(t.midstep?0:1),3==n.type&&(n.kinematicDelaySleep=!0),n.component.sleeping&&t.really_wake(n,!1)),t.bphase.insert(i),i.addedToSpace()}return 1==e.zpp_inner.type&&(e.zpp_inner.polygon.invalidate_gaxi(),e.zpp_inner.polygon.invalidate_gverts()),!0},qt.prototype.shapes_subber=function(e){null!=this.space&&this.space.removed_shape(e.zpp_inner),e.zpp_inner.body=null,e.zpp_inner.removedFromBody()},qt.prototype.shapes_invalidate=function(e){this.invalidate_shapes()},qt.prototype.addedToSpace=function(){null==oi.zpp_pool?this.component=new oi:(this.component=oi.zpp_pool,oi.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!0,(this.component.body=this).__iaddedToSpace()},qt.prototype.removedFromSpace=function(){for(;null!=this.arbiters.head;){var e=this.arbiters.pop_unsafe();if(e.cleared=!0,e.b2==this)for(var t=e.b1.arbiters,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Zo.zpp_pool,Zo.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}if(e.b1==this)for(var s=e.b2.arbiters,p=null,l=s.head;null!=l;){if(l.elt==e){var h,u;null==p?(u=(h=s.head).next,s.head=u,null==s.head&&(s.pushmod=!0)):(u=(h=p.next).next,null==(p.next=u)&&(s.pushmod=!0));var d=h;d.elt=null,d.next=Zo.zpp_pool,Zo.zpp_pool=d,s.modified=!0,s.length--,s.pushmod=!0;break}l=(p=l).next}null!=e.pair&&(e.pair.arb=null,e.pair=null),e.active=!1,this.space.f_arbiters.modified=!0}var c=this.component;c.body=null,c.constraint=null,c.next=oi.zpp_pool,oi.zpp_pool=c,this.component=null,this.__iremovedFromSpace()},qt.prototype.copy=function(){var e=(new re).zpp_inner;e.type=this.type,e.bulletEnabled=this.bulletEnabled,e.disableCCD=this.disableCCD;for(var t=this.shapes.head;null!=t;){var i=e.outer.zpp_inner.wrap_shapes,n=t.elt.outer.copy();i.zpp_inner.reverse_flag?i.push(n):i.unshift(n),t=t.next}if(e.posx=this.posx,e.posy=this.posy,e.velx=this.velx,e.vely=this.vely,e.forcex=this.forcex,e.forcey=this.forcey,e.rot=this.rot,e.angvel=this.angvel,e.torque=this.torque,e.kinvelx=this.kinvelx,e.kinvely=this.kinvely,e.kinangvel=this.kinangvel,e.svelx=this.svelx,e.svely=this.svely,this.zip_axis){e.zip_axis=!0;for(var r=e.shapes.head;null!=r;){var o=r.elt;1==o.type&&(o.polygon.invalidate_gverts(),o.polygon.invalidate_gaxi()),o.invalidate_worldCOM(),r=r.next}e.zip_worldCOM=!0}else e.axisx=this.axisx,e.axisy=this.axisy;return e.rot=this.rot,e.massMode=this.massMode,e.gravMassMode=this.gravMassMode,e.inertiaMode=this.inertiaMode,e.norotate=this.norotate,e.nomove=this.nomove,e.cmass=this.cmass,e.cinertia=this.cinertia,this.zip_mass?e.invalidate_mass():e.mass=this.mass,this.zip_gravMass?e.invalidate_gravMass():e.gravMass=this.gravMass,this.zip_gravMassScale?e.invalidate_gravMassScale():e.gravMassScale=this.gravMassScale,this.zip_inertia?e.invalidate_inertia():e.inertia=this.inertia,this.zip_aabb?e.zip_aabb=!0:(e.aabb.minx=this.aabb.minx,e.aabb.miny=this.aabb.miny,e.aabb.maxx=this.aabb.maxx,e.aabb.maxy=this.aabb.maxy),this.zip_localCOM?(e.zip_localCOM=!0,e.zip_worldCOM=!0):(e.localCOMx=this.localCOMx,e.localCOMy=this.localCOMy),this.zip_worldCOM?e.zip_worldCOM=!0:(e.worldCOMx=this.worldCOMx,e.worldCOMy=this.worldCOMy),this.copyto(e.outer),e.outer},qt.prototype.__class__=qt;var Yt=zpp_nape.phys.ZPP_Compound=function(){this.space=null,this.compound=null,this.depth=0,this.wrap_compounds=null,this.wrap_constraints=null,this.wrap_bodies=null,this.compounds=null,this.constraints=null,this.bodies=null,this.outer=null,qo.call(this),(this.icompound=this).depth=1,this.bodies=new mi,this.wrap_bodies=fn.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$(this,this.bodies_subber),this.constraints=new Ae,this.wrap_constraints=mn.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$(this,this.constraints_subber),this.compounds=new fi,this.wrap_compounds=gn.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$(this,this.compounds_subber)};Yt.__name__=["zpp_nape","phys","ZPP_Compound"],Yt.__super__=qo,Yt.prototype=Object.create(qo.prototype),Yt.prototype.outer=null,Yt.prototype.bodies=null,Yt.prototype.constraints=null,Yt.prototype.compounds=null,Yt.prototype.wrap_bodies=null,Yt.prototype.wrap_constraints=null,Yt.prototype.wrap_compounds=null,Yt.prototype.depth=null,Yt.prototype.compound=null,Yt.prototype.space=null,Yt.prototype.__imutable_midstep=function(e){},Yt.prototype.addedToSpace=function(){this.__iaddedToSpace()},Yt.prototype.removedFromSpace=function(){this.__iremovedFromSpace()},Yt.prototype.breakApart=function(){for(null!=this.space&&(this.__iremovedFromSpace(),this.space.nullInteractorType(this)),null!=this.compound?this.compound.compounds.remove(this):null!=this.space&&this.space.compounds.remove(this);null!=this.bodies.head;){var e=this.bodies.pop_unsafe();null!=(e.compound=this.compound)?this.compound.bodies.add(e):null!=this.space&&this.space.bodies.add(e),null!=this.space&&this.space.freshInteractorType(e)}for(;null!=this.constraints.head;){var t=this.constraints.pop_unsafe();null!=(t.compound=this.compound)?this.compound.constraints.add(t):null!=this.space&&this.space.constraints.add(t)}for(;null!=this.compounds.head;){var i=this.compounds.pop_unsafe();null!=(i.compound=this.compound)?this.compound.compounds.add(i):null!=this.space&&this.space.compounds.add(i),null!=this.space&&this.space.freshInteractorType(i)}this.compound=null,this.space=null},Yt.prototype.bodies_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_bodies.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_bodies.remove(e),null!=(e.zpp_inner.compound=this).space&&this.space.addBody(e.zpp_inner),!0)},Yt.prototype.bodies_subber=function(e){(e.zpp_inner.compound=null)!=this.space&&this.space.remBody(e.zpp_inner)},Yt.prototype.constraints_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_constraints.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_constraints.remove(e),null!=(e.zpp_inner.compound=this).space&&this.space.addConstraint(e.zpp_inner),!0)},Yt.prototype.constraints_subber=function(e){(e.zpp_inner.compound=null)!=this.space&&this.space.remConstraint(e.zpp_inner)},Yt.prototype.compounds_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_compounds.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_compounds.remove(e),e.zpp_inner.compound=this,e.zpp_inner.depth=this.depth+1,null!=this.space&&this.space.addCompound(e.zpp_inner),!0)},Yt.prototype.compounds_subber=function(e){e.zpp_inner.compound=null,e.zpp_inner.depth=1,null!=this.space&&this.space.remCompound(e.zpp_inner)},Yt.prototype.copy=function(e,t){var i=null==e;null==e&&(e=[]),null==t&&(t=[]);for(var n=new ie,r=this.compounds.head;null!=r;){var o=r.elt.copy(e,t);if(o.zpp_inner.immutable_midstep("Compound::compound"),(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer)!=n&&(null!=(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer)&&(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(o),null!=n)){var a=n.zpp_inner.wrap_compounds;a.zpp_inner.reverse_flag?a.push(o):a.unshift(o)}r=r.next}for(var s=this.bodies.head;null!=s;){var p=s.elt,l=p.outer.copy();if(e.push(rt.dict(p.id,l)),(null==l.zpp_inner.compound?null:l.zpp_inner.compound.outer)!=n&&(null!=(null==l.zpp_inner.compound?null:l.zpp_inner.compound.outer)&&(null==l.zpp_inner.compound?null:l.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(l),null!=n)){var h=n.zpp_inner.wrap_bodies;h.zpp_inner.reverse_flag?h.push(l):h.unshift(l)}s=s.next}for(var u=this.constraints.head;null!=u;){var d=u.elt.copy(e,t);if((null==d.zpp_inner.compound?null:d.zpp_inner.compound.outer)!=n&&(null!=(null==d.zpp_inner.compound?null:d.zpp_inner.compound.outer)&&(null==d.zpp_inner.compound?null:d.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(d),null!=n)){var c=n.zpp_inner.wrap_constraints;c.zpp_inner.reverse_flag?c.push(d):c.unshift(d)}u=u.next}if(i)for(;0<t.length;)for(var _=t.pop(),y=0;y<e.length;){var x=e[y];if(++y,x.id==_.id){_.cb(x.bc);break}}return this.copyto(n),n},Yt.prototype.__class__=Yt;var Zt=zpp_nape.phys.ZPP_FluidProperties=function(){this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.density=0,this.viscosity=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new xi,this.density=this.viscosity=1,this.wrap_gravity=null,this.gravityx=0,this.gravityy=0};Zt.__name__=["zpp_nape","phys","ZPP_FluidProperties"],Zt.prototype.next=null,Zt.prototype.userData=null,Zt.prototype.outer=null,Zt.prototype.wrapper=function(){if(null==this.outer){this.outer=new se;var e=this.outer.zpp_inner;e.outer=null,e.next=Zt.zpp_pool,Zt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Zt.prototype.free=function(){this.outer=null},Zt.prototype.alloc=function(){},Zt.prototype.shapes=null,Zt.prototype.wrap_shapes=null,Zt.prototype.feature_cons=function(){this.shapes=new xi},Zt.prototype.addShape=function(e){this.shapes.add(e)},Zt.prototype.remShape=function(e){this.shapes.remove(e)},Zt.prototype.copy=function(){var e;return null==Zt.zpp_pool?e=new Zt:(e=Zt.zpp_pool,Zt.zpp_pool=e.next,e.next=null),e.viscosity=this.viscosity,e.density=this.density,e},Zt.prototype.viscosity=null,Zt.prototype.density=null,Zt.prototype.gravityx=null,Zt.prototype.gravityy=null,Zt.prototype.wrap_gravity=null,Zt.prototype.gravity_invalidate=function(e){this.gravityx=e.x,this.gravityy=e.y,this.invalidate()},Zt.prototype.gravity_validate=function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},Zt.prototype.getgravity=function(){var e,t=this.gravityx,i=this.gravityy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gravity=e,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$(this,this.gravity_validate)},Zt.prototype.invalidate=function(){for(var e=this.shapes.head;null!=e;)e.elt.invalidate_fluidprops(),e=e.next},Zt.prototype.__class__=Zt;var Kt=zpp_nape.phys.ZPP_Material=function(){this.rollingFriction=0,this.elasticity=0,this.density=0,this.staticFriction=0,this.dynamicFriction=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new xi,this.elasticity=0,this.dynamicFriction=1,this.staticFriction=2,this.density=.001,this.rollingFriction=.01};Kt.__name__=["zpp_nape","phys","ZPP_Material"],Kt.prototype.next=null,Kt.prototype.userData=null,Kt.prototype.outer=null,Kt.prototype.wrapper=function(){if(null==this.outer){this.outer=new de;var e=this.outer.zpp_inner;e.outer=null,e.next=Kt.zpp_pool,Kt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Kt.prototype.free=function(){this.outer=null},Kt.prototype.alloc=function(){},Kt.prototype.shapes=null,Kt.prototype.wrap_shapes=null,Kt.prototype.feature_cons=function(){this.shapes=new xi},Kt.prototype.addShape=function(e){this.shapes.add(e)},Kt.prototype.remShape=function(e){this.shapes.remove(e)},Kt.prototype.dynamicFriction=null,Kt.prototype.staticFriction=null,Kt.prototype.density=null,Kt.prototype.elasticity=null,Kt.prototype.rollingFriction=null,Kt.prototype.copy=function(){var e=new Kt;return e.dynamicFriction=this.dynamicFriction,e.staticFriction=this.staticFriction,e.density=this.density,e.elasticity=this.elasticity,e.rollingFriction=this.rollingFriction,e},Kt.prototype.set=function(e){this.dynamicFriction=e.dynamicFriction,this.staticFriction=e.staticFriction,this.density=e.density,this.elasticity=e.elasticity,this.rollingFriction=e.rollingFriction},Kt.prototype.invalidate=function(e){for(var t=this.shapes.head;null!=t;)t.elt.invalidate_material(e),t=t.next},Kt.prototype.__class__=Kt;var Jt=zpp_nape.shape.ZPP_Shape=function(e){var t;this.zip_aabb=!1,this.aabb=null,this.pairs=null,this.node=null,this.sweep=null,this.sensorEnabled=!1,this.fluidEnabled=!1,this.fluidProperties=null,this.filter=null,this.material=null,this.refmaterial=null,this.polygon=null,this.circle=null,this.sweepCoef=0,this.zip_sweepRadius=!1,this.sweepRadius=0,this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_angDrag=!1,this.angDrag=0,this.inertia=0,this.zip_area_inertia=!1,this.area=0,this.type=0,this.body=null,this.outer=null,qo.call(this),this.pairs=new Pi,(this.ishape=this).type=e,null==Oo.zpp_pool?t=new Oo:(t=Oo.zpp_pool,Oo.zpp_pool=t.next,t.next=null),t.minx=0,t.miny=0,t.maxx=0,t.maxy=0,this.aabb=t,this.aabb._immutable=!0,this.aabb._validate=$(this,this.aabb_validate),this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.fluidEnabled=!1,this.sensorEnabled=!1,this.fluidProperties=null,this.body=null,this.refmaterial=new Kt,this.sweepRadius=this.sweepCoef=0};Jt.__name__=["zpp_nape","shape","ZPP_Shape"],Jt.__super__=qo,Jt.prototype=Object.create(qo.prototype),Jt.prototype.outer=null,Jt.prototype.body=null,Jt.prototype.type=null,Jt.prototype.isCircle=function(){return 0==this.type},Jt.prototype.isPolygon=function(){return 1==this.type},Jt.prototype.area=null,Jt.prototype.zip_area_inertia=null,Jt.prototype.inertia=null,Jt.prototype.angDrag=null,Jt.prototype.zip_angDrag=null,Jt.prototype.localCOMx=null,Jt.prototype.localCOMy=null,Jt.prototype.zip_localCOM=null,Jt.prototype.worldCOMx=null,Jt.prototype.worldCOMy=null,Jt.prototype.zip_worldCOM=null,Jt.prototype.wrap_localCOM=null,Jt.prototype.wrap_worldCOM=null,Jt.prototype.sweepRadius=null,Jt.prototype.zip_sweepRadius=null,Jt.prototype.sweepCoef=null,Jt.prototype.invalidate_sweepRadius=function(){this.zip_sweepRadius=!0},Jt.prototype.validate_sweepRadius=function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,0==this.type?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},Jt.prototype.circle=null,Jt.prototype.polygon=null,Jt.prototype.refmaterial=null,Jt.prototype.material=null,Jt.prototype.filter=null,Jt.prototype.fluidProperties=null,Jt.prototype.fluidEnabled=null,Jt.prototype.sensorEnabled=null,Jt.prototype.sweep=null,Jt.prototype.node=null,Jt.prototype.pairs=null,Jt.prototype.clear=function(){0==this.type?this.circle.__clear():this.polygon.__clear()},Jt.prototype.aabb=null,Jt.prototype.zip_aabb=null,Jt.prototype.validate_aabb=function(){if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var e=this.circle;if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var t=e.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var p=n=t.lverts.next;i+=o.x*(p.y-r.y);var l=p.y*o.x-p.x*o.y;t.localCOMx+=(o.x+p.x)*l,t.localCOMy+=(o.y+p.y)*l,r=o;var h=n=n.next;i+=p.x*(h.y-r.y);var u=h.y*p.x-h.x*p.y;t.localCOMx+=(p.x+h.x)*u,t.localCOMy+=(p.y+h.y)*u;var d=i=1/(3*i);t.localCOMx*=d,t.localCOMy*=d}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var c=e.body;c.zip_axis&&(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var _=e.radius,y=e.radius;e.aabb.minx=e.worldCOMx-_,e.aabb.miny=e.worldCOMy-y,e.aabb.maxx=e.worldCOMx+_,e.aabb.maxy=e.worldCOMy+y}else{var x=this.polygon;if(x.zip_gverts&&null!=x.body){x.zip_gverts=!1,x.validate_lverts();var m=x.body;m.zip_axis&&(m.zip_axis=!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot));for(var f=x.lverts.next,v=x.gverts.next;null!=v;){var g=v,z=f;f=f.next,g.x=x.body.posx+(x.body.axisy*z.x-x.body.axisx*z.y),g.y=x.body.posy+(z.x*x.body.axisx+z.y*x.body.axisy),v=v.next}}var b=x.gverts.next;x.aabb.minx=b.x,x.aabb.miny=b.y,x.aabb.maxx=b.x,x.aabb.maxy=b.y;for(var w=x.gverts.next.next;null!=w;){var S=w;S.x<x.aabb.minx&&(x.aabb.minx=S.x),S.x>x.aabb.maxx&&(x.aabb.maxx=S.x),S.y<x.aabb.miny&&(x.aabb.miny=S.y),S.y>x.aabb.maxy&&(x.aabb.maxy=S.y),w=w.next}}},Jt.prototype.force_validate_aabb=function(){if(0==this.type){var e=this.circle;e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy),e.aabb.minx=e.worldCOMx-e.radius,e.aabb.miny=e.worldCOMy-e.radius,e.aabb.maxx=e.worldCOMx+e.radius,e.aabb.maxy=e.worldCOMy+e.radius}else{var t=this.polygon,i=t.lverts.next,n=t.gverts.next,r=i;i=i.next,n.x=t.body.posx+(t.body.axisy*r.x-t.body.axisx*r.y),n.y=t.body.posy+(r.x*t.body.axisx+r.y*t.body.axisy),t.aabb.minx=n.x,t.aabb.miny=n.y,t.aabb.maxx=n.x,t.aabb.maxy=n.y;for(var o=t.gverts.next.next;null!=o;){var a=o,s=i;i=i.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),a.x<t.aabb.minx&&(t.aabb.minx=a.x),a.x>t.aabb.maxx&&(t.aabb.maxx=a.x),a.y<t.aabb.miny&&(t.aabb.miny=a.y),a.y>t.aabb.maxy&&(t.aabb.maxy=a.y),o=o.next}}},Jt.prototype.invalidate_aabb=function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.validate_area_inertia=function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,0==this.type?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},Jt.prototype.validate_angDrag=function(){(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)&&(this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,0==this.type?this.circle.__validate_angDrag():this.polygon.__validate_angDrag())},Jt.prototype.validate_localCOM=function(){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},Jt.prototype.validate_worldCOM=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var d=this.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}},Jt.prototype.getworldCOM=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var d=this.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy},Jt.prototype.invalidate_area_inertia=function(){if(this.zip_area_inertia=!0,null!=this.body){var e=this.body;e.zip_localCOM=!0,e.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}},Jt.prototype.invalidate_angDrag=function(){this.zip_angDrag=!0},Jt.prototype.invalidate_localCOM=function(){if(this.zip_localCOM=!0,this.invalidate_area_inertia(),0==this.type&&(this.zip_sweepRadius=!0),this.invalidate_angDrag(),this.invalidate_worldCOM(),null!=this.body){var e=this.body;e.zip_localCOM=!0,e.zip_worldCOM=!0}},Jt.prototype.invalidate_worldCOM=function(){this.zip_worldCOM=!0,this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.invalidate_material=function(e){if(0!=(e&Kt.WAKE)&&this.wake(),0!=(e&Kt.ARBITERS)&&null!=this.body&&this.body.refreshArbiters(),0!=(e&Kt.PROPS)&&null!=this.body){var t=this.body;t.zip_localCOM=!0,t.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}0!=(e&Kt.ANGDRAG)&&this.invalidate_angDrag(),this.refmaterial.set(this.material)},Jt.prototype.invalidate_filter=function(){this.wake()},Jt.prototype.invalidate_fluidprops=function(){this.fluidEnabled&&this.wake()},Jt.prototype.aabb_validate=function(){if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var e=this.circle;if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var t=e.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var p=n=t.lverts.next;i+=o.x*(p.y-r.y);var l=p.y*o.x-p.x*o.y;t.localCOMx+=(o.x+p.x)*l,t.localCOMy+=(o.y+p.y)*l,r=o;var h=n=n.next;i+=p.x*(h.y-r.y);var u=h.y*p.x-h.x*p.y;t.localCOMx+=(p.x+h.x)*u,t.localCOMy+=(p.y+h.y)*u;var d=i=1/(3*i);t.localCOMx*=d,t.localCOMy*=d}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var c=e.body;c.zip_axis&&(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var _=e.radius,y=e.radius;e.aabb.minx=e.worldCOMx-_,e.aabb.miny=e.worldCOMy-y,e.aabb.maxx=e.worldCOMx+_,e.aabb.maxy=e.worldCOMy+y}else{var x=this.polygon;if(x.zip_gverts&&null!=x.body){x.zip_gverts=!1,x.validate_lverts();var m=x.body;m.zip_axis&&(m.zip_axis=!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot));for(var f=x.lverts.next,v=x.gverts.next;null!=v;){var g=v,z=f;f=f.next,g.x=x.body.posx+(x.body.axisy*z.x-x.body.axisx*z.y),g.y=x.body.posy+(z.x*x.body.axisx+z.y*x.body.axisy),v=v.next}}var b=x.gverts.next;x.aabb.minx=b.x,x.aabb.miny=b.y,x.aabb.maxx=b.x,x.aabb.maxy=b.y;for(var w=x.gverts.next.next;null!=w;){var S=w;S.x<x.aabb.minx&&(x.aabb.minx=S.x),S.x>x.aabb.maxx&&(x.aabb.maxx=S.x),S.y<x.aabb.miny&&(x.aabb.miny=S.y),S.y>x.aabb.maxy&&(x.aabb.maxy=S.y),w=w.next}}},Jt.prototype.setMaterial=function(e){this.material!=e&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},Jt.prototype.setFilter=function(e){this.filter!=e&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.wake())},Jt.prototype.setFluid=function(e){this.fluidProperties!=e&&(null!=this.body&&null!=this.body.space&&null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this),this.fluidProperties=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.fluidEnabled&&this.wake())},Jt.prototype.__immutable_midstep=function(e){},Jt.prototype.addedToBody=function(){this.invalidate_worldCOM(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.removedFromBody=function(){},Jt.prototype.addedToSpace=function(){this.__iaddedToSpace(),this.material.shapes.add(this),this.filter.shapes.add(this),null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},Jt.prototype.removedFromSpace=function(){this.__iremovedFromSpace(),this.material.shapes.remove(this),this.filter.shapes.remove(this),null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},Jt.prototype.copy=function(){var e=null;e=0==this.type?this.circle.__copy():this.polygon.__copy(),this.zip_area_inertia?e.invalidate_area_inertia():(e.area=this.area,e.inertia=this.inertia),this.zip_sweepRadius?e.zip_sweepRadius=!0:(e.sweepRadius=this.sweepRadius,e.sweepCoef=this.sweepCoef),this.zip_angDrag?e.invalidate_angDrag():e.angDrag=this.angDrag,this.zip_aabb?(e.zip_aabb=!0,null!=e.body&&(e.body.zip_aabb=!0)):(e.aabb.minx=this.aabb.minx,e.aabb.miny=this.aabb.miny,e.aabb.maxx=this.aabb.maxx,e.aabb.maxy=this.aabb.maxy);var t=e.material;t.outer=null,t.next=Kt.zpp_pool,Kt.zpp_pool=t;var i=e.filter;return i.outer=null,i.next=mt.zpp_pool,mt.zpp_pool=i,e.material=this.material,e.filter=this.filter,null!=this.fluidProperties&&(e.fluidProperties=this.fluidProperties),e.fluidEnabled=this.fluidEnabled,e.sensorEnabled=this.sensorEnabled,null!=this.userData&&(e.userData=_.copy(this.userData)),this.copyto(e.outer),e.outer},Jt.prototype.__class__=Jt;var Qt=zpp_nape.shape.ZPP_Circle=function(){this.radius=0,this.outer_zn=null,Jt.call(this,0),(this.circle=this).zip_localCOM=!1};Qt.__name__=["zpp_nape","shape","ZPP_Circle"],Qt.__super__=Jt,Qt.prototype=Object.create(Jt.prototype),Qt.prototype.outer_zn=null,Qt.prototype.radius=null,Qt.prototype.__clear=function(){},Qt.prototype.invalidate_radius=function(){this.invalidate_area_inertia(),this.invalidate_angDrag(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),null!=this.body&&this.body.wake()},Qt.prototype.localCOM_validate=function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy},Qt.prototype.localCOM_invalidate=function(e){this.localCOMx=e.x,this.localCOMy=e.y,this.invalidate_localCOM(),null!=this.body&&this.body.wake()},Qt.prototype.setupLocalCOM=function(){var e,t=this.localCOMx,i=this.localCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_localCOM=e,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$(this,this.localCOM_invalidate)},Qt.prototype.__validate_aabb=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var d=this.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}var c=this.radius,_=this.radius;this.aabb.minx=this.worldCOMx-c,this.aabb.miny=this.worldCOMy-_,this.aabb.maxx=this.worldCOMx+c,this.aabb.maxy=this.worldCOMy+_},Qt.prototype._force_validate_aabb=function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy),this.aabb.minx=this.worldCOMx-this.radius,this.aabb.miny=this.worldCOMy-this.radius,this.aabb.maxx=this.worldCOMx+this.radius,this.aabb.maxy=this.worldCOMy+this.radius},Qt.prototype.__validate_sweepRadius=function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy),this.sweepRadius=this.sweepCoef+this.radius},Qt.prototype.__validate_area_inertia=function(){var e=this.radius*this.radius;this.area=e*Math.PI,this.inertia=.5*e+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},Qt.prototype.__validate_angDrag=function(){var e=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,t=this.radius*this.radius;this.angDrag=(e+2*t)*(this.material.dynamicFriction*Qs.fluidAngularDragFriction)+.5*Qs.fluidAngularDrag*(1+Qs.fluidVacuumDrag)*e,this.angDrag/=2*(e+.5*t)},Qt.prototype.__scale=function(e,t){var i=((e<0?-e:e)+(t<0?-t:t))/2;this.radius*=i<0?-i:i,this.invalidate_radius(),0<this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy&&(this.localCOMx*=e,this.localCOMy*=t,this.invalidate_localCOM())},Qt.prototype.__translate=function(e,t){this.localCOMx+=e,this.localCOMy+=t,this.invalidate_localCOM()},Qt.prototype.__rotate=function(e,t){if(0<this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy){var i,n;i=t*this.localCOMx-e*this.localCOMy,n=this.localCOMx*e+this.localCOMy*t,this.localCOMx=i,this.localCOMy=n,this.invalidate_localCOM()}},Qt.prototype.__transform=function(e){var t=e.zpp_inner.a*e.zpp_inner.d-e.zpp_inner.b*e.zpp_inner.c;t<0&&(t=-t),this.radius*=Math.sqrt(t);var i=e.zpp_inner.a*this.localCOMx+e.zpp_inner.b*this.localCOMy+e.zpp_inner.tx;this.localCOMy=e.zpp_inner.c*this.localCOMx+e.zpp_inner.d*this.localCOMy+e.zpp_inner.ty,this.localCOMx=i,this.invalidate_radius(),this.invalidate_localCOM()},Qt.prototype.__copy=function(){var e=new ce(this.radius).zpp_inner_zn;return e.localCOMx=this.localCOMx,e.localCOMy=this.localCOMy,e.zip_localCOM=!1,e},Qt.prototype.__class__=Qt;var $t=zpp_nape.shape.ZPP_Edge=function(){this.tp1=0,this.tp0=0,this.gp1=null,this.lp1=null,this.gp0=null,this.lp0=null,this.gprojection=0,this.lprojection=0,this.length=0,this.wrap_gnorm=null,this.gnormy=0,this.gnormx=0,this.wrap_lnorm=null,this.lnormy=0,this.lnormx=0,this.outer=null,this.polygon=null,this.next=null,this.lnormx=0,this.lnormy=0,this.gnormx=0,this.gnormy=0,this.length=0,this.lprojection=0,this.gprojection=0};$t.__name__=["zpp_nape","shape","ZPP_Edge"],$t.prototype.next=null,$t.prototype.free=function(){this.polygon=null},$t.prototype.alloc=function(){},$t.prototype.polygon=null,$t.prototype.outer=null,$t.prototype.wrapper=function(){return null==this.outer&&($t.internal=!0,this.outer=new _e,$t.internal=!1,this.outer.zpp_inner=this),this.outer},$t.prototype.lnormx=null,$t.prototype.lnormy=null,$t.prototype.wrap_lnorm=null,$t.prototype.gnormx=null,$t.prototype.gnormy=null,$t.prototype.wrap_gnorm=null,$t.prototype.length=null,$t.prototype.lprojection=null,$t.prototype.gprojection=null,$t.prototype.lp0=null,$t.prototype.gp0=null,$t.prototype.lp1=null,$t.prototype.gp1=null,$t.prototype.tp0=null,$t.prototype.tp1=null,$t.prototype.lnorm_validate=function(){this.polygon.validate_laxi(),this.wrap_lnorm.zpp_inner.x=this.lnormx,this.wrap_lnorm.zpp_inner.y=this.lnormy},$t.prototype.gnorm_validate=function(){var e=this.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}this.wrap_gnorm.zpp_inner.x=this.gnormx,this.wrap_gnorm.zpp_inner.y=this.gnormy},$t.prototype.getlnorm=function(){var e,t=this.lnormx,i=this.lnormy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_lnorm=e,this.wrap_lnorm.zpp_inner._immutable=!0,this.wrap_lnorm.zpp_inner._validate=$(this,this.lnorm_validate)},$t.prototype.getgnorm=function(){var e,t=this.gnormx,i=this.gnormy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gnorm=e,this.wrap_gnorm.zpp_inner._immutable=!0,this.wrap_gnorm.zpp_inner._validate=$(this,this.gnorm_validate)},$t.prototype.__class__=$t;var ei=zpp_nape.shape.ZPP_Polygon=function(){this.zip_sanitation=!1,this.zip_valid=!1,this.zip_gaxi=!1,this.zip_gverts=!1,this.zip_laxi=!1,this.zip_lverts=!1,this.reverse_flag=!1,this.edgeCnt=0,this.wrap_edges=null,this.edges=null,this.wrap_gverts=null,this.gverts=null,this.wrap_lverts=null,this.lverts=null,this.outer_zn=null,Jt.call(this,1),(this.polygon=this).lverts=new ep,this.gverts=new ep,this.edges=new ki,this.edgeCnt=0};ei.__name__=["zpp_nape","shape","ZPP_Polygon"],ei.__super__=Jt,ei.prototype=Object.create(Jt.prototype),ei.prototype.outer_zn=null,ei.prototype.lverts=null,ei.prototype.wrap_lverts=null,ei.prototype.gverts=null,ei.prototype.wrap_gverts=null,ei.prototype.edges=null,ei.prototype.wrap_edges=null,ei.prototype.edgeCnt=null,ei.prototype.reverse_flag=null,ei.prototype.__clear=function(){},ei.prototype.lverts_pa_invalidate=function(e){this.invalidate_lverts()},ei.prototype.gverts_pa_validate=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.lverts_post_adder=function(e){e.zpp_inner._invalidate=$(this,this.lverts_pa_invalidate);for(var t,i=null,n=null,r=this.lverts.next;null!=r&&r!=e.zpp_inner;)i=null==i?this.gverts.next:i.next,n=null==n?this.edges.head:n.next,r=r.next;null==ep.zpp_pool?t=new ep:(t=ep.zpp_pool,ep.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!0,t.x=0,t.y=0;var o,a,s,p=t;(this.gverts.insert(i,p),null!=this.lverts.next.next)&&(null==this.lverts.next.next.next?(null==$t.zpp_pool?o=new $t:(o=$t.zpp_pool,$t.zpp_pool=o.next,o.next=null),(o.polygon=this).edges.add(o),null==$t.zpp_pool?a=new $t:(a=$t.zpp_pool,$t.zpp_pool=a.next,a.next=null),(a.polygon=this).edges.add(a),this.edgeCnt+=2):(null==$t.zpp_pool?s=new $t:(s=$t.zpp_pool,$t.zpp_pool=s.next,s.next=null),(s.polygon=this).edges.insert(n,s),this.edgeCnt++));p._validate=$(this,this.gverts_pa_validate)},ei.prototype.lverts_subber=function(e){this.cleanup_lvert(e.zpp_inner)},ei.prototype.lverts_invalidate=function(e){this.invalidate_lverts()},ei.prototype.lverts_validate=function(){this.validate_lverts()},ei.prototype.gverts_validate=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.edges_validate=function(){this.validate_lverts()},ei.prototype.getlverts=function(){this.wrap_lverts=xn.get(this.lverts),this.wrap_lverts.zpp_inner.post_adder=$(this,this.lverts_post_adder),this.wrap_lverts.zpp_inner.subber=$(this,this.lverts_subber),this.wrap_lverts.zpp_inner._invalidate=$(this,this.lverts_invalidate),this.wrap_lverts.zpp_inner._validate=$(this,this.lverts_validate),this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},ei.prototype.getgverts=function(){this.wrap_gverts=xn.get(this.gverts,!0),this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_gverts.zpp_inner._validate=$(this,this.gverts_validate)},ei.prototype.getedges=function(){this.wrap_edges=In.get(this.edges,!0),this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_edges.zpp_inner._validate=$(this,this.edges_validate)},ei.prototype.zip_lverts=null,ei.prototype.invalidate_lverts=function(){this.invalidate_laxi(),this.invalidate_area_inertia(),this.invalidate_angDrag(),this.invalidate_localCOM(),this.invalidate_gverts(),this.zip_lverts=!0,this.zip_valid=!0,this.zip_sanitation=!0,null!=this.body&&this.body.wake()},ei.prototype.zip_laxi=null,ei.prototype.invalidate_laxi=function(){this.invalidate_gaxi(),this.zip_sweepRadius=!0,this.zip_laxi=!0},ei.prototype.zip_gverts=null,ei.prototype.invalidate_gverts=function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),this.zip_gverts=!0},ei.prototype.zip_gaxi=null,ei.prototype.invalidate_gaxi=function(){this.zip_gaxi=!0},ei.prototype.zip_valid=null,ei.prototype.validation=null,ei.prototype.valid=function(){if(this.zip_valid){if(this.zip_valid=!1,this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real()),this.lverts.length<3)return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new be,Uo.internal=!1),this.validation=Uo.ValidationResult_DEGENERATE;if(this.validate_lverts(),this.validate_area_inertia(),this.area<Qs.epsilon)return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new be,Uo.internal=!1),this.validation=Uo.ValidationResult_DEGENERATE;var e=!1,t=!1,i=!0,n=this.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a,s,p=n;a=p.x-o.x,s=p.y-o.y;var l;l=o.x-r.x;var h=(o.y-r.y)*a-l*s;if(h>Qs.epsilon?t=!0:h<-Qs.epsilon&&(e=!0),t&&e){i=!1;break}r=o,o=p,n=n.next}if(i){for(var u=n=this.lverts.next;;){var d,c;d=u.x-o.x,c=u.y-o.y;var _;_=o.x-r.x;var y=(o.y-r.y)*d-_*c;if(y>Qs.epsilon?t=!0:y<-Qs.epsilon&&(e=!0),t&&e){i=!1;break}break}if(i){r=o,o=u;for(var x=n=n.next;;){var m,f;m=x.x-u.x,f=x.y-u.y;var v;v=u.x-r.x;var g=(u.y-r.y)*m-v*f;if(g>Qs.epsilon?t=!0:g<-Qs.epsilon&&(e=!0),t&&e)break;break}}}if(t&&e)return null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new be,Uo.internal=!1),this.validation=Uo.ValidationResult_CONCAVE;var z=!0,b=!0,w=this.lverts.next,S=w;for(w=w.next;null!=w;){var C=w;if(!z){b=!1;break}var M=!0,P=this.lverts.next,k=P;for(P=P.next;null!=P;){var T=P;if(S!=k&&S!=T&&C!=k&&C!=T){var G,O;G=S.x-k.x,O=S.y-k.y;var A,E;A=C.x-S.x;var I,B,L=(E=C.y-S.y)*(I=T.x-k.x)-A*(B=T.y-k.y);if(L*L>Qs.epsilon){var D=(B*G-I*O)*(L=1/L);if(D>Qs.epsilon&&D<1-Qs.epsilon){var R=(E*G-A*O)*L;if(R>Qs.epsilon&&R<1-Qs.epsilon){M=z=!1;break}}}k=T,P=P.next}else k=T,P=P.next}if(M)for(;;){var F=this.lverts.next;if(S==k||S==F||C==k||C==F)break;var j,N;j=S.x-k.x,N=S.y-k.y;var U,H;U=C.x-S.x;var V,W,X=(H=C.y-S.y)*(V=F.x-k.x)-U*(W=F.y-k.y);if(X*X>Qs.epsilon){var q=(W*j-V*N)*(X=1/X);if(q>Qs.epsilon&&q<1-Qs.epsilon){var Y=(H*j-U*N)*X;if(Y>Qs.epsilon&&Y<1-Qs.epsilon){z=!1;break}}}break}S=C,w=w.next}if(b)for(;;){var Z=this.lverts.next;if(!z)break;var K=!0,J=this.lverts.next,Q=J;for(J=J.next;null!=J;){var $=J;if(S!=Q&&S!=$&&Z!=Q&&Z!=$){var ee,te;ee=S.x-Q.x,te=S.y-Q.y;var ie,ne;ie=Z.x-S.x;var re,oe,ae=(ne=Z.y-S.y)*(re=$.x-Q.x)-ie*(oe=$.y-Q.y);if(ae*ae>Qs.epsilon){var se=(oe*ee-re*te)*(ae=1/ae);if(se>Qs.epsilon&&se<1-Qs.epsilon){var pe=(ne*ee-ie*te)*ae;if(pe>Qs.epsilon&&pe<1-Qs.epsilon){K=z=!1;break}}}Q=$,J=J.next}else Q=$,J=J.next}if(K)for(;;){var le=this.lverts.next;if(S==Q||S==le||Z==Q||Z==le)break;var he,ue;he=S.x-Q.x,ue=S.y-Q.y;var de,ce;de=Z.x-S.x;var _e,ye,xe=(ce=Z.y-S.y)*(_e=le.x-Q.x)-de*(ye=le.y-Q.y);if(xe*xe>Qs.epsilon){var me=(ye*he-_e*ue)*(xe=1/xe);if(me>Qs.epsilon&&me<1-Qs.epsilon){var fe=(ce*he-de*ue)*xe;if(fe>Qs.epsilon&&fe<1-Qs.epsilon){z=!1;break}}}break}break}return z?(null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new be,Uo.internal=!1),this.validation=Uo.ValidationResult_VALID):(null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new be,Uo.internal=!1),this.validation=Uo.ValidationResult_SELF_INTERSECTING)}return this.validation},ei.prototype.validate_lverts=function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),this.area<0&&(this.reverse_vertices(),this.area=-this.area)))},ei.prototype.cleanup_lvert=function(e){for(var t=null,i=null,n=this.lverts.next;null!=n&&n!=e;)t=null==t?this.gverts.next:t.next,i=null==i?this.edges.head:i.next,n=n.next;var r=null==t?this.gverts.next:t.next;this.gverts.erase(t);var o=r;if(null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,2==this.edgeCnt){var a=this.edges.pop_unsafe(),s=a;s.polygon=null,s.next=$t.zpp_pool,$t.zpp_pool=s;var p=a=this.edges.pop_unsafe();p.polygon=null,p.next=$t.zpp_pool,$t.zpp_pool=p,this.edgeCnt=0}else if(0!=this.edgeCnt){var l=null==i?this.edges.head.elt:i.next.elt;this.edges.erase(i);var h=l;h.polygon=null,h.next=$t.zpp_pool,$t.zpp_pool=h,this.edgeCnt--}},ei.prototype.zip_sanitation=null,ei.prototype.splice_collinear=function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},ei.prototype.splice_collinear_real=function(){if(null!=this.lverts.next&&null!=this.lverts.next.next&&null!=this.lverts.next.next.next){for(var e=null,t=this.lverts.next;null!=t;){var i,n,r=t,o=null==t.next?this.lverts.next:t.next,a=r.x,s=r.y;t=(i=a-o.x)*i+(n=s-o.y)*n<Qs.epsilon*Qs.epsilon?(this.cleanup_lvert(t),this.lverts.erase(e)):(e=t).next}if(null!=this.lverts.next)for(var p;;){p=!1;for(var l=this.lverts.next;null!=l;){var h,u,d=null==l.next?this.lverts.next:l.next,c=l,_=d,y=null==d.next?this.lverts.next:d.next;h=_.x-c.x,u=_.y-c.y;var x;x=y.x-_.x;var m=(y.y-_.y)*h-x*u;l=(m*m>=Qs.epsilon*Qs.epsilon||(this.cleanup_lvert(d),this.lverts.erase(null==l.next?null:l),p=!0),l.next)}if(!p)break}}},ei.prototype.reverse_vertices=function(){this.lverts.reverse(),this.gverts.reverse(),this.edges.reverse(),this.edges.insert(this.edges.iterator_at(this.edgeCnt-1),this.edges.pop_unsafe()),this.reverse_flag=!this.reverse_flag,null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},ei.prototype.validate_laxi=function(){if(this.zip_laxi){this.zip_laxi=!1,this.validate_lverts();var e=this.edges.head,t=this.lverts.next,i=t;for(t=t.next;null!=t;){var n=t,r=e.elt;e=e.next,r.lp0=i,r.lp1=n;var o=0,a=0;o=i.x-n.x,a=i.y-n.y;var s=Math.sqrt(o*o+a*a),p=1/(r.length=s),l=o*=p;o=-(a*=p),a=l,r.lprojection=o*i.x+a*i.y,r.lnormx=o,r.lnormy=a,null!=r.wrap_lnorm&&(r.wrap_lnorm.zpp_inner.x=o,r.wrap_lnorm.zpp_inner.y=a),i=n,t=t.next}var h=this.lverts.next,u=e.elt;u.lp0=i,u.lp1=h;var d=0,c=0;d=i.x-h.x,c=i.y-h.y;var _=Math.sqrt(d*d+c*c),y=1/(u.length=_),x=d*=y;d=-(c*=y),c=x,u.lprojection=d*i.x+c*i.y,u.lnormx=d,u.lnormy=c,null!=u.wrap_lnorm&&(u.wrap_lnorm.zpp_inner.x=d,u.wrap_lnorm.zpp_inner.y=c)}},ei.prototype.validate_gverts=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.validate_gaxi=function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1,this.validate_laxi();var e=this.body;if(e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot)),this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var t=this.body;t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot));for(var i=this.lverts.next,n=this.gverts.next;null!=n;){var r=n,o=i;i=i.next,r.x=this.body.posx+(this.body.axisy*o.x-this.body.axisx*o.y),r.y=this.body.posy+(o.x*this.body.axisx+o.y*this.body.axisy),n=n.next}}var a=this.edges.head,s=this.gverts.next,p=s;for(s=s.next;null!=s;){var l=s,h=a.elt;a=a.next,h.gp0=p,h.gp1=l,h.gnormx=this.body.axisy*h.lnormx-this.body.axisx*h.lnormy,h.gnormy=h.lnormx*this.body.axisx+h.lnormy*this.body.axisy,h.gprojection=this.body.posx*h.gnormx+this.body.posy*h.gnormy+h.lprojection,null!=h.wrap_gnorm&&(h.wrap_gnorm.zpp_inner.x=h.gnormx,h.wrap_gnorm.zpp_inner.y=h.gnormy),h.tp0=h.gp0.y*h.gnormx-h.gp0.x*h.gnormy,h.tp1=h.gp1.y*h.gnormx-h.gp1.x*h.gnormy,p=l,s=s.next}var u=a.elt;u.gp0=p,u.gp1=this.gverts.next,u.gnormx=this.body.axisy*u.lnormx-this.body.axisx*u.lnormy,u.gnormy=u.lnormx*this.body.axisx+u.lnormy*this.body.axisy,u.gprojection=this.body.posx*u.gnormx+this.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy}},ei.prototype.__validate_aabb=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}var o=this.gverts.next;this.aabb.minx=o.x,this.aabb.miny=o.y,this.aabb.maxx=o.x,this.aabb.maxy=o.y;for(var a=this.gverts.next.next;null!=a;){var s=a;s.x<this.aabb.minx&&(this.aabb.minx=s.x),s.x>this.aabb.maxx&&(this.aabb.maxx=s.x),s.y<this.aabb.miny&&(this.aabb.miny=s.y),s.y>this.aabb.maxy&&(this.aabb.maxy=s.y),a=a.next}},ei.prototype._force_validate_aabb=function(){var e=this.lverts.next,t=this.gverts.next,i=e;e=e.next,t.x=this.body.posx+(this.body.axisy*i.x-this.body.axisx*i.y),t.y=this.body.posy+(i.x*this.body.axisx+i.y*this.body.axisy),this.aabb.minx=t.x,this.aabb.miny=t.y,this.aabb.maxx=t.x,this.aabb.maxy=t.y;for(var n=this.gverts.next.next;null!=n;){var r=n,o=e;e=e.next,r.x=this.body.posx+(this.body.axisy*o.x-this.body.axisx*o.y),r.y=this.body.posy+(o.x*this.body.axisx+o.y*this.body.axisy),r.x<this.aabb.minx&&(this.aabb.minx=r.x),r.x>this.aabb.maxx&&(this.aabb.maxx=r.x),r.y<this.aabb.miny&&(this.aabb.miny=r.y),r.y>this.aabb.maxy&&(this.aabb.maxy=r.y),n=n.next}},ei.prototype.__validate_sweepRadius=function(){var e=0,t=0;this.validate_laxi();for(var i=this.lverts.next;null!=i;){var n=i,r=n.x*n.x+n.y*n.y;e<r&&(e=r),i=i.next}for(var o=this.edges.head;null!=o;){var a=o.elt;if(a.lprojection<t&&(t=a.lprojection)<0)break;o=o.next}t<0&&(t=0),this.sweepRadius=Math.sqrt(e),this.sweepCoef=this.sweepRadius-t},ei.prototype.__validate_area_inertia=function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.area=0,this.inertia=0;else{var e=this.area=0,t=0,i=this.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i,a=r.y*n.x-r.x*n.y;e+=a*(r.x*r.x+r.y*r.y+(r.x*n.x+r.y*n.y)+(n.x*n.x+n.y*n.y)),t+=a,this.area+=r.x*(o.y-n.y),n=r,r=o,i=i.next}var s=i=this.lverts.next,p=r.y*n.x-r.x*n.y;e+=p*(r.x*r.x+r.y*r.y+(r.x*n.x+r.y*n.y)+(n.x*n.x+n.y*n.y)),t+=p,this.area+=r.x*(s.y-n.y),n=r,i=i.next;var l=s.y*n.x-s.x*n.y;e+=l*(s.x*s.x+s.y*s.y+(s.x*n.x+s.y*n.y)+(n.x*n.x+n.y*n.y)),t+=l,this.area+=s.x*(i.y-n.y),this.inertia=e/(6*t),this.area*=.5,this.area<0&&(this.area=-this.area,this.reverse_vertices())}},ei.prototype.__validate_angDrag=function(){this.validate_area_inertia(),this.validate_laxi();for(var e=0,t=this.edges.head,i=0,n=this.lverts.next,r=n,o=n.next;null!=o;){var a=o,s=t.elt;t=t.next,i+=s.length;var p,l;p=a.x-r.x,l=a.y-r.y,e+=s.length*Qs.fluidAngularDragFriction*this.material.dynamicFriction*s.lprojection*s.lprojection;var h=-(r.y*s.lnormx-r.x*s.lnormy)/(l*s.lnormx-p*s.lnormy);if(0<h){var u=1<h?1:h,d=0,c=0;d=r.x,c=r.y;d+=p*u,c+=l*u;var _=s.lnormy*r.x-s.lnormx*r.y,y=s.lnormy*d-s.lnormx*c;e+=(y*y*y-_*_*_)/(3*(y-_))*u*s.length*Qs.fluidAngularDrag}if(h<1){var x=h<0?0:h,m=0,f=0;m=r.x,f=r.y;m+=p*x,f+=l*x;var v=s.lnormy*m-s.lnormx*f,g=s.lnormy*a.x-s.lnormx*a.y;e+=(g*g*g-v*v*v)/(3*(g-v))*Qs.fluidVacuumDrag*(1-x)*s.length*Qs.fluidAngularDrag}r=a,o=(n=o).next}for(;;){var z=o=this.lverts.next,b=t.elt;t=t.next,i+=b.length;var w,S;w=z.x-r.x,S=z.y-r.y,e+=b.length*Qs.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;var C=-(r.y*b.lnormx-r.x*b.lnormy)/(S*b.lnormx-w*b.lnormy);if(0<C){var M=1<C?1:C,P=0,k=0;P=r.x,k=r.y;P+=w*M,k+=S*M;var T=b.lnormy*r.x-b.lnormx*r.y,G=b.lnormy*P-b.lnormx*k;e+=(G*G*G-T*T*T)/(3*(G-T))*M*b.length*Qs.fluidAngularDrag}if(C<1){var O=C<0?0:C,A=0,E=0;A=r.x,E=r.y;A+=w*O,E+=S*O;var I=b.lnormy*A-b.lnormx*E,B=b.lnormy*z.x-b.lnormx*z.y;e+=(B*B*B-I*I*I)/(3*(B-I))*Qs.fluidVacuumDrag*(1-O)*b.length*Qs.fluidAngularDrag}break}this.angDrag=e/(this.inertia*i)},ei.prototype.__validate_localCOM=function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=this.lverts.next.next.x,this.localCOMy+=this.lverts.next.next.y,this.localCOMx*=.5,this.localCOMy*=.5;else{this.localCOMx=0;var e=this.localCOMy=0,t=this.lverts.next,i=t,n=t=t.next;for(t=t.next;null!=t;){var r=t;e+=n.x*(r.y-i.y);var o=r.y*n.x-r.x*n.y;this.localCOMx+=(n.x+r.x)*o,this.localCOMy+=(n.y+r.y)*o,i=n,n=r,t=t.next}var a=t=this.lverts.next;e+=n.x*(a.y-i.y);var s=a.y*n.x-a.x*n.y;this.localCOMx+=(n.x+a.x)*s,this.localCOMy+=(n.y+a.y)*s,i=n;var p=t=t.next;e+=a.x*(p.y-i.y);var l=p.y*a.x-p.x*a.y;this.localCOMx+=(a.x+p.x)*l,this.localCOMy+=(a.y+p.y)*l;var h=e=1/(3*e);this.localCOMx*=h,this.localCOMy*=h}},ei.prototype.localCOM_validate=function(){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},ei.prototype.localCOM_invalidate=function(e){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var t=this.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var p=n=t.lverts.next;i+=o.x*(p.y-r.y);var l=p.y*o.x-p.x*o.y;t.localCOMx+=(o.x+p.x)*l,t.localCOMy+=(o.y+p.y)*l,r=o;var h=n=n.next;i+=p.x*(h.y-r.y);var u=h.y*p.x-h.x*p.y;t.localCOMx+=(p.x+h.x)*u,t.localCOMy+=(p.y+h.y)*u;var d=i=1/(3*i);t.localCOMx*=d,t.localCOMy*=d}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var c,_;c=e.x-this.localCOMx,_=e.y-this.localCOMy;for(var y=this.lverts.next;null!=y;){var x=y;x.x+=c,x.y+=_,y=y.next}this.invalidate_lverts()},ei.prototype.setupLocalCOM=function(){var e,t=this.localCOMx,i=this.localCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_localCOM=e,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$(this,this.localCOM_invalidate)},ei.prototype.__translate=function(e,t){for(var i=this.lverts.next;null!=i;){var n=i;n.x+=e,n.y+=t,i=i.next}this.invalidate_lverts()},ei.prototype.__scale=function(e,t){for(var i=this.lverts.next;null!=i;){var n=i;n.x*=e,n.y*=t,i=i.next}this.invalidate_lverts()},ei.prototype.__rotate=function(e,t){for(var i=this.lverts.next;null!=i;){var n,r,o=i;n=t*o.x-e*o.y,r=o.x*e+o.y*t,o.x=n,o.y=r,i=i.next}this.invalidate_lverts()},ei.prototype.__transform=function(e){for(var t=this.lverts.next;null!=t;){var i=t,n=e.zpp_inner.a*i.x+e.zpp_inner.b*i.y+e.zpp_inner.tx;i.y=e.zpp_inner.c*i.x+e.zpp_inner.d*i.y+e.zpp_inner.ty,i.x=n,t=t.next}this.invalidate_lverts()},ei.prototype.__copy=function(){var e=this.outer_zn;return null==e.zpp_inner_zn.wrap_lverts&&e.zpp_inner_zn.getlverts(),new xe(e.zpp_inner_zn.wrap_lverts).zpp_inner_zn},ei.prototype.__class__=ei;var ti=zpp_nape.space.ZPP_Broadphase=function(){this.circShape=null,this.matrix=null,this.aabbShape=null,this.dynab=null,this.sweep=null,this.is_sweep=!1,this.space=null};ti.__name__=["zpp_nape","space","ZPP_Broadphase"],ti.prototype.space=null,ti.prototype.is_sweep=null,ti.prototype.sweep=null,ti.prototype.dynab=null,ti.prototype.insert=function(e){this.is_sweep?this.sweep.__insert(e):this.dynab.__insert(e)},ti.prototype.remove=function(e){this.is_sweep?this.sweep.__remove(e):this.dynab.__remove(e)},ti.prototype.sync=function(e){if(this.is_sweep){if(!this.sweep.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var p=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*p,i.localCOMy+=(a.y+s.y)*p,o=a,a=s,r=r.next}var l=r=i.lverts.next;n+=a.x*(l.y-o.y);var h=l.y*a.x-l.x*a.y;i.localCOMx+=(a.x+l.x)*h,i.localCOMy+=(a.y+l.y)*h,o=a;var u=r=r.next;n+=l.x*(u.y-o.y);var d=u.y*l.x-u.x*l.y;i.localCOMx+=(l.x+u.x)*d,i.localCOMy+=(l.y+u.y)*d;var c=n=1/(3*n);i.localCOMx*=c,i.localCOMy*=c}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}var y=t.radius,x=t.radius;t.aabb.minx=t.worldCOMx-y,t.aabb.miny=t.worldCOMy-x,t.aabb.maxx=t.worldCOMx+y,t.aabb.maxy=t.worldCOMy+x}else{var m=e.polygon;if(m.zip_gverts&&null!=m.body){m.zip_gverts=!1,m.validate_lverts();var f=m.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var v=m.lverts.next,g=m.gverts.next;null!=g;){var z=g,b=v;v=v.next,z.x=m.body.posx+(m.body.axisy*b.x-m.body.axisx*b.y),z.y=m.body.posy+(b.x*m.body.axisx+b.y*m.body.axisy),g=g.next}}var w=m.gverts.next;m.aabb.minx=w.x,m.aabb.miny=w.y,m.aabb.maxx=w.x,m.aabb.maxy=w.y;for(var S=m.gverts.next.next;null!=S;){var C=S;C.x<m.aabb.minx&&(m.aabb.minx=C.x),C.x>m.aabb.maxx&&(m.aabb.maxx=C.x),C.y<m.aabb.miny&&(m.aabb.miny=C.y),C.y>m.aabb.maxy&&(m.aabb.maxy=C.y),S=S.next}}}else{var M=this.dynab,P=e.node;if(!P.synced){if(!M.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var k=e.circle;if(k.zip_worldCOM&&null!=k.body){if(k.zip_worldCOM=!1,k.zip_localCOM){if(k.zip_localCOM=!1,1==k.type){var T=k.polygon;if(null==T.lverts.next.next)T.localCOMx=T.lverts.next.x,T.localCOMy=T.lverts.next.y;else if(null==T.lverts.next.next.next)T.localCOMx=T.lverts.next.x,T.localCOMy=T.lverts.next.y,T.localCOMx+=T.lverts.next.next.x,T.localCOMy+=T.lverts.next.next.y,T.localCOMx*=.5,T.localCOMy*=.5;else{T.localCOMx=0;var G=T.localCOMy=0,O=T.lverts.next,A=O,E=O=O.next;for(O=O.next;null!=O;){var I=O;G+=E.x*(I.y-A.y);var B=I.y*E.x-I.x*E.y;T.localCOMx+=(E.x+I.x)*B,T.localCOMy+=(E.y+I.y)*B,A=E,E=I,O=O.next}var L=O=T.lverts.next;G+=E.x*(L.y-A.y);var D=L.y*E.x-L.x*E.y;T.localCOMx+=(E.x+L.x)*D,T.localCOMy+=(E.y+L.y)*D,A=E;var R=O=O.next;G+=L.x*(R.y-A.y);var F=R.y*L.x-R.x*L.y;T.localCOMx+=(L.x+R.x)*F,T.localCOMy+=(L.y+R.y)*F;var j=G=1/(3*G);T.localCOMx*=j,T.localCOMy*=j}}null!=k.wrap_localCOM&&(k.wrap_localCOM.zpp_inner.x=k.localCOMx,k.wrap_localCOM.zpp_inner.y=k.localCOMy)}var N=k.body;N.zip_axis&&(N.zip_axis=!1,N.axisx=Math.sin(N.rot),N.axisy=Math.cos(N.rot)),k.worldCOMx=k.body.posx+(k.body.axisy*k.localCOMx-k.body.axisx*k.localCOMy),k.worldCOMy=k.body.posy+(k.localCOMx*k.body.axisx+k.localCOMy*k.body.axisy)}var U=k.radius,H=k.radius;k.aabb.minx=k.worldCOMx-U,k.aabb.miny=k.worldCOMy-H,k.aabb.maxx=k.worldCOMx+U,k.aabb.maxy=k.worldCOMy+H}else{var V=e.polygon;if(V.zip_gverts&&null!=V.body){V.zip_gverts=!1,V.validate_lverts();var W=V.body;W.zip_axis&&(W.zip_axis=!1,W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot));for(var X=V.lverts.next,q=V.gverts.next;null!=q;){var Y=q,Z=X;X=X.next,Y.x=V.body.posx+(V.body.axisy*Z.x-V.body.axisx*Z.y),Y.y=V.body.posy+(Z.x*V.body.axisx+Z.y*V.body.axisy),q=q.next}}var K=V.gverts.next;V.aabb.minx=K.x,V.aabb.miny=K.y,V.aabb.maxx=K.x,V.aabb.maxy=K.y;for(var J=V.gverts.next.next;null!=J;){var Q=J;Q.x<V.aabb.minx&&(V.aabb.minx=Q.x),Q.x>V.aabb.maxx&&(V.aabb.maxx=Q.x),Q.y<V.aabb.miny&&(V.aabb.miny=Q.y),Q.y>V.aabb.maxy&&(V.aabb.maxy=Q.y),J=J.next}}var $;if(P.dyn==(1!=e.body.type&&!e.body.component.sleeping)){var ee=P.aabb,te=e.aabb;$=!(te.minx>=ee.minx&&te.miny>=ee.miny&&te.maxx<=ee.maxx&&te.maxy<=ee.maxy)}else $=!0;$&&(P.synced=!0,P.snext=M.syncs,M.syncs=P)}}},ti.prototype.broadphase=function(e,t){},ti.prototype.clear=function(){},ti.prototype.shapesUnderPoint=function(e,t,i,n){return null},ti.prototype.bodiesUnderPoint=function(e,t,i,n){return null},ti.prototype.aabbShape=null,ti.prototype.matrix=null,ti.prototype.updateAABBShape=function(e){if(null==this.aabbShape){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var t=new re(Uo.BodyType_STATIC).zpp_inner.wrap_shapes,i=this.aabbShape=new xe(xe.rect(e.minx,e.miny,e.maxx-e.minx,e.maxy-e.miny));t.zpp_inner.reverse_flag?t.push(i):t.unshift(i)}else{var n=this.aabbShape.zpp_inner.aabb,r=(e.maxx-e.minx)/(n.maxx-n.minx),o=(e.maxy-e.miny)/(n.maxy-n.miny);null==this.matrix&&(this.matrix=new ne);var a=this.matrix;a.zpp_inner.a=r;var s=a.zpp_inner;null!=s._invalidate&&s._invalidate();var p=this.matrix,l=this.matrix;l.zpp_inner.c=0;var h=l.zpp_inner;null!=h._invalidate&&h._invalidate(),p.zpp_inner.b=l.zpp_inner.c;var u=p.zpp_inner;null!=u._invalidate&&u._invalidate();var d=this.matrix;d.zpp_inner.d=o;var c=d.zpp_inner;null!=c._invalidate&&c._invalidate();var _=this.matrix;_.zpp_inner.tx=e.minx-r*n.minx;var y=_.zpp_inner;null!=y._invalidate&&y._invalidate();var x=this.matrix;x.zpp_inner.ty=e.miny-o*n.miny;var m=x.zpp_inner;null!=m._invalidate&&m._invalidate(),this.aabbShape.transform(this.matrix)}var f=this.aabbShape.zpp_inner;if(f.zip_aabb&&null!=f.body)if(f.zip_aabb=!1,0==f.type){var v=f.circle;if(v.zip_worldCOM&&null!=v.body){if(v.zip_worldCOM=!1,v.zip_localCOM){if(v.zip_localCOM=!1,1==v.type){var g=v.polygon;if(null==g.lverts.next.next)g.localCOMx=g.lverts.next.x,g.localCOMy=g.lverts.next.y;else if(null==g.lverts.next.next.next)g.localCOMx=g.lverts.next.x,g.localCOMy=g.lverts.next.y,g.localCOMx+=g.lverts.next.next.x,g.localCOMy+=g.lverts.next.next.y,g.localCOMx*=.5,g.localCOMy*=.5;else{g.localCOMx=0;var z=g.localCOMy=0,b=g.lverts.next,w=b,S=b=b.next;for(b=b.next;null!=b;){var C=b;z+=S.x*(C.y-w.y);var M=C.y*S.x-C.x*S.y;g.localCOMx+=(S.x+C.x)*M,g.localCOMy+=(S.y+C.y)*M,w=S,S=C,b=b.next}var P=b=g.lverts.next;z+=S.x*(P.y-w.y);var k=P.y*S.x-P.x*S.y;g.localCOMx+=(S.x+P.x)*k,g.localCOMy+=(S.y+P.y)*k,w=S;var T=b=b.next;z+=P.x*(T.y-w.y);var G=T.y*P.x-T.x*P.y;g.localCOMx+=(P.x+T.x)*G,g.localCOMy+=(P.y+T.y)*G;var O=z=1/(3*z);g.localCOMx*=O,g.localCOMy*=O}}null!=v.wrap_localCOM&&(v.wrap_localCOM.zpp_inner.x=v.localCOMx,v.wrap_localCOM.zpp_inner.y=v.localCOMy)}var A=v.body;A.zip_axis&&(A.zip_axis=!1,A.axisx=Math.sin(A.rot),A.axisy=Math.cos(A.rot)),v.worldCOMx=v.body.posx+(v.body.axisy*v.localCOMx-v.body.axisx*v.localCOMy),v.worldCOMy=v.body.posy+(v.localCOMx*v.body.axisx+v.localCOMy*v.body.axisy)}var E=v.radius,I=v.radius;v.aabb.minx=v.worldCOMx-E,v.aabb.miny=v.worldCOMy-I,v.aabb.maxx=v.worldCOMx+E,v.aabb.maxy=v.worldCOMy+I}else{var B=f.polygon;if(B.zip_gverts&&null!=B.body){B.zip_gverts=!1,B.validate_lverts();var L=B.body;L.zip_axis&&(L.zip_axis=!1,L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot));for(var D=B.lverts.next,R=B.gverts.next;null!=R;){var F=R,j=D;D=D.next,F.x=B.body.posx+(B.body.axisy*j.x-B.body.axisx*j.y),F.y=B.body.posy+(j.x*B.body.axisx+j.y*B.body.axisy),R=R.next}}var N=B.gverts.next;B.aabb.minx=N.x,B.aabb.miny=N.y,B.aabb.maxx=N.x,B.aabb.maxy=N.y;for(var U=B.gverts.next.next;null!=U;){var H=U;H.x<B.aabb.minx&&(B.aabb.minx=H.x),H.x>B.aabb.maxx&&(B.aabb.maxx=H.x),H.y<B.aabb.miny&&(B.aabb.miny=H.y),H.y>B.aabb.maxy&&(B.aabb.maxy=H.y),U=U.next}}var V=this.aabbShape.zpp_inner.polygon;if(V.zip_gaxi&&null!=V.body){V.zip_gaxi=!1,V.validate_laxi();var W=V.body;if(W.zip_axis&&(W.zip_axis=!1,W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot)),V.zip_gverts&&null!=V.body){V.zip_gverts=!1,V.validate_lverts();var X=V.body;X.zip_axis&&(X.zip_axis=!1,X.axisx=Math.sin(X.rot),X.axisy=Math.cos(X.rot));for(var q=V.lverts.next,Y=V.gverts.next;null!=Y;){var Z=Y,K=q;q=q.next,Z.x=V.body.posx+(V.body.axisy*K.x-V.body.axisx*K.y),Z.y=V.body.posy+(K.x*V.body.axisx+K.y*V.body.axisy),Y=Y.next}}var J=V.edges.head,Q=V.gverts.next,$=Q;for(Q=Q.next;null!=Q;){var ee=Q,te=J.elt;J=J.next,te.gp0=$,te.gp1=ee,te.gnormx=V.body.axisy*te.lnormx-V.body.axisx*te.lnormy,te.gnormy=te.lnormx*V.body.axisx+te.lnormy*V.body.axisy,te.gprojection=V.body.posx*te.gnormx+V.body.posy*te.gnormy+te.lprojection,null!=te.wrap_gnorm&&(te.wrap_gnorm.zpp_inner.x=te.gnormx,te.wrap_gnorm.zpp_inner.y=te.gnormy),te.tp0=te.gp0.y*te.gnormx-te.gp0.x*te.gnormy,te.tp1=te.gp1.y*te.gnormx-te.gp1.x*te.gnormy,$=ee,Q=Q.next}var ie=J.elt;ie.gp0=$,ie.gp1=V.gverts.next,ie.gnormx=V.body.axisy*ie.lnormx-V.body.axisx*ie.lnormy,ie.gnormy=ie.lnormx*V.body.axisx+ie.lnormy*V.body.axisy,ie.gprojection=V.body.posx*ie.gnormx+V.body.posy*ie.gnormy+ie.lprojection,null!=ie.wrap_gnorm&&(ie.wrap_gnorm.zpp_inner.x=ie.gnormx,ie.wrap_gnorm.zpp_inner.y=ie.gnormy),ie.tp0=ie.gp0.y*ie.gnormx-ie.gp0.x*ie.gnormy,ie.tp1=ie.gp1.y*ie.gnormx-ie.gp1.x*ie.gnormy}},ti.prototype.shapesInAABB=function(e,t,i,n,r){return null},ti.prototype.bodiesInAABB=function(e,t,i,n,r){return null},ti.prototype.circShape=null,ti.prototype.updateCircShape=function(e,t,i){if(null==this.circShape){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var n,r=new re(Uo.BodyType_STATIC).zpp_inner.wrap_shapes;if(null==jn.poolVec2?n=new lt:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var o;null==ep.zpp_pool?o=new ep:(o=ep.zpp_pool,ep.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=e,o.y=t,n.zpp_inner=o,n.zpp_inner.outer=n}else{var a,s=n.zpp_inner;if(null!=s._validate&&s._validate(),n.zpp_inner.x==e){var p=n.zpp_inner;null!=p._validate&&p._validate(),a=n.zpp_inner.y==t}else a=!1;if(!a){n.zpp_inner.x=e,n.zpp_inner.y=t;var l=n.zpp_inner;null!=l._invalidate&&l._invalidate(l)}}n.zpp_inner.weak=!1;var h=this.circShape=new ce(i,n);r.zpp_inner.reverse_flag?r.push(h):r.unshift(h)}else{var u=this.circShape.zpp_inner.circle,d=i/u.radius;null==this.matrix&&(this.matrix=new ne);var c=this.matrix,_=this.matrix;_.zpp_inner.d=d;var y=_.zpp_inner;null!=y._invalidate&&y._invalidate(),c.zpp_inner.a=_.zpp_inner.d;var x=c.zpp_inner;null!=x._invalidate&&x._invalidate();var m=this.matrix,f=this.matrix;f.zpp_inner.c=0;var v=f.zpp_inner;null!=v._invalidate&&v._invalidate(),m.zpp_inner.b=f.zpp_inner.c;var g=m.zpp_inner;null!=g._invalidate&&g._invalidate();var z=this.matrix;z.zpp_inner.tx=e-d*u.localCOMx;var b=z.zpp_inner;null!=b._invalidate&&b._invalidate();var w=this.matrix;w.zpp_inner.ty=t-d*u.localCOMy;var S=w.zpp_inner;null!=S._invalidate&&S._invalidate(),this.circShape.transform(this.matrix)}var C=this.circShape.zpp_inner;if(C.zip_aabb&&null!=C.body)if(C.zip_aabb=!1,0==C.type){var M=C.circle;if(M.zip_worldCOM&&null!=M.body){if(M.zip_worldCOM=!1,M.zip_localCOM){if(M.zip_localCOM=!1,1==M.type){var P=M.polygon;if(null==P.lverts.next.next)P.localCOMx=P.lverts.next.x,P.localCOMy=P.lverts.next.y;else if(null==P.lverts.next.next.next)P.localCOMx=P.lverts.next.x,P.localCOMy=P.lverts.next.y,P.localCOMx+=P.lverts.next.next.x,P.localCOMy+=P.lverts.next.next.y,P.localCOMx*=.5,P.localCOMy*=.5;else{P.localCOMx=0;var k=P.localCOMy=0,T=P.lverts.next,G=T,O=T=T.next;for(T=T.next;null!=T;){var A=T;k+=O.x*(A.y-G.y);var E=A.y*O.x-A.x*O.y;P.localCOMx+=(O.x+A.x)*E,P.localCOMy+=(O.y+A.y)*E,G=O,O=A,T=T.next}var I=T=P.lverts.next;k+=O.x*(I.y-G.y);var B=I.y*O.x-I.x*O.y;P.localCOMx+=(O.x+I.x)*B,P.localCOMy+=(O.y+I.y)*B,G=O;var L=T=T.next;k+=I.x*(L.y-G.y);var D=L.y*I.x-L.x*I.y;P.localCOMx+=(I.x+L.x)*D,P.localCOMy+=(I.y+L.y)*D;var R=k=1/(3*k);P.localCOMx*=R,P.localCOMy*=R}}null!=M.wrap_localCOM&&(M.wrap_localCOM.zpp_inner.x=M.localCOMx,M.wrap_localCOM.zpp_inner.y=M.localCOMy)}var F=M.body;F.zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot)),M.worldCOMx=M.body.posx+(M.body.axisy*M.localCOMx-M.body.axisx*M.localCOMy),M.worldCOMy=M.body.posy+(M.localCOMx*M.body.axisx+M.localCOMy*M.body.axisy)}var j=M.radius,N=M.radius;M.aabb.minx=M.worldCOMx-j,M.aabb.miny=M.worldCOMy-N,M.aabb.maxx=M.worldCOMx+j,M.aabb.maxy=M.worldCOMy+N}else{var U=C.polygon;if(U.zip_gverts&&null!=U.body){U.zip_gverts=!1,U.validate_lverts();var H=U.body;H.zip_axis&&(H.zip_axis=!1,H.axisx=Math.sin(H.rot),H.axisy=Math.cos(H.rot));for(var V=U.lverts.next,W=U.gverts.next;null!=W;){var X=W,q=V;V=V.next,X.x=U.body.posx+(U.body.axisy*q.x-U.body.axisx*q.y),X.y=U.body.posy+(q.x*U.body.axisx+q.y*U.body.axisy),W=W.next}}var Y=U.gverts.next;U.aabb.minx=Y.x,U.aabb.miny=Y.y,U.aabb.maxx=Y.x,U.aabb.maxy=Y.y;for(var Z=U.gverts.next.next;null!=Z;){var K=Z;K.x<U.aabb.minx&&(U.aabb.minx=K.x),K.x>U.aabb.maxx&&(U.aabb.maxx=K.x),K.y<U.aabb.miny&&(U.aabb.miny=K.y),K.y>U.aabb.maxy&&(U.aabb.maxy=K.y),Z=Z.next}}},ti.prototype.shapesInCircle=function(e,t,i,n,r,o){return null},ti.prototype.bodiesInCircle=function(e,t,i,n,r,o){return null},ti.prototype.validateShape=function(e){if(1==e.type){var t=e.polygon;if(t.zip_gaxi&&null!=t.body){t.zip_gaxi=!1,t.validate_laxi();var i=t.body;if(i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot)),t.zip_gverts&&null!=t.body){t.zip_gverts=!1,t.validate_lverts();var n=t.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var r=t.lverts.next,o=t.gverts.next;null!=o;){var a=o,s=r;r=r.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),o=o.next}}var p=t.edges.head,l=t.gverts.next,h=l;for(l=l.next;null!=l;){var u=l,d=p.elt;p=p.next,d.gp0=h,d.gp1=u,d.gnormx=t.body.axisy*d.lnormx-t.body.axisx*d.lnormy,d.gnormy=d.lnormx*t.body.axisx+d.lnormy*t.body.axisy,d.gprojection=t.body.posx*d.gnormx+t.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy,h=u,l=l.next}var c=p.elt;c.gp0=h,c.gp1=t.gverts.next,c.gnormx=t.body.axisy*c.lnormx-t.body.axisx*c.lnormy,c.gnormy=c.lnormx*t.body.axisx+c.lnormy*t.body.axisy,c.gprojection=t.body.posx*c.gnormx+t.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}}if(e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var _=e.circle;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var x=y.localCOMy=0,m=y.lverts.next,f=m,v=m=m.next;for(m=m.next;null!=m;){var g=m;x+=v.x*(g.y-f.y);var z=g.y*v.x-g.x*v.y;y.localCOMx+=(v.x+g.x)*z,y.localCOMy+=(v.y+g.y)*z,f=v,v=g,m=m.next}var b=m=y.lverts.next;x+=v.x*(b.y-f.y);var w=b.y*v.x-b.x*v.y;y.localCOMx+=(v.x+b.x)*w,y.localCOMy+=(v.y+b.y)*w,f=v;var S=m=m.next;x+=b.x*(S.y-f.y);var C=S.y*b.x-S.x*b.y;y.localCOMx+=(b.x+S.x)*C,y.localCOMy+=(b.y+S.y)*C;var M=x=1/(3*x);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=_.radius,T=_.radius;_.aabb.minx=_.worldCOMx-k,_.aabb.miny=_.worldCOMy-T,_.aabb.maxx=_.worldCOMx+k,_.aabb.maxy=_.worldCOMy+T}else{var G=e.polygon;if(G.zip_gverts&&null!=G.body){G.zip_gverts=!1,G.validate_lverts();var O=G.body;O.zip_axis&&(O.zip_axis=!1,O.axisx=Math.sin(O.rot),O.axisy=Math.cos(O.rot));for(var A=G.lverts.next,E=G.gverts.next;null!=E;){var I=E,B=A;A=A.next,I.x=G.body.posx+(G.body.axisy*B.x-G.body.axisx*B.y),I.y=G.body.posy+(B.x*G.body.axisx+B.y*G.body.axisy),E=E.next}}var L=G.gverts.next;G.aabb.minx=L.x,G.aabb.miny=L.y,G.aabb.maxx=L.x,G.aabb.maxy=L.y;for(var D=G.gverts.next.next;null!=D;){var R=D;R.x<G.aabb.minx&&(G.aabb.minx=R.x),R.x>G.aabb.maxx&&(G.aabb.maxx=R.x),R.y<G.aabb.miny&&(G.aabb.miny=R.y),R.y>G.aabb.maxy&&(G.aabb.maxy=R.y),D=D.next}}if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var F=e.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,H=N=N.next;for(N=N.next;null!=N;){var V=N;j+=H.x*(V.y-U.y);var W=V.y*H.x-V.x*H.y;F.localCOMx+=(H.x+V.x)*W,F.localCOMy+=(H.y+V.y)*W,U=H,H=V,N=N.next}var X=N=F.lverts.next;j+=H.x*(X.y-U.y);var q=X.y*H.x-X.x*H.y;F.localCOMx+=(H.x+X.x)*q,F.localCOMy+=(H.y+X.y)*q,U=H;var Y=N=N.next;j+=X.x*(Y.y-U.y);var Z=Y.y*X.x-Y.x*X.y;F.localCOMx+=(X.x+Y.x)*Z,F.localCOMy+=(X.y+Y.y)*Z;var K=j=1/(3*j);F.localCOMx*=K,F.localCOMy*=K}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var J=e.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}},ti.prototype.shapesInShape=function(e,t,i,n){return null},ti.prototype.bodiesInShape=function(e,t,i,n){return null},ti.prototype.rayCast=function(e,t,i){return null},ti.prototype.rayMultiCast=function(e,t,i,n){return null},ti.prototype.__class__=ti;var Ao=zpp_nape.space.ZPP_AABBNode=function(){this.first_sync=!1,this.synced=!1,this.snext=null,this.moved=!1,this.mnext=null,this.next=null,this.rayt=0,this.height=0,this.child2=null,this.child1=null,this.parent=null,this.dyn=!1,this.shape=null,this.aabb=null,this.height=-1};Ao.__name__=["zpp_nape","space","ZPP_AABBNode"],Ao.prototype.aabb=null,Ao.prototype.shape=null,Ao.prototype.dyn=null,Ao.prototype.parent=null,Ao.prototype.child1=null,Ao.prototype.child2=null,Ao.prototype.height=null,Ao.prototype.rayt=null,Ao.prototype.next=null,Ao.prototype.alloc=function(){null==Oo.zpp_pool?this.aabb=new Oo:(this.aabb=Oo.zpp_pool,Oo.zpp_pool=this.aabb.next,this.aabb.next=null),this.moved=!1,this.synced=!1,this.first_sync=!1},Ao.prototype.free=function(){this.height=-1;var e=this.aabb;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e.wrap_min=e.wrap_max=null,e._invalidate=null,e._validate=null,e.next=Oo.zpp_pool,Oo.zpp_pool=e,this.child1=this.child2=this.parent=null,this.next=null,this.snext=null,this.mnext=null},Ao.prototype.mnext=null,Ao.prototype.moved=null,Ao.prototype.snext=null,Ao.prototype.synced=null,Ao.prototype.first_sync=null,Ao.prototype.isLeaf=function(){return null==this.child1},Ao.prototype.__class__=Ao;var nr=zpp_nape.space.ZPP_AABBPair=function(){this.next=null,this.arb=null,this.di=0,this.id=0,this.sleeping=!1,this.first=!1,this.n2=null,this.n1=null};nr.__name__=["zpp_nape","space","ZPP_AABBPair"],nr.prototype.n1=null,nr.prototype.n2=null,nr.prototype.first=null,nr.prototype.sleeping=null,nr.prototype.id=null,nr.prototype.di=null,nr.prototype.arb=null,nr.prototype.next=null,nr.prototype.alloc=function(){},nr.prototype.free=function(){this.n1=this.n2=null,this.sleeping=!1},nr.prototype.__class__=nr;var Eo=zpp_nape.space.ZPP_AABBTree=function(){this.root=null};Eo.__name__=["zpp_nape","space","ZPP_AABBTree"],Eo.prototype.root=null,Eo.prototype.clear=function(){if(null!=this.root){var e=null;for(this.root.next=e,e=this.root;null!=e;){var t=e;e=t.next,(t.next=null)==t.child1?(t.shape.node=null,t.shape.removedFromSpace(),t.shape=null):(null!=t.child1&&(t.child1.next=e,e=t.child1),null!=t.child2&&(t.child2.next=e,e=t.child2)),t.height=-1;var i=t.aabb;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i.wrap_min=i.wrap_max=null,i._invalidate=null,i._validate=null,i.next=Oo.zpp_pool,Oo.zpp_pool=i,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Ao.zpp_pool,Ao.zpp_pool=t}this.root=null}},Eo.prototype.insertLeaf=function(e){if(null==this.root)this.root=e,this.root.parent=null;else{for(var t=e.aabb,i=this.root;null!=i.child1;){var n=i.child1,r=i.child2,o=i.aabb,a=2*(o.maxx-o.minx+(o.maxy-o.miny)),s=Eo.tmpaabb,p=i.aabb;s.minx=p.minx<t.minx?p.minx:t.minx,s.miny=p.miny<t.miny?p.miny:t.miny,s.maxx=p.maxx>t.maxx?p.maxx:t.maxx,s.maxy=p.maxy>t.maxy?p.maxy:t.maxy;var l,h=Eo.tmpaabb,u=2*(h.maxx-h.minx+(h.maxy-h.miny)),d=2*u,c=2*(u-a),_=Eo.tmpaabb,y=n.aabb;if(_.minx=t.minx<y.minx?t.minx:y.minx,_.miny=t.miny<y.miny?t.miny:y.miny,_.maxx=t.maxx>y.maxx?t.maxx:y.maxx,_.maxy=t.maxy>y.maxy?t.maxy:y.maxy,null==n.child1){var x=Eo.tmpaabb;l=2*(x.maxx-x.minx+(x.maxy-x.miny))+c}else{var m=n.aabb,f=2*(m.maxx-m.minx+(m.maxy-m.miny)),v=Eo.tmpaabb;l=2*(v.maxx-v.minx+(v.maxy-v.miny))-f+c}var g,z=Eo.tmpaabb,b=r.aabb;if(z.minx=t.minx<b.minx?t.minx:b.minx,z.miny=t.miny<b.miny?t.miny:b.miny,z.maxx=t.maxx>b.maxx?t.maxx:b.maxx,z.maxy=t.maxy>b.maxy?t.maxy:b.maxy,null==r.child1){var w=Eo.tmpaabb;g=2*(w.maxx-w.minx+(w.maxy-w.miny))+c}else{var S=r.aabb,C=2*(S.maxx-S.minx+(S.maxy-S.miny)),M=Eo.tmpaabb;g=2*(M.maxx-M.minx+(M.maxy-M.miny))-C+c}if(d<l&&d<g)break;i=l<g?n:r}var P,k=i,T=k.parent;null==Ao.zpp_pool?P=new Ao:(P=Ao.zpp_pool,Ao.zpp_pool=P.next,P.next=null),null==Oo.zpp_pool?P.aabb=new Oo:(P.aabb=Oo.zpp_pool,Oo.zpp_pool=P.aabb.next,P.aabb.next=null),P.moved=!1,P.synced=!1,P.first_sync=!1,P.parent=T;var G=P.aabb,O=k.aabb;for(G.minx=t.minx<O.minx?t.minx:O.minx,G.miny=t.miny<O.miny?t.miny:O.miny,G.maxx=t.maxx>O.maxx?t.maxx:O.maxx,G.maxy=t.maxy>O.maxy?t.maxy:O.maxy,P.height=k.height+1,null!=T?(T.child1==k?T.child1=P:T.child2=P,P.child1=k,P.child2=e,k.parent=P,e.parent=P):(P.child1=k,P.child2=e,k.parent=P,e.parent=P,this.root=P),i=e.parent;null!=i;){if(null==i.child1||i.height<2)i=i;else{var A=i.child1,E=i.child2,I=E.height-A.height;if(1<I){var B=E.child1,L=E.child2;if(E.child1=i,E.parent=i.parent,null!=(i.parent=E).parent?E.parent.child1==i?E.parent.child1=E:E.parent.child2=E:this.root=E,B.height>L.height){E.child2=B;var D=((i.child2=L).parent=i).aabb,R=A.aabb,F=L.aabb;D.minx=R.minx<F.minx?R.minx:F.minx,D.miny=R.miny<F.miny?R.miny:F.miny,D.maxx=R.maxx>F.maxx?R.maxx:F.maxx,D.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=E.aabb,N=i.aabb,U=B.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var H=A.height,V=L.height;i.height=1+(V<H?H:V);var W=i.height,X=B.height;E.height=1+(X<W?W:X)}else{E.child2=L;var q=((i.child2=B).parent=i).aabb,Y=A.aabb,Z=B.aabb;q.minx=Y.minx<Z.minx?Y.minx:Z.minx,q.miny=Y.miny<Z.miny?Y.miny:Z.miny,q.maxx=Y.maxx>Z.maxx?Y.maxx:Z.maxx,q.maxy=Y.maxy>Z.maxy?Y.maxy:Z.maxy;var K=E.aabb,J=i.aabb,Q=L.aabb;K.minx=J.minx<Q.minx?J.minx:Q.minx,K.miny=J.miny<Q.miny?J.miny:Q.miny,K.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,K.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=A.height,ee=B.height;i.height=1+(ee<$?$:ee);var te=i.height,ie=L.height;E.height=1+(ie<te?te:ie)}i=E}else if(I<-1){var ne=A.child1,re=A.child2;if(A.child1=i,A.parent=i.parent,null!=(i.parent=A).parent?A.parent.child1==i?A.parent.child1=A:A.parent.child2=A:this.root=A,ne.height>re.height){A.child2=ne;var oe=((i.child1=re).parent=i).aabb,ae=E.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var pe=A.aabb,le=i.aabb,he=ne.aabb;pe.minx=le.minx<he.minx?le.minx:he.minx,pe.miny=le.miny<he.miny?le.miny:he.miny,pe.maxx=le.maxx>he.maxx?le.maxx:he.maxx,pe.maxy=le.maxy>he.maxy?le.maxy:he.maxy;var ue=E.height,de=re.height;i.height=1+(de<ue?ue:de);var ce=i.height,_e=ne.height;A.height=1+(_e<ce?ce:_e)}else{A.child2=re;var ye=((i.child1=ne).parent=i).aabb,xe=E.aabb,me=ne.aabb;ye.minx=xe.minx<me.minx?xe.minx:me.minx,ye.miny=xe.miny<me.miny?xe.miny:me.miny,ye.maxx=xe.maxx>me.maxx?xe.maxx:me.maxx,ye.maxy=xe.maxy>me.maxy?xe.maxy:me.maxy;var fe=A.aabb,ve=i.aabb,ge=re.aabb;fe.minx=ve.minx<ge.minx?ve.minx:ge.minx,fe.miny=ve.miny<ge.miny?ve.miny:ge.miny,fe.maxx=ve.maxx>ge.maxx?ve.maxx:ge.maxx,fe.maxy=ve.maxy>ge.maxy?ve.maxy:ge.maxy;var ze=E.height,be=ne.height;i.height=1+(be<ze?ze:be);var we=i.height,Se=re.height;A.height=1+(Se<we?we:Se)}i=A}else i=i}var Ce=i.child1,Me=i.child2,Pe=Ce.height,ke=Me.height;i.height=1+(ke<Pe?Pe:ke);var Te=i.aabb,Ge=Ce.aabb,Oe=Me.aabb;Te.minx=Ge.minx<Oe.minx?Ge.minx:Oe.minx,Te.miny=Ge.miny<Oe.miny?Ge.miny:Oe.miny,Te.maxx=Ge.maxx>Oe.maxx?Ge.maxx:Oe.maxx,Te.maxy=Ge.maxy>Oe.maxy?Ge.maxy:Oe.maxy,i=i.parent}}},Eo.prototype.inlined_insertLeaf=function(e){if(null==this.root)this.root=e,this.root.parent=null;else{for(var t=e.aabb,i=this.root;null!=i.child1;){var n=i.child1,r=i.child2,o=i.aabb,a=2*(o.maxx-o.minx+(o.maxy-o.miny)),s=Eo.tmpaabb,p=i.aabb;s.minx=p.minx<t.minx?p.minx:t.minx,s.miny=p.miny<t.miny?p.miny:t.miny,s.maxx=p.maxx>t.maxx?p.maxx:t.maxx,s.maxy=p.maxy>t.maxy?p.maxy:t.maxy;var l,h=Eo.tmpaabb,u=2*(h.maxx-h.minx+(h.maxy-h.miny)),d=2*u,c=2*(u-a),_=Eo.tmpaabb,y=n.aabb;if(_.minx=t.minx<y.minx?t.minx:y.minx,_.miny=t.miny<y.miny?t.miny:y.miny,_.maxx=t.maxx>y.maxx?t.maxx:y.maxx,_.maxy=t.maxy>y.maxy?t.maxy:y.maxy,null==n.child1){var x=Eo.tmpaabb;l=2*(x.maxx-x.minx+(x.maxy-x.miny))+c}else{var m=n.aabb,f=2*(m.maxx-m.minx+(m.maxy-m.miny)),v=Eo.tmpaabb;l=2*(v.maxx-v.minx+(v.maxy-v.miny))-f+c}var g,z=Eo.tmpaabb,b=r.aabb;if(z.minx=t.minx<b.minx?t.minx:b.minx,z.miny=t.miny<b.miny?t.miny:b.miny,z.maxx=t.maxx>b.maxx?t.maxx:b.maxx,z.maxy=t.maxy>b.maxy?t.maxy:b.maxy,null==r.child1){var w=Eo.tmpaabb;g=2*(w.maxx-w.minx+(w.maxy-w.miny))+c}else{var S=r.aabb,C=2*(S.maxx-S.minx+(S.maxy-S.miny)),M=Eo.tmpaabb;g=2*(M.maxx-M.minx+(M.maxy-M.miny))-C+c}if(d<l&&d<g)break;i=l<g?n:r}var P,k=i,T=k.parent;null==Ao.zpp_pool?P=new Ao:(P=Ao.zpp_pool,Ao.zpp_pool=P.next,P.next=null),null==Oo.zpp_pool?P.aabb=new Oo:(P.aabb=Oo.zpp_pool,Oo.zpp_pool=P.aabb.next,P.aabb.next=null),P.moved=!1,P.synced=!1,P.first_sync=!1,P.parent=T;var G=P.aabb,O=k.aabb;for(G.minx=t.minx<O.minx?t.minx:O.minx,G.miny=t.miny<O.miny?t.miny:O.miny,G.maxx=t.maxx>O.maxx?t.maxx:O.maxx,G.maxy=t.maxy>O.maxy?t.maxy:O.maxy,P.height=k.height+1,null!=T?(T.child1==k?T.child1=P:T.child2=P,P.child1=k,P.child2=e,k.parent=P,e.parent=P):(P.child1=k,P.child2=e,k.parent=P,e.parent=P,this.root=P),i=e.parent;null!=i;){if(null==i.child1||i.height<2)i=i;else{var A=i.child1,E=i.child2,I=E.height-A.height;if(1<I){var B=E.child1,L=E.child2;if(E.child1=i,E.parent=i.parent,null!=(i.parent=E).parent?E.parent.child1==i?E.parent.child1=E:E.parent.child2=E:this.root=E,B.height>L.height){E.child2=B;var D=((i.child2=L).parent=i).aabb,R=A.aabb,F=L.aabb;D.minx=R.minx<F.minx?R.minx:F.minx,D.miny=R.miny<F.miny?R.miny:F.miny,D.maxx=R.maxx>F.maxx?R.maxx:F.maxx,D.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=E.aabb,N=i.aabb,U=B.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var H=A.height,V=L.height;i.height=1+(V<H?H:V);var W=i.height,X=B.height;E.height=1+(X<W?W:X)}else{E.child2=L;var q=((i.child2=B).parent=i).aabb,Y=A.aabb,Z=B.aabb;q.minx=Y.minx<Z.minx?Y.minx:Z.minx,q.miny=Y.miny<Z.miny?Y.miny:Z.miny,q.maxx=Y.maxx>Z.maxx?Y.maxx:Z.maxx,q.maxy=Y.maxy>Z.maxy?Y.maxy:Z.maxy;var K=E.aabb,J=i.aabb,Q=L.aabb;K.minx=J.minx<Q.minx?J.minx:Q.minx,K.miny=J.miny<Q.miny?J.miny:Q.miny,K.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,K.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=A.height,ee=B.height;i.height=1+(ee<$?$:ee);var te=i.height,ie=L.height;E.height=1+(ie<te?te:ie)}i=E}else if(I<-1){var ne=A.child1,re=A.child2;if(A.child1=i,A.parent=i.parent,null!=(i.parent=A).parent?A.parent.child1==i?A.parent.child1=A:A.parent.child2=A:this.root=A,ne.height>re.height){A.child2=ne;var oe=((i.child1=re).parent=i).aabb,ae=E.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var pe=A.aabb,le=i.aabb,he=ne.aabb;pe.minx=le.minx<he.minx?le.minx:he.minx,pe.miny=le.miny<he.miny?le.miny:he.miny,pe.maxx=le.maxx>he.maxx?le.maxx:he.maxx,pe.maxy=le.maxy>he.maxy?le.maxy:he.maxy;var ue=E.height,de=re.height;i.height=1+(de<ue?ue:de);var ce=i.height,_e=ne.height;A.height=1+(_e<ce?ce:_e)}else{A.child2=re;var ye=((i.child1=ne).parent=i).aabb,xe=E.aabb,me=ne.aabb;ye.minx=xe.minx<me.minx?xe.minx:me.minx,ye.miny=xe.miny<me.miny?xe.miny:me.miny,ye.maxx=xe.maxx>me.maxx?xe.maxx:me.maxx,ye.maxy=xe.maxy>me.maxy?xe.maxy:me.maxy;var fe=A.aabb,ve=i.aabb,ge=re.aabb;fe.minx=ve.minx<ge.minx?ve.minx:ge.minx,fe.miny=ve.miny<ge.miny?ve.miny:ge.miny,fe.maxx=ve.maxx>ge.maxx?ve.maxx:ge.maxx,fe.maxy=ve.maxy>ge.maxy?ve.maxy:ge.maxy;var ze=E.height,be=ne.height;i.height=1+(be<ze?ze:be);var we=i.height,Se=re.height;A.height=1+(Se<we?we:Se)}i=A}else i=i}var Ce=i.child1,Me=i.child2,Pe=Ce.height,ke=Me.height;i.height=1+(ke<Pe?Pe:ke);var Te=i.aabb,Ge=Ce.aabb,Oe=Me.aabb;Te.minx=Ge.minx<Oe.minx?Ge.minx:Oe.minx,Te.miny=Ge.miny<Oe.miny?Ge.miny:Oe.miny,Te.maxx=Ge.maxx>Oe.maxx?Ge.maxx:Oe.maxx,Te.maxy=Ge.maxy>Oe.maxy?Ge.maxy:Oe.maxy,i=i.parent}}},Eo.prototype.removeLeaf=function(e){if(e==this.root)this.root=null;else{var t=e.parent,i=t.parent,n=t.child1==e?t.child2:t.child1;if(null!=i){i.child1==t?i.child1=n:i.child2=n,n.parent=i,t.height=-1;var r=t.aabb;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Oo.zpp_pool,Oo.zpp_pool=r,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Ao.zpp_pool,Ao.zpp_pool=t;for(var o=i;null!=o;){if(null==o.child1||o.height<2)o=o;else{var a=o.child1,s=o.child2,p=s.height-a.height;if(1<p){var l=s.child1,h=s.child2;if(s.child1=o,s.parent=o.parent,null!=(o.parent=s).parent?s.parent.child1==o?s.parent.child1=s:s.parent.child2=s:this.root=s,l.height>h.height){s.child2=l;var u=((o.child2=h).parent=o).aabb,d=a.aabb,c=h.aabb;u.minx=d.minx<c.minx?d.minx:c.minx,u.miny=d.miny<c.miny?d.miny:c.miny,u.maxx=d.maxx>c.maxx?d.maxx:c.maxx,u.maxy=d.maxy>c.maxy?d.maxy:c.maxy;var _=s.aabb,y=o.aabb,x=l.aabb;_.minx=y.minx<x.minx?y.minx:x.minx,_.miny=y.miny<x.miny?y.miny:x.miny,_.maxx=y.maxx>x.maxx?y.maxx:x.maxx,_.maxy=y.maxy>x.maxy?y.maxy:x.maxy;var m=a.height,f=h.height;o.height=1+(f<m?m:f);var v=o.height,g=l.height;s.height=1+(g<v?v:g)}else{s.child2=h;var z=((o.child2=l).parent=o).aabb,b=a.aabb,w=l.aabb;z.minx=b.minx<w.minx?b.minx:w.minx,z.miny=b.miny<w.miny?b.miny:w.miny,z.maxx=b.maxx>w.maxx?b.maxx:w.maxx,z.maxy=b.maxy>w.maxy?b.maxy:w.maxy;var S=s.aabb,C=o.aabb,M=h.aabb;S.minx=C.minx<M.minx?C.minx:M.minx,S.miny=C.miny<M.miny?C.miny:M.miny,S.maxx=C.maxx>M.maxx?C.maxx:M.maxx,S.maxy=C.maxy>M.maxy?C.maxy:M.maxy;var P=a.height,k=l.height;o.height=1+(k<P?P:k);var T=o.height,G=h.height;s.height=1+(G<T?T:G)}o=s}else if(p<-1){var O=a.child1,A=a.child2;if(a.child1=o,a.parent=o.parent,null!=(o.parent=a).parent?a.parent.child1==o?a.parent.child1=a:a.parent.child2=a:this.root=a,O.height>A.height){a.child2=O;var E=((o.child1=A).parent=o).aabb,I=s.aabb,B=A.aabb;E.minx=I.minx<B.minx?I.minx:B.minx,E.miny=I.miny<B.miny?I.miny:B.miny,E.maxx=I.maxx>B.maxx?I.maxx:B.maxx,E.maxy=I.maxy>B.maxy?I.maxy:B.maxy;var L=a.aabb,D=o.aabb,R=O.aabb;L.minx=D.minx<R.minx?D.minx:R.minx,L.miny=D.miny<R.miny?D.miny:R.miny,L.maxx=D.maxx>R.maxx?D.maxx:R.maxx,L.maxy=D.maxy>R.maxy?D.maxy:R.maxy;var F=s.height,j=A.height;o.height=1+(j<F?F:j);var N=o.height,U=O.height;a.height=1+(U<N?N:U)}else{a.child2=A;var H=((o.child1=O).parent=o).aabb,V=s.aabb,W=O.aabb;H.minx=V.minx<W.minx?V.minx:W.minx,H.miny=V.miny<W.miny?V.miny:W.miny,H.maxx=V.maxx>W.maxx?V.maxx:W.maxx,H.maxy=V.maxy>W.maxy?V.maxy:W.maxy;var X=a.aabb,q=o.aabb,Y=A.aabb;X.minx=q.minx<Y.minx?q.minx:Y.minx,X.miny=q.miny<Y.miny?q.miny:Y.miny,X.maxx=q.maxx>Y.maxx?q.maxx:Y.maxx,X.maxy=q.maxy>Y.maxy?q.maxy:Y.maxy;var Z=s.height,K=O.height;o.height=1+(K<Z?Z:K);var J=o.height,Q=A.height;a.height=1+(Q<J?J:Q)}o=a}else o=o}var $=o.child1,ee=o.child2,te=o.aabb,ie=$.aabb,ne=ee.aabb;te.minx=ie.minx<ne.minx?ie.minx:ne.minx,te.miny=ie.miny<ne.miny?ie.miny:ne.miny,te.maxx=ie.maxx>ne.maxx?ie.maxx:ne.maxx,te.maxy=ie.maxy>ne.maxy?ie.maxy:ne.maxy;var re=$.height,oe=ee.height;o.height=1+(oe<re?re:oe),o=o.parent}}else{(this.root=n).parent=null,t.height=-1;var ae=t.aabb;null!=ae.outer&&(ae.outer.zpp_inner=null,ae.outer=null),ae.wrap_min=ae.wrap_max=null,ae._invalidate=null,ae._validate=null,ae.next=Oo.zpp_pool,Oo.zpp_pool=ae,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Ao.zpp_pool,Ao.zpp_pool=t}}},Eo.prototype.inlined_removeLeaf=function(e){if(e!=this.root){var t=e.parent,i=t.parent,n=t.child1==e?t.child2:t.child1;if(null!=i){i.child1==t?i.child1=n:i.child2=n,n.parent=i,t.height=-1;var r=t.aabb;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Oo.zpp_pool,Oo.zpp_pool=r,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Ao.zpp_pool,Ao.zpp_pool=t;for(var o=i;null!=o;){if(null==o.child1||o.height<2)o=o;else{var a=o.child1,s=o.child2,p=s.height-a.height;if(1<p){var l=s.child1,h=s.child2;if(s.child1=o,s.parent=o.parent,null!=(o.parent=s).parent?s.parent.child1==o?s.parent.child1=s:s.parent.child2=s:this.root=s,l.height>h.height){s.child2=l;var u=((o.child2=h).parent=o).aabb,d=a.aabb,c=h.aabb;u.minx=d.minx<c.minx?d.minx:c.minx,u.miny=d.miny<c.miny?d.miny:c.miny,u.maxx=d.maxx>c.maxx?d.maxx:c.maxx,u.maxy=d.maxy>c.maxy?d.maxy:c.maxy;var _=s.aabb,y=o.aabb,x=l.aabb;_.minx=y.minx<x.minx?y.minx:x.minx,_.miny=y.miny<x.miny?y.miny:x.miny,_.maxx=y.maxx>x.maxx?y.maxx:x.maxx,_.maxy=y.maxy>x.maxy?y.maxy:x.maxy;var m=a.height,f=h.height;o.height=1+(f<m?m:f);var v=o.height,g=l.height;s.height=1+(g<v?v:g)}else{s.child2=h;var z=((o.child2=l).parent=o).aabb,b=a.aabb,w=l.aabb;z.minx=b.minx<w.minx?b.minx:w.minx,z.miny=b.miny<w.miny?b.miny:w.miny,z.maxx=b.maxx>w.maxx?b.maxx:w.maxx,z.maxy=b.maxy>w.maxy?b.maxy:w.maxy;var S=s.aabb,C=o.aabb,M=h.aabb;S.minx=C.minx<M.minx?C.minx:M.minx,S.miny=C.miny<M.miny?C.miny:M.miny,S.maxx=C.maxx>M.maxx?C.maxx:M.maxx,S.maxy=C.maxy>M.maxy?C.maxy:M.maxy;var P=a.height,k=l.height;o.height=1+(k<P?P:k);var T=o.height,G=h.height;s.height=1+(G<T?T:G)}o=s}else if(p<-1){var O=a.child1,A=a.child2;if(a.child1=o,a.parent=o.parent,null!=(o.parent=a).parent?a.parent.child1==o?a.parent.child1=a:a.parent.child2=a:this.root=a,O.height>A.height){a.child2=O;var E=((o.child1=A).parent=o).aabb,I=s.aabb,B=A.aabb;E.minx=I.minx<B.minx?I.minx:B.minx,E.miny=I.miny<B.miny?I.miny:B.miny,E.maxx=I.maxx>B.maxx?I.maxx:B.maxx,E.maxy=I.maxy>B.maxy?I.maxy:B.maxy;var L=a.aabb,D=o.aabb,R=O.aabb;L.minx=D.minx<R.minx?D.minx:R.minx,L.miny=D.miny<R.miny?D.miny:R.miny,L.maxx=D.maxx>R.maxx?D.maxx:R.maxx,L.maxy=D.maxy>R.maxy?D.maxy:R.maxy;var F=s.height,j=A.height;o.height=1+(j<F?F:j);var N=o.height,U=O.height;a.height=1+(U<N?N:U)}else{a.child2=A;var H=((o.child1=O).parent=o).aabb,V=s.aabb,W=O.aabb;H.minx=V.minx<W.minx?V.minx:W.minx,H.miny=V.miny<W.miny?V.miny:W.miny,H.maxx=V.maxx>W.maxx?V.maxx:W.maxx,H.maxy=V.maxy>W.maxy?V.maxy:W.maxy;var X=a.aabb,q=o.aabb,Y=A.aabb;X.minx=q.minx<Y.minx?q.minx:Y.minx,X.miny=q.miny<Y.miny?q.miny:Y.miny,X.maxx=q.maxx>Y.maxx?q.maxx:Y.maxx,X.maxy=q.maxy>Y.maxy?q.maxy:Y.maxy;var Z=s.height,K=O.height;o.height=1+(K<Z?Z:K);var J=o.height,Q=A.height;a.height=1+(Q<J?J:Q)}o=a}else o=o}var $=o.child1,ee=o.child2,te=o.aabb,ie=$.aabb,ne=ee.aabb;te.minx=ie.minx<ne.minx?ie.minx:ne.minx,te.miny=ie.miny<ne.miny?ie.miny:ne.miny,te.maxx=ie.maxx>ne.maxx?ie.maxx:ne.maxx,te.maxy=ie.maxy>ne.maxy?ie.maxy:ne.maxy;var re=$.height,oe=ee.height;o.height=1+(oe<re?re:oe),o=o.parent}}else{(this.root=n).parent=null,t.height=-1;var ae=t.aabb;null!=ae.outer&&(ae.outer.zpp_inner=null,ae.outer=null),ae.wrap_min=ae.wrap_max=null,ae._invalidate=null,ae._validate=null,ae.next=Oo.zpp_pool,Oo.zpp_pool=ae,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Ao.zpp_pool,Ao.zpp_pool=t}}else this.root=null},Eo.prototype.balance=function(e){if(null==e.child1||e.height<2)return e;var t=e.child1,i=e.child2,n=i.height-t.height;if(1<n){var r=i.child1,o=i.child2;if(i.child1=e,i.parent=e.parent,null!=(e.parent=i).parent?i.parent.child1==e?i.parent.child1=i:i.parent.child2=i:this.root=i,r.height>o.height){i.child2=r;var a=((e.child2=o).parent=e).aabb,s=t.aabb,p=o.aabb;a.minx=s.minx<p.minx?s.minx:p.minx,a.miny=s.miny<p.miny?s.miny:p.miny,a.maxx=s.maxx>p.maxx?s.maxx:p.maxx,a.maxy=s.maxy>p.maxy?s.maxy:p.maxy;var l=i.aabb,h=e.aabb,u=r.aabb;l.minx=h.minx<u.minx?h.minx:u.minx,l.miny=h.miny<u.miny?h.miny:u.miny,l.maxx=h.maxx>u.maxx?h.maxx:u.maxx,l.maxy=h.maxy>u.maxy?h.maxy:u.maxy;var d=t.height,c=o.height;e.height=1+(c<d?d:c);var _=e.height,y=r.height;i.height=1+(y<_?_:y)}else{i.child2=o;var x=((e.child2=r).parent=e).aabb,m=t.aabb,f=r.aabb;x.minx=m.minx<f.minx?m.minx:f.minx,x.miny=m.miny<f.miny?m.miny:f.miny,x.maxx=m.maxx>f.maxx?m.maxx:f.maxx,x.maxy=m.maxy>f.maxy?m.maxy:f.maxy;var v=i.aabb,g=e.aabb,z=o.aabb;v.minx=g.minx<z.minx?g.minx:z.minx,v.miny=g.miny<z.miny?g.miny:z.miny,v.maxx=g.maxx>z.maxx?g.maxx:z.maxx,v.maxy=g.maxy>z.maxy?g.maxy:z.maxy;var b=t.height,w=r.height;e.height=1+(w<b?b:w);var S=e.height,C=o.height;i.height=1+(C<S?S:C)}return i}if(n<-1){var M=t.child1,P=t.child2;if(t.child1=e,t.parent=e.parent,null!=(e.parent=t).parent?t.parent.child1==e?t.parent.child1=t:t.parent.child2=t:this.root=t,M.height>P.height){t.child2=M;var k=((e.child1=P).parent=e).aabb,T=i.aabb,G=P.aabb;k.minx=T.minx<G.minx?T.minx:G.minx,k.miny=T.miny<G.miny?T.miny:G.miny,k.maxx=T.maxx>G.maxx?T.maxx:G.maxx,k.maxy=T.maxy>G.maxy?T.maxy:G.maxy;var O=t.aabb,A=e.aabb,E=M.aabb;O.minx=A.minx<E.minx?A.minx:E.minx,O.miny=A.miny<E.miny?A.miny:E.miny,O.maxx=A.maxx>E.maxx?A.maxx:E.maxx,O.maxy=A.maxy>E.maxy?A.maxy:E.maxy;var I=i.height,B=P.height;e.height=1+(B<I?I:B);var L=e.height,D=M.height;t.height=1+(D<L?L:D)}else{t.child2=P;var R=((e.child1=M).parent=e).aabb,F=i.aabb,j=M.aabb;R.minx=F.minx<j.minx?F.minx:j.minx,R.miny=F.miny<j.miny?F.miny:j.miny,R.maxx=F.maxx>j.maxx?F.maxx:j.maxx,R.maxy=F.maxy>j.maxy?F.maxy:j.maxy;var N=t.aabb,U=e.aabb,H=P.aabb;N.minx=U.minx<H.minx?U.minx:H.minx,N.miny=U.miny<H.miny?U.miny:H.miny,N.maxx=U.maxx>H.maxx?U.maxx:H.maxx,N.maxy=U.maxy>H.maxy?U.maxy:H.maxy;var V=i.height,W=M.height;e.height=1+(W<V?V:W);var X=e.height,q=P.height;t.height=1+(q<X?X:q)}return t}return e},Eo.prototype.__class__=Eo;var ii=zpp_nape.space.ZPP_DynAABBPhase=function(e){this.openlist=null,this.failed=null,this.treeStack2=null,this.treeStack=null,this.moves=null,this.syncs=null,this.pairs=null,this.dtree=null,this.stree=null,ti.call(this),this.space=e,this.is_sweep=!1,(this.dynab=this).stree=new Eo,this.dtree=new Eo};ii.__name__=["zpp_nape","space","ZPP_DynAABBPhase"],ii.__super__=ti,ii.prototype=Object.create(ti.prototype),ii.prototype.stree=null,ii.prototype.dtree=null,ii.prototype.pairs=null,ii.prototype.syncs=null,ii.prototype.moves=null,ii.prototype.dyn=function(e){return 1!=e.body.type&&!e.body.component.sleeping},ii.prototype.__insert=function(e){var t;null==Ao.zpp_pool?t=new Ao:(t=Ao.zpp_pool,Ao.zpp_pool=t.next,t.next=null),null==Oo.zpp_pool?t.aabb=new Oo:(t.aabb=Oo.zpp_pool,Oo.zpp_pool=t.aabb.next,t.aabb.next=null),t.moved=!1,t.synced=!1,t.first_sync=!1,((t.shape=e).node=t).synced=!0,t.first_sync=!0,t.snext=this.syncs,this.syncs=t},ii.prototype.__remove=function(e){var t=e.node;if(t.first_sync||(t.dyn?this.dtree.removeLeaf(t):this.stree.removeLeaf(t)),e.node=null,t.synced){for(var i=null,n=this.syncs;null!=n&&n!=t;)n=(i=n).snext;null==i?this.syncs=n.snext:i.snext=n.snext,n.snext=null,t.synced=!1}if(t.moved){for(var r=null,o=this.moves;null!=o&&o!=t;)o=(r=o).mnext;null==r?this.moves=o.mnext:r.mnext=o.mnext,o.mnext=null,t.moved=!1}for(var a=null,s=this.pairs;null!=s;){var p=s.next;if(s.n1!=t&&s.n2!=t)a=s,s=p;else{null==a?this.pairs=p:a.next=p,null!=s.arb&&(s.arb.pair=null),s.arb=null,s.n1.shape.pairs.remove(s),s.n2.shape.pairs.remove(s);var l=s;l.n1=l.n2=null,l.sleeping=!1,l.next=nr.zpp_pool,nr.zpp_pool=l,s=p}}for(;null!=e.pairs.head;){var h=e.pairs.pop_unsafe();h.n1==t?h.n2.shape.pairs.remove(h):h.n1.shape.pairs.remove(h),null!=h.arb&&(h.arb.pair=null),h.arb=null,h.n1=h.n2=null,h.sleeping=!1,h.next=nr.zpp_pool,nr.zpp_pool=h}t.height=-1;var u=t.aabb;null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u.wrap_min=u.wrap_max=null,u._invalidate=null,u._validate=null,u.next=Oo.zpp_pool,Oo.zpp_pool=u,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Ao.zpp_pool,Ao.zpp_pool=t},ii.prototype.__sync=function(e){var t=e.node;if(!t.synced){if(!this.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var i=e.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var x=i.radius,m=i.radius;i.aabb.minx=i.worldCOMx-x,i.aabb.miny=i.worldCOMy-m,i.aabb.maxx=i.worldCOMx+x,i.aabb.maxy=i.worldCOMy+m}else{var f=e.polygon;if(f.zip_gverts&&null!=f.body){f.zip_gverts=!1,f.validate_lverts();var v=f.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var g=f.lverts.next,z=f.gverts.next;null!=z;){var b=z,w=g;g=g.next,b.x=f.body.posx+(f.body.axisy*w.x-f.body.axisx*w.y),b.y=f.body.posy+(w.x*f.body.axisx+w.y*f.body.axisy),z=z.next}}var S=f.gverts.next;f.aabb.minx=S.x,f.aabb.miny=S.y,f.aabb.maxx=S.x,f.aabb.maxy=S.y;for(var C=f.gverts.next.next;null!=C;){var M=C;M.x<f.aabb.minx&&(f.aabb.minx=M.x),M.x>f.aabb.maxx&&(f.aabb.maxx=M.x),M.y<f.aabb.miny&&(f.aabb.miny=M.y),M.y>f.aabb.maxy&&(f.aabb.maxy=M.y),C=C.next}}var P;if(t.dyn==(1!=e.body.type&&!e.body.component.sleeping)){var k=t.aabb,T=e.aabb;P=!(T.minx>=k.minx&&T.miny>=k.miny&&T.maxx<=k.maxx&&T.maxy<=k.maxy)}else P=!0;P&&(t.synced=!0,t.snext=this.syncs,this.syncs=t)}},ii.prototype.sync_broadphase=function(){if(this.space.validation(),null!=this.syncs)if(null==this.moves){for(var e=this.syncs;null!=e;){var t=e.shape;if(e.first_sync)e.first_sync=!1;else{var i=e.dyn?this.dtree:this.stree;if(e==i.root)i.root=null;else{var n=e.parent,r=n.parent,o=n.child1==e?n.child2:n.child1;if(null!=r){r.child1==n?r.child1=o:r.child2=o,o.parent=r,n.height=-1;var a=n.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a.wrap_min=a.wrap_max=null,a._invalidate=null,a._validate=null,a.next=Oo.zpp_pool,Oo.zpp_pool=a,n.child1=n.child2=n.parent=null,n.next=null,n.snext=null,n.mnext=null,n.next=Ao.zpp_pool,Ao.zpp_pool=n;for(var s=r;null!=s;){if(null==s.child1||s.height<2)s=s;else{var p=s.child1,l=s.child2,h=l.height-p.height;if(1<h){var u=l.child1,d=l.child2;if(l.child1=s,l.parent=s.parent,null!=(s.parent=l).parent?l.parent.child1==s?l.parent.child1=l:l.parent.child2=l:i.root=l,u.height>d.height){l.child2=u;var c=((s.child2=d).parent=s).aabb,_=p.aabb,y=d.aabb;c.minx=_.minx<y.minx?_.minx:y.minx,c.miny=_.miny<y.miny?_.miny:y.miny,c.maxx=_.maxx>y.maxx?_.maxx:y.maxx,c.maxy=_.maxy>y.maxy?_.maxy:y.maxy;var x=l.aabb,m=s.aabb,f=u.aabb;x.minx=m.minx<f.minx?m.minx:f.minx,x.miny=m.miny<f.miny?m.miny:f.miny,x.maxx=m.maxx>f.maxx?m.maxx:f.maxx,x.maxy=m.maxy>f.maxy?m.maxy:f.maxy;var v=p.height,g=d.height;s.height=1+(g<v?v:g);var z=s.height,b=u.height;l.height=1+(b<z?z:b)}else{l.child2=d;var w=((s.child2=u).parent=s).aabb,S=p.aabb,C=u.aabb;w.minx=S.minx<C.minx?S.minx:C.minx,w.miny=S.miny<C.miny?S.miny:C.miny,w.maxx=S.maxx>C.maxx?S.maxx:C.maxx,w.maxy=S.maxy>C.maxy?S.maxy:C.maxy;var M=l.aabb,P=s.aabb,k=d.aabb;M.minx=P.minx<k.minx?P.minx:k.minx,M.miny=P.miny<k.miny?P.miny:k.miny,M.maxx=P.maxx>k.maxx?P.maxx:k.maxx,M.maxy=P.maxy>k.maxy?P.maxy:k.maxy;var T=p.height,G=u.height;s.height=1+(G<T?T:G);var O=s.height,A=d.height;l.height=1+(A<O?O:A)}s=l}else if(h<-1){var E=p.child1,I=p.child2;if(p.child1=s,p.parent=s.parent,null!=(s.parent=p).parent?p.parent.child1==s?p.parent.child1=p:p.parent.child2=p:i.root=p,E.height>I.height){p.child2=E;var B=((s.child1=I).parent=s).aabb,L=l.aabb,D=I.aabb;B.minx=L.minx<D.minx?L.minx:D.minx,B.miny=L.miny<D.miny?L.miny:D.miny,B.maxx=L.maxx>D.maxx?L.maxx:D.maxx,B.maxy=L.maxy>D.maxy?L.maxy:D.maxy;var R=p.aabb,F=s.aabb,j=E.aabb;R.minx=F.minx<j.minx?F.minx:j.minx,R.miny=F.miny<j.miny?F.miny:j.miny,R.maxx=F.maxx>j.maxx?F.maxx:j.maxx,R.maxy=F.maxy>j.maxy?F.maxy:j.maxy;var N=l.height,U=I.height;s.height=1+(U<N?N:U);var H=s.height,V=E.height;p.height=1+(V<H?H:V)}else{p.child2=I;var W=((s.child1=E).parent=s).aabb,X=l.aabb,q=E.aabb;W.minx=X.minx<q.minx?X.minx:q.minx,W.miny=X.miny<q.miny?X.miny:q.miny,W.maxx=X.maxx>q.maxx?X.maxx:q.maxx,W.maxy=X.maxy>q.maxy?X.maxy:q.maxy;var Y=p.aabb,Z=s.aabb,K=I.aabb;Y.minx=Z.minx<K.minx?Z.minx:K.minx,Y.miny=Z.miny<K.miny?Z.miny:K.miny,Y.maxx=Z.maxx>K.maxx?Z.maxx:K.maxx,Y.maxy=Z.maxy>K.maxy?Z.maxy:K.maxy;var J=l.height,Q=E.height;s.height=1+(Q<J?J:Q);var $=s.height,ee=I.height;p.height=1+(ee<$?$:ee)}s=p}else s=s}var te=s.child1,ie=s.child2,ne=s.aabb,re=te.aabb,oe=ie.aabb;ne.minx=re.minx<oe.minx?re.minx:oe.minx,ne.miny=re.miny<oe.miny?re.miny:oe.miny,ne.maxx=re.maxx>oe.maxx?re.maxx:oe.maxx,ne.maxy=re.maxy>oe.maxy?re.maxy:oe.maxy;var ae=te.height,se=ie.height;s.height=1+(se<ae?ae:se),s=s.parent}}else{(i.root=o).parent=null,n.height=-1;var pe=n.aabb;null!=pe.outer&&(pe.outer.zpp_inner=null,pe.outer=null),pe.wrap_min=pe.wrap_max=null,pe._invalidate=null,pe._validate=null,pe.next=Oo.zpp_pool,Oo.zpp_pool=pe,n.child1=n.child2=n.parent=null,n.next=null,n.snext=null,n.mnext=null,n.next=Ao.zpp_pool,Ao.zpp_pool=n}}}var le=e.aabb;if(!this.space.continuous&&t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var he=t.circle;if(he.zip_worldCOM&&null!=he.body){if(he.zip_worldCOM=!1,he.zip_localCOM){if(he.zip_localCOM=!1,1==he.type){var ue=he.polygon;if(null==ue.lverts.next.next)ue.localCOMx=ue.lverts.next.x,ue.localCOMy=ue.lverts.next.y;else if(null==ue.lverts.next.next.next)ue.localCOMx=ue.lverts.next.x,ue.localCOMy=ue.lverts.next.y,ue.localCOMx+=ue.lverts.next.next.x,ue.localCOMy+=ue.lverts.next.next.y,ue.localCOMx*=.5,ue.localCOMy*=.5;else{ue.localCOMx=0;var de=ue.localCOMy=0,ce=ue.lverts.next,_e=ce,ye=ce=ce.next;for(ce=ce.next;null!=ce;){var xe=ce;de+=ye.x*(xe.y-_e.y);var me=xe.y*ye.x-xe.x*ye.y;ue.localCOMx+=(ye.x+xe.x)*me,ue.localCOMy+=(ye.y+xe.y)*me,_e=ye,ye=xe,ce=ce.next}var fe=ce=ue.lverts.next;de+=ye.x*(fe.y-_e.y);var ve=fe.y*ye.x-fe.x*ye.y;ue.localCOMx+=(ye.x+fe.x)*ve,ue.localCOMy+=(ye.y+fe.y)*ve,_e=ye;var ge=ce=ce.next;de+=fe.x*(ge.y-_e.y);var ze=ge.y*fe.x-ge.x*fe.y;ue.localCOMx+=(fe.x+ge.x)*ze,ue.localCOMy+=(fe.y+ge.y)*ze;var be=de=1/(3*de);ue.localCOMx*=be,ue.localCOMy*=be}}null!=he.wrap_localCOM&&(he.wrap_localCOM.zpp_inner.x=he.localCOMx,he.wrap_localCOM.zpp_inner.y=he.localCOMy)}var we=he.body;we.zip_axis&&(we.zip_axis=!1,we.axisx=Math.sin(we.rot),we.axisy=Math.cos(we.rot)),he.worldCOMx=he.body.posx+(he.body.axisy*he.localCOMx-he.body.axisx*he.localCOMy),he.worldCOMy=he.body.posy+(he.localCOMx*he.body.axisx+he.localCOMy*he.body.axisy)}var Se=he.radius,Ce=he.radius;he.aabb.minx=he.worldCOMx-Se,he.aabb.miny=he.worldCOMy-Ce,he.aabb.maxx=he.worldCOMx+Se,he.aabb.maxy=he.worldCOMy+Ce}else{var Me=t.polygon;if(Me.zip_gverts&&null!=Me.body){Me.zip_gverts=!1,Me.validate_lverts();var Pe=Me.body;Pe.zip_axis&&(Pe.zip_axis=!1,Pe.axisx=Math.sin(Pe.rot),Pe.axisy=Math.cos(Pe.rot));for(var ke=Me.lverts.next,Te=Me.gverts.next;null!=Te;){var Ge=Te,Oe=ke;ke=ke.next,Ge.x=Me.body.posx+(Me.body.axisy*Oe.x-Me.body.axisx*Oe.y),Ge.y=Me.body.posy+(Oe.x*Me.body.axisx+Oe.y*Me.body.axisy),Te=Te.next}}var Ae=Me.gverts.next;Me.aabb.minx=Ae.x,Me.aabb.miny=Ae.y,Me.aabb.maxx=Ae.x,Me.aabb.maxy=Ae.y;for(var Ee=Me.gverts.next.next;null!=Ee;){var Ie=Ee;Ie.x<Me.aabb.minx&&(Me.aabb.minx=Ie.x),Ie.x>Me.aabb.maxx&&(Me.aabb.maxx=Ie.x),Ie.y<Me.aabb.miny&&(Me.aabb.miny=Ie.y),Ie.y>Me.aabb.maxy&&(Me.aabb.maxy=Ie.y),Ee=Ee.next}}var Be=t.aabb;le.minx=Be.minx-3,le.miny=Be.miny-3,le.maxx=Be.maxx+3,le.maxy=Be.maxy+3;var Le=(e.dyn=1!=t.body.type&&!t.body.component.sleeping)?this.dtree:this.stree;if(null==Le.root)Le.root=e,Le.root.parent=null;else{for(var De=e.aabb,Re=Le.root;null!=Re.child1;){var Fe=Re.child1,je=Re.child2,Ne=Re.aabb,Ue=2*(Ne.maxx-Ne.minx+(Ne.maxy-Ne.miny)),He=Eo.tmpaabb,Ve=Re.aabb;He.minx=Ve.minx<De.minx?Ve.minx:De.minx,He.miny=Ve.miny<De.miny?Ve.miny:De.miny,He.maxx=Ve.maxx>De.maxx?Ve.maxx:De.maxx,He.maxy=Ve.maxy>De.maxy?Ve.maxy:De.maxy;var We,Xe=Eo.tmpaabb,qe=2*(Xe.maxx-Xe.minx+(Xe.maxy-Xe.miny)),Ye=2*qe,Ze=2*(qe-Ue),Ke=Eo.tmpaabb,Je=Fe.aabb;if(Ke.minx=De.minx<Je.minx?De.minx:Je.minx,Ke.miny=De.miny<Je.miny?De.miny:Je.miny,Ke.maxx=De.maxx>Je.maxx?De.maxx:Je.maxx,Ke.maxy=De.maxy>Je.maxy?De.maxy:Je.maxy,null==Fe.child1){var Qe=Eo.tmpaabb;We=2*(Qe.maxx-Qe.minx+(Qe.maxy-Qe.miny))+Ze}else{var $e=Fe.aabb,et=2*($e.maxx-$e.minx+($e.maxy-$e.miny)),tt=Eo.tmpaabb;We=2*(tt.maxx-tt.minx+(tt.maxy-tt.miny))-et+Ze}var it,nt=Eo.tmpaabb,rt=je.aabb;if(nt.minx=De.minx<rt.minx?De.minx:rt.minx,nt.miny=De.miny<rt.miny?De.miny:rt.miny,nt.maxx=De.maxx>rt.maxx?De.maxx:rt.maxx,nt.maxy=De.maxy>rt.maxy?De.maxy:rt.maxy,null==je.child1){var ot=Eo.tmpaabb;it=2*(ot.maxx-ot.minx+(ot.maxy-ot.miny))+Ze}else{var at=je.aabb,st=2*(at.maxx-at.minx+(at.maxy-at.miny)),pt=Eo.tmpaabb;it=2*(pt.maxx-pt.minx+(pt.maxy-pt.miny))-st+Ze}if(Ye<We&&Ye<it)break;Re=We<it?Fe:je}var lt,ht=Re,ut=ht.parent;null==Ao.zpp_pool?lt=new Ao:(lt=Ao.zpp_pool,Ao.zpp_pool=lt.next,lt.next=null),null==Oo.zpp_pool?lt.aabb=new Oo:(lt.aabb=Oo.zpp_pool,Oo.zpp_pool=lt.aabb.next,lt.aabb.next=null),lt.moved=!1,lt.synced=!1,lt.first_sync=!1,lt.parent=ut;var dt=lt.aabb,ct=ht.aabb;for(dt.minx=De.minx<ct.minx?De.minx:ct.minx,dt.miny=De.miny<ct.miny?De.miny:ct.miny,dt.maxx=De.maxx>ct.maxx?De.maxx:ct.maxx,dt.maxy=De.maxy>ct.maxy?De.maxy:ct.maxy,lt.height=ht.height+1,null!=ut?(ut.child1==ht?ut.child1=lt:ut.child2=lt,lt.child1=ht,lt.child2=e,ht.parent=lt,e.parent=lt):(lt.child1=ht,lt.child2=e,ht.parent=lt,e.parent=lt,Le.root=lt),Re=e.parent;null!=Re;){if(null==Re.child1||Re.height<2)Re=Re;else{var _t=Re.child1,yt=Re.child2,xt=yt.height-_t.height;if(1<xt){var mt=yt.child1,ft=yt.child2;if(yt.child1=Re,yt.parent=Re.parent,null!=(Re.parent=yt).parent?yt.parent.child1==Re?yt.parent.child1=yt:yt.parent.child2=yt:Le.root=yt,mt.height>ft.height){yt.child2=mt;var vt=((Re.child2=ft).parent=Re).aabb,gt=_t.aabb,zt=ft.aabb;vt.minx=gt.minx<zt.minx?gt.minx:zt.minx,vt.miny=gt.miny<zt.miny?gt.miny:zt.miny,vt.maxx=gt.maxx>zt.maxx?gt.maxx:zt.maxx,vt.maxy=gt.maxy>zt.maxy?gt.maxy:zt.maxy;var bt=yt.aabb,wt=Re.aabb,St=mt.aabb;bt.minx=wt.minx<St.minx?wt.minx:St.minx,bt.miny=wt.miny<St.miny?wt.miny:St.miny,bt.maxx=wt.maxx>St.maxx?wt.maxx:St.maxx,bt.maxy=wt.maxy>St.maxy?wt.maxy:St.maxy;var Ct=_t.height,Mt=ft.height;Re.height=1+(Mt<Ct?Ct:Mt);var Pt=Re.height,kt=mt.height;yt.height=1+(kt<Pt?Pt:kt)}else{yt.child2=ft;var Tt=((Re.child2=mt).parent=Re).aabb,Gt=_t.aabb,Ot=mt.aabb;Tt.minx=Gt.minx<Ot.minx?Gt.minx:Ot.minx,Tt.miny=Gt.miny<Ot.miny?Gt.miny:Ot.miny,Tt.maxx=Gt.maxx>Ot.maxx?Gt.maxx:Ot.maxx,Tt.maxy=Gt.maxy>Ot.maxy?Gt.maxy:Ot.maxy;var At=yt.aabb,Et=Re.aabb,It=ft.aabb;At.minx=Et.minx<It.minx?Et.minx:It.minx,At.miny=Et.miny<It.miny?Et.miny:It.miny,At.maxx=Et.maxx>It.maxx?Et.maxx:It.maxx,At.maxy=Et.maxy>It.maxy?Et.maxy:It.maxy;var Bt=_t.height,Lt=mt.height;Re.height=1+(Lt<Bt?Bt:Lt);var Dt=Re.height,Rt=ft.height;yt.height=1+(Rt<Dt?Dt:Rt)}Re=yt}else if(xt<-1){var Ft=_t.child1,jt=_t.child2;if(_t.child1=Re,_t.parent=Re.parent,null!=(Re.parent=_t).parent?_t.parent.child1==Re?_t.parent.child1=_t:_t.parent.child2=_t:Le.root=_t,Ft.height>jt.height){_t.child2=Ft;var Nt=((Re.child1=jt).parent=Re).aabb,Ut=yt.aabb,Ht=jt.aabb;Nt.minx=Ut.minx<Ht.minx?Ut.minx:Ht.minx,Nt.miny=Ut.miny<Ht.miny?Ut.miny:Ht.miny,Nt.maxx=Ut.maxx>Ht.maxx?Ut.maxx:Ht.maxx,Nt.maxy=Ut.maxy>Ht.maxy?Ut.maxy:Ht.maxy;var Vt=_t.aabb,Wt=Re.aabb,Xt=Ft.aabb;Vt.minx=Wt.minx<Xt.minx?Wt.minx:Xt.minx,Vt.miny=Wt.miny<Xt.miny?Wt.miny:Xt.miny,Vt.maxx=Wt.maxx>Xt.maxx?Wt.maxx:Xt.maxx,Vt.maxy=Wt.maxy>Xt.maxy?Wt.maxy:Xt.maxy;var qt=yt.height,Yt=jt.height;Re.height=1+(Yt<qt?qt:Yt);var Zt=Re.height,Kt=Ft.height;_t.height=1+(Kt<Zt?Zt:Kt)}else{_t.child2=jt;var Jt=((Re.child1=Ft).parent=Re).aabb,Qt=yt.aabb,$t=Ft.aabb;Jt.minx=Qt.minx<$t.minx?Qt.minx:$t.minx,Jt.miny=Qt.miny<$t.miny?Qt.miny:$t.miny,Jt.maxx=Qt.maxx>$t.maxx?Qt.maxx:$t.maxx,Jt.maxy=Qt.maxy>$t.maxy?Qt.maxy:$t.maxy;var ei=_t.aabb,ti=Re.aabb,ii=jt.aabb;ei.minx=ti.minx<ii.minx?ti.minx:ii.minx,ei.miny=ti.miny<ii.miny?ti.miny:ii.miny,ei.maxx=ti.maxx>ii.maxx?ti.maxx:ii.maxx,ei.maxy=ti.maxy>ii.maxy?ti.maxy:ii.maxy;var ni=yt.height,ri=Ft.height;Re.height=1+(ri<ni?ni:ri);var oi=Re.height,ai=jt.height;_t.height=1+(ai<oi?oi:ai)}Re=_t}else Re=Re}var si=Re.child1,pi=Re.child2,li=si.height,hi=pi.height;Re.height=1+(hi<li?li:hi);var ui=Re.aabb,di=si.aabb,ci=pi.aabb;ui.minx=di.minx<ci.minx?di.minx:ci.minx,ui.miny=di.miny<ci.miny?di.miny:ci.miny,ui.maxx=di.maxx>ci.maxx?di.maxx:ci.maxx,ui.maxy=di.maxy>ci.maxy?di.maxy:ci.maxy,Re=Re.parent}}e.synced=!1,e.moved=!0,e.mnext=e.snext,e.snext=null,e=e.mnext}var _i=this.syncs;this.syncs=this.moves,this.moves=_i}else for(;null!=this.syncs;){var yi=this.syncs;this.syncs=yi.snext,yi.snext=null;var xi=yi.shape;if(yi.first_sync)yi.first_sync=!1;else{var mi=yi.dyn?this.dtree:this.stree;if(yi==mi.root)mi.root=null;else{var fi=yi.parent,vi=fi.parent,gi=fi.child1==yi?fi.child2:fi.child1;if(null!=vi){vi.child1==fi?vi.child1=gi:vi.child2=gi,gi.parent=vi,fi.height=-1;var zi=fi.aabb;null!=zi.outer&&(zi.outer.zpp_inner=null,zi.outer=null),zi.wrap_min=zi.wrap_max=null,zi._invalidate=null,zi._validate=null,zi.next=Oo.zpp_pool,Oo.zpp_pool=zi,fi.child1=fi.child2=fi.parent=null,fi.next=null,fi.snext=null,fi.mnext=null,fi.next=Ao.zpp_pool,Ao.zpp_pool=fi;for(var bi=vi;null!=bi;){if(null==bi.child1||bi.height<2)bi=bi;else{var wi=bi.child1,Si=bi.child2,Ci=Si.height-wi.height;if(1<Ci){var Mi=Si.child1,Pi=Si.child2;if(Si.child1=bi,Si.parent=bi.parent,null!=(bi.parent=Si).parent?Si.parent.child1==bi?Si.parent.child1=Si:Si.parent.child2=Si:mi.root=Si,Mi.height>Pi.height){Si.child2=Mi;var ki=((bi.child2=Pi).parent=bi).aabb,Ti=wi.aabb,Gi=Pi.aabb;ki.minx=Ti.minx<Gi.minx?Ti.minx:Gi.minx,ki.miny=Ti.miny<Gi.miny?Ti.miny:Gi.miny,ki.maxx=Ti.maxx>Gi.maxx?Ti.maxx:Gi.maxx,ki.maxy=Ti.maxy>Gi.maxy?Ti.maxy:Gi.maxy;var Oi=Si.aabb,Ai=bi.aabb,Ei=Mi.aabb;Oi.minx=Ai.minx<Ei.minx?Ai.minx:Ei.minx,Oi.miny=Ai.miny<Ei.miny?Ai.miny:Ei.miny,Oi.maxx=Ai.maxx>Ei.maxx?Ai.maxx:Ei.maxx,Oi.maxy=Ai.maxy>Ei.maxy?Ai.maxy:Ei.maxy;var Ii=wi.height,Bi=Pi.height;bi.height=1+(Bi<Ii?Ii:Bi);var Li=bi.height,Di=Mi.height;Si.height=1+(Di<Li?Li:Di)}else{Si.child2=Pi;var Ri=((bi.child2=Mi).parent=bi).aabb,Fi=wi.aabb,ji=Mi.aabb;Ri.minx=Fi.minx<ji.minx?Fi.minx:ji.minx,Ri.miny=Fi.miny<ji.miny?Fi.miny:ji.miny,Ri.maxx=Fi.maxx>ji.maxx?Fi.maxx:ji.maxx,Ri.maxy=Fi.maxy>ji.maxy?Fi.maxy:ji.maxy;var Ni=Si.aabb,Ui=bi.aabb,Hi=Pi.aabb;Ni.minx=Ui.minx<Hi.minx?Ui.minx:Hi.minx,Ni.miny=Ui.miny<Hi.miny?Ui.miny:Hi.miny,Ni.maxx=Ui.maxx>Hi.maxx?Ui.maxx:Hi.maxx,Ni.maxy=Ui.maxy>Hi.maxy?Ui.maxy:Hi.maxy;var Vi=wi.height,Wi=Mi.height;bi.height=1+(Wi<Vi?Vi:Wi);var Xi=bi.height,qi=Pi.height;Si.height=1+(qi<Xi?Xi:qi)}bi=Si}else if(Ci<-1){var Yi=wi.child1,Zi=wi.child2;if(wi.child1=bi,wi.parent=bi.parent,null!=(bi.parent=wi).parent?wi.parent.child1==bi?wi.parent.child1=wi:wi.parent.child2=wi:mi.root=wi,Yi.height>Zi.height){wi.child2=Yi;var Ki=((bi.child1=Zi).parent=bi).aabb,Ji=Si.aabb,Qi=Zi.aabb;Ki.minx=Ji.minx<Qi.minx?Ji.minx:Qi.minx,Ki.miny=Ji.miny<Qi.miny?Ji.miny:Qi.miny,Ki.maxx=Ji.maxx>Qi.maxx?Ji.maxx:Qi.maxx,Ki.maxy=Ji.maxy>Qi.maxy?Ji.maxy:Qi.maxy;var $i=wi.aabb,en=bi.aabb,tn=Yi.aabb;$i.minx=en.minx<tn.minx?en.minx:tn.minx,$i.miny=en.miny<tn.miny?en.miny:tn.miny,$i.maxx=en.maxx>tn.maxx?en.maxx:tn.maxx,$i.maxy=en.maxy>tn.maxy?en.maxy:tn.maxy;var nn=Si.height,rn=Zi.height;bi.height=1+(rn<nn?nn:rn);var on=bi.height,an=Yi.height;wi.height=1+(an<on?on:an)}else{wi.child2=Zi;var sn=((bi.child1=Yi).parent=bi).aabb,pn=Si.aabb,ln=Yi.aabb;sn.minx=pn.minx<ln.minx?pn.minx:ln.minx,sn.miny=pn.miny<ln.miny?pn.miny:ln.miny,sn.maxx=pn.maxx>ln.maxx?pn.maxx:ln.maxx,sn.maxy=pn.maxy>ln.maxy?pn.maxy:ln.maxy;var hn=wi.aabb,un=bi.aabb,dn=Zi.aabb;hn.minx=un.minx<dn.minx?un.minx:dn.minx,hn.miny=un.miny<dn.miny?un.miny:dn.miny,hn.maxx=un.maxx>dn.maxx?un.maxx:dn.maxx,hn.maxy=un.maxy>dn.maxy?un.maxy:dn.maxy;var cn=Si.height,_n=Yi.height;bi.height=1+(_n<cn?cn:_n);var yn=bi.height,xn=Zi.height;wi.height=1+(xn<yn?yn:xn)}bi=wi}else bi=bi}var mn=bi.child1,fn=bi.child2,vn=bi.aabb,gn=mn.aabb,zn=fn.aabb;vn.minx=gn.minx<zn.minx?gn.minx:zn.minx,vn.miny=gn.miny<zn.miny?gn.miny:zn.miny,vn.maxx=gn.maxx>zn.maxx?gn.maxx:zn.maxx,vn.maxy=gn.maxy>zn.maxy?gn.maxy:zn.maxy;var bn=mn.height,wn=fn.height;bi.height=1+(wn<bn?bn:wn),bi=bi.parent}}else{(mi.root=gi).parent=null,fi.height=-1;var Sn=fi.aabb;null!=Sn.outer&&(Sn.outer.zpp_inner=null,Sn.outer=null),Sn.wrap_min=Sn.wrap_max=null,Sn._invalidate=null,Sn._validate=null,Sn.next=Oo.zpp_pool,Oo.zpp_pool=Sn,fi.child1=fi.child2=fi.parent=null,fi.next=null,fi.snext=null,fi.mnext=null,fi.next=Ao.zpp_pool,Ao.zpp_pool=fi}}}var Cn=yi.aabb;if(!this.space.continuous&&xi.zip_aabb&&null!=xi.body)if(xi.zip_aabb=!1,0==xi.type){var Mn=xi.circle;if(Mn.zip_worldCOM&&null!=Mn.body){if(Mn.zip_worldCOM=!1,Mn.zip_localCOM){if(Mn.zip_localCOM=!1,1==Mn.type){var Pn=Mn.polygon;if(null==Pn.lverts.next.next)Pn.localCOMx=Pn.lverts.next.x,Pn.localCOMy=Pn.lverts.next.y;else if(null==Pn.lverts.next.next.next)Pn.localCOMx=Pn.lverts.next.x,Pn.localCOMy=Pn.lverts.next.y,Pn.localCOMx+=Pn.lverts.next.next.x,Pn.localCOMy+=Pn.lverts.next.next.y,Pn.localCOMx*=.5,Pn.localCOMy*=.5;else{Pn.localCOMx=0;var kn=Pn.localCOMy=0,Tn=Pn.lverts.next,Gn=Tn,On=Tn=Tn.next;for(Tn=Tn.next;null!=Tn;){var An=Tn;kn+=On.x*(An.y-Gn.y);var En=An.y*On.x-An.x*On.y;Pn.localCOMx+=(On.x+An.x)*En,Pn.localCOMy+=(On.y+An.y)*En,Gn=On,On=An,Tn=Tn.next}var In=Tn=Pn.lverts.next;kn+=On.x*(In.y-Gn.y);var Bn=In.y*On.x-In.x*On.y;Pn.localCOMx+=(On.x+In.x)*Bn,Pn.localCOMy+=(On.y+In.y)*Bn,Gn=On;var Ln=Tn=Tn.next;kn+=In.x*(Ln.y-Gn.y);var Dn=Ln.y*In.x-Ln.x*In.y;Pn.localCOMx+=(In.x+Ln.x)*Dn,Pn.localCOMy+=(In.y+Ln.y)*Dn;var Rn=kn=1/(3*kn);Pn.localCOMx*=Rn,Pn.localCOMy*=Rn}}null!=Mn.wrap_localCOM&&(Mn.wrap_localCOM.zpp_inner.x=Mn.localCOMx,Mn.wrap_localCOM.zpp_inner.y=Mn.localCOMy)}var Fn=Mn.body;Fn.zip_axis&&(Fn.zip_axis=!1,Fn.axisx=Math.sin(Fn.rot),Fn.axisy=Math.cos(Fn.rot)),Mn.worldCOMx=Mn.body.posx+(Mn.body.axisy*Mn.localCOMx-Mn.body.axisx*Mn.localCOMy),Mn.worldCOMy=Mn.body.posy+(Mn.localCOMx*Mn.body.axisx+Mn.localCOMy*Mn.body.axisy)}var jn=Mn.radius,Nn=Mn.radius;Mn.aabb.minx=Mn.worldCOMx-jn,Mn.aabb.miny=Mn.worldCOMy-Nn,Mn.aabb.maxx=Mn.worldCOMx+jn,Mn.aabb.maxy=Mn.worldCOMy+Nn}else{var Un=xi.polygon;if(Un.zip_gverts&&null!=Un.body){Un.zip_gverts=!1,Un.validate_lverts();var Hn=Un.body;Hn.zip_axis&&(Hn.zip_axis=!1,Hn.axisx=Math.sin(Hn.rot),Hn.axisy=Math.cos(Hn.rot));for(var Vn=Un.lverts.next,Wn=Un.gverts.next;null!=Wn;){var Xn=Wn,qn=Vn;Vn=Vn.next,Xn.x=Un.body.posx+(Un.body.axisy*qn.x-Un.body.axisx*qn.y),Xn.y=Un.body.posy+(qn.x*Un.body.axisx+qn.y*Un.body.axisy),Wn=Wn.next}}var Yn=Un.gverts.next;Un.aabb.minx=Yn.x,Un.aabb.miny=Yn.y,Un.aabb.maxx=Yn.x,Un.aabb.maxy=Yn.y;for(var Zn=Un.gverts.next.next;null!=Zn;){var Kn=Zn;Kn.x<Un.aabb.minx&&(Un.aabb.minx=Kn.x),Kn.x>Un.aabb.maxx&&(Un.aabb.maxx=Kn.x),Kn.y<Un.aabb.miny&&(Un.aabb.miny=Kn.y),Kn.y>Un.aabb.maxy&&(Un.aabb.maxy=Kn.y),Zn=Zn.next}}var Jn=xi.aabb;Cn.minx=Jn.minx-3,Cn.miny=Jn.miny-3,Cn.maxx=Jn.maxx+3,Cn.maxy=Jn.maxy+3;var Qn=(yi.dyn=1!=xi.body.type&&!xi.body.component.sleeping)?this.dtree:this.stree;if(null==Qn.root)Qn.root=yi,Qn.root.parent=null;else{for(var $n=yi.aabb,er=Qn.root;null!=er.child1;){var tr=er.child1,ir=er.child2,nr=er.aabb,rr=2*(nr.maxx-nr.minx+(nr.maxy-nr.miny)),or=Eo.tmpaabb,ar=er.aabb;or.minx=ar.minx<$n.minx?ar.minx:$n.minx,or.miny=ar.miny<$n.miny?ar.miny:$n.miny,or.maxx=ar.maxx>$n.maxx?ar.maxx:$n.maxx,or.maxy=ar.maxy>$n.maxy?ar.maxy:$n.maxy;var sr,pr=Eo.tmpaabb,lr=2*(pr.maxx-pr.minx+(pr.maxy-pr.miny)),hr=2*lr,ur=2*(lr-rr),dr=Eo.tmpaabb,cr=tr.aabb;if(dr.minx=$n.minx<cr.minx?$n.minx:cr.minx,dr.miny=$n.miny<cr.miny?$n.miny:cr.miny,dr.maxx=$n.maxx>cr.maxx?$n.maxx:cr.maxx,dr.maxy=$n.maxy>cr.maxy?$n.maxy:cr.maxy,null==tr.child1){var _r=Eo.tmpaabb;sr=2*(_r.maxx-_r.minx+(_r.maxy-_r.miny))+ur}else{var yr=tr.aabb,xr=2*(yr.maxx-yr.minx+(yr.maxy-yr.miny)),mr=Eo.tmpaabb;sr=2*(mr.maxx-mr.minx+(mr.maxy-mr.miny))-xr+ur}var fr,vr=Eo.tmpaabb,gr=ir.aabb;if(vr.minx=$n.minx<gr.minx?$n.minx:gr.minx,vr.miny=$n.miny<gr.miny?$n.miny:gr.miny,vr.maxx=$n.maxx>gr.maxx?$n.maxx:gr.maxx,vr.maxy=$n.maxy>gr.maxy?$n.maxy:gr.maxy,null==ir.child1){var zr=Eo.tmpaabb;fr=2*(zr.maxx-zr.minx+(zr.maxy-zr.miny))+ur}else{var br=ir.aabb,wr=2*(br.maxx-br.minx+(br.maxy-br.miny)),Sr=Eo.tmpaabb;fr=2*(Sr.maxx-Sr.minx+(Sr.maxy-Sr.miny))-wr+ur}if(hr<sr&&hr<fr)break;er=sr<fr?tr:ir}var Cr,Mr=er,Pr=Mr.parent;null==Ao.zpp_pool?Cr=new Ao:(Cr=Ao.zpp_pool,Ao.zpp_pool=Cr.next,Cr.next=null),null==Oo.zpp_pool?Cr.aabb=new Oo:(Cr.aabb=Oo.zpp_pool,Oo.zpp_pool=Cr.aabb.next,Cr.aabb.next=null),Cr.moved=!1,Cr.synced=!1,Cr.first_sync=!1,Cr.parent=Pr;var kr=Cr.aabb,Tr=Mr.aabb;for(kr.minx=$n.minx<Tr.minx?$n.minx:Tr.minx,kr.miny=$n.miny<Tr.miny?$n.miny:Tr.miny,kr.maxx=$n.maxx>Tr.maxx?$n.maxx:Tr.maxx,kr.maxy=$n.maxy>Tr.maxy?$n.maxy:Tr.maxy,Cr.height=Mr.height+1,null!=Pr?(Pr.child1==Mr?Pr.child1=Cr:Pr.child2=Cr,Cr.child1=Mr,Cr.child2=yi,Mr.parent=Cr,yi.parent=Cr):(Cr.child1=Mr,Cr.child2=yi,Mr.parent=Cr,yi.parent=Cr,Qn.root=Cr),er=yi.parent;null!=er;){if(null==er.child1||er.height<2)er=er;else{var Gr=er.child1,Or=er.child2,Ar=Or.height-Gr.height;if(1<Ar){var Er=Or.child1,Ir=Or.child2;if(Or.child1=er,Or.parent=er.parent,null!=(er.parent=Or).parent?Or.parent.child1==er?Or.parent.child1=Or:Or.parent.child2=Or:Qn.root=Or,Er.height>Ir.height){Or.child2=Er;var Br=((er.child2=Ir).parent=er).aabb,Lr=Gr.aabb,Dr=Ir.aabb;Br.minx=Lr.minx<Dr.minx?Lr.minx:Dr.minx,Br.miny=Lr.miny<Dr.miny?Lr.miny:Dr.miny,Br.maxx=Lr.maxx>Dr.maxx?Lr.maxx:Dr.maxx,Br.maxy=Lr.maxy>Dr.maxy?Lr.maxy:Dr.maxy;var Rr=Or.aabb,Fr=er.aabb,jr=Er.aabb;Rr.minx=Fr.minx<jr.minx?Fr.minx:jr.minx,Rr.miny=Fr.miny<jr.miny?Fr.miny:jr.miny,Rr.maxx=Fr.maxx>jr.maxx?Fr.maxx:jr.maxx,Rr.maxy=Fr.maxy>jr.maxy?Fr.maxy:jr.maxy;var Nr=Gr.height,Ur=Ir.height;er.height=1+(Ur<Nr?Nr:Ur);var Hr=er.height,Vr=Er.height;Or.height=1+(Vr<Hr?Hr:Vr)}else{Or.child2=Ir;var Wr=((er.child2=Er).parent=er).aabb,Xr=Gr.aabb,qr=Er.aabb;Wr.minx=Xr.minx<qr.minx?Xr.minx:qr.minx,Wr.miny=Xr.miny<qr.miny?Xr.miny:qr.miny,Wr.maxx=Xr.maxx>qr.maxx?Xr.maxx:qr.maxx,Wr.maxy=Xr.maxy>qr.maxy?Xr.maxy:qr.maxy;var Yr=Or.aabb,Zr=er.aabb,Kr=Ir.aabb;Yr.minx=Zr.minx<Kr.minx?Zr.minx:Kr.minx,Yr.miny=Zr.miny<Kr.miny?Zr.miny:Kr.miny,Yr.maxx=Zr.maxx>Kr.maxx?Zr.maxx:Kr.maxx,Yr.maxy=Zr.maxy>Kr.maxy?Zr.maxy:Kr.maxy;var Jr=Gr.height,Qr=Er.height;er.height=1+(Qr<Jr?Jr:Qr);var $r=er.height,eo=Ir.height;Or.height=1+(eo<$r?$r:eo)}er=Or}else if(Ar<-1){var to=Gr.child1,io=Gr.child2;if(Gr.child1=er,Gr.parent=er.parent,null!=(er.parent=Gr).parent?Gr.parent.child1==er?Gr.parent.child1=Gr:Gr.parent.child2=Gr:Qn.root=Gr,to.height>io.height){Gr.child2=to;var no=((er.child1=io).parent=er).aabb,ro=Or.aabb,oo=io.aabb;no.minx=ro.minx<oo.minx?ro.minx:oo.minx,no.miny=ro.miny<oo.miny?ro.miny:oo.miny,no.maxx=ro.maxx>oo.maxx?ro.maxx:oo.maxx,no.maxy=ro.maxy>oo.maxy?ro.maxy:oo.maxy;var ao=Gr.aabb,so=er.aabb,po=to.aabb;ao.minx=so.minx<po.minx?so.minx:po.minx,ao.miny=so.miny<po.miny?so.miny:po.miny,ao.maxx=so.maxx>po.maxx?so.maxx:po.maxx,ao.maxy=so.maxy>po.maxy?so.maxy:po.maxy;var lo=Or.height,ho=io.height;er.height=1+(ho<lo?lo:ho);var uo=er.height,co=to.height;Gr.height=1+(co<uo?uo:co)}else{Gr.child2=io;var _o=((er.child1=to).parent=er).aabb,yo=Or.aabb,xo=to.aabb;_o.minx=yo.minx<xo.minx?yo.minx:xo.minx,_o.miny=yo.miny<xo.miny?yo.miny:xo.miny,_o.maxx=yo.maxx>xo.maxx?yo.maxx:xo.maxx,_o.maxy=yo.maxy>xo.maxy?yo.maxy:xo.maxy;var mo=Gr.aabb,fo=er.aabb,vo=io.aabb;mo.minx=fo.minx<vo.minx?fo.minx:vo.minx,mo.miny=fo.miny<vo.miny?fo.miny:vo.miny,mo.maxx=fo.maxx>vo.maxx?fo.maxx:vo.maxx,mo.maxy=fo.maxy>vo.maxy?fo.maxy:vo.maxy;var go=Or.height,zo=to.height;er.height=1+(zo<go?go:zo);var bo=er.height,wo=io.height;Gr.height=1+(wo<bo?bo:wo)}er=Gr}else er=er}var So=er.child1,Co=er.child2,Mo=So.height,Po=Co.height;er.height=1+(Po<Mo?Mo:Po);var ko=er.aabb,To=So.aabb,Go=Co.aabb;ko.minx=To.minx<Go.minx?To.minx:Go.minx,ko.miny=To.miny<Go.miny?To.miny:Go.miny,ko.maxx=To.maxx>Go.maxx?To.maxx:Go.maxx,ko.maxy=To.maxy>Go.maxy?To.maxy:Go.maxy,er=er.parent}}yi.synced=!1,yi.moved||(yi.moved=!0,yi.mnext=this.moves,this.moves=yi)}},ii.prototype.broadphase=function(e,t){for(var i=this.syncs;null!=i;){var n=i.shape;if(i.first_sync)i.first_sync=!1;else{var r=i.dyn?this.dtree:this.stree;if(i==r.root)r.root=null;else{var o=i.parent,a=o.parent,s=o.child1==i?o.child2:o.child1;if(null!=a){a.child1==o?a.child1=s:a.child2=s,s.parent=a,o.height=-1;var p=o.aabb;null!=p.outer&&(p.outer.zpp_inner=null,p.outer=null),p.wrap_min=p.wrap_max=null,p._invalidate=null,p._validate=null,p.next=Oo.zpp_pool,Oo.zpp_pool=p,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=Ao.zpp_pool,Ao.zpp_pool=o;for(var l=a;null!=l;){if(null==l.child1||l.height<2)l=l;else{var h=l.child1,u=l.child2,d=u.height-h.height;if(1<d){var c=u.child1,_=u.child2;if(u.child1=l,u.parent=l.parent,null!=(l.parent=u).parent?u.parent.child1==l?u.parent.child1=u:u.parent.child2=u:r.root=u,c.height>_.height){u.child2=c;var y=((l.child2=_).parent=l).aabb,x=h.aabb,m=_.aabb;y.minx=x.minx<m.minx?x.minx:m.minx,y.miny=x.miny<m.miny?x.miny:m.miny,y.maxx=x.maxx>m.maxx?x.maxx:m.maxx,y.maxy=x.maxy>m.maxy?x.maxy:m.maxy;var f=u.aabb,v=l.aabb,g=c.aabb;f.minx=v.minx<g.minx?v.minx:g.minx,f.miny=v.miny<g.miny?v.miny:g.miny,f.maxx=v.maxx>g.maxx?v.maxx:g.maxx,f.maxy=v.maxy>g.maxy?v.maxy:g.maxy;var z=h.height,b=_.height;l.height=1+(b<z?z:b);var w=l.height,S=c.height;u.height=1+(S<w?w:S)}else{u.child2=_;var C=((l.child2=c).parent=l).aabb,M=h.aabb,P=c.aabb;C.minx=M.minx<P.minx?M.minx:P.minx,C.miny=M.miny<P.miny?M.miny:P.miny,C.maxx=M.maxx>P.maxx?M.maxx:P.maxx,C.maxy=M.maxy>P.maxy?M.maxy:P.maxy;var k=u.aabb,T=l.aabb,G=_.aabb;k.minx=T.minx<G.minx?T.minx:G.minx,k.miny=T.miny<G.miny?T.miny:G.miny,k.maxx=T.maxx>G.maxx?T.maxx:G.maxx,k.maxy=T.maxy>G.maxy?T.maxy:G.maxy;var O=h.height,A=c.height;l.height=1+(A<O?O:A);var E=l.height,I=_.height;u.height=1+(I<E?E:I)}l=u}else if(d<-1){var B=h.child1,L=h.child2;if(h.child1=l,h.parent=l.parent,null!=(l.parent=h).parent?h.parent.child1==l?h.parent.child1=h:h.parent.child2=h:r.root=h,B.height>L.height){h.child2=B;var D=((l.child1=L).parent=l).aabb,R=u.aabb,F=L.aabb;D.minx=R.minx<F.minx?R.minx:F.minx,D.miny=R.miny<F.miny?R.miny:F.miny,D.maxx=R.maxx>F.maxx?R.maxx:F.maxx,D.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=h.aabb,N=l.aabb,U=B.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var H=u.height,V=L.height;l.height=1+(V<H?H:V);var W=l.height,X=B.height;h.height=1+(X<W?W:X)}else{h.child2=L;var q=((l.child1=B).parent=l).aabb,Y=u.aabb,Z=B.aabb;q.minx=Y.minx<Z.minx?Y.minx:Z.minx,q.miny=Y.miny<Z.miny?Y.miny:Z.miny,q.maxx=Y.maxx>Z.maxx?Y.maxx:Z.maxx,q.maxy=Y.maxy>Z.maxy?Y.maxy:Z.maxy;var K=h.aabb,J=l.aabb,Q=L.aabb;K.minx=J.minx<Q.minx?J.minx:Q.minx,K.miny=J.miny<Q.miny?J.miny:Q.miny,K.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,K.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=u.height,ee=B.height;l.height=1+(ee<$?$:ee);var te=l.height,ie=L.height;h.height=1+(ie<te?te:ie)}l=h}else l=l}var ne=l.child1,re=l.child2,oe=l.aabb,ae=ne.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var pe=ne.height,le=re.height;l.height=1+(le<pe?pe:le),l=l.parent}}else{(r.root=s).parent=null,o.height=-1;var he=o.aabb;null!=he.outer&&(he.outer.zpp_inner=null,he.outer=null),he.wrap_min=he.wrap_max=null,he._invalidate=null,he._validate=null,he.next=Oo.zpp_pool,Oo.zpp_pool=he,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=Ao.zpp_pool,Ao.zpp_pool=o}}}var ue=i.aabb;if(!e.continuous&&n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){var de=n.circle;if(de.zip_worldCOM&&null!=de.body){if(de.zip_worldCOM=!1,de.zip_localCOM){if(de.zip_localCOM=!1,1==de.type){var ce=de.polygon;if(null==ce.lverts.next.next)ce.localCOMx=ce.lverts.next.x,ce.localCOMy=ce.lverts.next.y;else if(null==ce.lverts.next.next.next)ce.localCOMx=ce.lverts.next.x,ce.localCOMy=ce.lverts.next.y,ce.localCOMx+=ce.lverts.next.next.x,ce.localCOMy+=ce.lverts.next.next.y,ce.localCOMx*=.5,ce.localCOMy*=.5;else{ce.localCOMx=0;var _e=ce.localCOMy=0,ye=ce.lverts.next,xe=ye,me=ye=ye.next;for(ye=ye.next;null!=ye;){var fe=ye;_e+=me.x*(fe.y-xe.y);var ve=fe.y*me.x-fe.x*me.y;ce.localCOMx+=(me.x+fe.x)*ve,ce.localCOMy+=(me.y+fe.y)*ve,xe=me,me=fe,ye=ye.next}var ge=ye=ce.lverts.next;_e+=me.x*(ge.y-xe.y);var ze=ge.y*me.x-ge.x*me.y;ce.localCOMx+=(me.x+ge.x)*ze,ce.localCOMy+=(me.y+ge.y)*ze,xe=me;var be=ye=ye.next;_e+=ge.x*(be.y-xe.y);var we=be.y*ge.x-be.x*ge.y;ce.localCOMx+=(ge.x+be.x)*we,ce.localCOMy+=(ge.y+be.y)*we;var Se=_e=1/(3*_e);ce.localCOMx*=Se,ce.localCOMy*=Se}}null!=de.wrap_localCOM&&(de.wrap_localCOM.zpp_inner.x=de.localCOMx,de.wrap_localCOM.zpp_inner.y=de.localCOMy)}var Ce=de.body;Ce.zip_axis&&(Ce.zip_axis=!1,Ce.axisx=Math.sin(Ce.rot),Ce.axisy=Math.cos(Ce.rot)),de.worldCOMx=de.body.posx+(de.body.axisy*de.localCOMx-de.body.axisx*de.localCOMy),de.worldCOMy=de.body.posy+(de.localCOMx*de.body.axisx+de.localCOMy*de.body.axisy)}var Me=de.radius,Pe=de.radius;de.aabb.minx=de.worldCOMx-Me,de.aabb.miny=de.worldCOMy-Pe,de.aabb.maxx=de.worldCOMx+Me,de.aabb.maxy=de.worldCOMy+Pe}else{var ke=n.polygon;if(ke.zip_gverts&&null!=ke.body){ke.zip_gverts=!1,ke.validate_lverts();var Te=ke.body;Te.zip_axis&&(Te.zip_axis=!1,Te.axisx=Math.sin(Te.rot),Te.axisy=Math.cos(Te.rot));for(var Ge=ke.lverts.next,Oe=ke.gverts.next;null!=Oe;){var Ae=Oe,Ee=Ge;Ge=Ge.next,Ae.x=ke.body.posx+(ke.body.axisy*Ee.x-ke.body.axisx*Ee.y),Ae.y=ke.body.posy+(Ee.x*ke.body.axisx+Ee.y*ke.body.axisy),Oe=Oe.next}}var Ie=ke.gverts.next;ke.aabb.minx=Ie.x,ke.aabb.miny=Ie.y,ke.aabb.maxx=Ie.x,ke.aabb.maxy=Ie.y;for(var Be=ke.gverts.next.next;null!=Be;){var Le=Be;Le.x<ke.aabb.minx&&(ke.aabb.minx=Le.x),Le.x>ke.aabb.maxx&&(ke.aabb.maxx=Le.x),Le.y<ke.aabb.miny&&(ke.aabb.miny=Le.y),Le.y>ke.aabb.maxy&&(ke.aabb.maxy=Le.y),Be=Be.next}}var De=n.aabb;ue.minx=De.minx-3,ue.miny=De.miny-3,ue.maxx=De.maxx+3,ue.maxy=De.maxy+3;var Re=(i.dyn=1!=n.body.type&&!n.body.component.sleeping)?this.dtree:this.stree;if(null==Re.root)Re.root=i,Re.root.parent=null;else{for(var Fe=i.aabb,je=Re.root;null!=je.child1;){var Ne=je.child1,Ue=je.child2,He=je.aabb,Ve=2*(He.maxx-He.minx+(He.maxy-He.miny)),We=Eo.tmpaabb,Xe=je.aabb;We.minx=Xe.minx<Fe.minx?Xe.minx:Fe.minx,We.miny=Xe.miny<Fe.miny?Xe.miny:Fe.miny,We.maxx=Xe.maxx>Fe.maxx?Xe.maxx:Fe.maxx,We.maxy=Xe.maxy>Fe.maxy?Xe.maxy:Fe.maxy;var qe,Ye=Eo.tmpaabb,Ze=2*(Ye.maxx-Ye.minx+(Ye.maxy-Ye.miny)),Ke=2*Ze,Je=2*(Ze-Ve),Qe=Eo.tmpaabb,$e=Ne.aabb;if(Qe.minx=Fe.minx<$e.minx?Fe.minx:$e.minx,Qe.miny=Fe.miny<$e.miny?Fe.miny:$e.miny,Qe.maxx=Fe.maxx>$e.maxx?Fe.maxx:$e.maxx,Qe.maxy=Fe.maxy>$e.maxy?Fe.maxy:$e.maxy,null==Ne.child1){var et=Eo.tmpaabb;qe=2*(et.maxx-et.minx+(et.maxy-et.miny))+Je}else{var tt=Ne.aabb,it=2*(tt.maxx-tt.minx+(tt.maxy-tt.miny)),nt=Eo.tmpaabb;qe=2*(nt.maxx-nt.minx+(nt.maxy-nt.miny))-it+Je}var rt,ot=Eo.tmpaabb,at=Ue.aabb;if(ot.minx=Fe.minx<at.minx?Fe.minx:at.minx,ot.miny=Fe.miny<at.miny?Fe.miny:at.miny,ot.maxx=Fe.maxx>at.maxx?Fe.maxx:at.maxx,ot.maxy=Fe.maxy>at.maxy?Fe.maxy:at.maxy,null==Ue.child1){var st=Eo.tmpaabb;rt=2*(st.maxx-st.minx+(st.maxy-st.miny))+Je}else{var pt=Ue.aabb,lt=2*(pt.maxx-pt.minx+(pt.maxy-pt.miny)),ht=Eo.tmpaabb;rt=2*(ht.maxx-ht.minx+(ht.maxy-ht.miny))-lt+Je}if(Ke<qe&&Ke<rt)break;je=qe<rt?Ne:Ue}var ut,dt=je,ct=dt.parent;null==Ao.zpp_pool?ut=new Ao:(ut=Ao.zpp_pool,Ao.zpp_pool=ut.next,ut.next=null),null==Oo.zpp_pool?ut.aabb=new Oo:(ut.aabb=Oo.zpp_pool,Oo.zpp_pool=ut.aabb.next,ut.aabb.next=null),ut.moved=!1,ut.synced=!1,ut.first_sync=!1,ut.parent=ct;var _t=ut.aabb,yt=dt.aabb;for(_t.minx=Fe.minx<yt.minx?Fe.minx:yt.minx,_t.miny=Fe.miny<yt.miny?Fe.miny:yt.miny,_t.maxx=Fe.maxx>yt.maxx?Fe.maxx:yt.maxx,_t.maxy=Fe.maxy>yt.maxy?Fe.maxy:yt.maxy,ut.height=dt.height+1,null!=ct?(ct.child1==dt?ct.child1=ut:ct.child2=ut,ut.child1=dt,ut.child2=i,dt.parent=ut,i.parent=ut):(ut.child1=dt,ut.child2=i,dt.parent=ut,i.parent=ut,Re.root=ut),je=i.parent;null!=je;){if(null==je.child1||je.height<2)je=je;else{var xt=je.child1,mt=je.child2,ft=mt.height-xt.height;if(1<ft){var vt=mt.child1,gt=mt.child2;if(mt.child1=je,mt.parent=je.parent,null!=(je.parent=mt).parent?mt.parent.child1==je?mt.parent.child1=mt:mt.parent.child2=mt:Re.root=mt,vt.height>gt.height){mt.child2=vt;var zt=((je.child2=gt).parent=je).aabb,bt=xt.aabb,wt=gt.aabb;zt.minx=bt.minx<wt.minx?bt.minx:wt.minx,zt.miny=bt.miny<wt.miny?bt.miny:wt.miny,zt.maxx=bt.maxx>wt.maxx?bt.maxx:wt.maxx,zt.maxy=bt.maxy>wt.maxy?bt.maxy:wt.maxy;var St=mt.aabb,Ct=je.aabb,Mt=vt.aabb;St.minx=Ct.minx<Mt.minx?Ct.minx:Mt.minx,St.miny=Ct.miny<Mt.miny?Ct.miny:Mt.miny,St.maxx=Ct.maxx>Mt.maxx?Ct.maxx:Mt.maxx,St.maxy=Ct.maxy>Mt.maxy?Ct.maxy:Mt.maxy;var Pt=xt.height,kt=gt.height;je.height=1+(kt<Pt?Pt:kt);var Tt=je.height,Gt=vt.height;mt.height=1+(Gt<Tt?Tt:Gt)}else{mt.child2=gt;var Ot=((je.child2=vt).parent=je).aabb,At=xt.aabb,Et=vt.aabb;Ot.minx=At.minx<Et.minx?At.minx:Et.minx,Ot.miny=At.miny<Et.miny?At.miny:Et.miny,Ot.maxx=At.maxx>Et.maxx?At.maxx:Et.maxx,Ot.maxy=At.maxy>Et.maxy?At.maxy:Et.maxy;var It=mt.aabb,Bt=je.aabb,Lt=gt.aabb;It.minx=Bt.minx<Lt.minx?Bt.minx:Lt.minx,It.miny=Bt.miny<Lt.miny?Bt.miny:Lt.miny,It.maxx=Bt.maxx>Lt.maxx?Bt.maxx:Lt.maxx,It.maxy=Bt.maxy>Lt.maxy?Bt.maxy:Lt.maxy;var Dt=xt.height,Rt=vt.height;je.height=1+(Rt<Dt?Dt:Rt);var Ft=je.height,jt=gt.height;mt.height=1+(jt<Ft?Ft:jt)}je=mt}else if(ft<-1){var Nt=xt.child1,Ut=xt.child2;if(xt.child1=je,xt.parent=je.parent,null!=(je.parent=xt).parent?xt.parent.child1==je?xt.parent.child1=xt:xt.parent.child2=xt:Re.root=xt,Nt.height>Ut.height){xt.child2=Nt;var Ht=((je.child1=Ut).parent=je).aabb,Vt=mt.aabb,Wt=Ut.aabb;Ht.minx=Vt.minx<Wt.minx?Vt.minx:Wt.minx,Ht.miny=Vt.miny<Wt.miny?Vt.miny:Wt.miny,Ht.maxx=Vt.maxx>Wt.maxx?Vt.maxx:Wt.maxx,Ht.maxy=Vt.maxy>Wt.maxy?Vt.maxy:Wt.maxy;var Xt=xt.aabb,qt=je.aabb,Yt=Nt.aabb;Xt.minx=qt.minx<Yt.minx?qt.minx:Yt.minx,Xt.miny=qt.miny<Yt.miny?qt.miny:Yt.miny,Xt.maxx=qt.maxx>Yt.maxx?qt.maxx:Yt.maxx,Xt.maxy=qt.maxy>Yt.maxy?qt.maxy:Yt.maxy;var Zt=mt.height,Kt=Ut.height;je.height=1+(Kt<Zt?Zt:Kt);var Jt=je.height,Qt=Nt.height;xt.height=1+(Qt<Jt?Jt:Qt)}else{xt.child2=Ut;var $t=((je.child1=Nt).parent=je).aabb,ei=mt.aabb,ti=Nt.aabb;$t.minx=ei.minx<ti.minx?ei.minx:ti.minx,$t.miny=ei.miny<ti.miny?ei.miny:ti.miny,$t.maxx=ei.maxx>ti.maxx?ei.maxx:ti.maxx,$t.maxy=ei.maxy>ti.maxy?ei.maxy:ti.maxy;var ii=xt.aabb,ni=je.aabb,ri=Ut.aabb;ii.minx=ni.minx<ri.minx?ni.minx:ri.minx,ii.miny=ni.miny<ri.miny?ni.miny:ri.miny,ii.maxx=ni.maxx>ri.maxx?ni.maxx:ri.maxx,ii.maxy=ni.maxy>ri.maxy?ni.maxy:ri.maxy;var oi=mt.height,ai=Nt.height;je.height=1+(ai<oi?oi:ai);var si=je.height,pi=Ut.height;xt.height=1+(pi<si?si:pi)}je=xt}else je=je}var li=je.child1,hi=je.child2,ui=li.height,di=hi.height;je.height=1+(di<ui?ui:di);var ci=je.aabb,_i=li.aabb,yi=hi.aabb;ci.minx=_i.minx<yi.minx?_i.minx:yi.minx,ci.miny=_i.miny<yi.miny?_i.miny:yi.miny,ci.maxx=_i.maxx>yi.maxx?_i.maxx:yi.maxx,ci.maxy=_i.maxy>yi.maxy?_i.maxy:yi.maxy,je=je.parent}}i.synced=!1,i=i.snext}for(;null!=this.syncs;){var xi=this.syncs;if(this.syncs=xi.snext,xi.snext=null,!xi.moved){xi.moved=!1;var mi=xi.shape;if(!mi.body.component.sleeping){var fi=xi.aabb,vi=null;for(null!=this.dtree.root&&(this.dtree.root.next=vi,vi=this.dtree.root);null!=vi;){var gi=vi;if(vi=gi.next,gi.next=null,gi!=xi)if(null==gi.child1){var zi=gi.shape;if(zi.body!=mi.body&&(1!=zi.body.type||1!=mi.body.type)){var bi=gi.aabb;if(bi.miny<=fi.maxy&&fi.miny<=bi.maxy&&bi.minx<=fi.maxx&&fi.minx<=bi.maxx){var wi,Si;Si=mi.id<zi.id?(wi=mi.id,zi.id):(wi=zi.id,mi.id);for(var Ci=null,Mi=(mi.pairs.length<zi.pairs.length?mi:zi).pairs.head;null!=Mi;){var Pi=Mi.elt;if(Pi.id==wi&&Pi.di==Si){Ci=Pi;break}Mi=Mi.next}if(null!=Ci){Ci.sleeping&&(Ci.sleeping=!1,Ci.next=this.pairs,(this.pairs=Ci).first=!0);continue}null==nr.zpp_pool?Ci=new nr:(Ci=nr.zpp_pool,nr.zpp_pool=Ci.next,Ci.next=null),Ci.n1=xi,Ci.n2=gi,Ci.id=wi,Ci.di=Si,Ci.next=this.pairs,(this.pairs=Ci).first=!0;var ki,Ti=mi.pairs;null==rr.zpp_pool?ki=new rr:(ki=rr.zpp_pool,rr.zpp_pool=ki.next,ki.next=null),ki.elt=Ci;var Gi=ki;Gi.next=Ti.head,Ti.head=Gi,Ti.modified=!0,Ti.length++;var Oi,Ai=zi.pairs;null==rr.zpp_pool?Oi=new rr:(Oi=rr.zpp_pool,rr.zpp_pool=Oi.next,Oi.next=null),Oi.elt=Ci;var Ei=Oi;Ei.next=Ai.head,Ai.head=Ei,Ai.modified=!0,Ai.length++}}}else{var Ii=gi.aabb;Ii.miny<=fi.maxy&&fi.miny<=Ii.maxy&&Ii.minx<=fi.maxx&&fi.minx<=Ii.maxx&&(null!=gi.child1&&(gi.child1.next=vi,vi=gi.child1),null!=gi.child2&&(gi.child2.next=vi,vi=gi.child2))}}for(null!=this.stree.root&&(this.stree.root.next=vi,vi=this.stree.root);null!=vi;){var Bi=vi;if(vi=Bi.next,Bi.next=null,Bi!=xi)if(null==Bi.child1){var Li=Bi.shape;if(Li.body!=mi.body&&(1!=Li.body.type||1!=mi.body.type)){var Di=Bi.aabb;if(Di.miny<=fi.maxy&&fi.miny<=Di.maxy&&Di.minx<=fi.maxx&&fi.minx<=Di.maxx){var Ri,Fi;Fi=mi.id<Li.id?(Ri=mi.id,Li.id):(Ri=Li.id,mi.id);for(var ji=null,Ni=(mi.pairs.length<Li.pairs.length?mi:Li).pairs.head;null!=Ni;){var Ui=Ni.elt;if(Ui.id==Ri&&Ui.di==Fi){ji=Ui;break}Ni=Ni.next}if(null!=ji){ji.sleeping&&(ji.sleeping=!1,ji.next=this.pairs,(this.pairs=ji).first=!0);continue}null==nr.zpp_pool?ji=new nr:(ji=nr.zpp_pool,nr.zpp_pool=ji.next,ji.next=null),ji.n1=xi,ji.n2=Bi,ji.id=Ri,ji.di=Fi,ji.next=this.pairs,(this.pairs=ji).first=!0;var Hi,Vi=mi.pairs;null==rr.zpp_pool?Hi=new rr:(Hi=rr.zpp_pool,rr.zpp_pool=Hi.next,Hi.next=null),Hi.elt=ji;var Wi=Hi;Wi.next=Vi.head,Vi.head=Wi,Vi.modified=!0,Vi.length++;var Xi,qi=Li.pairs;null==rr.zpp_pool?Xi=new rr:(Xi=rr.zpp_pool,rr.zpp_pool=Xi.next,Xi.next=null),Xi.elt=ji;var Yi=Xi;Yi.next=qi.head,qi.head=Yi,qi.modified=!0,qi.length++}}}else{var Zi=Bi.aabb;Zi.miny<=fi.maxy&&fi.miny<=Zi.maxy&&Zi.minx<=fi.maxx&&fi.minx<=Zi.maxx&&(null!=Bi.child1&&(Bi.child1.next=vi,vi=Bi.child1),null!=Bi.child2&&(Bi.child2.next=vi,vi=Bi.child2))}}}}}for(;null!=this.moves;){var Ki=this.moves;this.moves=Ki.mnext,Ki.mnext=null,Ki.moved=!1;var Ji=Ki.shape;if(!Ji.body.component.sleeping){var Qi=Ki.aabb,$i=null;for(null!=this.dtree.root&&(this.dtree.root.next=$i,$i=this.dtree.root);null!=$i;){var en=$i;if($i=en.next,en.next=null,en!=Ki)if(null==en.child1){var tn=en.shape;if(tn.body!=Ji.body&&(1!=tn.body.type||1!=Ji.body.type)){var nn=en.aabb;if(nn.miny<=Qi.maxy&&Qi.miny<=nn.maxy&&nn.minx<=Qi.maxx&&Qi.minx<=nn.maxx){var rn,on;on=Ji.id<tn.id?(rn=Ji.id,tn.id):(rn=tn.id,Ji.id);for(var an=null,sn=(Ji.pairs.length<tn.pairs.length?Ji:tn).pairs.head;null!=sn;){var pn=sn.elt;if(pn.id==rn&&pn.di==on){an=pn;break}sn=sn.next}if(null!=an){an.sleeping&&(an.sleeping=!1,an.next=this.pairs,(this.pairs=an).first=!0);continue}null==nr.zpp_pool?an=new nr:(an=nr.zpp_pool,nr.zpp_pool=an.next,an.next=null),an.n1=Ki,an.n2=en,an.id=rn,an.di=on,an.next=this.pairs,(this.pairs=an).first=!0;var ln,hn=Ji.pairs;null==rr.zpp_pool?ln=new rr:(ln=rr.zpp_pool,rr.zpp_pool=ln.next,ln.next=null),ln.elt=an;var un=ln;un.next=hn.head,hn.head=un,hn.modified=!0,hn.length++;var dn,cn=tn.pairs;null==rr.zpp_pool?dn=new rr:(dn=rr.zpp_pool,rr.zpp_pool=dn.next,dn.next=null),dn.elt=an;var _n=dn;_n.next=cn.head,cn.head=_n,cn.modified=!0,cn.length++}}}else{var yn=en.aabb;yn.miny<=Qi.maxy&&Qi.miny<=yn.maxy&&yn.minx<=Qi.maxx&&Qi.minx<=yn.maxx&&(null!=en.child1&&(en.child1.next=$i,$i=en.child1),null!=en.child2&&(en.child2.next=$i,$i=en.child2))}}for(null!=this.stree.root&&(this.stree.root.next=$i,$i=this.stree.root);null!=$i;){var xn=$i;if($i=xn.next,xn.next=null,xn!=Ki)if(null==xn.child1){var mn=xn.shape;if(mn.body!=Ji.body&&(1!=mn.body.type||1!=Ji.body.type)){var fn=xn.aabb;if(fn.miny<=Qi.maxy&&Qi.miny<=fn.maxy&&fn.minx<=Qi.maxx&&Qi.minx<=fn.maxx){var vn,gn;gn=Ji.id<mn.id?(vn=Ji.id,mn.id):(vn=mn.id,Ji.id);for(var zn=null,bn=(Ji.pairs.length<mn.pairs.length?Ji:mn).pairs.head;null!=bn;){var wn=bn.elt;if(wn.id==vn&&wn.di==gn){zn=wn;break}bn=bn.next}if(null!=zn){zn.sleeping&&(zn.sleeping=!1,zn.next=this.pairs,(this.pairs=zn).first=!0);continue}null==nr.zpp_pool?zn=new nr:(zn=nr.zpp_pool,nr.zpp_pool=zn.next,zn.next=null),zn.n1=Ki,zn.n2=xn,zn.id=vn,zn.di=gn,zn.next=this.pairs,(this.pairs=zn).first=!0;var Sn,Cn=Ji.pairs;null==rr.zpp_pool?Sn=new rr:(Sn=rr.zpp_pool,rr.zpp_pool=Sn.next,Sn.next=null),Sn.elt=zn;var Mn=Sn;Mn.next=Cn.head,Cn.head=Mn,Cn.modified=!0,Cn.length++;var Pn,kn=mn.pairs;null==rr.zpp_pool?Pn=new rr:(Pn=rr.zpp_pool,rr.zpp_pool=Pn.next,Pn.next=null),Pn.elt=zn;var Tn=Pn;Tn.next=kn.head,kn.head=Tn,kn.modified=!0,kn.length++}}}else{var Gn=xn.aabb;Gn.miny<=Qi.maxy&&Qi.miny<=Gn.maxy&&Gn.minx<=Qi.maxx&&Qi.minx<=Gn.maxx&&(null!=xn.child1&&(xn.child1.next=$i,$i=xn.child1),null!=xn.child2&&(xn.child2.next=$i,$i=xn.child2))}}}}for(var On=null,An=this.pairs;null!=An;){var En;if(An.first)En=!1;else{var In=An.n1.aabb,Bn=An.n2.aabb;En=!(Bn.miny<=In.maxy&&In.miny<=Bn.maxy&&Bn.minx<=In.maxx&&In.minx<=Bn.maxx)}if(En){null==On?this.pairs=An.next:On.next=An.next;for(var Ln=An.n1.shape.pairs,Dn=null,Rn=Ln.head;null!=Rn;){if(Rn.elt==An){var Fn,jn;null==Dn?(jn=(Fn=Ln.head).next,Ln.head=jn,null==Ln.head&&(Ln.pushmod=!0)):(jn=(Fn=Dn.next).next,null==(Dn.next=jn)&&(Ln.pushmod=!0));var Nn=Fn;Nn.elt=null,Nn.next=rr.zpp_pool,rr.zpp_pool=Nn,Ln.modified=!0,Ln.length--,Ln.pushmod=!0;break}Rn=(Dn=Rn).next}for(var Un=An.n2.shape.pairs,Hn=null,Vn=Un.head;null!=Vn;){if(Vn.elt==An){var Wn,Xn;null==Hn?(Xn=(Wn=Un.head).next,Un.head=Xn,null==Un.head&&(Un.pushmod=!0)):(Xn=(Wn=Hn.next).next,null==(Hn.next=Xn)&&(Un.pushmod=!0));var qn=Wn;qn.elt=null,qn.next=rr.zpp_pool,rr.zpp_pool=qn,Un.modified=!0,Un.length--,Un.pushmod=!0;break}Vn=(Hn=Vn).next}var Yn=An.next;null!=An.arb&&(An.arb.pair=null),An.arb=null;var Zn=An;Zn.n1=Zn.n2=null,Zn.sleeping=!1,Zn.next=nr.zpp_pool,nr.zpp_pool=Zn,An=Yn}else{var Kn=An.n1.shape,Jn=Kn.body,Qn=An.n2.shape,$n=Qn.body;if(An.first||!Jn.component.sleeping&&1!=Jn.type||!$n.component.sleeping&&1!=$n.type){An.first=!1;var er=Kn.aabb,tr=Qn.aabb;if(tr.miny<=er.maxy&&er.miny<=tr.maxy&&tr.minx<=er.maxx&&er.minx<=tr.maxx){var ir=An.arb;An.arb=t?e.narrowPhase(Kn,Qn,2!=Jn.type||2!=$n.type,An.arb,!1):e.continuousEvent(Kn,Qn,2!=Jn.type||2!=$n.type,An.arb,!1),null==An.arb?null!=ir&&(ir.pair=null):An.arb.pair=An}An=(On=An).next}else An.sleeping=!0,null==On?this.pairs=An.next:On.next=An.next,An=An.next}}},ii.prototype.clear=function(){for(;null!=this.syncs;){var e=this.syncs.snext;this.syncs.snext=null,this.syncs.first_sync&&(this.syncs.shape.node=null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null),this.syncs=e}for(;null!=this.moves;){var t=this.moves.mnext;this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=t}for(;null!=this.pairs;){var i=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null),this.pairs.arb=null;for(var n=this.pairs.n1.shape.pairs,r=this.pairs,o=null,a=n.head;null!=a;){if(a.elt==r){var s,p;null==o?(p=(s=n.head).next,n.head=p,null==n.head&&(n.pushmod=!0)):(p=(s=o.next).next,null==(o.next=p)&&(n.pushmod=!0));var l=s;l.elt=null,l.next=rr.zpp_pool,rr.zpp_pool=l,n.modified=!0,n.length--,n.pushmod=!0;break}a=(o=a).next}for(var h=this.pairs.n2.shape.pairs,u=this.pairs,d=null,c=h.head;null!=c;){if(c.elt==u){var _,y;null==d?(y=(_=h.head).next,h.head=y,null==h.head&&(h.pushmod=!0)):(y=(_=d.next).next,null==(d.next=y)&&(h.pushmod=!0));var x=_;x.elt=null,x.next=rr.zpp_pool,rr.zpp_pool=x,h.modified=!0,h.length--,h.pushmod=!0;break}c=(d=c).next}var m=this.pairs;m.n1=m.n2=null,m.sleeping=!1,m.next=nr.zpp_pool,nr.zpp_pool=m,this.pairs=i}this.dtree.clear(),this.stree.clear()},ii.prototype.treeStack=null,ii.prototype.shapesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;var o=r,a=null==n?new me:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),p=s.aabb;if(o.x>=p.minx&&o.x<=p.maxx&&o.y>=p.miny&&o.y<=p.maxy)if(null==s.child1){var l;if(null!=i){var h=s.shape.filter;l=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else l=!0;l&&(0==s.shape.type?$s.circleContains(s.shape.circle,o)&&a.push(s.shape.outer):$s.polyContains(s.shape.polygon,o)&&a.push(s.shape.outer))}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var u=this.treeStack.pop_unsafe(),d=u.aabb;if(o.x>=d.minx&&o.x<=d.maxx&&o.y>=d.miny&&o.y<=d.maxy)if(null==u.child1){var c;if(null!=i){var _=u.shape.filter;c=0!=(_.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&_.collisionGroup)}else c=!0;c&&(0==u.shape.type?$s.circleContains(u.shape.circle,o)&&a.push(u.shape.outer):$s.polyContains(u.shape.polygon,o)&&a.push(u.shape.outer))}else null!=u.child1&&this.treeStack.add(u.child1),null!=u.child2&&this.treeStack.add(u.child2)}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,a},ii.prototype.bodiesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;var o=r,a=null==n?new ee:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),p=s.aabb;if(o.x>=p.minx&&o.x<=p.maxx&&o.y>=p.miny&&o.y<=p.maxy)if(null==s.child1){var l=s.shape.body.outer;if(!a.has(l)){var h;if(null!=i){var u=s.shape.filter;h=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else h=!0;h&&(0==s.shape.type?$s.circleContains(s.shape.circle,o)&&a.push(l):$s.polyContains(s.shape.polygon,o)&&a.push(l))}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var d=this.treeStack.pop_unsafe(),c=d.aabb;if(o.x>=c.minx&&o.x<=c.maxx&&o.y>=c.miny&&o.y<=c.maxy)if(null==d.child1){var _=d.shape.body.outer;if(!a.has(_)){var y;if(null!=i){var x=d.shape.filter;y=0!=(x.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup)}else y=!0;y&&(0==d.shape.type?$s.circleContains(d.shape.circle,o)&&a.push(_):$s.polyContains(d.shape.polygon,o)&&a.push(_))}}else null!=d.child1&&this.treeStack.add(d.child1),null!=d.child2&&this.treeStack.add(d.child2)}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,a},ii.prototype.treeStack2=null,ii.prototype.shapesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new me:r;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),p=s.aabb;if(p.minx>=o.minx&&p.miny>=o.miny&&p.maxx<=o.maxx&&p.maxy<=o.maxy)if(null==s.child1){var l;if(null!=n){var h=s.shape.filter;l=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else l=!0;l&&a.push(s.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(s);null!=this.treeStack2.head;){var u=this.treeStack2.pop_unsafe();if(null==u.child1){var d;if(null!=n){var c=u.shape.filter;d=0!=(c.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&c.collisionGroup)}else d=!0;d&&a.push(u.shape.outer)}else null!=u.child1&&this.treeStack2.add(u.child1),null!=u.child2&&this.treeStack2.add(u.child2)}else{var _=s.aabb;if(o.miny<=_.maxy&&_.miny<=o.maxy&&o.minx<=_.maxx&&_.minx<=o.maxx)if(null==s.child1){var y;if(null!=n){var x=s.shape.filter;y=0!=(x.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&x.collisionGroup)}else y=!0;if(y)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,s.shape)&&a.push(s.shape.outer);else{var m=s.shape.aabb;m.minx>=o.minx&&m.miny>=o.miny&&m.maxx<=o.maxx&&m.maxy<=o.maxy?a.push(s.shape.outer):$s.testCollide_safe(s.shape,this.aabbShape.zpp_inner)&&a.push(s.shape.outer)}else{var f;if(i){var v=s.shape.aabb;f=v.minx>=o.minx&&v.miny>=o.miny&&v.maxx<=o.maxx&&v.maxy<=o.maxy}else f=!0;f&&a.push(s.shape.outer)}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var g=this.treeStack.pop_unsafe(),z=g.aabb;if(z.minx>=o.minx&&z.miny>=o.miny&&z.maxx<=o.maxx&&z.maxy<=o.maxy)if(null==g.child1){var b;if(null!=n){var w=g.shape.filter;b=0!=(w.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&w.collisionGroup)}else b=!0;b&&a.push(g.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(g);null!=this.treeStack2.head;){var S=this.treeStack2.pop_unsafe();if(null==S.child1){var C;if(null!=n){var M=S.shape.filter;C=0!=(M.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&M.collisionGroup)}else C=!0;C&&a.push(S.shape.outer)}else null!=S.child1&&this.treeStack2.add(S.child1),null!=S.child2&&this.treeStack2.add(S.child2)}else{var P=g.aabb;if(o.miny<=P.maxy&&P.miny<=o.maxy&&o.minx<=P.maxx&&P.minx<=o.maxx)if(null==g.child1){var k;if(null!=n){var T=g.shape.filter;k=0!=(T.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&T.collisionGroup)}else k=!0;if(k)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,g.shape)&&a.push(g.shape.outer);else{var G=g.shape.aabb;G.minx>=o.minx&&G.miny>=o.miny&&G.maxx<=o.maxx&&G.maxy<=o.maxy?a.push(g.shape.outer):$s.testCollide_safe(g.shape,this.aabbShape.zpp_inner)&&a.push(g.shape.outer)}else{var O;if(i){var A=g.shape.aabb;O=A.minx>=o.minx&&A.miny>=o.miny&&A.maxx<=o.maxx&&A.maxy<=o.maxy}else O=!0;O&&a.push(g.shape.outer)}}else null!=g.child1&&this.treeStack.add(g.child1),null!=g.child2&&this.treeStack.add(g.child2)}}return a},ii.prototype.failed=null,ii.prototype.bodiesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new ee:r;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),p=s.aabb;if(p.minx>=o.minx&&p.miny>=o.miny&&p.maxx<=o.maxx&&p.maxy<=o.maxy)if(null==s.child1){var l;if(null!=n){var h=s.shape.filter;l=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else l=!0;if(l){var u=s.shape.body.outer;a.has(u)||a.push(u)}}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(s);null!=this.treeStack2.head;){var d=this.treeStack2.pop_unsafe();if(null==d.child1){var c;if(null!=n){var _=d.shape.filter;c=0!=(_.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&_.collisionGroup)}else c=!0;if(c){var y=d.shape.body.outer;a.has(y)||a.push(y)}}else null!=d.child1&&this.treeStack2.add(d.child1),null!=d.child2&&this.treeStack2.add(d.child2)}else{var x=s.aabb;if(o.miny<=x.maxy&&x.miny<=o.maxy&&o.minx<=x.maxx&&x.minx<=o.maxx)if(null==s.child1){var m,f=s.shape.body.outer;if(null!=n){var v=s.shape.filter;m=0!=(v.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&v.collisionGroup)}else m=!0;if(m)if(t)if(i){if(!this.failed.has(f)){var g=$s.containTest(this.aabbShape.zpp_inner,s.shape);!a.has(f)&&g?a.push(f):g||(a.remove(f),this.failed.push(f))}}else!a.has(f)&&$s.testCollide_safe(s.shape,this.aabbShape.zpp_inner)&&a.push(f);else if(i){if(!this.failed.has(f)){var z=s.shape.aabb,b=z.minx>=o.minx&&z.miny>=o.miny&&z.maxx<=o.maxx&&z.maxy<=o.maxy;!a.has(f)&&b?a.push(f):b||(a.remove(f),this.failed.push(f))}}else{var w;if(a.has(f))w=!1;else{var S=s.shape.aabb;w=S.minx>=o.minx&&S.miny>=o.miny&&S.maxx<=o.maxx&&S.maxy<=o.maxy}w&&a.push(f)}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var C=this.treeStack.pop_unsafe(),M=C.aabb;if(M.minx>=o.minx&&M.miny>=o.miny&&M.maxx<=o.maxx&&M.maxy<=o.maxy)if(null==C.child1){var P;if(null!=n){var k=C.shape.filter;P=0!=(k.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&k.collisionGroup)}else P=!0;if(P){var T=C.shape.body.outer;a.has(T)||a.push(T)}}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(C);null!=this.treeStack2.head;){var G=this.treeStack2.pop_unsafe();if(null==G.child1){var O;if(null!=n){var A=G.shape.filter;O=0!=(A.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&A.collisionGroup)}else O=!0;if(O){var E=G.shape.body.outer;a.has(E)||a.push(E)}}else null!=G.child1&&this.treeStack2.add(G.child1),null!=G.child2&&this.treeStack2.add(G.child2)}else{var I=C.aabb;if(o.miny<=I.maxy&&I.miny<=o.maxy&&o.minx<=I.maxx&&I.minx<=o.maxx)if(null==C.child1){var B,L=C.shape.body.outer;if(null!=n){var D=C.shape.filter;B=0!=(D.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&D.collisionGroup)}else B=!0;if(B)if(t)if(i){if(!this.failed.has(L)){var R=$s.containTest(this.aabbShape.zpp_inner,C.shape);!a.has(L)&&R?a.push(L):R||(a.remove(L),this.failed.push(L))}}else!a.has(L)&&$s.testCollide_safe(C.shape,this.aabbShape.zpp_inner)&&a.push(L);else if(i){if(!this.failed.has(L)){var F=C.shape.aabb,j=F.minx>=o.minx&&F.miny>=o.miny&&F.maxx<=o.maxx&&F.maxy<=o.maxy;!a.has(L)&&j?a.push(L):j||(a.remove(L),this.failed.push(L))}}else{var N;if(a.has(L))N=!1;else{var U=C.shape.aabb;N=U.minx>=o.minx&&U.miny>=o.miny&&U.maxx<=o.maxx&&U.maxy<=o.maxy}N&&a.push(L)}}else null!=C.child1&&this.treeStack.add(C.child1),null!=C.child2&&this.treeStack.add(C.child2)}}return this.failed.clear(),a},ii.prototype.shapesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new me:o;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var p=this.treeStack.pop_unsafe(),l=p.aabb;if(a.miny<=l.maxy&&l.miny<=a.maxy&&a.minx<=l.maxx&&l.minx<=a.maxx)if(null==p.child1){var h;if(null!=r){var u=p.shape.filter;h=0!=(u.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&u.collisionGroup)}else h=!0;h&&(n?$s.containTest(this.circShape.zpp_inner,p.shape)&&s.push(p.shape.outer):$s.testCollide_safe(p.shape,this.circShape.zpp_inner)&&s.push(p.shape.outer))}else null!=p.child1&&this.treeStack.add(p.child1),null!=p.child2&&this.treeStack.add(p.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var d=this.treeStack.pop_unsafe(),c=d.aabb;if(a.miny<=c.maxy&&c.miny<=a.maxy&&a.minx<=c.maxx&&c.minx<=a.maxx)if(null==d.child1){var _;if(null!=r){var y=d.shape.filter;_=0!=(y.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&y.collisionGroup)}else _=!0;_&&(n?$s.containTest(this.circShape.zpp_inner,d.shape)&&s.push(d.shape.outer):$s.testCollide_safe(d.shape,this.circShape.zpp_inner)&&s.push(d.shape.outer))}else null!=d.child1&&this.treeStack.add(d.child1),null!=d.child2&&this.treeStack.add(d.child2)}return s},ii.prototype.bodiesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new ee:o;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var p=this.treeStack.pop_unsafe(),l=p.aabb;if(a.miny<=l.maxy&&l.miny<=a.maxy&&a.minx<=l.maxx&&l.minx<=a.maxx)if(null==p.child1){var h,u=p.shape.body.outer;if(null!=r){var d=p.shape.filter;h=0!=(d.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&d.collisionGroup)}else h=!0;if(h)if(n){if(!this.failed.has(u)){var c=$s.containTest(this.circShape.zpp_inner,p.shape);!s.has(u)&&c?s.push(u):c||(s.remove(u),this.failed.push(u))}}else!s.has(u)&&$s.testCollide_safe(p.shape,this.circShape.zpp_inner)&&s.push(u)}else null!=p.child1&&this.treeStack.add(p.child1),null!=p.child2&&this.treeStack.add(p.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var _=this.treeStack.pop_unsafe(),y=_.aabb;if(a.miny<=y.maxy&&y.miny<=a.maxy&&a.minx<=y.maxx&&y.minx<=a.maxx)if(null==_.child1){var x,m=_.shape.body.outer;if(null!=r){var f=_.shape.filter;x=0!=(f.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&f.collisionGroup)}else x=!0;if(x)if(n){if(!this.failed.has(m)){var v=$s.containTest(this.circShape.zpp_inner,_.shape);!s.has(m)&&v?s.push(m):v||(s.remove(m),this.failed.push(m))}}else!s.has(m)&&$s.testCollide_safe(_.shape,this.circShape.zpp_inner)&&s.push(m)}else null!=_.child1&&this.treeStack.add(_.child1),null!=_.child2&&this.treeStack.add(_.child2)}return this.failed.clear(),s},ii.prototype.shapesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new me:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var a=this.treeStack.pop_unsafe(),s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==a.child1){var p;if(null!=i){var l=a.shape.filter;p=0!=(l.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&l.collisionGroup)}else p=!0;p&&(t?$s.containTest(e,a.shape)&&o.push(a.shape.outer):$s.testCollide_safe(a.shape,e)&&o.push(a.shape.outer))}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var h=this.treeStack.pop_unsafe(),u=h.aabb;if(r.miny<=u.maxy&&u.miny<=r.maxy&&r.minx<=u.maxx&&u.minx<=r.maxx)if(null==h.child1){var d;if(null!=i){var c=h.shape.filter;d=0!=(c.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&c.collisionGroup)}else d=!0;d&&(t?$s.containTest(e,h.shape)&&o.push(h.shape.outer):$s.testCollide_safe(h.shape,e)&&o.push(h.shape.outer))}else null!=h.child1&&this.treeStack.add(h.child1),null!=h.child2&&this.treeStack.add(h.child2)}return o},ii.prototype.bodiesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new ee:n;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var a=this.treeStack.pop_unsafe(),s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==a.child1){var p,l=a.shape.body.outer;if(null!=i){var h=a.shape.filter;p=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else p=!0;if(p)if(t){if(!this.failed.has(l)){var u=$s.containTest(e,a.shape);!o.has(l)&&u?o.push(l):u||(o.remove(l),this.failed.push(l))}}else!o.has(l)&&$s.testCollide_safe(a.shape,e)&&o.push(l)}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var d=this.treeStack.pop_unsafe(),c=d.aabb;if(r.miny<=c.maxy&&c.miny<=r.maxy&&r.minx<=c.maxx&&c.minx<=r.maxx)if(null==d.child1){var _,y=d.shape.body.outer;if(null!=i){var x=d.shape.filter;_=0!=(x.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup)}else _=!0;if(_)if(t){if(!this.failed.has(y)){var m=$s.containTest(e,d.shape);!o.has(y)&&m?o.push(y):m||(o.remove(y),this.failed.push(y))}}else!o.has(y)&&$s.testCollide_safe(d.shape,e)&&o.push(y)}else null!=d.child1&&this.treeStack.add(d.child1),null!=d.child2&&this.treeStack.add(d.child2)}return this.failed.clear(),o},ii.prototype.openlist=null,ii.prototype.rayCast=function(e,t,i){null==this.openlist&&(this.openlist=new Ti),this.sync_broadphase(),e.validate_dir();var n=e.maxdist;if(null!=this.dtree.root&&e.aabbtest(this.dtree.root.aabb)){var r=e.aabbsect(this.dtree.root.aabb);if(0<=r&&r<n){this.dtree.root.rayt=r;for(var o=null,a=this.openlist.head;null!=a&&!(this.dtree.root.rayt<a.elt.rayt);)a=(o=a).next;var s,p=this.openlist;null==sn.zpp_pool?s=new sn:(s=sn.zpp_pool,sn.zpp_pool=s.next,s.next=null),s.elt=this.dtree.root;var l=s;null==o?(l.next=p.head,p.head=l):(l.next=o.next,o.next=l),p.pushmod=p.modified=!0,p.length++}}if(null!=this.stree.root&&e.aabbtest(this.stree.root.aabb)){var h=e.aabbsect(this.stree.root.aabb);if(0<=h&&h<n){this.stree.root.rayt=h;for(var u=null,d=this.openlist.head;null!=d&&!(this.stree.root.rayt<d.elt.rayt);)d=(u=d).next;var c,_=this.openlist;null==sn.zpp_pool?c=new sn:(c=sn.zpp_pool,sn.zpp_pool=c.next,c.next=null),c.elt=this.stree.root;var y=c;null==u?(y.next=_.head,_.head=y):(y.next=u.next,u.next=y),_.pushmod=_.modified=!0,_.length++}}for(var x=null;null!=this.openlist.head;){var m=this.openlist.pop_unsafe();if(m.rayt>=n)break;if(null==m.child1){var f,v=m.shape;if(null!=i){var g=v.filter;f=0!=(g.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&g.collisionGroup)}else f=!0;if(f){var z=0==v.type?e.circlesect(v.circle,t,n):e.aabbtest(v.aabb)?e.polysect(v.polygon,t,n):null;null!=z&&(n=z.zpp_inner.toiDistance,null!=x&&x.zpp_inner.free(),x=z)}}else{if(null!=m.child1&&e.aabbtest(m.child1.aabb)){var b=e.aabbsect(m.child1.aabb);if(0<=b&&b<n){m.child1.rayt=b;for(var w=null,S=this.openlist.head;null!=S&&!(m.child1.rayt<S.elt.rayt);)S=(w=S).next;var C,M=this.openlist;null==sn.zpp_pool?C=new sn:(C=sn.zpp_pool,sn.zpp_pool=C.next,C.next=null),C.elt=m.child1;var P=C;null==w?(P.next=M.head,M.head=P):(P.next=w.next,w.next=P),M.pushmod=M.modified=!0,M.length++}}if(null!=m.child2&&e.aabbtest(m.child2.aabb)){var k=e.aabbsect(m.child2.aabb);if(0<=k&&k<n){m.child2.rayt=k;for(var T=null,G=this.openlist.head;null!=G&&!(m.child2.rayt<G.elt.rayt);)G=(T=G).next;var O,A=this.openlist;null==sn.zpp_pool?O=new sn:(O=sn.zpp_pool,sn.zpp_pool=O.next,O.next=null),O.elt=m.child2;var E=O;null==T?(E.next=A.head,A.head=E):(E.next=T.next,T.next=E),A.pushmod=A.modified=!0,A.length++}}}}return this.openlist.clear(),x},ii.prototype.rayMultiCast=function(e,t,i,n){null==this.openlist&&(this.openlist=new Ti),this.sync_broadphase(),e.validate_dir();var r=e.maxdist>=1/0,o=null==n?new Z:n;if(null!=this.dtree.root&&e.aabbtest(this.dtree.root.aabb))if(r)this.openlist.add(this.dtree.root);else{var a=e.aabbsect(this.dtree.root.aabb);0<=a&&a<e.maxdist&&this.openlist.add(this.dtree.root)}if(null!=this.stree.root&&e.aabbtest(this.stree.root.aabb))if(r)this.openlist.add(this.stree.root);else{var s=e.aabbsect(this.stree.root.aabb);0<=s&&s<e.maxdist&&this.openlist.add(this.stree.root)}for(;null!=this.openlist.head;){var p=this.openlist.pop_unsafe();if(null==p.child1){var l,h=p.shape;if(null!=i){var u=h.filter;l=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else l=!0;l&&(0==h.type?e.circlesect2(h.circle,t,o):e.aabbtest(h.aabb)&&e.polysect2(h.polygon,t,o))}else{if(null!=p.child1&&e.aabbtest(p.child1.aabb))if(r)this.openlist.add(p.child1);else{var d=e.aabbsect(p.child1.aabb);0<=d&&d<e.maxdist&&this.openlist.add(p.child1)}if(null!=p.child2&&e.aabbtest(p.child2.aabb))if(r)this.openlist.add(p.child2);else{var c=e.aabbsect(p.child2.aabb);0<=c&&c<e.maxdist&&this.openlist.add(p.child2)}}}return this.openlist.clear(),o},ii.prototype.__class__=ii;var ni=zpp_nape.space.ZPP_Island=function(){this.waket=0,this.sleep=!1,this.comps=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.comps=new Gi};ni.__name__=["zpp_nape","space","ZPP_Island"],ni.prototype.next=null,ni.prototype.elem=function(){return this},ni.prototype.begin=function(){return this.next},ni.prototype._inuse=null,ni.prototype.modified=null,ni.prototype.pushmod=null,ni.prototype.length=null,ni.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},ni.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ni.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ni.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},ni.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ni.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ni.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ni.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ni.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},ni.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},ni.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ni.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},ni.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ni.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},ni.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ni.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ni.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},ni.prototype.clear=function(){},ni.prototype.inlined_clear=function(){},ni.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},ni.prototype.empty=function(){return null==this.next},ni.prototype.size=function(){return this.length},ni.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ni.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ni.prototype.front=function(){return this.next},ni.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},ni.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},ni.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},ni.prototype.comps=null,ni.prototype.sleep=null,ni.prototype.waket=null,ni.prototype.free=function(){},ni.prototype.alloc=function(){this.waket=0},ni.prototype.__class__=ni;var oi=zpp_nape.space.ZPP_Component=function(){this.woken=!1,this.waket=0,this.sleeping=!1,this.island=null,this.constraint=null,this.body=null,this.isBody=!1,this.rank=0,this.parent=null,this.next=null,this.sleeping=!1,this.island=null,(this.parent=this).rank=0,this.woken=!1};oi.__name__=["zpp_nape","space","ZPP_Component"],oi.prototype.next=null,oi.prototype.parent=null,oi.prototype.rank=null,oi.prototype.isBody=null,oi.prototype.body=null,oi.prototype.constraint=null,oi.prototype.island=null,oi.prototype.sleeping=null,oi.prototype.waket=null,oi.prototype.woken=null,oi.prototype.free=function(){this.body=null,this.constraint=null},oi.prototype.alloc=function(){},oi.prototype.reset=function(){this.sleeping=!1,this.island=null,(this.parent=this).rank=0},oi.prototype.__class__=oi;var Yo=zpp_nape.space.ZPP_CallbackSet=function(){this.lazydel=!1,this.freed=!1,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.int2=null,this.int1=null,this.di=0,this.id=0,this.arbiters=new vi};Yo.__name__=["zpp_nape","space","ZPP_CallbackSet"],Yo.get=function(e,t){var i;return null==Yo.zpp_pool?i=new Yo:(i=Yo.zpp_pool,Yo.zpp_pool=i.next,i.next=null),i.freed=!1,i.lazydel=!1,i.COLLISIONstate=1,i.COLLISIONstamp=0,i.SENSORstate=1,i.SENSORstamp=0,i.FLUIDstate=1,i.FLUIDstamp=0,e.id<t.id?(i.int1=e,i.int2=t):(i.int1=t,i.int2=e),i.id=i.int1.id,i.di=i.int2.id,i},Yo.prototype.id=null,Yo.prototype.di=null,Yo.prototype.int1=null,Yo.prototype.int2=null,Yo.prototype.arbiters=null,Yo.prototype.COLLISIONstate=null,Yo.prototype.COLLISIONstamp=null,Yo.prototype.SENSORstate=null,Yo.prototype.SENSORstamp=null,Yo.prototype.FLUIDstate=null,Yo.prototype.FLUIDstamp=null,Yo.prototype.next=null,Yo.prototype.elem=function(){return this},Yo.prototype.begin=function(){return this.next},Yo.prototype._inuse=null,Yo.prototype.modified=null,Yo.prototype.pushmod=null,Yo.prototype.length=null,Yo.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},Yo.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Yo.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Yo.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},Yo.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Yo.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Yo.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Yo.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Yo.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},Yo.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},Yo.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Yo.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Yo.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Yo.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Yo.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Yo.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Yo.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Yo.prototype.clear=function(){},Yo.prototype.inlined_clear=function(){},Yo.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},Yo.prototype.empty=function(){return null==this.next},Yo.prototype.size=function(){return this.length},Yo.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Yo.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Yo.prototype.front=function(){return this.next},Yo.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},Yo.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},Yo.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},Yo.prototype.freed=null,Yo.prototype.lazydel=null,Yo.prototype.free=function(){this.int1=this.int2=null,this.id=this.di=-1,this.freed=!0},Yo.prototype.alloc=function(){this.freed=!1,this.lazydel=!1,this.COLLISIONstate=1,this.COLLISIONstamp=0,this.SENSORstate=1,this.SENSORstamp=0,this.FLUIDstate=1,this.FLUIDstamp=0},Yo.prototype.add_arb=function(e){var t;t=!1;for(var i=this.arbiters.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}if(t)return!1;var n,r=this.arbiters;null==Zo.zpp_pool?n=new Zo:(n=Zo.zpp_pool,Zo.zpp_pool=n.next,n.next=null),n.elt=e;var o=n;return o.next=r.head,r.head=o,r.modified=!0,r.length++,!0},Yo.prototype.try_remove_arb=function(e){for(var t=this.arbiters,i=null,n=t.head,r=!1;null!=n;){if(n.elt==e){var o,a;null==i?(a=(o=t.head).next,t.head=a,null==t.head&&(t.pushmod=!0)):(a=(o=i.next).next,null==(i.next=a)&&(t.pushmod=!0));var s=o;s.elt=null,s.next=Zo.zpp_pool,Zo.zpp_pool=s,t.modified=!0,t.length--,r=t.pushmod=!0;break}n=(i=n).next}return r},Yo.prototype.remove_arb=function(e){for(var t=this.arbiters,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Zo.zpp_pool,Zo.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}},Yo.prototype.empty_arb=function(e){var t;t=!0;for(var i=this.arbiters.head;null!=i;){if(0!=(i.elt.type&e)){t=!1;break}i=i.next}return t},Yo.prototype.really_empty=function(){return null==this.arbiters.head},Yo.prototype.sleeping=function(){var e;e=!0;for(var t=this.arbiters.head;null!=t;){if(!t.elt.sleeping){e=!1;break}t=t.next}return e},Yo.prototype.__class__=Yo;var ai=zpp_nape.space.ZPP_CbSetManager=function(e){this.space=null,(this.cbsets=null)==Yn.zpp_pool?this.cbsets=new Yn:(this.cbsets=Yn.zpp_pool,Yn.zpp_pool=this.cbsets.next,this.cbsets.next=null),this.cbsets.lt=jo.setlt,this.space=e};ai.__name__=["zpp_nape","space","ZPP_CbSetManager"],ai.prototype.cbsets=null,ai.prototype.space=null,ai.prototype.get=function(e){if(null==e.head)return null;var t;null==jo.zpp_pool?t=new jo:(t=jo.zpp_pool,jo.zpp_pool=t.next,t.next=null);var i=t.cbTypes;t.cbTypes=e;var n,r=this.cbsets.find_weak(t);if(null!=r)n=r.data;else{var o=jo.get(e);this.cbsets.insert(o),o.manager=this,n=o}t.cbTypes=i;var a=t;for(a.listeners.clear(),a.zip_listeners=!0,a.bodylisteners.clear(),a.zip_bodylisteners=!0,a.conlisteners.clear(),a.zip_conlisteners=!0;null!=a.cbTypes.head;)a.cbTypes.pop_unsafe().cbsets.remove(a);return a.next=jo.zpp_pool,jo.zpp_pool=a,n},ai.prototype.remove=function(e){for(this.cbsets.remove(e);null!=e.cbpairs.head;){var t=e.cbpairs.pop_unsafe();t.a!=t.b&&(e==t.a?t.b.cbpairs.remove(t):t.a.cbpairs.remove(t)),t.a=t.b=null,t.listeners.clear(),t.next=No.zpp_pool,No.zpp_pool=t}e.manager=null},ai.prototype.clear=function(){},ai.prototype.validate=function(){if(!this.cbsets.empty()){for(var e=this.cbsets.parent;null!=e.prev;)e=e.prev;for(;null!=e;)if(e.data.validate(),null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}},ai.prototype.pair=function(e,t){for(var i,n=null,r=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=r;){var o=r.elt;if(o.a==e&&o.b==t||o.a==t&&o.b==e){n=o;break}r=r.next}null==n&&(null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),n=i,e.cbpairs.add(n),t!=e&&t.cbpairs.add(n));return n.zip_listeners&&(n.zip_listeners=!1,n.__validate()),n},ai.prototype.valid_listener=function(e){return e.space==this.space},ai.prototype.__class__=ai;var si=zpp_nape.space.ZPP_Space=function(e,t){this.prelisteners=null,this.precb=null,this.continuous=!1,this.toiEvents=null,this.pre_dt=0,this.convexShapeList=null,this.cbsets=null,this.callbackset_list=null,this.callbacks=null,this.wrap_listeners=null,this.listeners=null,this.islands=null,this.staticsleep=null,this.wrap_livecon=null,this.live_constraints=null,this.wrap_live=null,this.live=null,this.wrap_arbiters=null,this.s_arbiters=null,this.f_arbiters=null,this.c_arbiters_false=null,this.c_arbiters_true=null,this.sortcontacts=!1,this.time=0,this.midstep=!1,this.stamp=0,this.global_ang_drag=0,this.global_lin_drag=0,this.__static=null,this.bphase=null,this.kinematics=null,this.wrap_constraints=null,this.constraints=null,this.wrap_compounds=null,this.compounds=null,this.wrap_bodies=null,this.bodies=null,this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.userData=null,this.outer=null,this.toiEvents=new Li,this.global_lin_drag=.015,this.global_ang_drag=.015,this.precb=new v,this.precb.zpp_inner=new nt,this.sortcontacts=!0,this.pre_dt=0,null==t||(null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new we,Uo.internal=!1),t==Uo.Broadphase_DYNAMIC_AABB_TREE)?this.bphase=new ii(this):(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new we,Uo.internal=!1),t==Uo.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new li(this))),this.time=0,null!=e?(this.gravityx=e.x,this.gravityy=e.y):(this.gravityx=0,this.gravityy=0),this.bodies=new mi,this.wrap_bodies=fn.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$(this,this.bodies_subber),this.compounds=new fi,this.wrap_compounds=gn.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$(this,this.compounds_subber),this.kinematics=new mi,this.c_arbiters_true=new Ii,this.c_arbiters_false=new Ii,this.f_arbiters=new Oi,this.s_arbiters=new Ai,this.islands=new ni,this.live=new mi,this.wrap_live=fn.get(this.live,!0),this.staticsleep=new mi,this.constraints=new Ae,this.wrap_constraints=mn.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$(this,this.constraints_subber),this.live_constraints=new Ae,this.wrap_livecon=mn.get(this.live_constraints,!0),this.__static=qt.__static(),(this.__static.zpp_inner.space=this).callbacks=new nt,this.midstep=!1,this.listeners=new Ei,this.wrap_listeners=zn.get(this.listeners),this.wrap_listeners.zpp_inner.adder=$(this,this.listeners_adder),this.wrap_listeners.zpp_inner.subber=$(this,this.listeners_subber),this.callbackset_list=new Yo,this.mrca1=new Ee,this.mrca2=new Ee,this.prelisteners=new Te,this.cbsets=new ai(this)};si.__name__=["zpp_nape","space","ZPP_Space"],si.prototype.outer=null,si.prototype.userData=null,si.prototype.gravityx=null,si.prototype.gravityy=null,si.prototype.wrap_gravity=null,si.prototype.getgravity=function(){var e,t=this.gravityx,i=this.gravityy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gravity=e,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$(this,this.gravity_validate)},si.prototype.gravity_invalidate=function(e){this.gravityx=e.x,this.gravityy=e.y;for(var t=new fi,i=this.bodies.head;null!=i;){var n=i.elt;n.world||(n.component.waket=this.stamp+(this.midstep?0:1),3==n.type&&(n.kinematicDelaySleep=!0),n.component.sleeping&&this.really_wake(n,!1)),i=i.next}for(var r=this.compounds.head;null!=r;)t.add(r.elt),r=r.next;for(;null!=t.head;){for(var o=t.pop_unsafe(),a=o.bodies.head;null!=a;){var s=a.elt;s.world||(s.component.waket=this.stamp+(this.midstep?0:1),3==s.type&&(s.kinematicDelaySleep=!0),s.component.sleeping&&this.really_wake(s,!1)),a=a.next}for(var p=o.compounds.head;null!=p;)t.add(p.elt),p=p.next}},si.prototype.gravity_validate=function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},si.prototype.bodies=null,si.prototype.wrap_bodies=null,si.prototype.compounds=null,si.prototype.wrap_compounds=null,si.prototype.constraints=null,si.prototype.wrap_constraints=null,si.prototype.kinematics=null,si.prototype.bphase=null,si.prototype.__static=null,si.prototype.global_lin_drag=null,si.prototype.global_ang_drag=null,si.prototype.stamp=null,si.prototype.midstep=null,si.prototype.time=null,si.prototype.sortcontacts=null,si.prototype.c_arbiters_true=null,si.prototype.c_arbiters_false=null,si.prototype.f_arbiters=null,si.prototype.s_arbiters=null,si.prototype.wrap_arbiters=null,si.prototype.live=null,si.prototype.wrap_live=null,si.prototype.live_constraints=null,si.prototype.wrap_livecon=null,si.prototype.staticsleep=null,si.prototype.islands=null,si.prototype.listeners=null,si.prototype.wrap_listeners=null,si.prototype.callbacks=null,si.prototype.callbackset_list=null,si.prototype.cbsets=null,si.prototype.clear=function(){for(;null!=this.listeners.head;)this.remListener(this.listeners.pop_unsafe());for(;null!=this.callbackset_list.next;){var e=this.callbackset_list.pop_unsafe();e.arbiters.clear(),e.int1=e.int2=null,e.id=e.di=-1,e.freed=!0,e.next=Yo.zpp_pool,Yo.zpp_pool=e}for(;null!=this.c_arbiters_true.head;){var t=this.c_arbiters_true.pop_unsafe();if(!t.cleared){for(var i=t.b1.arbiters,n=null,r=i.head;null!=r;){if(r.elt==t){var o,a;null==n?(a=(o=i.head).next,i.head=a,null==i.head&&(i.pushmod=!0)):(a=(o=n.next).next,null==(n.next=a)&&(i.pushmod=!0));var s=o;s.elt=null,s.next=Zo.zpp_pool,Zo.zpp_pool=s,i.modified=!0,i.length--,i.pushmod=!0;break}r=(n=r).next}for(var p=t.b2.arbiters,l=null,h=p.head;null!=h;){if(h.elt==t){var u,d;null==l?(d=(u=p.head).next,p.head=d,null==p.head&&(p.pushmod=!0)):(d=(u=l.next).next,null==(l.next=d)&&(p.pushmod=!0));var c=u;c.elt=null,c.next=Zo.zpp_pool,Zo.zpp_pool=c,p.modified=!0,p.length--,p.pushmod=!0;break}h=(l=h).next}null!=t.pair&&(t.pair.arb=null,t.pair=null)}for(t.b1=t.b2=null,t.active=!1,t.intchange=!1;null!=t.contacts.next;){var _=t.contacts,y=_.next;_.pop(),y.arbiter=null,y.next=Xo.zpp_pool,Xo.zpp_pool=y;var x=t.innards,m=x.next;x.next=m.next,m._inuse=!1,null==x.next&&(x.pushmod=!0),x.modified=!0,x.length--}t.userdef_dyn_fric=!1,t.userdef_stat_fric=!1,t.userdef_restitution=!1,t.userdef_rfric=!1,t.__ref_edge1=t.__ref_edge2=null,t.next=Wo.zpp_pool,(Wo.zpp_pool=t).pre_dt=-1}for(;null!=this.c_arbiters_false.head;){var f=this.c_arbiters_false.pop_unsafe();if(!f.cleared){for(var v=f.b1.arbiters,g=null,z=v.head;null!=z;){if(z.elt==f){var b,w;null==g?(w=(b=v.head).next,v.head=w,null==v.head&&(v.pushmod=!0)):(w=(b=g.next).next,null==(g.next=w)&&(v.pushmod=!0));var S=b;S.elt=null,S.next=Zo.zpp_pool,Zo.zpp_pool=S,v.modified=!0,v.length--,v.pushmod=!0;break}z=(g=z).next}for(var C=f.b2.arbiters,M=null,P=C.head;null!=P;){if(P.elt==f){var k,T;null==M?(T=(k=C.head).next,C.head=T,null==C.head&&(C.pushmod=!0)):(T=(k=M.next).next,null==(M.next=T)&&(C.pushmod=!0));var G=k;G.elt=null,G.next=Zo.zpp_pool,Zo.zpp_pool=G,C.modified=!0,C.length--,C.pushmod=!0;break}P=(M=P).next}null!=f.pair&&(f.pair.arb=null,f.pair=null)}for(f.b1=f.b2=null,f.active=!1,f.intchange=!1;null!=f.contacts.next;){var O=f.contacts,A=O.next;O.pop(),A.arbiter=null,A.next=Xo.zpp_pool,Xo.zpp_pool=A;var E=f.innards,I=E.next;E.next=I.next,I._inuse=!1,null==E.next&&(E.pushmod=!0),E.modified=!0,E.length--}f.userdef_dyn_fric=!1,f.userdef_stat_fric=!1,f.userdef_restitution=!1,f.userdef_rfric=!1,f.__ref_edge1=f.__ref_edge2=null,f.next=Wo.zpp_pool,(Wo.zpp_pool=f).pre_dt=-1}for(;null!=this.s_arbiters.head;){var B=this.s_arbiters.pop_unsafe();if(!B.cleared){for(var L=B.b1.arbiters,D=null,R=L.head;null!=R;){if(R.elt==B){var F,j;null==D?(j=(F=L.head).next,L.head=j,null==L.head&&(L.pushmod=!0)):(j=(F=D.next).next,null==(D.next=j)&&(L.pushmod=!0));var N=F;N.elt=null,N.next=Zo.zpp_pool,Zo.zpp_pool=N,L.modified=!0,L.length--,L.pushmod=!0;break}R=(D=R).next}for(var U=B.b2.arbiters,H=null,V=U.head;null!=V;){if(V.elt==B){var W,X;null==H?(X=(W=U.head).next,U.head=X,null==U.head&&(U.pushmod=!0)):(X=(W=H.next).next,null==(H.next=X)&&(U.pushmod=!0));var q=W;q.elt=null,q.next=Zo.zpp_pool,Zo.zpp_pool=q,U.modified=!0,U.length--,U.pushmod=!0;break}V=(H=V).next}null!=B.pair&&(B.pair.arb=null,B.pair=null)}B.b1=B.b2=null,B.active=!1,B.intchange=!1,B.next=Ho.zpp_pool,Ho.zpp_pool=B}for(;null!=this.f_arbiters.head;){var Y=this.f_arbiters.pop_unsafe();if(!Y.cleared){for(var Z=Y.b1.arbiters,K=null,J=Z.head;null!=J;){if(J.elt==Y){var Q,$;null==K?($=(Q=Z.head).next,Z.head=$,null==Z.head&&(Z.pushmod=!0)):($=(Q=K.next).next,null==(K.next=$)&&(Z.pushmod=!0));var ee=Q;ee.elt=null,ee.next=Zo.zpp_pool,Zo.zpp_pool=ee,Z.modified=!0,Z.length--,Z.pushmod=!0;break}J=(K=J).next}for(var te=Y.b2.arbiters,ie=null,ne=te.head;null!=ne;){if(ne.elt==Y){var re,oe;null==ie?(oe=(re=te.head).next,te.head=oe,null==te.head&&(te.pushmod=!0)):(oe=(re=ie.next).next,null==(ie.next=oe)&&(te.pushmod=!0));var ae=re;ae.elt=null,ae.next=Zo.zpp_pool,Zo.zpp_pool=ae,te.modified=!0,te.length--,te.pushmod=!0;break}ne=(ie=ne).next}null!=Y.pair&&(Y.pair.arb=null,Y.pair=null)}Y.b1=Y.b2=null,Y.active=!1,Y.intchange=!1,Y.next=Vo.zpp_pool,(Vo.zpp_pool=Y).pre_dt=-1}for(this.bphase.clear();null!=this.bodies.head;){var se=this.bodies.pop_unsafe();if(null!=se.component){var pe=se.component.island;if(null!=pe){for(;null!=pe.comps.head;){var le=pe.comps.pop_unsafe();le.sleeping=!1,le.island=null,(le.parent=le).rank=0}pe.next=ni.zpp_pool,ni.zpp_pool=pe}}se.removedFromSpace(),se.space=null}for(;null!=this.constraints.head;){var he=this.constraints.pop_unsafe();if(null!=he.component){var ue=he.component.island;if(null!=ue){for(;null!=ue.comps.head;){var de=ue.comps.pop_unsafe();de.sleeping=!1,de.island=null,(de.parent=de).rank=0}ue.next=ni.zpp_pool,ni.zpp_pool=ue}}he.removedFromSpace(),he.space=null}this.kinematics.clear();for(var ce=new fi;null!=this.compounds.head;)ce.add(this.compounds.pop_unsafe());for(;null!=ce.head;){var _e=ce.pop_unsafe();_e.removedFromSpace(),_e.space=null;for(var ye=_e.bodies.head;null!=ye;){var xe=ye.elt;if(null!=xe.component){var me=xe.component.island;if(null!=me){for(;null!=me.comps.head;){var fe=me.comps.pop_unsafe();fe.sleeping=!1,fe.island=null,(fe.parent=fe).rank=0}me.next=ni.zpp_pool,ni.zpp_pool=me}}xe.removedFromSpace(),xe.space=null,ye=ye.next}for(var ve=_e.constraints.head;null!=ve;){var ge=ve.elt;if(null!=ge.component){var ze=ge.component.island;if(null!=ze){for(;null!=ze.comps.head;){var be=ze.comps.pop_unsafe();be.sleeping=!1,be.island=null,(be.parent=be).rank=0}ze.next=ni.zpp_pool,ni.zpp_pool=ze}}ge.removedFromSpace(),ge.space=null,ve=ve.next}for(var we=_e.compounds.head;null!=we;)ce.add(we.elt),we=we.next}this.staticsleep.clear(),this.live.clear(),this.live_constraints.clear(),this.stamp=0,this.time=0,this.mrca1.clear(),this.mrca2.clear(),this.prelisteners.clear(),this.cbsets.clear()},si.prototype.bodies_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(e),this.addBody(e.zpp_inner),!0)},si.prototype.bodies_subber=function(e){this.remBody(e.zpp_inner)},si.prototype.compounds_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_compounds.remove(e),this.addCompound(e.zpp_inner),!0)},si.prototype.compounds_subber=function(e){this.remCompound(e.zpp_inner)},si.prototype.constraints_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(e),this.addConstraint(e.zpp_inner),!0)},si.prototype.constraints_subber=function(e){this.remConstraint(e.zpp_inner)},si.prototype.listeners_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(e),this.addListener(e.zpp_inner),!0)},si.prototype.listeners_subber=function(e){this.remListener(e.zpp_inner)},si.prototype.revoke_listener=function(e){},si.prototype.unrevoke_listener=function(e){},si.prototype.addListener=function(e){e.space=this,e.addedToSpace()},si.prototype.remListener=function(e){e.removedFromSpace(),e.space=null},si.prototype.add_callbackset=function(e){var t,i=e.int1.cbsets;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var n=t;n.next=i.head,i.head=n,i.modified=!0,i.length++;var r,o=e.int2.cbsets;null==Ni.zpp_pool?r=new Ni:(r=Ni.zpp_pool,Ni.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s=this.callbackset_list;e._inuse=!0,e.next=s.next,s.next=e,s.modified=!0,s.length++},si.prototype.remove_callbackset=function(e){e.lazydel=!0;for(var t=e.int1.cbsets,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Ni.zpp_pool,Ni.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}for(var s=e.int2.cbsets,p=null,l=s.head;null!=l;){if(l.elt==e){var h,u;null==p?(u=(h=s.head).next,s.head=u,null==s.head&&(s.pushmod=!0)):(u=(h=p.next).next,null==(p.next=u)&&(s.pushmod=!0));var d=h;d.elt=null,d.next=Ni.zpp_pool,Ni.zpp_pool=d,s.modified=!0,s.length--,s.pushmod=!0;break}l=(p=l).next}},si.prototype.transmitType=function(e,t){e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1)),2==e.type?this.live.remove(e):3==e.type?(this.kinematics.remove(e),this.staticsleep.remove(e)):1==e.type&&this.staticsleep.remove(e),e.type=t,3==e.type&&this.kinematics.add(e),1==e.type&&this.static_validation(e),e.component.sleeping=!0,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0))},si.prototype.added_shape=function(e,t){if(null==t&&(t=!1),!t){var i=e.body;i.world||(i.component.waket=this.stamp+(this.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!1))}this.bphase.insert(e),e.addedToSpace()},si.prototype.removed_shape=function(e,t){null==t&&(t=!1);var i=e.body;t||i.wake();for(var n=null,r=i.arbiters.head;null!=r;){var o=r.elt;if(o.ws1!=e&&o.ws2!=e)r=(n=r).next;else{if(0!=o.present){this.MRCA_chains(o.ws1,o.ws2);for(var a=this.mrca1.head;null!=a;){for(var s=a.elt,p=this.mrca2.head;null!=p;){var l=p.elt,h=s.cbSet,u=l.cbSet;h.validate(),u.validate();for(var d,c=null,_=(h.cbpairs.length<u.cbpairs.length?h.cbpairs:u.cbpairs).head;null!=_;){var y=_.elt;if(y.a==h&&y.b==u||y.a==u&&y.b==h){c=y;break}_=_.next}if(null==c)null==No.zpp_pool?d=new No:(d=No.zpp_pool,No.zpp_pool=d.next,d.next=null),d.zip_listeners=!0,jo.setlt(h,u)?(d.a=h,d.b=u):(d.a=u,d.b=h),c=d,h.cbpairs.add(c),u!=h&&u.cbpairs.add(c);if(c.zip_listeners&&(c.zip_listeners=!1,c.__validate()),null!=c.listeners.head){var x=qo.get(s,l);x.remove_arb(o),o.present--;for(var m,f=null,v=(h.cbpairs.length<u.cbpairs.length?h.cbpairs:u.cbpairs).head;null!=v;){var g=v.elt;if(g.a==h&&g.b==u||g.a==u&&g.b==h){f=g;break}v=v.next}if(null==f)null==No.zpp_pool?m=new No:(m=No.zpp_pool,No.zpp_pool=m.next,m.next=null),m.zip_listeners=!0,jo.setlt(h,u)?(m.a=h,m.b=u):(m.a=u,m.b=h),f=m,h.cbpairs.add(f),u!=h&&u.cbpairs.add(f);f.zip_listeners&&(f.zip_listeners=!1,f.__validate());for(var z=f.listeners.head;null!=z;){var b=z.elt;if(1==b.event&&0!=(b.itype&o.type)&&x.empty_arb(b.itype)){var w=this.push_callback(b);w.event=1;var S,C=x.int1,M=x.int2,P=b.options1,k=C.cbTypes;if(P.nonemptyintersection(k,P.includes)&&!P.nonemptyintersection(k,P.excludes)){var T=b.options2,G=M.cbTypes;S=!!T.nonemptyintersection(G,T.includes)&&!T.nonemptyintersection(G,T.excludes)}else S=!1;S?(w.int1=C,w.int2=M):(w.int1=M,w.int2=C),w.set=x}z=z.next}null==x.arbiters.head&&this.remove_callbackset(x),p=p.next}else p=p.next}a=a.next}}if(o.b1!=i&&2==o.b1.type){var O=o.b1;O.world||(O.component.waket=this.stamp+(this.midstep?0:1),3==O.type&&(O.kinematicDelaySleep=!0),O.component.sleeping&&this.really_wake(O,!1))}if(o.b2!=i&&2==o.b2.type){var A=o.b2;A.world||(A.component.waket=this.stamp+(this.midstep?0:1),3==A.type&&(A.kinematicDelaySleep=!0),A.component.sleeping&&this.really_wake(A,!1))}if(o.cleared=!0,null==i||o.b2==i)for(var E=o.b1.arbiters,I=null,B=E.head;null!=B;){if(B.elt==o){var L,D;null==I?(D=(L=E.head).next,E.head=D,null==E.head&&(E.pushmod=!0)):(D=(L=I.next).next,null==(I.next=D)&&(E.pushmod=!0));var R=L;R.elt=null,R.next=Zo.zpp_pool,Zo.zpp_pool=R,E.modified=!0,E.length--,E.pushmod=!0;break}B=(I=B).next}if(null==i||o.b1==i)for(var F=o.b2.arbiters,j=null,N=F.head;null!=N;){if(N.elt==o){var U,H;null==j?(H=(U=F.head).next,F.head=H,null==F.head&&(F.pushmod=!0)):(H=(U=j.next).next,null==(j.next=H)&&(F.pushmod=!0));var V=U;V.elt=null,V.next=Zo.zpp_pool,Zo.zpp_pool=V,F.modified=!0,F.length--,F.pushmod=!0;break}N=(j=N).next}null!=o.pair&&(o.pair.arb=null,o.pair=null),o.active=!1,this.f_arbiters.modified=!0,r=i.arbiters.erase(n)}}this.bphase.remove(e),e.removedFromSpace()},si.prototype.addConstraint=function(e){e.space=this,e.addedToSpace(),e.active&&(e.component.sleeping=!0,this.wake_constraint(e,!0))},si.prototype.remConstraint=function(e){e.active&&(this.wake_constraint(e,!0),this.live_constraints.remove(e)),e.removedFromSpace(),e.space=null},si.prototype.addCompound=function(e){e.space=this,e.addedToSpace();for(var t=e.bodies.head;null!=t;)this.addBody(t.elt),t=t.next;for(var i=e.constraints.head;null!=i;)this.addConstraint(i.elt),i=i.next;for(var n=e.compounds.head;null!=n;)this.addCompound(n.elt),n=n.next},si.prototype.remCompound=function(e){for(var t=e.bodies.head;null!=t;)this.remBody(t.elt),t=t.next;for(var i=e.constraints.head;null!=i;)this.remConstraint(i.elt),i=i.next;for(var n=e.compounds.head;null!=n;)this.remCompound(n.elt),n=n.next;e.removedFromSpace(),e.space=null},si.prototype.addBody=function(e,t){null==t&&(t=-1),e.space=this,e.addedToSpace(),e.component.sleeping=!0,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0));for(var i=e.shapes.head;null!=i;){var n=i.elt;this.bphase.insert(n),n.addedToSpace(),i=i.next}1==e.type?this.static_validation(e):2!=e.type&&3!=t&&this.kinematics.add(e)},si.prototype.remBody=function(e,t){null==t&&(t=-1),1==e.type?(e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.staticsleep.remove(e)):2==e.type?(e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.live.remove(e)):(3!=t&&this.kinematics.remove(e),e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.staticsleep.remove(e));for(var i=e.shapes.head;null!=i;)this.removed_shape(i.elt,!0),i=i.next;e.removedFromSpace(),e.space=null},si.prototype.shapesUnderPoint=function(e,t,i,n){return this.bphase.shapesUnderPoint(e,t,i,n)},si.prototype.bodiesUnderPoint=function(e,t,i,n){return this.bphase.bodiesUnderPoint(e,t,i,n)},si.prototype.shapesInAABB=function(e,t,i,n,r){return this.bphase.shapesInAABB(e.zpp_inner,t,i,n,r)},si.prototype.bodiesInAABB=function(e,t,i,n,r){return this.bphase.bodiesInAABB(e.zpp_inner,t,i,n,r)},si.prototype.shapesInCircle=function(e,t,i,n,r){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=e.zpp_inner;return null!=s._validate&&s._validate(),this.bphase.shapesInCircle(a,e.zpp_inner.y,t,i,n,r)},si.prototype.bodiesInCircle=function(e,t,i,n,r){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=e.zpp_inner;return null!=s._validate&&s._validate(),this.bphase.bodiesInCircle(a,e.zpp_inner.y,t,i,n,r)},si.prototype.shapesInShape=function(e,t,i,n){return this.bphase.shapesInShape(e,t,i,n)},si.prototype.bodiesInShape=function(e,t,i,n){return this.bphase.bodiesInShape(e,t,i,n)},si.prototype.rayCast=function(e,t,i){return this.bphase.rayCast(e.zpp_inner,t,null==i?null:i.zpp_inner)},si.prototype.rayMultiCast=function(e,t,i,n){return this.bphase.rayMultiCast(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},si.prototype.convexShapeList=null,si.prototype.convexCast=function(e,t,i,n){var r;if(null==Ht.zpp_pool?r=new Ht:(r=Ht.zpp_pool,Ht.zpp_pool=r.next,r.next=null),r.failed=!1,r.s1=r.s2=null,r.arbiter=null,0==e.type){var o=e.circle;if(o.zip_worldCOM&&null!=o.body){if(o.zip_worldCOM=!1,o.zip_localCOM){if(o.zip_localCOM=!1,1==o.type){var a=o.polygon;if(null==a.lverts.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;else if(null==a.lverts.next.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y,a.localCOMx+=a.lverts.next.next.x,a.localCOMy+=a.lverts.next.next.y,a.localCOMx*=.5,a.localCOMy*=.5;else{a.localCOMx=0;var s=a.localCOMy=0,p=a.lverts.next,l=p,h=p=p.next;for(p=p.next;null!=p;){var u=p;s+=h.x*(u.y-l.y);var d=u.y*h.x-u.x*h.y;a.localCOMx+=(h.x+u.x)*d,a.localCOMy+=(h.y+u.y)*d,l=h,h=u,p=p.next}var c=p=a.lverts.next;s+=h.x*(c.y-l.y);var _=c.y*h.x-c.x*h.y;a.localCOMx+=(h.x+c.x)*_,a.localCOMy+=(h.y+c.y)*_,l=h;var y=p=p.next;s+=c.x*(y.y-l.y);var x=y.y*c.x-y.x*c.y;a.localCOMx+=(c.x+y.x)*x,a.localCOMy+=(c.y+y.y)*x;var m=s=1/(3*s);a.localCOMx*=m,a.localCOMy*=m}}null!=o.wrap_localCOM&&(o.wrap_localCOM.zpp_inner.x=o.localCOMx,o.wrap_localCOM.zpp_inner.y=o.localCOMy)}var f=o.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),o.worldCOMx=o.body.posx+(o.body.axisy*o.localCOMx-o.body.axisx*o.localCOMy),o.worldCOMy=o.body.posy+(o.localCOMx*o.body.axisx+o.localCOMy*o.body.axisy)}}else{var v=e.polygon;if(v.zip_gaxi&&null!=v.body){v.zip_gaxi=!1,v.validate_laxi();var g=v.body;if(g.zip_axis&&(g.zip_axis=!1,g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot)),v.zip_gverts&&null!=v.body){v.zip_gverts=!1,v.validate_lverts();var z=v.body;z.zip_axis&&(z.zip_axis=!1,z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot));for(var b=v.lverts.next,w=v.gverts.next;null!=w;){var S=w,C=b;b=b.next,S.x=v.body.posx+(v.body.axisy*C.x-v.body.axisx*C.y),S.y=v.body.posy+(C.x*v.body.axisx+C.y*v.body.axisy),w=w.next}}var M=v.edges.head,P=v.gverts.next,k=P;for(P=P.next;null!=P;){var T=P,G=M.elt;M=M.next,G.gp0=k,G.gp1=T,G.gnormx=v.body.axisy*G.lnormx-v.body.axisx*G.lnormy,G.gnormy=G.lnormx*v.body.axisx+G.lnormy*v.body.axisy,G.gprojection=v.body.posx*G.gnormx+v.body.posy*G.gnormy+G.lprojection,null!=G.wrap_gnorm&&(G.wrap_gnorm.zpp_inner.x=G.gnormx,G.wrap_gnorm.zpp_inner.y=G.gnormy),G.tp0=G.gp0.y*G.gnormx-G.gp0.x*G.gnormy,G.tp1=G.gp1.y*G.gnormx-G.gp1.x*G.gnormy,k=T,P=P.next}var O=M.elt;O.gp0=k,O.gp1=v.gverts.next,O.gnormx=v.body.axisy*O.lnormx-v.body.axisx*O.lnormy,O.gnormy=O.lnormx*v.body.axisx+O.lnormy*v.body.axisy,O.gprojection=v.body.posx*O.gnormx+v.body.posy*O.gnormy+O.lprojection,null!=O.wrap_gnorm&&(O.wrap_gnorm.zpp_inner.x=O.gnormx,O.wrap_gnorm.zpp_inner.y=O.gnormy),O.tp0=O.gp0.y*O.gnormx-O.gp0.x*O.gnormy,O.tp1=O.gp1.y*O.gnormx-O.gp1.x*O.gnormy}}var A=e.body,E=A.posx,I=A.posy;A.sweepTime=0,A.sweep_angvel=A.angvel;var B=t-A.sweepTime;if(0!=B&&(A.sweepTime=t,A.posx+=A.velx*B,A.posy+=A.vely*B,0!=A.angvel)){var L=A.sweep_angvel*B;if(A.rot+=L,1e-4<L*L)A.axisx=Math.sin(A.rot),A.axisy=Math.cos(A.rot);else{var D=L*L,R=1-.5*D,F=1-D*D/8,j=(R*A.axisx+L*A.axisy)*F;A.axisy=(R*A.axisy-L*A.axisx)*F,A.axisx=j}}var N=A.posx,U=A.posy;e.validate_sweepRadius();var H,V=e.sweepRadius;null==Oo.zpp_pool?H=new Oo:(H=Oo.zpp_pool,Oo.zpp_pool=H.next,H.next=null),H.minx=(E<N?E:N)-V,H.maxx=(N<E?E:N)+V,H.miny=(I<U?I:U)-V,H.maxy=(U<I?I:U)+V;var W=this.convexShapeList=this.bphase.shapesInAABB(H,!1,!1,null==i?null:i.zpp_inner,this.convexShapeList),X=H;null!=X.outer&&(X.outer.zpp_inner=null,X.outer=null),X.wrap_min=X.wrap_max=null,X._invalidate=null,X._validate=null,X.next=Oo.zpp_pool,Oo.zpp_pool=X;var q=0,Y=0,Z=Y=q=0,K=0;K=Z=0;var J=null,Q=t+1;W.zpp_inner.valmod();for(var $=ht.get(W);;){$.zpp_inner.zpp_inner.valmod();var ee=$.zpp_inner;ee.zpp_inner.valmod(),ee.zpp_inner.zip_length&&(ee.zpp_inner.zip_length=!1,ee.zpp_inner.user_length=ee.zpp_inner.inner.length);var te=ee.zpp_inner.user_length;if($.zpp_critical=!0,!($.zpp_i<te||($.zpp_next=ht.zpp_pool,(ht.zpp_pool=$).zpp_inner=null,!1)))break;$.zpp_critical=!1;var ie=$.zpp_inner.at($.zpp_i++);if(ie!=e.outer&&(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null)!=A.outer){if(r.s1=e,r.s2=ie.zpp_inner,n){ie.zpp_inner.validate_sweepRadius(),(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,Vt.dynamicSweep(r,t,0,0,!0);var ne=(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner,re=0-ne.sweepTime;if(0!=re&&(ne.sweepTime=0,ne.posx+=ne.velx*re,ne.posy+=ne.vely*re,0!=ne.angvel)){var oe=ne.sweep_angvel*re;if(ne.rot+=oe,1e-4<oe*oe)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var ae=oe*oe,se=1-.5*ae,pe=1-ae*ae/8,le=(se*ne.axisx+oe*ne.axisy)*pe;ne.axisy=(se*ne.axisy-oe*ne.axisx)*pe,ne.axisx=le}}var he=(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner,ue=ie.zpp_inner;if(0==ue.type)ue.worldCOMx=he.posx+(he.axisy*ue.localCOMx-he.axisx*ue.localCOMy),ue.worldCOMy=he.posy+(ue.localCOMx*he.axisx+ue.localCOMy*he.axisy);else{for(var de=ue.polygon,ce=de.lverts.next,_e=de.gverts.next;null!=_e;){var ye=_e,xe=ce;ce=ce.next,ye.x=he.posx+(he.axisy*xe.x-he.axisx*xe.y),ye.y=he.posy+(xe.x*he.axisx+xe.y*he.axisy),_e=_e.next}var me=de.edges.head,fe=de.gverts.next,ve=fe;for(fe=fe.next;null!=fe;){var ge=fe,ze=me.elt;me=me.next,ze.gnormx=he.axisy*ze.lnormx-he.axisx*ze.lnormy,ze.gnormy=ze.lnormx*he.axisx+ze.lnormy*he.axisy,ze.gprojection=he.posx*ze.gnormx+he.posy*ze.gnormy+ze.lprojection,ze.tp0=ve.y*ze.gnormx-ve.x*ze.gnormy,ze.tp1=ge.y*ze.gnormx-ge.x*ze.gnormy,ve=ge,fe=fe.next}var be=de.gverts.next,we=me.elt;we.gnormx=he.axisy*we.lnormx-he.axisx*we.lnormy,we.gnormy=we.lnormx*he.axisx+we.lnormy*he.axisy,we.gprojection=he.posx*we.gnormx+he.posy*we.gnormy+we.lprojection,we.tp0=ve.y*we.gnormx-ve.x*we.gnormy,we.tp1=be.y*we.gnormx-be.x*we.gnormy}}else Vt.staticSweep(r,t,0,0);r.toi*=t,0<r.toi&&r.toi<Q&&(Q=r.toi,q=r.axis.x,Y=r.axis.y,Z=r.c2.x,K=r.c2.y,J=ie)}}W.clear();var Se=r;Se.next=Ht.zpp_pool,Ht.zpp_pool=Se;var Ce=0-A.sweepTime;if(0!=Ce&&(A.sweepTime=0,A.posx+=A.velx*Ce,A.posy+=A.vely*Ce,0!=A.angvel)){var Me=A.sweep_angvel*Ce;if(A.rot+=Me,1e-4<Me*Me)A.axisx=Math.sin(A.rot),A.axisy=Math.cos(A.rot);else{var Pe=Me*Me,ke=1-.5*Pe,Te=1-Pe*Pe/8,Ge=(ke*A.axisx+Me*A.axisy)*Te;A.axisy=(ke*A.axisy-Me*A.axisx)*Te,A.axisx=Ge}}if(0==e.type)e.worldCOMx=A.posx+(A.axisy*e.localCOMx-A.axisx*e.localCOMy),e.worldCOMy=A.posy+(e.localCOMx*A.axisx+e.localCOMy*A.axisy);else{for(var Oe=e.polygon,Ae=Oe.lverts.next,Ee=Oe.gverts.next;null!=Ee;){var Ie=Ee,Be=Ae;Ae=Ae.next,Ie.x=A.posx+(A.axisy*Be.x-A.axisx*Be.y),Ie.y=A.posy+(Be.x*A.axisx+Be.y*A.axisy),Ee=Ee.next}var Le=Oe.edges.head,De=Oe.gverts.next,Re=De;for(De=De.next;null!=De;){var Fe=De,je=Le.elt;Le=Le.next,je.gnormx=A.axisy*je.lnormx-A.axisx*je.lnormy,je.gnormy=je.lnormx*A.axisx+je.lnormy*A.axisy,je.gprojection=A.posx*je.gnormx+A.posy*je.gnormy+je.lprojection,je.tp0=Re.y*je.gnormx-Re.x*je.gnormy,je.tp1=Fe.y*je.gnormx-Fe.x*je.gnormy,Re=Fe,De=De.next}var Ne=Oe.gverts.next,Ue=Le.elt;Ue.gnormx=A.axisy*Ue.lnormx-A.axisx*Ue.lnormy,Ue.gnormy=Ue.lnormx*A.axisx+Ue.lnormy*A.axisy,Ue.gprojection=A.posx*Ue.gnormx+A.posy*Ue.gnormy+Ue.lprojection,Ue.tp0=Re.y*Ue.gnormx-Re.x*Ue.gnormy,Ue.tp1=Ne.y*Ue.gnormx-Ne.x*Ue.gnormy}if(Q<=t){var He,Ve=-q,We=-Y;if(null==jn.poolVec2?He=new lt:(He=jn.poolVec2,jn.poolVec2=He.zpp_pool,He.zpp_pool=null),null==He.zpp_inner){var Xe;null==ep.zpp_pool?Xe=new ep:(Xe=ep.zpp_pool,ep.zpp_pool=Xe.next,Xe.next=null),Xe.weak=!1,Xe._immutable=!1,Xe.x=Ve,Xe.y=We,He.zpp_inner=Xe,He.zpp_inner.outer=He}else{var qe,Ye=He.zpp_inner;if(null!=Ye._validate&&Ye._validate(),He.zpp_inner.x==Ve){var Ze=He.zpp_inner;null!=Ze._validate&&Ze._validate(),qe=He.zpp_inner.y==We}else qe=!1;if(!qe){He.zpp_inner.x=Ve,He.zpp_inner.y=We;var Ke=He.zpp_inner;null!=Ke._invalidate&&Ke._invalidate(Ke)}}He.zpp_inner.weak=!1;var Je,Qe=He;if(null==jn.poolVec2?Je=new lt:(Je=jn.poolVec2,jn.poolVec2=Je.zpp_pool,Je.zpp_pool=null),null==Je.zpp_inner){var $e;null==ep.zpp_pool?$e=new ep:($e=ep.zpp_pool,ep.zpp_pool=$e.next,$e.next=null),$e.weak=!1,$e._immutable=!1,$e.x=Z,$e.y=K,Je.zpp_inner=$e,Je.zpp_inner.outer=Je}else{var et,tt=Je.zpp_inner;if(null!=tt._validate&&tt._validate(),Je.zpp_inner.x==Z){var it=Je.zpp_inner;null!=it._validate&&it._validate(),et=Je.zpp_inner.y==K}else et=!1;if(!et){Je.zpp_inner.x=Z,Je.zpp_inner.y=K;var nt=Je.zpp_inner;null!=nt._invalidate&&nt._invalidate(nt)}}return Je.zpp_inner.weak=!1,bt.getConvex(Qe,Je,Q,J)}return null},si.prototype.prepareCast=function(e){if(0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var p=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*p,i.localCOMy+=(a.y+s.y)*p,o=a,a=s,r=r.next}var l=r=i.lverts.next;n+=a.x*(l.y-o.y);var h=l.y*a.x-l.x*a.y;i.localCOMx+=(a.x+l.x)*h,i.localCOMy+=(a.y+l.y)*h,o=a;var u=r=r.next;n+=l.x*(u.y-o.y);var d=u.y*l.x-u.x*l.y;i.localCOMx+=(l.x+u.x)*d,i.localCOMy+=(l.y+u.y)*d;var c=n=1/(3*n);i.localCOMx*=c,i.localCOMy*=c}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}}else{var y=e.polygon;if(y.zip_gaxi&&null!=y.body){y.zip_gaxi=!1,y.validate_laxi();var x=y.body;if(x.zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot)),y.zip_gverts&&null!=y.body){y.zip_gverts=!1,y.validate_lverts();var m=y.body;m.zip_axis&&(m.zip_axis=!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot));for(var f=y.lverts.next,v=y.gverts.next;null!=v;){var g=v,z=f;f=f.next,g.x=y.body.posx+(y.body.axisy*z.x-y.body.axisx*z.y),g.y=y.body.posy+(z.x*y.body.axisx+z.y*y.body.axisy),v=v.next}}var b=y.edges.head,w=y.gverts.next,S=w;for(w=w.next;null!=w;){var C=w,M=b.elt;b=b.next,M.gp0=S,M.gp1=C,M.gnormx=y.body.axisy*M.lnormx-y.body.axisx*M.lnormy,M.gnormy=M.lnormx*y.body.axisx+M.lnormy*y.body.axisy,M.gprojection=y.body.posx*M.gnormx+y.body.posy*M.gnormy+M.lprojection,null!=M.wrap_gnorm&&(M.wrap_gnorm.zpp_inner.x=M.gnormx,M.wrap_gnorm.zpp_inner.y=M.gnormy),M.tp0=M.gp0.y*M.gnormx-M.gp0.x*M.gnormy,M.tp1=M.gp1.y*M.gnormx-M.gp1.x*M.gnormy,S=C,w=w.next}var P=b.elt;P.gp0=S,P.gp1=y.gverts.next,P.gnormx=y.body.axisy*P.lnormx-y.body.axisx*P.lnormy,P.gnormy=P.lnormx*y.body.axisx+P.lnormy*y.body.axisy,P.gprojection=y.body.posx*P.gnormx+y.body.posy*P.gnormy+P.lprojection,null!=P.wrap_gnorm&&(P.wrap_gnorm.zpp_inner.x=P.gnormx,P.wrap_gnorm.zpp_inner.y=P.gnormy),P.tp0=P.gp0.y*P.gnormx-P.gp0.x*P.gnormy,P.tp1=P.gp1.y*P.gnormx-P.gp1.x*P.gnormy}}},si.prototype.convexMultiCast=function(e,t,i,n,r){var o;if(null==Ht.zpp_pool?o=new Ht:(o=Ht.zpp_pool,Ht.zpp_pool=o.next,o.next=null),o.failed=!1,o.s1=o.s2=null,o.arbiter=null,0==e.type){var a=e.circle;if(a.zip_worldCOM&&null!=a.body){if(a.zip_worldCOM=!1,a.zip_localCOM){if(a.zip_localCOM=!1,1==a.type){var s=a.polygon;if(null==s.lverts.next.next)s.localCOMx=s.lverts.next.x,s.localCOMy=s.lverts.next.y;else if(null==s.lverts.next.next.next)s.localCOMx=s.lverts.next.x,s.localCOMy=s.lverts.next.y,s.localCOMx+=s.lverts.next.next.x,s.localCOMy+=s.lverts.next.next.y,s.localCOMx*=.5,s.localCOMy*=.5;else{s.localCOMx=0;var p=s.localCOMy=0,l=s.lverts.next,h=l,u=l=l.next;for(l=l.next;null!=l;){var d=l;p+=u.x*(d.y-h.y);var c=d.y*u.x-d.x*u.y;s.localCOMx+=(u.x+d.x)*c,s.localCOMy+=(u.y+d.y)*c,h=u,u=d,l=l.next}var _=l=s.lverts.next;p+=u.x*(_.y-h.y);var y=_.y*u.x-_.x*u.y;s.localCOMx+=(u.x+_.x)*y,s.localCOMy+=(u.y+_.y)*y,h=u;var x=l=l.next;p+=_.x*(x.y-h.y);var m=x.y*_.x-x.x*_.y;s.localCOMx+=(_.x+x.x)*m,s.localCOMy+=(_.y+x.y)*m;var f=p=1/(3*p);s.localCOMx*=f,s.localCOMy*=f}}null!=a.wrap_localCOM&&(a.wrap_localCOM.zpp_inner.x=a.localCOMx,a.wrap_localCOM.zpp_inner.y=a.localCOMy)}var v=a.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot)),a.worldCOMx=a.body.posx+(a.body.axisy*a.localCOMx-a.body.axisx*a.localCOMy),a.worldCOMy=a.body.posy+(a.localCOMx*a.body.axisx+a.localCOMy*a.body.axisy)}}else{var g=e.polygon;if(g.zip_gaxi&&null!=g.body){g.zip_gaxi=!1,g.validate_laxi();var z=g.body;if(z.zip_axis&&(z.zip_axis=!1,z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot)),g.zip_gverts&&null!=g.body){g.zip_gverts=!1,g.validate_lverts();var b=g.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));for(var w=g.lverts.next,S=g.gverts.next;null!=S;){var C=S,M=w;w=w.next,C.x=g.body.posx+(g.body.axisy*M.x-g.body.axisx*M.y),C.y=g.body.posy+(M.x*g.body.axisx+M.y*g.body.axisy),S=S.next}}var P=g.edges.head,k=g.gverts.next,T=k;for(k=k.next;null!=k;){var G=k,O=P.elt;P=P.next,O.gp0=T,O.gp1=G,O.gnormx=g.body.axisy*O.lnormx-g.body.axisx*O.lnormy,O.gnormy=O.lnormx*g.body.axisx+O.lnormy*g.body.axisy,O.gprojection=g.body.posx*O.gnormx+g.body.posy*O.gnormy+O.lprojection,null!=O.wrap_gnorm&&(O.wrap_gnorm.zpp_inner.x=O.gnormx,O.wrap_gnorm.zpp_inner.y=O.gnormy),O.tp0=O.gp0.y*O.gnormx-O.gp0.x*O.gnormy,O.tp1=O.gp1.y*O.gnormx-O.gp1.x*O.gnormy,T=G,k=k.next}var A=P.elt;A.gp0=T,A.gp1=g.gverts.next,A.gnormx=g.body.axisy*A.lnormx-g.body.axisx*A.lnormy,A.gnormy=A.lnormx*g.body.axisx+A.lnormy*g.body.axisy,A.gprojection=g.body.posx*A.gnormx+g.body.posy*A.gnormy+A.lprojection,null!=A.wrap_gnorm&&(A.wrap_gnorm.zpp_inner.x=A.gnormx,A.wrap_gnorm.zpp_inner.y=A.gnormy),A.tp0=A.gp0.y*A.gnormx-A.gp0.x*A.gnormy,A.tp1=A.gp1.y*A.gnormx-A.gp1.x*A.gnormy}}var E=e.body,I=E.posx,B=E.posy;E.sweepTime=0,E.sweep_angvel=E.angvel;var L=t-E.sweepTime;if(0!=L&&(E.sweepTime=t,E.posx+=E.velx*L,E.posy+=E.vely*L,0!=E.angvel)){var D=E.sweep_angvel*L;if(E.rot+=D,1e-4<D*D)E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot);else{var R=D*D,F=1-.5*R,j=1-R*R/8,N=(F*E.axisx+D*E.axisy)*j;E.axisy=(F*E.axisy-D*E.axisx)*j,E.axisx=N}}var U=E.posx,H=E.posy;e.validate_sweepRadius();var V,W=e.sweepRadius;null==Oo.zpp_pool?V=new Oo:(V=Oo.zpp_pool,Oo.zpp_pool=V.next,V.next=null),V.minx=(I<U?I:U)-W,V.maxx=(U<I?I:U)+W,V.miny=(B<H?B:H)-W,V.maxy=(H<B?B:H)+W;var X=this.convexShapeList=this.bphase.shapesInAABB(V,!1,!1,null==i?null:i.zpp_inner,this.convexShapeList),q=V;null!=q.outer&&(q.outer.zpp_inner=null,q.outer=null),q.wrap_min=q.wrap_max=null,q._invalidate=null,q._validate=null,q.next=Oo.zpp_pool,Oo.zpp_pool=q;var Y=null==r?new pt:r;X.zpp_inner.valmod();for(var Z=ht.get(X);;){Z.zpp_inner.zpp_inner.valmod();var K=Z.zpp_inner;K.zpp_inner.valmod(),K.zpp_inner.zip_length&&(K.zpp_inner.zip_length=!1,K.zpp_inner.user_length=K.zpp_inner.inner.length);var J=K.zpp_inner.user_length;if(Z.zpp_critical=!0,!(Z.zpp_i<J||(Z.zpp_next=ht.zpp_pool,(ht.zpp_pool=Z).zpp_inner=null,!1)))break;Z.zpp_critical=!1;var Q=Z.zpp_inner.at(Z.zpp_i++);if(Q!=e.outer&&(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null)!=E.outer){if(o.s1=e,o.s2=Q.zpp_inner,n){Q.zpp_inner.validate_sweepRadius(),(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,Vt.dynamicSweep(o,t,0,0,!0);var $=(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner,ee=0-$.sweepTime;if(0!=ee&&($.sweepTime=0,$.posx+=$.velx*ee,$.posy+=$.vely*ee,0!=$.angvel)){var te=$.sweep_angvel*ee;if($.rot+=te,1e-4<te*te)$.axisx=Math.sin($.rot),$.axisy=Math.cos($.rot);else{var ie=te*te,ne=1-.5*ie,re=1-ie*ie/8,oe=(ne*$.axisx+te*$.axisy)*re;$.axisy=(ne*$.axisy-te*$.axisx)*re,$.axisx=oe}}var ae=(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner,se=Q.zpp_inner;if(0==se.type)se.worldCOMx=ae.posx+(ae.axisy*se.localCOMx-ae.axisx*se.localCOMy),se.worldCOMy=ae.posy+(se.localCOMx*ae.axisx+se.localCOMy*ae.axisy);else{for(var pe=se.polygon,le=pe.lverts.next,he=pe.gverts.next;null!=he;){var ue=he,de=le;le=le.next,ue.x=ae.posx+(ae.axisy*de.x-ae.axisx*de.y),ue.y=ae.posy+(de.x*ae.axisx+de.y*ae.axisy),he=he.next}var ce=pe.edges.head,_e=pe.gverts.next,ye=_e;for(_e=_e.next;null!=_e;){var xe=_e,me=ce.elt;ce=ce.next,me.gnormx=ae.axisy*me.lnormx-ae.axisx*me.lnormy,me.gnormy=me.lnormx*ae.axisx+me.lnormy*ae.axisy,me.gprojection=ae.posx*me.gnormx+ae.posy*me.gnormy+me.lprojection,me.tp0=ye.y*me.gnormx-ye.x*me.gnormy,me.tp1=xe.y*me.gnormx-xe.x*me.gnormy,ye=xe,_e=_e.next}var fe=pe.gverts.next,ve=ce.elt;ve.gnormx=ae.axisy*ve.lnormx-ae.axisx*ve.lnormy,ve.gnormy=ve.lnormx*ae.axisx+ve.lnormy*ae.axisy,ve.gprojection=ae.posx*ve.gnormx+ae.posy*ve.gnormy+ve.lprojection,ve.tp0=ye.y*ve.gnormx-ye.x*ve.gnormy,ve.tp1=fe.y*ve.gnormx-fe.x*ve.gnormy}}else Vt.staticSweep(o,t,0,0);if(o.toi*=t,0<o.toi){var ge,ze=-o.axis.x,be=-o.axis.y;if(null==jn.poolVec2?ge=new lt:(ge=jn.poolVec2,jn.poolVec2=ge.zpp_pool,ge.zpp_pool=null),null==ge.zpp_inner){var we;null==ep.zpp_pool?we=new ep:(we=ep.zpp_pool,ep.zpp_pool=we.next,we.next=null),we.weak=!1,we._immutable=!1,we.x=ze,we.y=be,ge.zpp_inner=we,ge.zpp_inner.outer=ge}else{var Se,Ce=ge.zpp_inner;if(null!=Ce._validate&&Ce._validate(),ge.zpp_inner.x==ze){var Me=ge.zpp_inner;null!=Me._validate&&Me._validate(),Se=ge.zpp_inner.y==be}else Se=!1;if(!Se){ge.zpp_inner.x=ze,ge.zpp_inner.y=be;var Pe=ge.zpp_inner;null!=Pe._invalidate&&Pe._invalidate(Pe)}}ge.zpp_inner.weak=!1;var ke,Te=ge,Ge=o.c2.x,Oe=o.c2.y;if(null==jn.poolVec2?ke=new lt:(ke=jn.poolVec2,jn.poolVec2=ke.zpp_pool,ke.zpp_pool=null),null==ke.zpp_inner){var Ae;null==ep.zpp_pool?Ae=new ep:(Ae=ep.zpp_pool,ep.zpp_pool=Ae.next,Ae.next=null),Ae.weak=!1,Ae._immutable=!1,Ae.x=Ge,Ae.y=Oe,ke.zpp_inner=Ae,ke.zpp_inner.outer=ke}else{var Ee,Ie=ke.zpp_inner;if(null!=Ie._validate&&Ie._validate(),ke.zpp_inner.x==Ge){var Be=ke.zpp_inner;null!=Be._validate&&Be._validate(),Ee=ke.zpp_inner.y==Oe}else Ee=!1;if(!Ee){ke.zpp_inner.x=Ge,ke.zpp_inner.y=Oe;var Le=ke.zpp_inner;null!=Le._invalidate&&Le._invalidate(Le)}}ke.zpp_inner.weak=!1;for(var De=bt.getConvex(Te,ke,o.toi,Q),Re=null,Fe=Y.zpp_inner.inner.head;null!=Fe&&!(De.zpp_inner.toiDistance<Fe.elt.zpp_inner.toiDistance);)Fe=(Re=Fe).next;var je,Ne=Y.zpp_inner.inner;null==cn.zpp_pool?je=new cn:(je=cn.zpp_pool,cn.zpp_pool=je.next,je.next=null),je.elt=De;var Ue=je;null==Re?(Ue.next=Ne.head,Ne.head=Ue):(Ue.next=Re.next,Re.next=Ue),Ne.pushmod=Ne.modified=!0,Ne.length++}}}X.clear();var He=o;He.next=Ht.zpp_pool,Ht.zpp_pool=He;var Ve=0-E.sweepTime;if(0!=Ve&&(E.sweepTime=0,E.posx+=E.velx*Ve,E.posy+=E.vely*Ve,0!=E.angvel)){var We=E.sweep_angvel*Ve;if(E.rot+=We,1e-4<We*We)E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot);else{var Xe=We*We,qe=1-.5*Xe,Ye=1-Xe*Xe/8,Ze=(qe*E.axisx+We*E.axisy)*Ye;E.axisy=(qe*E.axisy-We*E.axisx)*Ye,E.axisx=Ze}}if(0==e.type)e.worldCOMx=E.posx+(E.axisy*e.localCOMx-E.axisx*e.localCOMy),e.worldCOMy=E.posy+(e.localCOMx*E.axisx+e.localCOMy*E.axisy);else{for(var Ke=e.polygon,Je=Ke.lverts.next,Qe=Ke.gverts.next;null!=Qe;){var $e=Qe,et=Je;Je=Je.next,$e.x=E.posx+(E.axisy*et.x-E.axisx*et.y),$e.y=E.posy+(et.x*E.axisx+et.y*E.axisy),Qe=Qe.next}var tt=Ke.edges.head,it=Ke.gverts.next,nt=it;for(it=it.next;null!=it;){var rt=it,ot=tt.elt;tt=tt.next,ot.gnormx=E.axisy*ot.lnormx-E.axisx*ot.lnormy,ot.gnormy=ot.lnormx*E.axisx+ot.lnormy*E.axisy,ot.gprojection=E.posx*ot.gnormx+E.posy*ot.gnormy+ot.lprojection,ot.tp0=nt.y*ot.gnormx-nt.x*ot.gnormy,ot.tp1=rt.y*ot.gnormx-rt.x*ot.gnormy,nt=rt,it=it.next}var at=Ke.gverts.next,st=tt.elt;st.gnormx=E.axisy*st.lnormx-E.axisx*st.lnormy,st.gnormy=st.lnormx*E.axisx+st.lnormy*E.axisy,st.gprojection=E.posx*st.gnormx+E.posy*st.gnormy+st.lprojection,st.tp0=nt.y*st.gnormx-nt.x*st.gnormy,st.tp1=at.y*st.gnormx-at.x*st.gnormy}return Y},si.prototype.push_callback=function(e){var t;return null==nt.zpp_pool?t=new nt:(t=nt.zpp_pool,nt.zpp_pool=t.next,t.next=null),this.callbacks.push(t),t.listener=e,t},si.prototype.pre_dt=null,si.prototype.step=function(e,t,i){if(this.time+=e,this.pre_dt=e,this.midstep=!0,this.stamp++,this.validation(),this.bphase.broadphase(this,!0),this.prestep(e),this.sortcontacts){var n=this.c_arbiters_false;if(null!=n.head&&null!=n.head.next){for(var r,o,a,s=n.head,p=null,l=null,h=null,u=null,d=1;;){for(r=0,l=s,p=s=null;null!=l;){for(++r,h=l,o=0,a=d;null!=h&&o<d;)++o,h=h.next;for(;0<o||0<a&&null!=h;)0==o?(h=(u=h).next,--a):0==a||null==h?(l=(u=l).next,--o):!l.elt.active||!h.elt.active||l.elt.oc1.dist<h.elt.oc1.dist?(l=(u=l).next,--o):(h=(u=h).next,--a),null!=p?p.next=u:s=u,p=u;l=h}if(p.next=null,d<<=1,!(1<r))break}n.head=s,n.modified=!0,n.pushmod=!0}}this.updateVel(e),this.warmStart(),this.iterateVel(t);for(var c=this.kinematics.head;null!=c;){var _=c.elt;_.pre_posx=_.posx,_.pre_posy=_.posy,_.pre_rot=_.rot,c=c.next}for(var y=this.live.head;null!=y;){var x=y.elt;x.pre_posx=x.posx,x.pre_posy=x.posy,x.pre_rot=x.rot,y=y.next}this.updatePos(e),this.continuous=!0,this.continuousCollisions(e),this.continuous=!1,this.iteratePos(i);for(var m=this.kinematics.head;null!=m;){var f=m.elt,v=!(f.posx==f.pre_posx&&f.posy==f.pre_posy),g=f.pre_rot!=f.rot;if(v){for(var z=f.shapes.head;null!=z;){var b=z.elt;1==b.type&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi()),b.invalidate_worldCOM(),z=z.next}f.zip_worldCOM=!0}if(g){f.zip_axis=!0;for(var w=f.shapes.head;null!=w;){var S=w.elt;1==S.type&&(S.polygon.invalidate_gverts(),S.polygon.invalidate_gaxi()),S.invalidate_worldCOM(),w=w.next}f.zip_worldCOM=!0}m=m.next}for(var C=this.live.head;null!=C;){var M=C.elt,P=!(M.posx==M.pre_posx&&M.posy==M.pre_posy),k=M.pre_rot!=M.rot;if(P){for(var T=M.shapes.head;null!=T;){var G=T.elt;1==G.type&&(G.polygon.invalidate_gverts(),G.polygon.invalidate_gaxi()),G.invalidate_worldCOM(),T=T.next}M.zip_worldCOM=!0}if(k){M.zip_axis=!0;for(var O=M.shapes.head;null!=O;){var A=O.elt;1==A.type&&(A.polygon.invalidate_gverts(),A.polygon.invalidate_gaxi()),A.invalidate_worldCOM(),O=O.next}M.zip_worldCOM=!0}C=C.next}for(var E=null,I=this.staticsleep.head;null!=I;){var B=I.elt;if(3!=B.type||0==B.velx&&0==B.vely&&0==B.angvel){if(B.kinematicDelaySleep){B.kinematicDelaySleep=!1,I=I.next;continue}B.component.sleeping=!0;var L,D,R=this.staticsleep;null==E?(D=(L=R.head).next,R.head=D,null==R.head&&(R.pushmod=!0)):(D=(L=E.next).next,null==(E.next=D)&&(R.pushmod=!0));var F=L;F.elt=null,F.next=Hi.zpp_pool,Hi.zpp_pool=F,R.modified=!0,R.length--,R.pushmod=!0,I=D}else I=(E=I).next}this.doForests(e),this.sleepArbiters(),this.midstep=!1;for(var j=null,N=this.callbackset_list.next;null!=N;){var U=N;if(null!=U.arbiters.head){var H;H=!0;for(var V=U.arbiters.head;null!=V;){if(!V.elt.sleeping){H=!1;break}V=V.next}for(var W,X=H,q=U.int1.cbSet,Y=U.int2.cbSet,Z=null,K=(q.cbpairs.length<Y.cbpairs.length?q.cbpairs:Y.cbpairs).head;null!=K;){var J=K.elt;if(J.a==q&&J.b==Y||J.a==Y&&J.b==q){Z=J;break}K=K.next}if(null==Z)null==No.zpp_pool?W=new No:(W=No.zpp_pool,No.zpp_pool=W.next,W.next=null),W.zip_listeners=!0,jo.setlt(q,Y)?(W.a=q,W.b=Y):(W.a=Y,W.b=q),Z=W,q.cbpairs.add(Z),Y!=q&&Y.cbpairs.add(Z);Z.zip_listeners&&(Z.zip_listeners=!1,Z.__validate());for(var Q=Z.listeners.head;null!=Q;){var $=Q.elt;if(6==$.event&&(!X||$.allowSleepingCallbacks)&&!U.empty_arb($.itype)){var ee=this.push_callback($);ee.event=6;var te,ie=U.int1,ne=U.int2,re=$.options1,oe=ie.cbTypes;if(re.nonemptyintersection(oe,re.includes)&&!re.nonemptyintersection(oe,re.excludes)){var ae=$.options2,se=ne.cbTypes;te=!!ae.nonemptyintersection(se,ae.includes)&&!ae.nonemptyintersection(se,ae.excludes)}else te=!1;te?(ee.int1=ie,ee.int2=ne):(ee.int1=ne,ee.int2=ie),ee.set=U}Q=Q.next}N=(j=N).next}else{var pe,le,he=this.callbackset_list;null==j?(le=(pe=he.next).next,he.next=le,null==he.next&&(he.pushmod=!0)):(le=(pe=j.next).next,null==(j.next=le)&&(he.pushmod=!0)),pe._inuse=!1,he.modified=!0,he.length--,he.pushmod=!0,N=le,U.int1=U.int2=null,U.id=U.di=-1,U.freed=!0,U.next=Yo.zpp_pool,Yo.zpp_pool=U}}for(;!this.callbacks.empty();){var ue=this.callbacks.pop();0==ue.listener.type?ue.listener.body.handler(ue.wrapper_body()):1==ue.listener.type?ue.listener.constraint.handler(ue.wrapper_con()):2==ue.listener.type&&ue.listener.interaction.handleri(ue.wrapper_int()),ue.int1=ue.int2=null,ue.body=null,ue.constraint=null,(ue.listener=null)!=ue.wrap_arbiters&&(ue.wrap_arbiters.zpp_inner.inner=null),ue.set=null,ue.next=nt.zpp_pool,nt.zpp_pool=ue}},si.prototype.toiEvents=null,si.prototype.continuousCollisions=function(e){var t=2*Math.PI/e;this.bphase.broadphase(this,!1);for(var i=0;i<1&&null!=this.toiEvents.head;){for(var n=null,r=2,o=!1,a=null,s=null,p=this.toiEvents.head;null!=p;){var l=p.elt,h=l.s1.body,u=l.s2.body;if(h.sweepFrozen&&u.sweepFrozen){if(0==l.toi||!$s.testCollide_safe(l.s1,l.s2)){p=this.toiEvents.erase(s),l.next=Ht.zpp_pool,Ht.zpp_pool=l;continue}l.toi=0}if(l.frozen1!=h.sweepFrozen||l.frozen2!=u.sweepFrozen){if(l.kinematic){p=this.toiEvents.erase(s),l.next=Ht.zpp_pool,Ht.zpp_pool=l;continue}if(l.frozen1=h.sweepFrozen,l.frozen2=u.sweepFrozen,l.frozen1){var d=l.s1;l.s1=l.s2,l.s2=d,l.frozen1=!1,l.frozen2=!0}if(Vt.staticSweep(l,e,0,Qs.collisionSlopCCD),l.toi<0){p=this.toiEvents.erase(s),l.next=Ht.zpp_pool,Ht.zpp_pool=l;continue}}0<=l.toi&&(l.toi<r||!o&&l.kinematic)&&(r=(n=l).toi,o=l.kinematic,a=s),p=(s=p).next}if(null==n)break;this.toiEvents.erase(a),i=n.toi;var c=n.s1.body,_=n.s2.body;if(!c.sweepFrozen){var y=i*e,x=y-c.sweepTime;if(0!=x&&(c.sweepTime=y,c.posx+=c.velx*x,c.posy+=c.vely*x,0!=c.angvel)){var m=c.sweep_angvel*x;if(c.rot+=m,1e-4<m*m)c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot);else{var f=m*m,v=1-.5*f,g=1-f*f/8,z=(v*c.axisx+m*c.axisy)*g;c.axisy=(v*c.axisy-m*c.axisx)*g,c.axisx=z}}var b=n.s1;if(0==b.type)b.worldCOMx=c.posx+(c.axisy*b.localCOMx-c.axisx*b.localCOMy),b.worldCOMy=c.posy+(b.localCOMx*c.axisx+b.localCOMy*c.axisy);else{for(var w=b.polygon,S=w.lverts.next,C=w.gverts.next;null!=C;){var M=C,P=S;S=S.next,M.x=c.posx+(c.axisy*P.x-c.axisx*P.y),M.y=c.posy+(P.x*c.axisx+P.y*c.axisy),C=C.next}var k=w.edges.head,T=w.gverts.next,G=T;for(T=T.next;null!=T;){var O=T,A=k.elt;k=k.next,A.gnormx=c.axisy*A.lnormx-c.axisx*A.lnormy,A.gnormy=A.lnormx*c.axisx+A.lnormy*c.axisy,A.gprojection=c.posx*A.gnormx+c.posy*A.gnormy+A.lprojection,A.tp0=G.y*A.gnormx-G.x*A.gnormy,A.tp1=O.y*A.gnormx-O.x*A.gnormy,G=O,T=T.next}var E=w.gverts.next,I=k.elt;I.gnormx=c.axisy*I.lnormx-c.axisx*I.lnormy,I.gnormy=I.lnormx*c.axisx+I.lnormy*c.axisy,I.gprojection=c.posx*I.gnormx+c.posy*I.gnormy+I.lprojection,I.tp0=G.y*I.gnormx-G.x*I.gnormy,I.tp1=E.y*I.gnormx-E.x*I.gnormy}}if(!_.sweepFrozen){var B=i*e,L=B-_.sweepTime;if(0!=L&&(_.sweepTime=B,_.posx+=_.velx*L,_.posy+=_.vely*L,0!=_.angvel)){var D=_.sweep_angvel*L;if(_.rot+=D,1e-4<D*D)_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot);else{var R=D*D,F=1-.5*R,j=1-R*R/8,N=(F*_.axisx+D*_.axisy)*j;_.axisy=(F*_.axisy-D*_.axisx)*j,_.axisx=N}}var U=n.s2;if(0==U.type)U.worldCOMx=_.posx+(_.axisy*U.localCOMx-_.axisx*U.localCOMy),U.worldCOMy=_.posy+(U.localCOMx*_.axisx+U.localCOMy*_.axisy);else{for(var H=U.polygon,V=H.lverts.next,W=H.gverts.next;null!=W;){var X=W,q=V;V=V.next,X.x=_.posx+(_.axisy*q.x-_.axisx*q.y),X.y=_.posy+(q.x*_.axisx+q.y*_.axisy),W=W.next}var Y=H.edges.head,Z=H.gverts.next,K=Z;for(Z=Z.next;null!=Z;){var J=Z,Q=Y.elt;Y=Y.next,Q.gnormx=_.axisy*Q.lnormx-_.axisx*Q.lnormy,Q.gnormy=Q.lnormx*_.axisx+Q.lnormy*_.axisy,Q.gprojection=_.posx*Q.gnormx+_.posy*Q.gnormy+Q.lprojection,Q.tp0=K.y*Q.gnormx-K.x*Q.gnormy,Q.tp1=J.y*Q.gnormx-J.x*Q.gnormy,K=J,Z=Z.next}var $=H.gverts.next,ee=Y.elt;ee.gnormx=_.axisy*ee.lnormx-_.axisx*ee.lnormy,ee.gnormy=ee.lnormx*_.axisx+ee.lnormy*_.axisy,ee.gprojection=_.posx*ee.gnormx+_.posy*ee.gnormy+ee.lprojection,ee.tp0=K.y*ee.gnormx-K.x*ee.gnormy,ee.tp1=$.y*ee.gnormx-$.x*ee.gnormy}}var te=this.narrowPhase(n.s1,n.s2,!0,n.arbiter,!0);if(null==te)null!=n.arbiter&&null!=n.arbiter.pair&&(n.arbiter.pair.arb=null,n.arbiter.pair=null);else if(!this.presteparb(te,e,!0)&&te.type==ln.COL&&te.active&&0!=(1&te.immState)){var ie=te.colarb,ne=ie.nx*ie.c1.jnAcc-ie.ny*ie.c1.jtAcc,re=ie.ny*ie.c1.jnAcc+ie.nx*ie.c1.jtAcc,oe=ie.b1.imass;ie.b1.velx-=ne*oe,ie.b1.vely-=re*oe,ie.b1.angvel-=ie.b1.iinertia*(re*ie.c1.r1x-ne*ie.c1.r1y);var ae=ie.b2.imass;if(ie.b2.velx+=ne*ae,ie.b2.vely+=re*ae,ie.b2.angvel+=ie.b2.iinertia*(re*ie.c1.r2x-ne*ie.c1.r2y),ie.hc2){var se=ie.nx*ie.c2.jnAcc-ie.ny*ie.c2.jtAcc,pe=ie.ny*ie.c2.jnAcc+ie.nx*ie.c2.jtAcc,le=ie.b1.imass;ie.b1.velx-=se*le,ie.b1.vely-=pe*le,ie.b1.angvel-=ie.b1.iinertia*(pe*ie.c2.r1x-se*ie.c2.r1y);var he=ie.b2.imass;ie.b2.velx+=se*he,ie.b2.vely+=pe*he,ie.b2.angvel+=ie.b2.iinertia*(pe*ie.c2.r2x-se*ie.c2.r2y)}ie.b2.angvel+=ie.jrAcc*ie.b2.iinertia,ie.b1.angvel-=ie.jrAcc*ie.b1.iinertia;var ue,de,ce,_e,ye,xe,me=te.colarb,fe=me.k1x+me.b2.velx-me.c1.r2y*me.b2.angvel-(me.b1.velx-me.c1.r1y*me.b1.angvel),ve=me.k1y+me.b2.vely+me.c1.r2x*me.b2.angvel-(me.b1.vely+me.c1.r1x*me.b1.angvel);if(ce=(ve*me.nx-fe*me.ny+me.surfacex)*me.c1.tMass,(_e=me.c1.friction*me.c1.jnAcc)<(xe=(ye=me.c1.jtAcc)-ce)?xe=_e:xe<-_e&&(xe=-_e),ce=xe-ye,me.c1.jtAcc=xe,ue=-me.ny*ce,de=me.nx*ce,me.b2.velx+=ue*me.b2.imass,me.b2.vely+=de*me.b2.imass,me.b1.velx-=ue*me.b1.imass,me.b1.vely-=de*me.b1.imass,me.b2.angvel+=me.rt1b*ce*me.b2.iinertia,me.b1.angvel-=me.rt1a*ce*me.b1.iinertia,me.hc2){var ge=me.k2x+me.b2.velx-me.c2.r2y*me.b2.angvel-(me.b1.velx-me.c2.r1y*me.b1.angvel),ze=me.k2y+me.b2.vely+me.c2.r2x*me.b2.angvel-(me.b1.vely+me.c2.r1x*me.b1.angvel);ce=(ze*me.nx-ge*me.ny+me.surfacex)*me.c2.tMass,(_e=me.c2.friction*me.c2.jnAcc)<(xe=(ye=me.c2.jtAcc)-ce)?xe=_e:xe<-_e&&(xe=-_e),ce=xe-ye,me.c2.jtAcc=xe,ue=-me.ny*ce,de=me.nx*ce,me.b2.velx+=ue*me.b2.imass,me.b2.vely+=de*me.b2.imass,me.b1.velx-=ue*me.b1.imass,me.b1.vely-=de*me.b1.imass,me.b2.angvel+=me.rt2b*ce*me.b2.iinertia,me.b1.angvel-=me.rt2a*ce*me.b1.iinertia,fe=me.k1x+me.b2.velx-me.c1.r2y*me.b2.angvel-(me.b1.velx-me.c1.r1y*me.b1.angvel),ve=me.k1y+me.b2.vely+me.c1.r2x*me.b2.angvel-(me.b1.vely+me.c1.r1x*me.b1.angvel),ge=me.k2x+me.b2.velx-me.c2.r2y*me.b2.angvel-(me.b1.velx-me.c2.r1y*me.b1.angvel),ze=me.k2y+me.b2.vely+me.c2.r2x*me.b2.angvel-(me.b1.vely+me.c2.r1x*me.b1.angvel);var be=me.c1.jnAcc,we=me.c2.jnAcc,Se=fe*me.nx+ve*me.ny+me.surfacey+me.c1.bounce-(me.Ka*be+me.Kb*we),Ce=ge*me.nx+ze*me.ny+me.surfacey+me.c2.bounce-(me.Kb*be+me.Kc*we),Me=-(me.kMassa*Se+me.kMassb*Ce),Pe=-(me.kMassb*Se+me.kMassc*Ce);0<=Me&&0<=Pe?(Se=Me-be,Ce=Pe-we,me.c1.jnAcc=Me,me.c2.jnAcc=Pe):0<=(Me=-me.c1.nMass*Se)&&0<=me.Kb*Me+Ce?(Se=Me-be,Ce=-we,me.c1.jnAcc=Me,me.c2.jnAcc=0):0<=(Pe=-me.c2.nMass*Ce)&&0<=me.Kb*Pe+Se?(Se=-be,Ce=Pe-we,me.c1.jnAcc=0,me.c2.jnAcc=Pe):0<=Se&&0<=Ce?(Se=-be,Ce=-we,me.c1.jnAcc=me.c2.jnAcc=0):Ce=Se=0,ce=Se+Ce,ue=me.nx*ce,de=me.ny*ce,me.b2.velx+=ue*me.b2.imass,me.b2.vely+=de*me.b2.imass,me.b1.velx-=ue*me.b1.imass,me.b1.vely-=de*me.b1.imass,me.b2.angvel+=(me.rn1b*Se+me.rn2b*Ce)*me.b2.iinertia,me.b1.angvel-=(me.rn1a*Se+me.rn2a*Ce)*me.b1.iinertia}else 0!=me.radius&&(ce=(me.b2.angvel-me.b1.angvel)*me.rMass,_e=me.rfric*me.c1.jnAcc,ye=me.jrAcc,me.jrAcc-=ce,me.jrAcc>_e?me.jrAcc=_e:me.jrAcc<-_e&&(me.jrAcc=-_e),ce=me.jrAcc-ye,me.b2.angvel+=ce*me.b2.iinertia,me.b1.angvel-=ce*me.b1.iinertia),fe=me.k1x+me.b2.velx-me.c1.r2y*me.b2.angvel-(me.b1.velx-me.c1.r1y*me.b1.angvel),ve=me.k1y+me.b2.vely+me.c1.r2x*me.b2.angvel-(me.b1.vely+me.c1.r1x*me.b1.angvel),ce=(me.c1.bounce+(me.nx*fe+me.ny*ve)+me.surfacey)*me.c1.nMass,(xe=(ye=me.c1.jnAcc)-ce)<0&&(xe=0),ce=xe-ye,me.c1.jnAcc=xe,ue=me.nx*ce,de=me.ny*ce,me.b2.velx+=ue*me.b2.imass,me.b2.vely+=de*me.b2.imass,me.b1.velx-=ue*me.b1.imass,me.b1.vely-=de*me.b1.imass,me.b2.angvel+=me.rn1b*ce*me.b2.iinertia,me.b1.angvel-=me.rn1a*ce*me.b1.iinertia;var ke,Te,Ge,Oe,Ae,Ee,Ie=te.colarb,Be=Ie.k1x+Ie.b2.velx-Ie.c1.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c1.r1y*Ie.b1.angvel),Le=Ie.k1y+Ie.b2.vely+Ie.c1.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c1.r1x*Ie.b1.angvel);if(Ge=(Le*Ie.nx-Be*Ie.ny+Ie.surfacex)*Ie.c1.tMass,(Oe=Ie.c1.friction*Ie.c1.jnAcc)<(Ee=(Ae=Ie.c1.jtAcc)-Ge)?Ee=Oe:Ee<-Oe&&(Ee=-Oe),Ge=Ee-Ae,Ie.c1.jtAcc=Ee,ke=-Ie.ny*Ge,Te=Ie.nx*Ge,Ie.b2.velx+=ke*Ie.b2.imass,Ie.b2.vely+=Te*Ie.b2.imass,Ie.b1.velx-=ke*Ie.b1.imass,Ie.b1.vely-=Te*Ie.b1.imass,Ie.b2.angvel+=Ie.rt1b*Ge*Ie.b2.iinertia,Ie.b1.angvel-=Ie.rt1a*Ge*Ie.b1.iinertia,Ie.hc2){var De=Ie.k2x+Ie.b2.velx-Ie.c2.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c2.r1y*Ie.b1.angvel),Re=Ie.k2y+Ie.b2.vely+Ie.c2.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c2.r1x*Ie.b1.angvel);Ge=(Re*Ie.nx-De*Ie.ny+Ie.surfacex)*Ie.c2.tMass,(Oe=Ie.c2.friction*Ie.c2.jnAcc)<(Ee=(Ae=Ie.c2.jtAcc)-Ge)?Ee=Oe:Ee<-Oe&&(Ee=-Oe),Ge=Ee-Ae,Ie.c2.jtAcc=Ee,ke=-Ie.ny*Ge,Te=Ie.nx*Ge,Ie.b2.velx+=ke*Ie.b2.imass,Ie.b2.vely+=Te*Ie.b2.imass,Ie.b1.velx-=ke*Ie.b1.imass,Ie.b1.vely-=Te*Ie.b1.imass,Ie.b2.angvel+=Ie.rt2b*Ge*Ie.b2.iinertia,Ie.b1.angvel-=Ie.rt2a*Ge*Ie.b1.iinertia,Be=Ie.k1x+Ie.b2.velx-Ie.c1.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c1.r1y*Ie.b1.angvel),Le=Ie.k1y+Ie.b2.vely+Ie.c1.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c1.r1x*Ie.b1.angvel),De=Ie.k2x+Ie.b2.velx-Ie.c2.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c2.r1y*Ie.b1.angvel),Re=Ie.k2y+Ie.b2.vely+Ie.c2.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c2.r1x*Ie.b1.angvel);var Fe=Ie.c1.jnAcc,je=Ie.c2.jnAcc,Ne=Be*Ie.nx+Le*Ie.ny+Ie.surfacey+Ie.c1.bounce-(Ie.Ka*Fe+Ie.Kb*je),Ue=De*Ie.nx+Re*Ie.ny+Ie.surfacey+Ie.c2.bounce-(Ie.Kb*Fe+Ie.Kc*je),He=-(Ie.kMassa*Ne+Ie.kMassb*Ue),Ve=-(Ie.kMassb*Ne+Ie.kMassc*Ue);0<=He&&0<=Ve?(Ne=He-Fe,Ue=Ve-je,Ie.c1.jnAcc=He,Ie.c2.jnAcc=Ve):0<=(He=-Ie.c1.nMass*Ne)&&0<=Ie.Kb*He+Ue?(Ne=He-Fe,Ue=-je,Ie.c1.jnAcc=He,Ie.c2.jnAcc=0):0<=(Ve=-Ie.c2.nMass*Ue)&&0<=Ie.Kb*Ve+Ne?(Ne=-Fe,Ue=Ve-je,Ie.c1.jnAcc=0,Ie.c2.jnAcc=Ve):0<=Ne&&0<=Ue?(Ne=-Fe,Ue=-je,Ie.c1.jnAcc=Ie.c2.jnAcc=0):Ue=Ne=0,Ge=Ne+Ue,ke=Ie.nx*Ge,Te=Ie.ny*Ge,Ie.b2.velx+=ke*Ie.b2.imass,Ie.b2.vely+=Te*Ie.b2.imass,Ie.b1.velx-=ke*Ie.b1.imass,Ie.b1.vely-=Te*Ie.b1.imass,Ie.b2.angvel+=(Ie.rn1b*Ne+Ie.rn2b*Ue)*Ie.b2.iinertia,Ie.b1.angvel-=(Ie.rn1a*Ne+Ie.rn2a*Ue)*Ie.b1.iinertia}else 0!=Ie.radius&&(Ge=(Ie.b2.angvel-Ie.b1.angvel)*Ie.rMass,Oe=Ie.rfric*Ie.c1.jnAcc,Ae=Ie.jrAcc,Ie.jrAcc-=Ge,Ie.jrAcc>Oe?Ie.jrAcc=Oe:Ie.jrAcc<-Oe&&(Ie.jrAcc=-Oe),Ge=Ie.jrAcc-Ae,Ie.b2.angvel+=Ge*Ie.b2.iinertia,Ie.b1.angvel-=Ge*Ie.b1.iinertia),Be=Ie.k1x+Ie.b2.velx-Ie.c1.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c1.r1y*Ie.b1.angvel),Le=Ie.k1y+Ie.b2.vely+Ie.c1.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c1.r1x*Ie.b1.angvel),Ge=(Ie.c1.bounce+(Ie.nx*Be+Ie.ny*Le)+Ie.surfacey)*Ie.c1.nMass,(Ee=(Ae=Ie.c1.jnAcc)-Ge)<0&&(Ee=0),Ge=Ee-Ae,Ie.c1.jnAcc=Ee,ke=Ie.nx*Ge,Te=Ie.ny*Ge,Ie.b2.velx+=ke*Ie.b2.imass,Ie.b2.vely+=Te*Ie.b2.imass,Ie.b1.velx-=ke*Ie.b1.imass,Ie.b1.vely-=Te*Ie.b1.imass,Ie.b2.angvel+=Ie.rn1b*Ge*Ie.b2.iinertia,Ie.b1.angvel-=Ie.rn1a*Ge*Ie.b1.iinertia;var We,Xe,qe,Ye,Ze,Ke,Je=te.colarb,Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel);if(qe=($e*Je.nx-Qe*Je.ny+Je.surfacex)*Je.c1.tMass,(Ye=Je.c1.friction*Je.c1.jnAcc)<(Ke=(Ze=Je.c1.jtAcc)-qe)?Ke=Ye:Ke<-Ye&&(Ke=-Ye),qe=Ke-Ze,Je.c1.jtAcc=Ke,We=-Je.ny*qe,Xe=Je.nx*qe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=Xe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=Xe*Je.b1.imass,Je.b2.angvel+=Je.rt1b*qe*Je.b2.iinertia,Je.b1.angvel-=Je.rt1a*qe*Je.b1.iinertia,Je.hc2){var et=Je.k2x+Je.b2.velx-Je.c2.r2y*Je.b2.angvel-(Je.b1.velx-Je.c2.r1y*Je.b1.angvel),tt=Je.k2y+Je.b2.vely+Je.c2.r2x*Je.b2.angvel-(Je.b1.vely+Je.c2.r1x*Je.b1.angvel);qe=(tt*Je.nx-et*Je.ny+Je.surfacex)*Je.c2.tMass,(Ye=Je.c2.friction*Je.c2.jnAcc)<(Ke=(Ze=Je.c2.jtAcc)-qe)?Ke=Ye:Ke<-Ye&&(Ke=-Ye),qe=Ke-Ze,Je.c2.jtAcc=Ke,We=-Je.ny*qe,Xe=Je.nx*qe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=Xe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=Xe*Je.b1.imass,Je.b2.angvel+=Je.rt2b*qe*Je.b2.iinertia,Je.b1.angvel-=Je.rt2a*qe*Je.b1.iinertia,Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel),et=Je.k2x+Je.b2.velx-Je.c2.r2y*Je.b2.angvel-(Je.b1.velx-Je.c2.r1y*Je.b1.angvel),tt=Je.k2y+Je.b2.vely+Je.c2.r2x*Je.b2.angvel-(Je.b1.vely+Je.c2.r1x*Je.b1.angvel);var it=Je.c1.jnAcc,nt=Je.c2.jnAcc,rt=Qe*Je.nx+$e*Je.ny+Je.surfacey+Je.c1.bounce-(Je.Ka*it+Je.Kb*nt),ot=et*Je.nx+tt*Je.ny+Je.surfacey+Je.c2.bounce-(Je.Kb*it+Je.Kc*nt),at=-(Je.kMassa*rt+Je.kMassb*ot),st=-(Je.kMassb*rt+Je.kMassc*ot);0<=at&&0<=st?(rt=at-it,ot=st-nt,Je.c1.jnAcc=at,Je.c2.jnAcc=st):0<=(at=-Je.c1.nMass*rt)&&0<=Je.Kb*at+ot?(rt=at-it,ot=-nt,Je.c1.jnAcc=at,Je.c2.jnAcc=0):0<=(st=-Je.c2.nMass*ot)&&0<=Je.Kb*st+rt?(rt=-it,ot=st-nt,Je.c1.jnAcc=0,Je.c2.jnAcc=st):0<=rt&&0<=ot?(rt=-it,ot=-nt,Je.c1.jnAcc=Je.c2.jnAcc=0):ot=rt=0,qe=rt+ot,We=Je.nx*qe,Xe=Je.ny*qe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=Xe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=Xe*Je.b1.imass,Je.b2.angvel+=(Je.rn1b*rt+Je.rn2b*ot)*Je.b2.iinertia,Je.b1.angvel-=(Je.rn1a*rt+Je.rn2a*ot)*Je.b1.iinertia}else 0!=Je.radius&&(qe=(Je.b2.angvel-Je.b1.angvel)*Je.rMass,Ye=Je.rfric*Je.c1.jnAcc,Ze=Je.jrAcc,Je.jrAcc-=qe,Je.jrAcc>Ye?Je.jrAcc=Ye:Je.jrAcc<-Ye&&(Je.jrAcc=-Ye),qe=Je.jrAcc-Ze,Je.b2.angvel+=qe*Je.b2.iinertia,Je.b1.angvel-=qe*Je.b1.iinertia),Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel),qe=(Je.c1.bounce+(Je.nx*Qe+Je.ny*$e)+Je.surfacey)*Je.c1.nMass,(Ke=(Ze=Je.c1.jnAcc)-qe)<0&&(Ke=0),qe=Ke-Ze,Je.c1.jnAcc=Ke,We=Je.nx*qe,Xe=Je.ny*qe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=Xe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=Xe*Je.b1.imass,Je.b2.angvel+=Je.rn1b*qe*Je.b2.iinertia,Je.b1.angvel-=Je.rn1a*qe*Je.b1.iinertia;var pt,lt,ht,ut,dt,ct,_t=te.colarb,yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),xt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel);if(ht=(xt*_t.nx-yt*_t.ny+_t.surfacex)*_t.c1.tMass,(ut=_t.c1.friction*_t.c1.jnAcc)<(ct=(dt=_t.c1.jtAcc)-ht)?ct=ut:ct<-ut&&(ct=-ut),ht=ct-dt,_t.c1.jtAcc=ct,pt=-_t.ny*ht,lt=_t.nx*ht,_t.b2.velx+=pt*_t.b2.imass,_t.b2.vely+=lt*_t.b2.imass,_t.b1.velx-=pt*_t.b1.imass,_t.b1.vely-=lt*_t.b1.imass,_t.b2.angvel+=_t.rt1b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rt1a*ht*_t.b1.iinertia,_t.hc2){var mt=_t.k2x+_t.b2.velx-_t.c2.r2y*_t.b2.angvel-(_t.b1.velx-_t.c2.r1y*_t.b1.angvel),ft=_t.k2y+_t.b2.vely+_t.c2.r2x*_t.b2.angvel-(_t.b1.vely+_t.c2.r1x*_t.b1.angvel);ht=(ft*_t.nx-mt*_t.ny+_t.surfacex)*_t.c2.tMass,(ut=_t.c2.friction*_t.c2.jnAcc)<(ct=(dt=_t.c2.jtAcc)-ht)?ct=ut:ct<-ut&&(ct=-ut),ht=ct-dt,_t.c2.jtAcc=ct,pt=-_t.ny*ht,lt=_t.nx*ht,_t.b2.velx+=pt*_t.b2.imass,_t.b2.vely+=lt*_t.b2.imass,_t.b1.velx-=pt*_t.b1.imass,_t.b1.vely-=lt*_t.b1.imass,_t.b2.angvel+=_t.rt2b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rt2a*ht*_t.b1.iinertia,yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),xt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel),mt=_t.k2x+_t.b2.velx-_t.c2.r2y*_t.b2.angvel-(_t.b1.velx-_t.c2.r1y*_t.b1.angvel),ft=_t.k2y+_t.b2.vely+_t.c2.r2x*_t.b2.angvel-(_t.b1.vely+_t.c2.r1x*_t.b1.angvel);var vt=_t.c1.jnAcc,gt=_t.c2.jnAcc,zt=yt*_t.nx+xt*_t.ny+_t.surfacey+_t.c1.bounce-(_t.Ka*vt+_t.Kb*gt),bt=mt*_t.nx+ft*_t.ny+_t.surfacey+_t.c2.bounce-(_t.Kb*vt+_t.Kc*gt),wt=-(_t.kMassa*zt+_t.kMassb*bt),St=-(_t.kMassb*zt+_t.kMassc*bt);0<=wt&&0<=St?(zt=wt-vt,bt=St-gt,_t.c1.jnAcc=wt,_t.c2.jnAcc=St):0<=(wt=-_t.c1.nMass*zt)&&0<=_t.Kb*wt+bt?(zt=wt-vt,bt=-gt,_t.c1.jnAcc=wt,_t.c2.jnAcc=0):0<=(St=-_t.c2.nMass*bt)&&0<=_t.Kb*St+zt?(zt=-vt,bt=St-gt,_t.c1.jnAcc=0,_t.c2.jnAcc=St):0<=zt&&0<=bt?(zt=-vt,bt=-gt,_t.c1.jnAcc=_t.c2.jnAcc=0):bt=zt=0,ht=zt+bt,pt=_t.nx*ht,lt=_t.ny*ht,_t.b2.velx+=pt*_t.b2.imass,_t.b2.vely+=lt*_t.b2.imass,_t.b1.velx-=pt*_t.b1.imass,_t.b1.vely-=lt*_t.b1.imass,_t.b2.angvel+=(_t.rn1b*zt+_t.rn2b*bt)*_t.b2.iinertia,_t.b1.angvel-=(_t.rn1a*zt+_t.rn2a*bt)*_t.b1.iinertia}else 0!=_t.radius&&(ht=(_t.b2.angvel-_t.b1.angvel)*_t.rMass,ut=_t.rfric*_t.c1.jnAcc,dt=_t.jrAcc,_t.jrAcc-=ht,_t.jrAcc>ut?_t.jrAcc=ut:_t.jrAcc<-ut&&(_t.jrAcc=-ut),ht=_t.jrAcc-dt,_t.b2.angvel+=ht*_t.b2.iinertia,_t.b1.angvel-=ht*_t.b1.iinertia),yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),xt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel),ht=(_t.c1.bounce+(_t.nx*yt+_t.ny*xt)+_t.surfacey)*_t.c1.nMass,(ct=(dt=_t.c1.jnAcc)-ht)<0&&(ct=0),ht=ct-dt,_t.c1.jnAcc=ct,pt=_t.nx*ht,lt=_t.ny*ht,_t.b2.velx+=pt*_t.b2.imass,_t.b2.vely+=lt*_t.b2.imass,_t.b1.velx-=pt*_t.b1.imass,_t.b1.vely-=lt*_t.b1.imass,_t.b2.angvel+=_t.rn1b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rn1a*ht*_t.b1.iinertia;c.sweep_angvel=c.angvel%t,_.sweep_angvel=_.angvel%t}null!=te&&te.active&&0!=(1&te.immState)&&te.type==ln.COL&&(c.sweepFrozen||3==c.type||(c.sweepFrozen=!0,n.failed?c.angvel=c.sweep_angvel=0:n.slipped?c.angvel=c.sweep_angvel*=Qs.angularCCDSlipScale:c.angvel=c.sweep_angvel),_.sweepFrozen||3==_.type||(_.sweepFrozen=!0,n.failed?_.angvel=_.sweep_angvel=0:n.slipped?_.angvel=_.sweep_angvel*=Qs.angularCCDSlipScale:_.angvel=_.sweep_angvel));var Ct=n;Ct.next=Ht.zpp_pool,Ht.zpp_pool=Ct}for(;null!=this.toiEvents.head;){var Mt=this.toiEvents.pop_unsafe();Mt.next=Ht.zpp_pool,Ht.zpp_pool=Mt}for(var Pt=this.kinematics.head;null!=Pt;){var kt=Pt.elt,Tt=e-kt.sweepTime;if(0!=Tt&&(kt.sweepTime=e,kt.posx+=kt.velx*Tt,kt.posy+=kt.vely*Tt,0!=kt.angvel)){var Gt=kt.sweep_angvel*Tt;if(kt.rot+=Gt,1e-4<Gt*Gt)kt.axisx=Math.sin(kt.rot),kt.axisy=Math.cos(kt.rot);else{var Ot=Gt*Gt,At=1-.5*Ot,Et=1-Ot*Ot/8,It=(At*kt.axisx+Gt*kt.axisy)*Et;kt.axisy=(At*kt.axisy-Gt*kt.axisx)*Et,kt.axisx=It}}kt.sweepTime=0,Pt=Pt.next}for(var Bt=this.live.head;null!=Bt;){var Lt=Bt.elt;if(!Lt.sweepFrozen){var Dt=e-Lt.sweepTime;if(0!=Dt&&(Lt.sweepTime=e,Lt.posx+=Lt.velx*Dt,Lt.posy+=Lt.vely*Dt,0!=Lt.angvel)){var Rt=Lt.sweep_angvel*Dt;if(Lt.rot+=Rt,1e-4<Rt*Rt)Lt.axisx=Math.sin(Lt.rot),Lt.axisy=Math.cos(Lt.rot);else{var Ft=Rt*Rt,jt=1-.5*Ft,Nt=1-Ft*Ft/8,Ut=(jt*Lt.axisx+Rt*Lt.axisy)*Nt;Lt.axisy=(jt*Lt.axisy-Rt*Lt.axisx)*Nt,Lt.axisx=Ut}}}Lt.sweepTime=0,Bt=Bt.next}},si.prototype.continuousEvent=function(e,t,i,n,r){if(e.body.sweepFrozen&&t.body.sweepFrozen)return n;if(e.body.disableCCD||t.body.disableCCD)return n;var o;if(null==n||null!=n.colarb){var a,s=e.body,p=t.body;a=!1;for(var l,h,u=s.constraints.head;null!=u;){var d=u.elt;if(d.ignore&&d.pair_exists(s.id,p.id)){a=!0;break}u=u.next}if(a)h=!1;else{for(var c=e;null!=c&&null==c.group;)c=null!=c.ishape?c.ishape.body:null!=c.icompound?c.icompound.compound:c.ibody.compound;var _,y=null==c?null:c.group;if(null==y)_=!1;else{for(var x=t;null!=x&&null==x.group;)x=null!=x.ishape?x.ishape.body:null!=x.icompound?x.icompound.compound:x.ibody.compound;var m=null==x?null:x.group;if(null==m)_=!1;else{for(var f=!1;null!=y&&null!=m;){if(y==m){f=y.ignore;break}y.depth<m.depth?m=m.group:y=y.group}_=f}}h=!_}if(h){var v;if(e.sensorEnabled||t.sensorEnabled){var g=e.filter,z=t.filter;v=0!=(g.sensorMask&z.sensorGroup)&&0!=(z.sensorMask&g.sensorGroup)}else v=!1;if(v)l=2;else{var b;if(e.fluidEnabled||t.fluidEnabled){var w=e.filter,S=t.filter;b=0!=(w.fluidMask&S.fluidGroup)&&0!=(S.fluidMask&w.fluidGroup)}else b=!1;if(!!b&&!(0==s.imass&&0==p.imass&&0==s.iinertia&&0==p.iinertia))l=0;else{var C=e.filter,M=t.filter;l=0!=(C.collisionMask&M.collisionGroup)&&0!=(M.collisionMask&C.collisionGroup)&&!(0==s.imass&&0==p.imass&&0==s.iinertia&&0==p.iinertia)?1:-1}}}else l=-1;o=l<=0}else o=!0;if(o)return n;var P=e.body,k=t.body;if(i||P.bullet||k.bullet){var T;null==Ht.zpp_pool?T=new Ht:(T=Ht.zpp_pool,Ht.zpp_pool=T.next,T.next=null),T.failed=!1,T.s1=T.s2=null,T.arbiter=null;var G=3==P.type||3==k.type;if(i&&!G)2!=e.body.type?(T.s2=e,T.s1=t):(T.s1=e,T.s2=t),T.kinematic=!1,Vt.staticSweep(T,this.pre_dt,0,Qs.collisionSlopCCD);else if(T.s1=e,T.s2=t,T.kinematic=G,T.s1.body.sweepFrozen||T.s2.body.sweepFrozen){if(T.s1.body.sweepFrozen){var O=T.s1;T.s1=T.s2,T.s2=O,T.frozen1=!1,T.frozen2=!0}Vt.staticSweep(T,this.pre_dt,0,Qs.collisionSlopCCD)}else Vt.dynamicSweep(T,this.pre_dt,0,Qs.collisionSlopCCD);if(i&&T.toi<0||T.failed){var A=T;A.next=Ht.zpp_pool,Ht.zpp_pool=A}else this.toiEvents.add(T),T.frozen1=T.s1.body.sweepFrozen,T.frozen2=T.s2.body.sweepFrozen,T.arbiter=null!=n?n.colarb:null}return n},si.prototype.bodyCbWake=function(e){if(2==e.type&&null!=e.cbSet)if(this.midstep)for(var t=e.cbSet.bodylisteners.head;null!=t;){var i=t.elt;if(2==i.event){var n=this.push_callback(i);n.event=2,n.body=e,t=t.next}else t=t.next}else e.component.woken=!0},si.prototype.bodyCbSleep=function(e){if(2==e.type&&null!=e.cbSet)for(var t=e.cbSet.bodylisteners.head;null!=t;){var i=t.elt;if(3==i.event){var n=this.push_callback(i);n.event=3,n.body=e,t=t.next}else t=t.next}},si.prototype.constraintCbWake=function(e){if(null!=e.cbSet)if(this.midstep)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(2==i.event){var n=this.push_callback(i);n.event=2,n.constraint=e,t=t.next}else t=t.next}else e.component.woken=!0},si.prototype.constraintCbSleep=function(e){if(null!=e.cbSet)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(3==i.event){var n=this.push_callback(i);n.event=3,n.constraint=e,t=t.next}else t=t.next}},si.prototype.constraintCbBreak=function(e){if(null!=e.cbSet)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(4==i.event){var n=this.push_callback(i);n.event=4,n.constraint=e,t=t.next}else t=t.next}},si.prototype.nullListenerType=function(e,t){for(var i=new Ee,n=e.interactors.head;null!=n;)i.add(n.elt),n=n.next;if(e!=t)for(var r=t.interactors.head;null!=r;)i.add(r.elt),r=r.next;for(;null!=i.head;){var o=i.pop_unsafe();if(null!=o.icompound){for(var a=o.icompound,s=a.bodies.head;null!=s;)i.add(s.elt),s=s.next;for(var p=a.compounds.head;null!=p;)i.add(p.elt),p=p.next}else for(var l=null!=o.ibody?o.ibody:o.ishape.body,h=null!=o.ishape?o.ishape:null,u=l.arbiters.head;null!=u;){var d=u.elt;if(0!=d.present)if(null==h||d.ws1==h||d.ws2==h){this.MRCA_chains(d.ws1,d.ws2);for(var c=this.mrca1.head;null!=c;){var _=c.elt;if(_.cbSet==e||_.cbSet==t){for(var y=this.mrca2.head;null!=y;){var x=y.elt;if(_.cbSet==e&&x.cbSet!=t||_.cbSet==t&&x.cbSet!=e)y=y.next;else{var m=qo.get(_,x);if(null!=m){for(;null!=m.arbiters.head;)m.arbiters.pop_unsafe().present--;this.remove_callbackset(m)}y=y.next}}c=c.next}else c=c.next}u=u.next}else u=u.next;else u=u.next}}},si.prototype.nullInteractorType=function(e,t){if(null==t&&(t=e),null!=e.icompound){for(var i=e.icompound,n=i.bodies.head;null!=n;)this.nullInteractorType(n.elt,t),n=n.next;for(var r=i.compounds.head;null!=r;)this.nullInteractorType(r.elt,t),r=r.next}else for(var o=null!=e.ibody?e.ibody:e.ishape.body,a=null!=e.ishape?e.ishape:null,s=o.arbiters.head;null!=s;){var p=s.elt;if(0!=p.present)if(null==a||p.ws1==a||p.ws2==a){this.MRCA_chains(p.ws1,p.ws2);for(var l=this.mrca1.head;null!=l;){for(var h=l.elt,u=this.mrca2.head;null!=u;){var d=u.elt;if(h==t||d==t){var c=qo.get(h,d);null!=c&&(p.present--,c.remove_arb(p),null==c.arbiters.head&&this.remove_callbackset(c)),u=u.next}else u=u.next}l=l.next}s=s.next}else s=s.next;else s=s.next}},si.prototype.freshListenerType=function(e,t){for(var i=new Ee,n=e.interactors.head;null!=n;)i.add(n.elt),n=n.next;if(e!=t)for(var r=t.interactors.head;null!=r;)i.add(r.elt),r=r.next;for(;null!=i.head;){var o=i.pop_unsafe();if(null!=o.icompound){for(var a=o.icompound,s=a.bodies.head;null!=s;)i.add(s.elt),s=s.next;for(var p=a.compounds.head;null!=p;)i.add(p.elt),p=p.next}else for(var l=null!=o.ibody?o.ibody:o.ishape.body,h=null!=o.ishape?o.ishape:null,u=l.arbiters.head;null!=u;){var d=u.elt;if(d.presentable)if(null==h||d.ws1==h||d.ws2==h){this.MRCA_chains(d.ws1,d.ws2);for(var c=this.mrca1.head;null!=c;){var _=c.elt;if(_.cbSet==e||_.cbSet==t){for(var y=this.mrca2.head;null!=y;){var x=y.elt;if(_.cbSet==e&&x.cbSet!=t||_.cbSet==t&&x.cbSet!=e)y=y.next;else{var m,f,v=qo.get(_,x);null==v&&(v=Yo.get(_,x),this.add_callbackset(v)),f=!1;for(var g=v.arbiters.head;null!=g;){if(g.elt==d){f=!0;break}g=g.next}if(f)m=!1;else{var z,b=v.arbiters;null==Zo.zpp_pool?z=new Zo:(z=Zo.zpp_pool,Zo.zpp_pool=z.next,z.next=null),z.elt=d;var w=z;w.next=b.head,b.head=w,b.modified=!0,b.length++,m=!0}m&&d.present++,y=y.next}}c=c.next}else c=c.next}u=u.next}else u=u.next;else u=u.next}}},si.prototype.freshInteractorType=function(e,t){if(null==t&&(t=e),null!=e.icompound){for(var i=e.icompound,n=i.bodies.head;null!=n;)this.freshInteractorType(n.elt,t),n=n.next;for(var r=i.compounds.head;null!=r;)this.freshInteractorType(r.elt,t),r=r.next}else for(var o=null!=e.ibody?e.ibody:e.ishape.body,a=null!=e.ishape?e.ishape:null,s=o.arbiters.head;null!=s;){var p=s.elt;if(p.presentable)if(null==a||p.ws1==a||p.ws2==a){this.MRCA_chains(p.ws1,p.ws2);for(var l=this.mrca1.head;null!=l;){for(var h=l.elt,u=this.mrca2.head;null!=u;){var d=u.elt;if(h==t||d==t){var c=h.cbSet,_=d.cbSet;c.validate(),_.validate();for(var y,x=null,m=(c.cbpairs.length<_.cbpairs.length?c.cbpairs:_.cbpairs).head;null!=m;){var f=m.elt;if(f.a==c&&f.b==_||f.a==_&&f.b==c){x=f;break}m=m.next}if(null==x)null==No.zpp_pool?y=new No:(y=No.zpp_pool,No.zpp_pool=y.next,y.next=null),y.zip_listeners=!0,jo.setlt(c,_)?(y.a=c,y.b=_):(y.a=_,y.b=c),x=y,c.cbpairs.add(x),_!=c&&_.cbpairs.add(x);if(x.zip_listeners&&(x.zip_listeners=!1,x.__validate()),null!=x.listeners.head){var v,g,z=qo.get(h,d);null==z&&(z=Yo.get(h,d),this.add_callbackset(z)),g=!1;for(var b=z.arbiters.head;null!=b;){if(b.elt==p){g=!0;break}b=b.next}if(g)v=!1;else{var w,S=z.arbiters;null==Zo.zpp_pool?w=new Zo:(w=Zo.zpp_pool,Zo.zpp_pool=w.next,w.next=null),w.elt=p;var C=w;C.next=S.head,S.head=C,S.modified=!0,S.length++,v=!0}v&&p.present++}u=u.next}else u=u.next}l=l.next}s=s.next}else s=s.next;else s=s.next}},si.prototype.wakeCompound=function(e){for(var t=e.bodies.head;null!=t;){var i=t.elt;i.world||(i.component.waket=this.stamp+(this.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!1)),t=t.next}for(var n=e.constraints.head;null!=n;)this.wake_constraint(n.elt),n=n.next;for(var r=e.compounds.head;null!=r;)this.wakeCompound(r.elt),r=r.next},si.prototype.wakeIsland=function(e){for(;null!=e.comps.head;){var t=e.comps.pop_unsafe();if(t.waket=this.stamp+(this.midstep?0:1),t.isBody){var i=t.body;this.live.add(i);for(var n=i.arbiters.head;null!=n;){var r=n.elt;if(r.sleeping)if(r.sleeping=!1,r.up_stamp+=this.stamp-r.sleep_stamp,r.type==ln.COL){var o=r.colarb;if(o.stat){var a,s=this.c_arbiters_true;null==ea.zpp_pool?a=new ea:(a=ea.zpp_pool,ea.zpp_pool=a.next,a.next=null),a.elt=o;var p=a;p.next=s.head,s.head=p,s.modified=!0,s.length++}else{var l,h=this.c_arbiters_false;null==ea.zpp_pool?l=new ea:(l=ea.zpp_pool,ea.zpp_pool=l.next,l.next=null),l.elt=o;var u=l;u.next=h.head,h.head=u,h.modified=!0,h.length++}}else if(r.type==ln.FLUID){var d,c=this.f_arbiters,_=r.fluidarb;null==Qo.zpp_pool?d=new Qo:(d=Qo.zpp_pool,Qo.zpp_pool=d.next,d.next=null),d.elt=_;var y=d;y.next=c.head,c.head=y,c.modified=!0,c.length++}else{var x,m=this.s_arbiters,f=r.sensorarb;null==$o.zpp_pool?x=new $o:(x=$o.zpp_pool,$o.zpp_pool=x.next,x.next=null),x.elt=f;var v=x;v.next=m.head,m.head=v,m.modified=!0,m.length++}n=n.next}if(this.bodyCbWake(i),t.sleeping=!1,t.island=null,(t.parent=t).rank=0,1!=i.type)for(var g=i.shapes.head;null!=g;){var z=g.elt;null!=z.node&&this.bphase.sync(z),g=g.next}}else{var b,w=t.constraint,S=this.live_constraints;null==Vi.zpp_pool?b=new Vi:(b=Vi.zpp_pool,Vi.zpp_pool=b.next,b.next=null),b.elt=w;var C=b;C.next=S.head,S.head=C,S.modified=!0,S.length++,this.constraintCbWake(w),t.sleeping=!1,t.island=null,(t.parent=t).rank=0}}e.next=ni.zpp_pool,ni.zpp_pool=e},si.prototype.non_inlined_wake=function(e,t){null==t&&(t=!1),e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,t))},si.prototype.really_wake=function(e,t){if(null==t&&(t=!1),null==e.component.island){if(e.component.sleeping=!1,3==e.type||1==e.type){var i,n=this.staticsleep;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=e;var r=i;r.next=n.head,n.head=r,n.modified=!0,n.length++}else{var o,a=this.live;null==Hi.zpp_pool?o=new Hi:(o=Hi.zpp_pool,Hi.zpp_pool=o.next,o.next=null),o.elt=e;var s=o;s.next=a.head,a.head=s,a.modified=!0,a.length++}for(var p=e.constraints.head;null!=p;){var l=p.elt;l.space==this&&this.wake_constraint(l),p=p.next}for(var h=e.arbiters.head;null!=h;){var u=h.elt;if(u.sleeping)if(u.sleeping=!1,u.up_stamp+=this.stamp+(this.midstep?0:1)-u.sleep_stamp,u.type==ln.COL){var d=u.colarb;if(d.stat){var c,_=this.c_arbiters_true;null==ea.zpp_pool?c=new ea:(c=ea.zpp_pool,ea.zpp_pool=c.next,c.next=null),c.elt=d;var y=c;y.next=_.head,_.head=y,_.modified=!0,_.length++}else{var x,m=this.c_arbiters_false;null==ea.zpp_pool?x=new ea:(x=ea.zpp_pool,ea.zpp_pool=x.next,x.next=null),x.elt=d;var f=x;f.next=m.head,m.head=f,m.modified=!0,m.length++}}else if(u.type==ln.FLUID){var v,g=this.f_arbiters,z=u.fluidarb;null==Qo.zpp_pool?v=new Qo:(v=Qo.zpp_pool,Qo.zpp_pool=v.next,v.next=null),v.elt=z;var b=v;b.next=g.head,g.head=b,g.modified=!0,g.length++}else{var w,S=this.s_arbiters,C=u.sensorarb;null==$o.zpp_pool?w=new $o:(w=$o.zpp_pool,$o.zpp_pool=w.next,w.next=null),w.elt=C;var M=w;M.next=S.head,S.head=M,S.modified=!0,S.length++}if(u.type!=ln.SENSOR&&!u.cleared&&u.up_stamp>=this.stamp&&0!=(1&u.immState)){if(2==u.b1.type&&u.b1.component.sleeping){var P=u.b1;P.world||(P.component.waket=this.stamp+(this.midstep?0:1),3==P.type&&(P.kinematicDelaySleep=!0),P.component.sleeping&&this.really_wake(P,!1))}if(2==u.b2.type&&u.b2.component.sleeping){var k=u.b2;k.world||(k.component.waket=this.stamp+(this.midstep?0:1),3==k.type&&(k.kinematicDelaySleep=!0),k.component.sleeping&&this.really_wake(k,!1))}}h=h.next}if(t||2!=e.type||this.bodyCbWake(e),!t&&!this.bphase.is_sweep&&1!=e.type)for(var T=e.shapes.head;null!=T;){var G=T.elt;null!=G.node&&this.bphase.sync(G),T=T.next}}else this.wakeIsland(e.component.island)},si.prototype.wake_constraint=function(e,t){if(null==t&&(t=!1),e.active){if(e.component.waket=this.stamp+(this.midstep?0:1),e.component.sleeping){if(null==e.component.island){e.component.sleeping=!1;var i,n=this.live_constraints;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=e;var r=i;r.next=n.head,n.head=r,n.modified=!0,n.length++,e.wake_connected(),t||this.constraintCbWake(e)}else this.wakeIsland(e.component.island);return!0}return!1}return!1},si.prototype.doForests=function(e){for(var t=this.c_arbiters_false.head;null!=t;){var i=t.elt;if(!i.cleared&&i.up_stamp==this.stamp&&0!=(1&i.immState)&&2==i.b1.type&&2==i.b2.type){var n,r;if(i.b1.component==i.b1.component.parent)n=i.b1.component;else{for(var o=i.b1.component,a=null;o!=o.parent;){var s=o.parent;o.parent=a,a=o,o=s}for(;null!=a;){var p=a.parent;a.parent=o,a=p}n=o}if(i.b2.component==i.b2.component.parent)r=i.b2.component;else{for(var l=i.b2.component,h=null;l!=l.parent;){var u=l.parent;l.parent=h,h=l,l=u}for(;null!=h;){var d=h.parent;h.parent=l,h=d}r=l}n!=r&&(n.rank<r.rank?n.parent=r:n.rank>r.rank?r.parent=n:(r.parent=n).rank++)}t=t.next}for(var c=this.f_arbiters.head;null!=c;){var _=c.elt;if(!_.cleared&&_.up_stamp==this.stamp&&0!=(1&_.immState)&&2==_.b1.type&&2==_.b2.type){var y,x;if(_.b1.component==_.b1.component.parent)y=_.b1.component;else{for(var m=_.b1.component,f=null;m!=m.parent;){var v=m.parent;m.parent=f,f=m,m=v}for(;null!=f;){var g=f.parent;f.parent=m,f=g}y=m}if(_.b2.component==_.b2.component.parent)x=_.b2.component;else{for(var z=_.b2.component,b=null;z!=z.parent;){var w=z.parent;z.parent=b,b=z,z=w}for(;null!=b;){var S=b.parent;b.parent=z,b=S}x=z}y!=x&&(y.rank<x.rank?y.parent=x:y.rank>x.rank?x.parent=y:(x.parent=y).rank++)}c=c.next}for(var C=this.live_constraints.head;null!=C;)C.elt.forest(),C=C.next;for(;null!=this.live.head;){var M=this.live,P=M.head.elt;M.pop();var k,T=P.component;if(T==T.parent)k=T;else{for(var G=T,O=null;G!=G.parent;){var A=G.parent;G.parent=O,O=G,G=A}for(;null!=O;){var E=O.parent;O.parent=G,O=E}k=G}if(null==k.island){null==ni.zpp_pool?k.island=new ni:(k.island=ni.zpp_pool,ni.zpp_pool=k.island.next,k.island.next=null),k.island.waket=0;var I=this.islands,B=k.island;B._inuse=!0,B.next=I.next,I.next=B,I.modified=!0,I.length++,k.island.sleep=!0}T.island=k.island;var L,D=T.island.comps;null==pn.zpp_pool?L=new pn:(L=pn.zpp_pool,pn.zpp_pool=L.next,L.next=null),L.elt=T;var R=L;R.next=D.head,D.head=R,D.modified=!0,D.length++;var F=P.atRest(e);T.island.sleep=T.island.sleep&&F,T.waket>T.island.waket&&(T.island.waket=T.waket)}for(;null!=this.live_constraints.head;){var j=this.live_constraints,N=j.head.elt;j.pop();var U,H=N.component;if(H==H.parent)U=H;else{for(var V=H,W=null;V!=V.parent;){var X=V.parent;V.parent=W,W=V,V=X}for(;null!=W;){var q=W.parent;W.parent=V,W=q}U=V}H.island=U.island;var Y,Z=H.island.comps;null==pn.zpp_pool?Y=new pn:(Y=pn.zpp_pool,pn.zpp_pool=Y.next,Y.next=null),Y.elt=H;var K=Y;K.next=Z.head,Z.head=K,Z.modified=!0,Z.length++,H.waket>H.island.waket&&(H.island.waket=H.waket)}for(;null!=this.islands.next;){var J=this.islands,Q=J.next;if(J.pop(),Q.sleep)for(var $=Q.comps.head;null!=$;){var ee=$.elt;if(ee.isBody){var te=ee.body;te.velx=0,te.vely=0,te.angvel=0,ee.sleeping=!0;for(var ie=te.shapes.head;null!=ie;)this.bphase.sync(ie.elt),ie=ie.next;this.bodyCbSleep(te)}else this.constraintCbSleep(ee.constraint),ee.sleeping=!0;$=$.next}else{for(;null!=Q.comps.head;){var ne=Q.comps,re=ne.head.elt;if(ne.pop(),re.waket=Q.waket,re.isBody){var oe,ae=this.live,se=re.body;null==Hi.zpp_pool?oe=new Hi:(oe=Hi.zpp_pool,Hi.zpp_pool=oe.next,oe.next=null),oe.elt=se;var pe=oe;pe.next=ae.head,ae.head=pe,ae.modified=!0,ae.length++}else{var le,he=this.live_constraints,ue=re.constraint;null==Vi.zpp_pool?le=new Vi:(le=Vi.zpp_pool,Vi.zpp_pool=le.next,le.next=null),le.elt=ue;var de=le;de.next=he.head,he.head=de,he.modified=!0,he.length++}re.sleeping=!1,re.island=null,(re.parent=re).rank=0}Q.next=ni.zpp_pool,ni.zpp_pool=Q}}},si.prototype.sleepArbiters=function(){var e=null,t=this.c_arbiters_true,i=t.head,n=null!=this.c_arbiters_false;for(n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null);null!=i;){var r=i.elt;if(r.b1.component.sleeping&&r.b2.component.sleeping){var o,a;r.sleep_stamp=this.stamp,r.sleeping=!0,null==e?(a=(o=t.head).next,t.head=a,null==t.head&&(t.pushmod=!0)):(a=(o=e.next).next,null==(e.next=a)&&(t.pushmod=!0));var s=o;s.elt=null,s.next=ea.zpp_pool,ea.zpp_pool=s,t.modified=!0,t.length--,t.pushmod=!0,i=a,n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null)}else i=(e=i).next,n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null)}for(var p=null,l=this.f_arbiters,h=l.head;null!=h;){var u=h.elt;if(u.b1.component.sleeping&&u.b2.component.sleeping){var d,c;u.sleep_stamp=this.stamp,u.sleeping=!0,null==p?(c=(d=l.head).next,l.head=c,null==l.head&&(l.pushmod=!0)):(c=(d=p.next).next,null==(p.next=c)&&(l.pushmod=!0));var _=d;_.elt=null,_.next=Qo.zpp_pool,Qo.zpp_pool=_,l.modified=!0,l.length--,l.pushmod=!0,h=c}else h=(p=h).next}for(var y=null,x=this.s_arbiters,m=x.head;null!=m;){var f=m.elt;if(f.b1.component.sleeping&&f.b2.component.sleeping){var v,g;f.sleep_stamp=this.stamp,f.sleeping=!0,null==y?(g=(v=x.head).next,x.head=g,null==x.head&&(x.pushmod=!0)):(g=(v=y.next).next,null==(y.next=g)&&(x.pushmod=!0));var z=v;z.elt=null,z.next=$o.zpp_pool,$o.zpp_pool=z,x.modified=!0,x.length--,x.pushmod=!0,m=g}else m=(y=m).next}},si.prototype.static_validation=function(e){if(null!=e.shapes.head&&e.zip_aabb){e.zip_aabb=!1,e.aabb.minx=1/0,e.aabb.miny=1/0,e.aabb.maxx=-1/0,e.aabb.maxy=-1/0;for(var t=e.shapes.head;null!=t;){var i=t.elt;if(i.zip_aabb&&null!=i.body)if(i.zip_aabb=!1,0==i.type){var n=i.circle;if(n.zip_worldCOM&&null!=n.body){if(n.zip_worldCOM=!1,n.zip_localCOM){if(n.zip_localCOM=!1,1==n.type){var r=n.polygon;if(null==r.lverts.next.next)r.localCOMx=r.lverts.next.x,r.localCOMy=r.lverts.next.y;else if(null==r.lverts.next.next.next)r.localCOMx=r.lverts.next.x,r.localCOMy=r.lverts.next.y,r.localCOMx+=r.lverts.next.next.x,r.localCOMy+=r.lverts.next.next.y,r.localCOMx*=.5,r.localCOMy*=.5;else{r.localCOMx=0;var o=r.localCOMy=0,a=r.lverts.next,s=a,p=a=a.next;for(a=a.next;null!=a;){var l=a;o+=p.x*(l.y-s.y);var h=l.y*p.x-l.x*p.y;r.localCOMx+=(p.x+l.x)*h,r.localCOMy+=(p.y+l.y)*h,s=p,p=l,a=a.next}var u=a=r.lverts.next;o+=p.x*(u.y-s.y);var d=u.y*p.x-u.x*p.y;r.localCOMx+=(p.x+u.x)*d,r.localCOMy+=(p.y+u.y)*d,s=p;var c=a=a.next;o+=u.x*(c.y-s.y);var _=c.y*u.x-c.x*u.y;r.localCOMx+=(u.x+c.x)*_,r.localCOMy+=(u.y+c.y)*_;var y=o=1/(3*o);r.localCOMx*=y,r.localCOMy*=y}}null!=n.wrap_localCOM&&(n.wrap_localCOM.zpp_inner.x=n.localCOMx,n.wrap_localCOM.zpp_inner.y=n.localCOMy)}var x=n.body;x.zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot)),n.worldCOMx=n.body.posx+(n.body.axisy*n.localCOMx-n.body.axisx*n.localCOMy),n.worldCOMy=n.body.posy+(n.localCOMx*n.body.axisx+n.localCOMy*n.body.axisy)}var m=n.radius,f=n.radius;n.aabb.minx=n.worldCOMx-m,n.aabb.miny=n.worldCOMy-f,n.aabb.maxx=n.worldCOMx+m,n.aabb.maxy=n.worldCOMy+f}else{var v=i.polygon;if(v.zip_gverts&&null!=v.body){v.zip_gverts=!1,v.validate_lverts();var g=v.body;g.zip_axis&&(g.zip_axis=!1,g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot));for(var z=v.lverts.next,b=v.gverts.next;null!=b;){var w=b,S=z;z=z.next,w.x=v.body.posx+(v.body.axisy*S.x-v.body.axisx*S.y),w.y=v.body.posy+(S.x*v.body.axisx+S.y*v.body.axisy),b=b.next}}var C=v.gverts.next;v.aabb.minx=C.x,v.aabb.miny=C.y,v.aabb.maxx=C.x,v.aabb.maxy=C.y;for(var M=v.gverts.next.next;null!=M;){var P=M;P.x<v.aabb.minx&&(v.aabb.minx=P.x),P.x>v.aabb.maxx&&(v.aabb.maxx=P.x),P.y<v.aabb.miny&&(v.aabb.miny=P.y),P.y>v.aabb.maxy&&(v.aabb.maxy=P.y),M=M.next}}var k=e.aabb,T=i.aabb;T.minx<k.minx&&(k.minx=T.minx),T.maxx>k.maxx&&(k.maxx=T.maxx),T.miny<k.miny&&(k.miny=T.miny),T.maxy>k.maxy&&(k.maxy=T.maxy),t=t.next}}e.validate_mass(),e.validate_inertia();for(var G=e.shapes.head;null!=G;){var O=G.elt;if(1==O.type){var A=O.polygon;A.zip_sanitation&&(A.zip_sanitation=!1,A.splice_collinear_real());var E=O.polygon;if(E.zip_gaxi&&null!=E.body){E.zip_gaxi=!1,E.validate_laxi();var I=E.body;if(I.zip_axis&&(I.zip_axis=!1,I.axisx=Math.sin(I.rot),I.axisy=Math.cos(I.rot)),E.zip_gverts&&null!=E.body){E.zip_gverts=!1,E.validate_lverts();var B=E.body;B.zip_axis&&(B.zip_axis=!1,B.axisx=Math.sin(B.rot),B.axisy=Math.cos(B.rot));for(var L=E.lverts.next,D=E.gverts.next;null!=D;){var R=D,F=L;L=L.next,R.x=E.body.posx+(E.body.axisy*F.x-E.body.axisx*F.y),R.y=E.body.posy+(F.x*E.body.axisx+F.y*E.body.axisy),D=D.next}}var j=E.edges.head,N=E.gverts.next,U=N;for(N=N.next;null!=N;){var H=N,V=j.elt;j=j.next,V.gp0=U,V.gp1=H,V.gnormx=E.body.axisy*V.lnormx-E.body.axisx*V.lnormy,V.gnormy=V.lnormx*E.body.axisx+V.lnormy*E.body.axisy,V.gprojection=E.body.posx*V.gnormx+E.body.posy*V.gnormy+V.lprojection,null!=V.wrap_gnorm&&(V.wrap_gnorm.zpp_inner.x=V.gnormx,V.wrap_gnorm.zpp_inner.y=V.gnormy),V.tp0=V.gp0.y*V.gnormx-V.gp0.x*V.gnormy,V.tp1=V.gp1.y*V.gnormx-V.gp1.x*V.gnormy,U=H,N=N.next}var W=j.elt;W.gp0=U,W.gp1=E.gverts.next,W.gnormx=E.body.axisy*W.lnormx-E.body.axisx*W.lnormy,W.gnormy=W.lnormx*E.body.axisx+W.lnormy*E.body.axisy,W.gprojection=E.body.posx*W.gnormx+E.body.posy*W.gnormy+W.lprojection,null!=W.wrap_gnorm&&(W.wrap_gnorm.zpp_inner.x=W.gnormx,W.wrap_gnorm.zpp_inner.y=W.gnormy),W.tp0=W.gp0.y*W.gnormx-W.gp0.x*W.gnormy,W.tp1=W.gp1.y*W.gnormx-W.gp1.x*W.gnormy}}G=G.next}e.sweepFrozen=!0},si.prototype.validation=function(){var e=this.cbsets;if(!e.cbsets.empty()){for(var t=e.cbsets.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(t.data.validate(),null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}for(var i=this.live.head;null!=i;){var n=i.elt;n.sweepRadius=0;for(var r=n.shapes.head;null!=r;){var o=r.elt;if(1==o.type){var a=o.polygon;a.zip_sanitation&&(a.zip_sanitation=!1,a.splice_collinear_real());var s=o.polygon;if(s.zip_gaxi&&null!=s.body){s.zip_gaxi=!1,s.validate_laxi();var p=s.body;if(p.zip_axis&&(p.zip_axis=!1,p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot)),s.zip_gverts&&null!=s.body){s.zip_gverts=!1,s.validate_lverts();var l=s.body;l.zip_axis&&(l.zip_axis=!1,l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot));for(var h=s.lverts.next,u=s.gverts.next;null!=u;){var d=u,c=h;h=h.next,d.x=s.body.posx+(s.body.axisy*c.x-s.body.axisx*c.y),d.y=s.body.posy+(c.x*s.body.axisx+c.y*s.body.axisy),u=u.next}}var _=s.edges.head,y=s.gverts.next,x=y;for(y=y.next;null!=y;){var m=y,f=_.elt;_=_.next,f.gp0=x,f.gp1=m,f.gnormx=s.body.axisy*f.lnormx-s.body.axisx*f.lnormy,f.gnormy=f.lnormx*s.body.axisx+f.lnormy*s.body.axisy,f.gprojection=s.body.posx*f.gnormx+s.body.posy*f.gnormy+f.lprojection,null!=f.wrap_gnorm&&(f.wrap_gnorm.zpp_inner.x=f.gnormx,f.wrap_gnorm.zpp_inner.y=f.gnormy),f.tp0=f.gp0.y*f.gnormx-f.gp0.x*f.gnormy,f.tp1=f.gp1.y*f.gnormx-f.gp1.x*f.gnormy,x=m,y=y.next}var v=_.elt;v.gp0=x,v.gp1=s.gverts.next,v.gnormx=s.body.axisy*v.lnormx-s.body.axisx*v.lnormy,v.gnormy=v.lnormx*s.body.axisx+v.lnormy*s.body.axisy,v.gprojection=s.body.posx*v.gnormx+s.body.posy*v.gnormy+v.lprojection,null!=v.wrap_gnorm&&(v.wrap_gnorm.zpp_inner.x=v.gnormx,v.wrap_gnorm.zpp_inner.y=v.gnormy),v.tp0=v.gp0.y*v.gnormx-v.gp0.x*v.gnormy,v.tp1=v.gp1.y*v.gnormx-v.gp1.x*v.gnormy}}o.validate_sweepRadius(),o.sweepRadius>n.sweepRadius&&(n.sweepRadius=o.sweepRadius),r=r.next}if(n.validate_mass(),n.validate_inertia(),null!=n.shapes.head){if(n.zip_aabb){n.zip_aabb=!1,n.aabb.minx=1/0,n.aabb.miny=1/0,n.aabb.maxx=-1/0,n.aabb.maxy=-1/0;for(var g=n.shapes.head;null!=g;){var z=g.elt;if(z.zip_aabb&&null!=z.body)if(z.zip_aabb=!1,0==z.type){var b=z.circle;if(b.zip_worldCOM&&null!=b.body){if(b.zip_worldCOM=!1,b.zip_localCOM){if(b.zip_localCOM=!1,1==b.type){var w=b.polygon;if(null==w.lverts.next.next)w.localCOMx=w.lverts.next.x,w.localCOMy=w.lverts.next.y;else if(null==w.lverts.next.next.next)w.localCOMx=w.lverts.next.x,w.localCOMy=w.lverts.next.y,w.localCOMx+=w.lverts.next.next.x,w.localCOMy+=w.lverts.next.next.y,w.localCOMx*=.5,w.localCOMy*=.5;else{w.localCOMx=0;var S=w.localCOMy=0,C=w.lverts.next,M=C,P=C=C.next;for(C=C.next;null!=C;){var k=C;S+=P.x*(k.y-M.y);var T=k.y*P.x-k.x*P.y;w.localCOMx+=(P.x+k.x)*T,w.localCOMy+=(P.y+k.y)*T,M=P,P=k,C=C.next}var G=C=w.lverts.next;S+=P.x*(G.y-M.y);var O=G.y*P.x-G.x*P.y;w.localCOMx+=(P.x+G.x)*O,w.localCOMy+=(P.y+G.y)*O,M=P;var A=C=C.next;S+=G.x*(A.y-M.y);var E=A.y*G.x-A.x*G.y;w.localCOMx+=(G.x+A.x)*E,w.localCOMy+=(G.y+A.y)*E;var I=S=1/(3*S);w.localCOMx*=I,w.localCOMy*=I}}null!=b.wrap_localCOM&&(b.wrap_localCOM.zpp_inner.x=b.localCOMx,b.wrap_localCOM.zpp_inner.y=b.localCOMy)}var B=b.body;B.zip_axis&&(B.zip_axis=!1,B.axisx=Math.sin(B.rot),B.axisy=Math.cos(B.rot)),b.worldCOMx=b.body.posx+(b.body.axisy*b.localCOMx-b.body.axisx*b.localCOMy),b.worldCOMy=b.body.posy+(b.localCOMx*b.body.axisx+b.localCOMy*b.body.axisy)}var L=b.radius,D=b.radius;b.aabb.minx=b.worldCOMx-L,b.aabb.miny=b.worldCOMy-D,b.aabb.maxx=b.worldCOMx+L,b.aabb.maxy=b.worldCOMy+D}else{var R=z.polygon;if(R.zip_gverts&&null!=R.body){R.zip_gverts=!1,R.validate_lverts();var F=R.body;F.zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot));for(var j=R.lverts.next,N=R.gverts.next;null!=N;){var U=N,H=j;j=j.next,U.x=R.body.posx+(R.body.axisy*H.x-R.body.axisx*H.y),U.y=R.body.posy+(H.x*R.body.axisx+H.y*R.body.axisy),N=N.next}}var V=R.gverts.next;R.aabb.minx=V.x,R.aabb.miny=V.y,R.aabb.maxx=V.x,R.aabb.maxy=V.y;for(var W=R.gverts.next.next;null!=W;){var X=W;X.x<R.aabb.minx&&(R.aabb.minx=X.x),X.x>R.aabb.maxx&&(R.aabb.maxx=X.x),X.y<R.aabb.miny&&(R.aabb.miny=X.y),X.y>R.aabb.maxy&&(R.aabb.maxy=X.y),W=W.next}}var q=n.aabb,Y=z.aabb;Y.minx<q.minx&&(q.minx=Y.minx),Y.maxx>q.maxx&&(q.maxx=Y.maxx),Y.miny<q.miny&&(q.miny=Y.miny),Y.maxy>q.maxy&&(q.maxy=Y.maxy),g=g.next}}n.validate_worldCOM()}if(n.validate_gravMass(),n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot)),n.component.woken&&null!=n.cbSet)for(var Z=n.cbSet.bodylisteners.head;null!=Z;){var K=Z.elt;if(2==K.event){var J=this.push_callback(K);J.event=2,J.body=n,Z=Z.next}else Z=Z.next}n.component.woken=!1;for(var Q=n.shapes.head;null!=Q;)this.bphase.sync(Q.elt),Q=Q.next;i=i.next}for(var $=this.kinematics.head;null!=$;){var ee=$.elt;ee.sweepRadius=0;for(var te=ee.shapes.head;null!=te;){var ie=te.elt;if(1==ie.type){var ne=ie.polygon;ne.zip_sanitation&&(ne.zip_sanitation=!1,ne.splice_collinear_real());var re=ie.polygon;if(re.zip_gaxi&&null!=re.body){re.zip_gaxi=!1,re.validate_laxi();var oe=re.body;if(oe.zip_axis&&(oe.zip_axis=!1,oe.axisx=Math.sin(oe.rot),oe.axisy=Math.cos(oe.rot)),re.zip_gverts&&null!=re.body){re.zip_gverts=!1,re.validate_lverts();var ae=re.body;ae.zip_axis&&(ae.zip_axis=!1,ae.axisx=Math.sin(ae.rot),ae.axisy=Math.cos(ae.rot));for(var se=re.lverts.next,pe=re.gverts.next;null!=pe;){var le=pe,he=se;se=se.next,le.x=re.body.posx+(re.body.axisy*he.x-re.body.axisx*he.y),le.y=re.body.posy+(he.x*re.body.axisx+he.y*re.body.axisy),pe=pe.next}}var ue=re.edges.head,de=re.gverts.next,ce=de;for(de=de.next;null!=de;){var _e=de,ye=ue.elt;ue=ue.next,ye.gp0=ce,ye.gp1=_e,ye.gnormx=re.body.axisy*ye.lnormx-re.body.axisx*ye.lnormy,ye.gnormy=ye.lnormx*re.body.axisx+ye.lnormy*re.body.axisy,ye.gprojection=re.body.posx*ye.gnormx+re.body.posy*ye.gnormy+ye.lprojection,null!=ye.wrap_gnorm&&(ye.wrap_gnorm.zpp_inner.x=ye.gnormx,ye.wrap_gnorm.zpp_inner.y=ye.gnormy),ye.tp0=ye.gp0.y*ye.gnormx-ye.gp0.x*ye.gnormy,ye.tp1=ye.gp1.y*ye.gnormx-ye.gp1.x*ye.gnormy,ce=_e,de=de.next}var xe=ue.elt;xe.gp0=ce,xe.gp1=re.gverts.next,xe.gnormx=re.body.axisy*xe.lnormx-re.body.axisx*xe.lnormy,xe.gnormy=xe.lnormx*re.body.axisx+xe.lnormy*re.body.axisy,xe.gprojection=re.body.posx*xe.gnormx+re.body.posy*xe.gnormy+xe.lprojection,null!=xe.wrap_gnorm&&(xe.wrap_gnorm.zpp_inner.x=xe.gnormx,xe.wrap_gnorm.zpp_inner.y=xe.gnormy),xe.tp0=xe.gp0.y*xe.gnormx-xe.gp0.x*xe.gnormy,xe.tp1=xe.gp1.y*xe.gnormx-xe.gp1.x*xe.gnormy}}ie.validate_sweepRadius(),ie.sweepRadius>ee.sweepRadius&&(ee.sweepRadius=ie.sweepRadius),te=te.next}if(ee.validate_mass(),ee.validate_inertia(),null!=ee.shapes.head){if(ee.zip_aabb){ee.zip_aabb=!1,ee.aabb.minx=1/0,ee.aabb.miny=1/0,ee.aabb.maxx=-1/0,ee.aabb.maxy=-1/0;for(var me=ee.shapes.head;null!=me;){var fe=me.elt;if(fe.zip_aabb&&null!=fe.body)if(fe.zip_aabb=!1,0==fe.type){var ve=fe.circle;if(ve.zip_worldCOM&&null!=ve.body){if(ve.zip_worldCOM=!1,ve.zip_localCOM){if(ve.zip_localCOM=!1,1==ve.type){var ge=ve.polygon;if(null==ge.lverts.next.next)ge.localCOMx=ge.lverts.next.x,ge.localCOMy=ge.lverts.next.y;else if(null==ge.lverts.next.next.next)ge.localCOMx=ge.lverts.next.x,ge.localCOMy=ge.lverts.next.y,ge.localCOMx+=ge.lverts.next.next.x,ge.localCOMy+=ge.lverts.next.next.y,ge.localCOMx*=.5,ge.localCOMy*=.5;else{ge.localCOMx=0;var ze=ge.localCOMy=0,be=ge.lverts.next,we=be,Se=be=be.next;for(be=be.next;null!=be;){var Ce=be;ze+=Se.x*(Ce.y-we.y);var Me=Ce.y*Se.x-Ce.x*Se.y;ge.localCOMx+=(Se.x+Ce.x)*Me,ge.localCOMy+=(Se.y+Ce.y)*Me,we=Se,Se=Ce,be=be.next}var Pe=be=ge.lverts.next;ze+=Se.x*(Pe.y-we.y);var ke=Pe.y*Se.x-Pe.x*Se.y;ge.localCOMx+=(Se.x+Pe.x)*ke,ge.localCOMy+=(Se.y+Pe.y)*ke,we=Se;var Te=be=be.next;ze+=Pe.x*(Te.y-we.y);var Ge=Te.y*Pe.x-Te.x*Pe.y;ge.localCOMx+=(Pe.x+Te.x)*Ge,ge.localCOMy+=(Pe.y+Te.y)*Ge;var Oe=ze=1/(3*ze);ge.localCOMx*=Oe,ge.localCOMy*=Oe}}null!=ve.wrap_localCOM&&(ve.wrap_localCOM.zpp_inner.x=ve.localCOMx,ve.wrap_localCOM.zpp_inner.y=ve.localCOMy)}var Ae=ve.body;Ae.zip_axis&&(Ae.zip_axis=!1,Ae.axisx=Math.sin(Ae.rot),Ae.axisy=Math.cos(Ae.rot)),ve.worldCOMx=ve.body.posx+(ve.body.axisy*ve.localCOMx-ve.body.axisx*ve.localCOMy),ve.worldCOMy=ve.body.posy+(ve.localCOMx*ve.body.axisx+ve.localCOMy*ve.body.axisy)}var Ee=ve.radius,Ie=ve.radius;ve.aabb.minx=ve.worldCOMx-Ee,ve.aabb.miny=ve.worldCOMy-Ie,ve.aabb.maxx=ve.worldCOMx+Ee,ve.aabb.maxy=ve.worldCOMy+Ie}else{var Be=fe.polygon;if(Be.zip_gverts&&null!=Be.body){Be.zip_gverts=!1,Be.validate_lverts();var Le=Be.body;Le.zip_axis&&(Le.zip_axis=!1,Le.axisx=Math.sin(Le.rot),Le.axisy=Math.cos(Le.rot));for(var De=Be.lverts.next,Re=Be.gverts.next;null!=Re;){var Fe=Re,je=De;De=De.next,Fe.x=Be.body.posx+(Be.body.axisy*je.x-Be.body.axisx*je.y),Fe.y=Be.body.posy+(je.x*Be.body.axisx+je.y*Be.body.axisy),Re=Re.next}}var Ne=Be.gverts.next;Be.aabb.minx=Ne.x,Be.aabb.miny=Ne.y,Be.aabb.maxx=Ne.x,Be.aabb.maxy=Ne.y;for(var Ue=Be.gverts.next.next;null!=Ue;){var He=Ue;He.x<Be.aabb.minx&&(Be.aabb.minx=He.x),He.x>Be.aabb.maxx&&(Be.aabb.maxx=He.x),He.y<Be.aabb.miny&&(Be.aabb.miny=He.y),He.y>Be.aabb.maxy&&(Be.aabb.maxy=He.y),Ue=Ue.next}}var Ve=ee.aabb,We=fe.aabb;We.minx<Ve.minx&&(Ve.minx=We.minx),We.maxx>Ve.maxx&&(Ve.maxx=We.maxx),We.miny<Ve.miny&&(Ve.miny=We.miny),We.maxy>Ve.maxy&&(Ve.maxy=We.maxy),me=me.next}}ee.validate_worldCOM()}ee.validate_gravMass(),ee.zip_axis&&(ee.zip_axis=!1,ee.axisx=Math.sin(ee.rot),ee.axisy=Math.cos(ee.rot));for(var Xe=ee.shapes.head;null!=Xe;)this.bphase.sync(Xe.elt),Xe=Xe.next;$=$.next}for(var qe=this.live_constraints.head;null!=qe;){var Ye=qe.elt;if(Ye.active){if(Ye.component.woken&&null!=Ye.cbSet)for(var Ze=Ye.cbSet.conlisteners.head;null!=Ze;){var Ke=Ze.elt;if(2==Ke.event){var Je=this.push_callback(Ke);Je.event=2,Je.constraint=Ye,Ze=Ze.next}else Ze=Ze.next}Ye.component.woken=!1}qe=qe.next}},si.prototype.updateVel=function(e){for(var t=1-e*this.global_lin_drag,i=1-e*this.global_ang_drag,n=this.live.head;null!=n;){var r=n.elt;if(0!=r.smass){var o=e*r.imass;r.velx=t*r.velx+(r.forcex+this.gravityx*r.gravMass)*o,r.vely=t*r.vely+(r.forcey+this.gravityy*r.gravMass)*o}if(0!=r.sinertia){var a,s;a=r.worldCOMx-r.posx,s=r.worldCOMy-r.posy,r.angvel=i*r.angvel+(r.torque+(this.gravityy*a-this.gravityx*s)*r.gravMass)*e*r.iinertia}n=n.next}},si.prototype.updatePos=function(e){for(var t=2*Math.PI/e,i=this.live.head;null!=i;){var n=i.elt;n.pre_posx=n.posx,n.pre_posy=n.posy,n.pre_rot=n.rot,n.sweepTime=0,n.sweep_angvel=n.angvel%t;var r=e-n.sweepTime;if(0!=r&&(n.sweepTime=e,n.posx+=n.velx*r,n.posy+=n.vely*r,0!=n.angvel)){var o=n.sweep_angvel*r;if(n.rot+=o,1e-4<o*o)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var a=o*o,s=1-.5*a,p=1-a*a/8,l=(s*n.axisx+o*n.axisy)*p;n.axisy=(s*n.axisy-o*n.axisx)*p,n.axisx=l}}if(n.disableCCD)n.sweepFrozen=!0,n.bullet=!1;else{var h=Qs.staticCCDLinearThreshold*n.sweepRadius,u=Qs.staticCCDAngularThreshold;if((n.velx*n.velx+n.vely*n.vely)*e*e>h*h||n.angvel*n.angvel*e*e>u*u||3==n.type){var d=n.sweep_angvel;d<0&&(d=-d);for(var c=1/d,_=n.shapes.head;null!=_;){var y=_.elt,x=y.aabb,m=x.minx,f=x.miny,v=x.maxx,g=x.maxy,z=d*e*y.sweepCoef*.008333333333333333|0;8<z&&(z=8);var b=d*e/z,w=e-n.sweepTime;if(0!=w&&(n.sweepTime=e,n.posx+=n.velx*w,n.posy+=n.vely*w,0!=n.angvel)){var S=n.sweep_angvel*w;if(n.rot+=S,1e-4<S*S)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var C=S*S,M=1-.5*C,P=1-C*C/8,k=(M*n.axisx+S*n.axisy)*P;n.axisy=(M*n.axisy-S*n.axisx)*P,n.axisx=k}}if(0==y.type){var T=y.circle;T.worldCOMx=T.body.posx+(T.body.axisy*T.localCOMx-T.body.axisx*T.localCOMy),T.worldCOMy=T.body.posy+(T.localCOMx*T.body.axisx+T.localCOMy*T.body.axisy),T.aabb.minx=T.worldCOMx-T.radius,T.aabb.miny=T.worldCOMy-T.radius,T.aabb.maxx=T.worldCOMx+T.radius,T.aabb.maxy=T.worldCOMy+T.radius}else{var G=y.polygon,O=G.lverts.next,A=G.gverts.next,E=O;O=O.next,A.x=G.body.posx+(G.body.axisy*E.x-G.body.axisx*E.y),A.y=G.body.posy+(E.x*G.body.axisx+E.y*G.body.axisy),G.aabb.minx=A.x,G.aabb.miny=A.y,G.aabb.maxx=A.x,G.aabb.maxy=A.y;for(var I=G.gverts.next.next;null!=I;){var B=I,L=O;O=O.next,B.x=G.body.posx+(G.body.axisy*L.x-G.body.axisx*L.y),B.y=G.body.posy+(L.x*G.body.axisx+L.y*G.body.axisy),B.x<G.aabb.minx&&(G.aabb.minx=B.x),B.x>G.aabb.maxx&&(G.aabb.maxx=B.x),B.y<G.aabb.miny&&(G.aabb.miny=B.y),B.y>G.aabb.maxy&&(G.aabb.maxy=B.y),I=I.next}}m<x.minx?x.minx=m:m=x.minx,f<x.miny?x.miny=f:f=x.miny,v>x.maxx?x.maxx=v:v=x.maxx,g>x.maxy?x.maxy=g:g=x.maxy;for(var D=1,R=z;D<R;){var F=b*D++*c,j=F-n.sweepTime;if(0!=j&&(n.sweepTime=F,n.posx+=n.velx*j,n.posy+=n.vely*j,0!=n.angvel)){var N=n.sweep_angvel*j;if(n.rot+=N,1e-4<N*N)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var U=N*N,H=1-.5*U,V=1-U*U/8,W=(H*n.axisx+N*n.axisy)*V;n.axisy=(H*n.axisy-N*n.axisx)*V,n.axisx=W}}if(0==y.type){var X=y.circle;X.worldCOMx=X.body.posx+(X.body.axisy*X.localCOMx-X.body.axisx*X.localCOMy),X.worldCOMy=X.body.posy+(X.localCOMx*X.body.axisx+X.localCOMy*X.body.axisy),X.aabb.minx=X.worldCOMx-X.radius,X.aabb.miny=X.worldCOMy-X.radius,X.aabb.maxx=X.worldCOMx+X.radius,X.aabb.maxy=X.worldCOMy+X.radius}else{var q=y.polygon,Y=q.lverts.next,Z=q.gverts.next,K=Y;Y=Y.next,Z.x=q.body.posx+(q.body.axisy*K.x-q.body.axisx*K.y),Z.y=q.body.posy+(K.x*q.body.axisx+K.y*q.body.axisy),q.aabb.minx=Z.x,q.aabb.miny=Z.y,q.aabb.maxx=Z.x,q.aabb.maxy=Z.y;for(var J=q.gverts.next.next;null!=J;){var Q=J,$=Y;Y=Y.next,Q.x=q.body.posx+(q.body.axisy*$.x-q.body.axisx*$.y),Q.y=q.body.posy+($.x*q.body.axisx+$.y*q.body.axisy),Q.x<q.aabb.minx&&(q.aabb.minx=Q.x),Q.x>q.aabb.maxx&&(q.aabb.maxx=Q.x),Q.y<q.aabb.miny&&(q.aabb.miny=Q.y),Q.y>q.aabb.maxy&&(q.aabb.maxy=Q.y),J=J.next}}m<x.minx?x.minx=m:m=x.minx,f<x.miny?x.miny=f:f=x.miny,v>x.maxx?x.maxx=v:v=x.maxx,g>x.maxy?x.maxy=g:g=x.maxy}this.bphase.sync(y),_=_.next}if(n.sweepFrozen=!1,2==n.type&&n.bulletEnabled){var ee=Qs.bulletCCDLinearThreshold*n.sweepRadius,te=Qs.bulletCCDAngularThreshold;((n.velx*n.velx+n.vely*n.vely)*e*e>ee*ee||n.angvel*n.angvel*e*e>te*te)&&(n.bullet=!0)}}else n.sweepFrozen=!0,n.bullet=!1}i=i.next}for(var ie=this.kinematics.head;null!=ie;){var ne=ie.elt;ne.pre_posx=ne.posx,ne.pre_posy=ne.posy,ne.pre_rot=ne.rot,ne.sweepTime=0,ne.sweep_angvel=ne.angvel%t;var re=e-ne.sweepTime;if(0!=re&&(ne.sweepTime=e,ne.posx+=ne.velx*re,ne.posy+=ne.vely*re,0!=ne.angvel)){var oe=ne.sweep_angvel*re;if(ne.rot+=oe,1e-4<oe*oe)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var ae=oe*oe,se=1-.5*ae,pe=1-ae*ae/8,le=(se*ne.axisx+oe*ne.axisy)*pe;ne.axisy=(se*ne.axisy-oe*ne.axisx)*pe,ne.axisx=le}}if(ne.disableCCD)ne.sweepFrozen=!0,ne.bullet=!1;else{var he=Qs.staticCCDLinearThreshold*ne.sweepRadius,ue=Qs.staticCCDAngularThreshold;if((ne.velx*ne.velx+ne.vely*ne.vely)*e*e>he*he||ne.angvel*ne.angvel*e*e>ue*ue||3==ne.type){var de=ne.sweep_angvel;de<0&&(de=-de);for(var ce=1/de,_e=ne.shapes.head;null!=_e;){var ye=_e.elt,xe=ye.aabb,me=xe.minx,fe=xe.miny,ve=xe.maxx,ge=xe.maxy,ze=de*e*ye.sweepCoef*.008333333333333333|0;8<ze&&(ze=8);var be=de*e/ze,we=e-ne.sweepTime;if(0!=we&&(ne.sweepTime=e,ne.posx+=ne.velx*we,ne.posy+=ne.vely*we,0!=ne.angvel)){var Se=ne.sweep_angvel*we;if(ne.rot+=Se,1e-4<Se*Se)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var Ce=Se*Se,Me=1-.5*Ce,Pe=1-Ce*Ce/8,ke=(Me*ne.axisx+Se*ne.axisy)*Pe;ne.axisy=(Me*ne.axisy-Se*ne.axisx)*Pe,ne.axisx=ke}}if(0==ye.type){var Te=ye.circle;Te.worldCOMx=Te.body.posx+(Te.body.axisy*Te.localCOMx-Te.body.axisx*Te.localCOMy),Te.worldCOMy=Te.body.posy+(Te.localCOMx*Te.body.axisx+Te.localCOMy*Te.body.axisy),Te.aabb.minx=Te.worldCOMx-Te.radius,Te.aabb.miny=Te.worldCOMy-Te.radius,Te.aabb.maxx=Te.worldCOMx+Te.radius,Te.aabb.maxy=Te.worldCOMy+Te.radius}else{var Ge=ye.polygon,Oe=Ge.lverts.next,Ae=Ge.gverts.next,Ee=Oe;Oe=Oe.next,Ae.x=Ge.body.posx+(Ge.body.axisy*Ee.x-Ge.body.axisx*Ee.y),Ae.y=Ge.body.posy+(Ee.x*Ge.body.axisx+Ee.y*Ge.body.axisy),Ge.aabb.minx=Ae.x,Ge.aabb.miny=Ae.y,Ge.aabb.maxx=Ae.x,Ge.aabb.maxy=Ae.y;for(var Ie=Ge.gverts.next.next;null!=Ie;){var Be=Ie,Le=Oe;Oe=Oe.next,Be.x=Ge.body.posx+(Ge.body.axisy*Le.x-Ge.body.axisx*Le.y),Be.y=Ge.body.posy+(Le.x*Ge.body.axisx+Le.y*Ge.body.axisy),Be.x<Ge.aabb.minx&&(Ge.aabb.minx=Be.x),Be.x>Ge.aabb.maxx&&(Ge.aabb.maxx=Be.x),Be.y<Ge.aabb.miny&&(Ge.aabb.miny=Be.y),Be.y>Ge.aabb.maxy&&(Ge.aabb.maxy=Be.y),Ie=Ie.next}}me<xe.minx?xe.minx=me:me=xe.minx,fe<xe.miny?xe.miny=fe:fe=xe.miny,ve>xe.maxx?xe.maxx=ve:ve=xe.maxx,ge>xe.maxy?xe.maxy=ge:ge=xe.maxy;for(var De=1,Re=ze;De<Re;){var Fe=be*De++*ce,je=Fe-ne.sweepTime;if(0!=je&&(ne.sweepTime=Fe,ne.posx+=ne.velx*je,ne.posy+=ne.vely*je,0!=ne.angvel)){var Ne=ne.sweep_angvel*je;if(ne.rot+=Ne,1e-4<Ne*Ne)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var Ue=Ne*Ne,He=1-.5*Ue,Ve=1-Ue*Ue/8,We=(He*ne.axisx+Ne*ne.axisy)*Ve;ne.axisy=(He*ne.axisy-Ne*ne.axisx)*Ve,ne.axisx=We}}if(0==ye.type){var Xe=ye.circle;Xe.worldCOMx=Xe.body.posx+(Xe.body.axisy*Xe.localCOMx-Xe.body.axisx*Xe.localCOMy),Xe.worldCOMy=Xe.body.posy+(Xe.localCOMx*Xe.body.axisx+Xe.localCOMy*Xe.body.axisy),Xe.aabb.minx=Xe.worldCOMx-Xe.radius,Xe.aabb.miny=Xe.worldCOMy-Xe.radius,Xe.aabb.maxx=Xe.worldCOMx+Xe.radius,Xe.aabb.maxy=Xe.worldCOMy+Xe.radius}else{var qe=ye.polygon,Ye=qe.lverts.next,Ze=qe.gverts.next,Ke=Ye;Ye=Ye.next,Ze.x=qe.body.posx+(qe.body.axisy*Ke.x-qe.body.axisx*Ke.y),Ze.y=qe.body.posy+(Ke.x*qe.body.axisx+Ke.y*qe.body.axisy),qe.aabb.minx=Ze.x,qe.aabb.miny=Ze.y,qe.aabb.maxx=Ze.x,qe.aabb.maxy=Ze.y;for(var Je=qe.gverts.next.next;null!=Je;){var Qe=Je,$e=Ye;Ye=Ye.next,Qe.x=qe.body.posx+(qe.body.axisy*$e.x-qe.body.axisx*$e.y),Qe.y=qe.body.posy+($e.x*qe.body.axisx+$e.y*qe.body.axisy),Qe.x<qe.aabb.minx&&(qe.aabb.minx=Qe.x),Qe.x>qe.aabb.maxx&&(qe.aabb.maxx=Qe.x),Qe.y<qe.aabb.miny&&(qe.aabb.miny=Qe.y),Qe.y>qe.aabb.maxy&&(qe.aabb.maxy=Qe.y),Je=Je.next}}me<xe.minx?xe.minx=me:me=xe.minx,fe<xe.miny?xe.miny=fe:fe=xe.miny,ve>xe.maxx?xe.maxx=ve:ve=xe.maxx,ge>xe.maxy?xe.maxy=ge:ge=xe.maxy}this.bphase.sync(ye),_e=_e.next}if(ne.sweepFrozen=!1,2==ne.type&&ne.bulletEnabled){var et=Qs.bulletCCDLinearThreshold*ne.sweepRadius,tt=Qs.bulletCCDAngularThreshold;((ne.velx*ne.velx+ne.vely*ne.vely)*e*e>et*et||ne.angvel*ne.angvel*e*e>tt*tt)&&(ne.bullet=!0)}}else ne.sweepFrozen=!0,ne.bullet=!1}ie=ie.next}},si.prototype.continuous=null,si.prototype.presteparb=function(e,t,i){null==i&&(i=!1);if(!e.cleared&&e.b1.component.sleeping&&e.b2.component.sleeping)return e.sleep_stamp=this.stamp,e.sleeping=!0;if(!e.cleared||0!=e.present||e.intchange){var n=!i&&e.up_stamp==this.stamp-1&&!e.cleared&&!e.intchange,r=e.fresh&&!e.cleared&&!e.intchange;if(n&&(e.endGenerated=this.stamp),r||n||e.cleared||e.intchange){for(var o=e.ws1,a=e.ws2,s=this.mrca1;null!=s.head;){var p=s.head;s.head=p.next,p.elt=null,p.next=Jo.zpp_pool,Jo.zpp_pool=p,null==s.head&&(s.pushmod=!0),s.modified=!0,s.length--}s.pushmod=!0;for(var l=this.mrca2;null!=l.head;){var h=l.head;l.head=h.next,h.elt=null,h.next=Jo.zpp_pool,Jo.zpp_pool=h,null==l.head&&(l.pushmod=!0),l.modified=!0,l.length--}if(l.pushmod=!0,null!=o.cbSet){var u,d=this.mrca1;null==Jo.zpp_pool?u=new Jo:(u=Jo.zpp_pool,Jo.zpp_pool=u.next,u.next=null),u.elt=o;var c=u;c.next=d.head,d.head=c,d.modified=!0,d.length++}if(null!=o.body.cbSet){var _,y=this.mrca1,x=o.body;null==Jo.zpp_pool?_=new Jo:(_=Jo.zpp_pool,Jo.zpp_pool=_.next,_.next=null),_.elt=x;var m=_;m.next=y.head,y.head=m,y.modified=!0,y.length++}if(null!=a.cbSet){var f,v=this.mrca2;null==Jo.zpp_pool?f=new Jo:(f=Jo.zpp_pool,Jo.zpp_pool=f.next,f.next=null),f.elt=a;var g=f;g.next=v.head,v.head=g,v.modified=!0,v.length++}if(null!=a.body.cbSet){var z,b=this.mrca2,w=a.body;null==Jo.zpp_pool?z=new Jo:(z=Jo.zpp_pool,Jo.zpp_pool=z.next,z.next=null),z.elt=w;var S=z;S.next=b.head,b.head=S,b.modified=!0,b.length++}for(var C=o.body.compound,M=a.body.compound;C!=M;)if((null==C?0:C.depth)<(null==M?0:M.depth)){if(null!=M.cbSet){var P,k=this.mrca2;null==Jo.zpp_pool?P=new Jo:(P=Jo.zpp_pool,Jo.zpp_pool=P.next,P.next=null),P.elt=M;var T=P;T.next=k.head,k.head=T,k.modified=!0,k.length++}M=M.compound}else{if(null!=C.cbSet){var G,O=this.mrca1;null==Jo.zpp_pool?G=new Jo:(G=Jo.zpp_pool,Jo.zpp_pool=G.next,G.next=null),G.elt=C;var A=G;A.next=O.head,O.head=A,O.modified=!0,O.length++}C=C.compound}for(var E=this.mrca1.head;null!=E;){for(var I=E.elt,B=this.mrca2.head;null!=B;){for(var L,D=B.elt,R=I.cbSet,F=D.cbSet,j=null,N=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=N;){var U=N.elt;if(U.a==R&&U.b==F||U.a==F&&U.b==R){j=U;break}N=N.next}if(null==j)null==No.zpp_pool?L=new No:(L=No.zpp_pool,No.zpp_pool=L.next,L.next=null),L.zip_listeners=!0,jo.setlt(R,F)?(L.a=R,L.b=F):(L.a=F,L.b=R),j=L,R.cbpairs.add(j),F!=R&&F.cbpairs.add(j);if(j.zip_listeners&&(j.zip_listeners=!1,j.__validate()),null!=j.listeners.head){var H=qo.get(I,D);if(r||e.intchange){null==H&&(H=Yo.get(I,D),this.add_callbackset(H));for(var V,W=null,X=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=X;){var q=X.elt;if(q.a==R&&q.b==F||q.a==F&&q.b==R){W=q;break}X=X.next}if(null==W)null==No.zpp_pool?V=new No:(V=No.zpp_pool,No.zpp_pool=V.next,V.next=null),V.zip_listeners=!0,jo.setlt(R,F)?(V.a=R,V.b=F):(V.a=F,V.b=R),W=V,R.cbpairs.add(W),F!=R&&F.cbpairs.add(W);W.zip_listeners&&(W.zip_listeners=!1,W.__validate());for(var Y,Z,K=W.listeners.head;null!=K;){var J=K.elt;if(0==J.event&&0!=(J.itype&e.type)&&H.empty_arb(J.itype)){var Q=this.push_callback(J);Q.event=0;var $,ee=H.int1,te=H.int2,ie=J.options1,ne=ee.cbTypes;if(ie.nonemptyintersection(ne,ie.includes)&&!ie.nonemptyintersection(ne,ie.excludes)){var re=J.options2,oe=te.cbTypes;$=!!re.nonemptyintersection(oe,re.includes)&&!re.nonemptyintersection(oe,re.excludes)}else $=!1;$?(Q.int1=ee,Q.int2=te):(Q.int1=te,Q.int2=ee),Q.set=H}K=K.next}Z=!1;for(var ae=H.arbiters.head;null!=ae;){if(ae.elt==e){Z=!0;break}ae=ae.next}if(Z)Y=!1;else{var se,pe=H.arbiters;null==Zo.zpp_pool?se=new Zo:(se=Zo.zpp_pool,Zo.zpp_pool=se.next,se.next=null),se.elt=e;var le=se;le.next=pe.head,pe.head=le,pe.modified=!0,pe.length++,Y=!0}Y&&e.present++}else{e.present--,H.remove_arb(e);for(var he,ue=null,de=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=de;){var ce=de.elt;if(ce.a==R&&ce.b==F||ce.a==F&&ce.b==R){ue=ce;break}de=de.next}if(null==ue)null==No.zpp_pool?he=new No:(he=No.zpp_pool,No.zpp_pool=he.next,he.next=null),he.zip_listeners=!0,jo.setlt(R,F)?(he.a=R,he.b=F):(he.a=F,he.b=R),ue=he,R.cbpairs.add(ue),F!=R&&F.cbpairs.add(ue);ue.zip_listeners&&(ue.zip_listeners=!1,ue.__validate());for(var _e=ue.listeners.head;null!=_e;){var ye=_e.elt;if(1==ye.event&&0!=(ye.itype&e.type)&&H.empty_arb(ye.itype)){var xe=this.push_callback(ye);xe.event=1;var me,fe=H.int1,ve=H.int2,ge=ye.options1,ze=fe.cbTypes;if(ge.nonemptyintersection(ze,ge.includes)&&!ge.nonemptyintersection(ze,ge.excludes)){var be=ye.options2,we=ve.cbTypes;me=!!be.nonemptyintersection(we,be.includes)&&!be.nonemptyintersection(we,be.excludes)}else me=!1;me?(xe.int1=fe,xe.int2=ve):(xe.int1=ve,xe.int2=fe),xe.set=H}_e=_e.next}null==H.arbiters.head&&this.remove_callbackset(H)}B=B.next}else B=B.next}E=E.next}}e.fresh=!1,e.intchange=!1}if(e.cleared||e.up_stamp+(e.type==ln.COL?Qs.arbiterExpirationDelay:0)<this.stamp){if(e.type==ln.SENSOR){var Se=e.sensorarb;if(!Se.cleared){for(var Ce=Se.b1.arbiters,Me=null,Pe=Ce.head;null!=Pe;){if(Pe.elt==Se){var ke,Te;null==Me?(Te=(ke=Ce.head).next,Ce.head=Te,null==Ce.head&&(Ce.pushmod=!0)):(Te=(ke=Me.next).next,null==(Me.next=Te)&&(Ce.pushmod=!0));var Ge=ke;Ge.elt=null,Ge.next=Zo.zpp_pool,Zo.zpp_pool=Ge,Ce.modified=!0,Ce.length--,Ce.pushmod=!0;break}Pe=(Me=Pe).next}for(var Oe=Se.b2.arbiters,Ae=null,Ee=Oe.head;null!=Ee;){if(Ee.elt==Se){var Ie,Be;null==Ae?(Be=(Ie=Oe.head).next,Oe.head=Be,null==Oe.head&&(Oe.pushmod=!0)):(Be=(Ie=Ae.next).next,null==(Ae.next=Be)&&(Oe.pushmod=!0));var Le=Ie;Le.elt=null,Le.next=Zo.zpp_pool,Zo.zpp_pool=Le,Oe.modified=!0,Oe.length--,Oe.pushmod=!0;break}Ee=(Ae=Ee).next}null!=Se.pair&&(Se.pair.arb=null,Se.pair=null)}Se.b1=Se.b2=null,Se.active=!1,Se.intchange=!1,Se.next=Ho.zpp_pool,Ho.zpp_pool=Se}else if(e.type==ln.FLUID){var De=e.fluidarb;if(!De.cleared){for(var Re=De.b1.arbiters,Fe=null,je=Re.head;null!=je;){if(je.elt==De){var Ne,Ue;null==Fe?(Ue=(Ne=Re.head).next,Re.head=Ue,null==Re.head&&(Re.pushmod=!0)):(Ue=(Ne=Fe.next).next,null==(Fe.next=Ue)&&(Re.pushmod=!0));var He=Ne;He.elt=null,He.next=Zo.zpp_pool,Zo.zpp_pool=He,Re.modified=!0,Re.length--,Re.pushmod=!0;break}je=(Fe=je).next}for(var Ve=De.b2.arbiters,We=null,Xe=Ve.head;null!=Xe;){if(Xe.elt==De){var qe,Ye;null==We?(Ye=(qe=Ve.head).next,Ve.head=Ye,null==Ve.head&&(Ve.pushmod=!0)):(Ye=(qe=We.next).next,null==(We.next=Ye)&&(Ve.pushmod=!0));var Ze=qe;Ze.elt=null,Ze.next=Zo.zpp_pool,Zo.zpp_pool=Ze,Ve.modified=!0,Ve.length--,Ve.pushmod=!0;break}Xe=(We=Xe).next}null!=De.pair&&(De.pair.arb=null,De.pair=null)}De.b1=De.b2=null,De.active=!1,De.intchange=!1,De.next=Vo.zpp_pool,(Vo.zpp_pool=De).pre_dt=-1}else{var Ke=e.colarb;if(!Ke.cleared){for(var Je=Ke.b1.arbiters,Qe=null,$e=Je.head;null!=$e;){if($e.elt==Ke){var et,tt;null==Qe?(tt=(et=Je.head).next,Je.head=tt,null==Je.head&&(Je.pushmod=!0)):(tt=(et=Qe.next).next,null==(Qe.next=tt)&&(Je.pushmod=!0));var it=et;it.elt=null,it.next=Zo.zpp_pool,Zo.zpp_pool=it,Je.modified=!0,Je.length--,Je.pushmod=!0;break}$e=(Qe=$e).next}for(var nt=Ke.b2.arbiters,rt=null,ot=nt.head;null!=ot;){if(ot.elt==Ke){var at,st;null==rt?(st=(at=nt.head).next,nt.head=st,null==nt.head&&(nt.pushmod=!0)):(st=(at=rt.next).next,null==(rt.next=st)&&(nt.pushmod=!0));var pt=at;pt.elt=null,pt.next=Zo.zpp_pool,Zo.zpp_pool=pt,nt.modified=!0,nt.length--,nt.pushmod=!0;break}ot=(rt=ot).next}null!=Ke.pair&&(Ke.pair.arb=null,Ke.pair=null)}for(Ke.b1=Ke.b2=null,Ke.active=!1,Ke.intchange=!1;null!=Ke.contacts.next;){var lt=Ke.contacts,ht=lt.next;lt.pop(),ht.arbiter=null,ht.next=Xo.zpp_pool,Xo.zpp_pool=ht;var ut=Ke.innards,dt=ut.next;ut.next=dt.next,dt._inuse=!1,null==ut.next&&(ut.pushmod=!0),ut.modified=!0,ut.length--}Ke.userdef_dyn_fric=!1,Ke.userdef_stat_fric=!1,Ke.userdef_restitution=!1,Ke.userdef_rfric=!1,Ke.__ref_edge1=Ke.__ref_edge2=null,Ke.next=Wo.zpp_pool,(Wo.zpp_pool=Ke).pre_dt=-1}return!0}var ct=e.active;if(e.active=e.presentable=e.up_stamp==this.stamp,0!=(1&e.immState)){if(e.active&&e.type!=ln.SENSOR)if(null!=e.colarb){var _t=e.colarb;_t.invalidated&&(_t.invalidated=!1,_t.userdef_restitution||(_t.s1.material.elasticity<=-1/0||_t.s2.material.elasticity<=-1/0?_t.restitution=0:_t.s1.material.elasticity>=1/0||_t.s2.material.elasticity>=1/0?_t.restitution=1:_t.restitution=(_t.s1.material.elasticity+_t.s2.material.elasticity)/2,_t.restitution<0&&(_t.restitution=0),1<_t.restitution&&(_t.restitution=1)),_t.userdef_dyn_fric||(_t.dyn_fric=Math.sqrt(_t.s1.material.dynamicFriction*_t.s2.material.dynamicFriction)),_t.userdef_stat_fric||(_t.stat_fric=Math.sqrt(_t.s1.material.staticFriction*_t.s2.material.staticFriction)),_t.userdef_rfric||(_t.rfric=Math.sqrt(_t.s1.material.rollingFriction*_t.s2.material.rollingFriction))),-1==_t.pre_dt&&(_t.pre_dt=t);var yt=t/_t.pre_dt;_t.pre_dt=t;var xt=_t.b1.smass+_t.b2.smass,mt=!(_t.hc2=!1);_t.biasCoef=2!=_t.b1.type||2!=_t.b2.type?_t.continuous?Qs.contactContinuousStaticBiasCoef:Qs.contactStaticBiasCoef:_t.continuous?Qs.contactContinuousBiasCoef:Qs.contactBiasCoef,_t.continuous=!1;for(var ft=null,vt=null,gt=_t.innards.next,zt=_t.contacts.next;null!=zt;){var bt=zt;if(bt.stamp+Qs.arbiterExpirationDelay<_t.stamp){var wt,St,Ct=_t.contacts;null==ft?(St=(wt=Ct.next).next,Ct.next=St,null==Ct.next&&(Ct.pushmod=!0)):(St=(wt=ft.next).next,null==(ft.next=St)&&(Ct.pushmod=!0)),wt._inuse=!1,Ct.modified=!0,Ct.length--,Ct.pushmod=!0,zt=St;var Mt,Pt,kt=_t.innards;null==vt?(Pt=(Mt=kt.next).next,kt.next=Pt,null==kt.next&&(kt.pushmod=!0)):(Pt=(Mt=vt.next).next,null==(vt.next=Pt)&&(kt.pushmod=!0)),Mt._inuse=!1,kt.modified=!0,kt.length--,kt.pushmod=!0,gt=Pt,bt.arbiter=null,bt.next=Xo.zpp_pool,Xo.zpp_pool=bt}else{var Tt=bt.inner,Gt=bt.active;if(bt.active=bt.stamp==_t.stamp,bt.active){mt?(mt=!1,_t.c1=Tt,_t.oc1=bt):(_t.hc2=!0,_t.c2=Tt,_t.oc2=bt),Tt.r2x=bt.px-_t.b2.posx,Tt.r2y=bt.py-_t.b2.posy,Tt.r1x=bt.px-_t.b1.posx,Tt.r1y=bt.py-_t.b1.posy;var Ot=Tt.r2x*_t.nx+Tt.r2y*_t.ny,At=xt+_t.b2.sinertia*(Ot*Ot),Et=Tt.r1x*_t.nx+Tt.r1y*_t.ny;At+=_t.b1.sinertia*(Et*Et),Tt.tMass=At<Qs.epsilon*Qs.epsilon?0:1/At;var It=_t.ny*Tt.r2x-_t.nx*Tt.r2y,Bt=xt+_t.b2.sinertia*(It*It),Lt=_t.ny*Tt.r1x-_t.nx*Tt.r1y;Bt+=_t.b1.sinertia*(Lt*Lt),Tt.nMass=Bt<Qs.epsilon*Qs.epsilon?0:1/Bt;var Dt=0,Rt=0,Ft=_t.b2.angvel+_t.b2.kinangvel;Dt=_t.b2.velx+_t.b2.kinvelx-Tt.r2y*Ft,Rt=_t.b2.vely+_t.b2.kinvely+Tt.r2x*Ft,Ft=_t.b1.angvel+_t.b1.kinangvel,Dt-=_t.b1.velx+_t.b1.kinvelx-Tt.r1y*Ft,Rt-=_t.b1.vely+_t.b1.kinvely+Tt.r1x*Ft;var jt=_t.nx*Dt+_t.ny*Rt;bt.elasticity=_t.restitution,Tt.bounce=jt*bt.elasticity,Tt.bounce>-Qs.elasticThreshold&&(Tt.bounce=0),jt=Rt*_t.nx-Dt*_t.ny;var Nt=Qs.staticFrictionThreshold;Tt.friction=Nt*Nt<jt*jt?_t.dyn_fric:_t.stat_fric,Tt.jnAcc*=yt,Tt.jtAcc*=yt}Gt!=bt.active&&(_t.contacts.modified=!0),ft=zt,gt=(vt=gt).next,zt=zt.next}}if(_t.hc2){if(_t.hpc2=!0,_t.oc1.posOnly){var Ut=_t.c1;_t.c1=_t.c2,_t.c2=Ut;var Ht=_t.oc1;_t.oc1=_t.oc2,_t.oc2=Ht,_t.hc2=!1}else _t.oc2.posOnly&&(_t.hc2=!1);_t.oc1.posOnly&&(mt=!0)}else _t.hpc2=!1;if(_t.jrAcc*=yt,mt||(_t.rn1a=_t.ny*_t.c1.r1x-_t.nx*_t.c1.r1y,_t.rt1a=_t.c1.r1x*_t.nx+_t.c1.r1y*_t.ny,_t.rn1b=_t.ny*_t.c1.r2x-_t.nx*_t.c1.r2y,_t.rt1b=_t.c1.r2x*_t.nx+_t.c1.r2y*_t.ny,_t.k1x=_t.b2.kinvelx-_t.c1.r2y*_t.b2.kinangvel-(_t.b1.kinvelx-_t.c1.r1y*_t.b1.kinangvel),_t.k1y=_t.b2.kinvely+_t.c1.r2x*_t.b2.kinangvel-(_t.b1.kinvely+_t.c1.r1x*_t.b1.kinangvel)),_t.hc2)if(_t.rn2a=_t.ny*_t.c2.r1x-_t.nx*_t.c2.r1y,_t.rt2a=_t.c2.r1x*_t.nx+_t.c2.r1y*_t.ny,_t.rn2b=_t.ny*_t.c2.r2x-_t.nx*_t.c2.r2y,_t.rt2b=_t.c2.r2x*_t.nx+_t.c2.r2y*_t.ny,_t.k2x=_t.b2.kinvelx-_t.c2.r2y*_t.b2.kinangvel-(_t.b1.kinvelx-_t.c2.r1y*_t.b1.kinangvel),_t.k2y=_t.b2.kinvely+_t.c2.r2x*_t.b2.kinangvel-(_t.b1.kinvely+_t.c2.r1x*_t.b1.kinangvel),_t.kMassa=xt+_t.b1.sinertia*_t.rn1a*_t.rn1a+_t.b2.sinertia*_t.rn1b*_t.rn1b,_t.kMassb=xt+_t.b1.sinertia*_t.rn1a*_t.rn2a+_t.b2.sinertia*_t.rn1b*_t.rn2b,_t.kMassc=xt+_t.b1.sinertia*_t.rn2a*_t.rn2a+_t.b2.sinertia*_t.rn2b*_t.rn2b,_t.kMassa*_t.kMassa+2*_t.kMassb*_t.kMassb+_t.kMassc*_t.kMassc<Qs.illConditionedThreshold*(_t.kMassa*_t.kMassc-_t.kMassb*_t.kMassb)){_t.Ka=_t.kMassa,_t.Kb=_t.kMassb,_t.Kc=_t.kMassc;var Vt=_t.kMassa*_t.kMassc-_t.kMassb*_t.kMassb;if(Vt!=Vt)_t.kMassa=_t.kMassb=_t.kMassc=0;else if(0==Vt)0!=_t.kMassa?_t.kMassa=1/_t.kMassa:_t.kMassa=0,0!=_t.kMassc?_t.kMassc=1/_t.kMassc:_t.kMassc=0,_t.kMassb=0;else{Vt=1/Vt;var Wt=_t.kMassc*Vt;_t.kMassc=_t.kMassa*Vt,_t.kMassa=Wt,_t.kMassb*=-Vt}}else{if(_t.hc2=!1,_t.oc2.dist<_t.oc1.dist){var Xt=_t.c1;_t.c1=_t.c2,_t.c2=Xt}_t.oc2.active=!1,_t.contacts.modified=!0}_t.surfacex=_t.b2.svelx,_t.surfacey=_t.b2.svely,_t.surfacex+=_t.b1.svelx,_t.surfacey+=_t.b1.svely,_t.surfacex=-_t.surfacex,_t.surfacey=-_t.surfacey,_t.rMass=_t.b1.sinertia+_t.b2.sinertia,0!=_t.rMass&&(_t.rMass=1/_t.rMass),mt&&(e.active=!1)}else{var qt=e.fluidarb;-1==qt.pre_dt&&(qt.pre_dt=t);var Yt=t/qt.pre_dt;qt.pre_dt=t,qt.r1x=qt.centroidx-qt.b1.posx,qt.r1y=qt.centroidy-qt.b1.posy,qt.r2x=qt.centroidx-qt.b2.posx,qt.r2y=qt.centroidy-qt.b2.posy;var Zt=0,Kt=0;Kt=qt.ws1.fluidEnabled&&null!=qt.ws1.fluidProperties.wrap_gravity?(Zt=qt.ws1.fluidProperties.gravityx,qt.ws1.fluidProperties.gravityy):(Zt=this.gravityx,this.gravityy);var Jt=0,Qt=0;Qt=qt.ws2.fluidEnabled&&null!=qt.ws2.fluidProperties.wrap_gravity?(Jt=qt.ws2.fluidProperties.gravityx,qt.ws2.fluidProperties.gravityy):(Jt=this.gravityx,this.gravityy);var $t=0,ei=0;if(qt.ws1.fluidEnabled&&qt.ws2.fluidEnabled){var ti=qt.overlap*qt.ws1.fluidProperties.density,ii=qt.overlap*qt.ws2.fluidProperties.density;if(ii<ti){var ni=ti+ii;$t-=Zt*ni,ei-=Kt*ni}else if(ti<ii){var ri=ti+ii;$t+=Jt*ri,ei+=Qt*ri}else{var oi=0,ai=0;if(oi=Zt+Jt,ai=Kt+Qt,oi*=.5,ai*=.5,qt.ws1.worldCOMx*oi+qt.ws1.worldCOMy*ai>qt.ws2.worldCOMx*oi+qt.ws2.worldCOMy*ai){var si=ti+ii;$t-=oi*si,ei-=ai*si}else{var pi=ti+ii;$t+=oi*pi,ei+=ai*pi}}}else if(qt.ws1.fluidEnabled){var li=qt.overlap*qt.ws1.fluidProperties.density;$t-=Zt*li,ei-=Kt*li}else if(qt.ws2.fluidEnabled){var hi=qt.overlap*qt.ws2.fluidProperties.density;$t+=Jt*hi,ei+=Qt*hi}if($t*=t,ei*=t,qt.buoyx=$t,qt.buoyy=ei,2==qt.b1.type){var ui=qt.b1.imass;qt.b1.velx-=$t*ui,qt.b1.vely-=ei*ui,qt.b1.angvel-=(ei*qt.r1x-$t*qt.r1y)*qt.b1.iinertia}if(2==qt.b2.type){var di=qt.b2.imass;qt.b2.velx+=$t*di,qt.b2.vely+=ei*di,qt.b2.angvel+=(ei*qt.r2x-$t*qt.r2y)*qt.b2.iinertia}if(qt.ws1.fluidEnabled&&0!=qt.ws1.fluidProperties.viscosity||qt.ws2.fluidEnabled&&0!=qt.ws2.fluidProperties.viscosity){qt.nodrag=!1;var ci=0;if(qt.ws1.fluidEnabled&&(qt.ws2.validate_angDrag(),ci=qt.ws1.fluidProperties.viscosity*qt.ws2.angDrag*qt.overlap/qt.ws2.area),qt.ws2.fluidEnabled&&(qt.ws1.validate_angDrag(),ci+=qt.ws2.fluidProperties.viscosity*qt.ws1.angDrag*qt.overlap/qt.ws1.area),0!=ci){var _i=qt.b1.sinertia+qt.b2.sinertia;qt.wMass=0!=_i?1/_i:0,ci*=4e-4;var yi=2*Math.PI*ci;qt.agamma=1/(t*yi*(2+yi*t));var xi=1/(1+qt.agamma);qt.agamma*=xi,qt.wMass*=xi}else qt.wMass=0,qt.agamma=0;var mi=qt.b2.velx+qt.b2.kinvelx-qt.r2y*(qt.b2.angvel+qt.b2.kinangvel)-(qt.b1.velx+qt.b1.kinvelx-qt.r1y*(qt.b2.angvel+qt.b2.kinangvel)),fi=qt.b2.vely+qt.b2.kinvely+qt.r2x*(qt.b2.angvel+qt.b2.kinangvel)-(qt.b1.vely+qt.b1.kinvely+qt.r1x*(qt.b1.angvel+qt.b1.kinangvel));if(!(mi*mi+fi*fi<Qs.epsilon*Qs.epsilon)){var vi=1/Math.sqrt(mi*mi+fi*fi);mi*=vi,fi*=vi,qt.nx=mi,qt.ny=fi}var gi=0;if(qt.ws1.fluidEnabled){var zi=-qt.ws1.fluidProperties.viscosity*qt.overlap/qt.ws2.area;if(0==qt.ws2.type)gi=0-zi*qt.ws2.circle.radius*Qs.fluidLinearDrag/(2*qt.ws2.circle.radius*Math.PI);else{for(var bi=0,wi=0,Si=qt.ws2.polygon.edges.head;null!=Si;){var Ci=Si.elt;bi+=Ci.length;var Mi=zi*Ci.length*(Ci.gnormx*qt.nx+Ci.gnormy*qt.ny);0<Mi&&(Mi=Mi*=-Qs.fluidVacuumDrag),wi-=.5*Mi*Qs.fluidLinearDrag,Si=Si.next}gi=wi/bi}}if(qt.ws2.fluidEnabled){var Pi=-qt.ws2.fluidProperties.viscosity*qt.overlap/qt.ws1.area;if(0==qt.ws1.type)gi-=Pi*qt.ws1.circle.radius*Qs.fluidLinearDrag/(2*qt.ws1.circle.radius*Math.PI);else{for(var ki=0,Ti=0,Gi=qt.ws1.polygon.edges.head;null!=Gi;){var Oi=Gi.elt;ki+=Oi.length;var Ai=Pi*Oi.length*(Oi.gnormx*qt.nx+Oi.gnormy*qt.ny);0<Ai&&(Ai=Ai*=-Qs.fluidVacuumDrag),Ti-=.5*Ai*Qs.fluidLinearDrag,Gi=Gi.next}gi+=Ti/ki}}if(0!=gi){var Ei=qt.b1.smass+qt.b2.smass,Ii=0,Bi=0,Li=0;if(Li=Ii=Ei,(Bi=0)!=qt.b1.sinertia){var Di=qt.r1x*qt.b1.sinertia,Ri=qt.r1y*qt.b1.sinertia;Ii=Ei+Ri*qt.r1y,Bi+=-Ri*qt.r1x,Li=Ei+Di*qt.r1x}if(0!=qt.b2.sinertia){var Fi=qt.r2x*qt.b2.sinertia,ji=qt.r2y*qt.b2.sinertia;Ii+=ji*qt.r2y,Bi+=-ji*qt.r2x,Li+=Fi*qt.r2x}var Ni=Ii*Li-Bi*Bi;if(Ni!=Ni)Ii=Bi=Li=0;else if(0==Ni)Ii=0!=Ii?1/Ii:0,Li=0!=Li?1/Li:0,Bi=0;else{var Ui=Li*(Ni=1/Ni);Li=Ii*Ni,Ii=Ui,Bi*=-Ni}qt.vMassa=Ii,qt.vMassb=Bi,qt.vMassc=Li;var Hi=2*Math.PI*gi;qt.lgamma=1/(t*Hi*(2+Hi*t));var Vi=1/(1+qt.lgamma);qt.lgamma*=Vi,qt.vMassa*=Vi,qt.vMassb*=Vi,qt.vMassc*=Vi}else qt.vMassa=0,qt.vMassb=0,qt.vMassc=0,qt.lgamma=0}else qt.nodrag=!0,qt.dampx=0,qt.dampy=0,qt.adamp=0;qt.dampx*=Yt,qt.dampy*=Yt,qt.adamp*=Yt}}else if(null!=e.colarb){var Wi=e.colarb,Xi=!0,qi=null,Yi=null,Zi=Wi.innards.next;Wi.hc2=!1;for(var Ki=Wi.contacts.next;null!=Ki;){var Ji=Ki;if(Ji.stamp+Qs.arbiterExpirationDelay<Wi.stamp){var Qi,$i,en=Wi.contacts;null==qi?($i=(Qi=en.next).next,en.next=$i,null==en.next&&(en.pushmod=!0)):($i=(Qi=qi.next).next,null==(qi.next=$i)&&(en.pushmod=!0)),Qi._inuse=!1,en.modified=!0,en.length--,en.pushmod=!0,Ki=$i;var tn,nn,rn=Wi.innards;null==Yi?(nn=(tn=rn.next).next,rn.next=nn,null==rn.next&&(rn.pushmod=!0)):(nn=(tn=Yi.next).next,null==(Yi.next=nn)&&(rn.pushmod=!0)),tn._inuse=!1,rn.modified=!0,rn.length--,rn.pushmod=!0,Zi=nn,Ji.arbiter=null,Ji.next=Xo.zpp_pool,Xo.zpp_pool=Ji}else{var on=Ji.inner,an=Ji.active;Ji.active=Ji.stamp==Wi.stamp,Ji.active&&(Xi?(Xi=!1,Wi.c1=on,Wi.oc1=Ji):(Wi.hc2=!0,Wi.c2=on,Wi.oc2=Ji)),an!=Ji.active&&(Wi.contacts.modified=!0),qi=Ki,Zi=(Yi=Zi).next,Ki=Ki.next}}if(Wi.hc2){if(Wi.hpc2=!0,Wi.oc1.posOnly){var sn=Wi.c1;Wi.c1=Wi.c2,Wi.c2=sn;var pn=Wi.oc1;Wi.oc1=Wi.oc2,Wi.oc2=pn,Wi.hc2=!1}else Wi.oc2.posOnly&&(Wi.hc2=!1);Wi.oc1.posOnly&&(Xi=!0)}else Wi.hpc2=!1;Xi&&(e.active=!1)}return ct!=e.active&&(e.b1.arbiters.modified=!0,e.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0),!1},si.prototype.prestep=function(e){for(var t=null,i=this.live_constraints.head;null!=i;){var n=i.elt;n.preStep(e)?(i=this.live_constraints.erase(t),n.broken(),this.constraintCbBreak(n),n.removeOnBreak?(n.component.sleeping=!0,this.midstep=!1,null!=n.compound?n.compound.wrap_constraints.remove(n.outer):this.wrap_constraints.remove(n.outer),this.midstep=!0):n.active=!1,n.clearcache()):i=(t=i).next}var r=null,o=this.c_arbiters_true,a=o.head,s=null!=this.c_arbiters_false;for(s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null);null!=a;)if(this.presteparb(a.elt,e)){var p,l;null==r?(l=(p=o.head).next,o.head=l,null==o.head&&(o.pushmod=!0)):(l=(p=r.next).next,null==(r.next=l)&&(o.pushmod=!0));var h=p;h.elt=null,h.next=ea.zpp_pool,ea.zpp_pool=h,o.modified=!0,o.length--,o.pushmod=!0,a=l,s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null)}else a=(r=a).next,s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null);for(var u=null,d=this.f_arbiters,c=d.head;null!=c;)if(this.presteparb(c.elt,e)){var _,y;null==u?(y=(_=d.head).next,d.head=y,null==d.head&&(d.pushmod=!0)):(y=(_=u.next).next,null==(u.next=y)&&(d.pushmod=!0));var x=_;x.elt=null,x.next=Qo.zpp_pool,Qo.zpp_pool=x,d.modified=!0,d.length--,d.pushmod=!0,c=y}else c=(u=c).next;for(var m=null,f=this.s_arbiters,v=f.head;null!=v;)if(this.presteparb(v.elt,e)){var g,z;null==m?(z=(g=f.head).next,f.head=z,null==f.head&&(f.pushmod=!0)):(z=(g=m.next).next,null==(m.next=z)&&(f.pushmod=!0));var b=g;b.elt=null,b.next=$o.zpp_pool,$o.zpp_pool=b,f.modified=!0,f.length--,f.pushmod=!0,v=z}else v=(m=v).next},si.prototype.warmStart=function(){for(var e=this.f_arbiters.head;null!=e;){var t=e.elt;if(t.active&&0!=(1&t.immState)){var i=t.b1.imass;t.b1.velx-=t.dampx*i,t.b1.vely-=t.dampy*i;var n=t.b2.imass;t.b2.velx+=t.dampx*n,t.b2.vely+=t.dampy*n,t.b1.angvel-=t.b1.iinertia*(t.dampy*t.r1x-t.dampx*t.r1y),t.b2.angvel+=t.b2.iinertia*(t.dampy*t.r2x-t.dampx*t.r2y),t.b1.angvel-=t.adamp*t.b1.iinertia,t.b2.angvel+=t.adamp*t.b2.iinertia}e=e.next}var r=this.c_arbiters_false.head,o=!0;for(null==r&&(r=this.c_arbiters_true.head,o=!1);null!=r;){var a=r.elt;if(a.active&&0!=(1&a.immState)){var s=a.nx*a.c1.jnAcc-a.ny*a.c1.jtAcc,p=a.ny*a.c1.jnAcc+a.nx*a.c1.jtAcc,l=a.b1.imass;a.b1.velx-=s*l,a.b1.vely-=p*l,a.b1.angvel-=a.b1.iinertia*(p*a.c1.r1x-s*a.c1.r1y);var h=a.b2.imass;if(a.b2.velx+=s*h,a.b2.vely+=p*h,a.b2.angvel+=a.b2.iinertia*(p*a.c1.r2x-s*a.c1.r2y),a.hc2){var u=a.nx*a.c2.jnAcc-a.ny*a.c2.jtAcc,d=a.ny*a.c2.jnAcc+a.nx*a.c2.jtAcc,c=a.b1.imass;a.b1.velx-=u*c,a.b1.vely-=d*c,a.b1.angvel-=a.b1.iinertia*(d*a.c2.r1x-u*a.c2.r1y);var _=a.b2.imass;a.b2.velx+=u*_,a.b2.vely+=d*_,a.b2.angvel+=a.b2.iinertia*(d*a.c2.r2x-u*a.c2.r2y)}a.b2.angvel+=a.jrAcc*a.b2.iinertia,a.b1.angvel-=a.jrAcc*a.b1.iinertia}r=r.next,o&&null==r&&(r=this.c_arbiters_true.head,o=!1)}for(var y=this.live_constraints.head;null!=y;)y.elt.warmStart(),y=y.next},si.prototype.iterateVel=function(e){for(var t=0;t<e;){++t;for(var i=this.f_arbiters.head;null!=i;){var n=i.elt;if(n.active&&0!=(1&n.immState)&&!n.nodrag){var r=n.b1.angvel+n.b1.kinangvel,o=n.b2.angvel+n.b2.kinangvel,a=n.b1.velx+n.b1.kinvelx-n.r1y*r-(n.b2.velx+n.b2.kinvelx-n.r2y*o),s=n.b1.vely+n.b1.kinvely+n.r1x*r-(n.b2.vely+n.b2.kinvely+n.r2x*o),p=n.vMassa*a+n.vMassb*s;s=n.vMassb*a+n.vMassc*s,a=p;var l=n.lgamma;a-=n.dampx*l,s-=n.dampy*l,n.dampx+=a,n.dampy+=s;var h=n.b1.imass;n.b1.velx-=a*h,n.b1.vely-=s*h;var u=n.b2.imass;n.b2.velx+=a*u,n.b2.vely+=s*u,n.b1.angvel-=n.b1.iinertia*(s*n.r1x-a*n.r1y),n.b2.angvel+=n.b2.iinertia*(s*n.r2x-a*n.r2y);var d=(r-o)*n.wMass-n.adamp*n.agamma;n.adamp+=d,n.b1.angvel-=d*n.b1.iinertia,n.b2.angvel+=d*n.b2.iinertia}i=i.next}for(var c=null,_=this.live_constraints.head;null!=_;){var y=_.elt;y.applyImpulseVel()?(_=this.live_constraints.erase(c),y.broken(),this.constraintCbBreak(y),y.removeOnBreak?(y.component.sleeping=!0,this.midstep=!1,null!=y.compound?y.compound.wrap_constraints.remove(y.outer):this.wrap_constraints.remove(y.outer),this.midstep=!0):y.active=!1,y.clearcache()):_=(c=_).next}var x=this.c_arbiters_false.head,m=!0;for(null==x&&(x=this.c_arbiters_true.head,m=!1);null!=x;){var f=x.elt;if(f.active&&0!=(1&f.immState)){var v,g,z,b,w,S,C=f.k1x+f.b2.velx-f.c1.r2y*f.b2.angvel-(f.b1.velx-f.c1.r1y*f.b1.angvel),M=f.k1y+f.b2.vely+f.c1.r2x*f.b2.angvel-(f.b1.vely+f.c1.r1x*f.b1.angvel);if(z=(M*f.nx-C*f.ny+f.surfacex)*f.c1.tMass,(b=f.c1.friction*f.c1.jnAcc)<(S=(w=f.c1.jtAcc)-z)?S=b:S<-b&&(S=-b),z=S-w,f.c1.jtAcc=S,v=-f.ny*z,g=f.nx*z,f.b2.velx+=v*f.b2.imass,f.b2.vely+=g*f.b2.imass,f.b1.velx-=v*f.b1.imass,f.b1.vely-=g*f.b1.imass,f.b2.angvel+=f.rt1b*z*f.b2.iinertia,f.b1.angvel-=f.rt1a*z*f.b1.iinertia,f.hc2){var P=f.k2x+f.b2.velx-f.c2.r2y*f.b2.angvel-(f.b1.velx-f.c2.r1y*f.b1.angvel),k=f.k2y+f.b2.vely+f.c2.r2x*f.b2.angvel-(f.b1.vely+f.c2.r1x*f.b1.angvel);z=(k*f.nx-P*f.ny+f.surfacex)*f.c2.tMass,(b=f.c2.friction*f.c2.jnAcc)<(S=(w=f.c2.jtAcc)-z)?S=b:S<-b&&(S=-b),z=S-w,f.c2.jtAcc=S,v=-f.ny*z,g=f.nx*z,f.b2.velx+=v*f.b2.imass,f.b2.vely+=g*f.b2.imass,f.b1.velx-=v*f.b1.imass,f.b1.vely-=g*f.b1.imass,f.b2.angvel+=f.rt2b*z*f.b2.iinertia,f.b1.angvel-=f.rt2a*z*f.b1.iinertia,C=f.k1x+f.b2.velx-f.c1.r2y*f.b2.angvel-(f.b1.velx-f.c1.r1y*f.b1.angvel),M=f.k1y+f.b2.vely+f.c1.r2x*f.b2.angvel-(f.b1.vely+f.c1.r1x*f.b1.angvel),P=f.k2x+f.b2.velx-f.c2.r2y*f.b2.angvel-(f.b1.velx-f.c2.r1y*f.b1.angvel),k=f.k2y+f.b2.vely+f.c2.r2x*f.b2.angvel-(f.b1.vely+f.c2.r1x*f.b1.angvel);var T=f.c1.jnAcc,G=f.c2.jnAcc,O=C*f.nx+M*f.ny+f.surfacey+f.c1.bounce-(f.Ka*T+f.Kb*G),A=P*f.nx+k*f.ny+f.surfacey+f.c2.bounce-(f.Kb*T+f.Kc*G),E=-(f.kMassa*O+f.kMassb*A),I=-(f.kMassb*O+f.kMassc*A);0<=E&&0<=I?(O=E-T,A=I-G,f.c1.jnAcc=E,f.c2.jnAcc=I):0<=(E=-f.c1.nMass*O)&&0<=f.Kb*E+A?(O=E-T,A=-G,f.c1.jnAcc=E,f.c2.jnAcc=0):0<=(I=-f.c2.nMass*A)&&0<=f.Kb*I+O?(O=-T,A=I-G,f.c1.jnAcc=0,f.c2.jnAcc=I):0<=O&&0<=A?(O=-T,A=-G,f.c1.jnAcc=f.c2.jnAcc=0):A=O=0,z=O+A,v=f.nx*z,g=f.ny*z,f.b2.velx+=v*f.b2.imass,f.b2.vely+=g*f.b2.imass,f.b1.velx-=v*f.b1.imass,f.b1.vely-=g*f.b1.imass,f.b2.angvel+=(f.rn1b*O+f.rn2b*A)*f.b2.iinertia,f.b1.angvel-=(f.rn1a*O+f.rn2a*A)*f.b1.iinertia}else 0!=f.radius&&(z=(f.b2.angvel-f.b1.angvel)*f.rMass,b=f.rfric*f.c1.jnAcc,w=f.jrAcc,f.jrAcc-=z,f.jrAcc>b?f.jrAcc=b:f.jrAcc<-b&&(f.jrAcc=-b),z=f.jrAcc-w,f.b2.angvel+=z*f.b2.iinertia,f.b1.angvel-=z*f.b1.iinertia),C=f.k1x+f.b2.velx-f.c1.r2y*f.b2.angvel-(f.b1.velx-f.c1.r1y*f.b1.angvel),M=f.k1y+f.b2.vely+f.c1.r2x*f.b2.angvel-(f.b1.vely+f.c1.r1x*f.b1.angvel),z=(f.c1.bounce+(f.nx*C+f.ny*M)+f.surfacey)*f.c1.nMass,(S=(w=f.c1.jnAcc)-z)<0&&(S=0),z=S-w,f.c1.jnAcc=S,v=f.nx*z,g=f.ny*z,f.b2.velx+=v*f.b2.imass,f.b2.vely+=g*f.b2.imass,f.b1.velx-=v*f.b1.imass,f.b1.vely-=g*f.b1.imass,f.b2.angvel+=f.rn1b*z*f.b2.iinertia,f.b1.angvel-=f.rn1a*z*f.b1.iinertia}x=x.next,m&&null==x&&(x=this.c_arbiters_true.head,m=!1)}}},si.prototype.iteratePos=function(e){for(var t=0;t<e;){++t;for(var i=null,n=this.live_constraints.head;null!=n;){var r=n.elt;!r.__velocity&&r.stiff&&r.applyImpulsePos()?(n=this.live_constraints.erase(i),r.broken(),this.constraintCbBreak(r),r.removeOnBreak?(r.component.sleeping=!0,this.midstep=!1,null!=r.compound?r.compound.wrap_constraints.remove(r.outer):this.wrap_constraints.remove(r.outer),this.midstep=!0):r.active=!1,r.clearcache()):n=(i=n).next}var o=this.c_arbiters_false.head,a=!0;for(null==o&&(o=this.c_arbiters_true.head,a=!1);null!=o;){var s=o.elt;if(s.active&&0!=(1&s.immState))if(2==s.ptype){var p=s.c1,l=0,h=0;l=s.b2.axisy*p.lr2x-s.b2.axisx*p.lr2y,h=p.lr2x*s.b2.axisx+p.lr2y*s.b2.axisy,l+=s.b2.posx,h+=s.b2.posy;var u=0,d=0;u=s.b1.axisy*p.lr1x-s.b1.axisx*p.lr1y,d=p.lr1x*s.b1.axisx+p.lr1y*s.b1.axisy;var c=0,_=0;c=l-(u+=s.b1.posx),_=h-(d+=s.b1.posy);var y=Math.sqrt(c*c+_*_),x=s.radius-Qs.collisionSlop,m=y-x;if(c*s.nx+_*s.ny<0&&(c=-c,_=-_,m-=s.radius),m<0)if(y<Qs.epsilon)0!=s.b1.smass?s.b1.posx+=10*Qs.epsilon:s.b2.posx+=10*Qs.epsilon;else{var f=1/y;c*=f;var v=.5*(u+l),g=.5*(d+h),z=y-x,b=(_*=f)*(u=v-s.b1.posx)-c*(d=g-s.b1.posy),w=_*(l=v-s.b2.posx)-c*(h=g-s.b2.posy),S=s.b2.smass+w*w*s.b2.sinertia+s.b1.smass+b*b*s.b1.sinertia;if(0!=S){var C,M,P=-s.biasCoef*z/S;C=c*P,M=_*P;var k=s.b1.imass;s.b1.posx-=C*k,s.b1.posy-=M*k;var T=s.b1,G=-b*s.b1.iinertia*P;if(T.rot+=G,1e-4<G*G)T.axisx=Math.sin(T.rot),T.axisy=Math.cos(T.rot);else{var O=G*G,A=1-.5*O,E=1-O*O/8,I=(A*T.axisx+G*T.axisy)*E;T.axisy=(A*T.axisy-G*T.axisx)*E,T.axisx=I}var B=s.b2.imass;s.b2.posx+=C*B,s.b2.posy+=M*B;var L=s.b2,D=w*s.b2.iinertia*P;if(L.rot+=D,1e-4<D*D)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var R=D*D,F=1-.5*R,j=1-R*R/8,N=(F*L.axisx+D*L.axisy)*j;L.axisy=(F*L.axisy-D*L.axisx)*j,L.axisx=N}}}}else{var U,H=0,V=0,W=0,X=0,q=0,Y=0;0==s.ptype?(H=s.b1.axisy*s.lnormx-s.b1.axisx*s.lnormy,V=s.lnormx*s.b1.axisx+s.lnormy*s.b1.axisy,U=s.lproj+(H*s.b1.posx+V*s.b1.posy),W=s.b2.axisy*s.c1.lr1x-s.b2.axisx*s.c1.lr1y,X=s.c1.lr1x*s.b2.axisx+s.c1.lr1y*s.b2.axisy,W+=s.b2.posx,X+=s.b2.posy,s.hpc2&&(q=s.b2.axisy*s.c2.lr1x-s.b2.axisx*s.c2.lr1y,Y=s.c2.lr1x*s.b2.axisx+s.c2.lr1y*s.b2.axisy,q+=s.b2.posx,Y+=s.b2.posy)):(H=s.b2.axisy*s.lnormx-s.b2.axisx*s.lnormy,V=s.lnormx*s.b2.axisx+s.lnormy*s.b2.axisy,U=s.lproj+(H*s.b2.posx+V*s.b2.posy),W=s.b1.axisy*s.c1.lr1x-s.b1.axisx*s.c1.lr1y,X=s.c1.lr1x*s.b1.axisx+s.c1.lr1y*s.b1.axisy,W+=s.b1.posx,X+=s.b1.posy,s.hpc2&&(q=s.b1.axisy*s.c2.lr1x-s.b1.axisx*s.c2.lr1y,Y=s.c2.lr1x*s.b1.axisx+s.c2.lr1y*s.b1.axisy,q+=s.b1.posx,Y+=s.b1.posy));var Z=W*H+X*V-U-s.radius;Z+=Qs.collisionSlop;var K=0;if(s.hpc2&&(K=q*H+Y*V-U-s.radius,K+=Qs.collisionSlop),Z<0||K<0){s.rev&&(H=-H,V=-V);var J,Q;J=W-s.b1.posx,Q=X-s.b1.posy;var $,ee;$=W-s.b2.posx,ee=X-s.b2.posy;if(s.hpc2){var te=V*J-H*Q,ie=V*$-H*ee,ne=V*(q-s.b1.posx)-H*(Y-s.b1.posy),re=V*(q-s.b2.posx)-H*(Y-s.b2.posy),oe=s.b1.smass+s.b2.smass;s.kMassa=oe+s.b1.sinertia*te*te+s.b2.sinertia*ie*ie,s.kMassb=oe+s.b1.sinertia*te*ne+s.b2.sinertia*ie*re,s.kMassc=oe+s.b1.sinertia*ne*ne+s.b2.sinertia*re*re;var ae,se,pe;ae=s.kMassa,se=s.kMassb,pe=s.kMassc;for(var le=Z*s.biasCoef,he=K*s.biasCoef;;){var ue=0,de=0;ue=-(ue=le),de=-(de=he);var ce=s.kMassa*s.kMassc-s.kMassb*s.kMassb;if(ce!=ce)ue=de=0;else if(0==ce)0!=s.kMassa?ue/=s.kMassa:ue=0,0!=s.kMassc?de/=s.kMassc:de=0;else{var _e=(ce=1/ce)*(s.kMassc*ue-s.kMassb*de);de=ce*(s.kMassa*de-s.kMassb*ue),ue=_e}if(0<=ue&&0<=de){var ye=(ue+de)*s.b1.imass;s.b1.posx-=H*ye,s.b1.posy-=V*ye;var xe=s.b1,me=-s.b1.iinertia*(te*ue+ne*de);if(xe.rot+=me,1e-4<me*me)xe.axisx=Math.sin(xe.rot),xe.axisy=Math.cos(xe.rot);else{var fe=me*me,ve=1-.5*fe,ge=1-fe*fe/8,ze=(ve*xe.axisx+me*xe.axisy)*ge;xe.axisy=(ve*xe.axisy-me*xe.axisx)*ge,xe.axisx=ze}var be=(ue+de)*s.b2.imass;s.b2.posx+=H*be,s.b2.posy+=V*be;var we=s.b2,Se=s.b2.iinertia*(ie*ue+re*de);if(we.rot+=Se,1e-4<Se*Se)we.axisx=Math.sin(we.rot),we.axisy=Math.cos(we.rot);else{var Ce=Se*Se,Me=1-.5*Ce,Pe=1-Ce*Ce/8,ke=(Me*we.axisx+Se*we.axisy)*Pe;we.axisy=(Me*we.axisy-Se*we.axisx)*Pe,we.axisx=ke}break}if((de=0)<=(ue=-le/ae)&&0<=se*ue+he){var Te=(ue+de)*s.b1.imass;s.b1.posx-=H*Te,s.b1.posy-=V*Te;var Ge=s.b1,Oe=-s.b1.iinertia*(te*ue+ne*de);if(Ge.rot+=Oe,1e-4<Oe*Oe)Ge.axisx=Math.sin(Ge.rot),Ge.axisy=Math.cos(Ge.rot);else{var Ae=Oe*Oe,Ee=1-.5*Ae,Ie=1-Ae*Ae/8,Be=(Ee*Ge.axisx+Oe*Ge.axisy)*Ie;Ge.axisy=(Ee*Ge.axisy-Oe*Ge.axisx)*Ie,Ge.axisx=Be}var Le=(ue+de)*s.b2.imass;s.b2.posx+=H*Le,s.b2.posy+=V*Le;var De=s.b2,Re=s.b2.iinertia*(ie*ue+re*de);if(De.rot+=Re,1e-4<Re*Re)De.axisx=Math.sin(De.rot),De.axisy=Math.cos(De.rot);else{var Fe=Re*Re,je=1-.5*Fe,Ne=1-Fe*Fe/8,Ue=(je*De.axisx+Re*De.axisy)*Ne;De.axisy=(je*De.axisy-Re*De.axisx)*Ne,De.axisx=Ue}break}if((ue=0)<=(de=-he/pe)&&0<=se*de+le){var He=(ue+de)*s.b1.imass;s.b1.posx-=H*He,s.b1.posy-=V*He;var Ve=s.b1,We=-s.b1.iinertia*(te*ue+ne*de);if(Ve.rot+=We,1e-4<We*We)Ve.axisx=Math.sin(Ve.rot),Ve.axisy=Math.cos(Ve.rot);else{var Xe=We*We,qe=1-.5*Xe,Ye=1-Xe*Xe/8,Ze=(qe*Ve.axisx+We*Ve.axisy)*Ye;Ve.axisy=(qe*Ve.axisy-We*Ve.axisx)*Ye,Ve.axisx=Ze}var Ke=(ue+de)*s.b2.imass;s.b2.posx+=H*Ke,s.b2.posy+=V*Ke;var Je=s.b2,Qe=s.b2.iinertia*(ie*ue+re*de);if(Je.rot+=Qe,1e-4<Qe*Qe)Je.axisx=Math.sin(Je.rot),Je.axisy=Math.cos(Je.rot);else{var $e=Qe*Qe,et=1-.5*$e,tt=1-$e*$e/8,it=(et*Je.axisx+Qe*Je.axisy)*tt;Je.axisy=(et*Je.axisy-Qe*Je.axisx)*tt,Je.axisx=it}break}break}}else{var nt=V*J-H*Q,rt=V*$-H*ee,ot=s.b2.smass+rt*rt*s.b2.sinertia+s.b1.smass+nt*nt*s.b1.sinertia;if(0!=ot){var at,st,pt=-s.biasCoef*Z/ot;at=H*pt,st=V*pt;var lt=s.b1.imass;s.b1.posx-=at*lt,s.b1.posy-=st*lt;var ht=s.b1,ut=-nt*s.b1.iinertia*pt;if(ht.rot+=ut,1e-4<ut*ut)ht.axisx=Math.sin(ht.rot),ht.axisy=Math.cos(ht.rot);else{var dt=ut*ut,ct=1-.5*dt,_t=1-dt*dt/8,yt=(ct*ht.axisx+ut*ht.axisy)*_t;ht.axisy=(ct*ht.axisy-ut*ht.axisx)*_t,ht.axisx=yt}var xt=s.b2.imass;s.b2.posx+=at*xt,s.b2.posy+=st*xt;var mt=s.b2,ft=rt*s.b2.iinertia*pt;if(mt.rot+=ft,1e-4<ft*ft)mt.axisx=Math.sin(mt.rot),mt.axisy=Math.cos(mt.rot);else{var vt=ft*ft,gt=1-.5*vt,zt=1-vt*vt/8,bt=(gt*mt.axisx+ft*mt.axisy)*zt;mt.axisy=(gt*mt.axisy-ft*mt.axisx)*zt,mt.axisx=bt}}}}}o=o.next,a&&null==o&&(o=this.c_arbiters_true.head,a=!1)}}},si.prototype.group_ignore=function(e,t){for(var i=e;null!=i&&null==i.group;)i=null!=i.ishape?i.ishape.body:null!=i.icompound?i.icompound.compound:i.ibody.compound;var n=null==i?null:i.group;if(null==n)return!1;for(var r=t;null!=r&&null==r.group;)r=null!=r.ishape?r.ishape.body:null!=r.icompound?r.icompound.compound:r.ibody.compound;var o=null==r?null:r.group;if(null==o)return!1;for(var a=!1;null!=n&&null!=o;){if(n==o){a=n.ignore;break}n.depth<o.depth?o=o.group:n=n.group}return a},si.prototype.interactionType=function(e,t,i,n){var r;r=!1;for(var o,a=i.constraints.head;null!=a;){var s=a.elt;if(s.ignore&&s.pair_exists(i.id,n.id)){r=!0;break}a=a.next}if(r)o=!1;else{for(var p=e;null!=p&&null==p.group;)p=null!=p.ishape?p.ishape.body:null!=p.icompound?p.icompound.compound:p.ibody.compound;var l,h=null==p?null:p.group;if(null==h)l=!1;else{for(var u=t;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var d=null==u?null:u.group;if(null==d)l=!1;else{for(var c=!1;null!=h&&null!=d;){if(h==d){c=h.ignore;break}h.depth<d.depth?d=d.group:h=h.group}l=c}}o=!l}if(o){var _,y;if(e.sensorEnabled||t.sensorEnabled){var x=e.filter,m=t.filter;_=0!=(x.sensorMask&m.sensorGroup)&&0!=(m.sensorMask&x.sensorGroup)}else _=!1;if(_)return 2;if(e.fluidEnabled||t.fluidEnabled){var f=e.filter,v=t.filter;y=0!=(f.fluidMask&v.fluidGroup)&&0!=(v.fluidMask&f.fluidGroup)}else y=!1;if(!!y&&!(0==i.imass&&0==n.imass&&0==i.iinertia&&0==n.iinertia))return 0;var g=e.filter,z=t.filter;return 0!=(g.collisionMask&z.collisionGroup)&&0!=(z.collisionMask&g.collisionGroup)&&!(0==i.imass&&0==n.imass&&0==i.iinertia&&0==n.iinertia)?1:-1}return-1},si.prototype.precb=null,si.prototype.prelisteners=null,si.prototype.narrowPhase=function(e,t,i,n,r){var o,a=null,s=e.body,p=t.body;o=!1;for(var l,h,u=s.constraints.head;null!=u;){var d=u.elt;if(d.ignore&&d.pair_exists(s.id,p.id)){o=!0;break}u=u.next}if(o)h=!1;else{for(var c=e;null!=c&&null==c.group;)c=null!=c.ishape?c.ishape.body:null!=c.icompound?c.icompound.compound:c.ibody.compound;var _,y=null==c?null:c.group;if(null==y)_=!1;else{for(var x=t;null!=x&&null==x.group;)x=null!=x.ishape?x.ishape.body:null!=x.icompound?x.icompound.compound:x.ibody.compound;var m=null==x?null:x.group;if(null==m)_=!1;else{for(var f=!1;null!=y&&null!=m;){if(y==m){f=y.ignore;break}y.depth<m.depth?m=m.group:y=y.group}_=f}}h=!_}if(h){var v;if(e.sensorEnabled||t.sensorEnabled){var g=e.filter,z=t.filter;v=0!=(g.sensorMask&z.sensorGroup)&&0!=(z.sensorMask&g.sensorGroup)}else v=!1;if(v)l=2;else{var b;if(e.fluidEnabled||t.fluidEnabled){var w=e.filter,S=t.filter;b=0!=(w.fluidMask&S.fluidGroup)&&0!=(S.fluidMask&w.fluidGroup)}else b=!1;if(!!b&&!(0==s.imass&&0==p.imass&&0==s.iinertia&&0==p.iinertia))l=0;else{var C=e.filter,M=t.filter;l=0!=(C.collisionMask&M.collisionGroup)&&0!=(M.collisionMask&C.collisionGroup)&&!(0==s.imass&&0==p.imass&&0==s.iinertia&&0==p.iinertia)?1:-1}}}else l=-1;if(-1!=l){var P,k;e.type>t.type?(P=t,k=e):e.type==t.type?e.id<t.id?(P=e,k=t):(k=e,P=t):(P=e,k=t);var T=P==t;if(0==l){var G;if(null==n){for(var O=null,A=(s.arbiters.length<p.arbiters.length?s:p).arbiters.head;null!=A;){var E=A.elt;if(E.id==P.id&&E.di==k.id){O=E;break}A=A.next}G=O}else G=n;var I,B=null==G,L=!1;if(B)null==Vo.zpp_pool?I=new Vo:(I=Vo.zpp_pool,Vo.zpp_pool=I.next,I.next=null);else if(null==G.fluidarb){G.cleared=!0;for(var D=G.b1.arbiters,R=null,F=D.head;null!=F;){if(F.elt==G){var j,N;null==R?(N=(j=D.head).next,D.head=N,null==D.head&&(D.pushmod=!0)):(N=(j=R.next).next,null==(R.next=N)&&(D.pushmod=!0));var U=j;U.elt=null,U.next=Zo.zpp_pool,Zo.zpp_pool=U,D.modified=!0,D.length--,D.pushmod=!0;break}F=(R=F).next}for(var H=G.b2.arbiters,V=null,W=H.head;null!=W;){if(W.elt==G){var X,q;null==V?(q=(X=H.head).next,H.head=q,null==H.head&&(H.pushmod=!0)):(q=(X=V.next).next,null==(V.next=q)&&(H.pushmod=!0));var Y=X;Y.elt=null,Y.next=Zo.zpp_pool,Zo.zpp_pool=Y,H.modified=!0,H.length--,H.pushmod=!0;break}W=(V=W).next}null!=G.pair&&(G.pair.arb=null,G.pair=null),G.active=!1,this.f_arbiters.modified=!0,null==Vo.zpp_pool?I=new Vo:(I=Vo.zpp_pool,Vo.zpp_pool=I.next,I.next=null),L=B=I.intchange=!0}else I=G.fluidarb;if(B||I.stamp!=this.stamp||r)if(I.stamp=this.stamp,$s.flowCollide(P,k,I)){if(B){var Z=P.id,K=k.id;I.b1=e.body,I.ws1=e,I.b2=t.body,I.ws2=t,I.id=Z,I.di=K;var J,Q=I.b1.arbiters;null==Zo.zpp_pool?J=new Zo:(J=Zo.zpp_pool,Zo.zpp_pool=J.next,J.next=null),J.elt=I;var $=J;$.next=Q.head,Q.head=$,Q.modified=!0,Q.length++;var ee,te=I.b2.arbiters;null==Zo.zpp_pool?ee=new Zo:(ee=Zo.zpp_pool,Zo.zpp_pool=ee.next,ee.next=null),ee.elt=I;var ie=ee;ie.next=te.head,te.head=ie,te.modified=!0,te.length++,I.active=!0,I.present=0,I.cleared=!1,I.sleeping=!1,I.fresh=!1,I.presentable=!1,I.nx=0,I.ny=1,I.dampx=0,I.dampy=0,I.adamp=0;var ne,re=this.f_arbiters;null==Qo.zpp_pool?ne=new Qo:(ne=Qo.zpp_pool,Qo.zpp_pool=ne.next,ne.next=null),ne.elt=I;var oe=ne;oe.next=re.head,re.head=oe,re.modified=!0,re.length++,I.fresh=!L}else I.fresh=I.up_stamp<this.stamp-1||I.endGenerated==this.stamp&&r;if(I.up_stamp=I.stamp,I.fresh||0==(4&I.immState)){for(var ae=!(I.immState=1),se=I.ws1.id>I.ws2.id?I.ws2:I.ws1,pe=I.ws1.id>I.ws2.id?I.ws1:I.ws2,le=this.mrca1;null!=le.head;){var he=le.head;le.head=he.next,he.elt=null,he.next=Jo.zpp_pool,Jo.zpp_pool=he,null==le.head&&(le.pushmod=!0),le.modified=!0,le.length--}le.pushmod=!0;for(var ue=this.mrca2;null!=ue.head;){var de=ue.head;ue.head=de.next,de.elt=null,de.next=Jo.zpp_pool,Jo.zpp_pool=de,null==ue.head&&(ue.pushmod=!0),ue.modified=!0,ue.length--}if(ue.pushmod=!0,null!=se.cbSet){var ce,_e=this.mrca1;null==Jo.zpp_pool?ce=new Jo:(ce=Jo.zpp_pool,Jo.zpp_pool=ce.next,ce.next=null),ce.elt=se;var ye=ce;ye.next=_e.head,_e.head=ye,_e.modified=!0,_e.length++}if(null!=se.body.cbSet){var xe,me=this.mrca1,fe=se.body;null==Jo.zpp_pool?xe=new Jo:(xe=Jo.zpp_pool,Jo.zpp_pool=xe.next,xe.next=null),xe.elt=fe;var ve=xe;ve.next=me.head,me.head=ve,me.modified=!0,me.length++}if(null!=pe.cbSet){var ge,ze=this.mrca2;null==Jo.zpp_pool?ge=new Jo:(ge=Jo.zpp_pool,Jo.zpp_pool=ge.next,ge.next=null),ge.elt=pe;var be=ge;be.next=ze.head,ze.head=be,ze.modified=!0,ze.length++}if(null!=pe.body.cbSet){var we,Se=this.mrca2,Ce=pe.body;null==Jo.zpp_pool?we=new Jo:(we=Jo.zpp_pool,Jo.zpp_pool=we.next,we.next=null),we.elt=Ce;var Me=we;Me.next=Se.head,Se.head=Me,Se.modified=!0,Se.length++}for(var Pe=se.body.compound,ke=pe.body.compound;Pe!=ke;)if((null==Pe?0:Pe.depth)<(null==ke?0:ke.depth)){if(null!=ke.cbSet){var Te,Ge=this.mrca2;null==Jo.zpp_pool?Te=new Jo:(Te=Jo.zpp_pool,Jo.zpp_pool=Te.next,Te.next=null),Te.elt=ke;var Oe=Te;Oe.next=Ge.head,Ge.head=Oe,Ge.modified=!0,Ge.length++}ke=ke.compound}else{if(null!=Pe.cbSet){var Ae,Ee=this.mrca1;null==Jo.zpp_pool?Ae=new Jo:(Ae=Jo.zpp_pool,Jo.zpp_pool=Ae.next,Ae.next=null),Ae.elt=Pe;var Ie=Ae;Ie.next=Ee.head,Ee.head=Ie,Ee.modified=!0,Ee.length++}Pe=Pe.compound}for(var Be=this.mrca1.head;null!=Be;){for(var Le=Be.elt,De=this.mrca2.head;null!=De;){for(var Re,Fe=De.elt,je=Le.cbSet,Ne=Fe.cbSet,Ue=null,He=(je.cbpairs.length<Ne.cbpairs.length?je.cbpairs:Ne.cbpairs).head;null!=He;){var Ve=He.elt;if(Ve.a==je&&Ve.b==Ne||Ve.a==Ne&&Ve.b==je){Ue=Ve;break}He=He.next}if(null==Ue)null==No.zpp_pool?Re=new No:(Re=No.zpp_pool,No.zpp_pool=Re.next,Re.next=null),Re.zip_listeners=!0,jo.setlt(je,Ne)?(Re.a=je,Re.b=Ne):(Re.a=Ne,Re.b=je),Ue=Re,je.cbpairs.add(Ue),Ne!=je&&Ne.cbpairs.add(Ue);if(Ue.zip_listeners&&(Ue.zip_listeners=!1,Ue.__validate()),null!=Ue.listeners.head){for(var We=null,Xe=null,qe=this.prelisteners;null!=qe.head;){var Ye=qe.head;qe.head=Ye.next,Ye.elt=null,Ye.next=Ko.zpp_pool,Ko.zpp_pool=Ye,null==qe.head&&(qe.pushmod=!0),qe.modified=!0,qe.length--}qe.pushmod=!0;for(var Ze,Ke=null,Je=null,Qe=(je.cbpairs.length<Ne.cbpairs.length?je.cbpairs:Ne.cbpairs).head;null!=Qe;){var $e=Qe.elt;if($e.a==je&&$e.b==Ne||$e.a==Ne&&$e.b==je){Je=$e;break}Qe=Qe.next}if(null==Je)null==No.zpp_pool?Ze=new No:(Ze=No.zpp_pool,No.zpp_pool=Ze.next,Ze.next=null),Ze.zip_listeners=!0,jo.setlt(je,Ne)?(Ze.a=je,Ze.b=Ne):(Ze.a=Ne,Ze.b=je),Je=Ze,je.cbpairs.add(Je),Ne!=je&&Ne.cbpairs.add(Je);Je.zip_listeners&&(Je.zip_listeners=!1,Je.__validate());for(var et=Je.listeners.head;null!=et;){var tt=et.elt;if(5==tt.event&&0!=(4&tt.itype)){var it,nt=this.prelisteners;null==Ko.zpp_pool?it=new Ko:(it=Ko.zpp_pool,Ko.zpp_pool=it.next,it.next=null),it.elt=tt;var rt=it;null==Ke?(rt.next=nt.head,nt.head=rt):(rt.next=Ke.next,Ke.next=rt),nt.pushmod=nt.modified=!0,nt.length++,Ke=rt,ae=!!ae||!tt.pure}et=et.next}if(null!=this.prelisteners.head){if(null==(We=qo.get(Le,Fe))&&(Xe=Yo.get(Le,Fe),this.add_callbackset(Xe)),null==We||(We.FLUIDstamp!=this.stamp||r)&&0==(4&We.FLUIDstate)){if(null!=Xe&&(We=Xe),null!=We)for(var ot=this.prelisteners.head;null!=ot;)7==ot.elt.itype&&(We.COLLISIONstamp=this.stamp,We.SENSORstamp=this.stamp),We.FLUIDstamp=this.stamp,ot=ot.next;var at=I.active;I.active=!0,this.precb.zpp_inner.pre_arbiter=I,this.precb.zpp_inner.set=We;for(var st=this.prelisteners.head;null!=st;){var pt=st.elt;this.precb.zpp_inner.listener=pt;var lt,ht=this.precb.zpp_inner,ut=We.int1,dt=We.int2,ct=pt.options1,_t=ut.cbTypes;if(ct.nonemptyintersection(_t,ct.includes)&&!ct.nonemptyintersection(_t,ct.excludes)){var yt=pt.options2,xt=dt.cbTypes;lt=!!yt.nonemptyintersection(xt,yt.includes)&&!yt.nonemptyintersection(xt,yt.excludes)}else lt=!1;lt?(ht.int1=ut,ht.int2=dt):(ht.int1=dt,ht.int2=ut),this.precb.zpp_inner.pre_swapped=Le!=this.precb.zpp_inner.int1;var mt,ft=pt.handlerp(this.precb);if(null!=ft)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),mt=ft==Uo.PreFlag_ACCEPT?5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),ft==Uo.PreFlag_ACCEPT_ONCE?1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),ft==Uo.PreFlag_IGNORE?6:2)),I.immState=mt;st=st.next}if(I.active=at,null!=We)for(var vt=this.prelisteners.head;null!=vt;)7==vt.elt.itype&&(We.COLLISIONstate=I.immState,We.SENSORstate=I.immState),We.FLUIDstate=I.immState,vt=vt.next}else null==We?0==(4&I.immState)&&(I.immState=1):I.immState=We.FLUIDstate;De=De.next}else De=De.next}else De=De.next}Be=Be.next}if(ae&&0==(4&I.immState)){if(2==I.b1.type){var gt=I.b1;gt.world||(gt.component.waket=this.stamp+(this.midstep?0:1),3==gt.type&&(gt.kinematicDelaySleep=!0),gt.component.sleeping&&this.really_wake(gt,!1))}if(2==I.b1.type){var zt=I.b2;zt.world||(zt.component.waket=this.stamp+(this.midstep?0:1),3==zt.type&&(zt.kinematicDelaySleep=!0),zt.component.sleeping&&this.really_wake(zt,!1))}}}if(0!=(1&I.immState)){if(2==I.b1.type&&I.b1.component.sleeping){var bt=I.b1;bt.world||(bt.component.waket=this.stamp+(this.midstep?0:1),3==bt.type&&(bt.kinematicDelaySleep=!0),bt.component.sleeping&&this.really_wake(bt,!1))}if(2==I.b2.type&&I.b2.component.sleeping){var wt=I.b2;wt.world||(wt.component.waket=this.stamp+(this.midstep?0:1),3==wt.type&&(wt.kinematicDelaySleep=!0),wt.component.sleeping&&this.really_wake(wt,!1))}}if(I.sleeping){I.sleeping=!1;var St,Ct=this.f_arbiters;null==Qo.zpp_pool?St=new Qo:(St=Qo.zpp_pool,Qo.zpp_pool=St.next,St.next=null),St.elt=I;var Mt=St;Mt.next=Ct.head,Ct.head=Mt,Ct.modified=!0,Ct.length++}a=I}else if(B){var Pt=I;Pt.next=Vo.zpp_pool,Vo.zpp_pool=Pt,a=null}else a=I;else a=I}else if(1==l){var kt,Tt=i?this.c_arbiters_true:this.c_arbiters_false;if(null==n){for(var Gt=null,Ot=(s.arbiters.length<p.arbiters.length?s:p).arbiters.head;null!=Ot;){var At=Ot.elt;if(At.id==P.id&&At.di==k.id){Gt=At;break}Ot=Ot.next}kt=Gt}else kt=n;var Et,It=null==kt,Bt=!1;if(It)null==Wo.zpp_pool?Et=new Wo:(Et=Wo.zpp_pool,Wo.zpp_pool=Et.next,Et.next=null),Et.stat=i;else if(null==kt.colarb){kt.cleared=!0;for(var Lt=kt.b1.arbiters,Dt=null,Rt=Lt.head;null!=Rt;){if(Rt.elt==kt){var Ft,jt;null==Dt?(jt=(Ft=Lt.head).next,Lt.head=jt,null==Lt.head&&(Lt.pushmod=!0)):(jt=(Ft=Dt.next).next,null==(Dt.next=jt)&&(Lt.pushmod=!0));var Nt=Ft;Nt.elt=null,Nt.next=Zo.zpp_pool,Zo.zpp_pool=Nt,Lt.modified=!0,Lt.length--,Lt.pushmod=!0;break}Rt=(Dt=Rt).next}for(var Ut=kt.b2.arbiters,Ht=null,Vt=Ut.head;null!=Vt;){if(Vt.elt==kt){var Wt,Xt;null==Ht?(Xt=(Wt=Ut.head).next,Ut.head=Xt,null==Ut.head&&(Ut.pushmod=!0)):(Xt=(Wt=Ht.next).next,null==(Ht.next=Xt)&&(Ut.pushmod=!0));var qt=Wt;qt.elt=null,qt.next=Zo.zpp_pool,Zo.zpp_pool=qt,Ut.modified=!0,Ut.length--,Ut.pushmod=!0;break}Vt=(Ht=Vt).next}null!=kt.pair&&(kt.pair.arb=null,kt.pair=null),kt.active=!1,this.f_arbiters.modified=!0,null==Wo.zpp_pool?Et=new Wo:(Et=Wo.zpp_pool,Wo.zpp_pool=Et.next,Et.next=null),Et.intchange=!0,Et.stat=i,Bt=It=!0}else T=P!=(Et=kt.colarb).s1,Et.stat!=i&&(Et.stat=i,Et.sleeping||((i?this.c_arbiters_false:this.c_arbiters_true).remove(Et),Tt.add(Et)));if(It||Et.stamp!=this.stamp||r)if(Et.stamp=this.stamp,$s.contactCollide(P,k,Et,T)){if(It){var Yt=P.id,Zt=k.id;Et.b1=e.body,Et.ws1=e,Et.b2=t.body,Et.ws2=t,Et.id=Yt,Et.di=Zt;var Kt,Jt=Et.b1.arbiters;null==Zo.zpp_pool?Kt=new Zo:(Kt=Zo.zpp_pool,Zo.zpp_pool=Kt.next,Kt.next=null),Kt.elt=Et;var Qt=Kt;Qt.next=Jt.head,Jt.head=Qt,Jt.modified=!0,Jt.length++;var $t,ei=Et.b2.arbiters;null==Zo.zpp_pool?$t=new Zo:($t=Zo.zpp_pool,Zo.zpp_pool=$t.next,$t.next=null),$t.elt=Et;var ti,ii=$t;ii.next=ei.head,ei.head=ii,ei.modified=!0,ei.length++,Et.active=!0,Et.present=0,Et.cleared=!1,Et.sleeping=!1,Et.fresh=!1,Et.presentable=!1,Et.s1=e,Et.s2=t,Et.userdef_restitution||(Et.s1.material.elasticity<=-1/0||Et.s2.material.elasticity<=-1/0?Et.restitution=0:Et.s1.material.elasticity>=1/0||Et.s2.material.elasticity>=1/0?Et.restitution=1:Et.restitution=(Et.s1.material.elasticity+Et.s2.material.elasticity)/2,Et.restitution<0&&(Et.restitution=0),1<Et.restitution&&(Et.restitution=1)),Et.userdef_dyn_fric||(Et.dyn_fric=Math.sqrt(Et.s1.material.dynamicFriction*Et.s2.material.dynamicFriction)),Et.userdef_stat_fric||(Et.stat_fric=Math.sqrt(Et.s1.material.staticFriction*Et.s2.material.staticFriction)),Et.userdef_rfric||(Et.rfric=Math.sqrt(Et.s1.material.rollingFriction*Et.s2.material.rollingFriction)),null==ea.zpp_pool?ti=new ea:(ti=ea.zpp_pool,ea.zpp_pool=ti.next,ti.next=null),ti.elt=Et;var ni=ti;ni.next=Tt.head,Tt.head=ni,Tt.modified=!0,Tt.length++,Et.fresh=!Bt}else Et.fresh=Et.up_stamp<this.stamp-1||Et.endGenerated==this.stamp&&r;if(Et.up_stamp=Et.stamp,Et.fresh||0==(4&Et.immState)){for(var ri=!(Et.immState=1),oi=Et.ws1.id>Et.ws2.id?Et.ws2:Et.ws1,ai=Et.ws1.id>Et.ws2.id?Et.ws1:Et.ws2,si=this.mrca1;null!=si.head;){var pi=si.head;si.head=pi.next,pi.elt=null,pi.next=Jo.zpp_pool,Jo.zpp_pool=pi,null==si.head&&(si.pushmod=!0),si.modified=!0,si.length--}si.pushmod=!0;for(var li=this.mrca2;null!=li.head;){var hi=li.head;li.head=hi.next,hi.elt=null,hi.next=Jo.zpp_pool,Jo.zpp_pool=hi,null==li.head&&(li.pushmod=!0),li.modified=!0,li.length--}if(li.pushmod=!0,null!=oi.cbSet){var ui,di=this.mrca1;null==Jo.zpp_pool?ui=new Jo:(ui=Jo.zpp_pool,Jo.zpp_pool=ui.next,ui.next=null),ui.elt=oi;var ci=ui;ci.next=di.head,di.head=ci,di.modified=!0,di.length++}if(null!=oi.body.cbSet){var _i,yi=this.mrca1,xi=oi.body;null==Jo.zpp_pool?_i=new Jo:(_i=Jo.zpp_pool,Jo.zpp_pool=_i.next,_i.next=null),_i.elt=xi;var mi=_i;mi.next=yi.head,yi.head=mi,yi.modified=!0,yi.length++}if(null!=ai.cbSet){var fi,vi=this.mrca2;null==Jo.zpp_pool?fi=new Jo:(fi=Jo.zpp_pool,Jo.zpp_pool=fi.next,fi.next=null),fi.elt=ai;var gi=fi;gi.next=vi.head,vi.head=gi,vi.modified=!0,vi.length++}if(null!=ai.body.cbSet){var zi,bi=this.mrca2,wi=ai.body;null==Jo.zpp_pool?zi=new Jo:(zi=Jo.zpp_pool,Jo.zpp_pool=zi.next,zi.next=null),zi.elt=wi;var Si=zi;Si.next=bi.head,bi.head=Si,bi.modified=!0,bi.length++}for(var Ci=oi.body.compound,Mi=ai.body.compound;Ci!=Mi;)if((null==Ci?0:Ci.depth)<(null==Mi?0:Mi.depth)){if(null!=Mi.cbSet){var Pi,ki=this.mrca2;null==Jo.zpp_pool?Pi=new Jo:(Pi=Jo.zpp_pool,Jo.zpp_pool=Pi.next,Pi.next=null),Pi.elt=Mi;var Ti=Pi;Ti.next=ki.head,ki.head=Ti,ki.modified=!0,ki.length++}Mi=Mi.compound}else{if(null!=Ci.cbSet){var Gi,Oi=this.mrca1;null==Jo.zpp_pool?Gi=new Jo:(Gi=Jo.zpp_pool,Jo.zpp_pool=Gi.next,Gi.next=null),Gi.elt=Ci;var Ai=Gi;Ai.next=Oi.head,Oi.head=Ai,Oi.modified=!0,Oi.length++}Ci=Ci.compound}for(var Ei=this.mrca1.head;null!=Ei;){for(var Ii=Ei.elt,Bi=this.mrca2.head;null!=Bi;){for(var Li,Di=Bi.elt,Ri=Ii.cbSet,Fi=Di.cbSet,ji=null,Ni=(Ri.cbpairs.length<Fi.cbpairs.length?Ri.cbpairs:Fi.cbpairs).head;null!=Ni;){var Ui=Ni.elt;if(Ui.a==Ri&&Ui.b==Fi||Ui.a==Fi&&Ui.b==Ri){ji=Ui;break}Ni=Ni.next}if(null==ji)null==No.zpp_pool?Li=new No:(Li=No.zpp_pool,No.zpp_pool=Li.next,Li.next=null),Li.zip_listeners=!0,jo.setlt(Ri,Fi)?(Li.a=Ri,Li.b=Fi):(Li.a=Fi,Li.b=Ri),ji=Li,Ri.cbpairs.add(ji),Fi!=Ri&&Fi.cbpairs.add(ji);if(ji.zip_listeners&&(ji.zip_listeners=!1,ji.__validate()),null!=ji.listeners.head){for(var Hi=null,Vi=null,Wi=this.prelisteners;null!=Wi.head;){var Xi=Wi.head;Wi.head=Xi.next,Xi.elt=null,Xi.next=Ko.zpp_pool,Ko.zpp_pool=Xi,null==Wi.head&&(Wi.pushmod=!0),Wi.modified=!0,Wi.length--}Wi.pushmod=!0;for(var qi,Yi=null,Zi=null,Ki=(Ri.cbpairs.length<Fi.cbpairs.length?Ri.cbpairs:Fi.cbpairs).head;null!=Ki;){var Ji=Ki.elt;if(Ji.a==Ri&&Ji.b==Fi||Ji.a==Fi&&Ji.b==Ri){Zi=Ji;break}Ki=Ki.next}if(null==Zi)null==No.zpp_pool?qi=new No:(qi=No.zpp_pool,No.zpp_pool=qi.next,qi.next=null),qi.zip_listeners=!0,jo.setlt(Ri,Fi)?(qi.a=Ri,qi.b=Fi):(qi.a=Fi,qi.b=Ri),Zi=qi,Ri.cbpairs.add(Zi),Fi!=Ri&&Fi.cbpairs.add(Zi);Zi.zip_listeners&&(Zi.zip_listeners=!1,Zi.__validate());for(var Qi=Zi.listeners.head;null!=Qi;){var $i=Qi.elt;if(5==$i.event&&0!=(1&$i.itype)){var en,tn=this.prelisteners;null==Ko.zpp_pool?en=new Ko:(en=Ko.zpp_pool,Ko.zpp_pool=en.next,en.next=null),en.elt=$i;var nn=en;null==Yi?(nn.next=tn.head,tn.head=nn):(nn.next=Yi.next,Yi.next=nn),tn.pushmod=tn.modified=!0,tn.length++,Yi=nn,ri=!!ri||!$i.pure}Qi=Qi.next}if(null!=this.prelisteners.head){if(null==(Hi=qo.get(Ii,Di))&&(Vi=Yo.get(Ii,Di),this.add_callbackset(Vi)),null==Hi||(Hi.COLLISIONstamp!=this.stamp||r)&&0==(4&Hi.COLLISIONstate)){if(null!=Vi&&(Hi=Vi),null!=Hi)for(var rn=this.prelisteners.head;null!=rn;)7==rn.elt.itype?(Hi.COLLISIONstamp=this.stamp,Hi.SENSORstamp=this.stamp,Hi.FLUIDstamp=this.stamp):Hi.COLLISIONstamp=this.stamp,rn=rn.next;var on=Et.active,an=Et.active=!0,sn=null,pn=null,ln=Et.innards.next;Et.hc2=!1;for(var hn=Et.contacts.next;null!=hn;){var un=hn;if(un.stamp+Qs.arbiterExpirationDelay<Et.stamp){var dn,cn,_n=Et.contacts;null==sn?(cn=(dn=_n.next).next,_n.next=cn,null==_n.next&&(_n.pushmod=!0)):(cn=(dn=sn.next).next,null==(sn.next=cn)&&(_n.pushmod=!0)),dn._inuse=!1,_n.modified=!0,_n.length--,_n.pushmod=!0,hn=cn;var yn,xn,mn=Et.innards;null==pn?(xn=(yn=mn.next).next,mn.next=xn,null==mn.next&&(mn.pushmod=!0)):(xn=(yn=pn.next).next,null==(pn.next=xn)&&(mn.pushmod=!0)),yn._inuse=!1,mn.modified=!0,mn.length--,mn.pushmod=!0,ln=xn,un.arbiter=null,un.next=Xo.zpp_pool,Xo.zpp_pool=un}else{var fn=un.inner,vn=un.active;un.active=un.stamp==Et.stamp,un.active&&(an?(an=!1,Et.c1=fn,Et.oc1=un):(Et.hc2=!0,Et.c2=fn,Et.oc2=un)),vn!=un.active&&(Et.contacts.modified=!0),sn=hn,ln=(pn=ln).next,hn=hn.next}}if(Et.hc2)if(Et.hpc2=!0,Et.oc1.posOnly){var gn=Et.c1;Et.c1=Et.c2,Et.c2=gn;var zn=Et.oc1;Et.oc1=Et.oc2,Et.oc2=zn,Et.hc2=!1}else Et.oc2.posOnly&&(Et.hc2=!1);else Et.hpc2=!1;this.precb.zpp_inner.pre_arbiter=Et,this.precb.zpp_inner.set=Hi;for(var bn=this.prelisteners.head;null!=bn;){var wn=bn.elt;this.precb.zpp_inner.listener=wn;var Sn,Cn=this.precb.zpp_inner,Mn=Hi.int1,Pn=Hi.int2,kn=wn.options1,Tn=Mn.cbTypes;if(kn.nonemptyintersection(Tn,kn.includes)&&!kn.nonemptyintersection(Tn,kn.excludes)){var Gn=wn.options2,On=Pn.cbTypes;Sn=!!Gn.nonemptyintersection(On,Gn.includes)&&!Gn.nonemptyintersection(On,Gn.excludes)}else Sn=!1;Sn?(Cn.int1=Mn,Cn.int2=Pn):(Cn.int1=Pn,Cn.int2=Mn),this.precb.zpp_inner.pre_swapped=Ii!=this.precb.zpp_inner.int1;var An,En=wn.handlerp(this.precb);if(null!=En)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),An=En==Uo.PreFlag_ACCEPT?5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),En==Uo.PreFlag_ACCEPT_ONCE?1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),En==Uo.PreFlag_IGNORE?6:2)),Et.immState=An;bn=bn.next}if(Et.active=on,null!=Hi)for(var In=this.prelisteners.head;null!=In;)7==In.elt.itype?(Hi.COLLISIONstate=Et.immState,Hi.SENSORstate=Et.immState,Hi.FLUIDstate=Et.immState):Hi.COLLISIONstate=Et.immState,In=In.next}else null==Hi?0==(4&Et.immState)&&(Et.immState=1):Et.immState=Hi.COLLISIONstate;Bi=Bi.next}else Bi=Bi.next}else Bi=Bi.next}Ei=Ei.next}if(ri&&0==(4&Et.immState)){if(2==Et.b1.type){var Bn=Et.b1;Bn.world||(Bn.component.waket=this.stamp+(this.midstep?0:1),3==Bn.type&&(Bn.kinematicDelaySleep=!0),Bn.component.sleeping&&this.really_wake(Bn,!1))}if(2==Et.b1.type){var Ln=Et.b2;Ln.world||(Ln.component.waket=this.stamp+(this.midstep?0:1),3==Ln.type&&(Ln.kinematicDelaySleep=!0),Ln.component.sleeping&&this.really_wake(Ln,!1))}}}if(0!=(1&Et.immState)){if(2==Et.b1.type&&Et.b1.component.sleeping){var Dn=Et.b1;Dn.world||(Dn.component.waket=this.stamp+(this.midstep?0:1),3==Dn.type&&(Dn.kinematicDelaySleep=!0),Dn.component.sleeping&&this.really_wake(Dn,!1))}if(2==Et.b2.type&&Et.b2.component.sleeping){var Rn=Et.b2;Rn.world||(Rn.component.waket=this.stamp+(this.midstep?0:1),3==Rn.type&&(Rn.kinematicDelaySleep=!0),Rn.component.sleeping&&this.really_wake(Rn,!1))}}if(Et.sleeping){var Fn;Et.sleeping=!1,null==ea.zpp_pool?Fn=new ea:(Fn=ea.zpp_pool,ea.zpp_pool=Fn.next,Fn.next=null),Fn.elt=Et;var jn=Fn;jn.next=Tt.head,Tt.head=jn,Tt.modified=!0,Tt.length++}a=Et}else if(It){var Nn=Et;Nn.userdef_dyn_fric=!1,Nn.userdef_stat_fric=!1,Nn.userdef_restitution=!1,Nn.userdef_rfric=!1,Nn.__ref_edge1=Nn.__ref_edge2=null,Nn.next=Wo.zpp_pool,Wo.zpp_pool=Nn,a=null}else a=Et;else a=Et}else{var Un;if(null==n){for(var Hn=null,Vn=(s.arbiters.length<p.arbiters.length?s:p).arbiters.head;null!=Vn;){var Wn=Vn.elt;if(Wn.id==P.id&&Wn.di==k.id){Hn=Wn;break}Vn=Vn.next}Un=Hn}else Un=n;var Xn,qn=null==Un,Yn=!1;if(qn)null==Ho.zpp_pool?Xn=new Ho:(Xn=Ho.zpp_pool,Ho.zpp_pool=Xn.next,Xn.next=null);else if(null==Un.sensorarb){Un.cleared=!0;for(var Zn=Un.b1.arbiters,Kn=null,Jn=Zn.head;null!=Jn;){if(Jn.elt==Un){var Qn,$n;null==Kn?($n=(Qn=Zn.head).next,Zn.head=$n,null==Zn.head&&(Zn.pushmod=!0)):($n=(Qn=Kn.next).next,null==(Kn.next=$n)&&(Zn.pushmod=!0));var er=Qn;er.elt=null,er.next=Zo.zpp_pool,Zo.zpp_pool=er,Zn.modified=!0,Zn.length--,Zn.pushmod=!0;break}Jn=(Kn=Jn).next}for(var tr=Un.b2.arbiters,ir=null,nr=tr.head;null!=nr;){if(nr.elt==Un){var rr,or;null==ir?(or=(rr=tr.head).next,tr.head=or,null==tr.head&&(tr.pushmod=!0)):(or=(rr=ir.next).next,null==(ir.next=or)&&(tr.pushmod=!0));var ar=rr;ar.elt=null,ar.next=Zo.zpp_pool,Zo.zpp_pool=ar,tr.modified=!0,tr.length--,tr.pushmod=!0;break}nr=(ir=nr).next}null!=Un.pair&&(Un.pair.arb=null,Un.pair=null),Un.active=!1,this.f_arbiters.modified=!0,null==Ho.zpp_pool?Xn=new Ho:(Xn=Ho.zpp_pool,Ho.zpp_pool=Xn.next,Xn.next=null),Yn=qn=Xn.intchange=!0}else Xn=Un.sensorarb;if(qn||Xn.stamp!=this.stamp||r)if(Xn.stamp=this.stamp,$s.testCollide(P,k)){if(qn){var sr=P.id,pr=k.id;Xn.b1=e.body,Xn.ws1=e,Xn.b2=t.body,Xn.ws2=t,Xn.id=sr,Xn.di=pr;var lr,hr=Xn.b1.arbiters;null==Zo.zpp_pool?lr=new Zo:(lr=Zo.zpp_pool,Zo.zpp_pool=lr.next,lr.next=null),lr.elt=Xn;var ur=lr;ur.next=hr.head,hr.head=ur,hr.modified=!0,hr.length++;var dr,cr=Xn.b2.arbiters;null==Zo.zpp_pool?dr=new Zo:(dr=Zo.zpp_pool,Zo.zpp_pool=dr.next,dr.next=null),dr.elt=Xn;var _r=dr;_r.next=cr.head,cr.head=_r,cr.modified=!0,cr.length++,Xn.active=!0,Xn.present=0,Xn.cleared=!1,Xn.sleeping=!1,Xn.fresh=!1,Xn.presentable=!1;var yr,xr=this.s_arbiters;null==$o.zpp_pool?yr=new $o:(yr=$o.zpp_pool,$o.zpp_pool=yr.next,yr.next=null),yr.elt=Xn;var mr=yr;mr.next=xr.head,xr.head=mr,xr.modified=!0,xr.length++,Xn.fresh=!Yn}else Xn.fresh=Xn.up_stamp<this.stamp-1||Xn.endGenerated==this.stamp&&r;if(Xn.up_stamp=Xn.stamp,Xn.fresh||0==(4&Xn.immState)){for(var fr=!(Xn.immState=1),vr=Xn.ws1.id>Xn.ws2.id?Xn.ws2:Xn.ws1,gr=Xn.ws1.id>Xn.ws2.id?Xn.ws1:Xn.ws2,zr=this.mrca1;null!=zr.head;){var br=zr.head;zr.head=br.next,br.elt=null,br.next=Jo.zpp_pool,Jo.zpp_pool=br,null==zr.head&&(zr.pushmod=!0),zr.modified=!0,zr.length--}zr.pushmod=!0;for(var wr=this.mrca2;null!=wr.head;){var Sr=wr.head;wr.head=Sr.next,Sr.elt=null,Sr.next=Jo.zpp_pool,Jo.zpp_pool=Sr,null==wr.head&&(wr.pushmod=!0),wr.modified=!0,wr.length--}if(wr.pushmod=!0,null!=vr.cbSet){var Cr,Mr=this.mrca1;null==Jo.zpp_pool?Cr=new Jo:(Cr=Jo.zpp_pool,Jo.zpp_pool=Cr.next,Cr.next=null),Cr.elt=vr;var Pr=Cr;Pr.next=Mr.head,Mr.head=Pr,Mr.modified=!0,Mr.length++}if(null!=vr.body.cbSet){var kr,Tr=this.mrca1,Gr=vr.body;null==Jo.zpp_pool?kr=new Jo:(kr=Jo.zpp_pool,Jo.zpp_pool=kr.next,kr.next=null),kr.elt=Gr;var Or=kr;Or.next=Tr.head,Tr.head=Or,Tr.modified=!0,Tr.length++}if(null!=gr.cbSet){var Ar,Er=this.mrca2;null==Jo.zpp_pool?Ar=new Jo:(Ar=Jo.zpp_pool,Jo.zpp_pool=Ar.next,Ar.next=null),Ar.elt=gr;var Ir=Ar;Ir.next=Er.head,Er.head=Ir,Er.modified=!0,Er.length++}if(null!=gr.body.cbSet){var Br,Lr=this.mrca2,Dr=gr.body;null==Jo.zpp_pool?Br=new Jo:(Br=Jo.zpp_pool,Jo.zpp_pool=Br.next,Br.next=null),Br.elt=Dr;var Rr=Br;Rr.next=Lr.head,Lr.head=Rr,Lr.modified=!0,Lr.length++}for(var Fr=vr.body.compound,jr=gr.body.compound;Fr!=jr;)if((null==Fr?0:Fr.depth)<(null==jr?0:jr.depth)){if(null!=jr.cbSet){var Nr,Ur=this.mrca2;null==Jo.zpp_pool?Nr=new Jo:(Nr=Jo.zpp_pool,Jo.zpp_pool=Nr.next,Nr.next=null),Nr.elt=jr;var Hr=Nr;Hr.next=Ur.head,Ur.head=Hr,Ur.modified=!0,Ur.length++}jr=jr.compound}else{if(null!=Fr.cbSet){var Vr,Wr=this.mrca1;null==Jo.zpp_pool?Vr=new Jo:(Vr=Jo.zpp_pool,Jo.zpp_pool=Vr.next,Vr.next=null),Vr.elt=Fr;var Xr=Vr;Xr.next=Wr.head,Wr.head=Xr,Wr.modified=!0,Wr.length++}Fr=Fr.compound}for(var qr=this.mrca1.head;null!=qr;){for(var Yr=qr.elt,Zr=this.mrca2.head;null!=Zr;){for(var Kr,Jr=Zr.elt,Qr=Yr.cbSet,$r=Jr.cbSet,eo=null,to=(Qr.cbpairs.length<$r.cbpairs.length?Qr.cbpairs:$r.cbpairs).head;null!=to;){var io=to.elt;if(io.a==Qr&&io.b==$r||io.a==$r&&io.b==Qr){eo=io;break}to=to.next}if(null==eo)null==No.zpp_pool?Kr=new No:(Kr=No.zpp_pool,No.zpp_pool=Kr.next,Kr.next=null),Kr.zip_listeners=!0,jo.setlt(Qr,$r)?(Kr.a=Qr,Kr.b=$r):(Kr.a=$r,Kr.b=Qr),eo=Kr,Qr.cbpairs.add(eo),$r!=Qr&&$r.cbpairs.add(eo);if(eo.zip_listeners&&(eo.zip_listeners=!1,eo.__validate()),null!=eo.listeners.head){for(var no=null,ro=null,oo=this.prelisteners;null!=oo.head;){var ao=oo.head;oo.head=ao.next,ao.elt=null,ao.next=Ko.zpp_pool,Ko.zpp_pool=ao,null==oo.head&&(oo.pushmod=!0),oo.modified=!0,oo.length--}oo.pushmod=!0;for(var so,po=null,lo=null,ho=(Qr.cbpairs.length<$r.cbpairs.length?Qr.cbpairs:$r.cbpairs).head;null!=ho;){var uo=ho.elt;if(uo.a==Qr&&uo.b==$r||uo.a==$r&&uo.b==Qr){lo=uo;break}ho=ho.next}if(null==lo)null==No.zpp_pool?so=new No:(so=No.zpp_pool,No.zpp_pool=so.next,so.next=null),so.zip_listeners=!0,jo.setlt(Qr,$r)?(so.a=Qr,so.b=$r):(so.a=$r,so.b=Qr),lo=so,Qr.cbpairs.add(lo),$r!=Qr&&$r.cbpairs.add(lo);lo.zip_listeners&&(lo.zip_listeners=!1,lo.__validate());for(var co=lo.listeners.head;null!=co;){var _o=co.elt;if(5==_o.event&&0!=(2&_o.itype)){var yo,xo=this.prelisteners;null==Ko.zpp_pool?yo=new Ko:(yo=Ko.zpp_pool,Ko.zpp_pool=yo.next,yo.next=null),yo.elt=_o;var mo=yo;null==po?(mo.next=xo.head,xo.head=mo):(mo.next=po.next,po.next=mo),xo.pushmod=xo.modified=!0,xo.length++,po=mo,fr=!!fr||!_o.pure}co=co.next}if(null!=this.prelisteners.head){if(null==(no=qo.get(Yr,Jr))&&(ro=Yo.get(Yr,Jr),this.add_callbackset(ro)),null==no||(no.SENSORstamp!=this.stamp||r)&&0==(4&no.SENSORstate)){if(null!=ro&&(no=ro),null!=no)for(var fo=this.prelisteners.head;null!=fo;)7==fo.elt.itype?(no.COLLISIONstamp=this.stamp,no.SENSORstamp=this.stamp,no.FLUIDstamp=this.stamp):no.SENSORstamp=this.stamp,fo=fo.next;var vo=Xn.active;Xn.active=!0,this.precb.zpp_inner.pre_arbiter=Xn,this.precb.zpp_inner.set=no;for(var go=this.prelisteners.head;null!=go;){var zo=go.elt;this.precb.zpp_inner.listener=zo;var bo,wo=this.precb.zpp_inner,So=no.int1,Co=no.int2,Mo=zo.options1,Po=So.cbTypes;if(Mo.nonemptyintersection(Po,Mo.includes)&&!Mo.nonemptyintersection(Po,Mo.excludes)){var ko=zo.options2,To=Co.cbTypes;bo=!!ko.nonemptyintersection(To,ko.includes)&&!ko.nonemptyintersection(To,ko.excludes)}else bo=!1;bo?(wo.int1=So,wo.int2=Co):(wo.int1=Co,wo.int2=So),this.precb.zpp_inner.pre_swapped=Yr!=this.precb.zpp_inner.int1;var Go,Oo=zo.handlerp(this.precb);if(null!=Oo)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Go=Oo==Uo.PreFlag_ACCEPT?5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Oo==Uo.PreFlag_ACCEPT_ONCE?1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Oo==Uo.PreFlag_IGNORE?6:2)),Xn.immState=Go;go=go.next}if(Xn.active=vo,null!=no)for(var Ao=this.prelisteners.head;null!=Ao;)7==Ao.elt.itype?(no.COLLISIONstate=Xn.immState,no.SENSORstate=Xn.immState,no.FLUIDstate=Xn.immState):no.SENSORstate=Xn.immState,Ao=Ao.next}else null==no?0==(4&Xn.immState)&&(Xn.immState=1):Xn.immState=no.SENSORstate;Zr=Zr.next}else Zr=Zr.next}else Zr=Zr.next}qr=qr.next}if(fr&&0==(4&Xn.immState)){if(1!=Xn.b1.type){var Eo=Xn.b1;Eo.world||(Eo.component.waket=this.stamp+(this.midstep?0:1),3==Eo.type&&(Eo.kinematicDelaySleep=!0),Eo.component.sleeping&&this.really_wake(Eo,!1))}if(1!=Xn.b2.type){var Io=Xn.b2;Io.world||(Io.component.waket=this.stamp+(this.midstep?0:1),3==Io.type&&(Io.kinematicDelaySleep=!0),Io.component.sleeping&&this.really_wake(Io,!1))}}}if(Xn.sleeping){Xn.sleeping=!1;var Bo,Lo=this.s_arbiters;null==$o.zpp_pool?Bo=new $o:(Bo=$o.zpp_pool,$o.zpp_pool=Bo.next,Bo.next=null),Bo.elt=Xn;var Do=Bo;Do.next=Lo.head,Lo.head=Do,Lo.modified=!0,Lo.length++}a=Xn}else if(qn){var Ro=Xn;Ro.next=Ho.zpp_pool,Ho.zpp_pool=Ro,a=null}else a=Xn;else a=Xn}}return a},si.prototype.mrca1=null,si.prototype.mrca2=null,si.prototype.MRCA_chains=function(e,t){for(var i=this.mrca1;null!=i.head;){var n=i.head;i.head=n.next,n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,null==i.head&&(i.pushmod=!0),i.modified=!0,i.length--}i.pushmod=!0;for(var r=this.mrca2;null!=r.head;){var o=r.head;r.head=o.next,o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,null==r.head&&(r.pushmod=!0),r.modified=!0,r.length--}if(r.pushmod=!0,null!=e.cbSet){var a,s=this.mrca1;null==Jo.zpp_pool?a=new Jo:(a=Jo.zpp_pool,Jo.zpp_pool=a.next,a.next=null),a.elt=e;var p=a;p.next=s.head,s.head=p,s.modified=!0,s.length++}if(null!=e.body.cbSet){var l,h=this.mrca1,u=e.body;null==Jo.zpp_pool?l=new Jo:(l=Jo.zpp_pool,Jo.zpp_pool=l.next,l.next=null),l.elt=u;var d=l;d.next=h.head,h.head=d,h.modified=!0,h.length++}if(null!=t.cbSet){var c,_=this.mrca2;null==Jo.zpp_pool?c=new Jo:(c=Jo.zpp_pool,Jo.zpp_pool=c.next,c.next=null),c.elt=t;var y=c;y.next=_.head,_.head=y,_.modified=!0,_.length++}if(null!=t.body.cbSet){var x,m=this.mrca2,f=t.body;null==Jo.zpp_pool?x=new Jo:(x=Jo.zpp_pool,Jo.zpp_pool=x.next,x.next=null),x.elt=f;var v=x;v.next=m.head,m.head=v,m.modified=!0,m.length++}for(var g=e.body.compound,z=t.body.compound;g!=z;)if((null==g?0:g.depth)<(null==z?0:z.depth)){if(null!=z.cbSet){var b,w=this.mrca2;null==Jo.zpp_pool?b=new Jo:(b=Jo.zpp_pool,Jo.zpp_pool=b.next,b.next=null),b.elt=z;var S=b;S.next=w.head,w.head=S,w.modified=!0,w.length++}z=z.compound}else{if(null!=g.cbSet){var C,M=this.mrca1;null==Jo.zpp_pool?C=new Jo:(C=Jo.zpp_pool,Jo.zpp_pool=C.next,C.next=null),C.elt=g;var P=C;P.next=M.head,M.head=P,M.modified=!0,M.length++}g=g.compound}},si.prototype.inlined_MRCA_chains=function(e,t){for(var i=this.mrca1;null!=i.head;){var n=i.head;i.head=n.next,n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,null==i.head&&(i.pushmod=!0),i.modified=!0,i.length--}i.pushmod=!0;for(var r=this.mrca2;null!=r.head;){var o=r.head;r.head=o.next,o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,null==r.head&&(r.pushmod=!0),r.modified=!0,r.length--}if(r.pushmod=!0,null!=e.cbSet){var a,s=this.mrca1;null==Jo.zpp_pool?a=new Jo:(a=Jo.zpp_pool,Jo.zpp_pool=a.next,a.next=null),a.elt=e;var p=a;p.next=s.head,s.head=p,s.modified=!0,s.length++}if(null!=e.body.cbSet){var l,h=this.mrca1,u=e.body;null==Jo.zpp_pool?l=new Jo:(l=Jo.zpp_pool,Jo.zpp_pool=l.next,l.next=null),l.elt=u;var d=l;d.next=h.head,h.head=d,h.modified=!0,h.length++}if(null!=t.cbSet){var c,_=this.mrca2;null==Jo.zpp_pool?c=new Jo:(c=Jo.zpp_pool,Jo.zpp_pool=c.next,c.next=null),c.elt=t;var y=c;y.next=_.head,_.head=y,_.modified=!0,_.length++}if(null!=t.body.cbSet){var x,m=this.mrca2,f=t.body;null==Jo.zpp_pool?x=new Jo:(x=Jo.zpp_pool,Jo.zpp_pool=x.next,x.next=null),x.elt=f;var v=x;v.next=m.head,m.head=v,m.modified=!0,m.length++}for(var g=e.body.compound,z=t.body.compound;g!=z;)if((null==g?0:g.depth)<(null==z?0:z.depth)){if(null!=z.cbSet){var b,w=this.mrca2;null==Jo.zpp_pool?b=new Jo:(b=Jo.zpp_pool,Jo.zpp_pool=b.next,b.next=null),b.elt=z;var S=b;S.next=w.head,w.head=S,w.modified=!0,w.length++}z=z.compound}else{if(null!=g.cbSet){var C,M=this.mrca1;null==Jo.zpp_pool?C=new Jo:(C=Jo.zpp_pool,Jo.zpp_pool=C.next,C.next=null),C.elt=g;var P=C;P.next=M.head,M.head=P,M.modified=!0,M.length++}g=g.compound}},si.prototype.__class__=si;var pi=zpp_nape.space.ZPP_SweepData=function(){this.aabb=null,this.shape=null,this.prev=null,this.next=null};pi.__name__=["zpp_nape","space","ZPP_SweepData"],pi.prototype.next=null,pi.prototype.prev=null,pi.prototype.shape=null,pi.prototype.aabb=null,pi.prototype.free=function(){this.prev=null,this.shape=null,this.aabb=null},pi.prototype.alloc=function(){},pi.prototype.gt=function(e){return this.aabb.minx>e.aabb.minx},pi.prototype.__class__=pi;var li=zpp_nape.space.ZPP_SweepPhase=function(e){this.failed=null,this.list=null,ti.call(this),this.space=e,this.is_sweep=!0,this.sweep=this};li.__name__=["zpp_nape","space","ZPP_SweepPhase"],li.__super__=ti,li.prototype=Object.create(ti.prototype),li.prototype.list=null,li.prototype.__insert=function(e){var t;null==pi.zpp_pool?t=new pi:(t=pi.zpp_pool,pi.zpp_pool=t.next,t.next=null),(e.sweep=t).shape=e,t.aabb=e.aabb,t.next=this.list,null!=this.list&&(this.list.prev=t),this.list=t},li.prototype.__remove=function(e){var t=e.sweep;null==t.prev?this.list=t.next:t.prev.next=t.next,null!=t.next&&(t.next.prev=t.prev),e.sweep=null,t.prev=null,t.shape=null,t.aabb=null,t.next=pi.zpp_pool,pi.zpp_pool=t},li.prototype.__sync=function(e){if(!this.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var p=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*p,i.localCOMy+=(a.y+s.y)*p,o=a,a=s,r=r.next}var l=r=i.lverts.next;n+=a.x*(l.y-o.y);var h=l.y*a.x-l.x*a.y;i.localCOMx+=(a.x+l.x)*h,i.localCOMy+=(a.y+l.y)*h,o=a;var u=r=r.next;n+=l.x*(u.y-o.y);var d=u.y*l.x-u.x*l.y;i.localCOMx+=(l.x+u.x)*d,i.localCOMy+=(l.y+u.y)*d;var c=n=1/(3*n);i.localCOMx*=c,i.localCOMy*=c}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}var y=t.radius,x=t.radius;t.aabb.minx=t.worldCOMx-y,t.aabb.miny=t.worldCOMy-x,t.aabb.maxx=t.worldCOMx+y,t.aabb.maxy=t.worldCOMy+x}else{var m=e.polygon;if(m.zip_gverts&&null!=m.body){m.zip_gverts=!1,m.validate_lverts();var f=m.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var v=m.lverts.next,g=m.gverts.next;null!=g;){var z=g,b=v;v=v.next,z.x=m.body.posx+(m.body.axisy*b.x-m.body.axisx*b.y),z.y=m.body.posy+(b.x*m.body.axisx+b.y*m.body.axisy),g=g.next}}var w=m.gverts.next;m.aabb.minx=w.x,m.aabb.miny=w.y,m.aabb.maxx=w.x,m.aabb.maxy=w.y;for(var S=m.gverts.next.next;null!=S;){var C=S;C.x<m.aabb.minx&&(m.aabb.minx=C.x),C.x>m.aabb.maxx&&(m.aabb.maxx=C.x),C.y<m.aabb.miny&&(m.aabb.miny=C.y),C.y>m.aabb.maxy&&(m.aabb.maxy=C.y),S=S.next}}},li.prototype.sync_broadphase=function(){if(this.space.validation(),null!=this.list)for(var e=this.list.next;null!=e;){var t=e.next,i=e.prev;if(e.aabb.minx>i.aabb.minx)e=t;else{for(;null!=i.prev&&i.prev.aabb.minx>e.aabb.minx;)i=i.prev;var n=e.prev;n.next=e.next,null!=e.next&&(e.next.prev=n),null==i.prev?(e.prev=null,((this.list=e).next=i).prev=e):(e.prev=i.prev,((i.prev=e).prev.next=e).next=i),e=t}}},li.prototype.sync_broadphase_fast=function(){for(var e=this.list.next;null!=e;){var t=e.next,i=e.prev;if(e.aabb.minx>i.aabb.minx)e=t;else{for(;null!=i.prev&&i.prev.aabb.minx>e.aabb.minx;)i=i.prev;var n=e.prev;n.next=e.next,null!=e.next&&(e.next.prev=n),null==i.prev?(e.prev=null,((this.list=e).next=i).prev=e):(e.prev=i.prev,((i.prev=e).prev.next=e).next=i),e=t}}},li.prototype.broadphase=function(e,t){if(null!=this.list){for(var i=this.list.next;null!=i;){var n=i.next,r=i.prev;if(i.aabb.minx>r.aabb.minx)i=n;else{for(;null!=r.prev&&r.prev.aabb.minx>i.aabb.minx;)r=r.prev;var o=i.prev;o.next=i.next,null!=i.next&&(i.next.prev=o),null==r.prev?(i.prev=null,((this.list=i).next=r).prev=i):(i.prev=r.prev,((r.prev=i).prev.next=i).next=r),i=n}}for(var a=this.list;null!=a;){for(var s=a.next,p=a.shape,l=p.body,h=a.aabb.maxx;null!=s&&!(s.aabb.minx>h);){var u=s.shape,d=u.body;if(d!=l)if(1!=l.type||1!=d.type)if(l.component.sleeping&&d.component.sleeping)s=s.next;else{var c=p.aabb,_=u.aabb;_.miny>c.maxy||c.miny>_.maxy||(t?e.narrowPhase(p,u,2!=l.type||2!=d.type,null,!1):e.continuousEvent(p,u,2!=l.type||2!=d.type,null,!1)),s=s.next}else s=s.next;else s=s.next}a=a.next}}},li.prototype.clear=function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),this.__remove(this.list.shape)},li.prototype.shapesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;for(var o=r,a=null==n?new me:n,s=this.list;null!=s&&s.aabb.minx>e;)s=s.next;for(;null!=s&&s.aabb.minx<=e;){if(s.aabb.maxx>=e&&s.aabb.miny<=t&&s.aabb.maxy>=t){var p,l=s.shape;if(null!=i){var h=l.filter;p=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else p=!0;p&&(0==l.type?$s.circleContains(l.circle,o)&&a.push(l.outer):$s.polyContains(l.polygon,o)&&a.push(l.outer))}s=s.next}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,a},li.prototype.bodiesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;for(var o=r,a=null==n?new ee:n,s=this.list;null!=s&&s.aabb.minx>e;)s=s.next;for(;null!=s&&s.aabb.minx<=e;){if(s.aabb.maxx>=e&&s.aabb.miny<=t&&s.aabb.maxy>=t){var p=s.shape,l=p.body.outer;if(!a.has(l)){var h;if(null!=i){var u=p.filter;h=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else h=!0;h&&(0==p.type?$s.circleContains(p.circle,o)&&a.push(l):$s.polyContains(p.polygon,o)&&a.push(l))}}s=s.next}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,a},li.prototype.shapesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);for(var o=this.aabbShape.zpp_inner.aabb,a=null==r?new me:r,s=this.list;null!=s&&s.aabb.maxx<o.minx;)s=s.next;for(;null!=s&&s.aabb.minx<=o.maxx;){var p,l=s.shape;if(null!=n){var h=l.filter;p=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else p=!0;if(p)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,l)&&a.push(l.outer);else{var u=s.aabb;if(u.minx>=o.minx&&u.miny>=o.miny&&u.maxx<=o.maxx&&u.maxy<=o.maxy)a.push(l.outer);else{var d=s.aabb;o.miny<=d.maxy&&d.miny<=o.maxy&&o.minx<=d.maxx&&d.minx<=o.maxx&&$s.testCollide_safe(l,this.aabbShape.zpp_inner)&&a.push(l.outer)}}else{var c;if(i){var _=s.aabb;c=_.minx>=o.minx&&_.miny>=o.miny&&_.maxx<=o.maxx&&_.maxy<=o.maxy}else{var y=s.aabb;c=o.miny<=y.maxy&&y.miny<=o.maxy&&o.minx<=y.maxx&&y.minx<=o.maxx}c&&a.push(l.outer)}s=s.next}return a},li.prototype.failed=null,li.prototype.bodiesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new ee:r;null==this.failed&&(this.failed=new ee);for(var s=this.list;null!=s&&s.aabb.maxx<o.minx;)s=s.next;for(;null!=s&&s.aabb.minx<=o.maxx;){var p=s.shape,l=p.body.outer,h=s.aabb;if(o.miny<=h.maxy&&h.miny<=o.maxy&&o.minx<=h.maxx&&h.minx<=o.maxx){var u;if(null!=n){var d=p.filter;u=0!=(d.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&d.collisionGroup)}else u=!0;if(u)if(t)if(i){if(!this.failed.has(l)){var c=$s.containTest(this.aabbShape.zpp_inner,p);!a.has(l)&&c?a.push(l):c||(a.remove(l),this.failed.push(l))}}else!a.has(l)&&$s.testCollide_safe(p,this.aabbShape.zpp_inner)&&a.push(l);else if(i){if(!this.failed.has(l)){var _=p.aabb,y=_.minx>=o.minx&&_.miny>=o.miny&&_.maxx<=o.maxx&&_.maxy<=o.maxy;!a.has(l)&&y?a.push(l):y||(a.remove(l),this.failed.push(l))}}else{var x;if(a.has(l))x=!1;else{var m=p.aabb;x=m.minx>=o.minx&&m.miny>=o.miny&&m.maxx<=o.maxx&&m.maxy<=o.maxy}x&&a.push(l)}}s=s.next}return this.failed.clear(),a},li.prototype.shapesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);for(var a=this.circShape.zpp_inner.aabb,s=null==o?new me:o,p=this.list;null!=p&&p.aabb.maxx<a.minx;)p=p.next;for(;null!=p&&p.aabb.minx<=a.maxx;){var l=p.aabb;if(a.miny<=l.maxy&&l.miny<=a.maxy&&a.minx<=l.maxx&&l.minx<=a.maxx){var h,u=p.shape;if(null!=r){var d=u.filter;h=0!=(d.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&d.collisionGroup)}else h=!0;h&&(n?$s.containTest(this.circShape.zpp_inner,u)&&s.push(u.outer):$s.testCollide_safe(u,this.circShape.zpp_inner)&&s.push(u.outer))}p=p.next}return s},li.prototype.bodiesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new ee:o;null==this.failed&&(this.failed=new ee);for(var p=this.list;null!=p&&p.aabb.maxx<a.minx;)p=p.next;for(;null!=p&&p.aabb.minx<=a.maxx;){var l=p.aabb;if(a.miny<=l.maxy&&l.miny<=a.maxy&&a.minx<=l.maxx&&l.minx<=a.maxx){var h,u=p.shape,d=u.body.outer;if(null!=r){var c=u.filter;h=0!=(c.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&c.collisionGroup)}else h=!0;if(h)if(n){if(!this.failed.has(d)){var _=$s.containTest(this.circShape.zpp_inner,u);!s.has(d)&&_?s.push(d):_||(s.remove(d),this.failed.push(d))}}else!s.has(d)&&$s.testCollide_safe(u,this.circShape.zpp_inner)&&s.push(d)}p=p.next}return this.failed.clear(),s},li.prototype.shapesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);for(var r=e.aabb,o=null==n?new me:n,a=this.list;null!=a&&a.aabb.maxx<r.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=r.maxx;){var s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx){var p,l=a.shape;if(null!=i){var h=l.filter;p=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else p=!0;p&&(t?$s.containTest(e,l)&&o.push(l.outer):$s.testCollide_safe(l,e)&&o.push(l.outer))}a=a.next}return o},li.prototype.bodiesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new ee:n;null==this.failed&&(this.failed=new ee);for(var a=this.list;null!=a&&a.aabb.maxx<r.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=r.maxx;){var s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx){var p,l=a.shape,h=l.body.outer;if(null!=i){var u=l.filter;p=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else p=!0;if(p)if(t){if(!this.failed.has(h)){var d=$s.containTest(e,l);!o.has(h)&&d?o.push(h):d||(o.remove(h),this.failed.push(h))}}else!o.has(h)&&$s.testCollide_safe(e,l)&&o.push(h)}a=a.next}return this.failed.clear(),o},li.prototype.rayCast=function(e,t,i){this.sync_broadphase(),e.validate_dir();var n=e.rayAABB(),r=e.maxdist,o=null;if(0==e.dirx)for(var a=this.list;null!=a&&a.aabb.minx<=n.minx;){var s,p=a.aabb;if(n.miny<=p.maxy&&p.miny<=n.maxy&&n.minx<=p.maxx&&p.minx<=n.maxx)if(null!=i){var l=a.shape.filter;s=0!=(l.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&l.collisionGroup)}else s=!0;else s=!1;if(s){var h=e.aabbsect(a.aabb);if(0<=h&&h<r){var u=0==a.shape.type?e.circlesect(a.shape.circle,t,r):e.polysect(a.shape.polygon,t,r);null!=u&&(r=u.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=u)}}a=a.next}else if(e.dirx<0){for(var d=this.list,c=null;null!=d&&d.aabb.minx<=n.maxx;)d=(c=d).next;for(d=c;null!=d;){var _,y=d.aabb;if(n.miny<=y.maxy&&y.miny<=n.maxy&&n.minx<=y.maxx&&y.minx<=n.maxx)if(null!=i){var x=d.shape.filter;_=0!=(x.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup)}else _=!0;else _=!1;if(_){var m=e.aabbsect(d.aabb);if(0<=m&&m<r){var f=0==d.shape.type?e.circlesect(d.shape.circle,t,r):e.polysect(d.shape.polygon,t,r);null!=f&&(r=f.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=f)}}d=d.prev}}else for(var v=this.list;null!=v&&v.aabb.minx<=n.maxx&&v.aabb.minx<e.originx+e.dirx*r;){var g,z=v.aabb;if(n.miny<=z.maxy&&z.miny<=n.maxy&&n.minx<=z.maxx&&z.minx<=n.maxx)if(null!=i){var b=v.shape.filter;g=0!=(b.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&b.collisionGroup)}else g=!0;else g=!1;if(g){var w=e.aabbsect(v.aabb);if(0<=w&&w<r){var S=0==v.shape.type?e.circlesect(v.shape.circle,t,r):e.polysect(v.shape.polygon,t,r);null!=S&&(r=S.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=S)}}v=v.next}return null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n.wrap_min=n.wrap_max=null,n._invalidate=null,n._validate=null,n.next=Oo.zpp_pool,Oo.zpp_pool=n,o},li.prototype.rayMultiCast=function(e,t,i,n){this.sync_broadphase(),e.validate_dir();var r=e.rayAABB(),o=null==n?new Z:n;if(0==e.dirx)for(var a=this.list;null!=a&&a.aabb.minx<=r.minx;){var s,p=a.aabb;if(r.miny<=p.maxy&&p.miny<=r.maxy&&r.minx<=p.maxx&&p.minx<=r.maxx)if(null!=i){var l=a.shape.filter;s=0!=(l.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&l.collisionGroup)}else s=!0;else s=!1;s&&0<=e.aabbsect(a.aabb)&&(0==a.shape.type?e.circlesect2(a.shape.circle,t,o):e.polysect2(a.shape.polygon,t,o)),a=a.next}else if(e.dirx<0){for(var h=this.list,u=null;null!=h&&h.aabb.minx<=r.maxx;)h=(u=h).next;for(h=u;null!=h;){var d,c=h.aabb;if(r.miny<=c.maxy&&c.miny<=r.maxy&&r.minx<=c.maxx&&c.minx<=r.maxx)if(null!=i){var _=h.shape.filter;d=0!=(_.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&_.collisionGroup)}else d=!0;else d=!1;d&&0<=e.aabbsect(h.aabb)&&(0==h.shape.type?e.circlesect2(h.shape.circle,t,o):e.polysect2(h.shape.polygon,t,o)),h=h.prev}}else for(var y=this.list;null!=y&&y.aabb.minx<=r.maxx;){var x,m=y.aabb;if(r.miny<=m.maxy&&m.miny<=r.maxy&&r.minx<=m.maxx&&m.minx<=r.maxx)if(null!=i){var f=y.shape.filter;x=0!=(f.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&f.collisionGroup)}else x=!0;else x=!1;x&&0<=e.aabbsect(y.aabb)&&(0==y.shape.type?e.circlesect2(y.shape.circle,t,o):e.polysect2(y.shape.polygon,t,o)),y=y.next}return null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Oo.zpp_pool,Oo.zpp_pool=r,o},li.prototype.__class__=li;var hi=zpp_nape.util.ZNPArray2_Float=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};hi.__name__=["zpp_nape","util","ZNPArray2_Float"],hi.prototype.list=null,hi.prototype.width=null,hi.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},hi.prototype.get=function(e,t){return this.list[t*this.width+e]},hi.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},hi.prototype.__class__=hi;var ui=zpp_nape.util.ZNPArray2_ZPP_GeomVert=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};ui.__name__=["zpp_nape","util","ZNPArray2_ZPP_GeomVert"],ui.prototype.list=null,ui.prototype.width=null,ui.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},ui.prototype.get=function(e,t){return this.list[t*this.width+e]},ui.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},ui.prototype.__class__=ui;var di=zpp_nape.util.ZNPArray2_ZPP_MarchPair=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};di.__name__=["zpp_nape","util","ZNPArray2_ZPP_MarchPair"],di.prototype.list=null,di.prototype.width=null,di.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},di.prototype.get=function(e,t){return this.list[t*this.width+e]},di.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},di.prototype.__class__=di;var ci=zpp_nape.util.Hashable2_Boolfalse=function(){this.di=0,this.id=0,this.hnext=null,this.next=null,this.value=!1};ci.__name__=["zpp_nape","util","Hashable2_Boolfalse"],ci.get=function(e,t,i){var n;null==ci.zpp_pool?n=new ci:(n=ci.zpp_pool,ci.zpp_pool=n.next,n.next=null),n.id=e,n.di=t;var r=n;return r.value=i,r},ci.getpersist=function(e,t){var i;return null==ci.zpp_pool?i=new ci:(i=ci.zpp_pool,ci.zpp_pool=i.next,i.next=null),i.id=e,i.di=t,i},ci.ordered_get=function(e,t,i){if(e<=t){var n;null==ci.zpp_pool?n=new ci:(n=ci.zpp_pool,ci.zpp_pool=n.next,n.next=null),n.id=e,n.di=t;var r=n;return r.value=i,r}var o;null==ci.zpp_pool?o=new ci:(o=ci.zpp_pool,ci.zpp_pool=o.next,o.next=null),o.id=t,o.di=e;var a=o;return a.value=i,a},ci.ordered_get_persist=function(e,t){var i,n;return e<=t?(null==ci.zpp_pool?i=new ci:(i=ci.zpp_pool,ci.zpp_pool=i.next,i.next=null),i.id=e,i.di=t,i):(null==ci.zpp_pool?n=new ci:(n=ci.zpp_pool,ci.zpp_pool=n.next,n.next=null),n.id=t,n.di=e,n)},ci.prototype.value=null,ci.prototype.next=null,ci.prototype.hnext=null,ci.prototype.id=null,ci.prototype.di=null,ci.prototype.free=function(){},ci.prototype.alloc=function(){},ci.prototype.__class__=ci;var _i=zpp_nape.util.FastHash2_Hashable2_Boolfalse=function(){this.cnt=0,this.table=null,this.cnt=0,this.table=[];for(var e=0;e<1048576;)++e,this.table.push(null)};_i.__name__=["zpp_nape","util","FastHash2_Hashable2_Boolfalse"],_i.prototype.table=null,_i.prototype.cnt=null,_i.prototype.empty=function(){return 0==this.cnt},_i.prototype.clear=function(){for(var e=0,t=this.table.length;e<t;){var i=e++,n=this.table[i];if(null!=n){for(;null!=n;){var r=n.hnext;n.hnext=null,n=r}this.table[i]=null}}},_i.prototype.get=function(e,t){var i=this.table[106039*e+t&1048575];if(null==i)return null;if(i.id==e&&i.di==t)return i;for(;null!=(i=i.hnext)&&(i.id!=e||i.di!=t););return i},_i.prototype.ordered_get=function(e,t){if(t<e){var i=e;e=t,t=i}var n=this.table[106039*e+t&1048575];if(null==n)return null;if(n.id==e&&n.di==t)return n;for(;null!=(n=n.hnext)&&(n.id!=e||n.di!=t););return n},_i.prototype.has=function(e,t){var i=this.table[106039*e+t&1048575];if(null==i)return!1;if(i.id==e&&i.di==t)return!0;for(;null!=(i=i.hnext)&&(i.id!=e||i.di!=t););return null!=i},_i.prototype.maybeAdd=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];null==i?(this.table[t]=e).hnext=null:(e.hnext=i.hnext,i.hnext=e),this.cnt++},_i.prototype.add=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];null==i?(this.table[t]=e).hnext=null:(e.hnext=i.hnext,i.hnext=e),this.cnt++},_i.prototype.remove=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];if(i==e)this.table[t]=i.hnext;else if(null!=i){for(var n;null!=(i=(n=i).hnext)&&i!=e;);n.hnext=i.hnext}e.hnext=null,this.cnt--},_i.prototype.hash=function(e,t){return 106039*e+t&1048575},_i.prototype.__class__=_i;var yi=zpp_nape.util.ZNPList_ZPP_CallbackSet=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};yi.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"],yi.prototype.head=null,yi.prototype.begin=function(){return this.head},yi.prototype.modified=null,yi.prototype.pushmod=null,yi.prototype.length=null,yi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},yi.prototype.add=function(e){var t;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},yi.prototype.inlined_add=function(e){var t;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},yi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},yi.prototype.insert=function(e,t){var i;null==Ni.zpp_pool?i=new Ni:(i=Ni.zpp_pool,Ni.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},yi.prototype.inlined_insert=function(e,t){var i;null==Ni.zpp_pool?i=new Ni:(i=Ni.zpp_pool,Ni.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},yi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},yi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},yi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},yi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},yi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ni.zpp_pool,Ni.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},yi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},yi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ni.zpp_pool,Ni.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},yi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ni.zpp_pool,Ni.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},yi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ni.zpp_pool,Ni.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},yi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ni.zpp_pool,Ni.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},yi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},yi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},yi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},yi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},yi.prototype.empty=function(){return null==this.head},yi.prototype.size=function(){return this.length},yi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},yi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},yi.prototype.front=function(){return this.head.elt},yi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},yi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},yi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},yi.prototype.__class__=yi;var xi=zpp_nape.util.ZNPList_ZPP_Shape=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};xi.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"],xi.prototype.head=null,xi.prototype.begin=function(){return this.head},xi.prototype.modified=null,xi.prototype.pushmod=null,xi.prototype.length=null,xi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},xi.prototype.add=function(e){var t;null==Ui.zpp_pool?t=new Ui:(t=Ui.zpp_pool,Ui.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},xi.prototype.inlined_add=function(e){var t;null==Ui.zpp_pool?t=new Ui:(t=Ui.zpp_pool,Ui.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},xi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},xi.prototype.insert=function(e,t){var i;null==Ui.zpp_pool?i=new Ui:(i=Ui.zpp_pool,Ui.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},xi.prototype.inlined_insert=function(e,t){var i;null==Ui.zpp_pool?i=new Ui:(i=Ui.zpp_pool,Ui.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},xi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},xi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},xi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},xi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},xi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ui.zpp_pool,Ui.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},xi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ui.zpp_pool,Ui.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ui.zpp_pool,Ui.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},xi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ui.zpp_pool,Ui.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},xi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ui.zpp_pool,Ui.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},xi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},xi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},xi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},xi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},xi.prototype.empty=function(){return null==this.head},xi.prototype.size=function(){return this.length},xi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},xi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},xi.prototype.front=function(){return this.head.elt},xi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},xi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},xi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},xi.prototype.__class__=xi;var mi=zpp_nape.util.ZNPList_ZPP_Body=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};mi.__name__=["zpp_nape","util","ZNPList_ZPP_Body"],mi.prototype.head=null,mi.prototype.begin=function(){return this.head},mi.prototype.modified=null,mi.prototype.pushmod=null,mi.prototype.length=null,mi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},mi.prototype.add=function(e){var t;null==Hi.zpp_pool?t=new Hi:(t=Hi.zpp_pool,Hi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},mi.prototype.inlined_add=function(e){var t;null==Hi.zpp_pool?t=new Hi:(t=Hi.zpp_pool,Hi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},mi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},mi.prototype.insert=function(e,t){var i;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},mi.prototype.inlined_insert=function(e,t){var i;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},mi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},mi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},mi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},mi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},mi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Hi.zpp_pool,Hi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},mi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},mi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Hi.zpp_pool,Hi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},mi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Hi.zpp_pool,Hi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},mi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Hi.zpp_pool,Hi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},mi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Hi.zpp_pool,Hi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},mi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},mi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},mi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},mi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},mi.prototype.empty=function(){return null==this.head},mi.prototype.size=function(){return this.length},mi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},mi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},mi.prototype.front=function(){return this.head.elt},mi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},mi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},mi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},mi.prototype.__class__=mi;var fi=zpp_nape.util.ZNPList_ZPP_Compound=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};fi.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"],fi.prototype.head=null,fi.prototype.begin=function(){return this.head},fi.prototype.modified=null,fi.prototype.pushmod=null,fi.prototype.length=null,fi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},fi.prototype.add=function(e){var t;null==Wi.zpp_pool?t=new Wi:(t=Wi.zpp_pool,Wi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},fi.prototype.inlined_add=function(e){var t;null==Wi.zpp_pool?t=new Wi:(t=Wi.zpp_pool,Wi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},fi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},fi.prototype.insert=function(e,t){var i;null==Wi.zpp_pool?i=new Wi:(i=Wi.zpp_pool,Wi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},fi.prototype.inlined_insert=function(e,t){var i;null==Wi.zpp_pool?i=new Wi:(i=Wi.zpp_pool,Wi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},fi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},fi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},fi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},fi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},fi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Wi.zpp_pool,Wi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},fi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},fi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Wi.zpp_pool,Wi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},fi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Wi.zpp_pool,Wi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},fi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Wi.zpp_pool,Wi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},fi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Wi.zpp_pool,Wi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},fi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},fi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},fi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},fi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},fi.prototype.empty=function(){return null==this.head},fi.prototype.size=function(){return this.length},fi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},fi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},fi.prototype.front=function(){return this.head.elt},fi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},fi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},fi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},fi.prototype.__class__=fi;var vi=zpp_nape.util.ZNPList_ZPP_Arbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};vi.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"],vi.prototype.head=null,vi.prototype.begin=function(){return this.head},vi.prototype.modified=null,vi.prototype.pushmod=null,vi.prototype.length=null,vi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},vi.prototype.add=function(e){var t;null==Zo.zpp_pool?t=new Zo:(t=Zo.zpp_pool,Zo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},vi.prototype.inlined_add=function(e){var t;null==Zo.zpp_pool?t=new Zo:(t=Zo.zpp_pool,Zo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},vi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},vi.prototype.insert=function(e,t){var i;null==Zo.zpp_pool?i=new Zo:(i=Zo.zpp_pool,Zo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},vi.prototype.inlined_insert=function(e,t){var i;null==Zo.zpp_pool?i=new Zo:(i=Zo.zpp_pool,Zo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},vi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},vi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},vi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},vi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},vi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},vi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},vi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},vi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Zo.zpp_pool,Zo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},vi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zo.zpp_pool,Zo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},vi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zo.zpp_pool,Zo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},vi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},vi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},vi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},vi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},vi.prototype.empty=function(){return null==this.head},vi.prototype.size=function(){return this.length},vi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},vi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},vi.prototype.front=function(){return this.head.elt},vi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},vi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},vi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},vi.prototype.__class__=vi;var gi=zpp_nape.util.ZNPList_ZPP_CbSetPair=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};gi.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"],gi.prototype.head=null,gi.prototype.begin=function(){return this.head},gi.prototype.modified=null,gi.prototype.pushmod=null,gi.prototype.length=null,gi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},gi.prototype.add=function(e){var t;null==Yi.zpp_pool?t=new Yi:(t=Yi.zpp_pool,Yi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},gi.prototype.inlined_add=function(e){var t;null==Yi.zpp_pool?t=new Yi:(t=Yi.zpp_pool,Yi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},gi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},gi.prototype.insert=function(e,t){var i;null==Yi.zpp_pool?i=new Yi:(i=Yi.zpp_pool,Yi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},gi.prototype.inlined_insert=function(e,t){var i;null==Yi.zpp_pool?i=new Yi:(i=Yi.zpp_pool,Yi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},gi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},gi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},gi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},gi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},gi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Yi.zpp_pool,Yi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},gi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},gi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Yi.zpp_pool,Yi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},gi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Yi.zpp_pool,Yi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},gi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Yi.zpp_pool,Yi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},gi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Yi.zpp_pool,Yi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},gi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},gi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},gi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},gi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},gi.prototype.empty=function(){return null==this.head},gi.prototype.size=function(){return this.length},gi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},gi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},gi.prototype.front=function(){return this.head.elt},gi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},gi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},gi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},gi.prototype.__class__=gi;var Pn=zpp_nape.util.ZNPList_ZPP_CutInt=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Pn.__name__=["zpp_nape","util","ZNPList_ZPP_CutInt"],Pn.prototype.head=null,Pn.prototype.begin=function(){return this.head},Pn.prototype.modified=null,Pn.prototype.pushmod=null,Pn.prototype.length=null,Pn.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Pn.prototype.add=function(e){var t;null==Ki.zpp_pool?t=new Ki:(t=Ki.zpp_pool,Ki.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pn.prototype.inlined_add=function(e){var t;null==Ki.zpp_pool?t=new Ki:(t=Ki.zpp_pool,Ki.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pn.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Pn.prototype.insert=function(e,t){var i;null==Ki.zpp_pool?i=new Ki:(i=Ki.zpp_pool,Ki.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pn.prototype.inlined_insert=function(e,t){var i;null==Ki.zpp_pool?i=new Ki:(i=Ki.zpp_pool,Ki.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pn.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pn.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pn.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pn.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pn.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ki.zpp_pool,Ki.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pn.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Pn.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ki.zpp_pool,Ki.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pn.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ki.zpp_pool,Ki.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Pn.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ki.zpp_pool,Ki.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pn.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ki.zpp_pool,Ki.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pn.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Pn.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pn.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pn.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Pn.prototype.empty=function(){return null==this.head},Pn.prototype.size=function(){return this.length},Pn.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pn.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pn.prototype.front=function(){return this.head.elt},Pn.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Pn.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Pn.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Pn.prototype.__class__=Pn;var kn=zpp_nape.util.ZNPList_ZPP_CutVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};kn.__name__=["zpp_nape","util","ZNPList_ZPP_CutVert"],kn.prototype.head=null,kn.prototype.begin=function(){return this.head},kn.prototype.modified=null,kn.prototype.pushmod=null,kn.prototype.length=null,kn.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},kn.prototype.add=function(e){var t;null==Ji.zpp_pool?t=new Ji:(t=Ji.zpp_pool,Ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},kn.prototype.inlined_add=function(e){var t;null==Ji.zpp_pool?t=new Ji:(t=Ji.zpp_pool,Ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},kn.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},kn.prototype.insert=function(e,t){var i;null==Ji.zpp_pool?i=new Ji:(i=Ji.zpp_pool,Ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},kn.prototype.inlined_insert=function(e,t){var i;null==Ji.zpp_pool?i=new Ji:(i=Ji.zpp_pool,Ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},kn.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},kn.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},kn.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},kn.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},kn.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ji.zpp_pool,Ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},kn.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},kn.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ji.zpp_pool,Ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},kn.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ji.zpp_pool,Ji.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},kn.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ji.zpp_pool,Ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},kn.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ji.zpp_pool,Ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},kn.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},kn.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},kn.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},kn.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},kn.prototype.empty=function(){return null==this.head},kn.prototype.size=function(){return this.length},kn.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},kn.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},kn.prototype.front=function(){return this.head.elt},kn.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},kn.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},kn.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},kn.prototype.__class__=kn;var zi=zpp_nape.util.ZNPList_ZPP_PartitionVertex=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};zi.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionVertex"],zi.prototype.head=null,zi.prototype.begin=function(){return this.head},zi.prototype.modified=null,zi.prototype.pushmod=null,zi.prototype.length=null,zi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},zi.prototype.add=function(e){var t;null==Qi.zpp_pool?t=new Qi:(t=Qi.zpp_pool,Qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},zi.prototype.inlined_add=function(e){var t;null==Qi.zpp_pool?t=new Qi:(t=Qi.zpp_pool,Qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},zi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},zi.prototype.insert=function(e,t){var i;null==Qi.zpp_pool?i=new Qi:(i=Qi.zpp_pool,Qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},zi.prototype.inlined_insert=function(e,t){var i;null==Qi.zpp_pool?i=new Qi:(i=Qi.zpp_pool,Qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},zi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},zi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},zi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qi.zpp_pool,Qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},zi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},zi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qi.zpp_pool,Qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},zi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Qi.zpp_pool,Qi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},zi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qi.zpp_pool,Qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},zi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qi.zpp_pool,Qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},zi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},zi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},zi.prototype.empty=function(){return null==this.head},zi.prototype.size=function(){return this.length},zi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},zi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},zi.prototype.front=function(){return this.head.elt},zi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},zi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},zi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},zi.prototype.__class__=zi;var bi=zpp_nape.util.ZNPList_ZPP_SimplifyP=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};bi.__name__=["zpp_nape","util","ZNPList_ZPP_SimplifyP"],bi.prototype.head=null,bi.prototype.begin=function(){return this.head},bi.prototype.modified=null,bi.prototype.pushmod=null,bi.prototype.length=null,bi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},bi.prototype.add=function(e){var t;null==$i.zpp_pool?t=new $i:(t=$i.zpp_pool,$i.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},bi.prototype.inlined_add=function(e){var t;null==$i.zpp_pool?t=new $i:(t=$i.zpp_pool,$i.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},bi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},bi.prototype.insert=function(e,t){var i;null==$i.zpp_pool?i=new $i:(i=$i.zpp_pool,$i.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},bi.prototype.inlined_insert=function(e,t){var i;null==$i.zpp_pool?i=new $i:(i=$i.zpp_pool,$i.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},bi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},bi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},bi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},bi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},bi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$i.zpp_pool,$i.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},bi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},bi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$i.zpp_pool,$i.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},bi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=$i.zpp_pool,$i.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},bi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$i.zpp_pool,$i.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},bi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$i.zpp_pool,$i.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},bi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},bi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},bi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},bi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},bi.prototype.empty=function(){return null==this.head},bi.prototype.size=function(){return this.length},bi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},bi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},bi.prototype.front=function(){return this.head.elt},bi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},bi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},bi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},bi.prototype.__class__=bi;var wi=zpp_nape.util.ZNPList_ZPP_PartitionedPoly=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};wi.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionedPoly"],wi.prototype.head=null,wi.prototype.begin=function(){return this.head},wi.prototype.modified=null,wi.prototype.pushmod=null,wi.prototype.length=null,wi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},wi.prototype.add=function(e){var t;null==en.zpp_pool?t=new en:(t=en.zpp_pool,en.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},wi.prototype.inlined_add=function(e){var t;null==en.zpp_pool?t=new en:(t=en.zpp_pool,en.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},wi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},wi.prototype.insert=function(e,t){var i;null==en.zpp_pool?i=new en:(i=en.zpp_pool,en.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},wi.prototype.inlined_insert=function(e,t){var i;null==en.zpp_pool?i=new en:(i=en.zpp_pool,en.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},wi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},wi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},wi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},wi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},wi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=en.zpp_pool,en.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},wi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},wi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=en.zpp_pool,en.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},wi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=en.zpp_pool,en.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},wi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=en.zpp_pool,en.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},wi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=en.zpp_pool,en.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},wi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},wi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},wi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},wi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},wi.prototype.empty=function(){return null==this.head},wi.prototype.size=function(){return this.length},wi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},wi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},wi.prototype.front=function(){return this.head.elt},wi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},wi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},wi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},wi.prototype.__class__=wi;var Si=zpp_nape.util.ZNPList_ZPP_GeomVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Si.__name__=["zpp_nape","util","ZNPList_ZPP_GeomVert"],Si.prototype.head=null,Si.prototype.begin=function(){return this.head},Si.prototype.modified=null,Si.prototype.pushmod=null,Si.prototype.length=null,Si.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Si.prototype.add=function(e){var t;null==tn.zpp_pool?t=new tn:(t=tn.zpp_pool,tn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Si.prototype.inlined_add=function(e){var t;null==tn.zpp_pool?t=new tn:(t=tn.zpp_pool,tn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Si.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Si.prototype.insert=function(e,t){var i;null==tn.zpp_pool?i=new tn:(i=tn.zpp_pool,tn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Si.prototype.inlined_insert=function(e,t){var i;null==tn.zpp_pool?i=new tn:(i=tn.zpp_pool,tn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Si.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Si.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Si.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Si.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Si.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=tn.zpp_pool,tn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Si.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Si.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=tn.zpp_pool,tn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Si.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=tn.zpp_pool,tn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Si.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=tn.zpp_pool,tn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Si.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=tn.zpp_pool,tn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Si.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Si.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Si.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Si.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Si.prototype.empty=function(){return null==this.head},Si.prototype.size=function(){return this.length},Si.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Si.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Si.prototype.front=function(){return this.head.elt},Si.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Si.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Si.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Si.prototype.__class__=Si;var Ci=zpp_nape.util.ZNPList_ZPP_SimpleVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ci.__name__=["zpp_nape","util","ZNPList_ZPP_SimpleVert"],Ci.prototype.head=null,Ci.prototype.begin=function(){return this.head},Ci.prototype.modified=null,Ci.prototype.pushmod=null,Ci.prototype.length=null,Ci.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ci.prototype.add=function(e){var t;null==nn.zpp_pool?t=new nn:(t=nn.zpp_pool,nn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ci.prototype.inlined_add=function(e){var t;null==nn.zpp_pool?t=new nn:(t=nn.zpp_pool,nn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ci.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ci.prototype.insert=function(e,t){var i;null==nn.zpp_pool?i=new nn:(i=nn.zpp_pool,nn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ci.prototype.inlined_insert=function(e,t){var i;null==nn.zpp_pool?i=new nn:(i=nn.zpp_pool,nn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ci.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ci.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ci.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ci.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ci.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=nn.zpp_pool,nn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ci.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ci.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=nn.zpp_pool,nn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ci.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=nn.zpp_pool,nn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ci.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=nn.zpp_pool,nn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ci.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=nn.zpp_pool,nn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ci.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ci.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ci.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ci.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ci.prototype.empty=function(){return null==this.head},Ci.prototype.size=function(){return this.length},Ci.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ci.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ci.prototype.front=function(){return this.head.elt},Ci.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ci.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ci.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ci.prototype.__class__=Ci;var Mi=zpp_nape.util.ZNPList_ZPP_SimpleEvent=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Mi.__name__=["zpp_nape","util","ZNPList_ZPP_SimpleEvent"],Mi.prototype.head=null,Mi.prototype.begin=function(){return this.head},Mi.prototype.modified=null,Mi.prototype.pushmod=null,Mi.prototype.length=null,Mi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Mi.prototype.add=function(e){var t;null==rn.zpp_pool?t=new rn:(t=rn.zpp_pool,rn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Mi.prototype.inlined_add=function(e){var t;null==rn.zpp_pool?t=new rn:(t=rn.zpp_pool,rn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Mi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Mi.prototype.insert=function(e,t){var i;null==rn.zpp_pool?i=new rn:(i=rn.zpp_pool,rn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Mi.prototype.inlined_insert=function(e,t){var i;null==rn.zpp_pool?i=new rn:(i=rn.zpp_pool,rn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Mi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Mi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Mi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Mi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Mi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rn.zpp_pool,rn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Mi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Mi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rn.zpp_pool,rn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Mi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=rn.zpp_pool,rn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Mi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rn.zpp_pool,rn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Mi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rn.zpp_pool,rn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Mi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Mi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Mi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Mi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Mi.prototype.empty=function(){return null==this.head},Mi.prototype.size=function(){return this.length},Mi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Mi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Mi.prototype.front=function(){return this.head.elt},Mi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Mi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Mi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Mi.prototype.__class__=Mi;var Pi=zpp_nape.util.ZNPList_ZPP_AABBPair=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Pi.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"],Pi.prototype.head=null,Pi.prototype.begin=function(){return this.head},Pi.prototype.modified=null,Pi.prototype.pushmod=null,Pi.prototype.length=null,Pi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Pi.prototype.add=function(e){var t;null==rr.zpp_pool?t=new rr:(t=rr.zpp_pool,rr.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pi.prototype.inlined_add=function(e){var t;null==rr.zpp_pool?t=new rr:(t=rr.zpp_pool,rr.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Pi.prototype.insert=function(e,t){var i;null==rr.zpp_pool?i=new rr:(i=rr.zpp_pool,rr.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pi.prototype.inlined_insert=function(e,t){var i;null==rr.zpp_pool?i=new rr:(i=rr.zpp_pool,rr.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rr.zpp_pool,rr.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Pi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rr.zpp_pool,rr.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=rr.zpp_pool,rr.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Pi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rr.zpp_pool,rr.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rr.zpp_pool,rr.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Pi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Pi.prototype.empty=function(){return null==this.head},Pi.prototype.size=function(){return this.length},Pi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pi.prototype.front=function(){return this.head.elt},Pi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Pi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Pi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Pi.prototype.__class__=Pi;var ki=zpp_nape.util.ZNPList_ZPP_Edge=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};ki.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"],ki.prototype.head=null,ki.prototype.begin=function(){return this.head},ki.prototype.modified=null,ki.prototype.pushmod=null,ki.prototype.length=null,ki.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},ki.prototype.add=function(e){var t;null==an.zpp_pool?t=new an:(t=an.zpp_pool,an.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},ki.prototype.inlined_add=function(e){var t;null==an.zpp_pool?t=new an:(t=an.zpp_pool,an.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},ki.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},ki.prototype.insert=function(e,t){var i;null==an.zpp_pool?i=new an:(i=an.zpp_pool,an.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},ki.prototype.inlined_insert=function(e,t){var i;null==an.zpp_pool?i=new an:(i=an.zpp_pool,an.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},ki.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},ki.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},ki.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},ki.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},ki.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=an.zpp_pool,an.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ki.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},ki.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=an.zpp_pool,an.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ki.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=an.zpp_pool,an.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},ki.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=an.zpp_pool,an.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},ki.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=an.zpp_pool,an.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},ki.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},ki.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},ki.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},ki.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},ki.prototype.empty=function(){return null==this.head},ki.prototype.size=function(){return this.length},ki.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},ki.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},ki.prototype.front=function(){return this.head.elt},ki.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},ki.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},ki.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},ki.prototype.__class__=ki;var Ti=zpp_nape.util.ZNPList_ZPP_AABBNode=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ti.__name__=["zpp_nape","util","ZNPList_ZPP_AABBNode"],Ti.prototype.head=null,Ti.prototype.begin=function(){return this.head},Ti.prototype.modified=null,Ti.prototype.pushmod=null,Ti.prototype.length=null,Ti.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ti.prototype.add=function(e){var t;null==sn.zpp_pool?t=new sn:(t=sn.zpp_pool,sn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ti.prototype.inlined_add=function(e){var t;null==sn.zpp_pool?t=new sn:(t=sn.zpp_pool,sn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ti.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ti.prototype.insert=function(e,t){var i;null==sn.zpp_pool?i=new sn:(i=sn.zpp_pool,sn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ti.prototype.inlined_insert=function(e,t){var i;null==sn.zpp_pool?i=new sn:(i=sn.zpp_pool,sn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ti.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ti.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ti.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ti.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ti.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=sn.zpp_pool,sn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ti.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ti.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=sn.zpp_pool,sn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ti.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=sn.zpp_pool,sn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ti.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=sn.zpp_pool,sn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ti.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=sn.zpp_pool,sn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ti.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ti.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ti.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ti.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ti.prototype.empty=function(){return null==this.head},Ti.prototype.size=function(){return this.length},Ti.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ti.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ti.prototype.front=function(){return this.head.elt},Ti.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ti.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ti.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ti.prototype.__class__=Ti;var Gi=zpp_nape.util.ZNPList_ZPP_Component=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Gi.__name__=["zpp_nape","util","ZNPList_ZPP_Component"],Gi.prototype.head=null,Gi.prototype.begin=function(){return this.head},Gi.prototype.modified=null,Gi.prototype.pushmod=null,Gi.prototype.length=null,Gi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Gi.prototype.add=function(e){var t;null==pn.zpp_pool?t=new pn:(t=pn.zpp_pool,pn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Gi.prototype.inlined_add=function(e){var t;null==pn.zpp_pool?t=new pn:(t=pn.zpp_pool,pn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Gi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Gi.prototype.insert=function(e,t){var i;null==pn.zpp_pool?i=new pn:(i=pn.zpp_pool,pn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Gi.prototype.inlined_insert=function(e,t){var i;null==pn.zpp_pool?i=new pn:(i=pn.zpp_pool,pn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Gi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=pn.zpp_pool,pn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Gi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=pn.zpp_pool,pn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Gi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Gi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Gi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=pn.zpp_pool,pn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Gi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Gi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=pn.zpp_pool,pn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Gi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=pn.zpp_pool,pn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Gi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=pn.zpp_pool,pn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Gi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=pn.zpp_pool,pn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Gi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Gi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=pn.zpp_pool,pn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Gi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=pn.zpp_pool,pn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Gi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Gi.prototype.empty=function(){return null==this.head},Gi.prototype.size=function(){return this.length},Gi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Gi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Gi.prototype.front=function(){return this.head.elt},Gi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Gi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Gi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Gi.prototype.__class__=Gi;var Oi=zpp_nape.util.ZNPList_ZPP_FluidArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Oi.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"],Oi.prototype.head=null,Oi.prototype.begin=function(){return this.head},Oi.prototype.modified=null,Oi.prototype.pushmod=null,Oi.prototype.length=null,Oi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Oi.prototype.add=function(e){var t;null==Qo.zpp_pool?t=new Qo:(t=Qo.zpp_pool,Qo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oi.prototype.inlined_add=function(e){var t;null==Qo.zpp_pool?t=new Qo:(t=Qo.zpp_pool,Qo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Oi.prototype.insert=function(e,t){var i;null==Qo.zpp_pool?i=new Qo:(i=Qo.zpp_pool,Qo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oi.prototype.inlined_insert=function(e,t){var i;null==Qo.zpp_pool?i=new Qo:(i=Qo.zpp_pool,Qo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qo.zpp_pool,Qo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Oi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qo.zpp_pool,Qo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Qo.zpp_pool,Qo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Oi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qo.zpp_pool,Qo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qo.zpp_pool,Qo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Oi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Oi.prototype.empty=function(){return null==this.head},Oi.prototype.size=function(){return this.length},Oi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oi.prototype.front=function(){return this.head.elt},Oi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Oi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Oi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Oi.prototype.__class__=Oi;var Ai=zpp_nape.util.ZNPList_ZPP_SensorArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ai.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"],Ai.prototype.head=null,Ai.prototype.begin=function(){return this.head},Ai.prototype.modified=null,Ai.prototype.pushmod=null,Ai.prototype.length=null,Ai.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ai.prototype.add=function(e){var t;null==$o.zpp_pool?t=new $o:(t=$o.zpp_pool,$o.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ai.prototype.inlined_add=function(e){var t;null==$o.zpp_pool?t=new $o:(t=$o.zpp_pool,$o.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ai.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ai.prototype.insert=function(e,t){var i;null==$o.zpp_pool?i=new $o:(i=$o.zpp_pool,$o.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ai.prototype.inlined_insert=function(e,t){var i;null==$o.zpp_pool?i=new $o:(i=$o.zpp_pool,$o.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ai.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ai.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ai.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ai.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ai.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$o.zpp_pool,$o.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ai.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ai.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$o.zpp_pool,$o.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ai.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=$o.zpp_pool,$o.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ai.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$o.zpp_pool,$o.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ai.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$o.zpp_pool,$o.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ai.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ai.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ai.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ai.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ai.prototype.empty=function(){return null==this.head},Ai.prototype.size=function(){return this.length},Ai.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ai.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ai.prototype.front=function(){return this.head.elt},Ai.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ai.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ai.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ai.prototype.__class__=Ai;var Ei=zpp_nape.util.ZNPList_ZPP_Listener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ei.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"],Ei.prototype.head=null,Ei.prototype.begin=function(){return this.head},Ei.prototype.modified=null,Ei.prototype.pushmod=null,Ei.prototype.length=null,Ei.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ei.prototype.add=function(e){var t;null==hn.zpp_pool?t=new hn:(t=hn.zpp_pool,hn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ei.prototype.inlined_add=function(e){var t;null==hn.zpp_pool?t=new hn:(t=hn.zpp_pool,hn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ei.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ei.prototype.insert=function(e,t){var i;null==hn.zpp_pool?i=new hn:(i=hn.zpp_pool,hn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ei.prototype.inlined_insert=function(e,t){var i;null==hn.zpp_pool?i=new hn:(i=hn.zpp_pool,hn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ei.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ei.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ei.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ei.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ei.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=hn.zpp_pool,hn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ei.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ei.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=hn.zpp_pool,hn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ei.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=hn.zpp_pool,hn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ei.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=hn.zpp_pool,hn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ei.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=hn.zpp_pool,hn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ei.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ei.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ei.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ei.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ei.prototype.empty=function(){return null==this.head},Ei.prototype.size=function(){return this.length},Ei.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ei.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ei.prototype.front=function(){return this.head.elt},Ei.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ei.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ei.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ei.prototype.__class__=Ei;var Ii=zpp_nape.util.ZNPList_ZPP_ColArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ii.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"],Ii.prototype.head=null,Ii.prototype.begin=function(){return this.head},Ii.prototype.modified=null,Ii.prototype.pushmod=null,Ii.prototype.length=null,Ii.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ii.prototype.add=function(e){var t;null==ea.zpp_pool?t=new ea:(t=ea.zpp_pool,ea.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ii.prototype.inlined_add=function(e){var t;null==ea.zpp_pool?t=new ea:(t=ea.zpp_pool,ea.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ii.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ii.prototype.insert=function(e,t){var i;null==ea.zpp_pool?i=new ea:(i=ea.zpp_pool,ea.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ii.prototype.inlined_insert=function(e,t){var i;null==ea.zpp_pool?i=new ea:(i=ea.zpp_pool,ea.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ii.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ii.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ii.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ii.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ii.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ea.zpp_pool,ea.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ii.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ii.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ea.zpp_pool,ea.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ii.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=ea.zpp_pool,ea.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ii.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ea.zpp_pool,ea.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ii.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ea.zpp_pool,ea.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ii.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ii.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ii.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ii.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ii.prototype.empty=function(){return null==this.head},Ii.prototype.size=function(){return this.length},Ii.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ii.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ii.prototype.front=function(){return this.head.elt},Ii.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ii.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ii.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ii.prototype.__class__=Ii;var Bi=zpp_nape.util.ZNPList_ZPP_InteractionGroup=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Bi.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"],Bi.prototype.head=null,Bi.prototype.begin=function(){return this.head},Bi.prototype.modified=null,Bi.prototype.pushmod=null,Bi.prototype.length=null,Bi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Bi.prototype.add=function(e){var t;null==un.zpp_pool?t=new un:(t=un.zpp_pool,un.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Bi.prototype.inlined_add=function(e){var t;null==un.zpp_pool?t=new un:(t=un.zpp_pool,un.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Bi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Bi.prototype.insert=function(e,t){var i;null==un.zpp_pool?i=new un:(i=un.zpp_pool,un.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Bi.prototype.inlined_insert=function(e,t){var i;null==un.zpp_pool?i=new un:(i=un.zpp_pool,un.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Bi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Bi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Bi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Bi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Bi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=un.zpp_pool,un.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Bi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Bi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=un.zpp_pool,un.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Bi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=un.zpp_pool,un.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Bi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=un.zpp_pool,un.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Bi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=un.zpp_pool,un.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Bi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Bi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Bi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Bi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Bi.prototype.empty=function(){return null==this.head},Bi.prototype.size=function(){return this.length},Bi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Bi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Bi.prototype.front=function(){return this.head.elt},Bi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Bi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Bi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Bi.prototype.__class__=Bi;var Li=zpp_nape.util.ZNPList_ZPP_ToiEvent=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Li.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"],Li.prototype.head=null,Li.prototype.begin=function(){return this.head},Li.prototype.modified=null,Li.prototype.pushmod=null,Li.prototype.length=null,Li.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Li.prototype.add=function(e){var t;null==dn.zpp_pool?t=new dn:(t=dn.zpp_pool,dn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Li.prototype.inlined_add=function(e){var t;null==dn.zpp_pool?t=new dn:(t=dn.zpp_pool,dn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Li.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Li.prototype.insert=function(e,t){var i;null==dn.zpp_pool?i=new dn:(i=dn.zpp_pool,dn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Li.prototype.inlined_insert=function(e,t){var i;null==dn.zpp_pool?i=new dn:(i=dn.zpp_pool,dn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Li.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Li.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Li.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Li.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Li.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=dn.zpp_pool,dn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Li.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Li.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=dn.zpp_pool,dn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Li.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=dn.zpp_pool,dn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Li.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=dn.zpp_pool,dn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Li.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=dn.zpp_pool,dn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Li.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Li.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Li.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Li.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Li.prototype.empty=function(){return null==this.head},Li.prototype.size=function(){return this.length},Li.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Li.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Li.prototype.front=function(){return this.head.elt},Li.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Li.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Li.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Li.prototype.__class__=Li;var Di=zpp_nape.util.ZNPList_ConvexResult=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Di.__name__=["zpp_nape","util","ZNPList_ConvexResult"],Di.prototype.head=null,Di.prototype.begin=function(){return this.head},Di.prototype.modified=null,Di.prototype.pushmod=null,Di.prototype.length=null,Di.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Di.prototype.add=function(e){var t;null==cn.zpp_pool?t=new cn:(t=cn.zpp_pool,cn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Di.prototype.inlined_add=function(e){var t;null==cn.zpp_pool?t=new cn:(t=cn.zpp_pool,cn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Di.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Di.prototype.insert=function(e,t){var i;null==cn.zpp_pool?i=new cn:(i=cn.zpp_pool,cn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Di.prototype.inlined_insert=function(e,t){var i;null==cn.zpp_pool?i=new cn:(i=cn.zpp_pool,cn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Di.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Di.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Di.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Di.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Di.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=cn.zpp_pool,cn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Di.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Di.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=cn.zpp_pool,cn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Di.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=cn.zpp_pool,cn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Di.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=cn.zpp_pool,cn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Di.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=cn.zpp_pool,cn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Di.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Di.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Di.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Di.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Di.prototype.empty=function(){return null==this.head},Di.prototype.size=function(){return this.length},Di.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Di.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Di.prototype.front=function(){return this.head.elt},Di.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Di.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Di.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Di.prototype.__class__=Di;var Ri=zpp_nape.util.ZNPList_ZPP_GeomPoly=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ri.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"],Ri.prototype.head=null,Ri.prototype.begin=function(){return this.head},Ri.prototype.modified=null,Ri.prototype.pushmod=null,Ri.prototype.length=null,Ri.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ri.prototype.add=function(e){var t;null==_n.zpp_pool?t=new _n:(t=_n.zpp_pool,_n.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ri.prototype.inlined_add=function(e){var t;null==_n.zpp_pool?t=new _n:(t=_n.zpp_pool,_n.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ri.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ri.prototype.insert=function(e,t){var i;null==_n.zpp_pool?i=new _n:(i=_n.zpp_pool,_n.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ri.prototype.inlined_insert=function(e,t){var i;null==_n.zpp_pool?i=new _n:(i=_n.zpp_pool,_n.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ri.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ri.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ri.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ri.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ri.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=_n.zpp_pool,_n.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ri.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ri.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=_n.zpp_pool,_n.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ri.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=_n.zpp_pool,_n.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ri.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=_n.zpp_pool,_n.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ri.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=_n.zpp_pool,_n.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ri.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ri.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ri.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ri.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ri.prototype.empty=function(){return null==this.head},Ri.prototype.size=function(){return this.length},Ri.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ri.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ri.prototype.front=function(){return this.head.elt},Ri.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ri.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ri.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ri.prototype.__class__=Ri;var Fi=zpp_nape.util.ZNPList_RayResult=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Fi.__name__=["zpp_nape","util","ZNPList_RayResult"],Fi.prototype.head=null,Fi.prototype.begin=function(){return this.head},Fi.prototype.modified=null,Fi.prototype.pushmod=null,Fi.prototype.length=null,Fi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Fi.prototype.add=function(e){var t;null==yn.zpp_pool?t=new yn:(t=yn.zpp_pool,yn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fi.prototype.inlined_add=function(e){var t;null==yn.zpp_pool?t=new yn:(t=yn.zpp_pool,yn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Fi.prototype.insert=function(e,t){var i;null==yn.zpp_pool?i=new yn:(i=yn.zpp_pool,yn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fi.prototype.inlined_insert=function(e,t){var i;null==yn.zpp_pool?i=new yn:(i=yn.zpp_pool,yn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=yn.zpp_pool,yn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Fi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=yn.zpp_pool,yn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=yn.zpp_pool,yn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Fi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=yn.zpp_pool,yn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=yn.zpp_pool,yn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Fi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Fi.prototype.empty=function(){return null==this.head},Fi.prototype.size=function(){return this.length},Fi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fi.prototype.front=function(){return this.head.elt},Fi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Fi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Fi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Fi.prototype.__class__=Fi;var ji=zpp_nape.util.ZNPNode_ZPP_CbType=function(){this.elt=null,this.next=null};ji.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"],ji.prototype.next=null,ji.prototype.alloc=function(){},ji.prototype.free=function(){this.elt=null},ji.prototype.elt=null,ji.prototype.elem=function(){return this.elt},ji.prototype.__class__=ji;var Ni=zpp_nape.util.ZNPNode_ZPP_CallbackSet=function(){this.elt=null,this.next=null};Ni.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"],Ni.prototype.next=null,Ni.prototype.alloc=function(){},Ni.prototype.free=function(){this.elt=null},Ni.prototype.elt=null,Ni.prototype.elem=function(){return this.elt},Ni.prototype.__class__=Ni;var Ui=zpp_nape.util.ZNPNode_ZPP_Shape=function(){this.elt=null,this.next=null};Ui.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"],Ui.prototype.next=null,Ui.prototype.alloc=function(){},Ui.prototype.free=function(){this.elt=null},Ui.prototype.elt=null,Ui.prototype.elem=function(){return this.elt},Ui.prototype.__class__=Ui;var Hi=zpp_nape.util.ZNPNode_ZPP_Body=function(){this.elt=null,this.next=null};Hi.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"],Hi.prototype.next=null,Hi.prototype.alloc=function(){},Hi.prototype.free=function(){this.elt=null},Hi.prototype.elt=null,Hi.prototype.elem=function(){return this.elt},Hi.prototype.__class__=Hi;var Vi=zpp_nape.util.ZNPNode_ZPP_Constraint=function(){this.elt=null,this.next=null};Vi.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"],Vi.prototype.next=null,Vi.prototype.alloc=function(){},Vi.prototype.free=function(){this.elt=null},Vi.prototype.elt=null,Vi.prototype.elem=function(){return this.elt},Vi.prototype.__class__=Vi;var Wi=zpp_nape.util.ZNPNode_ZPP_Compound=function(){this.elt=null,this.next=null};Wi.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"],Wi.prototype.next=null,Wi.prototype.alloc=function(){},Wi.prototype.free=function(){this.elt=null},Wi.prototype.elt=null,Wi.prototype.elem=function(){return this.elt},Wi.prototype.__class__=Wi;var Zo=zpp_nape.util.ZNPNode_ZPP_Arbiter=function(){this.elt=null,this.next=null};Zo.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"],Zo.prototype.next=null,Zo.prototype.alloc=function(){},Zo.prototype.free=function(){this.elt=null},Zo.prototype.elt=null,Zo.prototype.elem=function(){return this.elt},Zo.prototype.__class__=Zo;var Ko=zpp_nape.util.ZNPNode_ZPP_InteractionListener=function(){this.elt=null,this.next=null};Ko.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"],Ko.prototype.next=null,Ko.prototype.alloc=function(){},Ko.prototype.free=function(){this.elt=null},Ko.prototype.elt=null,Ko.prototype.elem=function(){return this.elt},Ko.prototype.__class__=Ko;var Xi=zpp_nape.util.ZNPNode_ZPP_CbSet=function(){this.elt=null,this.next=null};Xi.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"],Xi.prototype.next=null,Xi.prototype.alloc=function(){},Xi.prototype.free=function(){this.elt=null},Xi.prototype.elt=null,Xi.prototype.elem=function(){return this.elt},Xi.prototype.__class__=Xi;var Jo=zpp_nape.util.ZNPNode_ZPP_Interactor=function(){this.elt=null,this.next=null};Jo.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"],Jo.prototype.next=null,Jo.prototype.alloc=function(){},Jo.prototype.free=function(){this.elt=null},Jo.prototype.elt=null,Jo.prototype.elem=function(){return this.elt},Jo.prototype.__class__=Jo;var qi=zpp_nape.util.ZNPNode_ZPP_BodyListener=function(){this.elt=null,this.next=null};qi.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"],qi.prototype.next=null,qi.prototype.alloc=function(){},qi.prototype.free=function(){this.elt=null},qi.prototype.elt=null,qi.prototype.elem=function(){return this.elt},qi.prototype.__class__=qi;var Yi=zpp_nape.util.ZNPNode_ZPP_CbSetPair=function(){this.elt=null,this.next=null};Yi.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"],Yi.prototype.next=null,Yi.prototype.alloc=function(){},Yi.prototype.free=function(){this.elt=null},Yi.prototype.elt=null,Yi.prototype.elem=function(){return this.elt},Yi.prototype.__class__=Yi;var Zi=zpp_nape.util.ZNPNode_ZPP_ConstraintListener=function(){this.elt=null,this.next=null};Zi.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"],Zi.prototype.next=null,Zi.prototype.alloc=function(){},Zi.prototype.free=function(){this.elt=null},Zi.prototype.elt=null,Zi.prototype.elem=function(){return this.elt},Zi.prototype.__class__=Zi;var Ki=zpp_nape.util.ZNPNode_ZPP_CutInt=function(){this.elt=null,this.next=null};Ki.__name__=["zpp_nape","util","ZNPNode_ZPP_CutInt"],Ki.prototype.next=null,Ki.prototype.alloc=function(){},Ki.prototype.free=function(){this.elt=null},Ki.prototype.elt=null,Ki.prototype.elem=function(){return this.elt},Ki.prototype.__class__=Ki;var Ji=zpp_nape.util.ZNPNode_ZPP_CutVert=function(){this.elt=null,this.next=null};Ji.__name__=["zpp_nape","util","ZNPNode_ZPP_CutVert"],Ji.prototype.next=null,Ji.prototype.alloc=function(){},Ji.prototype.free=function(){this.elt=null},Ji.prototype.elt=null,Ji.prototype.elem=function(){return this.elt},Ji.prototype.__class__=Ji;var Qi=zpp_nape.util.ZNPNode_ZPP_PartitionVertex=function(){this.elt=null,this.next=null};Qi.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionVertex"],Qi.prototype.next=null,Qi.prototype.alloc=function(){},Qi.prototype.free=function(){this.elt=null},Qi.prototype.elt=null,Qi.prototype.elem=function(){return this.elt},Qi.prototype.__class__=Qi;var $i=zpp_nape.util.ZNPNode_ZPP_SimplifyP=function(){this.elt=null,this.next=null};$i.__name__=["zpp_nape","util","ZNPNode_ZPP_SimplifyP"],$i.prototype.next=null,$i.prototype.alloc=function(){},$i.prototype.free=function(){this.elt=null},$i.prototype.elt=null,$i.prototype.elem=function(){return this.elt},$i.prototype.__class__=$i;var en=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly=function(){this.elt=null,this.next=null};en.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionedPoly"],en.prototype.next=null,en.prototype.alloc=function(){},en.prototype.free=function(){this.elt=null},en.prototype.elt=null,en.prototype.elem=function(){return this.elt},en.prototype.__class__=en;var tn=zpp_nape.util.ZNPNode_ZPP_GeomVert=function(){this.elt=null,this.next=null};tn.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomVert"],tn.prototype.next=null,tn.prototype.alloc=function(){},tn.prototype.free=function(){this.elt=null},tn.prototype.elt=null,tn.prototype.elem=function(){return this.elt},tn.prototype.__class__=tn;var nn=zpp_nape.util.ZNPNode_ZPP_SimpleVert=function(){this.elt=null,this.next=null};nn.__name__=["zpp_nape","util","ZNPNode_ZPP_SimpleVert"],nn.prototype.next=null,nn.prototype.alloc=function(){},nn.prototype.free=function(){this.elt=null},nn.prototype.elt=null,nn.prototype.elem=function(){return this.elt},nn.prototype.__class__=nn;var rn=zpp_nape.util.ZNPNode_ZPP_SimpleEvent=function(){this.elt=null,this.next=null};rn.__name__=["zpp_nape","util","ZNPNode_ZPP_SimpleEvent"],rn.prototype.next=null,rn.prototype.alloc=function(){},rn.prototype.free=function(){this.elt=null},rn.prototype.elt=null,rn.prototype.elem=function(){return this.elt},rn.prototype.__class__=rn;var on=zpp_nape.util.ZNPNode_ZPP_Vec2=function(){this.elt=null,this.next=null};on.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"],on.prototype.next=null,on.prototype.alloc=function(){},on.prototype.free=function(){this.elt=null},on.prototype.elt=null,on.prototype.elem=function(){return this.elt},on.prototype.__class__=on;var rr=zpp_nape.util.ZNPNode_ZPP_AABBPair=function(){this.elt=null,this.next=null};rr.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"],rr.prototype.next=null,rr.prototype.alloc=function(){},rr.prototype.free=function(){this.elt=null},rr.prototype.elt=null,rr.prototype.elem=function(){return this.elt},rr.prototype.__class__=rr;var an=zpp_nape.util.ZNPNode_ZPP_Edge=function(){this.elt=null,this.next=null};an.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"],an.prototype.next=null,an.prototype.alloc=function(){},an.prototype.free=function(){this.elt=null},an.prototype.elt=null,an.prototype.elem=function(){return this.elt},an.prototype.__class__=an;var sn=zpp_nape.util.ZNPNode_ZPP_AABBNode=function(){this.elt=null,this.next=null};sn.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBNode"],sn.prototype.next=null,sn.prototype.alloc=function(){},sn.prototype.free=function(){this.elt=null},sn.prototype.elt=null,sn.prototype.elem=function(){return this.elt},sn.prototype.__class__=sn;var pn=zpp_nape.util.ZNPNode_ZPP_Component=function(){this.elt=null,this.next=null};pn.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"],pn.prototype.next=null,pn.prototype.alloc=function(){},pn.prototype.free=function(){this.elt=null},pn.prototype.elt=null,pn.prototype.elem=function(){return this.elt},pn.prototype.__class__=pn;var Qo=zpp_nape.util.ZNPNode_ZPP_FluidArbiter=function(){this.elt=null,this.next=null};Qo.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"],Qo.prototype.next=null,Qo.prototype.alloc=function(){},Qo.prototype.free=function(){this.elt=null},Qo.prototype.elt=null,Qo.prototype.elem=function(){return this.elt},Qo.prototype.__class__=Qo;var $o=zpp_nape.util.ZNPNode_ZPP_SensorArbiter=function(){this.elt=null,this.next=null};$o.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"],$o.prototype.next=null,$o.prototype.alloc=function(){},$o.prototype.free=function(){this.elt=null},$o.prototype.elt=null,$o.prototype.elem=function(){return this.elt},$o.prototype.__class__=$o;var hn=zpp_nape.util.ZNPNode_ZPP_Listener=function(){this.elt=null,this.next=null};hn.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"],hn.prototype.next=null,hn.prototype.alloc=function(){},hn.prototype.free=function(){this.elt=null},hn.prototype.elt=null,hn.prototype.elem=function(){return this.elt},hn.prototype.__class__=hn;var ea=zpp_nape.util.ZNPNode_ZPP_ColArbiter=function(){this.elt=null,this.next=null};ea.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"],ea.prototype.next=null,ea.prototype.alloc=function(){},ea.prototype.free=function(){this.elt=null},ea.prototype.elt=null,ea.prototype.elem=function(){return this.elt},ea.prototype.__class__=ea;var un=zpp_nape.util.ZNPNode_ZPP_InteractionGroup=function(){this.elt=null,this.next=null};un.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"],un.prototype.next=null,un.prototype.alloc=function(){},un.prototype.free=function(){this.elt=null},un.prototype.elt=null,un.prototype.elem=function(){return this.elt},un.prototype.__class__=un;var dn=zpp_nape.util.ZNPNode_ZPP_ToiEvent=function(){this.elt=null,this.next=null};dn.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"],dn.prototype.next=null,dn.prototype.alloc=function(){},dn.prototype.free=function(){this.elt=null},dn.prototype.elt=null,dn.prototype.elem=function(){return this.elt},dn.prototype.__class__=dn;var cn=zpp_nape.util.ZNPNode_ConvexResult=function(){this.elt=null,this.next=null};cn.__name__=["zpp_nape","util","ZNPNode_ConvexResult"],cn.prototype.next=null,cn.prototype.alloc=function(){},cn.prototype.free=function(){this.elt=null},cn.prototype.elt=null,cn.prototype.elem=function(){return this.elt},cn.prototype.__class__=cn;var _n=zpp_nape.util.ZNPNode_ZPP_GeomPoly=function(){this.elt=null,this.next=null};_n.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"],_n.prototype.next=null,_n.prototype.alloc=function(){},_n.prototype.free=function(){this.elt=null},_n.prototype.elt=null,_n.prototype.elem=function(){return this.elt},_n.prototype.__class__=_n;var yn=zpp_nape.util.ZNPNode_RayResult=function(){this.elt=null,this.next=null};yn.__name__=["zpp_nape","util","ZNPNode_RayResult"],yn.prototype.next=null,yn.prototype.alloc=function(){},yn.prototype.free=function(){this.elt=null},yn.prototype.elt=null,yn.prototype.elem=function(){return this.elt},yn.prototype.__class__=yn;var xn=zpp_nape.util.ZPP_MixVec2List=function(){this.at_index=0,this.at_ite=null,this.zip_length=!1,this._length=0,this.inner=null,ge.call(this),this.at_ite=null,this.at_index=0,this.zip_length=!0,this._length=0};xn.__name__=["zpp_nape","util","ZPP_MixVec2List"],xn.__super__=ge,xn.prototype=Object.create(ge.prototype),xn.get=function(e,t){null==t&&(t=!1);var i=new xn;return i.inner=e,i.zpp_inner.immutable=t,i},xn.prototype.inner=null,xn.prototype._length=null,xn.prototype.zip_length=null,xn.prototype.at_ite=null,xn.prototype.at_index=null,xn.prototype.zpp_gl=function(){if(this.zpp_vm(),this.zip_length){this._length=0;for(var e=this.inner.next;null!=e;)this._length++,e=e.next;this.zip_length=!1}return this._length},xn.prototype.zpp_vm=function(){this.zpp_inner.validate(),this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},xn.prototype.at=function(e){for(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),(e<this.at_index||null==this.at_ite)&&(this.at_index=0,this.at_ite=this.inner.next);this.at_index!=e;)this.at_index++,this.at_ite=this.at_ite.next;var t=this.at_ite;if(null==t.outer){t.outer=new lt;var i=t.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,t.outer.zpp_inner=t}return t.outer},xn.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.inner.add(e.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},xn.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),e.zpp_inner):this.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},xn.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(null==(e=this.inner.next).outer){e.outer=new lt;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,e.outer.zpp_inner=e}var i=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.inner.pop()}else{null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var n=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==n?this.inner.next:n.next).outer){e.outer=new lt;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.inner.erase(n)}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new lt;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},xn.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var t=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==t?this.inner.next:t.next).outer){e.outer=new lt;var i=e.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,e.outer.zpp_inner=e}var n=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.inner.erase(t)}else{if(null==(e=this.inner.next).outer){e.outer=new lt;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.inner.pop()}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new lt;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},xn.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.inner.next;null!=i;){if(e.zpp_inner==i){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},xn.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},xn.prototype.__class__=xn;var mn=zpp_nape.util.ZPP_ConstraintList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ae,this._invalidated=!0};mn.__name__=["zpp_nape","util","ZPP_ConstraintList"],mn.get=function(e,t){null==t&&(t=!1);var i=new b;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},mn.prototype.outer=null,mn.prototype.inner=null,mn.prototype.immutable=null,mn.prototype._invalidated=null,mn.prototype._invalidate=null,mn.prototype._validate=null,mn.prototype._modifiable=null,mn.prototype.adder=null,mn.prototype.post_adder=null,mn.prototype.subber=null,mn.prototype.dontremove=null,mn.prototype.reverse_flag=null,mn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},mn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},mn.prototype.modify_test=function(){},mn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},mn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},mn.prototype.at_index=null,mn.prototype.at_ite=null,mn.prototype.push_ite=null,mn.prototype.zip_length=null,mn.prototype.user_length=null,mn.prototype.__class__=mn;var fn=zpp_nape.util.ZPP_BodyList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new mi,this._invalidated=!0};fn.__name__=["zpp_nape","util","ZPP_BodyList"],fn.get=function(e,t){null==t&&(t=!1);var i=new ee;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},fn.prototype.outer=null,fn.prototype.inner=null,fn.prototype.immutable=null,fn.prototype._invalidated=null,fn.prototype._invalidate=null,fn.prototype._validate=null,fn.prototype._modifiable=null,fn.prototype.adder=null,fn.prototype.post_adder=null,fn.prototype.subber=null,fn.prototype.dontremove=null,fn.prototype.reverse_flag=null,fn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},fn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},fn.prototype.modify_test=function(){},fn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},fn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},fn.prototype.at_index=null,fn.prototype.at_ite=null,fn.prototype.push_ite=null,fn.prototype.zip_length=null,fn.prototype.user_length=null,fn.prototype.__class__=fn;var vn=zpp_nape.util.ZPP_InteractorList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ee,this._invalidated=!0};vn.__name__=["zpp_nape","util","ZPP_InteractorList"],vn.get=function(e,t){null==t&&(t=!1);var i=new he;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},vn.prototype.outer=null,vn.prototype.inner=null,vn.prototype.immutable=null,vn.prototype._invalidated=null,vn.prototype._invalidate=null,vn.prototype._validate=null,vn.prototype._modifiable=null,vn.prototype.adder=null,vn.prototype.post_adder=null,vn.prototype.subber=null,vn.prototype.dontremove=null,vn.prototype.reverse_flag=null,vn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},vn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},vn.prototype.modify_test=function(){},vn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},vn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},vn.prototype.at_index=null,vn.prototype.at_ite=null,vn.prototype.push_ite=null,vn.prototype.zip_length=null,vn.prototype.user_length=null,vn.prototype.__class__=vn;var gn=zpp_nape.util.ZPP_CompoundList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new fi,this._invalidated=!0};gn.__name__=["zpp_nape","util","ZPP_CompoundList"],gn.get=function(e,t){null==t&&(t=!1);var i=new ae;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},gn.prototype.outer=null,gn.prototype.inner=null,gn.prototype.immutable=null,gn.prototype._invalidated=null,gn.prototype._invalidate=null,gn.prototype._validate=null,gn.prototype._modifiable=null,gn.prototype.adder=null,gn.prototype.post_adder=null,gn.prototype.subber=null,gn.prototype.dontremove=null,gn.prototype.reverse_flag=null,gn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},gn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},gn.prototype.modify_test=function(){},gn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},gn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},gn.prototype.at_index=null,gn.prototype.at_ite=null,gn.prototype.push_ite=null,gn.prototype.zip_length=null,gn.prototype.user_length=null,gn.prototype.__class__=gn;var zn=zpp_nape.util.ZPP_ListenerList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ei,this._invalidated=!0};zn.__name__=["zpp_nape","util","ZPP_ListenerList"],zn.get=function(e,t){null==t&&(t=!1);var i=new x;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},zn.prototype.outer=null,zn.prototype.inner=null,zn.prototype.immutable=null,zn.prototype._invalidated=null,zn.prototype._invalidate=null,zn.prototype._validate=null,zn.prototype._modifiable=null,zn.prototype.adder=null,zn.prototype.post_adder=null,zn.prototype.subber=null,zn.prototype.dontremove=null,zn.prototype.reverse_flag=null,zn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zn.prototype.modify_test=function(){},zn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zn.prototype.at_index=null,zn.prototype.at_ite=null,zn.prototype.push_ite=null,zn.prototype.zip_length=null,zn.prototype.user_length=null,zn.prototype.__class__=zn;var Tn=zpp_nape.util.ZPP_CbTypeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Fe,this._invalidated=!0};Tn.__name__=["zpp_nape","util","ZPP_CbTypeList"],Tn.get=function(e,t){null==t&&(t=!1);var i=new y;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Tn.prototype.outer=null,Tn.prototype.inner=null,Tn.prototype.immutable=null,Tn.prototype._invalidated=null,Tn.prototype._invalidate=null,Tn.prototype._validate=null,Tn.prototype._modifiable=null,Tn.prototype.adder=null,Tn.prototype.post_adder=null,Tn.prototype.subber=null,Tn.prototype.dontremove=null,Tn.prototype.reverse_flag=null,Tn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Tn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Tn.prototype.modify_test=function(){},Tn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Tn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Tn.prototype.at_index=null,Tn.prototype.at_ite=null,Tn.prototype.push_ite=null,Tn.prototype.zip_length=null,Tn.prototype.user_length=null,Tn.prototype.__class__=Tn;var Gn=zpp_nape.util.ZPP_Vec2List=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new gt,this._invalidated=!0};Gn.__name__=["zpp_nape","util","ZPP_Vec2List"],Gn.get=function(e,t){null==t&&(t=!1);var i=new ge;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Gn.prototype.outer=null,Gn.prototype.inner=null,Gn.prototype.immutable=null,Gn.prototype._invalidated=null,Gn.prototype._invalidate=null,Gn.prototype._validate=null,Gn.prototype._modifiable=null,Gn.prototype.adder=null,Gn.prototype.post_adder=null,Gn.prototype.subber=null,Gn.prototype.dontremove=null,Gn.prototype.reverse_flag=null,Gn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Gn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Gn.prototype.modify_test=function(){},Gn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Gn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Gn.prototype.at_index=null,Gn.prototype.at_ite=null,Gn.prototype.push_ite=null,Gn.prototype.zip_length=null,Gn.prototype.user_length=null,Gn.prototype.__class__=Gn;var On=zpp_nape.util.ZPP_GeomPolyList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ri,this._invalidated=!0};On.__name__=["zpp_nape","util","ZPP_GeomPolyList"],On.get=function(e,t){null==t&&(t=!1);var i=new wn;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},On.prototype.outer=null,On.prototype.inner=null,On.prototype.immutable=null,On.prototype._invalidated=null,On.prototype._invalidate=null,On.prototype._validate=null,On.prototype._modifiable=null,On.prototype.adder=null,On.prototype.post_adder=null,On.prototype.subber=null,On.prototype.dontremove=null,On.prototype.reverse_flag=null,On.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},On.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},On.prototype.modify_test=function(){},On.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},On.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},On.prototype.at_index=null,On.prototype.at_ite=null,On.prototype.push_ite=null,On.prototype.zip_length=null,On.prototype.user_length=null,On.prototype.__class__=On;var An=zpp_nape.util.ZPP_RayResultList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Fi,this._invalidated=!0};An.__name__=["zpp_nape","util","ZPP_RayResultList"],An.get=function(e,t){null==t&&(t=!1);var i=new Z;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},An.prototype.outer=null,An.prototype.inner=null,An.prototype.immutable=null,An.prototype._invalidated=null,An.prototype._invalidate=null,An.prototype._validate=null,An.prototype._modifiable=null,An.prototype.adder=null,An.prototype.post_adder=null,An.prototype.subber=null,An.prototype.dontremove=null,An.prototype.reverse_flag=null,An.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},An.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},An.prototype.modify_test=function(){},An.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},An.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},An.prototype.at_index=null,An.prototype.at_ite=null,An.prototype.push_ite=null,An.prototype.zip_length=null,An.prototype.user_length=null,An.prototype.__class__=An;var En=zpp_nape.util.ZPP_ConvexResultList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Di,this._invalidated=!0};En.__name__=["zpp_nape","util","ZPP_ConvexResultList"],En.get=function(e,t){null==t&&(t=!1);var i=new pt;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},En.prototype.outer=null,En.prototype.inner=null,En.prototype.immutable=null,En.prototype._invalidated=null,En.prototype._invalidate=null,En.prototype._validate=null,En.prototype._modifiable=null,En.prototype.adder=null,En.prototype.post_adder=null,En.prototype.subber=null,En.prototype.dontremove=null,En.prototype.reverse_flag=null,En.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},En.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},En.prototype.modify_test=function(){},En.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},En.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},En.prototype.at_index=null,En.prototype.at_ite=null,En.prototype.push_ite=null,En.prototype.zip_length=null,En.prototype.user_length=null,En.prototype.__class__=En;var In=zpp_nape.util.ZPP_EdgeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new ki,this._invalidated=!0};In.__name__=["zpp_nape","util","ZPP_EdgeList"],In.get=function(e,t){null==t&&(t=!1);var i=new ye;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},In.prototype.outer=null,In.prototype.inner=null,In.prototype.immutable=null,In.prototype._invalidated=null,In.prototype._invalidate=null,In.prototype._validate=null,In.prototype._modifiable=null,In.prototype.adder=null,In.prototype.post_adder=null,In.prototype.subber=null,In.prototype.dontremove=null,In.prototype.reverse_flag=null,In.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},In.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},In.prototype.modify_test=function(){},In.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},In.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},In.prototype.at_index=null,In.prototype.at_ite=null,In.prototype.push_ite=null,In.prototype.zip_length=null,In.prototype.user_length=null,In.prototype.__class__=In;var Bn=zpp_nape.util.ZPP_ShapeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new xi,this._invalidated=!0};Bn.__name__=["zpp_nape","util","ZPP_ShapeList"],Bn.get=function(e,t){null==t&&(t=!1);var i=new me;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Bn.prototype.outer=null,Bn.prototype.inner=null,Bn.prototype.immutable=null,Bn.prototype._invalidated=null,Bn.prototype._invalidate=null,Bn.prototype._validate=null,Bn.prototype._modifiable=null,Bn.prototype.adder=null,Bn.prototype.post_adder=null,Bn.prototype.subber=null,Bn.prototype.dontremove=null,Bn.prototype.reverse_flag=null,Bn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Bn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Bn.prototype.modify_test=function(){},Bn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Bn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Bn.prototype.at_index=null,Bn.prototype.at_ite=null,Bn.prototype.push_ite=null,Bn.prototype.zip_length=null,Bn.prototype.user_length=null,Bn.prototype.__class__=Bn;var Ln=zpp_nape.util.ZPP_InteractionGroupList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Bi,this._invalidated=!0};Ln.__name__=["zpp_nape","util","ZPP_InteractionGroupList"],Ln.get=function(e,t){null==t&&(t=!1);var i=new j;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Ln.prototype.outer=null,Ln.prototype.inner=null,Ln.prototype.immutable=null,Ln.prototype._invalidated=null,Ln.prototype._invalidate=null,Ln.prototype._validate=null,Ln.prototype._modifiable=null,Ln.prototype.adder=null,Ln.prototype.post_adder=null,Ln.prototype.subber=null,Ln.prototype.dontremove=null,Ln.prototype.reverse_flag=null,Ln.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Ln.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Ln.prototype.modify_test=function(){},Ln.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Ln.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Ln.prototype.at_index=null,Ln.prototype.at_ite=null,Ln.prototype.push_ite=null,Ln.prototype.zip_length=null,Ln.prototype.user_length=null,Ln.prototype.__class__=Ln;var Dn=zpp_nape.util.ZPP_ArbiterList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new vi,this._invalidated=!0};Dn.__name__=["zpp_nape","util","ZPP_ArbiterList"],Dn.get=function(e,t){null==t&&(t=!1);var i=new A;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Dn.prototype.outer=null,Dn.prototype.inner=null,Dn.prototype.immutable=null,Dn.prototype._invalidated=null,Dn.prototype._invalidate=null,Dn.prototype._validate=null,Dn.prototype._modifiable=null,Dn.prototype.adder=null,Dn.prototype.post_adder=null,Dn.prototype.subber=null,Dn.prototype.dontremove=null,Dn.prototype.reverse_flag=null,Dn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Dn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Dn.prototype.modify_test=function(){},Dn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Dn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Dn.prototype.at_index=null,Dn.prototype.at_ite=null,Dn.prototype.push_ite=null,Dn.prototype.zip_length=null,Dn.prototype.user_length=null,Dn.prototype.__class__=Dn;var Rn=zpp_nape.util.ZPP_ContactList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Xo,this._invalidated=!0};Rn.__name__=["zpp_nape","util","ZPP_ContactList"],Rn.get=function(e,t){null==t&&(t=!1);var i=new L;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Rn.prototype.outer=null,Rn.prototype.inner=null,Rn.prototype.immutable=null,Rn.prototype._invalidated=null,Rn.prototype._invalidate=null,Rn.prototype._validate=null,Rn.prototype._modifiable=null,Rn.prototype.adder=null,Rn.prototype.post_adder=null,Rn.prototype.subber=null,Rn.prototype.dontremove=null,Rn.prototype.reverse_flag=null,Rn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Rn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Rn.prototype.modify_test=function(){},Rn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Rn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Rn.prototype.at_index=null,Rn.prototype.at_ite=null,Rn.prototype.push_ite=null,Rn.prototype.zip_length=null,Rn.prototype.user_length=null,Rn.prototype.__class__=Rn;var Fn=zpp_nape.util.ZPP_Math=function(){};Fn.__name__=["zpp_nape","util","ZPP_Math"],Fn.sqrt=function(e){return Math.sqrt(e)},Fn.invsqrt=function(e){return 1/Math.sqrt(e)},Fn.sqr=function(e){return e*e},Fn.clamp2=function(e,t){var i=-t;return e<i?i:t<e?t:e},Fn.clamp=function(e,t,i){return e<t?t:i<e?i:e},Fn.prototype.__class__=Fn;var jn=zpp_nape.util.ZPP_PubPool=function(){};jn.__name__=["zpp_nape","util","ZPP_PubPool"],jn.prototype.__class__=jn;var Nn=zpp_nape.util.ZPP_Set_ZPP_Body=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Nn.__name__=["zpp_nape","util","ZPP_Set_ZPP_Body"],Nn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Nn.prototype.alloc=function(){},Nn.prototype.lt=null,Nn.prototype.swapped=null,Nn.prototype.data=null,Nn.prototype.prev=null,Nn.prototype.next=null,Nn.prototype.parent=null,Nn.prototype.colour=null,Nn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Nn.prototype.empty=function(){return null==this.parent},Nn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Nn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Nn.prototype.has=function(e){return null!=this.find(e)},Nn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Nn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Nn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Nn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Nn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Nn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Nn.prototype.remove=function(e){this.remove_node(this.find(e))},Nn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Nn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Nn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Nn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Nn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Nn.zpp_pool,Nn.zpp_pool=p},Nn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Nn.zpp_pool,Nn.zpp_pool=i,e=t}this.parent=null}},Nn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Nn.zpp_pool,Nn.zpp_pool=n,t=i}this.parent=null}},Nn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Nn.zpp_pool,Nn.zpp_pool=e,i},Nn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Nn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Nn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Nn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Nn.prototype.insert=function(e){var t;if(null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Nn.prototype.__class__=Nn;var Un=zpp_nape.util.ZPP_Set_ZPP_CbSetPair=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Un.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"],Un.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Un.prototype.alloc=function(){},Un.prototype.lt=null,Un.prototype.swapped=null,Un.prototype.data=null,Un.prototype.prev=null,Un.prototype.next=null,Un.prototype.parent=null,Un.prototype.colour=null,Un.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Un.prototype.empty=function(){return null==this.parent},Un.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Un.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Un.prototype.has=function(e){return null!=this.find(e)},Un.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Un.prototype.has_weak=function(e){return null!=this.find_weak(e)},Un.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Un.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Un.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Un.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Un.prototype.remove=function(e){this.remove_node(this.find(e))},Un.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Un.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Un.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Un.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Un.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Un.zpp_pool,Un.zpp_pool=p},Un.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Un.zpp_pool,Un.zpp_pool=i,e=t}this.parent=null}},Un.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Un.zpp_pool,Un.zpp_pool=n,t=i}this.parent=null}},Un.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Un.zpp_pool,Un.zpp_pool=e,i},Un.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Un.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Un.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Un.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Un.prototype.insert=function(e){var t;if(null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Un.prototype.__class__=Un;var Hn=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Hn.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionVertex"],Hn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Hn.prototype.alloc=function(){},Hn.prototype.lt=null,Hn.prototype.swapped=null,Hn.prototype.data=null,Hn.prototype.prev=null,Hn.prototype.next=null,Hn.prototype.parent=null,Hn.prototype.colour=null,Hn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Hn.prototype.empty=function(){return null==this.parent},Hn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Hn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Hn.prototype.has=function(e){return null!=this.find(e)},Hn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Hn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Hn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Hn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Hn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Hn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Hn.prototype.remove=function(e){this.remove_node(this.find(e))},Hn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Hn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Hn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Hn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Hn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Hn.zpp_pool,Hn.zpp_pool=p},Hn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Hn.zpp_pool,Hn.zpp_pool=i,e=t}this.parent=null}},Hn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Hn.zpp_pool,Hn.zpp_pool=n,t=i}this.parent=null}},Hn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Hn.zpp_pool,Hn.zpp_pool=e,i},Hn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Hn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Hn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Hn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Hn.prototype.insert=function(e){var t;if(null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Hn.prototype.__class__=Hn;var Vn=zpp_nape.util.ZPP_Set_ZPP_PartitionPair=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Vn.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionPair"],Vn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Vn.prototype.alloc=function(){},Vn.prototype.lt=null,Vn.prototype.swapped=null,Vn.prototype.data=null,Vn.prototype.prev=null,Vn.prototype.next=null,Vn.prototype.parent=null,Vn.prototype.colour=null,Vn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Vn.prototype.empty=function(){return null==this.parent},Vn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Vn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Vn.prototype.has=function(e){return null!=this.find(e)},Vn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Vn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Vn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Vn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Vn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Vn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Vn.prototype.remove=function(e){this.remove_node(this.find(e))},Vn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Vn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Vn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Vn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Vn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Vn.zpp_pool,Vn.zpp_pool=p},Vn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Vn.zpp_pool,Vn.zpp_pool=i,e=t}this.parent=null}},Vn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Vn.zpp_pool,Vn.zpp_pool=n,t=i}this.parent=null}},Vn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Vn.zpp_pool,Vn.zpp_pool=e,i},Vn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Vn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Vn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Vn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Vn.prototype.insert=function(e){var t;if(null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Vn.prototype.__class__=Vn;var Wn=zpp_nape.util.ZPP_Set_ZPP_SimpleVert=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Wn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleVert"],Wn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Wn.prototype.alloc=function(){},Wn.prototype.lt=null,Wn.prototype.swapped=null,Wn.prototype.data=null,Wn.prototype.prev=null,Wn.prototype.next=null,Wn.prototype.parent=null,Wn.prototype.colour=null,Wn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Wn.prototype.empty=function(){return null==this.parent},Wn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Wn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Wn.prototype.has=function(e){return null!=this.find(e)},Wn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Wn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Wn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Wn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Wn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Wn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Wn.prototype.remove=function(e){this.remove_node(this.find(e))},Wn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Wn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Wn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Wn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Wn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Wn.zpp_pool,Wn.zpp_pool=p},Wn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Wn.zpp_pool,Wn.zpp_pool=i,e=t}this.parent=null}},Wn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Wn.zpp_pool,Wn.zpp_pool=n,t=i}this.parent=null}},Wn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Wn.zpp_pool,Wn.zpp_pool=e,i},Wn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Wn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Wn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Wn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Wn.prototype.insert=function(e){var t;if(null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Wn.prototype.__class__=Wn;var Xn=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Xn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleSeg"],Xn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Xn.prototype.alloc=function(){},Xn.prototype.lt=null,Xn.prototype.swapped=null,Xn.prototype.data=null,Xn.prototype.prev=null,Xn.prototype.next=null,Xn.prototype.parent=null,Xn.prototype.colour=null,Xn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Xn.prototype.empty=function(){return null==this.parent},Xn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Xn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Xn.prototype.has=function(e){return null!=this.find(e)},Xn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Xn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Xn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Xn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Xn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Xn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Xn.prototype.remove=function(e){this.remove_node(this.find(e))},Xn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Xn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Xn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Xn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Xn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Xn.zpp_pool,Xn.zpp_pool=p},Xn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Xn.zpp_pool,Xn.zpp_pool=i,e=t}this.parent=null}},Xn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Xn.zpp_pool,Xn.zpp_pool=n,t=i}this.parent=null}},Xn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Xn.zpp_pool,Xn.zpp_pool=e,i},Xn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Xn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Xn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Xn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Xn.prototype.insert=function(e){var t;if(null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Xn.prototype.__class__=Xn;var qn=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};qn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleEvent"],qn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},qn.prototype.alloc=function(){},qn.prototype.lt=null,qn.prototype.swapped=null,qn.prototype.data=null,qn.prototype.prev=null,qn.prototype.next=null,qn.prototype.parent=null,qn.prototype.colour=null,qn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},qn.prototype.empty=function(){return null==this.parent},qn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},qn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},qn.prototype.has=function(e){return null!=this.find(e)},qn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},qn.prototype.has_weak=function(e){return null!=this.find_weak(e)},qn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},qn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},qn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},qn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},qn.prototype.remove=function(e){this.remove_node(this.find(e))},qn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},qn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},qn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},qn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},qn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=qn.zpp_pool,qn.zpp_pool=p},qn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=qn.zpp_pool,qn.zpp_pool=i,e=t}this.parent=null}},qn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=qn.zpp_pool,qn.zpp_pool=n,t=i}this.parent=null}},qn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=qn.zpp_pool,qn.zpp_pool=e,i},qn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},qn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},qn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},qn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},qn.prototype.insert=function(e){var t;if(null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},qn.prototype.__class__=qn;var Yn=zpp_nape.util.ZPP_Set_ZPP_CbSet=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Yn.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"],Yn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Yn.prototype.alloc=function(){},Yn.prototype.lt=null,Yn.prototype.swapped=null,Yn.prototype.data=null,Yn.prototype.prev=null,Yn.prototype.next=null,Yn.prototype.parent=null,Yn.prototype.colour=null,Yn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Yn.prototype.empty=function(){return null==this.parent},Yn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Yn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Yn.prototype.has=function(e){return null!=this.find(e)},Yn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Yn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Yn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Yn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Yn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Yn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Yn.prototype.remove=function(e){this.remove_node(this.find(e))},Yn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Yn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Yn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Yn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Yn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Yn.zpp_pool,Yn.zpp_pool=p},Yn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Yn.zpp_pool,Yn.zpp_pool=i,e=t}this.parent=null}},Yn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Yn.zpp_pool,Yn.zpp_pool=n,t=i}this.parent=null}},Yn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Yn.zpp_pool,Yn.zpp_pool=e,i},Yn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Yn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Yn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Yn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Yn.prototype.insert=function(e){var t;if(null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Yn.prototype.__class__=Yn,String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0;var Zn={__name__:["Int"]},Kn={__name__:["Dynamic"]},Jn=Number;Jn.__name__=["Float"];var Qn=Boolean;Qn.__ename__=["Bool"];var $n={__name__:["Class"]},er={};ve.__toStr={}.toString,Qs.epsilon=1e-8,Qs.fluidAngularDragFriction=2.5,Qs.fluidAngularDrag=100,Qs.fluidVacuumDrag=.5,Qs.fluidLinearDrag=.5,Qs.collisionSlop=.2,Qs.collisionSlopCCD=.5,Qs.distanceThresholdCCD=.05,Qs.staticCCDLinearThreshold=.05,Qs.staticCCDAngularThreshold=.005,Qs.bulletCCDLinearThreshold=.125,Qs.bulletCCDAngularThreshold=.0125,Qs.dynamicSweepLinearThreshold=17,Qs.dynamicSweepAngularThreshold=.6,Qs.angularCCDSlipScale=.75,Qs.arbiterExpirationDelay=6,Qs.staticFrictionThreshold=2,Qs.elasticThreshold=20,Qs.sleepDelay=60,Qs.linearSleepThreshold=.2,Qs.angularSleepThreshold=.4,Qs.contactBiasCoef=.3,Qs.contactStaticBiasCoef=.6,Qs.contactContinuousBiasCoef=.4,Qs.contactContinuousStaticBiasCoef=.5,Qs.constraintLinearSlop=.1,Qs.constraintAngularSlop=.001,Qs.illConditionedThreshold=2e8,He.zpp_pool=null,Ve.zpp_pool=null,We.zpp_pool=null,Xe.zpp_pool=null,qe.zpp_pool=null,Ye.zpp_pool=null,Ze.zpp_pool=null,Ke.zpp_pool=null,Je.zpp_pool=null,Qe.zpp_pool=null,$e.zpp_pool=null,et.zpp_pool=null,tt.zpp_pool=null,it.zpp_pool=null,ht.zpp_pool=null,Pe.FMAX=1e100,ke._Constraint=0,ke._Interactor=0,ke._CbType=0,ke._CbSet=0,ke._Listener=0,ke._ZPP_SimpleVert=0,ke._ZPP_SimpleSeg=0,ke._Space=0,ke._InteractionGroup=0,nt.zpp_pool=null,jo.zpp_pool=null,No.zpp_pool=null,Be.ANY_SHAPE=new c,Be.ANY_BODY=new c,Be.ANY_COMPOUND=new c,Be.ANY_CONSTRAINT=new c,Uo.internal=!1,Uo.id_ImmState_ACCEPT=1,Uo.id_ImmState_IGNORE=2,Uo.id_ImmState_ALWAYS=4,Uo.id_GravMassMode_DEFAULT=0,Uo.id_GravMassMode_FIXED=1,Uo.id_GravMassMode_SCALED=2,Uo.id_InertiaMode_DEFAULT=0,Uo.id_InertiaMode_FIXED=1,Uo.id_MassMode_DEFAULT=0,Uo.id_MassMode_FIXED=1,Uo.id_BodyType_STATIC=1,Uo.id_BodyType_DYNAMIC=2,Uo.id_BodyType_KINEMATIC=3,Uo.id_ListenerType_BODY=0,Uo.id_PreFlag_ACCEPT=1,Uo.id_ListenerType_CONSTRAINT=1,Uo.id_PreFlag_IGNORE=2,Uo.id_ListenerType_INTERACTION=2,Uo.id_PreFlag_ACCEPT_ONCE=3,Uo.id_ListenerType_PRE=3,Uo.id_PreFlag_IGNORE_ONCE=4,Uo.id_CbEvent_BEGIN=0,Uo.id_InteractionType_COLLISION=1,Uo.id_CbEvent_ONGOING=6,Uo.id_InteractionType_SENSOR=2,Uo.id_CbEvent_END=1,Uo.id_InteractionType_FLUID=4,Uo.id_CbEvent_WAKE=2,Uo.id_InteractionType_ANY=7,Uo.id_CbEvent_SLEEP=3,Uo.id_CbEvent_BREAK=4,Uo.id_CbEvent_PRE=5,Uo.id_Winding_UNDEFINED=0,Uo.id_Winding_CLOCKWISE=1,Uo.id_Winding_ANTICLOCKWISE=2,Uo.id_ValidationResult_VALID=0,Uo.id_ValidationResult_DEGENERATE=1,Uo.id_ValidationResult_CONCAVE=2,Uo.id_ValidationResult_SELF_INTERSECTING=3,Uo.id_ShapeType_CIRCLE=0,Uo.id_ShapeType_POLYGON=1,Uo.id_Broadphase_DYNAMIC_AABB_TREE=0,Uo.id_Broadphase_SWEEP_AND_PRUNE=1,Uo.id_ArbiterType_COLLISION=1,Uo.id_ArbiterType_SENSOR=2,Uo.id_ArbiterType_FLUID=4,Le.types=function(e){null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new m,Uo.internal=!1);var t=Uo.ListenerType_BODY;null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new m,Uo.internal=!1);var i=Uo.ListenerType_CONSTRAINT;null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new m,Uo.internal=!1);var n=Uo.ListenerType_INTERACTION;return null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new m,Uo.internal=!1),[t,i,n,Uo.ListenerType_PRE]}(),Le.events=function(e){null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1);var t=Uo.CbEvent_BEGIN;null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1);var i=Uo.CbEvent_END;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1);var n=Uo.CbEvent_WAKE;null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1);var r=Uo.CbEvent_SLEEP;null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new u,Uo.internal=!1);var o=Uo.CbEvent_BREAK;null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new u,Uo.internal=!1);var a=Uo.CbEvent_PRE;return null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),[t,i,n,r,o,a,Uo.CbEvent_ONGOING]}(),ri.UCbSet=new Ie,ri.VCbSet=new Ie,ri.WCbSet=new Ie,ri.UCbType=new Fe,ri.VCbType=new Fe,ri.WCbType=new Fe,ln.internal=!1,ln.COL=1,ln.FLUID=4,ln.SENSOR=2,ln.types=function(e){null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new E,Uo.internal=!1);var t=Uo.ArbiterType_COLLISION;null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new E,Uo.internal=!1);var i=Uo.ArbiterType_SENSOR;return null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new E,Uo.internal=!1),[null,t,i,null,Uo.ArbiterType_FLUID]}(),Ho.zpp_pool=null,Vo.zpp_pool=null,Wo.FACE1=0,Wo.FACE2=1,Wo.CIRCLE=2,Wo.zpp_pool=null,Xo.internal=!1,Xo.zpp_pool=null,mt.zpp_pool=null,ft.SHAPE=1,ft.BODY=2,Oo.zpp_pool=null,$s.flowpoly=new gt,$s.flowsegs=new gt,bt.convexPool=null,bt.rayPool=null,bt.internal=!1,Sn.zpp_pool=null,Cn.zpp_pool=null,Mn.ints=null,Mn.paths=null,cr.zpp_pool=null,Ct.zpp_pool=null,Mt.zpp_pool=null,_r.zpp_pool=null,yr.me=new yr,yr.look_march=[-1,224,56,216,14,-1,54,214,131,99,-1,91,141,109,181,85],Pt.zpp_pool=null,Tt.queue=null,Tt.edges=null,Gt.nextId=0,Gt.zpp_pool=null,Ot.zpp_pool=null,Et.zpp_pool=null,It.zpp_pool=null,Bt.zpp_pool=null,Dt.sweep=null,Dt.inthash=null,Dt.vertices=null,Dt.queue=null,Dt.ints=null,Dt.list_vertices=null,Dt.list_queue=null,Rt.zpp_pool=null,Ft.zpp_pool=null,jt.stack=null,Ht.zpp_pool=null,Nt.zpp_pool=null,Ut.queue=null,Ut.stack=null,Ut.edgeSet=null,ep.zpp_pool=null,qt.types=function(e){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var t=Uo.BodyType_STATIC;null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1);var i=Uo.BodyType_DYNAMIC;return null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),[null,t,i,Uo.BodyType_KINEMATIC]}(),qt.bodystack=null,qt.bodyset=null,qt.cur_graph_depth=0,Zt.zpp_pool=null,Kt.zpp_pool=null,Kt.WAKE=1,Kt.PROPS=2,Kt.ANGDRAG=4,Kt.ARBITERS=8,Jt.types=function(e){null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new fe,Uo.internal=!1);var t=Uo.ShapeType_CIRCLE;return null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new fe,Uo.internal=!1),[t,Uo.ShapeType_POLYGON]}(),$t.zpp_pool=null,$t.internal=!1,Ao.zpp_pool=null,nr.zpp_pool=null,Eo.tmpaabb=new Oo,ii.FATTEN=3,ii.VEL_STEPS=2,ni.zpp_pool=null,oi.zpp_pool=null,Yo.zpp_pool=null,pi.zpp_pool=null,ci.zpp_pool=null,ji.zpp_pool=null,Ni.zpp_pool=null,Ui.zpp_pool=null,Hi.zpp_pool=null,Vi.zpp_pool=null,Wi.zpp_pool=null,Zo.zpp_pool=null,Ko.zpp_pool=null,Xi.zpp_pool=null,Jo.zpp_pool=null,qi.zpp_pool=null,Yi.zpp_pool=null,Zi.zpp_pool=null,Ki.zpp_pool=null,Ji.zpp_pool=null,Qi.zpp_pool=null,$i.zpp_pool=null,en.zpp_pool=null,tn.zpp_pool=null,nn.zpp_pool=null,rn.zpp_pool=null,on.zpp_pool=null,rr.zpp_pool=null,an.zpp_pool=null,sn.zpp_pool=null,pn.zpp_pool=null,Qo.zpp_pool=null,$o.zpp_pool=null,hn.zpp_pool=null,ea.zpp_pool=null,un.zpp_pool=null,dn.zpp_pool=null,cn.zpp_pool=null,_n.zpp_pool=null,yn.zpp_pool=null,mn.internal=!1,fn.internal=!1,vn.internal=!1,gn.internal=!1,zn.internal=!1,Tn.internal=!1,Gn.internal=!1,On.internal=!1,An.internal=!1,En.internal=!1,In.internal=!1,Bn.internal=!1,Ln.internal=!1,Dn.internal=!1,Rn.internal=!1,jn.poolGeomPoly=null,jn.poolVec2=null,jn.poolVec3=null,Nn.zpp_pool=null,Un.zpp_pool=null,Hn.zpp_pool=null,Vn.zpp_pool=null,Wn.zpp_pool=null,Xn.zpp_pool=null,qn.zpp_pool=null,Yn.zpp_pool=null,Me.main()}(),function(){function n(e,t,i){return e.call.apply(e.bind,arguments)}function r(t,i,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,n),t.apply(i,e)}}return function(){return t.apply(i,arguments)}}function _(e,t,i){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:r).apply(null,arguments)}var s=Date.now||function(){return+new Date};function t(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var p=!!window.FontFace;function l(e,t,i,n){if(t=e.c.createElement(t),i)for(var r in i)i.hasOwnProperty(r)&&("style"==r?t.style.cssText=i[r]:t.setAttribute(r,i[r]));return n&&t.appendChild(e.c.createTextNode(n)),t}function h(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function i(e){e.parentNode&&e.parentNode.removeChild(e)}function y(e,t,i){t=t||[],i=i||[];for(var n=e.className.split(/\s+/),r=0;r<t.length;r+=1){for(var o=!1,a=0;a<n.length;a+=1)if(t[r]===n[a]){o=!0;break}o||n.push(t[r])}for(t=[],r=0;r<n.length;r+=1){for(o=!1,a=0;a<i.length;a+=1)if(n[r]===i[a]){o=!0;break}o||t.push(n[r])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function o(e,t){for(var i=e.className.split(/\s+/),n=0,r=i.length;n<r;n++)if(i[n]==t)return!0;return!1}function u(e,t,i){function n(){a&&r&&(a(o),a=null)}t=l(e,"link",{rel:"stylesheet",href:t,media:"all"});var r=!1,o=null,a=i||null;p?(t.onload=function(){r=!0,n()},t.onerror=function(){r=!0,o=Error("Stylesheet failed to load"),n()}):setTimeout(function(){r=!0,n()},0),h(e,"head",t)}function d(e,t,i,n){var r=e.c.getElementsByTagName("head")[0];if(r){var o=l(e,"script",{src:t}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout(function(){a||(a=!0,i&&i(Error("Script load timeout")))},n||5e3),o}return null}function c(){this.a=0,this.c=null}function x(e){return e.a++,function(){e.a--,a(e)}}function m(e,t){e.c=t,a(e)}function a(e){0==e.a&&e.c&&(e.c(),e.c=null)}function f(e){this.a=e||"-"}function v(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function g(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var n=e[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function z(e){return e.a+e.f}function b(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function w(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new f("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function S(e){if(e.g){var t=o(e.f,e.a.c("wf","active")),i=[],n=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),y(e.f,i,n)}C(e,"inactive")}function C(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,z(i)):e.h[t]())}function M(){this.c={}}function P(e,t){this.c=e,this.f=t,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function k(e){h(e.c,"body",e.a)}function T(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+g(e.c)+";font-style:"+b(e)+";font-weight:"+e.f+"00;"}function G(e,t,i,n,r,o){this.g=e,this.j=t,this.a=n,this.c=i,this.f=r||3e3,this.h=o||void 0}function O(e,t,i,n,r,o,a){this.v=e,this.B=t,this.c=i,this.a=n,this.s=a||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new P(this.c,this.s),this.h=new P(this.c,this.s),this.j=new P(this.c,this.s),this.m=new P(this.c,this.s),e=T(e=new v(this.a.c+",serif",z(this.a))),this.g.a.style.cssText=e,e=T(e=new v(this.a.c+",sans-serif",z(this.a))),this.h.a.style.cssText=e,e=T(e=new v("serif",z(this.a))),this.j.a.style.cssText=e,e=T(e=new v("sans-serif",z(this.a))),this.m.a.style.cssText=e,k(this.g),k(this.h),k(this.j),k(this.m)}f.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},G.prototype.start=function(){var r=this.c.o.document,o=this,a=s(),e=new Promise(function(i,n){!function t(){var e;s()-a>=o.f?n():r.fonts.load((e=o.a,b(e)+" "+e.f+"00 300px "+g(e.c)),o.h).then(function(e){1<=e.length?i():setTimeout(t,25)},function(){n()})}()}),i=null,t=new Promise(function(e,t){i=setTimeout(t,o.f)});Promise.race([t,e]).then(function(){i&&(clearTimeout(i),i=null),o.g(o.a)},function(){o.j(o.a)})};var A={D:"serif",C:"sans-serif"},E=null;function I(){if(null===E){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);E=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return E}function B(e,t,i){for(var n in A)if(A.hasOwnProperty(n)&&t===e.f[A[n]]&&i===e.f[A[n]])return!0;return!1}function L(e){var t,i=e.g.a.offsetWidth,n=e.h.a.offsetWidth;(t=i===e.f.serif&&n===e.f["sans-serif"])||(t=I()&&B(e,i,n)),t?s()-e.A>=e.w?I()&&B(e,i,n)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?D(e,e.v):D(e,e.B):setTimeout(_(function(){L(this)},e),50):D(e,e.v)}function D(e,t){setTimeout(_(function(){i(this.g.a),i(this.h.a),i(this.j.a),i(this.m.a),t(this.a)},e),0)}function R(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}O.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),L(this)};var F=null;function j(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&y(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),C(e,"active")):S(e.a))}function e(e){this.j=e,this.a=new M,this.h=0,this.f=this.g=!0}function N(e,t){this.c=e,this.a=t}function U(e,t){this.c=e,this.a=t}function H(e,t){this.c=e||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=t||""}R.prototype.g=function(e){var t=this.a;t.g&&y(t.f,[t.a.c("wf",e.c,z(e).toString(),"active")],[t.a.c("wf",e.c,z(e).toString(),"loading"),t.a.c("wf",e.c,z(e).toString(),"inactive")]),C(t,"fontactive",e),this.m=!0,j(this)},R.prototype.h=function(e){var t=this.a;if(t.g){var i=o(t.f,t.a.c("wf",e.c,z(e).toString(),"active")),n=[],r=[t.a.c("wf",e.c,z(e).toString(),"loading")];i||n.push(t.a.c("wf",e.c,z(e).toString(),"inactive")),y(t.f,n,r)}C(t,"fontinactive",e),j(this)},e.prototype.load=function(e){this.c=new t(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(r,e,t){var i=[],n=t.timeout;o=e,o.g&&y(o.f,[o.a.c("wf","loading")]),C(o,"loading");var o;var i=function(e,t,i){var n,r=[];for(n in t)if(t.hasOwnProperty(n)){var o=e.c[n];o&&r.push(o(t[n],i))}return r}(r.a,t,r.c),a=new R(r.c,e,n);for(r.h=i.length,e=0,t=i.length;e<t;e++)i[e].load(function(e,t,i){var n,l,h,u,d,c;l=a,h=e,u=t,d=i,c=0==--(n=r).h,(n.f||n.g)&&setTimeout(function(){var e=d||null,t=u||{};if(0===h.length&&c)S(l.a);else{l.f+=h.length,c&&(l.j=c);var i,n=[];for(i=0;i<h.length;i++){var r=h[i],o=t[r.c],a=l.a,s=r;if(a.g&&y(a.f,[a.a.c("wf",s.c,z(s).toString(),"loading")]),C(a,"fontloading",s),(a=null)===F)if(window.FontFace){var s=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),p=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);F=s?42<parseInt(s[1],10):!p}else F=!1;a=F?new G(_(l.g,l),_(l.h,l),l.c,r,l.s,o):new O(_(l.g,l),_(l.h,l),l.c,r,l.s,e,o),n.push(a)}for(i=0;i<n.length;i++)n[i].start()}},0)})}(this,new w(this.c,e),e)},N.prototype.load=function(a){var t=this,s=t.a.projectId,e=t.a.version;if(s){var p=t.c.o;d(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+s+".js"+(e?"?v="+e:""),function(e){e?a([]):(p["__MonotypeConfiguration__"+s]=function(){return t.a},function e(){if(p["__mti_fntLst"+s]){var t,i=p["__mti_fntLst"+s](),n=[];if(i)for(var r=0;r<i.length;r++){var o=i[r].fontfamily;null!=i[r].fontStyle&&null!=i[r].fontWeight?(t=i[r].fontStyle+i[r].fontWeight,n.push(new v(o,t))):n.push(new v(o))}a(n)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+s}else a([])},U.prototype.load=function(e){var t,i,n=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},a=new c;for(t=0,i=n.length;t<i;t++)u(this.c,n[t],x(a));var s=[];for(t=0,i=r.length;t<i;t++)if((n=r[t].split(":"))[1])for(var p=n[1].split(","),l=0;l<p.length;l+=1)s.push(new v(n[0],p[l]));else s.push(new v(n[0]));m(a,function(){e(s,o)})};function V(e){this.f=e,this.a=[],this.c={}}var W={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},X={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},q={i:"i",italic:"i",n:"n",normal:"n"},Y=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Z(e,t){this.c=e,this.a=t}var K={Arimo:!0,Cousine:!0,Tinos:!0};function J(e,t){this.c=e,this.a=t}function Q(e,t){this.c=e,this.f=t,this.a=[]}Z.prototype.load=function(e){var t=new c,i=this.c,n=new H(this.a.api,this.a.text),r=this.a.families;!function(e,t){for(var i=t.length,n=0;n<i;n++){var r=t[n].split(":");3==r.length&&e.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),e.a.push(r.join(o))}}(n,r);var o=new V(r);!function(e){for(var t=e.f.length,i=0;i<t;i++){var n=e.f[i].split(":"),r=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var a;if(a=[],s=n[1])for(var s,p=(s=s.split(",")).length,l=0;l<p;l++){var h;if((h=s[l]).match(/^[\w-]+$/))if(null==(d=Y.exec(h.toLowerCase())))h="";else{if(h=null==(h=d[2])||""==h?"n":q[h],null==(d=d[1])||""==d)d="4";else var u=X[d],d=u||(isNaN(d)?"4":d.substr(0,1));h=[h,d].join("")}else h="";h&&a.push(h)}0<a.length&&(o=a),3==n.length&&(a=[],0<(n=(n=n[2])?n.split(","):a).length&&(n=W[n[0]])&&(e.c[r]=n))}for(e.c[r]||(n=W[r])&&(e.c[r]=n),n=0;n<o.length;n+=1)e.a.push(new v(r,o[n]))}}(o),u(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],n=0;n<t;n++)i.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),x(t)),m(t,function(){e(o.a,o.c,K)})},J.prototype.load=function(a){var e=this.a.id,s=this.c.o;e?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)a([]);else if(s.Typekit&&s.Typekit.config&&s.Typekit.config.fn){e=s.Typekit.config.fn;for(var t=[],i=0;i<e.length;i+=2)for(var n=e[i],r=e[i+1],o=0;o<r.length;o++)t.push(new v(n,r[o]));try{s.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}a(t)}},2e3):a([])},Q.prototype.load=function(l){var e,t=this.f.id,i=this.c.o,h=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(e,t){for(var i=0,n=t.fonts.length;i<n;++i){var r=t.fonts[i];h.a.push(new v(r.name,(o="font-weight:"+r.weight+";font-style:"+r.style,p=s=a=void 0,a=4,s="n",p=null,o&&((p=o.match(/(normal|oblique|italic)/i))&&p[1]&&(s=p[1].substr(0,1).toLowerCase()),(p=o.match(/([1-9]00|normal|bold)/i))&&p[1]&&(/bold/i.test(p[1])?a=7:/[1-9]00/.test(p[1])&&(a=parseInt(p[1].substr(0,1),10)))),s+a)))}var o,a,s,p;l(h.a)},d(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((e=this.c).o.location.hostname||e.a.location.hostname)+"/"+t+".js",function(e){e&&l([])})):l([])};var $=new e(window);$.a.c.custom=function(e,t){return new U(t,e)},$.a.c.fontdeck=function(e,t){return new Q(t,e)},$.a.c.monotype=function(e,t){return new N(t,e)},$.a.c.typekit=function(e,t){return new J(t,e)},$.a.c.google=function(e,t){return new Z(t,e)};var ee={load:_($.load,$)};"function"==typeof define&&define.amd?define(function(){return ee}):"undefined"!=typeof module&&module.exports?module.exports=ee:(window.WebFont=ee,window.WebFontConfig&&$.load(window.WebFontConfig))}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.h5CrossPromo=e.h5CrossPromo||{})}(this,function(e){"use strict";var u=function(e,t){return window.hasOwnProperty("_YaSDK")||window.hasOwnProperty("YaGames")?function(e,t){var i,n;if((null===(n=null===(i=window.YandexGamesSDKEnvironment)||void 0===i?void 0:i.browser)||void 0===n?void 0:n.lang)&&"en"===window.YandexGamesSDKEnvironment.browser.lang){var r=encodeURIComponent(t.toLowerCase());return"https://yandex.com/games/search?query=".concat(r,"&app=").concat(e)}return"https://yandex.ru/games/app/".concat(e,"?utm_source=game_header_title")}(e,t):"https://gamedistribution.com/games"},t=function(){function p(){}return p.setList=function(e){p.gameList=e},p.show=function(e,t){var i=t.fontFamily,n=document.getElementById("more-games-container");n.className="container-hz-menu",n.style.display="flex";var r=document.getElementById("more-games-title");r.style.display="flex",r.style.fontFamily=i||"Verdana",r.innerHTML=e||"More Games";var a=document.createElement("div");a.style.display="flex",n.appendChild(a);for(var o=function(e){var t=p.gameList[e],i=document.createElement("div");i.className="more-games-item",i.id="game-".concat(e),a.appendChild(i);var n=document.createElement("div");n.className="img-hz-menu ",n.style.background='url("./assets/mimages/'.concat(t.icon,'")'),n.style.backgroundSize="contain";var r=u(t.gameID,t.name);n.onclick=function(){window.op3n(r,"_blank")},i.appendChild(n);var o=document.createElement("div");o.className="more-games-text",o.innerHTML=t.name,i.appendChild(o)},s=0;s<p.gameList.length;s++)o(s)},p.hide=function(){var e=document.getElementById("more-games-container");e.style.display="none",e.querySelectorAll("*").forEach(function(e){return e.remove()}),document.getElementById("more-games-title").style.display="none"},p}(),i=function(){function h(){}return h.setList=function(e){h.gameList=e},h.show=function(e,t){var i=t.fontFamily,n=t.fontColor,o=t.borderColor,r=document.getElementById("more-games-container");r.className="container-block",r.style.display="flex";var a=document.getElementById("more-games-title");a.style.display="flex",a.style.fontFamily=i||"Verdana",a.style.color=n||"white",a.innerHTML=e||"More Games";var s=document.createElement("div");s.style.display="flex",r.appendChild(s);for(var p=function(e){var t=h.gameList[e],i=document.createElement("div");i.className="more-games-item",i.id="game-".concat(e),s.appendChild(i);var n=document.createElement("div");n.id="more-games-image",n.className="img-block",n.style.background='url("./assets/mimages/'.concat(t.icon,'")'),n.style.backgroundSize="contain",n.style.borderColor=o||"white";var r=u(t.gameID,t.name);n.onclick=function(){window.op3n(r,"_blank")},i.appendChild(n)},l=0;l<h.gameList.length;l++)p(l)},h.hide=function(){var e=document.getElementById("more-games-container");e.style.display="none",e.querySelectorAll("*").forEach(function(e){return e.remove()}),document.getElementById("more-games-title").style.display="none"},h}();e.HorizontalMenu=t,e.HBlock=i,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.i18next=t()}(this,function(){"use strict";var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},p=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var i;console&&console[e]&&(i=console)[e].apply(i,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t))}},h=new(function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};s(this,i),this.init(e,t)}return i.prototype.init=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||n,this.options=t,this.debug=t.debug},i.prototype.setDebug=function(e){this.debug=e},i.prototype.log=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)},i.prototype.warn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)},i.prototype.error=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")},i.prototype.deprecate=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)},i.prototype.forward=function(e,t,i,n){return n&&!this.debug?null:("string"==typeof e[0]&&(e[0]=""+i+this.prefix+" "+e[0]),this.logger[t](e))},i.prototype.create=function(e){return new i(this.logger,g({prefix:this.prefix+":"+e+":"},this.options))},i}()),t=function(){function e(){s(this,e),this.observers={}}return e.prototype.on=function(e,t){var i=this;e.split(" ").forEach(function(e){i.observers[e]=i.observers[e]||[],i.observers[e].push(t)})},e.prototype.off=function(t,i){var n=this;this.observers[t]&&this.observers[t].forEach(function(){if(i){var e=n.observers[t].indexOf(i);-1<e&&n.observers[t].splice(e,1)}else delete n.observers[t]})},e.prototype.emit=function(i){for(var e=arguments.length,n=Array(1<e?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];this.observers[i]&&[].concat(this.observers[i]).forEach(function(e){e.apply(void 0,n)});this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(e){var t;e.apply(e,(t=[i]).concat.apply(t,n))})},e}();function l(e){return null==e?"":""+e}function c(e,t,i){function n(e){return e&&-1<e.indexOf("###")?e.replace(/###/g,"."):e}function r(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");1<o.length;){if(r())return{};var a=n(o.shift());!e[a]&&i&&(e[a]=new i),e=e[a]}return r()?{}:{obj:e,k:n(o.shift())}}function u(e,t,i){var n=c(e,t,Object);n.obj[n.k]=i}function _(e,t){var i=c(e,t),n=i.obj,r=i.k;if(n)return n[r]}function i(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function o(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return r[e]}):e}var y=function(n){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};s(this,r);var i=p(this,n.call(this));return i.data=e,i.options=t,i}return e(r,n),r.prototype.addNamespaces=function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)},r.prototype.removeNamespaces=function(e){var t=this.options.ns.indexOf(e);-1<t&&this.options.ns.splice(t,1)},r.prototype.getResource=function(e,t,i){var n=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).keySeparator||this.options.keySeparator;void 0===n&&(n=".");var r=[e,t];return i&&"string"!=typeof i&&(r=r.concat(i)),i&&"string"==typeof i&&(r=r.concat(n?i.split(n):i)),-1<e.indexOf(".")&&(r=e.split(".")),_(this.data,r)},r.prototype.addResource=function(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[e,t];i&&(a=a.concat(o?i.split(o):i)),-1<e.indexOf(".")&&(n=t,t=(a=e.split("."))[1]),this.addNamespaces(t),u(this.data,a,n),r.silent||this.emit("added",e,t,i,n)},r.prototype.addResources=function(e,t,i){for(var n in i)"string"==typeof i[n]&&this.addResource(e,t,n,i[n],{silent:!0});this.emit("added",e,t,i)},r.prototype.addResourceBundle=function(e,t,i,n,r){var o=[e,t];-1<e.indexOf(".")&&(n=i,i=t,t=(o=e.split("."))[1]),this.addNamespaces(t);var a=_(this.data,o)||{};n?function e(t,i,n){for(var r in i)r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof i[r]||i[r]instanceof String?n&&(t[r]=i[r]):e(t[r],i[r],n):t[r]=i[r];return t}(a,i,r):a=g({},a,i),u(this.data,o,a),this.emit("added",e,t,i)},r.prototype.removeResourceBundle=function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)},r.prototype.hasResourceBundle=function(e,t){return void 0!==this.getResource(e,t)},r.prototype.getResourceBundle=function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?g({},this.getResource(e,t)):this.getResource(e,t)},r.prototype.toJSON=function(){return this.data},r}(t),x={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,i,n,r){var o=this;return e.forEach(function(e){o.processors[e]&&(t=o.processors[e].process(t,i,n,r))}),t}};function m(e){return e.interpolation={unescapeSuffix:"HTML"},e.interpolation.prefix=e.interpolationPrefix||"__",e.interpolation.suffix=e.interpolationSuffix||"__",e.interpolation.escapeValue=e.escapeInterpolation||!1,e.interpolation.nestingPrefix=e.reusePrefix||"$t(",e.interpolation.nestingSuffix=e.reuseSuffix||")",e}function z(e){return(e.interpolationPrefix||e.interpolationSuffix||void 0!==e.escapeInterpolation)&&(e=m(e)),e.nsSeparator=e.nsseparator,e.keySeparator=e.keyseparator,e.returnObjects=e.returnObjectTrees,e}var f=function(o){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};s(this,a);var i,n,r=p(this,o.call(this));return i=e,n=r,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"].forEach(function(e){i[e]&&(n[e]=i[e])}),r.options=t,r.logger=h.create("translator"),r}return e(a,o),a.prototype.changeLanguage=function(e){e&&(this.language=e)},a.prototype.exists=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};return"v1"===this.options.compatibilityAPI&&(t=z(t)),void 0!==this.resolve(e,t)},a.prototype.extractFromKey=function(e,t){var i=t.nsSeparator||this.options.nsSeparator;void 0===i&&(i=":");var n=t.keySeparator||this.options.keySeparator||".",r=t.ns||this.options.defaultNS;if(i&&-1<e.indexOf(i)){var o=e.split(i);(i!==n||i===n&&-1<this.options.ns.indexOf(o[0]))&&(r=o.shift()),e=o.join(n)}return"string"==typeof r&&(r=[r]),{key:e,namespaces:r}},a.prototype.translate=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("object"!==(void 0===t?"undefined":v(t))?t=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(t=z(t)),null==e||""===e)return"";"number"==typeof e&&(e=String(e)),"string"==typeof e&&(e=[e]);var i=t.keySeparator||this.options.keySeparator||".",n=this.extractFromKey(e[e.length-1],t),r=n.key,o=n.namespaces,a=o[o.length-1],s=t.lng||this.language,p=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(s&&"cimode"===s.toLowerCase())return p?a+(t.nsSeparator||this.options.nsSeparator)+r:r;var l=this.resolve(e,t),h=Object.prototype.toString.apply(l),u=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays;if(l&&"string"!=typeof l&&["[object Number]","[object Function]","[object RegExp]"].indexOf(h)<0&&(!u||"[object Array]"!==h)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(r,l,t):"key '"+r+" ("+this.language+")' returned an object instead of string.";if(t.keySeparator||this.options.keySeparator){var d="[object Array]"===h?[]:{};for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(d[c]=this.translate(""+r+i+c,g({},t,{joinArrays:!1,ns:o})));l=d}}else if(u&&"[object Array]"===h)(l=l.join(u))&&(l=this.extendTranslation(l,r,t));else{var _=!1,y=!1;if(this.isValidLookup(l)||void 0===t.defaultValue||(_=!0,l=t.defaultValue),this.isValidLookup(l)||(y=!0,l=r),y||_){this.logger.log("missingKey",s,a,r,l);var x=[],m=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&m&&m[0])for(var f=0;f<m.length;f++)x.push(m[f]);else"all"===this.options.saveMissingTo?x=this.languageUtils.toResolveHierarchy(t.lng||this.language):x.push(t.lng||this.language);this.options.saveMissing&&(this.options.missingKeyHandler?this.options.missingKeyHandler(x,a,r,l):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(x,a,r,l)),this.emit("missingKey",x,a,r,l)}l=this.extendTranslation(l,r,t),y&&l===r&&this.options.appendNamespaceToMissingKey&&(l=a+":"+r),y&&this.options.parseMissingKeyHandler&&(l=this.options.parseMissingKeyHandler(l))}return l},a.prototype.extendTranslation=function(e,t,i){var n=this;i.interpolation&&this.interpolator.init(g({},i,{interpolation:g({},this.options.interpolation,i.interpolation)}));var r=i.replace&&"string"!=typeof i.replace?i.replace:i;this.options.interpolation.defaultVariables&&(r=g({},this.options.interpolation.defaultVariables,r)),e=this.interpolator.interpolate(e,r,i.lng||this.language),!1!==i.nest&&(e=this.interpolator.nest(e,function(){return n.translate.apply(n,arguments)},i)),i.interpolation&&this.interpolator.reset();var o=i.postProcess||this.options.postProcess,a="string"==typeof o?[o]:o;return void 0!==e&&a&&a.length&&!1!==i.applyPostProcessor&&(e=x.handle(a,e,t,i,this)),e},a.prototype.resolve=function(e){var l=this,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=void 0;return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!l.isValidLookup(u)){var t=l.extractFromKey(e,h),a=t.key,i=t.namespaces;l.options.fallbackNS&&(i=i.concat(l.options.fallbackNS));var s=void 0!==h.count&&"string"!=typeof h.count,p=void 0!==h.context&&"string"==typeof h.context&&""!==h.context,n=h.lngs?h.lngs:l.languageUtils.toResolveHierarchy(h.lng||l.language);i.forEach(function(o){l.isValidLookup(u)||n.forEach(function(e){if(!l.isValidLookup(u)){var t=a,i=[t],n=void 0;s&&(n=l.pluralResolver.getSuffix(e,h.count)),s&&p&&i.push(t+n),p&&i.push(t+=""+l.options.contextSeparator+h.context),s&&i.push(t+=n);for(var r=void 0;r=i.pop();)l.isValidLookup(u)||(u=l.getResource(e,o,r,h))}})})}}),u},a.prototype.isValidLookup=function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)},a.prototype.getResource=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return this.resourceStore.getResource(e,t,i,n)},a}(t);function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}var b=function(){function t(e){s(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=h.create("languageUtils")}return t.prototype.getScriptPartFromCode=function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))},t.prototype.getLanguagePartFromCode=function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])},t.prototype.formatLanguageCode=function(e){if("string"==typeof e&&-1<e.indexOf("-")){var t=["hans","hant","latn","cyrl","cans","mong","arab"],i=e.split("-");return this.options.lowerCaseLng?i=i.map(function(e){return e.toLowerCase()}):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),-1<t.indexOf(i[1].toLowerCase())&&(i[1]=a(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),-1<t.indexOf(i[1].toLowerCase())&&(i[1]=a(i[1].toLowerCase())),-1<t.indexOf(i[2].toLowerCase())&&(i[2]=a(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e},t.prototype.isWhitelisted=function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||-1<this.whitelist.indexOf(e)},t.prototype.getFallbackCodes=function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e.default),i||[]},t.prototype.toResolveHierarchy=function(e,t){var i=this,n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],o=function(e){e&&(i.isWhitelisted(e)?r.push(e):i.logger.warn("rejecting non-whitelisted language code: "+e))};return"string"==typeof e&&-1<e.indexOf("-")?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),n.forEach(function(e){r.indexOf(e)<0&&o(i.formatLanguageCode(e))}),r},t}(),w=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],S={1:function(e){return Number(1<e)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5)},6:function(e){return Number(1==e?0:2<=e&&e<=4?1:2)},7:function(e){return Number(1==e?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(2<=e)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:2<e&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:2<=e%10&&(e%100<10||20<=e%100)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||1<e%100&&e%100<11?1:10<e%100&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||0<e%100&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}};var C=function(){function n(e){var i,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};s(this,n),this.languageUtils=e,this.options=t,this.logger=h.create("pluralResolver"),this.rules=(i={},w.forEach(function(t){t.lngs.forEach(function(e){i[e]={numbers:t.nr,plurals:S[t.fc]}})}),i)}return n.prototype.addRule=function(e,t){this.rules[e]=t},n.prototype.getRule=function(e){return this.rules[this.languageUtils.getLanguagePartFromCode(e)]},n.prototype.needsPlural=function(e){var t=this.getRule(e);return t&&1<t.numbers.length},n.prototype.getSuffix=function(e,t){var i=this,n=this.getRule(e);if(n){if(1===n.numbers.length)return"";var r=n.noAbs?n.plurals(t):n.plurals(Math.abs(t)),o=n.numbers[r];this.options.simplifyPluralSuffix&&2===n.numbers.length&&1===n.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_"+o.toString():a():"v2"===this.options.compatibilityJSON||2===n.numbers.length&&1===n.numbers[0]?a():2===n.numbers.length&&1===n.numbers[0]?a():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: "+e),""},n}(),M=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,t),this.logger=h.create("interpolator"),this.init(e,!0)}return t.prototype.init=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};arguments[1]&&(this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e},this.escape=e.interpolation&&e.interpolation.escape||o),e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.prefix=t.prefix?i(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?i(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?i(t.nestingPrefix):t.nestingPrefixEscaped||i("$t("),this.nestingSuffix=t.nestingSuffix?i(t.nestingSuffix):t.nestingSuffixEscaped||i(")"),this.resetRegExp()},t.prototype.reset=function(){this.options&&this.init(this.options)},t.prototype.resetRegExp=function(){var e=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(e,"g");var t=""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(t,"g");var i=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(i,"g")},t.prototype.interpolate=function(e,r,o){var a=this,t=void 0,i=void 0;function n(e){return e.replace(/\$/g,"$$$$")}var s=function(e){if(e.indexOf(a.formatSeparator)<0)return _(r,e);var t=e.split(a.formatSeparator),i=t.shift().trim(),n=t.join(a.formatSeparator).trim();return a.format(_(r,i),n,o)};for(this.resetRegExp();t=this.regexpUnescape.exec(e);)i=s(t[1].trim()),e=e.replace(t[0],i),this.regexpUnescape.lastIndex=0;for(;t=this.regexp.exec(e);)"string"!=typeof(i=s(t[1].trim()))&&(i=l(i)),i||(this.logger.warn("missed to pass in variable "+t[1]+" for interpolating "+e),i=""),i=this.escapeValue?n(this.escape(i)):n(i),e=e.replace(t[0],i),this.regexp.lastIndex=0;return e},t.prototype.nest=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=void 0,r=void 0,o=g({},i);function a(t){if(t.indexOf(",")<0)return t;var e=t.split(",");t=e.shift();var i=e.join(",");i=(i=this.interpolate(i,o)).replace(/'/g,'"');try{o=JSON.parse(i)}catch(e){this.logger.error("failed parsing options string in nesting for key "+t,e)}return t}for(o.applyPostProcessor=!1;n=this.nestingRegexp.exec(e);){if((r=t(a.call(this,n[1].trim()),o))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=l(r)),r||(this.logger.warn("missed to resolve "+n[1]+" for nesting "+e),r=""),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e},t}();var P=function(o){function a(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};s(this,a);var r=p(this,o.call(this));return r.backend=e,r.store=t,r.services=i,r.options=n,r.logger=h.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(i,n.backend,n),r}return e(a,o),a.prototype.queueLoad=function(e,t,i){var r=this,o=[],a=[],s=[],p=[];return e.forEach(function(i){var n=!0;t.forEach(function(e){var t=i+"|"+e;r.store.hasResourceBundle(i,e)?r.state[t]=2:r.state[t]<0||(1===r.state[t]?a.indexOf(t)<0&&a.push(t):(r.state[t]=1,n=!1,a.indexOf(t)<0&&a.push(t),o.indexOf(t)<0&&o.push(t),p.indexOf(e)<0&&p.push(e)))}),n||s.push(i)}),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:i}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:p}},a.prototype.loaded=function(s,p,e){var l=this,t=s.split("|"),i=d(t,2),h=i[0],u=i[1];p&&this.emit("failedLoading",h,u,p),e&&this.store.addResourceBundle(h,u,e),this.state[s]=p?-1:2,this.queue.forEach(function(e){var t,i,n,r,o,a;t=e.loaded,i=u,r=c(t,[h],Object),o=r.obj,a=r.k,o[a]=o[a]||[],n&&(o[a]=o[a].concat(i)),n||o[a].push(i),function(e,t){for(var i=e.indexOf(t);-1!==i;)e.splice(i,1),i=e.indexOf(t)}(e.pending,s),p&&e.errors.push(p),0!==e.pending.length||e.done||(l.emit("loaded",e.loaded),e.done=!0,e.errors.length?e.callback(e.errors):e.callback())}),this.queue=this.queue.filter(function(e){return!e.done})},a.prototype.read=function(i,n,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,a=this,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:250,p=arguments[5];return i.length?this.backend[r](i,n,function(e,t){e&&t&&o<5?setTimeout(function(){a.read.call(a,i,n,r,o+1,2*s,p)},s):p(e,t)}):p(null,{})},a.prototype.load=function(e,t,i){var l=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();var n=g({},this.backend.options,this.options.backend);"string"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var r=this.queueLoad(e,t,i);if(!r.toLoad.length)return r.pending.length||i(),null;n.allowMultiLoading&&this.backend.readMulti?this.read(r.toLoadLanguages,r.toLoadNamespaces,"readMulti",null,null,function(s,p){s&&l.logger.warn("loading namespaces "+r.toLoadNamespaces.join(", ")+" for languages "+r.toLoadLanguages.join(", ")+" via multiloading failed",s),!s&&p&&l.logger.log("successfully loaded namespaces "+r.toLoadNamespaces.join(", ")+" for languages "+r.toLoadLanguages.join(", ")+" via multiloading",p),r.toLoad.forEach(function(e){var t=e.split("|"),i=d(t,2),n=i[0],r=i[1],o=_(p,[n,r]);if(o)l.loaded(e,s,o);else{var a="loading namespace "+r+" for language "+n+" via multiloading failed";l.loaded(e,a),l.logger.error(a)}})}):r.toLoad.forEach(function(e){l.loadOne(e)})},a.prototype.reload=function(e,i){var a=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var t=g({},this.backend.options,this.options.backend);"string"==typeof e&&(e=this.services.languageUtils.toResolveHierarchy(e)),"string"==typeof i&&(i=[i]),t.allowMultiLoading&&this.backend.readMulti?this.read(e,i,"readMulti",null,null,function(r,o){r&&a.logger.warn("reloading namespaces "+i.join(", ")+" for languages "+e.join(", ")+" via multiloading failed",r),!r&&o&&a.logger.log("successfully reloaded namespaces "+i.join(", ")+" for languages "+e.join(", ")+" via multiloading",o),e.forEach(function(n){i.forEach(function(e){var t=_(o,[n,e]);if(t)a.loaded(n+"|"+e,r,t);else{var i="reloading namespace "+e+" for language "+n+" via multiloading failed";a.loaded(n+"|"+e,i),a.logger.error(i)}})})}):e.forEach(function(t){i.forEach(function(e){a.loadOne(t+"|"+e,"re")})})},a.prototype.loadOne=function(i){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",e=i.split("|"),t=d(e,2),o=t[0],a=t[1];this.read(o,a,"read",null,null,function(e,t){e&&n.logger.warn(r+"loading namespace "+a+" for language "+o+" failed",e),!e&&t&&n.logger.log(r+"loaded namespace "+a+" for language "+o,t),n.loaded(i,e,t)})},a.prototype.saveMissing=function(e,t,i,n){this.backend&&this.backend.create&&this.backend.create(e,t,i,n),e&&e[0]&&this.store.addResource(e[0],t,i,n)},a}(t),k=function(o){function a(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};s(this,a);var r=p(this,o.call(this));return r.cache=e,r.store=t,r.services=i,r.options=n,r.logger=h.create("cacheConnector"),r.cache&&r.cache.init&&r.cache.init(i,n.cache,n),r}return e(a,o),a.prototype.load=function(e,t,o){var a=this;if(!this.cache)return o&&o();var i=g({},this.cache.options,this.options.cache),s="string"==typeof e?this.services.languageUtils.toResolveHierarchy(e):e;i.enabled?this.cache.load(s,function(e,t){if(e&&a.logger.error("loading languages "+s.join(", ")+" from cache failed",e),t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(var n in t[i])if(Object.prototype.hasOwnProperty.call(t[i],n)&&"i18nStamp"!==n){var r=t[i][n];r&&a.store.addResourceBundle(i,n,r)}o&&o()}):o&&o()},a.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},a}(t);function T(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&e.whitelist.push("cimode"),e}function G(){}return new(function(r){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];s(this,o);var i=p(this,r.call(this));if(i.options=T(e),i.services={},i.logger=h,i.modules={external:[]},t&&!i.isInitialized&&!e.isClone){var n;if(!i.options.initImmediate)return n=i.init(e,t),p(i,n);setTimeout(function(){i.init(e,t)},0)}return i}return e(o,r),o.prototype.init=function(e,i){var t,n,r=this;function o(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof e&&(i=e,e={}),e||(e={}),"v1"===e.compatibilityAPI?this.options=g({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){return{defaultValue:e[1]}},interpolation:{escapeValue:!0,format:function(e,t,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}},T(((n=e).resStore&&(n.resources=n.resStore),n.ns&&n.ns.defaultNs?(n.defaultNS=n.ns.defaultNs,n.ns=n.ns.namespaces):n.defaultNS=n.ns||"translation",n.fallbackToDefaultNS&&n.defaultNS&&(n.fallbackNS=n.defaultNS),n.saveMissing=n.sendMissing,n.saveMissingTo=n.sendMissingTo||"current",n.returnNull=!n.fallbackOnNull,n.returnEmptyString=!n.fallbackOnEmpty,n.returnObjects=n.returnObjectTrees,n.joinArrays="\n",n.returnedObjectHandler=n.objectTreeKeyHandler,n.parseMissingKeyHandler=n.parseMissingKey,n.appendNamespaceToMissingKey=!0,n.nsSeparator=n.nsseparator||":",n.keySeparator=n.keyseparator||".","sprintf"===n.shortcutFunction&&(n.overloadTranslationOptionHandler=function(e){for(var t=[],i=1;i<e.length;i++)t.push(e[i]);return{postProcess:"sprintf",sprintf:t}}),n.whitelist=n.lngWhitelist,n.preload=n.preload,"current"===n.load&&(n.load="currentOnly"),"unspecific"===n.load&&(n.load="languageOnly"),n.backend=n.backend||{},n.backend.loadPath=n.resGetPath||"locales/__lng__/__ns__.json",n.backend.addPath=n.resPostPath||"locales/add/__lng__/__ns__",n.backend.allowMultiLoading=n.dynamicLoad,n.cache=n.cache||{},n.cache.prefix="res_",n.cache.expirationTime=6048e5,n.cache.enabled=n.useLocalStorage,(n=m(n)).defaultVariables&&(n.interpolation.defaultVariables=n.defaultVariables),n)),{}):"v1"===e.compatibilityJSON?this.options=g({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){return{defaultValue:e[1]}},interpolation:{escapeValue:!0,format:function(e,t,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}},T(((t=m(t=e)).joinArrays="\n",t)),{}):this.options=g({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){return{defaultValue:e[1]}},interpolation:{escapeValue:!0,format:function(e,t,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}},this.options,T(e)),this.format=this.options.interpolation.format,i||(i=G),!this.options.isClone){this.modules.logger?h.init(o(this.modules.logger),this.options):h.init(null,this.options);var a=new b(this.options);this.store=new y(this.options.resources,this.options);var s=this.services;s.logger=h,s.resourceStore=this.store,s.resourceStore.on("added removed",function(e,t){s.cacheConnector.save()}),s.languageUtils=a,s.pluralResolver=new C(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new M(this.options),s.backendConnector=new P(o(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];r.emit.apply(r,[e].concat(i))}),s.backendConnector.on("loaded",function(e){s.cacheConnector.save()}),s.cacheConnector=new k(o(this.modules.cache),s.resourceStore,s,this.options),s.cacheConnector.on("*",function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];r.emit.apply(r,[e].concat(i))}),this.modules.languageDetector&&(s.languageDetector=o(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.translator=new f(this.services,this.options),this.translator.on("*",function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];r.emit.apply(r,[e].concat(i))}),this.modules.external.forEach(function(e){e.init&&e.init(r)})}var p;["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"].forEach(function(t){r[t]=function(){var e;return(e=r.store)[t].apply(e,arguments)}}),"v1"===this.options.compatibilityAPI&&((p=this).lng=function(){return h.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),p.services.languageUtils.toResolveHierarchy(p.language)[0]},p.preload=function(e,t){h.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),p.loadLanguages(e,t)},p.setLng=function(e,t,i){return h.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof t&&(i=t,t={}),t||(t={}),!0===t.fixLng&&i?i(null,p.getFixedT(e)):p.changeLanguage(e,i)},p.addPostProcessor=function(e,t){h.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),p.use({type:"postProcessor",name:e,process:t})});var l=function(){r.changeLanguage(r.options.lng,function(e,t){r.isInitialized=!0,r.logger.log("initialized",r.options),r.emit("initialized",r.options),i(e,t)})};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),this},o.prototype.loadResources=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:G;if(this.options.resources)e(null);else{if(this.language&&"cimode"===this.language.toLowerCase())return e();var i=[],n=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach(function(e){i.indexOf(e)<0&&i.push(e)})};if(this.language)n(this.language);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(e){return n(e)});this.options.preload&&this.options.preload.forEach(function(e){return n(e)}),this.services.cacheConnector.load(i,this.options.ns,function(){t.services.backendConnector.load(i,t.options.ns,e)})}},o.prototype.reloadResources=function(e,t){e||(e=this.languages),t||(t=this.options.ns),this.services.backendConnector.reload(e,t)},o.prototype.use=function(e){return"backend"===e.type&&(this.modules.backend=e),"cache"===e.type&&(this.modules.cache=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"postProcessor"===e.type&&x.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this},o.prototype.changeLanguage=function(e,r){var o=this,t=function(n){n&&(o.language=n,o.languages=o.services.languageUtils.toResolveHierarchy(n),o.translator.changeLanguage(n),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(n)),o.loadResources(function(e){var t,i;t=e,(i=n)&&(o.emit("languageChanged",i),o.logger.log("languageChanged",i)),r&&r(t,function(){return o.t.apply(o,arguments)})})};e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(t):t(e):t(this.services.languageDetector.detect())},o.prototype.getFixedT=function(e,t){var r=this,i=function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=g({},i);return n.lng=n.lng||e.lng,n.lngs=n.lngs||e.lngs,n.ns=n.ns||e.ns,r.t(t,n)};return"string"==typeof e?i.lng=e:i.lngs=e,i.ns=t,i},o.prototype.t=function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)},o.prototype.exists=function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)},o.prototype.setDefaultNamespace=function(e){this.options.defaultNS=e},o.prototype.loadNamespaces=function(e,t){var i=this;if(!this.options.ns)return t&&t();"string"==typeof e&&(e=[e]),e.forEach(function(e){i.options.ns.indexOf(e)<0&&i.options.ns.push(e)}),this.loadResources(t)},o.prototype.loadLanguages=function(e,t){"string"==typeof e&&(e=[e]);var i=this.options.preload||[],n=e.filter(function(e){return i.indexOf(e)<0});if(!n.length)return t();this.options.preload=i.concat(n),this.loadResources(t)},o.prototype.dir=function(e){if(e||(e=this.languages&&0<this.languages.length?this.languages[0]:this.language),!e)return"rtl";return 0<=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))?"rtl":"ltr"},o.prototype.createInstance=function(){return new o(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])},o.prototype.cloneInstance=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:G,n=g({},this.options,e,{isClone:!0}),r=new o(n,i);return["store","services","language"].forEach(function(e){r[e]=t[e]}),r.translator=new f(r.services,r.options),r.translator.on("*",function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];r.emit.apply(r,[e].concat(i))}),r.init(n,i),r},o}(t))});var PhaserI18n,__extends=this&&this.__extends||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t,i;t=e.I18next||(e.I18next={}),i=function(){function e(e){this.type="backend",this.loadPath="/locales/{{lng}}/{{ns}}.json",this.game=e}return e.prototype.init=function(e,t){this.services=e,t&&t.loadPath&&this.setLoadPath(t.loadPath)},e.prototype.setLoadPath=function(e){this.loadPath=e},e.prototype.read=function(e,t,i){var n=this,r=this.services.interpolator.interpolate(this.loadPath,{lng:e,ns:t}),o=t+"_"+e,a=function(e,t){t===o&&(i(null,n.game.cache.getJSON(o)),n.game.load.onFileComplete.remove(a))};this.game.load.onFileComplete.add(a),this.game.load.json(o,r)},e.prototype.readMulti=function(e,t,i){},e.prototype.create=function(e,t,i,n){},e}(),t.Backend=i}(PhaserI18n||(PhaserI18n={})),function(p){var e=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._language="en",i.wasLoaderLocked=!1,i.started=!1,Object.defineProperty(e,"i18n",{value:i}),i.addLocaleLoader(),i.addLocaleFactory(),i.addLocaleCreator(),i}return __extends(e,n),e.prototype.init=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.wasLoaderLocked=this.game.load.resetLocked,this.game.load.resetLocked=!0,i18next.on("languageChanged",function(){t.recursiveUpdateText(t.game.stage)}),this.backend=new p.I18next.Backend(this.game),i18next.use(this.backend);for(var r=0;r<i.length;r++)i18next.use(i[r]);i18next.init(e,function(){t.recursiveUpdateText(t.game.stage)})},e.prototype.setLanguage=function(e){void 0===e&&(e="en"),i18next.changeLanguage(e)},e.prototype.recursiveUpdateText=function(e){var t=this;(e instanceof Phaser.Text||e instanceof Phaser.BitmapText)&&(e.dirty=!0),e.children&&0<e.children.length&&e.children.forEach(function(e){t.recursiveUpdateText(e)})},e.prototype.addLocaleLoader=function(){var r=this;Phaser.Loader.prototype.locale=function(e,t,i){var n=this;Array.isArray(t)?i=t:void 0!==t&&r.backend.setLoadPath(t),i18next.loadLanguages(e,function(){r.started||(r.started=!0,n.game.load.resetLocked=r.wasLoaderLocked)}),i&&i18next.loadNamespaces(i)}},e.prototype.addLocaleFactory=function(){Phaser.GameObjectFactory.prototype.translatedText=function(e,t,i,n,r,o){return void 0===o&&(o=this.world),o.add(new p.TranslatedText(this.game,e,t,i,n,r))},Phaser.GameObjectFactory.prototype.translatedBitmapText=function(e,t,i,n,r,o,a,s){return void 0===s&&(s=this.world),s.add(new p.TranslatedBitmapText(this.game,e,t,i,n,r,o,a))}},e.prototype.addLocaleCreator=function(){Phaser.GameObjectCreator.prototype.translatedText=function(e,t,i,n,r){return new p.TranslatedText(this.game,e,t,i,n,r)},Phaser.GameObjectCreator.prototype.translatedBitmapText=function(e,t,i,n,r,o,a){return new p.TranslatedBitmapText(this.game,e,t,i,n,r,o,a)}},e}(Phaser.Plugin);p.Plugin=e}(PhaserI18n||(PhaserI18n={})),function(e){var t=function(l){function e(e,t,i,n,r,o,a,s){var p=l.call(this,e,t,i,n,"",o,a)||this;return p._nonTranslated="",p._interpolations={},p._interpolations=s||{},p.text=r,p}return __extends(e,l),e.prototype.setTranslationParamameter=function(e,t){this._interpolations[e]=t,this.dirty=!0},e.prototype.clearTranslationParamameter=function(e){e in this._interpolations&&delete this._interpolations[e]},Object.defineProperty(e.prototype,"_text",{get:function(){return i18next.t(this._nonTranslated,this._interpolations)||""},set:function(e){e!==this._nonTranslated&&(this._nonTranslated=e.toString()||"")},enumerable:!0,configurable:!0}),e}(Phaser.BitmapText);e.TranslatedBitmapText=t}(PhaserI18n||(PhaserI18n={})),function(e){var t=function(s){function e(e,t,i,n,r,o){var a=s.call(this,e,t,i,"",r)||this;return a._nonTranslated="",a._interpolations={},a._interpolations=o||{},a.text=n,a}return __extends(e,s),e.prototype.setTranslationParamameter=function(e,t){this._interpolations[e]=t,this.dirty=!0},e.prototype.clearTranslationParamameter=function(e){e in this._interpolations&&delete this._interpolations[e]},Object.defineProperty(e.prototype,"_text",{get:function(){return i18next.t(this._nonTranslated,this._interpolations)||""},set:function(e){e!==this._nonTranslated&&(this._nonTranslated=e.toString()||"")},enumerable:!0,configurable:!0}),e}(Phaser.Text);e.TranslatedText=t}(PhaserI18n||(PhaserI18n={})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).i18nextBrowserLanguageDetector=t()}(this,function(){"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=[],n=t.forEach,r=t.slice;var a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,i=function(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};i&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+60*i*1e3)),n&&(r.domain=n),document.cookie=function(e,t,i){var n=i||{};n.path=n.path||"/";var r=e+"="+encodeURIComponent(t);if(0<n.maxAge){var o=n.maxAge-0;if(isNaN(o))throw new Error("maxAge should be a Number");r+="; Max-Age="+Math.floor(o)}if(n.domain){if(!a.test(n.domain))throw new TypeError("option domain is invalid");r+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw new TypeError("option path is invalid");r+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");r+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}(e,encodeURIComponent(t),r)},o={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var i=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}(e.lookupCookie);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&i(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},s={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var i=window.location.search.substring(1).split("&"),n=0;n<i.length;n++){var r=i[n].indexOf("=");0<r&&i[n].substring(0,r)===e.lookupQuerystring&&(t=i[n].substring(r+1))}return t}},p=null,l=function(){if(null!==p)return p;try{p="undefined"!==window&&null!==window.localStorage,window.localStorage.setItem("i18next.translate.boo","foo"),window.localStorage.removeItem("i18next.translate.boo")}catch(e){p=!1}return p},h={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&l()){var i=window.localStorage.getItem(e.lookupLocalStorage);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&l()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},u=null,d=function(){if(null!==u)return u;try{u="undefined"!==window&&null!==window.sessionStorage,window.sessionStorage.setItem("i18next.translate.boo","foo"),window.sessionStorage.removeItem("i18next.translate.boo")}catch(e){u=!1}return u},c={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&d()){var i=window.sessionStorage.getItem(e.lookupSessionStorage);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&d()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},_={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)t.push(navigator.languages[i]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return 0<t.length?t:void 0}},y={name:"htmlTag",lookup:function(e){var t,i=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return i&&"function"==typeof i.getAttribute&&(t=i.getAttribute("lang")),t}},x={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof i[e.lookupFromPathIndex])return;t=i[e.lookupFromPathIndex].replace("/","")}else t=i[0].replace("/","")}return t}},m={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var i=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);i instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?i[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):i[0].replace("http://","").replace("https://","").replace(".",""))}return t}},f=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.type="languageDetector",this.detectors={},this.init(e,t)}return e(i.prototype,[{key:"init",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(i){return n.call(r.call(arguments,1),function(e){if(e)for(var t in e)void 0===i[t]&&(i[t]=e[t])}),i}(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(o),this.addDetector(s),this.addDetector(h),this.addDetector(c),this.addDetector(_),this.addDetector(y),this.addDetector(x),this.addDetector(m)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var i=this;e||(e=this.options.order);var n=[];return e.forEach(function(e){if(i.detectors[e]){var t=i.detectors[e].lookup(i.options);t&&"string"==typeof t&&(t=[t]),t&&(n=n.concat(t))}}),this.services.languageUtils.getBestMatchFromCodes?n:0<n.length?n[0]:null}},{key:"cacheUserLanguage",value:function(t,e){var i=this;e||(e=this.options.caches),e&&(this.options.excludeCacheFor&&-1<this.options.excludeCacheFor.indexOf(t)||e.forEach(function(e){i.detectors[e]&&i.detectors[e].cacheUserLanguage(t,i.options)}))}}]),i}();return f.type="languageDetector",f});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.adjustWorld=function(){var e=Math.min(window.innerWidth/Constants.WIDTH,window.innerHeight/Constants.HEIGHT);this.game.scale.setGameSize(window.innerWidth/e,Constants.HEIGHT),this.game.scale.setUserScale(e,e,0,0),this.camera.bounds.x=-1/0,this.camera.bounds.width=1/0,this.camera.x=-(window.innerWidth/e-Constants.WIDTH)/2,window.innerWidth<window.innerHeight?(this.game.paused=!0,document.getElementById("orientation").style.display="block",document.getElementById("content").style.display="none",GameController.Touch()&&GameController.JoypadLeft&&(GameController.JoypadLeft.visible=!1,GameController.JoypadRight.visible=!1)):(this.game.paused=!1,document.getElementById("orientation").style.display="none",document.getElementById("content").style.display="block",GameController.Touch()&&GameController.JoypadLeft&&(GameController.JoypadLeft.visible=!0,GameController.JoypadRight.visible=!0))},t.prototype.create=function(){this.adjustWorld(),GameController.JoypadLeft&&(GameController.JoypadLeft.visible=GameController.JoypadRight.visible=!1),Constants.stateSwitcher._isSwitchingState&&Constants.stateSwitcher.openCurtains(.1)},t}(Phaser.State);e.OzState=t}(states||(states={})),function(e){var t=function(){function e(e,t){this._initialized=!1,this._x=0,this._y=0,this.params=null,this._inverted=!1,this.group=0,this.offsetX=0,this.offsetY=0,this._ce=null,this.updateCallEnabled=!1,this._registration="center",this._radius=0,this._width=30,this._height=30,this.view=null,this.name=null,this.kill=!1,this.name=e,this.params=t,this.initialize(),this._ce=CitrusEngine.getInstance(),this._initialized=!0}return e.prototype.initialize=function(e){void 0===e&&(e=null),e&&(this.params=e),this.params?this.setParams(this.params):this._initialized=!0},e.prototype.setParams=function(e){e.view&&(this.view=e.view),e.x&&(this._x=e.x),e.y&&(this._y=e.y),e.group&&(this.group=e.group),e.radius&&(this._radius=e.radius),e.width&&(this._width=e.width),e.height&&(this._height=e.height),e.x instanceof String||e.y instanceof String||e.width instanceof String||(e.height,String),this._initialized=!0},Object.defineProperty(e.prototype,"inverted",{get:function(){return this._inverted},set:function(e){this._inverted=e,this.view&&(this._inverted?this.view.scale.x=-1:this.view.scale.x=1)},enumerable:!1,configurable:!0}),e.prototype.halfWidth=function(){return 0<this._width?this._width/2:this._radius},e.prototype.halfHeight=function(){return 0<this._height?this._height/2:this._radius},e.prototype.draw=function(){if(this.view)if("center"==this.registration)this.view.x=this._x+this.offsetX,this.view.y=this._y+this.offsetY;else{if("topLeft"!=this.registration)throw Error("NO SUCH REGISTRATION "+this.registration);this.view.x=this._x+this.offsetX,this.view.y=this._y+this.offsetY}},e.prototype.removeArt=function(){this.view&&this.view.parent&&this.view.parent.removeChild(this.view)},e.prototype.update=function(e){this._timeDelta=e},Object.defineProperty(e.prototype,"registration",{get:function(){return this._registration},set:function(e){this._registration=e},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._initialized=!1},e}();e.CitrusObject=t}(objects||(objects={}));var CitrusObject=objects.CitrusObject;!function(r){var e=function(h){function e(){var e=h.call(this)||this;return e.game=PhaserGameHelper.getInstance().game,e}return __extends(e,h),e.prototype.create=function(){var e=this;this.achievementMC=null,this.curHero=null,this.controlsPointer=null,Constants._ce=CitrusEngine.Init(),(Constants.levelState=this)._paused=!1,this.groupSprites=new Array;for(var t=0;t<7;t++)this.groupSprites[t]=new MovieClip(null,0,0),this.game.world.addChild(this.groupSprites[t]);this._objects=new Array,this._nape=new objects.Nape("nape"),this._nape.gravity=new Vec2(0,300),this.addObject(this._nape),(new LevelParseSystem).parseFromJSON(Constants.currentLevel),new objects.FixedBox2(700,-15,10,555),new objects.FixedBox2(-10,-15,10,555),this.topPanel=new TopPanel,this.topPanel.init(),this._black=this.game.add.graphics(0,0),this._black.beginFill(0),this._black.drawRect(0,0,Constants.WIDTH,Constants.HEIGHT),this._black.endFill(),this._black.visible=!1,this.pauseSprite=new Phaser.Sprite(this.game,Constants.WIDTH/2,Constants.HEIGHT/2,"AtlasUI","Pause.png"),this.pauseSprite.anchor.set(.5,0),this.sponsor=new Phaser.Sprite(this.game,0,this.pauseSprite.y,"branding_logo"),this.sponsor.anchor.set(.5),this.sponsor.scale.set(.75),this.pauseSprite.addChild(this.sponsor),h5branding.Branding.outGoingLinksAllowed()||(this.sponsor.visible=!1);var i=new TranslatedMMText(this.game,0,.155*Constants.HEIGHT,"pause",48);i.onOver(),this.pauseSprite.addChild(i);var n=new Phaser.Sprite(this.game,0,.3*Constants.HEIGHT,"AtlasUI","buttons.png");n.anchor.set(.5),this.pauseSprite.addChild(n);var r=new TranslatedMMText(this.game,0,.3*Constants.HEIGHT,"levels_map",24,this.goLevels,this);this.pauseSprite.addChild(r);var o=new Phaser.Sprite(this.game,0,.7*Constants.HEIGHT,"AtlasUI","buttons.png");o.anchor.set(.5),this.pauseSprite.addChild(o);var a=new TranslatedMMText(this.game,0,.7*Constants.HEIGHT,"back",24,this.unShowMenu,this);this.pauseSprite.addChild(a),this.pauseSprite.visible=!1,this.game.world.addChild(this.pauseSprite),this.topPanel._view.getChild("menuButton").makeButton(function(){e.showMenu()},!0,this),this.topPanel._view.getChild("soundButton").makeSoundButton(),this.topPanel._view.getChild("musicButton").makeMusicButton(),this.topPanel._view.getChild("replayButton").makeButton(this.ozRestartLevel,!0,this),21!=Constants.currentLevel&&(this.topPanel._view.getChild("walkthroughButton").makeButton(this.goWalkthroughIngame,!0,this),this.topPanel._view.getChild("walkthroughButton").visible=!1),this._isStarting=!0,this._isFinishing=!1,Constants.hustler.controlsEnabled=Constants.bouncer.controlsEnabled=!1,TweenMax.delayedCall(.1,function(){Constants.hustler.controlsEnabled=Constants.bouncer.controlsEnabled=!0,this._isStarting=!1},this),SoundManager.getInstance().playSound("GameMusic"),this.initFix=!1,this.frUpdate=0,Fabrique.PauseHandler.getInstance().onPauseCallback.add(this.onBlurPause,this)},e.prototype.completeLevel=function(){this._isFinishing||(this.completeActivities(),this.getObjectByName("exit").getBrothers(this.ozGoNextLevel,this),Constants.levelsComplete[Constants.currentLevel]=!0,Constants.bouncer.burgers>Constants.burgers[Constants.currentLevel]&&(Constants.burgers[Constants.currentLevel]=Constants.bouncer.burgers),StorageHelper.saveCookies())},e.prototype.goWalkthroughIngame=function(){Constants.walkthrough(),this.topPanel._view.getChild("walkthroughButton").changeFrame1()},e.prototype.goLevels=function(){Fabrique.AdHandler.getInstance().showAd("pauseLevelSelect",function(){Constants.stateSwitcher.switchToLevelSelect()})},e.prototype.showMenu=function(){this._paused||Constants.stateSwitcher._isSwitchingState||(this._paused=!0,this.pauseSprite.visible=!0,this._black.visible=!0,this.pauseAllAnimations(),GameController.Touch()&&GameController.HideJoypad(),TweenMax.pauseAll(),this._black.alpha=0,this.topPanel.disableInput(),TweenMax.to(this._black,.4,{alpha:.5}),TweenMax.to(this.pauseSprite,.4,{y:0,ease:"Quad.easeOut"}))},e.prototype.onBlurPause=function(){this._paused||this.showMenu()},e.prototype.unShowMenu=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("resume",function(){e._paused=!1,TweenMax.resumeAll(),e.resumeAllAnimations(),GameController.Touch()&&GameController.ShowJoypad(),TweenMax.to(e._black,.25,{alpha:0}),TweenMax.to(e.pauseSprite,.25,{y:-395,onComplete:e.hideMenu,onCompleteContext:e})})},e.prototype.hideMenu=function(){this._black.visible=!1,this.pauseSprite.visible=!1,this.topPanel.enableInput()},e.prototype.pauseAllAnimations=function(){for(var e=0;e<this._objects.length;e++){var t=this._objects[e];t.view&&t.view.animations&&t.view.animations.currentAnim&&(t.view.animations.paused=!0)}},e.prototype.resumeAllAnimations=function(){for(var e=0;e<this._objects.length;e++){var t=this._objects[e];t.view&&t.view.animations&&t.view.animations.currentAnim&&(t.view.animations.paused=!1)}},e.prototype.ozGoNextLevel=function(){this._paused=!0,this.topPanel.disableInput(),Constants.currentLevel==Constants.NUMLEVELS&&140<=StorageHelper.totalPoints()&&null==this.achievementMC?(this.achievementMC=new MovieClip("BurgerAchievementGraphics",0,0,"achievement"),this.world.addChild(this.achievementMC),this.achievementMC.alpha=0,TweenMax.to(this.achievementMC,.5,{alpha:1}),SoundManager.getInstance().playSound("AchievementUnlockedSound"),TweenMax.delayedCall(3,this.ozGoNextLevel,this)):Constants.currentLevel!=Constants.NUMLEVELS-1||Constants.isFinalAnimationPlayed?Constants.stateSwitcher.switchToLevelCompleted():(r.AnimationState.ID_ANIMATION=1,Constants.stateSwitcher.switchToAnimation())},e.prototype.ozRestartLevel=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("levelRestart",function(){Constants.stateSwitcher._isSwitchingState||(e._paused=!0,e.topPanel.disableInput(),Constants.stateSwitcher.switchToPlay())})},e.prototype.finishLevelComplete=function(){Constants.isFinalAnimationPlayed||(Constants.currentAnimation=!0,Constants.isFinalAnimationPlayed=!0,StorageHelper.saveCookies())},e.prototype.failLevel=function(){this._isFinishing||(this.completeActivities(),TweenMax.delayedCall(.5,this.loseLevel,this))},e.prototype.loseLevel=function(){this._paused=!0,this.topPanel.disableInput(),Fabrique.AdHandler.getInstance().showAd("lose",function(){Constants.stateSwitcher.switchToLose()})},e.prototype.restartLevel=function(){this._isFinishing||this.completeActivities()},e.prototype.goToMenu=function(){this._isFinishing||this.completeActivities()},e.prototype.completeActivities=function(){this._isFinishing=!0,Constants.hustler.controlsEnabled=!1,Constants.bouncer.controlsEnabled=!1},e.prototype.addObject=function(e){e instanceof objects.NapePhysicsObject&&e.addPhysics(),e.view&&this.groupSprites[e.group].addChild(e.view),this._objects.push(e)},e.prototype.removeObject=function(e){e.kill=!0},e.prototype.getObjectByName=function(e){for(var t=0,i=this._objects;t<i.length;t++){var n=i[t];if(n.name==e)return n}return null},e.prototype.getObjectsByName=function(e){for(var t=null,i=0,n=this._objects;i<n.length;i++){var r=n[i];r.name==e&&(t||(t=new Array),t.push(r))}return t},e.prototype.stateUpdate=function(e){e/=1e3;for(var t=[],i=this._objects.length,n=0;n<i;++n){var r=this._objects[n];r.kill?t.push(r):r.updateCallEnabled&&r.update(e)}for(i=t.length,n=0;n<i;++n){var o=t[n];this._objects.splice(this._objects.indexOf(o),1),o.removeArt(),o.destroy()}for(var a=0,s=this._objects;a<s.length;a++){var p=s[a];Constants.bouncer._grabbedObject!=p&&p.draw()}},e.prototype.butDistSquared=function(e,t){var i=e.worldX-(t.x+t.parent.x-r.Boot.PADH),n=e.worldY-(t.y+t.parent.y);return i*i+n*n},e.prototype.closerBut=function(e,t,i){return t?this.butDistSquared(e,i)<this.butDistSquared(e,t)?i:t:i},e.prototype.changeControls=function(){this.curHero?this.curHero==Constants.bouncer?this.curHero=Constants.hustler:this.curHero=Constants.bouncer:(this.controlsPointer=new MovieClip("cmcActiveSign"),this.groupSprites[Constants.hustler.group].addChild(this.controlsPointer),this.curHero=Constants.hustler),this.curHero==Constants.hustler?(Constants._ce.input.setDoing(Constants.bouncerInputChannel,"left",!1),Constants._ce.input.setDoing(Constants.bouncerInputChannel,"right",!1),Constants._ce.input.setDoing(Constants.bouncerInputChannel,"jump",!1),Constants._ce.input.setDoing(Constants.bouncerInputChannel,"grabDown",!1),Constants._ce.input.setDoing(Constants.bouncerInputChannel,"grab",!1),GameController.JoypadRight.getChild("change").gotoAndStop(1)):(Constants._ce.input.setDoing(Constants.hustlerInputChannel,"left",!1),Constants._ce.input.setDoing(Constants.hustlerInputChannel,"right",!1),Constants._ce.input.setDoing(Constants.hustlerInputChannel,"jump",!1),Constants._ce.input.setDoing(Constants.hustlerInputChannel,"down",!1),GameController.JoypadRight.getChild("change").gotoAndStop(2)),GameController.JoypadRight.getChild("grab").visible=this.curHero==Constants.bouncer},e.prototype.update=function(){if(this.frUpdate++,!this.initFix&&1<this.frUpdate&&(this.initFix=!0,h.prototype.create.call(this),GameController.JoypadLeft||(GameController.JoypadLeft=new MovieClip("cmcJoypadLeft"),GameController.JoypadLeft.x=120,GameController.JoypadLeft.y=Constants.HEIGHT-55,this.game.stage.addChild(GameController.JoypadLeft),GameController.JoypadRight=new MovieClip("cmcJoypadRight"),GameController.JoypadRight.x=this.game.width-120,GameController.JoypadRight.y=Constants.HEIGHT-55,this.game.stage.addChild(GameController.JoypadRight),GameController.AdjustJoypad()),GameController.Touch()&&(GameController.JoypadLeft.visible=!0,GameController.JoypadRight.visible=!0,this.changeControls())),this.frUpdate%3!=0)if(this._paused)this.topPanel._lastTime=this.game.time.totalElapsedSeconds();else{if(this.topPanel.tick(),GameController.Touch()&&this.curHero){this.controlsPointer.x=this.curHero.view.x,this.controlsPointer.y=this.curHero.view.y;for(var e=!1,t=!1,i=!1,n=!1,r=!1,o=!1,a=0;a<2;a++){var s=this.game.input.pointers[a],p=null;s.isDown&&(p=this.closerBut(s,p,GameController.JoypadLeft.getChild("left")),p=this.closerBut(s,p,GameController.JoypadLeft.getChild("right")),p=this.closerBut(s,p,GameController.JoypadRight.getChild("up")),p=this.closerBut(s,p,GameController.JoypadRight.getChild("down")),GameController.JoypadRight.getChild("grab").visible&&(p=this.closerBut(s,p,GameController.JoypadRight.getChild("grab"))),p=this.closerBut(s,p,GameController.JoypadRight.getChild("change"))),p&&this.butDistSquared(s,p)<4e4&&("left"==p.name?e=!0:"right"==p.name?t=!0:"up"==p.name?i=!0:"down"==p.name?n=!0:"grab"==p.name?r=!0:"change"==p.name&&(o=!0))}var l=Constants.hustlerInputChannel;this.curHero==Constants.bouncer&&(l=Constants.bouncerInputChannel),Constants._ce.input.setDoing(l,"left",e),Constants._ce.input.setDoing(l,"right",t),Constants._ce.input.setDoing(l,"jump",i),Constants._ce.input.setDoing(l,"down",n),Constants._ce.input.setDoing(l,"grabDown",n),Constants._ce.input.setDoing(l,"grab",r),Constants._ce.input.setDoing(0,"change",o),Constants._ce.input.channels[0].change==Constants.frame&&this.changeControls()}Constants.frame++,this.stateUpdate(this.game.time.elapsed),this._isStarting||!Constants._ce.playing||this._isFinishing||(Input.getInstance().justDid("restart")&&this.ozRestartLevel(),Constants.bouncer.isAtLevelExit&&Constants.bouncer.onGround&&Constants.hustler.isAtLevelExit&&Constants.hustler.onGround&&this.completeLevel())}},e.prototype.shutdown=function(){Fabrique.PauseHandler.getInstance().onPauseCallback.remove(this.showMenu,this),h.prototype.shutdown.call(this);for(var e=this._objects.length,t=0;t<e;++t){var i=this._objects[t];i.view&&(i.removeArt(),i.destroy())}},e}(r.OzState);r.LevelState=e}(states||(states={}));var MoneyMovers,LevelState=states.LevelState,Constants=function(){function e(){}return e.sponsor=function(){h5branding.Branding.outGoingLinksAllowed()&&h5branding.Branding.openCampaignLink(e.GAME_TITLE,h5branding.UtmTargets.logo)},e.walkthrough=function(){OzUtil.GetURL("https://www.agame.com/game/money-movers")},e.getSpriteSheetName=function(e){return e&&null!==e?e:"Objects"},e.getLayoutData=function(e){return e&&null!==e?e:ObjectsLayouts.data},e.getLayout=function(e,t){return OzUtil.PE(e,null,"name",t)},e.WIDTH=700,e.HEIGHT=525,e.GAME_KEY="9311ddc856b7c385c30418bd08de3821",e.SECRET_KEY="4939f9ca47df63c3cce86c6dfbd856ff6e380ed6",e.GOOGLE_ID="UA-78960661-13",e.GOOGLE_APP_NAME="Money Movers 1",e.GAMEDISTRIBUTION_ID="c035e676ef654227b1537dabbf194e00",e.GAMEDISTRIBUTION_USER="ABD36C6C-E74B-4BA7-BE87-0AB01F98D30D-s1",e.WIDTH_HALF=350,e.HEIGHT_HALF=262.5,e.TILE_SIZE=35,e.NUMLEVELS=21,e.GAME_TITLE="money-movers-1",e.bouncerInputChannel=11,e.hustlerInputChannel=12,e.frame=0,e}();!function(e){var t=function(e){function t(){var t=e.call(this,{enableDebug:!1,width:Constants.WIDTH,height:Constants.HEIGHT,renderer:Phaser.AUTO,parent:"content",transparent:!0,antialias:!0,preserveDrawingBuffer:!1,physicsConfig:null,seed:"",state:null,forceSetTimeOut:!1})||this;t.clearBeforeRender=!1,Phaser.Device.whenReady(function(){var e=t.device.desktop?"click":"touchstart";document.getElementById("content").addEventListener(e,function(e){t.gameResumed(e)})});var i=h5branding.SplashLoader.getInstance({gameId:"c035e676ef654227b1537dabbf194e00",gameTitle:Constants.GOOGLE_APP_NAME,gameName:Constants.GOOGLE_APP_NAME,libs:[],version:version,barColor:""});return i.create().then(function(){t.state.add("game",{create:t.stateCreator.bind(t),preload:t.statePreloader.bind(t)},!0),languageDetector=new i18nextBrowserLanguageDetector(null),h5branding.Utils.LANGUAGE="none"}),Fabrique.AdHandler.getInstance().init(),h5ads.adWrapper.once(h5ads.AdEvents.AD_PROVIDER_LOADED,function(){if(!0!==window.fbrqSA&&i.bannerAllowed){var t=h5ads.adWrapper.createBanner(h5ads.GameDistributionBannerSize.LargeRectangle);t.loadBanner().then(function(){var e=i.showBanner();e?e.appendChild(t.element):t.destroy()},function(){t.destroy()})}}),t}return __extends(t,e),t.prototype.statePreloader=function(){var t=this;!0!==window.fbrqSA&&libs.forEach(function(e){t.load.script(e,e)})},t.prototype.stateCreator=function(){this.plugins.add(PhaserSuperStorage.StoragePlugin),this.plugins.add(PhaserCachebuster.CacheBuster),this.plugins.add(PhaserSpine.SpinePlugin),this.plugins.add(PhaserI18n.Plugin,{fallbackLng:"en",debug:!0,load:"languageOnly",backend:{loadPath:"assets/languages/{{lng}}.json"}},languageDetector),PhaserGameHelper.getInstance().init(this),this.state.add("Boot",states.Boot),this.state.add("MainMenu",states.MainMenuState),this.state.add("LevelSelect",states.LevelSelectState),this.state.add("Level",states.LevelState),this.state.add("Animation",states.AnimationState);this.state.start("Boot"),this.state.remove("game")},t.prototype.recursiveUpdateText=function(e){var t=this;e instanceof Phaser.Text&&(e.dirty=!0),e.children&&0<e.children.length&&e.children.forEach(function(e){t.recursiveUpdateText(e)})},t}(Phaser.Game);e.Game=t}(MoneyMovers||(MoneyMovers={}));var AtlasUI=function(){function e(){}return e.data={frames:[{filename:"60_money_bag.png",frame:{x:1,y:1,w:131,h:52},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:131,h:52},sourceSize:{w:131,h:52}},{filename:"back_button.png",frame:{x:134,y:1,w:122,h:54},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"buttons.png",frame:{x:258,y:1,w:180,h:54},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:180,h:54},sourceSize:{w:180,h:54}},{filename:"Level_failed_completed.png",frame:{x:1,y:57,w:487,h:142},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:487,h:142},sourceSize:{w:487,h:142}},{filename:"Pause.png",frame:{x:1,y:201,w:235,h:369},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:235,h:369},sourceSize:{w:235,h:369}},{filename:"Play_button.png",frame:{x:238,y:201,w:153,h:67},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:67},sourceSize:{w:153,h:67}},{filename:"wait_here.png",frame:{x:393,y:201,w:72,h:88},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:72,h:88},sourceSize:{w:72,h:88}}],meta:{app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"Money_movers1.png",format:"RGBA8888",size:{w:489,h:571},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:340c6a3345c3a96b61d1ab886cc537ac:b2bce0952abb21515dbc3b0c4652d47b:2028d62c6b3d5e073173e9be394c7844$"}},e}(),Levels=function(){function e(){}return e.data=[{"@level":"1","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}},{"@id":"28",image:{"@source":"Tip1Graphics.png"}},{"@id":"29",image:{"@source":"Tip2Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"44","@x":"350","@y":"228"},{"@gid":"66","@x":"525","@y":"350"},{"@gid":"69","@x":"560","@y":"140"},{"@gid":"50","@x":"296","@y":"420"},{"@gid":"43","@x":"175","@y":"315",properties:{property:{"@name":"text","@value":"level_text_1"}}},{"@gid":"68","@x":"0","@y":"175"},{"@gid":"57","@x":"630","@y":"455"},{"@gid":"56","@x":"72","@y":"453"},{"@gid":"71","@x":"11","@y":"284"},{"@gid":"72","@x":"595","@y":"249"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"595","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"8","@x":"665","@y":"490"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"10","@x":"0","@y":"455"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"14","@x":"490","@y":"385"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"4","@x":"140","@y":"385"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"3","@x":"595","@y":"175"},{"@gid":"2","@x":"525","@y":"175"},{"@gid":"4","@x":"210","@y":"210"},{"@gid":"2","@x":"175","@y":"210"},{"@gid":"3","@x":"35","@y":"210"},{"@gid":"3","@x":"0","@y":"210"},{"@gid":"3","@x":"70","@y":"210"},{"@gid":"3","@x":"630","@y":"175"},{"@gid":"15","@x":"665","@y":"175"},{"@gid":"8","@x":"665","@y":"140"},{"@gid":"3","@x":"560","@y":"175"},{"@gid":"3","@x":"350","@y":"210"},{"@gid":"4","@x":"140","@y":"140"},{"@gid":"6","@x":"105","@y":"175"},{"@gid":"3","@x":"315","@y":"385"},{"@gid":"3","@x":"280","@y":"385"},{"@gid":"16","@x":"105","@y":"210"},{"@gid":"2","@x":"315","@y":"210"},{"@gid":"2","@x":"245","@y":"385"},{"@gid":"8","@x":"105","@y":"140"},{"@gid":"3","@x":"350","@y":"385"},{"@gid":"4","@x":"420","@y":"385"},{"@gid":"6","@x":"490","@y":"350"},{"@gid":"3","@x":"525","@y":"385"},{"@gid":"6","@x":"420","@y":"175"},{"@gid":"6","@x":"420","@y":"140"},{"@gid":"3","@x":"385","@y":"210"},{"@gid":"5","@x":"420","@y":"105"},{"@gid":"7","@x":"420","@y":"245"},{"@gid":"13","@x":"420","@y":"210"},{"@gid":"9","@x":"630","@y":"525"},{"@gid":"10","@x":"560","@y":"385"},{"@gid":"7","@x":"560","@y":"420"},{"@gid":"2","@x":"35","@y":"385"},{"@gid":"5","@x":"140","@y":"490"},{"@gid":"5","@x":"455","@y":"490"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"13","@x":"0","@y":"490"},{"@gid":"3","@x":"70","@y":"385"},{"@gid":"3","@x":"105","@y":"385"},{"@gid":"3","@x":"385","@y":"385"},{"@gid":"2","@x":"455","@y":"315"},{"@gid":"10","@x":"490","@y":"315"},{"@x":"0","@y":"420","@width":"35","@height":"70"},{"@x":"665","@y":"455","@width":"35","@height":"35"},{"@x":"455","@y":"455","@width":"35","@height":"35"},{"@x":"140","@y":"455","@width":"35","@height":"35"},{"@x":"35","@y":"350","@width":"140","@height":"35"},{"@x":"245","@y":"350","@width":"210","@height":"35"},{"@x":"455","@y":"280","@width":"70","@height":"35"},{"@x":"490","@y":"350","@width":"105","@height":"35"},{"@x":"560","@y":"385","@width":"35","@height":"35"},{"@x":"490","@y":"315","@width":"35","@height":"35"},{"@x":"315","@y":"175","@width":"105","@height":"35"},{"@x":"420","@y":"70","@width":"35","@height":"175"},{"@x":"175","@y":"175","@width":"70","@height":"35"},{"@x":"0","@y":"175","@width":"140","@height":"35"},{"@x":"105","@y":"105","@width":"70","@height":"35"},{"@x":"105","@y":"140","@width":"35","@height":"35"},{"@x":"525","@y":"140","@width":"175","@height":"35"},{"@x":"665","@y":"105","@width":"35","@height":"35"},{"@x":"0","@y":"490","@width":"700","@height":"35"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"280","@y":"491"},{"@gid":"33","@x":"630","@y":"420"},{"@gid":"33","@x":"70","@y":"455"},{"@gid":"33","@x":"385","@y":"315"},{"@gid":"17","@x":"385","@y":"351"},{"@gid":"19","@x":"525","@y":"168","@rotation":"270"},{"@gid":"49","@x":"245","@y":"140"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"560","@y":"140"},{"@gid":"25","@x":"35","@y":"175"}]}]},{"@level":"2","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}},{"@id":"28",image:{"@source":"Tip3Graphics.png"}},{"@id":"29",image:{"@source":"Tip4Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"50","@x":"35","@y":"105"},{"@gid":"43","@x":"350","@y":"140",properties:{property:{"@name":"text","@value":"level_text_2"}}},{"@gid":"68","@x":"35","@y":"490"},{"@gid":"69","@x":"280","@y":"490"},{"@gid":"59","@x":"315","@y":"105"},{"@gid":"64","@x":"511","@y":"452"},{"@gid":"63","@x":"35","@y":"70"},{"@gid":"62","@x":"140","@y":"455"},{"@gid":"66","@x":"508","@y":"405"},{"@gid":"71","@x":"159","@y":"210"},{"@gid":"72","@x":"124","@y":"424"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"2","@x":"280","@y":"245"},{"@gid":"3","@x":"315","@y":"245"},{"@gid":"3","@x":"385","@y":"245"},{"@gid":"8","@x":"595","@y":"210"},{"@gid":"3","@x":"630","@y":"210"},{"@gid":"3","@x":"665","@y":"210"},{"@gid":"16","@x":"245","@y":"420"},{"@gid":"2","@x":"210","@y":"420"},{"@gid":"8","@x":"245","@y":"385"},{"@gid":"3","@x":"315","@y":"385"},{"@gid":"3","@x":"280","@y":"385"},{"@gid":"4","@x":"245","@y":"315"},{"@gid":"10","@x":"210","@y":"280"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"8","@x":"595","@y":"455"},{"@gid":"12","@x":"665","@y":"490"},{"@gid":"9","@x":"0","@y":"525"},{"@gid":"3","@x":"420","@y":"245"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"7","@x":"595","@y":"315"},{"@gid":"9","@x":"140","@y":"280"},{"@gid":"9","@x":"175","@y":"280"},{"@gid":"15","@x":"210","@y":"315"},{"@gid":"15","@x":"140","@y":"315"},{"@gid":"15","@x":"175","@y":"315"},{"@gid":"14","@x":"105","@y":"315"},{"@gid":"6","@x":"350","@y":"350"},{"@gid":"16","@x":"350","@y":"385"},{"@gid":"6","@x":"350","@y":"315"},{"@gid":"6","@x":"350","@y":"280"},{"@gid":"9","@x":"350","@y":"245"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"420","@y":"455","@width":"280","@height":"35"},{"@x":"595","@y":"420","@width":"105","@height":"35"},{"@x":"210","@y":"385","@width":"70","@height":"35"},{"@x":"245","@y":"350","@width":"140","@height":"35"},{"@x":"350","@y":"245","@width":"35","@height":"105"},{"@x":"280","@y":"210","@width":"210","@height":"35"},{"@x":"595","@y":"210","@width":"35","@height":"105"},{"@x":"595","@y":"175","@width":"105","@height":"35"},{"@x":"0","@y":"245","@width":"245","@height":"35"},{"@x":"105","@y":"280","@width":"175","@height":"35"},{"@x":"0","@y":"175","@width":"140","@height":"70"},{"@gid":"9","@x":"525","@y":"490"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"9","@x":"560","@y":"490"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"9","@x":"490","@y":"490"},{"@gid":"10","@x":"105","@y":"210"},{"@gid":"9","@x":"35","@y":"210"},{"@gid":"9","@x":"70","@y":"210"},{"@gid":"9","@x":"0","@y":"210"},{"@gid":"12","@x":"70","@y":"245"},{"@gid":"12","@x":"35","@y":"245"},{"@gid":"12","@x":"0","@y":"245"},{"@gid":"13","@x":"105","@y":"245"},{"@gid":"12","@x":"105","@y":"280"},{"@gid":"15","@x":"70","@y":"280"},{"@gid":"15","@x":"35","@y":"280"},{"@gid":"15","@x":"0","@y":"280"},{"@gid":"8","@x":"420","@y":"490"},{"@gid":"12","@x":"455","@y":"490"},{"@x":"455","@y":"420","@width":"35","@height":"35"},{"@gid":"5","@x":"455","@y":"455"},{"@x":"455","@y":"245","@width":"35","@height":"70"},{"@gid":"10","@x":"455","@y":"245"},{"@gid":"6","@x":"455","@y":"280"},{"@gid":"7","@x":"455","@y":"315"},{"@gid":"6","@x":"595","@y":"280"},{"@gid":"6","@x":"595","@y":"245"},{"@gid":"12","@x":"630","@y":"490"},{"@gid":"12","@x":"595","@y":"490"},{"@gid":"9","@x":"630","@y":"455"},{"@gid":"9","@x":"665","@y":"455"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"21","@y":"175"},{"@gid":"33","@x":"665","@y":"140"},{"@gid":"33","@x":"29","@y":"348"},{"@gid":"33","@x":"653","@y":"383"},{"@type":"1","@gid":"17","@x":"295","@y":"351"},{"@type":"3","@gid":"22","@x":"490","@y":"230",properties:{property:[{"@name":"distanceY","@value":"210"},{"@name":"speedY","@value":"45"}]}},{"@type":"1","@gid":"19","@x":"238","@y":"420","@rotation":"180"},{"@type":"3","@gid":"17","@x":"292","@y":"210"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"70","@y":"490"},{"@gid":"25","@x":"0","@y":"490"}]}]},{"@level":"3","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}},{"@id":"28",image:{"@source":"Tip5Graphics.png"}},{"@id":"29",image:{"@source":"Tip8Graphics.png"}},{"@id":"30",image:{"@source":"Tip9Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"50","@x":"610","@y":"315"},{"@gid":"43","@x":"185","@y":"163",properties:{property:{"@name":"text","@value":"level_text_3"}}},{"@gid":"69","@x":"0","@y":"490"},{"@gid":"68","@x":"210","@y":"210"},{"@gid":"69","@x":"0","@y":"350"},{"@gid":"58","@x":"105","@y":"175"},{"@gid":"54","@x":"665","@y":"210"},{"@gid":"73","@x":"280","@y":"490"},{"@gid":"72","@x":"261","@y":"339"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",properties:{property:{"@name":"physics"}},object:[{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"9","@x":"0","@y":"525"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"9","@x":"630","@y":"420"},{"@gid":"9","@x":"560","@y":"420"},{"@gid":"9","@x":"595","@y":"420"},{"@gid":"8","@x":"455","@y":"420"},{"@gid":"3","@x":"70","@y":"385"},{"@gid":"4","@x":"105","@y":"385"},{"@gid":"3","@x":"35","@y":"385"},{"@gid":"3","@x":"0","@y":"385"},{"@gid":"2","@x":"105","@y":"210"},{"@gid":"4","@x":"420","@y":"315"},{"@gid":"2","@x":"490","@y":"210"},{"@gid":"3","@x":"525","@y":"210"},{"@gid":"16","@x":"560","@y":"210"},{"@gid":"5","@x":"560","@y":"175"},{"@gid":"3","@x":"280","@y":"245"},{"@gid":"3","@x":"315","@y":"245"},{"@gid":"3","@x":"350","@y":"245"},{"@gid":"10","@x":"140","@y":"210"},{"@gid":"14","@x":"140","@y":"245"},{"@gid":"3","@x":"175","@y":"245"},{"@gid":"3","@x":"210","@y":"245"},{"@gid":"3","@x":"245","@y":"245"},{"@gid":"4","@x":"315","@y":"385"},{"@gid":"2","@x":"280","@y":"385"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"8","@x":"385","@y":"490"},{"@gid":"9","@x":"420","@y":"490"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"12","@x":"490","@y":"490"},{"@gid":"12","@x":"490","@y":"455"},{"@gid":"12","@x":"525","@y":"490"},{"@gid":"12","@x":"595","@y":"490"},{"@gid":"9","@x":"665","@y":"420"},{"@gid":"9","@x":"490","@y":"420"},{"@gid":"12","@x":"560","@y":"455"},{"@gid":"11","@x":"455","@y":"455"},{"@gid":"12","@x":"665","@y":"490"},{"@gid":"12","@x":"665","@y":"455"},{"@gid":"12","@x":"525","@y":"455"},{"@gid":"12","@x":"630","@y":"490"},{"@gid":"12","@x":"560","@y":"490"},{"@gid":"12","@x":"455","@y":"490"},{"@gid":"12","@x":"630","@y":"455"},{"@gid":"12","@x":"595","@y":"455"},{"@gid":"14","@x":"385","@y":"315"},{"@gid":"6","@x":"385","@y":"280"},{"@gid":"10","@x":"385","@y":"245"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"385","@y":"455","@width":"70","@height":"35"},{"@x":"455","@y":"385","@width":"245","@height":"105"},{"@x":"0","@y":"350","@width":"140","@height":"35"},{"@x":"280","@y":"350","@width":"70","@height":"35"},{"@x":"105","@y":"175","@width":"70","@height":"35"},{"@x":"140","@y":"210","@width":"280","@height":"35"},{"@x":"385","@y":"245","@width":"35","@height":"35"},{"@x":"385","@y":"280","@width":"70","@height":"35"},{"@x":"490","@y":"175","@width":"105","@height":"35"},{"@x":"560","@y":"140","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"420"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"595","@y":"385"},{"@gid":"33","@x":"350","@y":"175"},{"@gid":"33","@x":"630","@y":"175"},{"@gid":"33","@x":"385","@y":"385"},{"@gid":"27","@x":"187","@y":"267",properties:{property:[{"@name":"delay","@value":"1"},{"@name":"maxAngle","@value":"70"},{"@name":"minAngle","@value":"110"},{"@name":"speedX","@value":"2"}]}},{"@type":"1","@gid":"17","@x":"422","@y":"455"},{"@type":"1","@gid":"20","@x":"140","@y":"351","@rotation":"90"},{"@type":"1","@gid":"20","@x":"280","@y":"371","@rotation":"270"},{"@gid":"19","@x":"280","@y":"351","@rotation":"90"},{"@gid":"19","@x":"140","@y":"371","@rotation":"270"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"0","@y":"490"},{"@gid":"25","@x":"0","@y":"350"}]}]},{"@level":"4","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}},{"@id":"28",image:{"@source":"Tip6Graphics.png"}},{"@id":"29",image:{"@source":"Tip7Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"50","@x":"295","@y":"140"},{"@gid":"43","@x":"96","@y":"413",properties:{property:{"@name":"text","@value":"level_text_4"}}},{"@gid":"69","@x":"105","@y":"490"},{"@gid":"70","@x":"490","@y":"455"},{"@gid":"65","@x":"30","@y":"109"},{"@gid":"58","@x":"15","@y":"252"},{"@gid":"63","@x":"181","@y":"140"},{"@gid":"72","@x":"497","@y":"376"},{"@gid":"71","@x":"368","@y":"378"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"3","@x":"0","@y":"140"},{"@gid":"3","@x":"105","@y":"245"},{"@gid":"3","@x":"140","@y":"245"},{"@gid":"15","@x":"175","@y":"245"},{"@gid":"3","@x":"280","@y":"245"},{"@gid":"3","@x":"315","@y":"245"},{"@gid":"4","@x":"385","@y":"245"},{"@gid":"14","@x":"490","@y":"245"},{"@gid":"10","@x":"560","@y":"210"},{"@gid":"14","@x":"560","@y":"280"},{"@gid":"2","@x":"630","@y":"140"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"9","@x":"420","@y":"490"},{"@gid":"9","@x":"350","@y":"490"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"385","@y":"490"},{"@gid":"12","@x":"350","@y":"525"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"560","@y":"490"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"9","@x":"490","@y":"490"},{"@gid":"9","@x":"455","@y":"490"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"9","@x":"595","@y":"490"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"9","@x":"525","@y":"490"},{"@gid":"12","@x":"665","@y":"490"},{"@gid":"13","@x":"70","@y":"455"},{"@gid":"13","@x":"70","@y":"490"},{"@gid":"3","@x":"665","@y":"140"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"12","@x":"630","@y":"490"},{"@gid":"12","@x":"665","@y":"455"},{"@gid":"3","@x":"595","@y":"280"},{"@gid":"10","@x":"70","@y":"420"},{"@gid":"12","@x":"35","@y":"455"},{"@gid":"12","@x":"35","@y":"490"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"11","@x":"315","@y":"490"},{"@gid":"6","@x":"315","@y":"455"},{"@gid":"5","@x":"315","@y":"385"},{"@gid":"12","@x":"35","@y":"420"},{"@gid":"13","@x":"35","@y":"385"},{"@gid":"10","@x":"35","@y":"350"},{"@gid":"2","@x":"70","@y":"245"},{"@gid":"4","@x":"70","@y":"140"},{"@gid":"3","@x":"350","@y":"245"},{"@gid":"12","@x":"0","@y":"455"},{"@gid":"12","@x":"0","@y":"420"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"0","@y":"490"},{"@gid":"12","@x":"0","@y":"385"},{"@gid":"3","@x":"35","@y":"140"},{"@gid":"13","@x":"210","@y":"210"},{"@gid":"10","@x":"210","@y":"175"},{"@gid":"8","@x":"175","@y":"175"},{"@gid":"11","@x":"175","@y":"210"},{"@gid":"8","@x":"490","@y":"175"},{"@gid":"11","@x":"490","@y":"210"},{"@gid":"10","@x":"525","@y":"175"},{"@gid":"15","@x":"525","@y":"245"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"315","@y":"350","@width":"35","@height":"140"},{"@x":"630","@y":"280","@width":"70","@height":"175"},{"@x":"0","@y":"385","@width":"105","@height":"105"},{"@x":"0","@y":"315","@width":"70","@height":"70"},{"@x":"70","@y":"210","@width":"350","@height":"35"},{"@x":"175","@y":"140","@width":"70","@height":"70"},{"@x":"0","@y":"105","@width":"105","@height":"35"},{"@x":"560","@y":"245","@width":"140","@height":"35"},{"@x":"490","@y":"140","@width":"70","@height":"105"},{"@x":"630","@y":"105","@width":"70","@height":"35"},{"@x":"350","@y":"455","@width":"350","@height":"35"},{"@gid":"9","@x":"665","@y":"280"},{"@gid":"9","@x":"630","@y":"280"},{"@gid":"6","@x":"315","@y":"420"},{"@gid":"11","@x":"630","@y":"385"},{"@gid":"11","@x":"630","@y":"350"},{"@gid":"12","@x":"665","@y":"420"},{"@gid":"12","@x":"665","@y":"350"},{"@gid":"11","@x":"630","@y":"420"},{"@gid":"12","@x":"665","@y":"385"},{"@gid":"11","@x":"630","@y":"315"},{"@gid":"12","@x":"665","@y":"315"},{"@gid":"14","@x":"210","@y":"280"},{"@gid":"16","@x":"245","@y":"280"},{"@x":"210","@y":"245","@width":"70","@height":"35"},{"@gid":"9","@x":"245","@y":"245"},{"@gid":"12","@x":"210","@y":"245"},{"@gid":"10","@x":"0","@y":"280"},{"@x":"0","@y":"245","@width":"35","@height":"70"},{"@gid":"13","@x":"0","@y":"315"},{"@gid":"12","@x":"0","@y":"350"},{"@gid":"13","@x":"560","@y":"245"},{"@gid":"12","@x":"525","@y":"210"},{"@x":"560","@y":"175","@width":"35","@height":"70"},{"@gid":"11","@x":"630","@y":"455"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"280","@y":"210"},{"@gid":"33","@x":"653","@y":"80"},{"@gid":"33","@x":"595","@y":"350"},{"@gid":"33","@x":"151","@y":"315"},{"@gid":"39","@x":"595","@y":"455"},{"@gid":"17","@x":"630","@y":"245"},{"@gid":"21","@x":"420","@y":"231",properties:{property:[{"@name":"distanceY","@value":"210"},{"@name":"speedY","@value":"45"}]}},{"@type":"3","@gid":"17","@x":"280","@y":"490"},{"@type":"3","@gid":"19","@x":"315","@y":"455","@rotation":"90"},{"@type":"6","@gid":"19","@x":"322","@y":"421"},{"@type":"6","@gid":"17","@x":"437","@y":"455"},{"@type":"4","@gid":"17","@x":"322","@y":"257","@rotation":"180"},{"@type":"4","@gid":"19","@x":"280","@y":"279","@rotation":"270"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"525","@y":"455"},{"@gid":"25","@x":"175","@y":"490"}]}]},{"@level":"5","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}},{"@id":"9",image:{"@source":"Plank7Graphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"51","@x":"435","@y":"105"},{"@gid":"44","@x":"210","@y":"315",properties:{property:{"@name":"text","@value":"level_text_5"}}},{"@gid":"69","@x":"105","@y":"455"},{"@gid":"50","@x":"455","@y":"315"},{"@gid":"60","@x":"315","@y":"385"},{"@gid":"65","@x":"581","@y":"452"},{"@gid":"67","@x":"31","@y":"249"},{"@gid":"68","@x":"280","@y":"105"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"350","@y":"490"},{"@gid":"9","@x":"70","@y":"490"},{"@gid":"12","@x":"210","@y":"525"},{"@gid":"9","@x":"280","@y":"490"},{"@gid":"12","@x":"245","@y":"525"},{"@gid":"9","@x":"210","@y":"490"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"9","@x":"175","@y":"490"},{"@gid":"12","@x":"280","@y":"525"},{"@gid":"9","@x":"560","@y":"490"},{"@gid":"12","@x":"175","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"12","@x":"665","@y":"490"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"9","@x":"105","@y":"490"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"9","@x":"245","@y":"490"},{"@gid":"9","@x":"595","@y":"490"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"9","@x":"630","@y":"490"},{"@gid":"9","@x":"385","@y":"490"},{"@gid":"9","@x":"140","@y":"490"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"12","@x":"350","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"9","@x":"315","@y":"490"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"4","@x":"210","@y":"385"},{"@gid":"3","@x":"140","@y":"385"},{"@gid":"12","@x":"525","@y":"490"},{"@gid":"11","@x":"665","@y":"455"},{"@gid":"3","@x":"630","@y":"350"},{"@gid":"8","@x":"665","@y":"280"},{"@gid":"11","@x":"665","@y":"315"},{"@gid":"3","@x":"280","@y":"210"},{"@gid":"3","@x":"315","@y":"210"},{"@gid":"3","@x":"385","@y":"210"},{"@gid":"4","@x":"490","@y":"210"},{"@gid":"16","@x":"140","@y":"245"},{"@x":"0","@y":"455","@width":"700","@height":"70"},{"@x":"35","@y":"420","@width":"35","@height":"35"},{"@x":"455","@y":"385","@width":"70","@height":"35"},{"@x":"455","@y":"420","@width":"105","@height":"35"},{"@x":"665","@y":"350","@width":"35","@height":"105"},{"@x":"595","@y":"315","@width":"105","@height":"35"},{"@x":"665","@y":"245","@width":"35","@height":"70"},{"@x":"595","@y":"175","@width":"105","@height":"35"},{"@x":"140","@y":"175","@width":"385","@height":"35"},{"@x":"140","@y":"210","@width":"35","@height":"35"},{"@x":"70","@y":"280","@width":"35","@height":"70"},{"@gid":"12","@x":"490","@y":"490"},{"@gid":"10","@x":"525","@y":"455"},{"@gid":"11","@x":"665","@y":"420"},{"@gid":"11","@x":"665","@y":"385"},{"@gid":"12","@x":"665","@y":"350"},{"@gid":"2","@x":"595","@y":"350"},{"@gid":"10","@x":"490","@y":"420"},{"@gid":"3","@x":"420","@y":"210"},{"@gid":"3","@x":"455","@y":"210"},{"@gid":"2","@x":"595","@y":"210"},{"@gid":"3","@x":"630","@y":"210"},{"@gid":"15","@x":"350","@y":"210"},{"@gid":"5","@x":"350","@y":"175"},{"@x":"350","@y":"140","@width":"35","@height":"35"},{"@gid":"15","@x":"665","@y":"210"},{"@gid":"8","@x":"665","@y":"175"},{"@x":"665","@y":"140","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"490"},{"@gid":"13","@x":"0","@y":"420"},{"@x":"0","@y":"350","@width":"35","@height":"105"},{"@gid":"12","@x":"455","@y":"490"},{"@gid":"8","@x":"455","@y":"420"},{"@gid":"12","@x":"490","@y":"455"},{"@gid":"11","@x":"455","@y":"455"},{"@gid":"9","@x":"420","@y":"490"},{"@gid":"10","@x":"0","@y":"385"},{"@x":"70","@y":"350","@width":"175","@height":"35"},{"@gid":"8","@x":"105","@y":"245"},{"@gid":"12","@x":"0","@y":"455"},{"@gid":"10","@x":"35","@y":"455"},{"@gid":"12","@x":"35","@y":"490"},{"@x":"105","@y":"210","@width":"35","@height":"105"},{"@gid":"3","@x":"105","@y":"385"},{"@gid":"14","@x":"70","@y":"385"},{"@gid":"6","@x":"70","@y":"350"},{"@gid":"3","@x":"175","@y":"385"},{"@gid":"8","@x":"140","@y":"210"},{"@gid":"3","@x":"210","@y":"210"},{"@gid":"3","@x":"175","@y":"210"},{"@gid":"3","@x":"245","@y":"210"},{"@gid":"8","@x":"70","@y":"315"},{"@gid":"6","@x":"105","@y":"280"},{"@gid":"16","@x":"105","@y":"315"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"420","@y":"175"},{"@gid":"33","@x":"630","@y":"70"},{"@gid":"33","@x":"70","@y":"105"},{"@gid":"33","@x":"595","@y":"420"},{"@type":"2","@gid":"20","@x":"245","@y":"385","@rotation":"180"},{"@gid":"17","@x":"420","@y":"455"},{"@type":"3","@gid":"21","@x":"525","@y":"195",properties:{property:[{"@name":"distanceY","@value":"175"},{"@name":"speedY","@value":"45"}]}},{"@gid":"28","@x":"280","@y":"455"},{"@gid":"35","@x":"222","@y":"350"},{"@type":"3","@gid":"17","@x":"311","@y":"175"},{"@gid":"32","@x":"394","@y":"435"},{"@type":"1","@gid":"19","@x":"35","@y":"350","@rotation":"90"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"140","@y":"350"},{"@gid":"25","@x":"105","@y":"455"}]}]},{"@level":"6","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"72","@tileheight":"87",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}},{"@id":"16",image:{"@source":"Tip5Graphics.png"}}]},{"@firstgid":"18","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"35","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}},{"@id":"9",image:{"@source":"Plank7Graphics.png"}},{"@id":"10",image:{"@source":"Plank4Graphics.png"}}]},{"@firstgid":"46","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"53","@x":"610","@y":"385"},{"@gid":"46","@x":"208","@y":"261",properties:{property:{"@name":"text","@value":"level_text_6"}}},{"@gid":"47","@x":"289","@y":"333"},{"@gid":"52","@x":"0","@y":"385"},{"@gid":"17","@x":"141","@y":"385"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"210","@y":"490"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"210","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"9","@x":"385","@y":"490"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"9","@x":"70","@y":"490"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"9","@x":"175","@y":"490"},{"@gid":"9","@x":"420","@y":"490"},{"@gid":"9","@x":"350","@y":"490"},{"@gid":"9","@x":"105","@y":"490"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"9","@x":"245","@y":"490"},{"@gid":"12","@x":"280","@y":"525"},{"@gid":"9","@x":"140","@y":"490"},{"@gid":"12","@x":"175","@y":"525"},{"@gid":"12","@x":"245","@y":"525"},{"@gid":"9","@x":"280","@y":"490"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"12","@x":"350","@y":"525"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"9","@x":"665","@y":"490"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"9","@x":"455","@y":"490"},{"@gid":"9","@x":"525","@y":"490"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"9","@x":"630","@y":"490"},{"@gid":"9","@x":"560","@y":"490"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"9","@x":"595","@y":"490"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"9","@x":"490","@y":"490"},{"@gid":"8","@x":"665","@y":"210"},{"@gid":"11","@x":"665","@y":"280"},{"@gid":"14","@x":"665","@y":"315"},{"@gid":"3","@x":"0","@y":"315"},{"@gid":"3","@x":"35","@y":"315"},{"@gid":"3","@x":"70","@y":"315"},{"@gid":"3","@x":"245","@y":"315"},{"@gid":"4","@x":"105","@y":"315"},{"@gid":"2","@x":"210","@y":"315"},{"@gid":"3","@x":"280","@y":"315"},{"@gid":"3","@x":"315","@y":"315"},{"@gid":"3","@x":"175","@y":"140"},{"@gid":"4","@x":"245","@y":"140"},{"@gid":"2","@x":"385","@y":"140"},{"@gid":"5","@x":"490","@y":"105"},{"@gid":"11","@x":"665","@y":"245"},{"@gid":"3","@x":"420","@y":"140"},{"@gid":"3","@x":"455","@y":"140"},{"@gid":"15","@x":"490","@y":"140"},{"@gid":"3","@x":"525","@y":"140"},{"@gid":"4","@x":"560","@y":"140"},{"@x":"0","@y":"455","@width":"700","@height":"70"},{"@x":"210","@y":"280","@width":"175","@height":"35"},{"@x":"0","@y":"280","@width":"140","@height":"35"},{"@x":"525","@y":"221","@width":"70","@height":"35"},{"@x":"665","@y":"175","@width":"35","@height":"140"},{"@x":"385","@y":"105","@width":"210","@height":"35"},{"@x":"490","@y":"70","@width":"35","@height":"35"},{"@x":"105","@y":"105","@width":"175","@height":"35"},{"@x":"105","@y":"70","@width":"35","@height":"35"},{"@gid":"4","@x":"350","@y":"315"},{"@x":"455","@y":"280","@width":"140","@height":"35"},{"@gid":"2","@x":"455","@y":"315"},{"@gid":"9","@x":"35","@y":"490"},{"@gid":"9","@x":"0","@y":"490"},{"@x":"0","@y":"35","@width":"140","@height":"35"},{"@gid":"9","@x":"70","@y":"70"},{"@gid":"9","@x":"35","@y":"70"},{"@gid":"6","@x":"105","@y":"105"},{"@gid":"13","@x":"0","@y":"140"},{"@gid":"13","@x":"0","@y":"105"},{"@gid":"9","@x":"0","@y":"70"},{"@gid":"3","@x":"140","@y":"140"},{"@gid":"7","@x":"105","@y":"175"},{"@x":"105","@y":"140","@width":"35","@height":"35"},{"@gid":"11","@x":"105","@y":"140"},{"@gid":"16","@x":"0","@y":"175"},{"@x":"0","@y":"70","@width":"35","@height":"105"},{"@gid":"9","@x":"315","@y":"490"},{"@gid":"3","@x":"490","@y":"315"},{"@gid":"3","@x":"210","@y":"140"},{"@gid":"13","@x":"105","@y":"70"},{"@gid":"6","@x":"105","@y":"35"},{"@x":"105","@y":"0","@width":"35","@height":"35"},{"@gid":"2","@x":"525","@y":"256"},{"@gid":"4","@x":"560","@y":"256"},{"@gid":"3","@x":"525","@y":"315"},{"@gid":"4","@x":"560","@y":"315"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"24","@x":"595","@y":"455"},{"@gid":"34","@x":"296","@y":"410"},{"@gid":"34","@x":"615","@y":"312"},{"@gid":"34","@x":"175","@y":"70"},{"@type":"2","@gid":"21","@x":"455","@y":"300","@rotation":"270"},{"@gid":"28","@x":"162","@y":"162",properties:{property:[{"@name":"delay","@value":"2"},{"@name":"maxAngle","@value":"100"},{"@name":"minAngle","@value":"80"}]}},{"@gid":"28","@x":"408","@y":"161",properties:{property:[{"@name":"delay","@value":"2"},{"@name":"maxAngle","@value":"100"},{"@name":"minAngle","@value":"80"}]}},{"@type":"2","@gid":"21","@x":"210","@y":"300","@rotation":"270"},{"@type":"1","@gid":"18","@x":"296","@y":"455"},{"@type":"1","@gid":"20","@x":"35","@y":"152","@rotation":"90"},{"@gid":"27","@x":"138","@y":"455"},{"@type":"6","@gid":"20","@x":"665","@y":"258","@rotation":"90"},{"@type":"6","@gid":"18","@x":"413","@y":"105"},{"@gid":"43","@x":"455","@y":"280"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"25","@x":"0","@y":"455"},{"@gid":"26","@x":"46","@y":"152"}]}]},{"@level":"7","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"0","@height":"0",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"0","@height":"0",object:[{"@gid":"50","@x":"65","@y":"384"},{"@gid":"43","@x":"416","@y":"385",properties:{property:{"@name":"text","@value":"level_text_7"}}},{"@gid":"52","@x":"280","@y":"315"},{"@gid":"51","@x":"140","@y":"280"},{"@gid":"46","@x":"595","@y":"245"},{"@gid":"47","@x":"595","@y":"315"},{"@gid":"55","@x":"70","@y":"105"},{"@gid":"45","@x":"490","@y":"123"}]},{"@draworder":"topdown","@name":"tiles","@width":"0","@height":"0",object:[{"@gid":"9","@x":"105","@y":"490"},{"@gid":"9","@x":"595","@y":"490"},{"@gid":"9","@x":"490","@y":"490"},{"@gid":"9","@x":"385","@y":"490"},{"@gid":"9","@x":"315","@y":"490"},{"@gid":"9","@x":"245","@y":"490"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"9","@x":"35","@y":"490"},{"@gid":"9","@x":"525","@y":"490"},{"@gid":"9","@x":"420","@y":"490"},{"@gid":"12","@x":"0","@y":"490"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"70","@y":"490"},{"@gid":"9","@x":"560","@y":"490"},{"@gid":"9","@x":"455","@y":"490"},{"@gid":"9","@x":"350","@y":"490"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"490"},{"@gid":"9","@x":"140","@y":"350"},{"@gid":"9","@x":"175","@y":"350"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"12","@x":"210","@y":"525"},{"@gid":"12","@x":"245","@y":"525"},{"@gid":"12","@x":"280","@y":"525"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"12","@x":"350","@y":"525"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"9","@x":"630","@y":"490"},{"@gid":"13","@x":"0","@y":"455"},{"@gid":"13","@x":"0","@y":"420"},{"@gid":"13","@x":"0","@y":"385"},{"@gid":"12","@x":"0","@y":"350"},{"@gid":"10","@x":"0","@y":"315"},{"@gid":"12","@x":"665","@y":"490"},{"@gid":"11","@x":"665","@y":"455"},{"@gid":"11","@x":"665","@y":"420"},{"@gid":"4","@x":"350","@y":"385"},{"@gid":"3","@x":"315","@y":"385"},{"@gid":"3","@x":"280","@y":"385"},{"@gid":"3","@x":"245","@y":"385"},{"@gid":"15","@x":"175","@y":"385"},{"@gid":"15","@x":"210","@y":"385"},{"@gid":"14","@x":"140","@y":"385"},{"@gid":"10","@x":"210","@y":"350"},{"@gid":"3","@x":"35","@y":"350"},{"@gid":"3","@x":"105","@y":"350"},{"@gid":"3","@x":"70","@y":"350"},{"@gid":"10","@x":"140","@y":"490"},{"@gid":"8","@x":"210","@y":"490"},{"@gid":"3","@x":"420","@y":"280"},{"@gid":"3","@x":"490","@y":"280"},{"@gid":"4","@x":"525","@y":"280"},{"@gid":"3","@x":"455","@y":"280"},{"@gid":"3","@x":"350","@y":"280"},{"@gid":"3","@x":"385","@y":"280"},{"@gid":"15","@x":"315","@y":"280"},{"@gid":"14","@x":"280","@y":"280"},{"@gid":"11","@x":"280","@y":"245"},{"@gid":"3","@x":"385","@y":"175"},{"@gid":"4","@x":"420","@y":"175"},{"@gid":"8","@x":"665","@y":"140"},{"@gid":"11","@x":"665","@y":"175"},{"@gid":"3","@x":"490","@y":"105"},{"@gid":"3","@x":"455","@y":"105"},{"@gid":"4","@x":"525","@y":"105"},{"@gid":"3","@x":"420","@y":"105"},{"@gid":"3","@x":"385","@y":"105"},{"@gid":"3","@x":"350","@y":"105"},{"@gid":"3","@x":"315","@y":"105"},{"@gid":"3","@x":"245","@y":"105"},{"@gid":"3","@x":"210","@y":"105"},{"@gid":"3","@x":"175","@y":"105"},{"@gid":"2","@x":"140","@y":"105"},{"@gid":"3","@x":"140","@y":"245"},{"@gid":"3","@x":"105","@y":"245"},{"@gid":"2","@x":"70","@y":"245"},{"@gid":"4","@x":"175","@y":"245"},{"@gid":"4","@x":"175","@y":"175"},{"@gid":"3","@x":"105","@y":"175"},{"@gid":"3","@x":"140","@y":"175"},{"@gid":"3","@x":"70","@y":"175"},{"@gid":"3","@x":"0","@y":"175"},{"@gid":"3","@x":"35","@y":"175"},{"@x":"140","@y":"70","@width":"420","@height":"35"},{"@x":"0","@y":"140","@width":"210","@height":"35"},{"@x":"70","@y":"210","@width":"140","@height":"35"},{"@x":"280","@y":"210","@width":"70","@height":"35"},{"@x":"280","@y":"245","@width":"280","@height":"35"},{"@x":"350","@y":"140","@width":"105","@height":"35"},{"@x":"560","@y":"175","@width":"35","@height":"35"},{"@x":"665","@y":"105","@width":"35","@height":"175"},{"@x":"665","@y":"280","@width":"35","@height":"175"},{"@x":"210","@y":"455","@width":"490","@height":"70"},{"@x":"35","@y":"455","@width":"140","@height":"70"},{"@x":"175","@y":"490","@width":"35","@height":"35"},{"@x":"0","@y":"280","@width":"35","@height":"245"},{"@x":"35","@y":"315","@width":"210","@height":"35"},{"@x":"140","@y":"350","@width":"245","@height":"35"},{"@x":"280","@y":"105","@width":"35","@height":"105"},{"@gid":"10","@x":"315","@y":"245"},{"@gid":"6","@x":"280","@y":"210"},{"@gid":"2","@x":"350","@y":"175"},{"@gid":"6","@x":"280","@y":"175"},{"@gid":"6","@x":"280","@y":"140"},{"@gid":"9","@x":"280","@y":"105"},{"@gid":"11","@x":"665","@y":"385"},{"@gid":"11","@x":"665","@y":"350"},{"@gid":"11","@x":"665","@y":"315"},{"@gid":"11","@x":"665","@y":"210"},{"@gid":"11","@x":"665","@y":"245"},{"@gid":"11","@x":"665","@y":"280"},{"@gid":"1","@x":"560","@y":"210"}]},{"@draworder":"topdown","@name":"active","@width":"0","@height":"0",object:[{"@gid":"23","@x":"50","@y":"457"},{"@gid":"33","@x":"23","@y":"223"},{"@gid":"33","@x":"595","@y":"105"},{"@gid":"33","@x":"490","@y":"210"},{"@name":"k1","@type":"3","@gid":"17","@x":"630","@y":"456"},{"@name":"elev1","@type":"3","@gid":"21","@x":"210","@y":"160",properties:{property:[{"@name":"distanceY","@value":"70"},{"@name":"speedY","@value":"30"}]}},{"@name":"door1","@type":"2","@gid":"1073741843","@x":"176","@y":"385","@rotation":"180"},{"@name":"door2","@type":"6","@gid":"1073741843","@x":"226","@y":"525"},{"@name":"door3","@type":"1","@gid":"1073741843","@x":"295","@y":"525"},{"@type":"3","@gid":"1073741843","@x":"385","@y":"385","@rotation":"180"},{"@name":"k4","@type":"2","@gid":"17","@x":"180","@y":"492"},{"@gid":"35","@x":"421","@y":"21"},{"@type":"1","@gid":"17","@x":"425","@y":"72"},{"@name":"k6","@type":"6","@gid":"17","@x":"372","@y":"142"},{"@gid":"35","@x":"366","@y":"139"}]},{"@draworder":"topdown","@name":"characters","@width":"0","@height":"0",object:[{"@gid":"24","@x":"560","@y":"455"},{"@gid":"25","@x":"420","@y":"455"}]}]},{"@level":"8","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}},{"@id":"9",image:{"@source":"Plank7Graphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"0","@height":"0",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"0","@height":"0",object:[{"@gid":"51","@x":"88","@y":"420"},{"@gid":"44","@x":"426","@y":"371",properties:{property:{"@name":"text","@value":"level_text_8"}}},{"@gid":"69","@x":"0","@y":"210"},{"@gid":"45","@x":"307","@y":"299"},{"@gid":"59","@x":"35","@y":"175"},{"@gid":"70","@x":"565","@y":"490"},{"@gid":"68","@x":"315","@y":"385"},{"@gid":"50","@x":"35","@y":"385"},{"@gid":"60","@x":"16","@y":"325"}]},{"@draworder":"topdown","@name":"tiles","@width":"0","@height":"0",object:[{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"595","@y":"525"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"455","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"13","@x":"0","@y":"490"},{"@gid":"13","@x":"0","@y":"455"},{"@gid":"10","@x":"0","@y":"420"},{"@gid":"3","@x":"280","@y":"455"},{"@gid":"3","@x":"315","@y":"455"},{"@gid":"3","@x":"350","@y":"455"},{"@gid":"16","@x":"385","@y":"455"},{"@gid":"8","@x":"385","@y":"420"},{"@gid":"3","@x":"455","@y":"420"},{"@gid":"3","@x":"420","@y":"420"},{"@gid":"3","@x":"490","@y":"420"},{"@gid":"3","@x":"560","@y":"420"},{"@gid":"3","@x":"525","@y":"420"},{"@gid":"3","@x":"595","@y":"420"},{"@gid":"3","@x":"630","@y":"420"},{"@gid":"9","@x":"665","@y":"420"},{"@gid":"9","@x":"630","@y":"525"},{"@gid":"11","@x":"665","@y":"455"},{"@gid":"11","@x":"665","@y":"490"},{"@gid":"5","@x":"245","@y":"350"},{"@gid":"6","@x":"245","@y":"420"},{"@gid":"6","@x":"245","@y":"385"},{"@gid":"7","@x":"385","@y":"350"},{"@gid":"6","@x":"385","@y":"315"},{"@gid":"3","@x":"420","@y":"280"},{"@gid":"3","@x":"455","@y":"280"},{"@gid":"4","@x":"490","@y":"280"},{"@gid":"2","@x":"595","@y":"280"},{"@gid":"3","@x":"630","@y":"280"},{"@gid":"14","@x":"665","@y":"350"},{"@gid":"11","@x":"665","@y":"315"},{"@gid":"12","@x":"665","@y":"280"},{"@gid":"11","@x":"665","@y":"245"},{"@gid":"3","@x":"630","@y":"210"},{"@gid":"12","@x":"665","@y":"210"},{"@gid":"11","@x":"665","@y":"175"},{"@gid":"9","@x":"665","@y":"140"},{"@gid":"3","@x":"595","@y":"210"},{"@gid":"3","@x":"560","@y":"210"},{"@gid":"3","@x":"525","@y":"210"},{"@gid":"3","@x":"455","@y":"210"},{"@gid":"3","@x":"490","@y":"210"},{"@gid":"3","@x":"420","@y":"210"},{"@gid":"2","@x":"385","@y":"210"},{"@gid":"9","@x":"385","@y":"280"},{"@gid":"3","@x":"350","@y":"280"},{"@gid":"3","@x":"315","@y":"280"},{"@gid":"3","@x":"280","@y":"280"},{"@gid":"14","@x":"245","@y":"280"},{"@gid":"6","@x":"245","@y":"245"},{"@gid":"6","@x":"245","@y":"210"},{"@gid":"6","@x":"245","@y":"175"},{"@gid":"8","@x":"245","@y":"140"},{"@gid":"1","@x":"315","@y":"210"},{"@gid":"16","@x":"140","@y":"315"},{"@gid":"13","@x":"140","@y":"245"},{"@gid":"6","@x":"140","@y":"210"},{"@gid":"6","@x":"140","@y":"175"},{"@gid":"5","@x":"140","@y":"140"},{"@gid":"3","@x":"0","@y":"245"},{"@gid":"3","@x":"35","@y":"245"},{"@gid":"14","@x":"70","@y":"315"},{"@gid":"15","@x":"105","@y":"315"},{"@gid":"9","@x":"70","@y":"245"},{"@gid":"9","@x":"105","@y":"245"},{"@gid":"15","@x":"315","@y":"140"},{"@gid":"3","@x":"280","@y":"140"},{"@gid":"8","@x":"315","@y":"105"},{"@gid":"16","@x":"490","@y":"140"},{"@gid":"14","@x":"560","@y":"105"},{"@gid":"11","@x":"70","@y":"280"},{"@gid":"12","@x":"105","@y":"280"},{"@gid":"13","@x":"140","@y":"280"},{"@gid":"14","@x":"245","@y":"455"},{"@gid":"10","@x":"490","@y":"105"},{"@gid":"9","@x":"350","@y":"105"},{"@gid":"9","@x":"455","@y":"105"},{"@gid":"15","@x":"455","@y":"140"},{"@gid":"15","@x":"350","@y":"140"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"0","@y":"385","@width":"35","@height":"105"},{"@x":"245","@y":"315","@width":"35","@height":"105"},{"@x":"245","@y":"420","@width":"175","@height":"35"},{"@x":"385","@y":"385","@width":"315","@height":"35"},{"@x":"665","@y":"420","@width":"35","@height":"70"},{"@x":"665","@y":"140","@width":"35","@height":"210"},{"@x":"560","@y":"70","@width":"105","@height":"35"},{"@x":"560","@y":"0","@width":"35","@height":"70"},{"@x":"315","@y":"70","@width":"210","@height":"70"},{"@x":"245","@y":"105","@width":"70","@height":"35"},{"@x":"245","@y":"140","@width":"35","@height":"105"},{"@x":"245","@y":"245","@width":"280","@height":"35"},{"@x":"385","@y":"280","@width":"35","@height":"70"},{"@x":"595","@y":"245","@width":"70","@height":"35"},{"@x":"385","@y":"175","@width":"280","@height":"35"},{"@x":"315","@y":"175","@width":"35","@height":"35"},{"@x":"0","@y":"210","@width":"175","@height":"35"},{"@x":"70","@y":"245","@width":"105","@height":"70"},{"@x":"140","@y":"105","@width":"35","@height":"105"},{"@gid":"15","@x":"385","@y":"140"},{"@gid":"9","@x":"385","@y":"105"},{"@gid":"15","@x":"420","@y":"140"},{"@gid":"9","@x":"420","@y":"105"},{"@gid":"3","@x":"595","@y":"105"}]},{"@draworder":"topdown","@name":"active","@width":"0","@height":"0",object:[{"@gid":"23","@x":"70","@y":"490"},{"@gid":"33","@x":"630","@y":"170"},{"@gid":"33","@x":"444","@y":"467"},{"@gid":"33","@x":"668","@y":"379"},{"@type":"1","@gid":"19","@x":"525","@y":"79","@rotation":"90"},{"@gid":"35","@x":"525","@y":"79"},{"@gid":"27","@x":"657","@y":"241",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"},{"@name":"speedX","@value":"1"}]}},{"@name":"door4","@type":"6","@gid":"19","@x":"595","@y":"271","@rotation":"270"},{"@name":"door4","@type":"5","@gid":"19","@x":"330","@y":"210"},{"@name":"k1","@type":"5","@gid":"17","@x":"353","@y":"245"},{"@name":"k1","@type":"6","@gid":"17","@x":"575","@y":"222","@rotation":"180"},{"@gid":"30","@x":"595","@y":"490"},{"@name":"k1","@type":"2","@gid":"17","@x":"444","@y":"492"},{"@type":"2","@gid":"19","@x":"560","@y":"420","@rotation":"180"},{"@name":"k1","@type":"1","@gid":"17","@x":"350","@y":"70"},{"@type":"3","@gid":"19","@x":"245","@y":"125","@rotation":"270"},{"@type":"2","@gid":"19","@x":"245","@y":"281","@rotation":"270"},{"@name":"k1","@type":"3","@gid":"17","@x":"287","@y":"421"},{"@gid":"34","@x":"153","@y":"105"},{"@gid":"10","@x":"630","@y":"105"},{"@gid":"14","@x":"630","@y":"140"},{"@x":"630","@y":"105","@width":"70","@height":"35"},{"@gid":"6","@x":"560","@y":"70"},{"@gid":"6","@x":"560","@y":"35"}]},{"@draworder":"topdown","@name":"characters","@width":"0","@height":"0",object:[{"@gid":"24","@x":"0","@y":"210"},{"@gid":"25","@x":"70","@y":"210"}]}]},{"@level":"9","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"50","@x":"313","@y":"140"},{"@gid":"43","@x":"70","@y":"210",properties:{property:{"@name":"text","@value":"level_text_9"}}},{"@gid":"49","@x":"560","@y":"350"},{"@gid":"58","@x":"315","@y":"420"},{"@gid":"59","@x":"630","@y":"140"},{"@gid":"55","@x":"245","@y":"315"},{"@gid":"61","@x":"70","@y":"420"},{"@gid":"63","@x":"0","@y":"175"},{"@gid":"51","@x":"160","@y":"449"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"105","@y":"490"},{"@gid":"9","@x":"595","@y":"490"},{"@gid":"9","@x":"35","@y":"490"},{"@gid":"9","@x":"140","@y":"490"},{"@gid":"9","@x":"70","@y":"490"},{"@gid":"9","@x":"560","@y":"490"},{"@gid":"9","@x":"350","@y":"490"},{"@gid":"9","@x":"175","@y":"490"},{"@gid":"9","@x":"630","@y":"490"},{"@gid":"9","@x":"665","@y":"490"},{"@gid":"12","@x":"490","@y":"490"},{"@gid":"12","@x":"525","@y":"490"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"12","@x":"175","@y":"525"},{"@gid":"12","@x":"210","@y":"525"},{"@gid":"12","@x":"245","@y":"525"},{"@gid":"12","@x":"280","@y":"525"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"12","@x":"350","@y":"525"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"3","@x":"0","@y":"280"},{"@gid":"3","@x":"35","@y":"280"},{"@gid":"10","@x":"105","@y":"280"},{"@gid":"9","@x":"0","@y":"490"},{"@gid":"3","@x":"315","@y":"245"},{"@gid":"2","@x":"280","@y":"245"},{"@gid":"10","@x":"350","@y":"245"},{"@gid":"10","@x":"385","@y":"280"},{"@gid":"10","@x":"455","@y":"350"},{"@gid":"10","@x":"525","@y":"420"},{"@gid":"13","@x":"525","@y":"455"},{"@gid":"5","@x":"490","@y":"70"},{"@gid":"14","@x":"630","@y":"245"},{"@gid":"3","@x":"665","@y":"245"},{"@gid":"9","@x":"315","@y":"490"},{"@gid":"12","@x":"455","@y":"490"},{"@gid":"9","@x":"490","@y":"420"},{"@gid":"12","@x":"490","@y":"455"},{"@gid":"11","@x":"385","@y":"420"},{"@gid":"11","@x":"385","@y":"385"},{"@gid":"14","@x":"350","@y":"315"},{"@x":"0","@y":"455","@width":"700","@height":"70"},{"@x":"140","@y":"350","@width":"35","@height":"35"},{"@x":"140","@y":"385","@width":"70","@height":"35"},{"@x":"105","@y":"280","@width":"35","@height":"70"},{"@x":"0","@y":"245","@width":"140","@height":"35"},{"@x":"0","@y":"385","@width":"35","@height":"35"},{"@x":"490","@y":"385","@width":"70","@height":"70"},{"@x":"385","@y":"315","@width":"105","@height":"140"},{"@x":"350","@y":"245","@width":"70","@height":"70"},{"@x":"280","@y":"210","@width":"105","@height":"35"},{"@x":"490","@y":"35","@width":"35","@height":"140"},{"@x":"525","@y":"70","@width":"70","@height":"35"},{"@x":"560","@y":"105","@width":"35","@height":"140"},{"@x":"595","@y":"140","@width":"70","@height":"35"},{"@x":"630","@y":"175","@width":"35","@height":"70"},{"@x":"665","@y":"210","@width":"35","@height":"35"},{"@gid":"10","@x":"140","@y":"350"},{"@gid":"11","@x":"385","@y":"350"},{"@gid":"9","@x":"420","@y":"350"},{"@gid":"13","@x":"455","@y":"385"},{"@gid":"11","@x":"385","@y":"455"},{"@gid":"12","@x":"420","@y":"490"},{"@gid":"12","@x":"385","@y":"490"},{"@gid":"12","@x":"455","@y":"455"},{"@gid":"12","@x":"420","@y":"455"},{"@gid":"12","@x":"455","@y":"420"},{"@gid":"12","@x":"420","@y":"420"},{"@gid":"12","@x":"420","@y":"385"},{"@gid":"9","@x":"280","@y":"490"},{"@gid":"9","@x":"245","@y":"490"},{"@gid":"9","@x":"210","@y":"490"},{"@x":"140","@y":"315","@width":"35","@height":"35"},{"@gid":"14","@x":"140","@y":"420"},{"@gid":"4","@x":"175","@y":"420"},{"@gid":"6","@x":"105","@y":"315"},{"@gid":"14","@x":"105","@y":"350"},{"@gid":"3","@x":"70","@y":"280"},{"@gid":"6","@x":"140","@y":"385"},{"@gid":"7","@x":"560","@y":"245"},{"@gid":"7","@x":"490","@y":"175"},{"@gid":"7","@x":"420","@y":"105"},{"@x":"420","@y":"35","@width":"35","@height":"70"},{"@gid":"5","@x":"420","@y":"70"},{"@gid":"11","@x":"560","@y":"175"},{"@gid":"6","@x":"560","@y":"210"},{"@gid":"6","@x":"490","@y":"140"},{"@gid":"11","@x":"490","@y":"105"},{"@gid":"3","@x":"525","@y":"105"},{"@gid":"3","@x":"595","@y":"175"},{"@gid":"10","@x":"560","@y":"105"},{"@gid":"10","@x":"630","@y":"175"},{"@gid":"6","@x":"560","@y":"140"},{"@gid":"6","@x":"630","@y":"210"},{"@gid":"13","@x":"385","@y":"315"},{"@gid":"11","@x":"350","@y":"280"},{"@gid":"4","@x":"0","@y":"420"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"298","@y":"210"},{"@gid":"33","@x":"70","@y":"105"},{"@gid":"33","@x":"595","@y":"315"},{"@gid":"33","@x":"65","@y":"316"},{"@type":"6","@gid":"19","@x":"315","@y":"210","@rotation":"90"},{"@type":"3","@gid":"19","@x":"665","@y":"235","@rotation":"270"},{"@gid":"35","@x":"595","@y":"211"},{"@gid":"35","@x":"105","@y":"245"},{"@gid":"35","@x":"525","@y":"140"},{"@gid":"35","@x":"455","@y":"75"},{"@type":"1","@gid":"19","@x":"595","@y":"166","@rotation":"270"},{"@type":"6","@gid":"19","@x":"525","@y":"100","@rotation":"270"},{"@type":"3","@gid":"17","@x":"6","@y":"455"},{"@type":"6","@gid":"17","@x":"425","@y":"315"},{"@type":"1","@gid":"17","@x":"496","@y":"385"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"630","@y":"455"},{"@gid":"25","@x":"35","@y":"245"}]}]},{"@level":"10","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"122","@tileheight":"87",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}},{"@id":"16",image:{"@source":"Tip10Graphics.png"}}]},{"@firstgid":"18","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"35","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}},{"@id":"28",image:{"@source":"Tip6Graphics.png"}},{"@id":"29",image:{"@source":"Tip10Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"51","@x":"225","@y":"350"},{"@gid":"44","@x":"280","@y":"140",properties:{property:{"@name":"text","@value":"level_text_10"}}},{"@gid":"70","@x":"595","@y":"175"},{"@gid":"69","@x":"245","@y":"210"},{"@gid":"62","@x":"630","@y":"280"},{"@gid":"54","@x":"643","@y":"436"},{"@gid":"55","@x":"8","@y":"233"},{"@gid":"70","@x":"52","@y":"443"},{"@gid":"65","@x":"97","@y":"133"},{"@gid":"73","@x":"398","@y":"261"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"210","@y":"455"},{"@gid":"12","@x":"175","@y":"490"},{"@gid":"12","@x":"245","@y":"490"},{"@gid":"9","@x":"490","@y":"490"},{"@gid":"12","@x":"0","@y":"490"},{"@gid":"9","@x":"245","@y":"455"},{"@gid":"9","@x":"420","@y":"490"},{"@gid":"12","@x":"210","@y":"490"},{"@gid":"9","@x":"350","@y":"490"},{"@gid":"12","@x":"315","@y":"490"},{"@gid":"12","@x":"280","@y":"490"},{"@gid":"9","@x":"455","@y":"490"},{"@gid":"9","@x":"385","@y":"490"},{"@gid":"9","@x":"280","@y":"455"},{"@gid":"12","@x":"595","@y":"490"},{"@gid":"28","@x":"425","@y":"370",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"}]}},{"@gid":"28","@x":"461","@y":"371",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"}]}},{"@gid":"28","@x":"495","@y":"371",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"}]}},{"@gid":"10","@x":"315","@y":"455"},{"@gid":"5","@x":"595","@y":"455"},{"@gid":"8","@x":"175","@y":"455"},{"@gid":"9","@x":"105","@y":"490"},{"@gid":"9","@x":"70","@y":"490"},{"@gid":"9","@x":"140","@y":"490"},{"@gid":"9","@x":"35","@y":"490"},{"@gid":"10","@x":"0","@y":"455"},{"@gid":"3","@x":"0","@y":"350"},{"@gid":"3","@x":"35","@y":"350"},{"@gid":"3","@x":"70","@y":"350"},{"@gid":"3","@x":"105","@y":"350"},{"@gid":"6","@x":"140","@y":"315"},{"@gid":"6","@x":"140","@y":"280"},{"@gid":"6","@x":"140","@y":"245"},{"@gid":"4","@x":"70","@y":"280"},{"@gid":"3","@x":"35","@y":"280"},{"@gid":"3","@x":"0","@y":"280"},{"@gid":"2","@x":"35","@y":"210"},{"@gid":"8","@x":"70","@y":"175"},{"@gid":"10","@x":"140","@y":"175"},{"@gid":"9","@x":"105","@y":"175"},{"@gid":"15","@x":"70","@y":"210"},{"@gid":"15","@x":"105","@y":"210"},{"@gid":"13","@x":"140","@y":"210"},{"@gid":"3","@x":"630","@y":"210"},{"@gid":"3","@x":"665","@y":"210"},{"@gid":"3","@x":"595","@y":"210"},{"@gid":"8","@x":"560","@y":"210"},{"@gid":"7","@x":"560","@y":"245"},{"@gid":"3","@x":"385","@y":"350"},{"@gid":"3","@x":"420","@y":"350"},{"@gid":"3","@x":"455","@y":"350"},{"@gid":"3","@x":"490","@y":"350"},{"@gid":"3","@x":"525","@y":"350"},{"@gid":"3","@x":"560","@y":"350"},{"@gid":"3","@x":"595","@y":"350"},{"@gid":"3","@x":"630","@y":"350"},{"@gid":"3","@x":"665","@y":"350"},{"@x":"0","@y":"455","@width":"700","@height":"35"},{"@x":"595","@y":"420","@width":"35","@height":"35"},{"@x":"175","@y":"420","@width":"175","@height":"35"},{"@x":"0","@y":"420","@width":"35","@height":"35"},{"@x":"0","@y":"315","@width":"175","@height":"35"},{"@x":"35","@y":"175","@width":"140","@height":"35"},{"@x":"70","@y":"140","@width":"105","@height":"35"},{"@x":"140","@y":"210","@width":"35","@height":"105"},{"@x":"0","@y":"245","@width":"105","@height":"35"},{"@x":"219","@y":"210","@width":"140","@height":"35"},{"@x":"315","@y":"315","@width":"385","@height":"35"},{"@x":"560","@y":"210","@width":"35","@height":"35"},{"@x":"560","@y":"175","@width":"140","@height":"35"},{"@gid":"9","@x":"630","@y":"490"},{"@gid":"9","@x":"665","@y":"490"},{"@gid":"9","@x":"525","@y":"490"},{"@gid":"9","@x":"560","@y":"490"},{"@gid":"19","@x":"8","@y":"315"},{"@gid":"7","@x":"140","@y":"385"},{"@x":"140","@y":"350","@width":"35","@height":"35"},{"@x":"315","@y":"350","@width":"70","@height":"35"},{"@gid":"8","@x":"315","@y":"350"},{"@gid":"9","@x":"350","@y":"350"},{"@gid":"14","@x":"315","@y":"385"},{"@gid":"16","@x":"350","@y":"385"},{"@gid":"13","@x":"140","@y":"350"},{"@gid":"3","@x":"254","@y":"245"},{"@gid":"3","@x":"289","@y":"245"},{"@gid":"4","@x":"324","@y":"245"},{"@gid":"2","@x":"219","@y":"245"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"12","@x":"175","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"12","@x":"210","@y":"525"},{"@gid":"12","@x":"350","@y":"525"},{"@gid":"12","@x":"245","@y":"525"},{"@gid":"12","@x":"280","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"665","@y":"525"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"24","@x":"210","@y":"420"},{"@gid":"34","@x":"598","@y":"390"},{"@gid":"34","@x":"280","@y":"280"},{"@gid":"34","@x":"630","@y":"105"},{"@type":"3","@gid":"21","@x":"331","@y":"315"},{"@gid":"29","@x":"210","@y":"420"},{"@type":"3","@gid":"18","@x":"654","@y":"455"},{"@gid":"37","@x":"630","@y":"315"},{"@type":"1","@gid":"20","@x":"567","@y":"315"},{"@type":"1","@gid":"20","@x":"245","@y":"230","@rotation":"270"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"25","@x":"560","@y":"175"},{"@gid":"26","@x":"280","@y":"210"}]}]},{"@level":"11","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}},{"@id":"9",image:{"@source":"Plank5Graphics.png"}},{"@id":"10",image:{"@source":"Plank2Graphics.png"}}]},{"@firstgid":"45","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"0","@height":"0",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"0","@height":"0",object:[{"@gid":"52","@x":"95","@y":"66"},{"@gid":"45","@x":"171","@y":"259",properties:{property:{"@name":"text","@value":"level_text_11"}}},{"@gid":"60","@x":"526","@y":"518"},{"@gid":"65","@x":"611","@y":"506"},{"@gid":"71","@x":"455","@y":"385"},{"@gid":"70","@x":"35","@y":"280"},{"@gid":"67","@x":"647","@y":"125"},{"@gid":"54","@x":"427","@y":"455"},{"@gid":"58","@x":"280","@y":"420"},{"@gid":"56","@x":"210","@y":"429"},{"@gid":"68","@x":"630","@y":"315"}]},{"@draworder":"topdown","@name":"tiles","@width":"0","@height":"0",object:[{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"140","@y":"175"},{"@gid":"9","@x":"35","@y":"490"},{"@gid":"9","@x":"70","@y":"490"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"12","@x":"245","@y":"525"},{"@gid":"12","@x":"280","@y":"525"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"3","@x":"490","@y":"315"},{"@gid":"5","@x":"420","@y":"140"},{"@gid":"3","@x":"385","@y":"175"},{"@gid":"2","@x":"350","@y":"175"},{"@gid":"4","@x":"210","@y":"175"},{"@gid":"6","@x":"140","@y":"280"},{"@gid":"6","@x":"140","@y":"245"},{"@gid":"6","@x":"140","@y":"210"},{"@gid":"16","@x":"140","@y":"315"},{"@gid":"3","@x":"70","@y":"315"},{"@gid":"3","@x":"35","@y":"315"},{"@gid":"15","@x":"0","@y":"315"},{"@gid":"13","@x":"0","@y":"280"},{"@gid":"10","@x":"0","@y":"245"},{"@gid":"2","@x":"70","@y":"175"},{"@gid":"3","@x":"105","@y":"175"},{"@gid":"3","@x":"105","@y":"315"},{"@gid":"9","@x":"140","@y":"490"},{"@gid":"9","@x":"175","@y":"490"},{"@gid":"9","@x":"210","@y":"490"},{"@gid":"12","@x":"210","@y":"525"},{"@gid":"12","@x":"175","@y":"525"},{"@gid":"13","@x":"420","@y":"385"},{"@gid":"6","@x":"420","@y":"350"},{"@gid":"8","@x":"385","@y":"385"},{"@gid":"14","@x":"385","@y":"420"},{"@gid":"3","@x":"70","@y":"385"},{"@gid":"9","@x":"0","@y":"490"},{"@gid":"2","@x":"35","@y":"385"},{"@gid":"4","@x":"105","@y":"385"},{"@gid":"3","@x":"525","@y":"420"},{"@gid":"3","@x":"490","@y":"420"},{"@gid":"10","@x":"595","@y":"420"},{"@gid":"15","@x":"420","@y":"420"},{"@gid":"11","@x":"665","@y":"490"},{"@gid":"9","@x":"630","@y":"525"},{"@gid":"10","@x":"315","@y":"455"},{"@gid":"5","@x":"105","@y":"455"},{"@gid":"12","@x":"105","@y":"490"},{"@gid":"2","@x":"245","@y":"315"},{"@gid":"4","@x":"315","@y":"315"},{"@gid":"8","@x":"420","@y":"315"},{"@gid":"3","@x":"280","@y":"315"},{"@gid":"8","@x":"245","@y":"455"},{"@gid":"12","@x":"280","@y":"490"},{"@gid":"13","@x":"315","@y":"490"},{"@gid":"9","@x":"280","@y":"455"},{"@gid":"3","@x":"630","@y":"455"},{"@gid":"3","@x":"560","@y":"420"},{"@gid":"3","@x":"455","@y":"315"},{"@gid":"9","@x":"665","@y":"455"},{"@gid":"12","@x":"245","@y":"490"},{"@gid":"10","@x":"595","@y":"175"},{"@gid":"8","@x":"560","@y":"175"},{"@gid":"11","@x":"560","@y":"210"},{"@gid":"13","@x":"595","@y":"210"},{"@gid":"13","@x":"595","@y":"245"},{"@gid":"13","@x":"595","@y":"280"},{"@gid":"12","@x":"560","@y":"245"},{"@gid":"11","@x":"525","@y":"280"},{"@gid":"8","@x":"525","@y":"245"},{"@gid":"12","@x":"560","@y":"280"},{"@gid":"16","@x":"595","@y":"315"},{"@gid":"15","@x":"525","@y":"315"},{"@gid":"15","@x":"560","@y":"315"},{"@gid":"6","@x":"455","@y":"490"},{"@gid":"6","@x":"455","@y":"455"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"9","@x":"455","@y":"420"},{"@gid":"9","@x":"595","@y":"525"},{"@gid":"14","@x":"595","@y":"455"},{"@x":"0","@y":"455","@width":"350","@height":"70"},{"@x":"105","@y":"420","@width":"35","@height":"35"},{"@x":"245","@y":"420","@width":"105","@height":"35"},{"@x":"350","@y":"490","@width":"350","@height":"35"},{"@x":"455","@y":"420","@width":"35","@height":"70"},{"@x":"595","@y":"420","@width":"105","@height":"35"},{"@x":"665","@y":"455","@width":"35","@height":"35"},{"@x":"385","@y":"385","@width":"245","@height":"35"},{"@x":"385","@y":"350","@width":"70","@height":"35"},{"@x":"420","@y":"315","@width":"35","@height":"35"},{"@x":"420","@y":"280","@width":"210","@height":"35"},{"@x":"525","@y":"210","@width":"105","@height":"70"},{"@x":"560","@y":"140","@width":"70","@height":"70"},{"@x":"245","@y":"280","@width":"105","@height":"35"},{"@x":"35","@y":"350","@width":"105","@height":"35"},{"@x":"0","@y":"280","@width":"175","@height":"35"},{"@x":"0","@y":"210","@width":"35","@height":"70"},{"@x":"140","@y":"175","@width":"35","@height":"105"},{"@x":"70","@y":"140","@width":"175","@height":"35"},{"@x":"350","@y":"140","@width":"175","@height":"35"},{"@x":"420","@y":"105","@width":"35","@height":"35"},{"@gid":"15","@x":"420","@y":"175"},{"@gid":"3","@x":"455","@y":"175"},{"@gid":"4","@x":"490","@y":"175"},{"@gid":"3","@x":"175","@y":"175"}]},{"@draworder":"topdown","@name":"active","@width":"0","@height":"0",object:[{"@gid":"33","@x":"280","@y":"385"},{"@gid":"33","@x":"35","@y":"431"},{"@gid":"33","@x":"187","@y":"214"},{"@gid":"23","@x":"80","@y":"141"},{"@gid":"35","@x":"245","@y":"280"},{"@name":"elev2","@type":"3","@gid":"21","@x":"630","@y":"405",properties:{property:[{"@name":"distanceY","@value":"245"},{"@name":"speedY","@value":"-60"}]}},{"@gid":"28","@x":"140","@y":"455"},{"@type":"6","@gid":"19","@x":"628","@y":"315","@rotation":"180"},{"@type":"6","@gid":"17","@x":"70","@y":"350"},{"@gid":"42","@x":"410","@y":"139","@rotation":"-90"},{"@type":"3","@gid":"19","@x":"700","@y":"161","@rotation":"270"},{"@type":"3","@gid":"18","@x":"420","@y":"490"},{"@type":"5","@gid":"17","@x":"210","@y":"140"},{"@type":"5","@gid":"19","@x":"420","@y":"-23","@rotation":"90"}]},{"@draworder":"topdown","@name":"characters","@width":"0","@height":"0",object:[{"@gid":"24","@x":"525","@y":"385"},{"@gid":"25","@x":"35","@y":"280"}]}]},{"@level":"12","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"50","@x":"330","@y":"245"},{"@gid":"43","@x":"220","@y":"129",properties:{property:{"@name":"text","@value":"level_text_12"}}},{"@gid":"68","@x":"455","@y":"140"},{"@gid":"68","@x":"560","@y":"280"},{"@gid":"69","@x":"35","@y":"280"},{"@gid":"69","@x":"490","@y":"490"},{"@gid":"69","@x":"140","@y":"490"},{"@gid":"53","@x":"0","@y":"140"},{"@gid":"49","@x":"489","@y":"386"},{"@gid":"59","@x":"191","@y":"399"},{"@gid":"67","@x":"490","@y":"245"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"455","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"12","@x":"665","@y":"175"},{"@gid":"9","@x":"420","@y":"175"},{"@gid":"7","@x":"420","@y":"420"},{"@gid":"6","@x":"420","@y":"385"},{"@gid":"6","@x":"245","@y":"385"},{"@gid":"7","@x":"245","@y":"420"},{"@gid":"13","@x":"420","@y":"350"},{"@gid":"11","@x":"245","@y":"350"},{"@gid":"10","@x":"245","@y":"315"},{"@gid":"6","@x":"420","@y":"210"},{"@gid":"2","@x":"385","@y":"175"},{"@gid":"3","@x":"455","@y":"175"},{"@gid":"3","@x":"490","@y":"175"},{"@gid":"11","@x":"665","@y":"210"},{"@gid":"11","@x":"665","@y":"245"},{"@gid":"11","@x":"665","@y":"280"},{"@gid":"11","@x":"665","@y":"105"},{"@gid":"11","@x":"665","@y":"70"},{"@gid":"11","@x":"665","@y":"140"},{"@gid":"3","@x":"105","@y":"315"},{"@gid":"3","@x":"140","@y":"315"},{"@gid":"3","@x":"175","@y":"315"},{"@gid":"3","@x":"210","@y":"315"},{"@gid":"3","@x":"595","@y":"315"},{"@gid":"3","@x":"630","@y":"315"},{"@gid":"15","@x":"665","@y":"315"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"12","@x":"630","@y":"490"},{"@gid":"12","@x":"665","@y":"490"},{"@gid":"11","@x":"595","@y":"490"},{"@gid":"8","@x":"595","@y":"455"},{"@gid":"9","@x":"630","@y":"455"},{"@gid":"9","@x":"665","@y":"455"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"0","@y":"490"},{"@gid":"12","@x":"35","@y":"490"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"10","@x":"70","@y":"455"},{"@gid":"13","@x":"70","@y":"490"},{"@gid":"9","@x":"35","@y":"455"},{"@gid":"9","@x":"0","@y":"455"},{"@gid":"3","@x":"280","@y":"350"},{"@gid":"3","@x":"315","@y":"350"},{"@gid":"3","@x":"350","@y":"350"},{"@gid":"3","@x":"385","@y":"350"},{"@gid":"2","@x":"560","@y":"315"},{"@gid":"7","@x":"245","@y":"210"},{"@gid":"10","@x":"245","@y":"175"},{"@gid":"3","@x":"210","@y":"175"},{"@gid":"15","@x":"175","@y":"175"},{"@gid":"3","@x":"140","@y":"175"},{"@gid":"3","@x":"105","@y":"175"},{"@gid":"3","@x":"70","@y":"175"},{"@gid":"2","@x":"35","@y":"175"},{"@gid":"6","@x":"175","@y":"140"},{"@gid":"6","@x":"175","@y":"105"},{"@gid":"6","@x":"175","@y":"70"},{"@gid":"10","@x":"175","@y":"35"},{"@gid":"3","@x":"105","@y":"35"},{"@gid":"3","@x":"70","@y":"35"},{"@gid":"3","@x":"140","@y":"35"},{"@gid":"3","@x":"35","@y":"35"},{"@gid":"9","@x":"0","@y":"35"},{"@gid":"16","@x":"0","@y":"70"},{"@gid":"10","@x":"0","@y":"245"},{"@gid":"13","@x":"0","@y":"280"},{"@gid":"3","@x":"70","@y":"315"},{"@gid":"3","@x":"35","@y":"315"},{"@gid":"15","@x":"0","@y":"315"},{"@gid":"4","@x":"455","@y":"315"},{"@gid":"8","@x":"420","@y":"315"},{"@gid":"3","@x":"525","@y":"175"},{"@gid":"3","@x":"560","@y":"175"},{"@gid":"3","@x":"595","@y":"175"},{"@gid":"3","@x":"630","@y":"175"},{"@gid":"3","@x":"525","@y":"35"},{"@gid":"3","@x":"595","@y":"35"},{"@gid":"3","@x":"560","@y":"35"},{"@gid":"3","@x":"630","@y":"35"},{"@gid":"9","@x":"665","@y":"35"},{"@gid":"2","@x":"490","@y":"35"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"595","@y":"420","@width":"105","@height":"70"},{"@x":"0","@y":"420","@width":"105","@height":"70"},{"@x":"0","@y":"210","@width":"35","@height":"70"},{"@x":"0","@y":"280","@width":"280","@height":"35"},{"@x":"245","@y":"315","@width":"35","@height":"105"},{"@x":"280","@y":"315","@width":"140","@height":"35"},{"@x":"420","@y":"315","@width":"35","@height":"105"},{"@x":"420","@y":"280","@width":"70","@height":"35"},{"@x":"560","@y":"280","@width":"140","@height":"35"},{"@x":"665","@y":"35","@width":"35","@height":"245"},{"@x":"490","@y":"0","@width":"210","@height":"35"},{"@x":"385","@y":"140","@width":"280","@height":"35"},{"@x":"420","@y":"175","@width":"35","@height":"35"},{"@x":"35","@y":"140","@width":"245","@height":"35"},{"@x":"245","@y":"175","@width":"35","@height":"35"},{"@x":"175","@y":"35","@width":"35","@height":"105"},{"@x":"0","@y":"0","@width":"210","@height":"35"},{"@x":"0","@y":"35","@width":"35","@height":"35"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"315","@y":"315"},{"@gid":"33","@x":"340","@y":"411"},{"@gid":"33","@x":"595","@y":"210"},{"@gid":"33","@x":"630","@y":"70"},{"@type":"3","@gid":"17","@x":"625","@y":"420"},{"@type":"3","@gid":"21","@x":"490","@y":"299",properties:{property:[{"@name":"distanceY","@value":"105"},{"@name":"speedY","@value":"30"}]}},{"@gid":"31","@x":"140","@y":"490"},{"@type":"1","@gid":"17","@x":"238","@y":"140"},{"@gid":"37","@x":"630","@y":"140"},{"@gid":"2147483675","@x":"91","@y":"57",properties:{property:[{"@name":"delay","@value":"2"},{"@name":"maxAngle","@value":"150"},{"@name":"minAngle","@value":"30"},{"@name":"speedX","@value":"2"}]}},{"@gid":"35","@x":"70","@y":"391"},{"@type":"1","@gid":"19","@x":"426","@y":"490"},{"@type":"1","@gid":"19","@x":"253","@y":"490"},{"@type":"1","@gid":"19","@x":"251","@y":"280"},{"@type":"1","@gid":"19","@x":"426","@y":"280"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"525","@y":"140"},{"@gid":"25","@x":"0","@y":"420"}]}]},{"@level":"13","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"0","@height":"0",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"0","@height":"0",object:[{"@gid":"50","@x":"562","@y":"70"},{"@gid":"43","@x":"199","@y":"411",properties:{property:{"@name":"text","@value":"level_text_13"}}},{"@gid":"23","@x":"546","@y":"143"},{"@gid":"69","@x":"0","@y":"106"},{"@gid":"49","@x":"495","@y":"280"},{"@gid":"62","@x":"525","@y":"385"},{"@gid":"57","@x":"175","@y":"490"},{"@gid":"53","@x":"210","@y":"245"}]},{"@draworder":"topdown","@name":"tiles","@width":"0","@height":"0",object:[{"@gid":"3","@x":"210","@y":"315"},{"@gid":"3","@x":"350","@y":"315"},{"@gid":"3","@x":"385","@y":"315"},{"@gid":"3","@x":"420","@y":"315"},{"@gid":"7","@x":"455","@y":"350"},{"@gid":"2","@x":"525","@y":"175"},{"@gid":"3","@x":"560","@y":"175"},{"@gid":"3","@x":"140","@y":"140"},{"@gid":"5","@x":"140","@y":"280"},{"@gid":"3","@x":"315","@y":"315"},{"@gid":"3","@x":"280","@y":"315"},{"@gid":"3","@x":"245","@y":"315"},{"@gid":"5","@x":"455","@y":"280"},{"@gid":"5","@x":"105","@y":"105"},{"@gid":"5","@x":"490","@y":"105"},{"@gid":"5","@x":"175","@y":"0"},{"@gid":"5","@x":"385","@y":"0"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"7","@x":"140","@y":"350"},{"@gid":"11","@x":"140","@y":"315"},{"@gid":"3","@x":"175","@y":"315"},{"@gid":"3","@x":"560","@y":"315"},{"@gid":"3","@x":"525","@y":"315"},{"@gid":"3","@x":"490","@y":"315"},{"@gid":"4","@x":"595","@y":"315"},{"@gid":"4","@x":"595","@y":"175"},{"@gid":"3","@x":"210","@y":"140"},{"@gid":"3","@x":"315","@y":"140"},{"@gid":"3","@x":"280","@y":"140"},{"@gid":"3","@x":"245","@y":"140"},{"@gid":"3","@x":"175","@y":"140"},{"@gid":"3","@x":"350","@y":"140"},{"@gid":"3","@x":"420","@y":"140"},{"@gid":"3","@x":"385","@y":"140"},{"@gid":"3","@x":"455","@y":"140"},{"@gid":"16","@x":"490","@y":"140"},{"@gid":"16","@x":"385","@y":"35"},{"@gid":"14","@x":"175","@y":"35"},{"@gid":"3","@x":"35","@y":"140"},{"@gid":"3","@x":"0","@y":"140"},{"@gid":"3","@x":"70","@y":"140"},{"@gid":"15","@x":"105","@y":"140"},{"@gid":"3","@x":"0","@y":"315"},{"@gid":"4","@x":"35","@y":"315"},{"@gid":"8","@x":"525","@y":"455"},{"@gid":"12","@x":"455","@y":"315"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"525","@y":"420","@width":"175","@height":"70"},{"@x":"0","@y":"280","@width":"70","@height":"35"},{"@x":"140","@y":"245","@width":"35","@height":"105"},{"@x":"455","@y":"245","@width":"35","@height":"105"},{"@x":"175","@y":"280","@width":"455","@height":"35"},{"@x":"525","@y":"140","@width":"105","@height":"35"},{"@x":"0","@y":"105","@width":"525","@height":"35"},{"@x":"105","@y":"70","@width":"35","@height":"35"},{"@x":"490","@y":"70","@width":"35","@height":"35"},{"@x":"175","@y":"0","@width":"245","@height":"35"},{"@x":"175","@y":"-35","@width":"35","@height":"70"},{"@x":"385","@y":"-35","@width":"35","@height":"70"},{"@gid":"15","@x":"210","@y":"35"},{"@gid":"15","@x":"245","@y":"35"},{"@gid":"15","@x":"280","@y":"35"},{"@gid":"15","@x":"315","@y":"35"},{"@gid":"15","@x":"350","@y":"35"},{"@gid":"10","@x":"35","@y":"455"},{"@x":"0","@y":"455","@width":"140","@height":"35"},{"@x":"0","@y":"420","@width":"70","@height":"35"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"0","@y":"490"},{"@x":"490","@y":"455","@width":"105","@height":"35"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"12","@x":"630","@y":"490"},{"@gid":"12","@x":"665","@y":"490"},{"@gid":"9","@x":"630","@y":"455"},{"@gid":"9","@x":"665","@y":"455"},{"@gid":"8","@x":"490","@y":"490"},{"@gid":"12","@x":"595","@y":"490"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"10","@x":"105","@y":"490"},{"@gid":"9","@x":"70","@y":"490"},{"@gid":"12","@x":"35","@y":"490"},{"@gid":"9","@x":"0","@y":"455"},{"@gid":"9","@x":"455","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"12","@x":"525","@y":"490"},{"@gid":"12","@x":"560","@y":"490"},{"@gid":"9","@x":"595","@y":"455"},{"@gid":"9","@x":"560","@y":"455"}]},{"@draworder":"topdown","@name":"active","@width":"0","@height":"0",object:[{"@gid":"33","@x":"388","@y":"245"},{"@gid":"33","@x":"105","@y":"420"},{"@name":"k1","@type":"3","@gid":"17","@x":"14","@y":"420"},{"@name":"elev1","@type":"3","@gid":"21","@x":"70","@y":"301",properties:{property:[{"@name":"distanceY","@value":"155"},{"@name":"speedY","@value":"30"}]}},{"@gid":"27","@x":"289","@y":"162",properties:{property:[{"@name":"delay","@value":"2"},{"@name":"maxAngle","@value":"135"},{"@name":"minAngle","@value":"45"},{"@name":"speedX","@value":"2"}]}},{"@gid":"2147483674","@x":"280","@y":"280"},{"@gid":"27","@x":"322","@y":"162",properties:{property:[{"@name":"delay","@value":"2"},{"@name":"maxAngle","@value":"135"},{"@name":"minAngle","@value":"45"},{"@name":"speedX","@value":"2"}]}},{"@gid":"27","@x":"482","@y":"101",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"},{"@name":"speedX","@value":"2"}]}},{"@gid":"35","@x":"560","@y":"105"},{"@name":"elev1","@type":"1","@gid":"21","@x":"630","@y":"301",properties:{property:[{"@name":"distanceY","@value":"140"},{"@name":"speedY","@value":"-30"}]}},{"@gid":"33","@x":"275","@y":"75"},{"@type":"1","@gid":"18","@x":"679","@y":"245","@rotation":"270"},{"@gid":"30","@x":"315","@y":"490"},{"@gid":"2147483674","@x":"280","@y":"490"}]},{"@draworder":"topdown","@name":"characters","@width":"0","@height":"0",object:[{"@gid":"24","@x":"630","@y":"420"},{"@gid":"25","@x":"35","@y":"105"}]}]},{"@level":"14","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"50","@x":"330","@y":"105"},{"@gid":"43","@x":"70","@y":"315",properties:{property:{"@name":"text","@value":"level_text_14"}}},{"@gid":"49","@x":"455","@y":"245"},{"@gid":"64","@x":"376","@y":"482"},{"@gid":"58","@x":"502","@y":"520"},{"@gid":"59","@x":"630","@y":"175"},{"@gid":"63","@x":"128","@y":"390"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"105","@y":"490"},{"@gid":"9","@x":"595","@y":"525"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"140","@y":"490"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"210","@y":"490"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"490"},{"@gid":"1","@x":"560","@y":"280"},{"@gid":"1","@x":"630","@y":"293"},{"@gid":"1","@x":"665","@y":"319"},{"@gid":"10","@x":"0","@y":"315"},{"@gid":"13","@x":"0","@y":"350"},{"@gid":"9","@x":"0","@y":"525"},{"@gid":"12","@x":"280","@y":"525"},{"@gid":"12","@x":"245","@y":"525"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"12","@x":"280","@y":"490"},{"@gid":"10","@x":"315","@y":"455"},{"@gid":"13","@x":"315","@y":"490"},{"@gid":"2","@x":"385","@y":"385"},{"@gid":"3","@x":"420","@y":"385"},{"@gid":"3","@x":"455","@y":"385"},{"@gid":"3","@x":"525","@y":"385"},{"@gid":"3","@x":"490","@y":"385"},{"@gid":"10","@x":"560","@y":"385"},{"@gid":"6","@x":"560","@y":"420"},{"@gid":"7","@x":"560","@y":"455"},{"@gid":"11","@x":"665","@y":"490"},{"@gid":"8","@x":"665","@y":"455"},{"@gid":"2","@x":"595","@y":"245"},{"@gid":"3","@x":"630","@y":"245"},{"@gid":"3","@x":"665","@y":"245"},{"@gid":"14","@x":"315","@y":"315"},{"@gid":"16","@x":"350","@y":"315"},{"@gid":"14","@x":"280","@y":"245"},{"@gid":"16","@x":"385","@y":"245"},{"@gid":"12","@x":"315","@y":"245"},{"@gid":"12","@x":"350","@y":"245"},{"@gid":"10","@x":"385","@y":"210"},{"@gid":"9","@x":"350","@y":"210"},{"@gid":"9","@x":"315","@y":"210"},{"@gid":"9","@x":"280","@y":"210"},{"@gid":"2","@x":"245","@y":"210"},{"@gid":"5","@x":"140","@y":"175"},{"@gid":"16","@x":"140","@y":"210"},{"@gid":"3","@x":"70","@y":"210"},{"@gid":"3","@x":"35","@y":"210"},{"@gid":"3","@x":"0","@y":"210"},{"@gid":"16","@x":"0","@y":"140"},{"@gid":"10","@x":"0","@y":"105"},{"@gid":"5","@x":"455","@y":"455"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"6","@x":"455","@y":"490"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"245","@y":"420","@width":"105","@height":"70"},{"@x":"245","@y":"350","@width":"70","@height":"70"},{"@x":"70","@y":"420","@width":"35","@height":"70"},{"@x":"0","@y":"350","@width":"70","@height":"35"},{"@x":"0","@y":"280","@width":"35","@height":"70"},{"@x":"455","@y":"420","@width":"35","@height":"70"},{"@x":"385","@y":"350","@width":"210","@height":"35"},{"@x":"560","@y":"385","@width":"35","@height":"70"},{"@x":"665","@y":"420","@width":"35","@height":"70"},{"@x":"665","@y":"284","@width":"35","@height":"35"},{"@x":"630","@y":"257","@width":"35","@height":"35"},{"@x":"560","@y":"245","@width":"35","@height":"35"},{"@x":"595","@y":"210","@width":"105","@height":"35"},{"@x":"315","@y":"245","@width":"70","@height":"70"},{"@x":"280","@y":"210","@width":"140","@height":"35"},{"@x":"245","@y":"175","@width":"175","@height":"35"},{"@x":"0","@y":"175","@width":"175","@height":"35"},{"@x":"140","@y":"140","@width":"35","@height":"35"},{"@x":"0","@y":"70","@width":"35","@height":"70"},{"@gid":"4","@x":"525","@y":"175"},{"@gid":"2","@x":"490","@y":"175"},{"@x":"490","@y":"140","@width":"70","@height":"35"},{"@gid":"5","@x":"70","@y":"455"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"12","@x":"175","@y":"525"},{"@gid":"12","@x":"210","@y":"525"},{"@gid":"11","@x":"70","@y":"490"},{"@gid":"3","@x":"105","@y":"210"},{"@gid":"13","@x":"350","@y":"280"},{"@gid":"11","@x":"315","@y":"280"},{"@x":"105","@y":"455","@width":"175","@height":"35"},{"@gid":"11","@x":"245","@y":"420"},{"@gid":"8","@x":"245","@y":"385"},{"@gid":"10","@x":"280","@y":"385"},{"@gid":"13","@x":"280","@y":"420"},{"@gid":"11","@x":"245","@y":"455"},{"@gid":"12","@x":"280","@y":"455"},{"@gid":"12","@x":"245","@y":"490"},{"@gid":"9","@x":"630","@y":"525"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"315","@y":"175"},{"@gid":"33","@x":"111","@y":"109"},{"@gid":"33","@x":"23","@y":"457"},{"@gid":"33","@x":"618","@y":"396"},{"@gid":"39","@x":"105","@y":"455"},{"@type":"2","@gid":"20","@x":"580","@y":"280","@rotation":"180"},{"@gid":"17","@x":"466","@y":"352"},{"@type":"6","@gid":"21","@x":"175","@y":"195",properties:{property:[{"@name":"distanceY","@value":"245"},{"@name":"speedY","@value":"45"}]}},{"@gid":"27","@x":"637","@y":"314",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"}]}},{"@type":"2","@gid":"19","@x":"560","@y":"420"},{"@gid":"19","@x":"385","@y":"370","@rotation":"270"},{"@type":"2","@gid":"18","@x":"668","@y":"420"},{"@type":"6","@gid":"17","@x":"670","@y":"211"},{"@gid":"27","@x":"671","@y":"340",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"}]}},{"@gid":"15","@x":"0","@y":"385"},{"@gid":"4","@x":"35","@y":"385"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"140","@y":"455"},{"@gid":"25","@x":"0","@y":"280"}]}]},{"@level":"15","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"0","@height":"0",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"0","@height":"0",object:[{"@gid":"50","@x":"559","@y":"243"},{"@gid":"43","@x":"-10","@y":"164",properties:{property:{"@name":"text","@value":"level_text_15"}}},{"@gid":"47","@x":"630","@y":"280"},{"@gid":"46","@x":"494","@y":"286"},{"@gid":"54","@x":"105","@y":"315"},{"@gid":"69","@x":"58","@y":"490"},{"@gid":"68","@x":"525","@y":"105"},{"@gid":"66","@x":"280","@y":"245"}]},{"@draworder":"topdown","@name":"tiles","@width":"0","@height":"0",object:[{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"455","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"9","@x":"630","@y":"490"},{"@gid":"2","@x":"350","@y":"385"},{"@gid":"3","@x":"560","@y":"350"},{"@gid":"3","@x":"560","@y":"140"},{"@gid":"3","@x":"525","@y":"140"},{"@gid":"2","@x":"490","@y":"140"},{"@gid":"12","@x":"175","@y":"525"},{"@gid":"6","@x":"175","@y":"490"},{"@gid":"6","@x":"175","@y":"455"},{"@gid":"6","@x":"175","@y":"420"},{"@gid":"6","@x":"175","@y":"385"},{"@gid":"6","@x":"175","@y":"350"},{"@gid":"6","@x":"175","@y":"315"},{"@gid":"6","@x":"175","@y":"280"},{"@gid":"6","@x":"175","@y":"245"},{"@gid":"6","@x":"175","@y":"210"},{"@gid":"5","@x":"175","@y":"175"},{"@gid":"13","@x":"0","@y":"490"},{"@gid":"13","@x":"0","@y":"455"},{"@gid":"13","@x":"0","@y":"420"},{"@gid":"13","@x":"0","@y":"385"},{"@gid":"13","@x":"0","@y":"350"},{"@gid":"13","@x":"0","@y":"315"},{"@gid":"13","@x":"0","@y":"280"},{"@gid":"13","@x":"0","@y":"210"},{"@gid":"13","@x":"0","@y":"245"},{"@gid":"10","@x":"0","@y":"175"},{"@gid":"2","@x":"350","@y":"245"},{"@gid":"2","@x":"350","@y":"105"},{"@gid":"3","@x":"70","@y":"35"},{"@gid":"3","@x":"35","@y":"35"},{"@gid":"2","@x":"0","@y":"35"},{"@gid":"4","@x":"175","@y":"35"},{"@gid":"3","@x":"140","@y":"35"},{"@gid":"3","@x":"105","@y":"35"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"9","@x":"665","@y":"490"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"3","@x":"595","@y":"350"},{"@gid":"3","@x":"665","@y":"350"},{"@gid":"3","@x":"630","@y":"350"},{"@gid":"3","@x":"595","@y":"140"},{"@gid":"3","@x":"630","@y":"140"},{"@gid":"3","@x":"665","@y":"140"},{"@gid":"6","@x":"385","@y":"175"},{"@gid":"6","@x":"385","@y":"210"},{"@gid":"6","@x":"385","@y":"140"},{"@gid":"10","@x":"385","@y":"105"},{"@gid":"15","@x":"385","@y":"385"},{"@gid":"9","@x":"420","@y":"350"},{"@gid":"11","@x":"385","@y":"350"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"11","@x":"595","@y":"490"},{"@gid":"6","@x":"595","@y":"455"},{"@gid":"5","@x":"595","@y":"420"},{"@gid":"2","@x":"490","@y":"455"},{"@gid":"4","@x":"525","@y":"455"},{"@gid":"9","@x":"490","@y":"350"},{"@gid":"9","@x":"455","@y":"350"},{"@gid":"15","@x":"420","@y":"385"},{"@gid":"15","@x":"455","@y":"385"},{"@x":"0","@y":"140","@width":"35","@height":"350"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"175","@y":"140","@width":"35","@height":"350"},{"@x":"595","@y":"385","@width":"35","@height":"105"},{"@x":"630","@y":"455","@width":"70","@height":"35"},{"@x":"490","@y":"420","@width":"70","@height":"35"},{"@x":"385","@y":"315","@width":"315","@height":"35"},{"@x":"385","@y":"245","@width":"35","@height":"70"},{"@x":"350","@y":"210","@width":"35","@height":"35"},{"@x":"385","@y":"105","@width":"35","@height":"140"},{"@x":"350","@y":"70","@width":"70","@height":"35"},{"@x":"490","@y":"105","@width":"210","@height":"35"},{"@x":"0","@y":"0","@width":"210","@height":"35"},{"@gid":"6","@x":"385","@y":"315"},{"@gid":"6","@x":"385","@y":"280"},{"@gid":"13","@x":"385","@y":"245"},{"@x":"350","@y":"350","@width":"175","@height":"35"},{"@gid":"3","@x":"525","@y":"350"},{"@gid":"16","@x":"490","@y":"385"}]},{"@draworder":"topdown","@name":"active","@width":"0","@height":"0",object:[{"@gid":"23","@x":"543","@y":"315"},{"@gid":"33","@x":"6","@y":"108"},{"@gid":"33","@x":"659","@y":"420"},{"@gid":"33","@x":"245","@y":"245"},{"@gid":"39","@x":"490","@y":"105"},{"@name":"k1","@type":"1","@gid":"17","@x":"563","@y":"490"},{"@name":"door2","@type":"1","@gid":"2147483667","@x":"209","@y":"161","@rotation":"270"},{"@name":"door3","@type":"1","@gid":"19","@x":"0","@y":"210","@rotation":"90"},{"@name":"door4","@type":"1","@gid":"2147483667","@x":"209","@y":"301","@rotation":"270"},{"@name":"door5","@type":"1","@gid":"19","@x":"0","@y":"350","@rotation":"90"},{"@gid":"27","@x":"162","@y":"57",properties:{property:[{"@name":"delay","@value":"1"},{"@name":"maxAngle","@value":"100"},{"@name":"minAngle","@value":"45"},{"@name":"speedX","@value":"1"}]}},{"@gid":"27","@x":"21","@y":"57",properties:{property:[{"@name":"delay","@value":"1"},{"@name":"maxAngle","@value":"80"},{"@name":"minAngle","@value":"135"},{"@name":"speedX","@value":"1"}]}},{"@gid":"29","@x":"420","@y":"315"},{"@gid":"35","@x":"385","@y":"490"},{"@name":"door4","@type":"1","@gid":"2147483667","@x":"209","@y":"441","@rotation":"270"}]},{"@draworder":"topdown","@name":"characters","@width":"0","@height":"0",object:[{"@gid":"24","@x":"595","@y":"105"},{"@gid":"25","@x":"35","@y":"490"}]}]},{"@level":"16","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}},{"@id":"9",image:{"@source":"Plank10Graphics.png"}},{"@id":"10",image:{"@source":"Plank7Graphics.png"}}]},{"@firstgid":"45","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"52","@x":"330","@y":"140"},{"@gid":"45","@x":"70","@y":"175",properties:{property:{"@name":"text","@value":"level_text_16"}}},{"@gid":"70","@x":"245","@y":"455"},{"@gid":"66","@x":"280","@y":"385"},{"@gid":"61","@x":"630","@y":"140"},{"@gid":"49","@x":"35","@y":"245"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"105","@y":"455"},{"@gid":"9","@x":"595","@y":"490"},{"@gid":"9","@x":"490","@y":"490"},{"@gid":"9","@x":"245","@y":"490"},{"@gid":"9","@x":"35","@y":"455"},{"@gid":"9","@x":"140","@y":"455"},{"@gid":"9","@x":"525","@y":"490"},{"@gid":"9","@x":"420","@y":"490"},{"@gid":"9","@x":"210","@y":"490"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"9","@x":"70","@y":"455"},{"@gid":"9","@x":"560","@y":"490"},{"@gid":"9","@x":"455","@y":"490"},{"@gid":"9","@x":"350","@y":"490"},{"@gid":"9","@x":"280","@y":"490"},{"@gid":"9","@x":"315","@y":"490"},{"@gid":"9","@x":"0","@y":"455"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"12","@x":"175","@y":"525"},{"@gid":"12","@x":"210","@y":"525"},{"@gid":"12","@x":"245","@y":"525"},{"@gid":"12","@x":"350","@y":"525"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"12","@x":"315","@y":"525"},{"@gid":"12","@x":"280","@y":"525"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"12","@x":"490","@y":"525"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"12","@x":"385","@y":"490"},{"@gid":"5","@x":"385","@y":"455"},{"@gid":"3","@x":"315","@y":"350"},{"@gid":"3","@x":"350","@y":"350"},{"@gid":"3","@x":"385","@y":"350"},{"@gid":"16","@x":"420","@y":"350"},{"@gid":"6","@x":"420","@y":"315"},{"@gid":"6","@x":"420","@y":"280"},{"@gid":"9","@x":"315","@y":"245"},{"@gid":"8","@x":"280","@y":"245"},{"@gid":"15","@x":"315","@y":"280"},{"@gid":"14","@x":"280","@y":"280"},{"@gid":"16","@x":"350","@y":"280"},{"@gid":"9","@x":"350","@y":"245"},{"@gid":"3","@x":"385","@y":"245"},{"@gid":"16","@x":"455","@y":"245"},{"@gid":"8","@x":"420","@y":"140"},{"@gid":"7","@x":"525","@y":"210"},{"@gid":"4","@x":"0","@y":"210"},{"@x":"0","@y":"455","@width":"700","@height":"70"},{"@x":"630","@y":"385","@width":"70","@height":"35"},{"@x":"385","@y":"420","@width":"35","@height":"35"},{"@x":"175","@y":"315","@width":"280","@height":"35"},{"@x":"420","@y":"245","@width":"35","@height":"70"},{"@x":"280","@y":"245","@width":"105","@height":"35"},{"@x":"280","@y":"210","@width":"210","@height":"35"},{"@x":"420","@y":"140","@width":"70","@height":"70"},{"@x":"420","@y":"105","@width":"140","@height":"35"},{"@x":"525","@y":"140","@width":"35","@height":"70"},{"@x":"0","@y":"175","@width":"35","@height":"35"},{"@x":"105","@y":"245","@width":"35","@height":"35"},{"@gid":"12","@x":"420","@y":"245"},{"@gid":"9","@x":"455","@y":"140"},{"@gid":"11","@x":"420","@y":"175"},{"@gid":"11","@x":"420","@y":"210"},{"@gid":"13","@x":"455","@y":"210"},{"@gid":"13","@x":"455","@y":"175"},{"@gid":"2","@x":"175","@y":"350"},{"@gid":"3","@x":"210","@y":"350"},{"@gid":"3","@x":"245","@y":"350"},{"@gid":"3","@x":"280","@y":"350"},{"@x":"0","@y":"420","@width":"210","@height":"35"},{"@gid":"12","@x":"175","@y":"490"},{"@gid":"12","@x":"0","@y":"490"},{"@gid":"12","@x":"70","@y":"490"},{"@gid":"12","@x":"140","@y":"490"},{"@gid":"12","@x":"35","@y":"490"},{"@gid":"12","@x":"105","@y":"490"},{"@gid":"10","@x":"175","@y":"455"},{"@gid":"26","@x":"490","@y":"455"},{"@gid":"1","@x":"105","@y":"280"},{"@gid":"3","@x":"490","@y":"140"},{"@gid":"10","@x":"525","@y":"140"},{"@gid":"6","@x":"525","@y":"175"},{"@gid":"9","@x":"630","@y":"490"},{"@gid":"9","@x":"665","@y":"490"},{"@gid":"3","@x":"665","@y":"420"},{"@gid":"2","@x":"630","@y":"420"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"315","@y":"210"},{"@gid":"33","@x":"580","@y":"110"},{"@gid":"33","@x":"122","@y":"210"},{"@gid":"33","@x":"286","@y":"416"},{"@type":"2","@gid":"21","@x":"560","@y":"159",properties:{property:[{"@name":"distanceY","@value":"225"},{"@name":"speedY","@value":"50"}]}},{"@gid":"35","@x":"315","@y":"315"},{"@type":"1","@gid":"19","@x":"197","@y":"350","@rotation":"180"},{"@type":"3","@gid":"19","@x":"280","@y":"350"},{"@type":"3","@gid":"18","@x":"0","@y":"175"},{"@type":"4","@gid":"17","@x":"410","@y":"312","@rotation":"270"},{"@type":"1","@gid":"17","@x":"410","@y":"268","@rotation":"270"},{"@type":"4","@gid":"19","@x":"392","@y":"420"},{"@gid":"35","@x":"490","@y":"176"},{"@gid":"27","@x":"529","@y":"232",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"140"},{"@name":"minAngle","@value":"30"},{"@name":"speedX","@value":"2"}]}},{"@type":"2","@gid":"17","@x":"668","@y":"386"},{"@type":"1","@gid":"19","@x":"490","@y":"184","@rotation":"90"},{"@gid":"27","@x":"673","@y":"442",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"},{"@name":"speedX","@value":"2"}]}},{"@type":"1","@gid":"19","@x":"315","@y":"212","@rotation":"90"},{"@type":"6","@gid":"20","@x":"630","@y":"472"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"70","@y":"420"},{"@gid":"25","@x":"0","@y":"420"}]}]},{"@level":"17","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"0","@height":"0",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"0","@height":"0",object:[{"@gid":"50","@x":"227","@y":"420"},{"@gid":"43","@x":"197","@y":"113",properties:{property:{"@name":"text","@value":"level_text_17"}}},{"@gid":"68","@x":"490","@y":"175"},{"@gid":"65","@x":"14","@y":"309"},{"@gid":"59","@x":"595","@y":"385"},{"@gid":"55","@x":"257","@y":"350"},{"@gid":"54","@x":"455","@y":"350"},{"@gid":"53","@x":"385","@y":"490"},{"@gid":"62","@x":"595","@y":"420"},{"@gid":"57","@x":"140","@y":"168"},{"@gid":"67","@x":"560","@y":"105"}]},{"@draworder":"topdown","@name":"tiles","@width":"0","@height":"0",object:[{"@gid":"9","@x":"595","@y":"525"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"455","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"9","@x":"630","@y":"525"},{"@gid":"10","@x":"35","@y":"490"},{"@gid":"11","@x":"665","@y":"420"},{"@gid":"11","@x":"665","@y":"385"},{"@gid":"11","@x":"665","@y":"350"},{"@gid":"11","@x":"665","@y":"280"},{"@gid":"11","@x":"665","@y":"245"},{"@gid":"11","@x":"665","@y":"105"},{"@gid":"11","@x":"665","@y":"70"},{"@gid":"12","@x":"665","@y":"35"},{"@gid":"12","@x":"665","@y":"140"},{"@gid":"12","@x":"665","@y":"175"},{"@gid":"12","@x":"665","@y":"210"},{"@gid":"2","@x":"70","@y":"420"},{"@gid":"3","@x":"175","@y":"385"},{"@gid":"4","@x":"210","@y":"385"},{"@gid":"5","@x":"315","@y":"385"},{"@gid":"14","@x":"315","@y":"420"},{"@gid":"3","@x":"350","@y":"420"},{"@gid":"3","@x":"385","@y":"420"},{"@gid":"3","@x":"420","@y":"420"},{"@gid":"3","@x":"455","@y":"420"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"6","@x":"140","@y":"490"},{"@gid":"6","@x":"140","@y":"455"},{"@gid":"2","@x":"70","@y":"280"},{"@gid":"3","@x":"105","@y":"280"},{"@gid":"3","@x":"210","@y":"280"},{"@gid":"3","@x":"245","@y":"280"},{"@gid":"5","@x":"280","@y":"140"},{"@gid":"6","@x":"280","@y":"175"},{"@gid":"4","@x":"350","@y":"210"},{"@gid":"2","@x":"455","@y":"210"},{"@gid":"3","@x":"490","@y":"210"},{"@gid":"3","@x":"525","@y":"210"},{"@gid":"3","@x":"560","@y":"210"},{"@gid":"3","@x":"595","@y":"210"},{"@gid":"15","@x":"630","@y":"210"},{"@gid":"11","@x":"630","@y":"175"},{"@gid":"8","@x":"630","@y":"140"},{"@gid":"15","@x":"630","@y":"35"},{"@gid":"15","@x":"595","@y":"35"},{"@gid":"15","@x":"560","@y":"35"},{"@gid":"15","@x":"490","@y":"35"},{"@gid":"15","@x":"525","@y":"35"},{"@gid":"11","@x":"455","@y":"35"},{"@gid":"6","@x":"455","@y":"70"},{"@gid":"7","@x":"455","@y":"105"},{"@gid":"15","@x":"105","@y":"35"},{"@gid":"15","@x":"35","@y":"35"},{"@gid":"15","@x":"70","@y":"35"},{"@gid":"13","@x":"140","@y":"35"},{"@gid":"13","@x":"0","@y":"70"},{"@gid":"13","@x":"0","@y":"105"},{"@gid":"12","@x":"0","@y":"35"},{"@gid":"13","@x":"0","@y":"140"},{"@gid":"15","@x":"0","@y":"175"},{"@gid":"3","@x":"70","@y":"175"},{"@gid":"3","@x":"35","@y":"175"},{"@gid":"3","@x":"105","@y":"175"},{"@gid":"10","@x":"140","@y":"175"},{"@gid":"7","@x":"140","@y":"210"},{"@gid":"4","@x":"35","@y":"350"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"665","@y":"0","@width":"35","@height":"490"},{"@x":"0","@y":"455","@width":"70","@height":"35"},{"@x":"0","@y":"315","@width":"70","@height":"35"},{"@x":"0","@y":"140","@width":"175","@height":"35"},{"@x":"140","@y":"175","@width":"35","@height":"35"},{"@x":"0","@y":"35","@width":"35","@height":"105"},{"@x":"0","@y":"0","@width":"175","@height":"35"},{"@x":"140","@y":"35","@width":"35","@height":"35"},{"@x":"70","@y":"245","@width":"280","@height":"35"},{"@x":"70","@y":"385","@width":"70","@height":"35"},{"@x":"140","@y":"280","@width":"35","@height":"210"},{"@x":"315","@y":"350","@width":"35","@height":"35"},{"@x":"315","@y":"385","@width":"175","@height":"35"},{"@x":"490","@y":"280","@width":"105","@height":"35"},{"@x":"490","@y":"315","@width":"35","@height":"140"},{"@x":"455","@y":"175","@width":"210","@height":"35"},{"@x":"630","@y":"105","@width":"35","@height":"70"},{"@x":"455","@y":"0","@width":"210","@height":"35"},{"@x":"455","@y":"35","@width":"35","@height":"70"},{"@x":"280","@y":"105","@width":"35","@height":"105"},{"@x":"315","@y":"175","@width":"70","@height":"35"},{"@gid":"3","@x":"315","@y":"210"},{"@gid":"14","@x":"280","@y":"210"},{"@gid":"3","@x":"280","@y":"280"},{"@gid":"4","@x":"315","@y":"280"},{"@gid":"6","@x":"140","@y":"350"},{"@gid":"3","@x":"175","@y":"280"},{"@gid":"4","@x":"175","@y":"70"},{"@x":"175","@y":"35","@width":"35","@height":"35"},{"@gid":"14","@x":"140","@y":"70"},{"@x":"140","@y":"350","@width":"105","@height":"35"},{"@gid":"11","@x":"140","@y":"385"},{"@gid":"13","@x":"140","@y":"420"},{"@gid":"8","@x":"490","@y":"315"},{"@gid":"3","@x":"525","@y":"315"},{"@gid":"6","@x":"140","@y":"315"},{"@gid":"9","@x":"140","@y":"280"},{"@name":"switch2","@type":"1","@gid":"18","@x":"98","@y":"490"},{"@gid":"11","@x":"665","@y":"490"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"11","@x":"665","@y":"455"},{"@gid":"3","@x":"105","@y":"420"},{"@gid":"7","@x":"490","@y":"455"},{"@gid":"13","@x":"490","@y":"420"},{"@gid":"6","@x":"490","@y":"385"},{"@gid":"6","@x":"490","@y":"350"},{"@gid":"11","@x":"665","@y":"315"},{"@gid":"4","@x":"560","@y":"315"},{"@gid":"12","@x":"35","@y":"525"},{"@gid":"9","@x":"0","@y":"490"},{"@gid":"3","@x":"0","@y":"350"}]},{"@draworder":"topdown","@name":"active","@width":"0","@height":"0",object:[{"@gid":"23","@x":"210","@y":"490"},{"@gid":"33","@x":"70","@y":"105"},{"@gid":"33","@x":"630","@y":"70"},{"@gid":"33","@x":"543","@y":"362"},{"@name":"door2","@type":"1","@gid":"19","@x":"463","@y":"175"},{"@name":"switch2","@type":"6","@gid":"18","@x":"196","@y":"350"},{"@gid":"29","@x":"175","@y":"245"},{"@gid":"37","@x":"595","@y":"175"},{"@name":"door4","@type":"6","@gid":"1073741843","@x":"385","@y":"176","@rotation":"90"},{"@name":"door4","@type":"3","@gid":"1073741843","@x":"245","@y":"352","@rotation":"90"},{"@name":"k1","@type":"3","@gid":"17","@x":"455","@y":"490"},{"@gid":"28","@x":"385","@y":"385"},{"@gid":"29","@x":"560","@y":"490"}]},{"@draworder":"topdown","@name":"characters","@width":"0","@height":"0",object:[{"@gid":"24","@x":"525","@y":"175"},{"@gid":"25","@x":"70","@y":"245"}]}]},{"@level":"18","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"0","@height":"0",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"0","@height":"0",object:[{"@gid":"50","@x":"365","@y":"420"},{"@gid":"43","@x":"280","@y":"420",properties:{property:{"@name":"text","@value":"level_text_18"}}},{"@gid":"49","@x":"525","@y":"105"},{"@gid":"68","@x":"280","@y":"140"},{"@gid":"64","@x":"455","@y":"490"},{"@gid":"46","@x":"245","@y":"420"},{"@gid":"47","@x":"509","@y":"287"},{"@gid":"48","@x":"140","@y":"105"},{"@gid":"63","@x":"53","@y":"408"}]},{"@draworder":"topdown","@name":"tiles","@width":"0","@height":"0",object:[{"@gid":"9","@x":"595","@y":"525"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"455","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"9","@x":"560","@y":"245"},{"@gid":"9","@x":"245","@y":"0"},{"@gid":"9","@x":"350","@y":"0"},{"@gid":"9","@x":"140","@y":"0"},{"@gid":"8","@x":"665","@y":"420"},{"@gid":"11","@x":"665","@y":"455"},{"@gid":"11","@x":"665","@y":"490"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"630","@y":"525"},{"@gid":"9","@x":"0","@y":"525"},{"@gid":"12","@x":"70","@y":"525"},{"@gid":"12","@x":"105","@y":"525"},{"@gid":"8","@x":"70","@y":"455"},{"@gid":"11","@x":"70","@y":"490"},{"@gid":"13","@x":"105","@y":"490"},{"@gid":"13","@x":"105","@y":"455"},{"@gid":"6","@x":"105","@y":"420"},{"@gid":"6","@x":"105","@y":"385"},{"@gid":"6","@x":"105","@y":"350"},{"@gid":"4","@x":"0","@y":"385"},{"@gid":"2","@x":"70","@y":"315"},{"@gid":"8","@x":"105","@y":"245"},{"@gid":"10","@x":"140","@y":"245"},{"@gid":"11","@x":"105","@y":"280"},{"@gid":"13","@x":"140","@y":"280"},{"@gid":"12","@x":"105","@y":"315"},{"@gid":"15","@x":"140","@y":"315"},{"@gid":"7","@x":"175","@y":"385"},{"@gid":"6","@x":"175","@y":"350"},{"@gid":"9","@x":"175","@y":"315"},{"@gid":"15","@x":"245","@y":"315"},{"@gid":"3","@x":"210","@y":"315"},{"@gid":"3","@x":"280","@y":"315"},{"@gid":"3","@x":"315","@y":"315"},{"@gid":"16","@x":"350","@y":"315"},{"@gid":"6","@x":"350","@y":"280"},{"@gid":"5","@x":"350","@y":"245"},{"@gid":"6","@x":"245","@y":"280"},{"@gid":"5","@x":"245","@y":"245"},{"@gid":"6","@x":"455","@y":"280"},{"@gid":"7","@x":"455","@y":"315"},{"@gid":"8","@x":"455","@y":"245"},{"@gid":"3","@x":"490","@y":"245"},{"@gid":"3","@x":"525","@y":"245"},{"@gid":"6","@x":"560","@y":"280"},{"@gid":"6","@x":"560","@y":"315"},{"@gid":"6","@x":"560","@y":"350"},{"@gid":"7","@x":"560","@y":"385"},{"@gid":"16","@x":"595","@y":"245"},{"@gid":"6","@x":"595","@y":"210"},{"@gid":"13","@x":"595","@y":"175"},{"@gid":"10","@x":"595","@y":"140"},{"@gid":"8","@x":"560","@y":"140"},{"@gid":"15","@x":"560","@y":"175"},{"@gid":"3","@x":"525","@y":"175"},{"@gid":"3","@x":"490","@y":"175"},{"@gid":"3","@x":"455","@y":"175"},{"@gid":"3","@x":"385","@y":"175"},{"@gid":"3","@x":"420","@y":"175"},{"@gid":"3","@x":"350","@y":"175"},{"@gid":"3","@x":"280","@y":"175"},{"@gid":"3","@x":"315","@y":"175"},{"@gid":"3","@x":"245","@y":"175"},{"@gid":"3","@x":"175","@y":"175"},{"@gid":"3","@x":"210","@y":"175"},{"@gid":"3","@x":"140","@y":"175"},{"@gid":"3","@x":"105","@y":"175"},{"@gid":"14","@x":"70","@y":"175"},{"@gid":"6","@x":"70","@y":"140"},{"@gid":"6","@x":"70","@y":"105"},{"@gid":"12","@x":"35","@y":"35"},{"@gid":"12","@x":"70","@y":"35"},{"@gid":"12","@x":"0","@y":"35"},{"@gid":"15","@x":"0","@y":"70"},{"@gid":"15","@x":"35","@y":"70"},{"@gid":"13","@x":"70","@y":"70"},{"@gid":"15","@x":"105","@y":"35"},{"@gid":"15","@x":"140","@y":"35"},{"@gid":"7","@x":"245","@y":"35"},{"@gid":"14","@x":"350","@y":"35"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"665","@y":"385","@width":"35","@height":"105"},{"@x":"70","@y":"420","@width":"35","@height":"70"},{"@x":"105","@y":"315","@width":"35","@height":"175"},{"@x":"70","@y":"280","@width":"280","@height":"35"},{"@x":"105","@y":"210","@width":"70","@height":"70"},{"@x":"0","@y":"350","@width":"35","@height":"35"},{"@x":"245","@y":"210","@width":"35","@height":"70"},{"@x":"175","@y":"315","@width":"35","@height":"70"},{"@x":"350","@y":"210","@width":"35","@height":"105"},{"@x":"455","@y":"245","@width":"35","@height":"70"},{"@x":"455","@y":"210","@width":"140","@height":"35"},{"@x":"560","@y":"245","@width":"35","@height":"140"},{"@x":"595","@y":"175","@width":"35","@height":"70"},{"@x":"70","@y":"140","@width":"560","@height":"35"},{"@x":"560","@y":"105","@width":"70","@height":"35"},{"@x":"455","@y":"35","@width":"35","@height":"35"},{"@x":"350","@y":"-35","@width":"35","@height":"35"},{"@x":"350","@y":"-35","@width":"140","@height":"70"},{"@x":"245","@y":"-35","@width":"35","@height":"70"},{"@x":"0","@y":"0","@width":"105","@height":"70"},{"@x":"105","@y":"0","@width":"70","@height":"35"},{"@x":"140","@y":"-35","@width":"35","@height":"35"},{"@x":"70","@y":"70","@width":"35","@height":"70"},{"@gid":"15","@x":"385","@y":"35"},{"@gid":"15","@x":"420","@y":"35"},{"@gid":"13","@x":"455","@y":"35"},{"@gid":"7","@x":"455","@y":"70"}]},{"@draworder":"topdown","@name":"active","@width":"0","@height":"0",object:[{"@gid":"23","@x":"350","@y":"492"},{"@gid":"33","@x":"12","@y":"461"},{"@gid":"33","@x":"280","@y":"455"},{"@gid":"33","@x":"175","@y":"105"},{"@name":"k1","@type":"2","@gid":"17","@x":"245","@y":"140"},{"@gid":"35","@x":"560","@y":"455"},{"@gid":"27","@x":"586","@y":"204",properties:{property:[{"@name":"delay","@value":"2"},{"@name":"maxAngle","@value":"7"},{"@name":"minAngle","@value":"0"},{"@name":"speedX","@value":"1"}]}},{"@name":"door1","@type":"2","@gid":"1073741843","@x":"455","@y":"140"},{"@gid":"31","@x":"180","@y":"0"},{"@name":"switch1","@type":"4","@gid":"18","@x":"632","@y":"240","@rotation":"90"},{"@name":"door2","@type":"3","@gid":"1073741843","@x":"350","@y":"20","@rotation":"270"},{"@name":"door3","@type":"2","@gid":"1073741843","@x":"175","@y":"0","@rotation":"90"},{"@gid":"34","@x":"282","@y":"0"},{"@name":"k2","@type":"3","@gid":"17","@x":"385","@y":"140"},{"@gid":"35","@x":"560","@y":"488"},{"@name":"door3","@type":"2","@gid":"1073741843","@x":"70","@y":"175","@rotation":"270"},{"@name":"door3","@type":"4","@gid":"1073741843","@x":"455","@y":"233","@rotation":"270"},{"@gid":"2147483675","@x":"122","@y":"420",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"180"},{"@name":"minAngle","@value":"180"},{"@name":"speedX","@value":"1"}]}},{"@gid":"2147483675","@x":"122","@y":"490",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"180"},{"@name":"minAngle","@value":"180"},{"@name":"speedX","@value":"1"}]}},{"@gid":"2147483675","@x":"122","@y":"455",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"180"},{"@name":"minAngle","@value":"180"},{"@name":"speedX","@value":"1"}]}},{"@name":"door1","@type":"4","@gid":"1073741843","@x":"181","@y":"443"},{"@name":"door1","@type":"4","@gid":"1073741843","@x":"201","@y":"441","@rotation":"180"}]},{"@draworder":"topdown","@name":"characters","@width":"0","@height":"0",object:[{"@gid":"24","@x":"299","@y":"140"},{"@gid":"25","@x":"11","@y":"152"}]}]},{"@level":"19","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"0","@height":"0",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"0","@height":"0",object:[{"@gid":"50","@x":"507","@y":"420"},{"@gid":"43","@x":"460","@y":"135",properties:{property:{"@name":"text","@value":"level_text_19"}}},{"@gid":"66","@x":"350","@y":"175"},{"@gid":"47","@x":"490","@y":"70"},{"@gid":"46","@x":"315","@y":"455"},{"@gid":"49","@x":"245","@y":"315"},{"@gid":"48","@x":"105","@y":"105"},{"@gid":"59","@x":"455","@y":"350"},{"@gid":"58","@x":"105","@y":"490"},{"@gid":"53","@x":"595","@y":"490"},{"@gid":"70","@x":"455","@y":"210"}]},{"@draworder":"topdown","@name":"tiles","@width":"0","@height":"0",object:[{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"595","@y":"525"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"560","@y":"525"},{"@gid":"9","@x":"455","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"1","@x":"35","@y":"420"},{"@gid":"9","@x":"665","@y":"350"},{"@gid":"7","@x":"175","@y":"455"},{"@gid":"6","@x":"175","@y":"420"},{"@gid":"6","@x":"175","@y":"385"},{"@gid":"13","@x":"175","@y":"350"},{"@gid":"5","@x":"175","@y":"315"},{"@gid":"3","@x":"140","@y":"350"},{"@gid":"3","@x":"105","@y":"350"},{"@gid":"14","@x":"70","@y":"350"},{"@gid":"10","@x":"70","@y":"315"},{"@gid":"3","@x":"35","@y":"315"},{"@gid":"3","@x":"0","@y":"315"},{"@gid":"7","@x":"385","@y":"420"},{"@gid":"8","@x":"385","@y":"385"},{"@gid":"3","@x":"420","@y":"385"},{"@gid":"3","@x":"455","@y":"385"},{"@gid":"3","@x":"490","@y":"385"},{"@gid":"3","@x":"525","@y":"385"},{"@gid":"3","@x":"560","@y":"385"},{"@gid":"3","@x":"595","@y":"385"},{"@gid":"8","@x":"630","@y":"350"},{"@gid":"12","@x":"665","@y":"385"},{"@gid":"15","@x":"630","@y":"385"},{"@gid":"11","@x":"665","@y":"420"},{"@gid":"11","@x":"665","@y":"455"},{"@gid":"11","@x":"665","@y":"490"},{"@gid":"9","@x":"630","@y":"525"},{"@gid":"4","@x":"35","@y":"245"},{"@gid":"3","@x":"0","@y":"245"},{"@gid":"2","@x":"70","@y":"175"},{"@gid":"3","@x":"105","@y":"175"},{"@gid":"4","@x":"175","@y":"245"},{"@gid":"14","@x":"140","@y":"245"},{"@gid":"6","@x":"140","@y":"210"},{"@gid":"13","@x":"140","@y":"175"},{"@gid":"6","@x":"140","@y":"105"},{"@gid":"6","@x":"140","@y":"140"},{"@gid":"11","@x":"140","@y":"70"},{"@gid":"6","@x":"140","@y":"35"},{"@gid":"3","@x":"175","@y":"70"},{"@gid":"3","@x":"210","@y":"70"},{"@gid":"4","@x":"245","@y":"70"},{"@gid":"3","@x":"245","@y":"175"},{"@gid":"2","@x":"210","@y":"175"},{"@gid":"3","@x":"280","@y":"175"},{"@gid":"4","@x":"315","@y":"175"},{"@gid":"3","@x":"455","@y":"245"},{"@gid":"3","@x":"490","@y":"245"},{"@gid":"4","@x":"525","@y":"245"},{"@gid":"2","@x":"420","@y":"245"},{"@gid":"3","@x":"665","@y":"245"},{"@gid":"2","@x":"630","@y":"245"},{"@gid":"6","@x":"420","@y":"35"},{"@gid":"7","@x":"420","@y":"70"},{"@gid":"9","@x":"0","@y":"525"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"665","@y":"385","@width":"35","@height":"105"},{"@x":"385","@y":"350","@width":"315","@height":"35"},{"@x":"630","@y":"315","@width":"70","@height":"35"},{"@x":"385","@y":"385","@width":"35","@height":"35"},{"@x":"0","@y":"280","@width":"105","@height":"35"},{"@x":"70","@y":"315","@width":"105","@height":"35"},{"@x":"175","@y":"280","@width":"35","@height":"175"},{"@x":"35","@y":"385","@width":"35","@height":"35"},{"@x":"0","@y":"210","@width":"70","@height":"35"},{"@x":"70","@y":"140","@width":"70","@height":"35"},{"@x":"140","@y":"0","@width":"35","@height":"245"},{"@x":"175","@y":"210","@width":"35","@height":"35"},{"@x":"210","@y":"140","@width":"140","@height":"35"},{"@x":"175","@y":"35","@width":"105","@height":"35"},{"@x":"420","@y":"0","@width":"35","@height":"70"},{"@x":"420","@y":"210","@width":"140","@height":"35"},{"@x":"630","@y":"210","@width":"70","@height":"35"}]},{"@draworder":"topdown","@name":"active","@width":"0","@height":"0",object:[{"@gid":"23","@x":"490","@y":"492"},{"@gid":"33","@x":"665","@y":"280"},{"@gid":"33","@x":"22","@y":"362"},{"@gid":"33","@x":"14","@y":"75"},{"@type":"6","@gid":"21","@x":"560","@y":"230",properties:{property:[{"@name":"distanceY","@value":"108"},{"@name":"speedY","@value":"30"}]}},{"@gid":"35","@x":"630","@y":"196"},{"@gid":"35","@x":"664","@y":"196"},{"@gid":"35","@x":"663","@y":"162"},{"@gid":"35","@x":"595","@y":"195"},{"@gid":"35","@x":"629","@y":"161"},{"@type":"2","@gid":"20","@x":"435","@y":"210"},{"@gid":"2147483675","@x":"245","@y":"93",properties:{property:[{"@name":"delay","@value":"2"},{"@name":"maxAngle","@value":"180"},{"@name":"minAngle","@value":"90"},{"@name":"speedX","@value":"1"}]}},{"@type":"2","@gid":"20","@x":"435","@y":"140"},{"@type":"1","@gid":"17","@x":"665","@y":"210"},{"@type":"1","@gid":"19","@x":"140","@y":"210","@rotation":"90"},{"@type":"3","@gid":"17","@x":"4","@y":"490"},{"@type":"6","@gid":"17","@x":"140","@y":"315"},{"@type":"3","@gid":"20","@x":"392","@y":"490"},{"@gid":"29","@x":"210","@y":"490"}]},{"@draworder":"topdown","@name":"characters","@width":"0","@height":"0",object:[{"@gid":"24","@x":"525","@y":"210"},{"@gid":"25","@x":"0","@y":"210"}]}]},{"@level":"20","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}},{"@id":"9",image:{"@source":"Plank4Graphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"51","@x":"295","@y":"280"},{"@gid":"44","@x":"332","@y":"309",properties:{property:{"@name":"text","@value":"level_text_20"}}},{"@gid":"70","@x":"140","@y":"315"},{"@gid":"65","@x":"175","@y":"490"},{"@gid":"66","@x":"420","@y":"455"},{"@gid":"64","@x":"560","@y":"105"},{"@gid":"48","@x":"455","@y":"70"},{"@gid":"47","@x":"525","@y":"175"},{"@gid":"68","@x":"154","@y":"259"}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"595","@y":"490"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"140","@y":"525"},{"@gid":"9","@x":"525","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"350","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"27","@x":"637","@y":"56",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"},{"@name":"speedX","@value":"1"}]}},{"@gid":"9","@x":"630","@y":"490"},{"@gid":"11","@x":"665","@y":"455"},{"@gid":"8","@x":"665","@y":"420"},{"@gid":"13","@x":"0","@y":"490"},{"@gid":"13","@x":"0","@y":"455"},{"@gid":"13","@x":"0","@y":"420"},{"@gid":"13","@x":"0","@y":"385"},{"@gid":"13","@x":"0","@y":"315"},{"@gid":"13","@x":"0","@y":"280"},{"@gid":"13","@x":"0","@y":"245"},{"@gid":"13","@x":"0","@y":"210"},{"@gid":"13","@x":"0","@y":"175"},{"@gid":"13","@x":"0","@y":"140"},{"@gid":"12","@x":"0","@y":"350"},{"@gid":"3","@x":"35","@y":"350"},{"@gid":"3","@x":"70","@y":"350"},{"@gid":"3","@x":"105","@y":"350"},{"@gid":"3","@x":"140","@y":"350"},{"@gid":"3","@x":"175","@y":"350"},{"@gid":"10","@x":"210","@y":"350"},{"@gid":"14","@x":"210","@y":"385"},{"@gid":"3","@x":"315","@y":"385"},{"@gid":"3","@x":"385","@y":"385"},{"@gid":"3","@x":"350","@y":"385"},{"@gid":"3","@x":"280","@y":"385"},{"@gid":"3","@x":"245","@y":"385"},{"@gid":"15","@x":"420","@y":"385"},{"@gid":"8","@x":"420","@y":"350"},{"@gid":"10","@x":"455","@y":"350"},{"@gid":"16","@x":"455","@y":"385"},{"@gid":"4","@x":"595","@y":"350"},{"@gid":"6","@x":"560","@y":"315"},{"@gid":"6","@x":"560","@y":"280"},{"@gid":"4","@x":"595","@y":"210"},{"@gid":"9","@x":"560","@y":"210"},{"@gid":"3","@x":"455","@y":"210"},{"@gid":"3","@x":"420","@y":"210"},{"@gid":"3","@x":"525","@y":"210"},{"@gid":"3","@x":"385","@y":"210"},{"@gid":"3","@x":"490","@y":"210"},{"@gid":"16","@x":"385","@y":"140"},{"@gid":"8","@x":"315","@y":"105"},{"@gid":"9","@x":"350","@y":"105"},{"@gid":"10","@x":"385","@y":"105"},{"@gid":"3","@x":"665","@y":"35"},{"@gid":"2","@x":"630","@y":"35"},{"@gid":"6","@x":"245","@y":"140"},{"@gid":"6","@x":"245","@y":"105"},{"@gid":"6","@x":"245","@y":"70"},{"@gid":"6","@x":"245","@y":"35"},{"@gid":"9","@x":"210","@y":"175"},{"@gid":"8","@x":"175","@y":"175"},{"@gid":"14","@x":"175","@y":"210"},{"@gid":"13","@x":"245","@y":"210"},{"@gid":"14","@x":"210","@y":"245"},{"@gid":"16","@x":"70","@y":"105"},{"@gid":"15","@x":"35","@y":"105"},{"@gid":"12","@x":"0","@y":"105"},{"@gid":"12","@x":"0","@y":"70"},{"@gid":"12","@x":"0","@y":"35"},{"@gid":"12","@x":"35","@y":"35"},{"@gid":"12","@x":"35","@y":"70"},{"@gid":"12","@x":"70","@y":"35"},{"@gid":"13","@x":"70","@y":"70"},{"@gid":"15","@x":"105","@y":"35"},{"@gid":"16","@x":"140","@y":"35"},{"@gid":"12","@x":"385","@y":"525"},{"@gid":"12","@x":"455","@y":"525"},{"@gid":"12","@x":"420","@y":"525"},{"@gid":"8","@x":"385","@y":"490"},{"@gid":"10","@x":"455","@y":"490"},{"@gid":"9","@x":"420","@y":"490"},{"@gid":"2","@x":"665","@y":"280"},{"@gid":"2","@x":"245","@y":"455"},{"@gid":"3","@x":"280","@y":"455"},{"@gid":"4","@x":"315","@y":"455"},{"@gid":"7","@x":"140","@y":"455"},{"@gid":"5","@x":"140","@y":"420"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"5","@x":"560","@y":"455"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"665","@y":"385","@width":"35","@height":"105"},{"@x":"560","@y":"420","@width":"35","@height":"70"},{"@x":"385","@y":"455","@width":"105","@height":"35"},{"@x":"245","@y":"420","@width":"105","@height":"35"},{"@x":"140","@y":"385","@width":"35","@height":"70"},{"@x":"0","@y":"0","@width":"35","@height":"490"},{"@x":"35","@y":"35","@width":"70","@height":"70"},{"@x":"35","@y":"0","@width":"140","@height":"35"},{"@x":"245","@y":"0","@width":"35","@height":"140"},{"@x":"175","@y":"140","@width":"105","@height":"70"},{"@x":"210","@y":"210","@width":"70","@height":"35"},{"@x":"315","@y":"175","@width":"315","@height":"35"},{"@x":"665","@y":"245","@width":"35","@height":"35"},{"@x":"630","@y":"0","@width":"70","@height":"35"},{"@x":"315","@y":"70","@width":"105","@height":"70"},{"@x":"35","@y":"315","@width":"210","@height":"35"},{"@x":"210","@y":"350","@width":"280","@height":"35"},{"@x":"420","@y":"315","@width":"70","@height":"35"},{"@x":"560","@y":"210","@width":"35","@height":"140"},{"@x":"595","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"245","@y":"175"},{"@gid":"16","@x":"245","@y":"245"},{"@gid":"12","@x":"210","@y":"210"},{"@gid":"11","@x":"315","@y":"140"},{"@gid":"14","@x":"315","@y":"210"},{"@x":"315","@y":"140","@width":"70","@height":"35"},{"@x":"595","@y":"455","@width":"70","@height":"35"},{"@gid":"11","@x":"560","@y":"490"},{"@gid":"12","@x":"595","@y":"525"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"665","@y":"490"},{"@gid":"14","@x":"560","@y":"350"},{"@gid":"6","@x":"560","@y":"245"},{"@gid":"15","@x":"350","@y":"210"},{"@gid":"11","@x":"315","@y":"175"},{"@gid":"13","@x":"350","@y":"175"},{"@gid":"12","@x":"350","@y":"140"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"280","@y":"350"},{"@gid":"33","@x":"145","@y":"381"},{"@gid":"33","@x":"350","@y":"35"},{"@gid":"33","@x":"58","@y":"283"},{"@type":"2","@gid":"17","@x":"197","@y":"140"},{"@type":"3","@gid":"21","@x":"490","@y":"477",properties:{property:[{"@name":"distanceY","@value":"142"},{"@name":"speedY","@value":"-45"}]}},{"@gid":"35","@x":"105","@y":"490"},{"@gid":"17","@x":"319","@y":"420"},{"@gid":"19","@x":"357","@y":"560"},{"@type":"5","@gid":"17","@x":"58","@y":"116","@rotation":"180"},{"@type":"6","@gid":"19","@x":"105","@y":"65","@rotation":"270"},{"@type":"5","@gid":"19","@x":"35","@y":"134","@rotation":"270"},{"@type":"4","@gid":"21","@x":"105","@y":"90",properties:{property:[{"@name":"distanceY","@value":"135"},{"@name":"speedY","@value":"30"}]}},{"@type":"4","@gid":"17","@x":"58","@y":"316"},{"@type":"6","@gid":"17","@x":"145","@y":"46","@rotation":"180"},{"@type":"4","@gid":"21","@x":"35","@y":"231",properties:{property:[{"@name":"distanceY","@value":"70"},{"@name":"speedY","@value":"-30"}]}},{"@type":"2","@gid":"19","@x":"350","@y":"175","@rotation":"270"},{"@type":"3","@gid":"17","@x":"600","@y":"315"},{"@type":"3","@gid":"19","@x":"490","@y":"324","@rotation":"90"},{"@gid":"35","@x":"385","@y":"175"},{"@gid":"29","@x":"420","@y":"175"},{"@gid":"32","@x":"630","@y":"175"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"315","@y":"350"},{"@gid":"25","@x":"35","@y":"490"}]}]},{"@level":"21","@version":"1.0","@orientation":"orthogonal","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@source":"singleTile.png"}},{"@id":"1",image:{"@source":"platformLeft.png"}},{"@id":"2",image:{"@source":"platformCenter.png"}},{"@id":"3",image:{"@source":"platformRight.png"}},{"@id":"4",image:{"@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@source":"tileTopLeft.png"}},{"@id":"8",image:{"@source":"tileTopCenter.png"}},{"@id":"9",image:{"@source":"tileTopRight.png"}},{"@id":"10",image:{"@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@source":"tileCenter.png"}},{"@id":"12",image:{"@source":"tileCenterRight.png"}},{"@id":"13",image:{"@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73",tile:[{"@id":"0",image:{"@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@source":"DoorGraphics.png"}},{"@id":"3",image:{"@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@source":"ExitGraphics.png"}},{"@id":"7",image:{"@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@source":"NicheGraphics.png"}},{"@id":"10",image:{"@source":"CameraGraphics.png"}},{"@id":"11",image:{"@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@source":"BurgerGraphics.png"}}]},{"@firstgid":"34","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@source":"BoxGraphics.png"}},{"@id":"2",image:{"@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@source":"StoolGraphics.png"}},{"@id":"6",image:{"@source":"PlankGraphics.png"}},{"@id":"7",image:{"@source":"Plank2Graphics.png"}},{"@id":"8",image:{"@source":"BigPlankGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"135",tile:[{"@id":"0",image:{"@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background","@width":"20","@height":"15",image:{"@source":"Background1Graphics.png"}},objectgroup:[{"@draworder":"topdown","@name":"decorations","@width":"20","@height":"15",object:[{"@gid":"50","@x":"330","@y":"245"},{"@gid":"43","@x":"234","@y":"256",properties:{property:{"@name":"text","@value":"level_text_21"}}}]},{"@draworder":"topdown","@name":"tiles","@width":"20","@height":"15",object:[{"@gid":"9","@x":"105","@y":"525"},{"@gid":"9","@x":"595","@y":"525"},{"@gid":"9","@x":"490","@y":"525"},{"@gid":"9","@x":"385","@y":"525"},{"@gid":"9","@x":"315","@y":"525"},{"@gid":"9","@x":"245","@y":"525"},{"@gid":"9","@x":"35","@y":"525"},{"@gid":"9","@x":"420","@y":"525"},{"@gid":"9","@x":"210","@y":"525"},{"@gid":"12","@x":"0","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"9","@x":"70","@y":"525"},{"@gid":"9","@x":"455","@y":"525"},{"@gid":"9","@x":"175","@y":"525"},{"@gid":"9","@x":"280","@y":"525"},{"@gid":"12","@x":"0","@y":"350"},{"@gid":"9","@x":"560","@y":"175"},{"@gid":"12","@x":"665","@y":"175"},{"@gid":"12","@x":"175","@y":"140"},{"@gid":"9","@x":"210","@y":"315"},{"@gid":"9","@x":"630","@y":"525"},{"@gid":"12","@x":"525","@y":"525"},{"@gid":"12","@x":"560","@y":"525"},{"@gid":"8","@x":"525","@y":"490"},{"@gid":"10","@x":"560","@y":"490"},{"@gid":"11","@x":"665","@y":"490"},{"@gid":"11","@x":"665","@y":"455"},{"@gid":"8","@x":"665","@y":"420"},{"@gid":"2","@x":"455","@y":"420"},{"@gid":"4","@x":"490","@y":"420"},{"@gid":"12","@x":"350","@y":"525"},{"@gid":"12","@x":"140","@y":"525"},{"@gid":"13","@x":"0","@y":"490"},{"@gid":"13","@x":"0","@y":"455"},{"@gid":"13","@x":"0","@y":"420"},{"@gid":"13","@x":"0","@y":"385"},{"@gid":"6","@x":"140","@y":"490"},{"@gid":"5","@x":"140","@y":"455"},{"@gid":"7","@x":"245","@y":"455"},{"@gid":"6","@x":"245","@y":"420"},{"@gid":"6","@x":"245","@y":"385"},{"@gid":"12","@x":"245","@y":"350"},{"@gid":"3","@x":"280","@y":"350"},{"@gid":"3","@x":"315","@y":"350"},{"@gid":"3","@x":"350","@y":"350"},{"@gid":"3","@x":"385","@y":"350"},{"@gid":"3","@x":"420","@y":"350"},{"@gid":"3","@x":"455","@y":"350"},{"@gid":"3","@x":"490","@y":"350"},{"@gid":"3","@x":"525","@y":"350"},{"@gid":"3","@x":"560","@y":"350"},{"@gid":"4","@x":"630","@y":"350"},{"@gid":"1","@x":"455","@y":"280"},{"@gid":"10","@x":"245","@y":"315"},{"@gid":"15","@x":"210","@y":"350"},{"@gid":"15","@x":"175","@y":"350"},{"@gid":"15","@x":"140","@y":"350"},{"@gid":"3","@x":"70","@y":"350"},{"@gid":"3","@x":"35","@y":"350"},{"@gid":"3","@x":"105","@y":"350"},{"@gid":"13","@x":"0","@y":"315"},{"@gid":"13","@x":"0","@y":"245"},{"@gid":"13","@x":"0","@y":"280"},{"@gid":"13","@x":"0","@y":"210"},{"@gid":"13","@x":"0","@y":"175"},{"@gid":"13","@x":"0","@y":"105"},{"@gid":"13","@x":"0","@y":"140"},{"@gid":"13","@x":"0","@y":"70"},{"@gid":"13","@x":"0","@y":"35"},{"@gid":"11","@x":"140","@y":"315"},{"@gid":"12","@x":"175","@y":"315"},{"@gid":"8","@x":"140","@y":"280"},{"@gid":"10","@x":"175","@y":"280"},{"@gid":"15","@x":"490","@y":"175"},{"@gid":"15","@x":"525","@y":"175"},{"@gid":"6","@x":"560","@y":"210"},{"@gid":"7","@x":"560","@y":"245"},{"@gid":"5","@x":"350","@y":"455"},{"@gid":"6","@x":"350","@y":"490"},{"@gid":"14","@x":"665","@y":"245"},{"@gid":"11","@x":"665","@y":"210"},{"@gid":"11","@x":"665","@y":"140"},{"@gid":"11","@x":"665","@y":"105"},{"@gid":"11","@x":"665","@y":"35"},{"@gid":"11","@x":"665","@y":"70"},{"@gid":"3","@x":"630","@y":"175"},{"@gid":"3","@x":"595","@y":"175"},{"@gid":"10","@x":"525","@y":"140"},{"@gid":"11","@x":"490","@y":"140"},{"@gid":"5","@x":"490","@y":"105"},{"@gid":"14","@x":"350","@y":"70"},{"@gid":"16","@x":"385","@y":"70"},{"@gid":"11","@x":"350","@y":"35"},{"@gid":"13","@x":"385","@y":"35"},{"@gid":"15","@x":"245","@y":"175"},{"@gid":"15","@x":"210","@y":"175"},{"@gid":"15","@x":"175","@y":"175"},{"@gid":"15","@x":"140","@y":"175"},{"@gid":"2","@x":"105","@y":"175"},{"@gid":"3","@x":"280","@y":"175"},{"@gid":"3","@x":"315","@y":"175"},{"@gid":"3","@x":"350","@y":"175"},{"@gid":"3","@x":"385","@y":"175"},{"@gid":"3","@x":"420","@y":"175"},{"@gid":"3","@x":"455","@y":"175"},{"@gid":"10","@x":"245","@y":"140"},{"@gid":"9","@x":"210","@y":"140"},{"@gid":"10","@x":"175","@y":"105"},{"@gid":"8","@x":"140","@y":"105"},{"@gid":"11","@x":"140","@y":"140"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"0","@y":"0","@width":"35","@height":"490"},{"@x":"140","@y":"420","@width":"35","@height":"70"},{"@x":"350","@y":"420","@width":"35","@height":"70"},{"@x":"525","@y":"455","@width":"70","@height":"35"},{"@x":"665","@y":"385","@width":"35","@height":"105"},{"@x":"455","@y":"385","@width":"70","@height":"35"},{"@x":"245","@y":"350","@width":"35","@height":"105"},{"@x":"35","@y":"315","@width":"630","@height":"35"},{"@x":"140","@y":"280","@width":"140","@height":"35"},{"@x":"140","@y":"245","@width":"70","@height":"35"},{"@x":"665","@y":"0","@width":"35","@height":"245"},{"@x":"560","@y":"175","@width":"35","@height":"70"},{"@x":"105","@y":"140","@width":"560","@height":"35"},{"@x":"490","@y":"105","@width":"70","@height":"35"},{"@x":"490","@y":"70","@width":"35","@height":"35"},{"@x":"140","@y":"105","@width":"140","@height":"35"},{"@x":"140","@y":"70","@width":"70","@height":"35"},{"@x":"350","@y":"0","@width":"70","@height":"70"},{"@x":"455","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"350"}]},{"@draworder":"topdown","@name":"active","@width":"20","@height":"15",object:[{"@gid":"23","@x":"315","@y":"315"},{"@gid":"33","@x":"455","@y":"35"},{"@gid":"33","@x":"420","@y":"70"},{"@gid":"33","@x":"595","@y":"35"},{"@gid":"39","@x":"490","@y":"385"},{"@gid":"17","@x":"105","@y":"315"},{"@type":"5","@gid":"17","@x":"494","@y":"490"},{"@type":"5","@gid":"19","@x":"525","@y":"455","@rotation":"90"},{"@gid":"33","@x":"70","@y":"385"},{"@gid":"33","@x":"245","@y":"490"},{"@gid":"33","@x":"420","@y":"455"},{"@gid":"33","@x":"210","@y":"455"},{"@gid":"33","@x":"35","@y":"420"},{"@gid":"33","@x":"315","@y":"420"},{"@gid":"33","@x":"350","@y":"385"},{"@gid":"33","@x":"385","@y":"420"},{"@gid":"33","@x":"175","@y":"420"},{"@gid":"33","@x":"175","@y":"490"},{"@gid":"33","@x":"140","@y":"385"},{"@gid":"33","@x":"105","@y":"490"},{"@gid":"33","@x":"280","@y":"455"},{"@gid":"33","@x":"105","@y":"420"},{"@gid":"33","@x":"210","@y":"385"},{"@gid":"33","@x":"315","@y":"490"},{"@gid":"33","@x":"280","@y":"385"},{"@type":"1","@gid":"19","@x":"35","@y":"140","@rotation":"90"},{"@gid":"33","@x":"490","@y":"455"},{"@gid":"33","@x":"560","@y":"455"},{"@gid":"33","@x":"525","@y":"420"},{"@gid":"33","@x":"560","@y":"385"},{"@gid":"33","@x":"595","@y":"420"},{"@gid":"33","@x":"630","@y":"455"},{"@gid":"33","@x":"630","@y":"385"},{"@gid":"33","@x":"665","@y":"350"},{"@gid":"33","@x":"665","@y":"280"},{"@gid":"33","@x":"630","@y":"315"},{"@gid":"33","@x":"595","@y":"280"},{"@gid":"33","@x":"630","@y":"245"},{"@gid":"33","@x":"595","@y":"210"},{"@gid":"33","@x":"560","@y":"315"},{"@gid":"33","@x":"525","@y":"280"},{"@gid":"33","@x":"490","@y":"315"},{"@gid":"33","@x":"490","@y":"245"},{"@gid":"33","@x":"525","@y":"210"},{"@gid":"33","@x":"455","@y":"210"},{"@gid":"33","@x":"420","@y":"315"},{"@gid":"33","@x":"630","@y":"70"},{"@gid":"33","@x":"560","@y":"70"},{"@gid":"33","@x":"525","@y":"35"},{"@gid":"33","@x":"490","@y":"70"},{"@gid":"33","@x":"525","@y":"105"},{"@gid":"33","@x":"560","@y":"140"},{"@gid":"33","@x":"455","@y":"105"},{"@gid":"33","@x":"420","@y":"140"},{"@gid":"33","@x":"420","@y":"245"},{"@gid":"33","@x":"385","@y":"280"},{"@gid":"33","@x":"280","@y":"280"},{"@gid":"33","@x":"385","@y":"105"},{"@gid":"33","@x":"350","@y":"140"},{"@gid":"33","@x":"315","@y":"105"},{"@gid":"33","@x":"280","@y":"140"},{"@gid":"33","@x":"280","@y":"70"},{"@gid":"33","@x":"315","@y":"35"},{"@gid":"33","@x":"245","@y":"35"},{"@gid":"33","@x":"245","@y":"105"},{"@gid":"33","@x":"210","@y":"70"},{"@gid":"33","@x":"175","@y":"35"},{"@gid":"33","@x":"140","@y":"70"},{"@gid":"33","@x":"105","@y":"105"},{"@gid":"33","@x":"70","@y":"140"},{"@gid":"33","@x":"35","@y":"105"},{"@gid":"33","@x":"70","@y":"70"},{"@gid":"33","@x":"210","@y":"280"},{"@gid":"33","@x":"245","@y":"245"},{"@gid":"33","@x":"280","@y":"210"},{"@gid":"33","@x":"210","@y":"210"},{"@gid":"33","@x":"175","@y":"245"},{"@gid":"33","@x":"140","@y":"210"},{"@gid":"33","@x":"105","@y":"245"},{"@gid":"33","@x":"70","@y":"210"},{"@gid":"33","@x":"35","@y":"245"},{"@gid":"33","@x":"70","@y":"280"},{"@gid":"33","@x":"35","@y":"315"},{"@gid":"33","@x":"385","@y":"490"},{"@gid":"33","@x":"420","@y":"385"},{"@gid":"33","@x":"105","@y":"315"},{"@gid":"35","@x":"455","@y":"490"}]},{"@draworder":"topdown","@name":"characters","@width":"20","@height":"15",object:[{"@gid":"24","@x":"595","@y":"140"},{"@gid":"25","@x":"35","@y":"490"}]}]}],e}(),Objects=function(){function e(){}return e.data={frames:[{filename:"BackButton0000",frame:{x:1032,y:2279,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.7,y:.2,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"BackButton0001",frame:{x:2488,y:2286,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.7,y:.2,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"BackButton0002",frame:{x:2937,y:2289,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.7,y:.2,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"Background1Graphics0000",frame:{x:1412,y:3,w:700,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:700,h:525},sourceSize:{w:700,h:525}},{filename:"BasketBallGraphics0000",frame:{x:2850,y:1295,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.6,y:-17.6,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"BigBoxGraphics0000",frame:{x:3135,y:2105,w:50,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-25,w:50,h:50},sourceSize:{w:50,h:50}},{filename:"BigPlankGraphics0000",frame:{x:2272,y:3479,w:210,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-105,y:-10,w:210,h:20},sourceSize:{w:210,h:20}},{filename:"BouncerGraphics0000",frame:{x:591,y:2208,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0001",frame:{x:3729,y:2209,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0002",frame:{x:2415,y:2184,w:79,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0003",frame:{x:1316,y:2467,w:79,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0004",frame:{x:2765,y:2587,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0005",frame:{x:709,y:2599,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0006",frame:{x:3024,y:2600,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0007",frame:{x:3365,y:2600,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0008",frame:{x:3849,y:2601,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0009",frame:{x:3931,y:2601,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0010",frame:{x:1570,y:2602,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0011",frame:{x:2929,y:2665,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0012",frame:{x:3181,y:2665,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0013",frame:{x:944,y:2666,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0014",frame:{x:1026,y:2666,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0015",frame:{x:2484,y:2666,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0016",frame:{x:3738,y:2666,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0017",frame:{x:3263,y:2669,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0018",frame:{x:1652,y:2602,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0019",frame:{x:3,y:2672,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0020",frame:{x:791,y:2672,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0021",frame:{x:2880,y:2438,w:84,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0022",frame:{x:699,y:2677,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0023",frame:{x:3011,y:2678,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0024",frame:{x:3345,y:2678,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0025",frame:{x:3820,y:2679,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0026",frame:{x:3902,y:2679,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0027",frame:{x:1550,y:2680,w:79,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0028",frame:{x:2847,y:2604,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0029",frame:{x:381,y:2609,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0030",frame:{x:1828,y:2609,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0031",frame:{x:2250,y:2496,w:81,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0032",frame:{x:1910,y:2609,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0033",frame:{x:1468,y:2613,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0034",frame:{x:2313,y:2615,w:79,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0035",frame:{x:2831,y:2350,w:79,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0036",frame:{x:1316,y:2547,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0037",frame:{x:2710,y:2468,w:79,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0038",frame:{x:1871,y:2187,w:79,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0039",frame:{x:334,y:2189,w:79,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0040",frame:{x:498,y:2214,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0041",frame:{x:1363,y:2220,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0042",frame:{x:161,y:2229,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0043",frame:{x:3811,y:2233,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0044",frame:{x:3811,y:2233,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0045",frame:{x:3811,y:2233,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0046",frame:{x:3811,y:2233,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0047",frame:{x:950,y:2234,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0048",frame:{x:950,y:2234,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0049",frame:{x:591,y:2208,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0050",frame:{x:2800,y:2023,w:83,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-73,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0051",frame:{x:617,y:2026,w:83,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-73,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0052",frame:{x:1536,y:2085,w:82,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-73,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0053",frame:{x:2886,y:2088,w:81,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0054",frame:{x:257,y:2028,w:82,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0055",frame:{x:519,y:2033,w:81,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0056",frame:{x:2076,y:2092,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0057",frame:{x:3853,y:2050,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0058",frame:{x:2716,y:1999,w:81,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0059",frame:{x:1026,y:2051,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0060",frame:{x:1993,y:2056,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0061",frame:{x:1897,y:2096,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0062",frame:{x:163,y:2138,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0063",frame:{x:3841,y:2142,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0064",frame:{x:996,y:2143,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0065",frame:{x:251,y:2118,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0066",frame:{x:1524,y:2174,w:79,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0067",frame:{x:416,y:2190,w:79,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-73,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0068",frame:{x:3758,y:2119,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0069",frame:{x:508,y:2124,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0070",frame:{x:2159,y:2146,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0071",frame:{x:1980,y:2148,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0072",frame:{x:868,y:2151,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0073",frame:{x:342,y:2098,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0074",frame:{x:425,y:2099,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0075",frame:{x:1109,y:2099,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0076",frame:{x:1370,y:2039,w:81,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0077",frame:{x:1705,y:2100,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0078",frame:{x:1788,y:2101,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0079",frame:{x:2952,y:1997,w:82,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0080",frame:{x:79,y:2152,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0081",frame:{x:2333,y:2155,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0082",frame:{x:2875,y:2178,w:79,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0083",frame:{x:353,y:2005,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0084",frame:{x:2624,y:2026,w:83,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-73,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0085",frame:{x:1015,y:2336,w:84,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0086",frame:{x:3629,y:2468,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0087",frame:{x:534,y:1938,w:80,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-80,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0088",frame:{x:2746,y:1444,w:84,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-80,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0089",frame:{x:2186,y:1945,w:74,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0090",frame:{x:1800,y:2687,w:69,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0091",frame:{x:2948,y:2930,w:72,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0092",frame:{x:3012,y:2416,w:83,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-71,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0093",frame:{x:76,y:2585,w:77,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-72,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0094",frame:{x:3512,y:2573,w:82,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0095",frame:{x:66,y:2935,w:76,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0096",frame:{x:3339,y:2505,w:82,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-69,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0097",frame:{x:230,y:2476,w:76,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-70,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0098",frame:{x:1632,y:2680,w:80,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0099",frame:{x:1305,y:2626,w:82,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0100",frame:{x:2422,y:2586,w:78,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-71,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0101",frame:{x:1160,y:2278,w:86,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-69,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0102",frame:{x:3589,y:1993,w:84,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-81,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0103",frame:{x:3617,y:2994,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0104",frame:{x:3255,y:2998,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0105",frame:{x:2128,y:3001,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0106",frame:{x:2208,y:3001,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0107",frame:{x:2750,y:3002,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0108",frame:{x:1892,y:3051,w:77,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0109",frame:{x:1136,y:3005,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0110",frame:{x:2916,y:3008,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0111",frame:{x:1652,y:3011,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0112",frame:{x:1732,y:3011,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0113",frame:{x:76,y:2331,w:77,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0114",frame:{x:214,y:3012,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0115",frame:{x:817,y:3052,w:77,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0116",frame:{x:294,y:3053,w:77,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0117",frame:{x:1996,y:2536,w:77,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0118",frame:{x:1356,y:3014,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0119",frame:{x:1812,y:3015,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0120",frame:{x:3,y:3017,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0121",frame:{x:1672,y:1596,w:89,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-71,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0122",frame:{x:1078,y:2190,w:79,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-81,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0123",frame:{x:897,y:3071,w:76,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0124",frame:{x:2788,y:1841,w:76,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0125",frame:{x:1680,y:2437,w:73,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0126",frame:{x:2150,y:2237,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0127",frame:{x:2683,y:2548,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0128",frame:{x:3138,y:2549,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0129",frame:{x:2749,y:2291,w:79,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0130",frame:{x:3609,y:2550,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0131",frame:{x:899,y:1628,w:88,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0132",frame:{x:2497,y:2201,w:82,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0133",frame:{x:2232,y:2269,w:78,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0134",frame:{x:2098,y:2795,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0135",frame:{x:3655,y:2824,w:70,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0136",frame:{x:3,y:2749,w:72,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0137",frame:{x:2642,y:1621,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-79,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0138",frame:{x:1525,y:1785,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0139",frame:{x:3335,y:3003,w:68,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0140",frame:{x:3523,y:1787,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0141",frame:{x:3342,y:1792,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0142",frame:{x:1612,y:1799,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-79,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0143",frame:{x:1863,y:1622,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-79,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0144",frame:{x:1314,y:1629,w:88,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-80,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0145",frame:{x:556,y:2469,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0146",frame:{x:2241,y:2182,w:81,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-71,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0147",frame:{x:2582,y:2202,w:83,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0148",frame:{x:3699,y:2297,w:85,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0149",frame:{x:448,y:1914,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0150",frame:{x:3361,y:1472,w:90,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-72,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0151",frame:{x:1621,y:2089,w:81,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0152",frame:{x:540,y:1614,w:80,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-81,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0153",frame:{x:69,y:1486,w:82,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-81,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0154",frame:{x:2676,y:1843,w:87,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0155",frame:{x:1527,y:2264,w:75,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0156",frame:{x:2183,y:2047,w:74,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0157",frame:{x:1367,y:2130,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0158",frame:{x:1367,y:2130,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0159",frame:{x:3484,y:2068,w:74,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0160",frame:{x:2407,y:2273,w:78,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0161",frame:{x:2900,y:1732,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-72,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0162",frame:{x:2567,y:2343,w:75,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0163",frame:{x:949,y:1874,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0164",frame:{x:1499,y:2445,w:68,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-69,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0165",frame:{x:3222,y:2168,w:74,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-71,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0166",frame:{x:2710,y:2091,w:81,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0167",frame:{x:243,y:2295,w:75,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0168",frame:{x:3728,y:1768,w:73,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0169",frame:{x:4008,y:1678,w:82,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0170",frame:{x:1953,y:2239,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0171",frame:{x:3098,y:2438,w:73,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0172",frame:{x:1253,y:1826,w:84,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-69,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0173",frame:{x:3450,y:2167,w:81,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0174",frame:{x:3863,y:2337,w:76,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0175",frame:{x:776,y:1872,w:77,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0176",frame:{x:2636,y:2452,w:71,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0177",frame:{x:2693,y:1755,w:92,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0178",frame:{x:2233,y:1552,w:85,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0179",frame:{x:180,y:1780,w:89,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-74,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0180",frame:{x:169,y:1958,w:85,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-73,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0181",frame:{x:3365,y:2117,w:82,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-72,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0182",frame:{x:830,y:1475,w:90,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-72,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0183",frame:{x:2563,y:1409,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-80,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0184",frame:{x:654,y:1447,w:84,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-79,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0185",frame:{x:1517,y:1452,w:84,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-79,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0186",frame:{x:3731,y:1673,w:88,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-70,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0187",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0188",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0189",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0190",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0191",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0192",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0193",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0194",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0195",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0196",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0197",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0198",frame:{x:3747,y:1570,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0199",frame:{x:3731,y:1673,w:88,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-70,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0200",frame:{x:1058,y:1870,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-77,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0201",frame:{x:1606,y:2179,w:89,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0202",frame:{x:3546,y:2336,w:84,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0203",frame:{x:1340,y:1831,w:83,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-70,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0204",frame:{x:546,y:1511,w:84,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0205",frame:{x:2221,y:1755,w:79,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-77,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0206",frame:{x:3,y:1685,w:81,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-77,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0207",frame:{x:1849,y:1723,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0208",frame:{x:913,y:2059,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0209",frame:{x:2509,y:1723,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0210",frame:{x:3942,y:2343,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0211",frame:{x:3429,y:1827,w:78,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0212",frame:{x:2898,y:1829,w:78,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0213",frame:{x:3081,y:1723,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0214",frame:{x:1168,y:1817,w:82,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0215",frame:{x:941,y:1967,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0216",frame:{x:2099,y:2e3,w:81,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0217",frame:{x:1145,y:1914,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0218",frame:{x:82,y:1968,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0219",frame:{x:80,y:2060,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0220",frame:{x:1347,y:1734,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0221",frame:{x:2485,y:1824,w:86,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0222",frame:{x:2133,y:1718,w:85,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0223",frame:{x:1762,y:1915,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0224",frame:{x:3074,y:1824,w:86,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0225",frame:{x:328,y:1747,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0226",frame:{x:771,y:1780,w:87,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0227",frame:{x:3804,y:1844,w:85,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0228",frame:{x:799,y:1680,w:83,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0229",frame:{x:2428,y:2101,w:88,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0230",frame:{x:1434,y:1751,w:88,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0231",frame:{x:1082,y:1773,w:83,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0232",frame:{x:1087,y:1676,w:86,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0233",frame:{x:1933,y:1819,w:82,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0234",frame:{x:3648,y:2156,w:78,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0235",frame:{x:3053,y:2105,w:79,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0236",frame:{x:1688,y:2265,w:75,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0237",frame:{x:491,y:2302,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0238",frame:{x:1798,y:2192,w:69,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0239",frame:{x:741,y:2433,w:70,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0240",frame:{x:3938,y:2435,w:70,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0241",frame:{x:4011,y:2435,w:70,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0242",frame:{x:3515,y:679,w:71,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0243",frame:{x:156,y:2409,w:71,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0244",frame:{x:3379,y:2413,w:71,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0245",frame:{x:3783,y:2413,w:71,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0246",frame:{x:4017,y:2343,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0247",frame:{x:2937,y:2346,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0248",frame:{x:3146,y:2346,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0249",frame:{x:3464,y:2346,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0250",frame:{x:1605,y:2347,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0251",frame:{x:666,y:2349,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0252",frame:{x:158,y:2317,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0253",frame:{x:3787,y:2321,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0254",frame:{x:939,y:2322,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0255",frame:{x:2108,y:2325,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0256",frame:{x:3230,y:1010,w:77,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0257",frame:{x:473,y:2568,w:68,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0258",frame:{x:1632,y:2756,w:70,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0259",frame:{x:3283,y:2292,w:79,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-70,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0260",frame:{x:2687,y:2886,w:68,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0261",frame:{x:2306,y:2958,w:68,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0262",frame:{x:1033,y:2587,w:78,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0263",frame:{x:1527,y:2356,w:74,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-73,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0264",frame:{x:2313,y:2334,w:82,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0265",frame:{x:1417,y:2423,w:79,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0266",frame:{x:3174,y:2469,w:79,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0267",frame:{x:1141,y:2551,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0268",frame:{x:1223,y:2551,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0269",frame:{x:1746,y:2556,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0270",frame:{x:857,y:2242,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0271",frame:{x:76,y:2243,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0272",frame:{x:3113,y:2245,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0273",frame:{x:2325,y:2246,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0274",frame:{x:3617,y:2248,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0275",frame:{x:3893,y:2249,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0276",frame:{x:3382,y:2255,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0277",frame:{x:3975,y:2255,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0278",frame:{x:3464,y:2258,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0279",frame:{x:2150,y:2237,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0280",frame:{x:1606,y:2259,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0281",frame:{x:1035,y:1963,w:86,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0282",frame:{x:544,y:2641,w:77,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0283",frame:{x:1076,y:2434,w:82,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0284",frame:{x:856,y:2822,w:72,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0285",frame:{x:1841,y:2456,w:81,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0286",frame:{x:3868,y:1964,w:88,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-70,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0287",frame:{x:3299,y:2205,w:80,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-71,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0288",frame:{x:3135,y:2160,w:84,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0289",frame:{x:717,y:1551,w:97,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0290",frame:{x:758,y:2831,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0291",frame:{x:3535,y:2959,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0292",frame:{x:3774,y:2959,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0293",frame:{x:2668,y:2970,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0294",frame:{x:3408,y:2976,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0295",frame:{x:2834,y:2978,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0296",frame:{x:745,y:2979,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0297",frame:{x:993,y:2979,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0298",frame:{x:1488,y:2979,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0299",frame:{x:827,y:2981,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0300",frame:{x:1570,y:2982,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0301",frame:{x:513,y:2986,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0302",frame:{x:1488,y:2979,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0303",frame:{x:827,y:2981,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0304",frame:{x:1570,y:2982,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0305",frame:{x:513,y:2986,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0306",frame:{x:1488,y:2979,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0307",frame:{x:827,y:2981,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0308",frame:{x:1570,y:2982,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0309",frame:{x:595,y:2986,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0310",frame:{x:2377,y:2987,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0311",frame:{x:3023,y:2987,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0312",frame:{x:1570,y:2911,w:80,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0313",frame:{x:3945,y:2833,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0314",frame:{x:3947,y:2762,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0315",frame:{x:2391,y:2736,w:84,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0316",frame:{x:2732,y:2736,w:84,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0317",frame:{x:449,y:2742,w:84,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0318",frame:{x:536,y:2742,w:84,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0319",frame:{x:2278,y:2773,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0320",frame:{x:1786,y:2774,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0321",frame:{x:219,y:2775,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0322",frame:{x:305,y:2775,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0323",frame:{x:2175,y:2839,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0324",frame:{x:1578,y:2840,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0325",frame:{x:2260,y:2844,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0326",frame:{x:3288,y:2844,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0327",frame:{x:1784,y:2845,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0328",frame:{x:219,y:2846,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0329",frame:{x:2795,y:2434,w:82,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0330",frame:{x:304,y:2846,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0331",frame:{x:991,y:2416,w:82,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0332",frame:{x:3373,y:2847,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0333",frame:{x:2655,y:2627,w:82,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0334",frame:{x:1186,y:2849,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0335",frame:{x:1408,y:2850,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0336",frame:{x:1271,y:2854,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0337",frame:{x:1271,y:2854,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0338",frame:{x:1271,y:2854,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0339",frame:{x:2786,y:2854,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0340",frame:{x:68,y:2864,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0341",frame:{x:3394,y:2776,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0342",frame:{x:1240,y:2778,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0343",frame:{x:1408,y:2779,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0344",frame:{x:3984,y:2691,w:85,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0345",frame:{x:3539,y:2416,w:87,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0346",frame:{x:3781,y:2508,w:89,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0347",frame:{x:1430,y:2352,w:94,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0348",frame:{x:3,y:3089,w:75,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0349",frame:{x:1830,y:3188,w:72,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0350",frame:{x:2668,y:3041,w:72,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0351",frame:{x:3452,y:3199,w:71,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0352",frame:{x:3835,y:3240,w:70,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0353",frame:{x:370,y:3142,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0354",frame:{x:2128,y:3142,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0355",frame:{x:3234,y:3142,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0356",frame:{x:3911,y:3142,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0357",frame:{x:2729,y:3143,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0358",frame:{x:3544,y:3143,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0359",frame:{x:1614,y:3145,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0360",frame:{x:587,y:3242,w:70,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0361",frame:{x:2900,y:3145,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0362",frame:{x:3059,y:3145,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0363",frame:{x:2976,y:3148,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0364",frame:{x:3135,y:3148,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0365",frame:{x:294,y:3124,w:73,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0366",frame:{x:2570,y:3124,w:73,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0367",frame:{x:3384,y:3124,w:73,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0368",frame:{x:2824,y:3126,w:73,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0369",frame:{x:446,y:3199,w:70,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0370",frame:{x:2880,y:2515,w:70,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0371",frame:{x:1756,y:2466,w:70,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0372",frame:{x:2035,y:2266,w:70,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-73,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0373",frame:{x:309,y:2547,w:69,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0374",frame:{x:556,y:2551,w:69,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0375",frame:{x:4013,y:2601,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0376",frame:{x:2242,y:2574,w:68,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0377",frame:{x:2953,y:2574,w:68,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0378",frame:{x:1992,y:2617,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0379",frame:{x:628,y:2619,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0380",frame:{x:2168,y:2622,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0381",frame:{x:2584,y:2622,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0382",frame:{x:305,y:2637,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0383",frame:{x:220,y:2643,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0384",frame:{x:3511,y:2649,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-65,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0385",frame:{x:1463,y:2691,w:68,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-64,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0386",frame:{x:1715,y:2731,w:68,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0387",frame:{x:1925,y:2511,w:68,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-68,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0388",frame:{x:3,y:2584,w:70,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0389",frame:{x:3220,y:2574,w:68,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0390",frame:{x:673,y:2261,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0391",frame:{x:1445,y:2264,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0392",frame:{x:1445,y:2264,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0393",frame:{x:1445,y:2264,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0394",frame:{x:2150,y:2237,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0395",frame:{x:2150,y:2237,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0396",frame:{x:2150,y:2237,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0397",frame:{x:2150,y:2237,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0398",frame:{x:2150,y:2237,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0399",frame:{x:2150,y:2237,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0400",frame:{x:154,y:1494,w:98,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-72,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0401",frame:{x:2998,y:1619,w:96,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-72,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0402",frame:{x:1897,y:2016,w:93,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0403",frame:{x:593,y:1017,w:93,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-87,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0404",frame:{x:257,y:1471,w:93,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-77,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0405",frame:{x:3538,y:1527,w:93,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0406",frame:{x:2321,y:1599,w:93,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-75,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0407",frame:{x:1152,y:1047,w:96,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-83,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0408",frame:{x:1964,y:1528,w:93,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0409",frame:{x:1218,y:1537,w:93,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-76,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0410",frame:{x:3785,y:1366,w:94,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0411",frame:{x:1210,y:1630,w:95,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-72,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0412",frame:{x:861,y:1825,w:85,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0413",frame:{x:684,y:2159,w:70,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-86,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0414",frame:{x:2019,y:1061,w:85,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-89,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0415",frame:{x:3,y:2189,w:70,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0416",frame:{x:3,y:2090,w:73,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0417",frame:{x:3860,y:1548,w:81,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0418",frame:{x:2944,y:1009,w:81,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0419",frame:{x:3,y:1195,w:81,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0420",frame:{x:353,y:1549,w:81,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0421",frame:{x:633,y:1551,w:81,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0422",frame:{x:4012,y:1024,w:81,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0423",frame:{x:3454,y:1499,w:81,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0424",frame:{x:3886,y:1332,w:83,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0425",frame:{x:1708,y:1383,w:83,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0426",frame:{x:1696,y:1490,w:82,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0427",frame:{x:2354,y:1493,w:82,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0428",frame:{x:3663,y:1499,w:81,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0429",frame:{x:3882,y:1440,w:81,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0430",frame:{x:359,y:1441,w:81,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0431",frame:{x:3777,y:1461,w:80,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0432",frame:{x:2833,y:1416,w:80,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-94,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0433",frame:{x:2066,y:1463,w:80,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0434",frame:{x:1417,y:1518,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0435",frame:{x:3944,y:1570,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0436",frame:{x:3044,y:1511,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0437",frame:{x:255,y:1565,w:80,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0438",frame:{x:3184,y:1624,w:79,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0439",frame:{x:1411,y:1627,w:79,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0440",frame:{x:3473,y:1620,w:80,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0441",frame:{x:2818,y:1635,w:79,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0442",frame:{x:2915,y:1627,w:80,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-89,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0443",frame:{x:98,y:1677,w:79,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-89,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0444",frame:{x:717,y:1640,w:79,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0445",frame:{x:1964,y:1621,w:80,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-90,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0446",frame:{x:1127,y:1569,w:80,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0447",frame:{x:2650,y:1513,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0448",frame:{x:817,y:1572,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0449",frame:{x:1781,y:1518,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0450",frame:{x:3580,y:1417,w:80,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-94,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0451",frame:{x:2916,y:1518,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0452",frame:{x:923,y:1519,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0453",frame:{x:1247,y:1340,w:82,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0454",frame:{x:2060,y:1572,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0455",frame:{x:1881,y:1514,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0456",frame:{x:2559,y:1514,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0457",frame:{x:2962,y:1406,w:79,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0458",frame:{x:2381,y:1386,w:83,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0459",frame:{x:3886,y:1332,w:83,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0460",frame:{x:1176,y:1719,w:84,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0461",frame:{x:1290,y:2019,w:77,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-88,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0462",frame:{x:3266,y:1676,w:80,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0463",frame:{x:3320,y:1095,w:83,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0464",frame:{x:630,y:534,w:75,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0465",frame:{x:2302,y:1872,w:69,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0466",frame:{x:1450,y:2159,w:71,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0467",frame:{x:2047,y:1680,w:83,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0468",frame:{x:3,y:1890,w:76,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0469",frame:{x:2608,y:1722,w:82,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0470",frame:{x:1934,y:1916,w:76,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0471",frame:{x:2814,y:1741,w:81,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0472",frame:{x:4018,y:2064,w:71,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0473",frame:{x:3,y:1990,w:74,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-92,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0474",frame:{x:885,y:1724,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0475",frame:{x:440,y:786,w:68,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0476",frame:{x:1977,y:1426,w:86,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0477",frame:{x:1263,y:1725,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-93,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0478",frame:{x:2149,y:1502,w:81,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-91,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0479",frame:{x:1566,y:1988,w:77,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-89,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0480",frame:{x:3994,y:1258,w:81,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-88,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0481",frame:{x:1078,y:1147,w:81,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-86,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0482",frame:{x:3404,y:2021,w:77,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0483",frame:{x:888,y:1084,w:93,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0484",frame:{x:3066,y:1916,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0485",frame:{x:2439,y:1578,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0486",frame:{x:3127,y:1514,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0487",frame:{x:746,y:1443,w:81,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0488",frame:{x:2270,y:1444,w:81,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0489",frame:{x:3189,y:1406,w:82,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0490",frame:{x:1162,y:1147,w:86,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0491",frame:{x:382,y:951,w:93,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0492",frame:{x:2096,y:1250,w:86,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0493",frame:{x:1499,y:1556,w:85,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0494",frame:{x:1005,y:1580,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0495",frame:{x:3260,y:1780,w:79,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0496",frame:{x:1937,y:873,w:83,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0497",frame:{x:1937,y:997,w:79,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0498",frame:{x:1192,y:2106,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0499",frame:{x:2142,y:1609,w:78,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0500",frame:{x:3749,y:1001,w:78,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0501",frame:{x:3,y:1309,w:78,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0502",frame:{x:4010,y:1139,w:78,h:116},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0503",frame:{x:1401,y:1942,w:78,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0504",frame:{x:2519,y:2108,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0505",frame:{x:2014,y:1173,w:79,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0506",frame:{x:2346,y:2062,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0507",frame:{x:3676,y:2063,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0508",frame:{x:3936,y:2064,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0509",frame:{x:703,y:2066,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0510",frame:{x:1454,y:2066,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0511",frame:{x:2534,y:977,w:79,h:122},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0512",frame:{x:3165,y:1820,w:80,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0513",frame:{x:84,y:1375,w:80,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0514",frame:{x:436,y:2006,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0515",frame:{x:1124,y:2006,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0516",frame:{x:2593,y:1822,w:80,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0517",frame:{x:1731,y:2007,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0518",frame:{x:1814,y:2008,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0519",frame:{x:2459,y:2008,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0520",frame:{x:3037,y:2009,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0521",frame:{x:202,y:952,w:80,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0522",frame:{x:3210,y:1516,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0523",frame:{x:605,y:1749,w:80,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0524",frame:{x:970,y:960,w:80,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0525",frame:{x:830,y:2011,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0526",frame:{x:2482,y:1102,w:80,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0527",frame:{x:969,y:1781,w:86,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0528",frame:{x:3120,y:2012,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0529",frame:{x:746,y:1973,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0530",frame:{x:1482,y:1973,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0531",frame:{x:856,y:1918,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0532",frame:{x:83,y:1875,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0533",frame:{x:3830,y:1058,w:83,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0534",frame:{x:3151,y:1919,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0535",frame:{x:1231,y:1920,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0536",frame:{x:3122,y:1103,w:82,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0537",frame:{x:2546,y:1921,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0538",frame:{x:2449,y:948,w:82,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0539",frame:{x:1316,y:1926,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0540",frame:{x:2374,y:1877,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0541",frame:{x:3697,y:1878,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0542",frame:{x:3,y:1081,w:83,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0543",frame:{x:1268,y:1010,w:83,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0544",frame:{x:3744,y:879,w:83,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0545",frame:{x:3830,y:936,w:83,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0546",frame:{x:3979,y:1879,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0547",frame:{x:1508,y:1880,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0548",frame:{x:3657,y:879,w:84,h:118},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0549",frame:{x:3420,y:1928,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0550",frame:{x:2867,y:1930,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0551",frame:{x:3248,y:1881,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0552",frame:{x:3510,y:1882,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0553",frame:{x:3571,y:879,w:83,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0554",frame:{x:3334,y:1887,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0555",frame:{x:1096,y:676,w:92,h:115},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0556",frame:{x:2631,y:1933,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0557",frame:{x:268,y:1935,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0558",frame:{x:1162,y:1255,w:82,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0559",frame:{x:2211,y:971,w:82,h:118},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0560",frame:{x:1320,y:532,w:84,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0561",frame:{x:3236,y:1974,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0562",frame:{x:3505,y:1975,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0563",frame:{x:1853,y:873,w:81,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0564",frame:{x:1207,y:2013,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0565",frame:{x:689,y:1017,w:80,h:116},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0566",frame:{x:3203,y:2067,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0567",frame:{x:1552,y:1014,w:79,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0568",frame:{x:3892,y:1871,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0569",frame:{x:87,y:1782,w:86,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0570",frame:{x:2794,y:2112,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0571",frame:{x:603,y:2115,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BouncerGraphics0572",frame:{x:2023,y:938,w:82,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-85,w:115,h:133},sourceSize:{w:115,h:133}},{filename:"BoxGraphics0000",frame:{x:1087,y:1580,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"BurgerAchievementGraphics0000",frame:{x:709,y:3,w:700,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:700,h:526},sourceSize:{w:700,h:526}},{filename:"BurgerGraphics0000",frame:{x:2233,y:1502,w:30,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-14.9,y:-20.7,w:30,h:34},sourceSize:{w:30,h:34}},{filename:"BurgerIndicator0000",frame:{x:1905,y:3238,w:114,h:42},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2.8,y:-2.8,w:114,h:42},sourceSize:{w:114,h:42}},{filename:"BurgerSmallGraphics0000",frame:{x:2944,y:920,w:27,h:29},rotated:!1,trimmed:!0,spriteSourceSize:{x:-14.2,y:-17.5,w:27,h:29},sourceSize:{w:27,h:29}},{filename:"CameraGraphics0000",frame:{x:3538,y:1499,w:26,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-6,y:-10,w:26,h:24},sourceSize:{w:26,h:24}},{filename:"CameraGun0000",frame:{x:3539,y:979,w:24,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-10.9,w:68,h:23},sourceSize:{w:68,h:23}},{filename:"CameraGun0001",frame:{x:1078,y:1114,w:68,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-11.9,w:68,h:23},sourceSize:{w:68,h:23}},{filename:"CreditsButton0000",frame:{x:3383,y:3529,w:106,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:.2,w:106,h:33},sourceSize:{w:106,h:33}},{filename:"CreditsButton0001",frame:{x:1490,y:3530,w:106,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:.2,w:106,h:33},sourceSize:{w:106,h:33}},{filename:"CreditsButton0002",frame:{x:1490,y:3530,w:106,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:.2,w:106,h:33},sourceSize:{w:106,h:33}},{filename:"Decor10Graphics0000",frame:{x:2850,y:1235,w:38,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-57.7,w:38,h:57},sourceSize:{w:38,h:57}},{filename:"Decor11Graphics0000",frame:{x:4071,y:223,w:19,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.7,y:-66.3,w:19,h:66},sourceSize:{w:19,h:66}},{filename:"Decor12Graphics0000",frame:{x:952,y:865,w:24,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-32.9,w:24,h:32},sourceSize:{w:24,h:32}},{filename:"Decor13Graphics0000",frame:{x:1877,y:3561,w:86,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.3,y:-34.8,w:86,h:34},sourceSize:{w:86,h:34}},{filename:"Decor14Graphics0000",frame:{x:98,y:1592,w:43,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:-77.3,w:43,h:77},sourceSize:{w:43,h:77}},{filename:"Decor15Graphics0000",frame:{x:3632,y:3066,w:60,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-86.2,w:60,h:86},sourceSize:{w:60,h:86}},{filename:"Decor16Graphics0000",frame:{x:346,y:3505,w:58,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.3,y:-68.6,w:58,h:68},sourceSize:{w:58,h:68}},{filename:"Decor17Graphics0000",frame:{x:272,y:1780,w:53,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-58.3,w:53,h:58},sourceSize:{w:53,h:58}},{filename:"Decor18Graphics0000",frame:{x:3615,y:3555,w:52,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-58.3,w:52,h:58},sourceSize:{w:52,h:58}},{filename:"Decor19Graphics0000",frame:{x:4048,y:694,w:40,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-23.1,w:40,h:23},sourceSize:{w:40,h:23}},{filename:"Decor1Graphics0000",frame:{x:3156,y:3572,w:84,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32.3,y:-20.3,w:84,h:34},sourceSize:{w:84,h:34}},{filename:"Decor20Graphics0000",frame:{x:2482,y:1219,w:76,h:48},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.1,y:-49,w:76,h:48},sourceSize:{w:76,h:48}},{filename:"Decor21Graphics0000",frame:{x:3633,y:2336,w:51,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-38.1,w:51,h:38},sourceSize:{w:51,h:38}},{filename:"Decor22Graphics0000",frame:{x:2732,y:3561,w:54,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.8,y:-54.2,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Decor23Graphics0000",frame:{x:3,y:1423,w:63,h:135},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-135.3,w:63,h:135},sourceSize:{w:63,h:135}},{filename:"Decor24Graphics0000",frame:{x:2613,y:2286,w:48,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.2,y:-45.5,w:48,h:45},sourceSize:{w:48,h:45}},{filename:"Decor25Graphics0000",frame:{x:1436,y:3050,w:105,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-50.1,w:105,h:50},sourceSize:{w:105,h:50}},{filename:"Decor26Graphics0000",frame:{x:2433,y:3203,w:105,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-46.3,w:105,h:46},sourceSize:{w:105,h:46}},{filename:"Decor27Graphics0000",frame:{x:1006,y:3555,w:86,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-37.6,w:86,h:37},sourceSize:{w:86,h:37}},{filename:"Decor2Graphics0000",frame:{x:3376,y:1569,w:62,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10.9,y:-19.8,w:62,h:33},sourceSize:{w:62,h:33}},{filename:"Decor3Graphics0000",frame:{x:2693,y:1722,w:33,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-26.8,w:33,h:26},sourceSize:{w:33,h:26}},{filename:"Decor4Graphics0000",frame:{x:2482,y:1070,w:35,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-25.5,w:35,h:26},sourceSize:{w:35,h:26}},{filename:"Decor5Graphics0000",frame:{x:3801,y:1124,w:22,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-31.1,w:22,h:31},sourceSize:{w:22,h:31}},{filename:"Decor6Graphics0000",frame:{x:617,y:1965,w:126,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-58.5,w:126,h:58},sourceSize:{w:126,h:58}},{filename:"Decor7Graphics0000",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0001",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0002",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0003",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0004",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0005",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0006",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0007",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0008",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0009",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0010",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0011",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0012",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0013",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0014",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0015",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0016",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0017",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0018",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0019",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0020",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0021",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0022",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0023",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0024",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0025",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0026",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0027",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0028",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0029",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0030",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0031",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0032",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0033",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0034",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0035",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0036",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0037",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0038",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0039",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0040",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0041",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0042",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0043",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0044",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0045",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0046",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0047",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0048",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0049",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0050",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0051",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0052",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0053",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0054",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0055",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0056",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0057",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0058",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0059",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0060",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0061",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0062",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0063",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0064",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0065",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0066",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0067",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0068",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0069",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0070",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0071",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0072",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0073",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0074",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0075",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0076",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0077",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0078",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0079",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0080",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0081",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0082",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0083",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0084",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0085",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0086",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0087",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0088",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0089",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0090",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0091",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0092",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0093",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0094",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0095",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0096",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0097",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0098",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0099",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0100",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0101",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0102",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0103",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0104",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0105",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0106",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0107",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0108",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0109",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0110",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0111",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0112",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0113",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0114",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0115",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0116",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0117",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0118",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0119",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0120",frame:{x:2211,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0121",frame:{x:2211,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0122",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0123",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0124",frame:{x:2211,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0125",frame:{x:2211,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0126",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor7Graphics0127",frame:{x:1490,y:3565,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor8Graphics0000",frame:{x:2712,y:988,w:24,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-21.3,w:24,h:21},sourceSize:{w:24,h:21}},{filename:"Decor9Graphics0000",frame:{x:4071,y:326,w:18,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.7,y:-21.8,w:18,h:21},sourceSize:{w:18,h:21}},{filename:"DoorGraphics0000",frame:{x:952,y:792,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0001",frame:{x:3440,y:895,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0002",frame:{x:2909,y:1027,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0003",frame:{x:3207,y:1103,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0004",frame:{x:3003,y:1129,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0005",frame:{x:2962,y:1333,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"ElectroSplashGraphics0000",frame:{x:4049,y:908,w:31,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:-16,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0001",frame:{x:2390,y:1038,w:42,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0002",frame:{x:2325,y:3576,w:54,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-13.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0003",frame:{x:1379,y:844,w:59,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-16.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0004",frame:{x:1186,y:2808,w:51,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-22.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0005",frame:{x:3299,y:2168,w:44,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:-8,y:-29.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0006",frame:{x:391,y:2773,w:50,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-32.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0007",frame:{x:1005,y:1519,w:36,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-32.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0008",frame:{x:2296,y:971,w:33,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18,y:-40.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0009",frame:{x:2753,y:770,w:36,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-44.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0010",frame:{x:4071,y:292,w:22,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-6,y:-30.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0011",frame:{x:3923,y:515,w:10,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-19.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0012",frame:{x:4082,y:3,w:5,h:13},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-18.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0013",frame:{x:3,y:3,w:0,h:0},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0014",frame:{x:4049,y:908,w:31,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:-16,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"EnemyLimiterGraphics0000",frame:{x:107,y:876,w:15,h:15},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.5,y:-7.5,w:15,h:15},sourceSize:{w:15,h:15}},{filename:"ExitGraphics0000",frame:{x:2426,y:2512,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0001",frame:{x:2426,y:2512,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0002",frame:{x:1053,y:2513,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0003",frame:{x:2514,y:2513,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0004",frame:{x:2792,y:2513,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0005",frame:{x:717,y:2525,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0006",frame:{x:3050,y:2526,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0007",frame:{x:3424,y:2526,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0008",frame:{x:3873,y:2527,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0009",frame:{x:3961,y:2527,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0010",frame:{x:1570,y:2528,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0011",frame:{x:1658,y:2528,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0012",frame:{x:385,y:2535,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0013",frame:{x:1829,y:2535,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0014",frame:{x:1482,y:2539,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0015",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0016",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0017",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0018",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0019",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0020",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0021",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0022",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0023",frame:{x:2334,y:2541,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0024",frame:{x:3916,y:936,w:116,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61,y:-37.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0025",frame:{x:2333,y:948,w:113,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58,y:-39.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0026",frame:{x:2219,y:878,w:111,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0027",frame:{x:478,y:952,w:112,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0028",frame:{x:772,y:1066,w:113,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-47.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0029",frame:{x:1699,y:1822,w:100,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-37.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0030",frame:{x:2986,y:1320,w:106,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0031",frame:{x:3122,y:1010,w:105,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-48.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0032",frame:{x:2277,y:1355,w:101,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0033",frame:{x:3972,y:1371,w:95,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0034",frame:{x:1132,y:1367,w:92,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0035",frame:{x:3418,y:1082,w:98,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0036",frame:{x:2387,y:1177,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0037",frame:{x:1634,y:1180,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0038",frame:{x:1729,y:1180,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0039",frame:{x:2108,y:938,w:100,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0040",frame:{x:870,y:1186,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0041",frame:{x:187,y:1189,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0042",frame:{x:2199,y:1197,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0043",frame:{x:3207,y:1203,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0044",frame:{x:2565,y:1206,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0045",frame:{x:3503,y:1207,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0046",frame:{x:3302,y:1208,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0047",frame:{x:1824,y:1210,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0048",frame:{x:3598,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0049",frame:{x:3598,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0050",frame:{x:3598,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0051",frame:{x:3598,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0052",frame:{x:3598,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0053",frame:{x:3598,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0054",frame:{x:3598,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0055",frame:{x:2660,y:1215,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0056",frame:{x:965,y:1217,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0057",frame:{x:1345,y:1218,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0058",frame:{x:1440,y:1218,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0059",frame:{x:3003,y:1219,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0060",frame:{x:3098,y:1219,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0061",frame:{x:566,y:1224,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0062",frame:{x:1919,y:1224,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0063",frame:{x:3693,y:1227,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0064",frame:{x:3899,y:1231,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0065",frame:{x:2891,y:1232,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0066",frame:{x:2755,y:1235,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0067",frame:{x:380,y:1237,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0068",frame:{x:380,y:1237,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"FightingGraphics0000",frame:{x:2426,y:2456,w:39,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.3,y:-19.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0001",frame:{x:879,y:3522,w:62,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.3,y:-22.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0002",frame:{x:2062,y:2183,w:85,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43.3,y:-36.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0003",frame:{x:3515,y:772,w:109,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-51.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0004",frame:{x:2219,y:770,w:111,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-53.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0005",frame:{x:979,y:676,w:114,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-55.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0006",frame:{x:748,y:676,w:116,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-59.4,y:-56.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0007",frame:{x:1443,y:675,w:119,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-58.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0008",frame:{x:3923,y:605,w:122,h:115},rotated:!1,trimmed:!0,spriteSourceSize:{x:-62.4,y:-60.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0009",frame:{x:3406,y:1179,w:94,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.4,y:-51.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0010",frame:{x:867,y:676,w:109,h:113},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-63.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0011",frame:{x:1686,y:675,w:111,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:-59.4,y:-65.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0012",frame:{x:511,y:658,w:114,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-66.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0013",frame:{x:511,y:534,w:116,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-67.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0014",frame:{x:3050,y:527,w:120,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:-63.4,y:-69.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0015",frame:{x:3940,y:350,w:122,h:127},rotated:!1,trimmed:!0,spriteSourceSize:{x:-64.4,y:-70.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0016",frame:{x:748,y:788,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-49.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0017",frame:{x:611,y:789,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-49.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0018",frame:{x:3627,y:772,w:104,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0019",frame:{x:3734,y:772,w:104,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0020",frame:{x:2538,y:770,w:108,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0021",frame:{x:628,y:676,w:117,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-53.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0022",frame:{x:1565,y:675,w:118,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-54.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0023",frame:{x:3050,y:654,w:120,h:116},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-56.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0024",frame:{x:1195,y:532,w:122,h:118},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-57.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0025",frame:{x:3940,y:480,w:125,h:122},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-59.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0026",frame:{x:3940,y:223,w:128,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:-62.4,y:-60.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0027",frame:{x:3923,y:723,w:110,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0028",frame:{x:2106,y:770,w:110,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0029",frame:{x:3173,y:679,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0030",frame:{x:3287,y:679,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0031",frame:{x:3401,y:679,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"Fragment1Graphics0000",frame:{x:1778,y:862,w:19,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9.1,y:-3.5,w:19,h:7},sourceSize:{w:19,h:7}},{filename:"Fragment2Graphics0000",frame:{x:3154,y:773,w:15,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.1,y:-3.3,w:15,h:7},sourceSize:{w:15,h:7}},{filename:"Fragment3Graphics0000",frame:{x:4082,y:19,w:11,h:5},rotated:!1,trimmed:!0,spriteSourceSize:{x:-5.4,y:-2.6,w:11,h:5},sourceSize:{w:11,h:5}},{filename:"GlassDoorGraphics0000",frame:{x:4065,y:350,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0001",frame:{x:4068,y:424,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0002",frame:{x:4068,y:498,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0003",frame:{x:3173,y:527,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0004",frame:{x:3173,y:601,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0005",frame:{x:716,y:789,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"Guardian2Graphics0000",frame:{x:2940,y:3219,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0001",frame:{x:3120,y:3219,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0002",frame:{x:2363,y:3225,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0003",frame:{x:1647,y:3227,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0004",frame:{x:3690,y:3227,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0005",frame:{x:2228,y:3243,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0006",frame:{x:1818,y:3259,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0007",frame:{x:68,y:3263,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0008",frame:{x:3976,y:3263,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0009",frame:{x:2753,y:817,w:115,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0010",frame:{x:4033,y:3263,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0011",frame:{x:222,y:3265,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0012",frame:{x:2639,y:3265,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0013",frame:{x:3596,y:1902,w:84,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0014",frame:{x:3768,y:2029,w:82,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0015",frame:{x:2097,y:3290,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0016",frame:{x:3177,y:3290,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0017",frame:{x:3908,y:3290,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0018",frame:{x:503,y:3291,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0019",frame:{x:1013,y:3291,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0020",frame:{x:2696,y:3291,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0021",frame:{x:3509,y:3291,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0022",frame:{x:1561,y:3293,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0023",frame:{x:2863,y:3293,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0024",frame:{x:2997,y:3293,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0025",frame:{x:3054,y:3293,w:54,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0026",frame:{x:2285,y:3266,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0027",frame:{x:956,y:3267,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0028",frame:{x:3452,y:3270,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0029",frame:{x:167,y:2047,w:81,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0030",frame:{x:446,y:3271,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0031",frame:{x:2013,y:1965,w:83,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0032",frame:{x:3777,y:3187,w:55,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0033",frame:{x:2564,y:3273,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0034",frame:{x:2979,y:1906,w:84,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0035",frame:{x:3345,y:3273,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0036",frame:{x:1848,y:1916,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0037",frame:{x:1109,y:3228,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0038",frame:{x:1277,y:3229,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0039",frame:{x:1704,y:3230,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0040",frame:{x:1761,y:3230,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0041",frame:{x:1297,y:3521,w:39,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.3,y:-53.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0042",frame:{x:3402,y:3273,w:39,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0043",frame:{x:2544,y:3518,w:39,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0044",frame:{x:2998,y:1518,w:39,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0045",frame:{x:1604,y:2439,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0046",frame:{x:3105,y:2987,w:62,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0047",frame:{x:2916,y:1416,w:43,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0048",frame:{x:4048,y:605,w:45,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0049",frame:{x:4044,y:1972,w:46,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0050",frame:{x:2565,y:1102,w:48,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0051",frame:{x:3896,y:3446,w:50,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0052",frame:{x:3453,y:2438,w:73,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0053",frame:{x:2184,y:2357,w:76,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.3,y:-53.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0054",frame:{x:276,y:3365,w:52,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0055",frame:{x:3170,y:3060,w:61,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0056",frame:{x:3534,y:2169,w:80,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0057",frame:{x:873,y:2652,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0058",frame:{x:4049,y:819,w:44,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0059",frame:{x:3143,y:1419,w:43,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0060",frame:{x:4052,y:1465,w:41,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.3,y:-59.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0061",frame:{x:1161,y:2462,w:71,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0062",frame:{x:4004,y:2167,w:81,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0063",frame:{x:2169,y:3243,w:56,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0064",frame:{x:4035,y:936,w:55,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0065",frame:{x:1297,y:3521,w:39,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.3,y:-53.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0066",frame:{x:3697,y:3551,w:54,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0067",frame:{x:2766,y:2205,w:81,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0068",frame:{x:1875,y:3283,w:55,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0069",frame:{x:636,y:2530,w:70,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0070",frame:{x:3467,y:789,w:41,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0071",frame:{x:3697,y:3005,w:63,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0072",frame:{x:807,y:3561,w:54,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0073",frame:{x:2291,y:3502,w:68,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0074",frame:{x:1342,y:2701,w:45,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0075",frame:{x:2480,y:3518,w:61,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0076",frame:{x:1261,y:2630,w:41,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0077",frame:{x:1892,y:1824,w:38,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0078",frame:{x:3095,y:3525,w:58,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0079",frame:{x:2052,y:783,w:51,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0080",frame:{x:2108,y:2266,w:39,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0081",frame:{x:3697,y:3551,w:54,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0082",frame:{x:2940,y:3219,w:54,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-58.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0083",frame:{x:279,y:3274,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.3,y:-57.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0084",frame:{x:1933,y:3283,w:55,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.3,y:-55.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0085",frame:{x:2309,y:3108,w:58,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.3,y:-56.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0086",frame:{x:2151,y:3485,w:67,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.3,y:-54.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0087",frame:{x:3841,y:772,w:69,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-36.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0088",frame:{x:1139,y:3077,w:72,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-36.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0089",frame:{x:1347,y:3169,w:75,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0090",frame:{x:1425,y:3172,w:75,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0091",frame:{x:73,y:3194,w:74,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0092",frame:{x:225,y:3196,w:74,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0093",frame:{x:877,y:3276,w:72,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0094",frame:{x:1404,y:3306,w:71,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0095",frame:{x:125,y:3310,w:71,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0096",frame:{x:2753,y:3345,w:70,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0097",frame:{x:1404,y:3375,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian2Graphics0098",frame:{x:1296,y:3376,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.3,y:-44.4,w:115,h:94},sourceSize:{w:115,h:94}},{filename:"Guardian3Graphics0000",frame:{x:2471,y:1278,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0001",frame:{x:3397,y:1278,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0002",frame:{x:3165,y:1731,w:92,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0003",frame:{x:2538,y:878,w:104,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0004",frame:{x:689,y:1872,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0005",frame:{x:2686,y:2181,w:77,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0006",frame:{x:1764,y:1627,w:82,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0007",frame:{x:3916,y:1024,w:93,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0008",frame:{x:2263,y:1984,w:80,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0009",frame:{x:688,y:1749,w:80,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0010",frame:{x:2846,y:920,w:95,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0011",frame:{x:2384,y:1278,w:84,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0012",frame:{x:2105,y:1902,w:78,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0013",frame:{x:1677,y:1692,w:77,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0014",frame:{x:336,y:786,w:101,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0015",frame:{x:1053,y:1013,w:96,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0016",frame:{x:547,y:1426,w:104,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-75.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0017",frame:{x:3539,y:1002,w:96,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0018",frame:{x:1280,y:844,w:96,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0019",frame:{x:248,y:1672,w:77,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0020",frame:{x:3230,y:1095,w:87,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0021",frame:{x:2747,y:1336,w:83,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0022",frame:{x:1332,y:1421,w:82,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0023",frame:{x:1839,y:1e3,w:92,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0024",frame:{x:437,y:1631,w:84,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-74.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0025",frame:{x:524,y:1720,w:78,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0026",frame:{x:3,y:1787,w:77,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0027",frame:{x:1426,y:1843,w:79,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0028",frame:{x:478,y:1042,w:105,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0029",frame:{x:2223,y:1653,w:82,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0030",frame:{x:3376,y:1606,w:94,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0031",frame:{x:167,y:1392,w:87,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0032",frame:{x:1626,y:1281,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0033",frame:{x:2180,y:1400,w:87,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0034",frame:{x:3397,y:1278,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0035",frame:{x:1718,y:1281,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0036",frame:{x:2471,y:1278,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0037",frame:{x:3274,y:1411,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0038",frame:{x:282,y:1268,w:87,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0039",frame:{x:1529,y:1346,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0040",frame:{x:475,y:1237,w:88,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0041",frame:{x:1430,y:1413,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0042",frame:{x:1132,y:1464,w:83,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0043",frame:{x:2202,y:1092,w:90,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0044",frame:{x:776,y:960,w:94,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0045",frame:{x:3154,y:789,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0046",frame:{x:658,y:1342,w:85,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0047",frame:{x:1535,y:1241,w:88,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0048",frame:{x:1794,y:1413,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0049",frame:{x:2294,y:1249,w:87,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0050",frame:{x:102,y:1061,w:90,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0051",frame:{x:2296,y:1038,w:91,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0052",frame:{x:2093,y:1357,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0053",frame:{x:873,y:960,w:94,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0054",frame:{x:3966,y:1465,w:83,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0055",frame:{x:2814,y:1027,w:92,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0056",frame:{x:3274,y:1411,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0057",frame:{x:3561,y:2082,w:84,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0058",frame:{x:3349,y:1697,w:87,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-78.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0059",frame:{x:3610,y:1807,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-78.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0060",frame:{x:2521,y:1622,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0061",frame:{x:755,y:2268,w:84,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0062",frame:{x:2850,y:2268,w:84,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-78.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0063",frame:{x:3195,y:2264,w:85,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-78.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0064",frame:{x:661,y:1241,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-78.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0065",frame:{x:2616,y:1094,w:84,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0066",frame:{x:285,y:1064,w:90,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0067",frame:{x:3822,y:1747,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0068",frame:{x:2018,y:1872,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-78.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0069",frame:{x:338,y:1655,w:91,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-78.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0070",frame:{x:3561,y:2082,w:84,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0071",frame:{x:2471,y:1278,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0072",frame:{x:2712,y:1014,w:99,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0073",frame:{x:1615,y:3083,w:87,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-58.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0074",frame:{x:1327,y:2308,w:100,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-51.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0075",frame:{x:3673,y:1328,w:109,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-61.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0076",frame:{x:3365,y:2343,w:96,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-52.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0077",frame:{x:597,y:1850,w:89,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-82.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0078",frame:{x:2729,y:1653,w:82,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-84.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0079",frame:{x:861,y:1287,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-84.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0080",frame:{x:195,y:1076,w:84,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-84.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0081",frame:{x:511,y:780,w:97,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-84.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0082",frame:{x:979,y:787,w:95,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-84.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0083",frame:{x:290,y:951,w:89,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-84.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0084",frame:{x:2108,y:1039,w:91,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0085",frame:{x:623,y:1657,w:91,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0086",frame:{x:173,y:1290,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0087",frame:{x:2871,y:817,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-72.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0088",frame:{x:1430,y:1319,w:96,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0089",frame:{x:2650,y:1418,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0090",frame:{x:1354,y:1014,w:96,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0091",frame:{x:2417,y:1686,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0092",frame:{x:680,y:1136,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0093",frame:{x:265,y:1373,w:91,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0094",frame:{x:2467,y:1480,w:89,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0095",frame:{x:2210,y:1857,w:89,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0096",frame:{x:3788,y:1270,w:95,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-70.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0097",frame:{x:2390,y:1070,w:89,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0098",frame:{x:128,y:786,w:101,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0099",frame:{x:2185,y:1298,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0100",frame:{x:3841,y:833,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-72.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0101",frame:{x:1902,y:1325,w:96,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0102",frame:{x:1881,y:1419,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0103",frame:{x:1453,y:1014,w:96,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0104",frame:{x:2417,y:1686,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0105",frame:{x:680,y:1136,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0106",frame:{x:1933,y:1727,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-67.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0107",frame:{x:1735,y:982,w:101,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0108",frame:{x:1604,y:1483,w:89,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-72.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0109",frame:{x:154,y:1583,w:91,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0110",frame:{x:173,y:1290,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0111",frame:{x:3,y:876,w:101,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-72.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0112",frame:{x:2650,y:1418,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0113",frame:{x:3909,y:1783,w:91,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0114",frame:{x:680,y:1136,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0115",frame:{x:1227,y:1449,w:100,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0116",frame:{x:505,y:1825,w:89,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0117",frame:{x:3259,y:789,w:101,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0118",frame:{x:173,y:1290,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0119",frame:{x:3467,y:877,w:101,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0120",frame:{x:3193,y:1304,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0121",frame:{x:2563,y:1307,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0122",frame:{x:3489,y:1308,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0123",frame:{x:3285,y:1309,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0124",frame:{x:1634,y:957,w:98,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0125",frame:{x:1810,y:1311,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0126",frame:{x:3581,y:1315,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0127",frame:{x:2655,y:1316,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0128",frame:{x:953,y:1318,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0129",frame:{x:1338,y:1319,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian3Graphics0130",frame:{x:1060,y:1262,w:90,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73.9,w:115,h:116},sourceSize:{w:115,h:116}},{filename:"Guardian4Graphics0000",frame:{x:3519,y:1104,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0001",frame:{x:1826,y:1107,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0002",frame:{x:3556,y:1697,w:92,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0003",frame:{x:1173,y:844,w:104,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0004",frame:{x:2987,y:1811,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0005",frame:{x:2542,y:2014,w:79,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0006",frame:{x:2733,y:1548,w:82,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0007",frame:{x:2616,y:988,w:93,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0008",frame:{x:1679,y:1902,w:80,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0009",frame:{x:2998,y:1708,w:80,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0010",frame:{x:1755,y:873,w:95,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0011",frame:{x:1251,y:1230,w:84,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0012",frame:{x:4008,y:1779,w:80,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0013",frame:{x:2833,y:1526,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0014",frame:{x:3050,y:773,w:101,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0015",frame:{x:3,y:978,w:96,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0016",frame:{x:846,y:1389,w:104,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0017",frame:{x:3440,y:979,w:96,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0018",frame:{x:853,y:792,w:96,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0019",frame:{x:1045,y:1470,w:79,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0020",frame:{x:382,y:1059,w:87,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0021",frame:{x:87,y:1265,w:83,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0022",frame:{x:462,y:1342,w:82,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0023",frame:{x:107,y:952,w:92,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0024",frame:{x:3097,y:1622,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0025",frame:{x:3293,y:1569,w:80,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0026",frame:{x:3926,y:1678,w:79,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0027",frame:{x:3439,y:1726,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0028",frame:{x:3310,y:1001,w:105,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0029",frame:{x:1587,y:1581,w:82,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0030",frame:{x:1314,y:1537,w:94,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0031",frame:{x:372,y:1338,w:87,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0032",frame:{x:3613,y:1111,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0033",frame:{x:756,y:1340,w:87,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0034",frame:{x:1826,y:1107,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0035",frame:{x:2703,y:1112,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0036",frame:{x:3519,y:1104,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0037",frame:{x:1594,y:1894,w:82,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0038",frame:{x:272,y:1844,w:86,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-62.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0039",frame:{x:2374,y:1970,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0040",frame:{x:415,y:1823,w:87,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0041",frame:{x:3683,y:1971,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0042",frame:{x:1646,y:1998,w:82,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0043",frame:{x:1757,y:1730,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0044",frame:{x:3634,y:1606,w:94,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-62.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0045",frame:{x:756,y:1249,w:102,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-62.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0046",frame:{x:361,y:1914,w:84,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-62.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0047",frame:{x:1802,y:1824,w:87,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-62.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0048",frame:{x:2460,y:1916,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0049",frame:{x:2025,y:1780,w:87,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0050",frame:{x:990,y:1688,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-64.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0051",frame:{x:3833,y:1654,w:90,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-64.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0052",frame:{x:3783,y:1936,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0053",frame:{x:443,y:1539,w:94,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0054",frame:{x:3959,y:1972,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0055",frame:{x:3,y:1592,w:92,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-64.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0056",frame:{x:1594,y:1894,w:82,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0057",frame:{x:873,y:2577,w:83,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-67.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0058",frame:{x:1273,y:2195,w:87,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-64.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0059",frame:{x:2263,y:2416,w:82,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0060",frame:{x:2600,y:2115,w:83,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-62.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0061",frame:{x:3170,y:2992,w:82,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0062",frame:{x:1849,y:2947,w:83,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-64.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0063",frame:{x:2441,y:2822,w:85,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0064",frame:{x:2115,y:1815,w:92,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0065",frame:{x:2400,y:1779,w:82,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0066",frame:{x:2308,y:1691,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0067",frame:{x:406,y:2279,w:82,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0068",frame:{x:1680,y:2357,w:83,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-65.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0069",frame:{x:1273,y:2115,w:91,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-66.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0070",frame:{x:873,y:2577,w:83,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-67.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0071",frame:{x:3519,y:1104,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0072",frame:{x:2645,y:885,w:99,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-78.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0073",frame:{x:3690,y:3165,w:84,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-58.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0074",frame:{x:3477,y:1410,w:100,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-72.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0075",frame:{x:2850,y:1333,w:109,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-61.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0076",frame:{x:2076,y:2583,w:89,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-52.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0077",frame:{x:343,y:2988,w:86,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-60.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0078",frame:{x:1102,y:2358,w:87,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-58.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0079",frame:{x:1160,y:2199,w:89,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-61.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0080",frame:{x:1045,y:1364,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-77.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0081",frame:{x:3377,y:1380,w:97,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0082",frame:{x:1800,y:675,w:95,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-79.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0083",frame:{x:3028,y:1009,w:91,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-78.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0084",frame:{x:2471,y:1380,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-71.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0085",frame:{x:3044,y:1419,w:96,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0086",frame:{x:984,y:1114,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0087",frame:{x:1443,y:790,w:101,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0088",frame:{x:1542,y:1136,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0089",frame:{x:3341,y:895,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0090",frame:{x:566,y:1325,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0091",frame:{x:1585,y:1692,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0092",frame:{x:1616,y:1383,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0093",frame:{x:3095,y:1320,w:91,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0094",frame:{x:2303,y:1784,w:91,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0095",frame:{x:2295,y:1144,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0096",frame:{x:1728,y:1080,w:95,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0097",frame:{x:3657,y:1001,w:89,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0098",frame:{x:232,y:786,w:101,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0099",frame:{x:1354,y:1115,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0100",frame:{x:1547,y:790,w:101,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0101",frame:{x:2107,y:1145,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0102",frame:{x:1068,y:907,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0103",frame:{x:2001,y:1325,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0104",frame:{x:1585,y:1692,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0105",frame:{x:1616,y:1383,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0106",frame:{x:953,y:1420,w:89,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0107",frame:{x:3673,y:1411,w:101,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0108",frame:{x:1493,y:1657,w:89,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0109",frame:{x:1634,y:1059,w:91,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0110",frame:{x:984,y:1114,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0111",frame:{x:1651,y:795,w:101,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0112",frame:{x:3341,y:895,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0113",frame:{x:176,y:1870,w:89,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0114",frame:{x:1616,y:1383,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0115",frame:{x:443,y:1451,w:100,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0116",frame:{x:2747,y:908,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0117",frame:{x:3363,y:789,w:101,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0118",frame:{x:984,y:1114,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0119",frame:{x:3945,y:833,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0120",frame:{x:1448,y:1115,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0121",frame:{x:3028,y:1116,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0122",frame:{x:586,y:1121,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0123",frame:{x:1920,y:1121,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0124",frame:{x:1167,y:944,w:98,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0125",frame:{x:3707,y:1124,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0126",frame:{x:1251,y:1127,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0127",frame:{x:3916,y:1128,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0128",frame:{x:2909,y:1129,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0129",frame:{x:2797,y:1132,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"Guardian4Graphics0130",frame:{x:472,y:1134,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:115,h:112},sourceSize:{w:115,h:112}},{filename:"GuardianGraphics0000",frame:{x:2621,y:3356,w:61,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-60.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0001",frame:{x:63,y:3524,w:61,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0002",frame:{x:2540,y:3442,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0003",frame:{x:944,y:3527,w:59,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0004",frame:{x:1368,y:3444,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0005",frame:{x:1288,y:3445,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0006",frame:{x:2670,y:3526,w:59,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0007",frame:{x:1607,y:3528,w:58,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0008",frame:{x:89,y:2508,w:57,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0009",frame:{x:474,y:3531,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0010",frame:{x:534,y:3531,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0011",frame:{x:447,y:3065,w:57,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0012",frame:{x:3,y:3486,w:57,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0013",frame:{x:199,y:3529,w:57,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0014",frame:{x:139,y:3486,w:57,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0015",frame:{x:1122,y:3533,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0016",frame:{x:3888,y:3534,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0017",frame:{x:819,y:3487,w:57,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0018",frame:{x:2362,y:3502,w:56,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0019",frame:{x:2421,y:3502,w:56,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0020",frame:{x:1913,y:3487,w:57,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0021",frame:{x:2744,y:3487,w:57,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0022",frame:{x:1430,y:3498,w:57,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0023",frame:{x:1668,y:3543,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0024",frame:{x:286,y:3500,w:57,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0025",frame:{x:594,y:3544,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0026",frame:{x:2151,y:3549,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0027",frame:{x:3760,y:3549,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0028",frame:{x:1062,y:3480,w:57,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0029",frame:{x:2037,y:3550,w:57,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0030",frame:{x:3637,y:3480,w:57,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0031",frame:{x:2868,y:3528,w:57,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0032",frame:{x:467,y:3446,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0033",frame:{x:928,y:3446,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0034",frame:{x:3834,y:3446,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0035",frame:{x:77,y:3448,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0036",frame:{x:2020,y:3449,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0037",frame:{x:2890,y:3452,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0038",frame:{x:224,y:3453,w:59,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0039",frame:{x:1973,y:3525,w:61,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0040",frame:{x:2804,y:3525,w:61,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0041",frame:{x:413,y:3362,w:61,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-60.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0042",frame:{x:2621,y:3356,w:61,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-60.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0043",frame:{x:1725,y:2916,w:59,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-61.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0044",frame:{x:1295,y:2925,w:58,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0045",frame:{x:684,y:2928,w:58,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0046",frame:{x:2067,y:2951,w:58,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0047",frame:{x:545,y:2890,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0048",frame:{x:4030,y:2859,w:59,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-63.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0049",frame:{x:153,y:2864,w:59,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-63.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0050",frame:{x:4033,y:2762,w:60,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-63.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0051",frame:{x:1087,y:2890,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0052",frame:{x:2428,y:2891,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0053",frame:{x:3865,y:2891,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0054",frame:{x:389,y:2892,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0055",frame:{x:1787,y:2916,w:59,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-61.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0056",frame:{x:215,y:2917,w:59,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-61.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0057",frame:{x:451,y:2892,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0058",frame:{x:1663,y:2895,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0059",frame:{x:3206,y:2896,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0060",frame:{x:624,y:2805,w:60,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0061",frame:{x:3728,y:2824,w:60,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0062",frame:{x:931,y:2897,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0063",frame:{x:2005,y:2897,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0064",frame:{x:2957,y:2193,w:73,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0065",frame:{x:2607,y:2951,w:58,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0066",frame:{x:1075,y:2986,w:58,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-61.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0067",frame:{x:1725,y:2916,w:59,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-61.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0068",frame:{x:4013,y:3503,w:64,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-64.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0069",frame:{x:3320,y:1980,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41.8,y:-63.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0070",frame:{x:4026,y:1570,w:67,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39.8,y:-63.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0071",frame:{x:3,y:2289,w:70,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0072",frame:{x:4036,y:723,w:57,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0073",frame:{x:3,y:2385,w:69,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0074",frame:{x:3825,y:3522,w:60,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0075",frame:{x:2787,y:3277,w:73,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0076",frame:{x:3014,y:3528,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0077",frame:{x:78,y:3379,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41.8,y:-61.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0078",frame:{x:3493,y:3526,w:58,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-61.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0079",frame:{x:1296,y:3021,w:57,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-61.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0080",frame:{x:660,y:3245,w:68,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0081",frame:{x:3,y:2831,w:62,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-62.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0082",frame:{x:3554,y:3526,w:58,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-63.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0083",frame:{x:4013,y:3503,w:64,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-64.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0084",frame:{x:2540,y:3364,w:61,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-60.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0085",frame:{x:407,y:3522,w:64,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0086",frame:{x:1607,y:3464,w:69,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35.8,y:-60.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0087",frame:{x:2285,y:3394,w:63,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-59.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0088",frame:{x:653,y:3111,w:86,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46.8,y:-58.4,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0089",frame:{x:3747,y:3278,w:73,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-43.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0090",frame:{x:2607,y:2876,w:77,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-38.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0091",frame:{x:2067,y:3073,w:78,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0092",frame:{x:2148,y:3073,w:78,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0093",frame:{x:2743,y:3074,w:78,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0094",frame:{x:1464,y:3103,w:77,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0095",frame:{x:2229,y:3108,w:77,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0096",frame:{x:587,y:3173,w:75,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0097",frame:{x:880,y:3207,w:73,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0098",frame:{x:2025,y:3207,w:73,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0099",frame:{x:2022,y:3276,w:72,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"GuardianGraphics0100",frame:{x:1503,y:3211,w:73,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.8,y:-44.3,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"HustlerGraphics0000",frame:{x:3458,y:2899,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0001",frame:{x:3427,y:2699,w:78,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0002",frame:{x:1218,y:2925,w:74,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0003",frame:{x:2012,y:2821,w:77,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0004",frame:{x:1679,y:3476,w:65,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0005",frame:{x:4024,y:3431,w:63,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0006",frame:{x:394,y:3440,w:70,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0007",frame:{x:3244,y:3442,w:70,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0008",frame:{x:3053,y:3392,w:66,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0009",frame:{x:477,y:3381,w:73,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0010",frame:{x:954,y:3381,w:73,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0011",frame:{x:2816,y:3460,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0012",frame:{x:150,y:3238,w:69,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0013",frame:{x:2952,y:3460,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0014",frame:{x:3427,y:3458,w:63,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0015",frame:{x:529,y:3460,w:63,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0016",frame:{x:2750,y:3414,w:63,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0017",frame:{x:2886,y:2023,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0018",frame:{x:687,y:3433,w:63,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0019",frame:{x:2602,y:3500,w:65,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0020",frame:{x:2420,y:3252,w:70,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0021",frame:{x:1767,y:3443,w:70,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0022",frame:{x:1494,y:2830,w:81,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0023",frame:{x:1296,y:3086,w:81,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0024",frame:{x:1788,y:3087,w:81,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0025",frame:{x:1398,y:2505,w:81,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0026",frame:{x:3691,y:2559,w:81,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0027",frame:{x:2288,y:3040,w:81,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0028",frame:{x:3695,y:3099,w:81,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0029",frame:{x:1380,y:3103,w:81,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0030",frame:{x:880,y:3142,w:81,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0031",frame:{x:2044,y:3142,w:81,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0032",frame:{x:1053,y:3149,w:80,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0033",frame:{x:3480,y:2826,w:80,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0034",frame:{x:1872,y:3122,w:80,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0035",frame:{x:1494,y:2830,w:81,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0036",frame:{x:2967,y:2495,w:80,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0037",frame:{x:2020,y:2742,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0038",frame:{x:2902,y:2742,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0039",frame:{x:3166,y:2742,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0040",frame:{x:873,y:2743,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0041",frame:{x:951,y:2743,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0042",frame:{x:1029,y:2743,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0043",frame:{x:2556,y:2797,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0044",frame:{x:3049,y:2798,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0045",frame:{x:2503,y:2587,w:78,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0046",frame:{x:3578,y:2799,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0047",frame:{x:3802,y:2799,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0048",frame:{x:2364,y:2807,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0049",frame:{x:2709,y:2807,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0050",frame:{x:391,y:2813,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0051",frame:{x:468,y:2813,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0052",frame:{x:2478,y:2743,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0053",frame:{x:3256,y:2495,w:80,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0054",frame:{x:2967,y:2495,w:80,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0055",frame:{x:2490,y:2953,w:77,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-65.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0056",frame:{x:1261,y:2701,w:78,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0057",frame:{x:2069,y:3380,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0058",frame:{x:3927,y:2904,w:72,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0059",frame:{x:2220,y:3334,w:62,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0060",frame:{x:781,y:2749,w:72,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0061",frame:{x:741,y:2350,w:80,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0062",frame:{x:2348,y:2456,w:75,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-71.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0063",frame:{x:607,y:2901,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0064",frame:{x:3987,y:3192,w:72,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0065",frame:{x:757,y:3428,w:59,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0066",frame:{x:2588,y:3047,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0067",frame:{x:2488,y:2343,w:76,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-70.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0068",frame:{x:3033,y:2197,w:77,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-71.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0069",frame:{x:2805,y:3198,w:64,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-71.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0070",frame:{x:3823,y:3311,w:55,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0071",frame:{x:809,y:3210,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0072",frame:{x:3949,y:3500,w:61,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0073",frame:{x:2493,y:3252,w:68,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0074",frame:{x:931,y:2822,w:78,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-59.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0075",frame:{x:2239,y:2665,w:71,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-64.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0076",frame:{x:959,y:2579,w:71,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-65.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0077",frame:{x:3775,y:2579,w:71,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-65.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0078",frame:{x:2602,y:2542,w:78,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0079",frame:{x:3563,y:2878,w:71,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0080",frame:{x:1927,y:2420,w:71,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0081",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0082",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0083",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0084",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0085",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0086",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0087",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0088",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0089",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0090",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0091",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0092",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0093",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0094",frame:{x:3106,y:2628,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0095",frame:{x:907,y:2414,w:81,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0096",frame:{x:3842,y:3159,w:63,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0097",frame:{x:78,y:2762,w:69,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-65.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0098",frame:{x:545,y:2813,w:76,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0099",frame:{x:3556,y:1620,w:75,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0100",frame:{x:3726,y:2743,w:73,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0101",frame:{x:3856,y:2987,w:64,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0102",frame:{x:2092,y:2874,w:75,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0103",frame:{x:2209,y:2750,w:66,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0104",frame:{x:463,y:2659,w:73,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0105",frame:{x:302,y:3196,w:65,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0106",frame:{x:3998,y:3043,w:73,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-60.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0107",frame:{x:3234,y:3070,w:75,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0108",frame:{x:477,y:2485,w:76,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0109",frame:{x:159,y:3084,w:69,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-62.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0110",frame:{x:83,y:3045,w:73,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-59.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0111",frame:{x:1534,y:2757,w:81,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0112",frame:{x:2083,y:2507,w:83,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0113",frame:{x:3791,y:2878,w:71,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0114",frame:{x:2372,y:3058,w:67,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0115",frame:{x:3698,y:3346,w:70,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0116",frame:{x:2890,y:2821,w:73,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0117",frame:{x:3458,y:2899,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0118",frame:{x:3458,y:2899,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0119",frame:{x:3458,y:2899,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0120",frame:{x:2871,y:2901,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0121",frame:{x:976,y:3127,w:74,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0122",frame:{x:447,y:3128,w:74,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0123",frame:{x:199,y:3356,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0124",frame:{x:2655,y:2702,w:74,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0125",frame:{x:623,y:3395,w:61,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0126",frame:{x:1539,y:3462,w:65,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0127",frame:{x:1544,y:3053,w:68,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0128",frame:{x:553,y:3390,w:67,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0129",frame:{x:1188,y:2630,w:70,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0130",frame:{x:1816,y:3372,w:67,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0131",frame:{x:1390,y:2675,w:70,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-72.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0132",frame:{x:3,y:3237,w:62,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0133",frame:{x:3174,y:3390,w:67,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0134",frame:{x:587,y:3057,w:63,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0135",frame:{x:1704,y:3399,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0136",frame:{x:817,y:3123,w:60,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0137",frame:{x:231,y:3084,w:60,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0138",frame:{x:3655,y:2732,w:68,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0139",frame:{x:3291,y:2582,w:71,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0140",frame:{x:1972,y:3084,w:69,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0141",frame:{x:3406,y:3047,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0142",frame:{x:560,y:3313,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0143",frame:{x:374,y:3065,w:70,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0144",frame:{x:2101,y:3213,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0145",frame:{x:3234,y:3313,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0146",frame:{x:1690,y:3150,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0147",frame:{x:1136,y:3151,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0148",frame:{x:3566,y:3315,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0149",frame:{x:2342,y:3317,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0150",frame:{x:626,y:3318,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0151",frame:{x:1618,y:3319,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0152",frame:{x:1618,y:3319,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0153",frame:{x:3632,y:3319,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0154",frame:{x:1070,y:3320,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0155",frame:{x:1070,y:3320,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0156",frame:{x:1070,y:3320,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0157",frame:{x:1230,y:3321,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0158",frame:{x:1684,y:3322,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0159",frame:{x:1070,y:3320,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0160",frame:{x:1750,y:3322,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0161",frame:{x:3771,y:3399,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0162",frame:{x:3211,y:3213,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0163",frame:{x:2408,y:3323,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0164",frame:{x:2570,y:3196,w:66,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0165",frame:{x:3479,y:3381,w:61,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0166",frame:{x:4031,y:3354,w:62,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0167",frame:{x:3846,y:3073,w:62,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0168",frame:{x:3637,y:2907,w:65,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0169",frame:{x:3908,y:3213,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0170",frame:{x:2442,y:3113,w:61,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0171",frame:{x:1214,y:3093,w:60,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0172",frame:{x:2966,y:2844,w:67,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0173",frame:{x:519,y:3214,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0174",frame:{x:1277,y:3152,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0175",frame:{x:2819,y:2768,w:68,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0176",frame:{x:689,y:2754,w:66,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0177",frame:{x:3546,y:2258,w:68,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0178",frame:{x:1398,y:2583,w:67,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-72.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0179",frame:{x:2351,y:3400,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0180",frame:{x:3923,y:3065,w:70,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0181",frame:{x:1041,y:3214,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0182",frame:{x:1425,y:2921,w:60,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0183",frame:{x:1872,y:2687,w:69,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0184",frame:{x:3923,y:2157,w:78,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-72.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0185",frame:{x:2414,y:3402,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0186",frame:{x:2529,y:2876,w:75,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0187",frame:{x:2830,y:3049,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0188",frame:{x:1760,y:3153,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0189",frame:{x:2235,y:2915,w:68,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0190",frame:{x:2169,y:2533,w:70,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0191",frame:{x:3268,y:2915,w:68,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0192",frame:{x:2063,y:2653,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0193",frame:{x:3620,y:3155,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0194",frame:{x:3480,y:3113,w:61,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0195",frame:{x:309,y:2460,w:73,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0196",frame:{x:2477,y:3402,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0197",frame:{x:3,y:3160,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0198",frame:{x:692,y:3356,w:62,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0199",frame:{x:155,y:3161,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0200",frame:{x:2975,y:817,w:72,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0201",frame:{x:1872,y:2774,w:67,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0202",frame:{x:2639,y:2783,w:67,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0203",frame:{x:3508,y:2738,w:67,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0204",frame:{x:3779,y:3099,w:60,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0205",frame:{x:524,y:3128,w:60,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0206",frame:{x:731,y:3279,w:64,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0207",frame:{x:1114,y:2630,w:71,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0208",frame:{x:3383,y:3196,w:66,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0209",frame:{x:2474,y:3325,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0210",frame:{x:2996,y:3058,w:60,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-70.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0211",frame:{x:1494,y:3280,w:64,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0212",frame:{x:2826,y:3383,w:61,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0213",frame:{x:2719,y:3214,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0214",frame:{x:336,y:3282,w:64,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0215",frame:{x:2980,y:2755,w:66,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0216",frame:{x:1107,y:2813,w:76,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0217",frame:{x:2506,y:3117,w:61,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0218",frame:{x:1105,y:3403,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0219",frame:{x:742,y:3127,w:68,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0220",frame:{x:2566,y:2712,w:70,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-65.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0221",frame:{x:2141,y:3408,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0222",frame:{x:3111,y:3311,w:60,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0223",frame:{x:3597,y:2629,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-65.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0224",frame:{x:1955,y:3161,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0225",frame:{x:865,y:3410,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0226",frame:{x:3526,y:3214,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0227",frame:{x:3325,y:2755,w:66,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0228",frame:{x:2370,y:3139,w:60,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0229",frame:{x:1579,y:3216,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0230",frame:{x:743,y:3050,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0231",frame:{x:677,y:3024,w:63,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0232",frame:{x:2989,y:3383,w:61,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0233",frame:{x:758,y:2902,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0234",frame:{x:1705,y:2818,w:76,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0235",frame:{x:2685,y:3381,w:62,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0236",frame:{x:1544,y:3133,w:67,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0237",frame:{x:3996,y:3118,w:71,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0238",frame:{x:2154,y:3331,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0239",frame:{x:3093,y:2713,w:70,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0240",frame:{x:983,y:3050,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0241",frame:{x:507,y:3057,w:77,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0242",frame:{x:3689,y:3415,w:71,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0243",frame:{x:1216,y:3021,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0244",frame:{x:1840,y:3443,w:70,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0245",frame:{x:3122,y:3460,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0246",frame:{x:1886,y:3372,w:68,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0247",frame:{x:658,y:3505,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0248",frame:{x:3594,y:3232,w:60,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0249",frame:{x:665,y:3173,w:71,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0250",frame:{x:3312,y:3084,w:69,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0251",frame:{x:3559,y:3066,w:70,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0252",frame:{x:1493,y:2902,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0253",frame:{x:1478,y:3357,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0254",frame:{x:2872,y:3216,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0255",frame:{x:3317,y:3502,w:63,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0256",frame:{x:3965,y:3354,w:63,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0257",frame:{x:798,y:3353,w:64,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0258",frame:{x:2676,y:3457,w:65,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0259",frame:{x:3493,y:3461,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0260",frame:{x:1206,y:3181,w:68,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0261",frame:{x:3,y:3421,w:71,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0262",frame:{x:1957,y:3410,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-64.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0263",frame:{x:336,y:3359,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0264",frame:{x:1476,y:3422,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0265",frame:{x:1350,y:3520,w:60,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0266",frame:{x:331,y:3424,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0267",frame:{x:876,y:3345,w:75,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0268",frame:{x:835,y:2903,w:73,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0269",frame:{x:798,y:3287,w:75,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0270",frame:{x:3364,y:3426,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0271",frame:{x:2604,y:3434,w:69,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0272",frame:{x:724,y:3505,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0273",frame:{x:336,y:3359,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0274",frame:{x:1476,y:3422,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0275",frame:{x:1350,y:3520,w:60,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0276",frame:{x:331,y:3424,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0277",frame:{x:876,y:3345,w:75,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0278",frame:{x:835,y:2903,w:73,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0279",frame:{x:798,y:3287,w:75,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0280",frame:{x:3364,y:3426,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0281",frame:{x:2604,y:3434,w:69,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0282",frame:{x:724,y:3505,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0283",frame:{x:336,y:3359,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0284",frame:{x:1476,y:3422,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0285",frame:{x:1350,y:3520,w:60,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0286",frame:{x:331,y:3424,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0287",frame:{x:876,y:3345,w:75,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0288",frame:{x:835,y:2903,w:73,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0289",frame:{x:3565,y:3461,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0290",frame:{x:595,y:3471,w:60,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-65.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0291",frame:{x:739,y:3204,w:67,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0292",frame:{x:3614,y:3396,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0293",frame:{x:3,y:3354,w:72,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-59.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0294",frame:{x:3881,y:3380,w:72,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0295",frame:{x:1030,y:3397,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0296",frame:{x:1213,y:3398,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0297",frame:{x:432,y:2988,w:72,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0298",frame:{x:2134,y:2712,w:72,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0299",frame:{x:642,y:2441,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-81.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0300",frame:{x:1252,y:2276,w:72,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-87.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0301",frame:{x:1950,y:2327,w:72,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-85.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0302",frame:{x:2645,y:2361,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0303",frame:{x:2175,y:2444,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-81.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0304",frame:{x:2100,y:2417,w:72,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-82.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0305",frame:{x:75,y:2418,w:72,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-82.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0306",frame:{x:406,y:2362,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0307",frame:{x:2025,y:2364,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0308",frame:{x:1852,y:2365,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0309",frame:{x:321,y:2369,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0310",frame:{x:1192,y:2371,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0311",frame:{x:1766,y:2375,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0312",frame:{x:1267,y:2376,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0313",frame:{x:1342,y:2376,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0314",frame:{x:2720,y:2377,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0315",frame:{x:3633,y:2377,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0316",frame:{x:3708,y:2377,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0317",frame:{x:567,y:2378,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0318",frame:{x:3221,y:2378,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0319",frame:{x:234,y:2385,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0320",frame:{x:234,y:2385,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0321",frame:{x:481,y:2394,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0322",frame:{x:2170,y:2910,w:62,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0323",frame:{x:2004,y:2993,w:60,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0324",frame:{x:1172,y:2717,w:65,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0325",frame:{x:3879,y:2799,w:63,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0326",frame:{x:3,y:2924,w:60,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0327",frame:{x:1939,y:2876,w:63,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0328",frame:{x:2525,y:3026,w:60,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0329",frame:{x:2970,y:2102,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0330",frame:{x:3709,y:2468,w:69,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0331",frame:{x:3036,y:2877,w:63,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0332",frame:{x:624,y:2709,w:62,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-88.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0333",frame:{x:328,y:2278,w:75,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-83.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0334",frame:{x:2260,y:2078,w:70,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-88.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0335",frame:{x:3102,y:2897,w:63,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-82.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0336",frame:{x:277,y:2917,w:63,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-81.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0337",frame:{x:150,y:2776,w:66,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-80.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0338",frame:{x:1942,y:2789,w:67,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-79.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0339",frame:{x:2459,y:3026,w:63,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-79.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0340",frame:{x:2829,y:2682,w:70,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0341",frame:{x:3582,y:2714,w:70,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0342",frame:{x:228,y:2559,w:74,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0343",frame:{x:2668,y:2273,w:78,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-80.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0344",frame:{x:3285,y:2073,w:77,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-79.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0345",frame:{x:1342,y:2761,w:63,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0346",frame:{x:376,y:2687,w:70,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-78.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0347",frame:{x:2398,y:2361,w:69,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0348",frame:{x:1734,y:2635,w:63,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0349",frame:{x:180,y:1677,w:65,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0350",frame:{x:85,y:2665,w:62,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0351",frame:{x:156,y:2585,w:61,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0352",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0353",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0354",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0355",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0356",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0357",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0358",frame:{x:1149,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0359",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0360",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0361",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0362",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0363",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0364",frame:{x:3447,y:2600,w:61,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0365",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0366",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0367",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0368",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0369",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0370",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0371",frame:{x:3705,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0372",frame:{x:1149,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0373",frame:{x:1149,y:2920,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0374",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0375",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0376",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0377",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0378",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0379",frame:{x:3339,y:2918,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0380",frame:{x:1356,y:2921,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0381",frame:{x:145,y:2961,w:66,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-76.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0382",frame:{x:1935,y:2967,w:66,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-76.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0383",frame:{x:3490,y:3030,w:66,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-75.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0384",frame:{x:1108,y:2716,w:61,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0385",frame:{x:3672,y:2636,w:63,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0386",frame:{x:150,y:2685,w:66,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-72.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0387",frame:{x:1870,y:2276,w:77,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-72.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0388",frame:{x:3279,y:3234,w:63,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-71.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0389",frame:{x:4002,y:2956,w:64,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-71.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0390",frame:{x:909,y:2993,w:71,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-70.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0391",frame:{x:1478,y:3357,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-70.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0392",frame:{x:1334,y:3238,w:77,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0393",frame:{x:396,y:2453,w:78,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0394",frame:{x:1234,y:3521,w:60,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0395",frame:{x:245,y:2208,w:80,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-78.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0396",frame:{x:2639,y:3199,w:77,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0397",frame:{x:3,y:2508,w:83,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0398",frame:{x:2758,y:2925,w:73,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0399",frame:{x:150,y:3421,w:71,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0400",frame:{x:1012,y:2822,w:72,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0401",frame:{x:1334,y:3303,w:67,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0402",frame:{x:2285,y:3198,w:75,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0403",frame:{x:990,y:3462,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0404",frame:{x:1747,y:3508,w:62,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0405",frame:{x:3126,y:2821,w:77,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0406",frame:{x:3194,y:3507,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0407",frame:{x:3956,y:3430,w:65,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0408",frame:{x:3543,y:3392,w:68,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0409",frame:{x:3697,y:3480,w:60,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-59.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0410",frame:{x:2952,y:3525,w:59,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0411",frame:{x:2001,y:2455,w:79,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0412",frame:{x:1991,y:3345,w:75,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0413",frame:{x:2313,y:2693,w:75,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-69.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0414",frame:{x:3310,y:3161,w:70,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0415",frame:{x:3763,y:3476,w:59,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-65.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0416",frame:{x:150,y:2501,w:75,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-71.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0417",frame:{x:81,y:3120,w:71,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-62.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0418",frame:{x:964,y:3198,w:74,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0419",frame:{x:3402,y:3361,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0420",frame:{x:3300,y:3364,w:61,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-70.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0421",frame:{x:3857,y:2425,w:78,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-75.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0422",frame:{x:3052,y:3216,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-67.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0423",frame:{x:2395,y:2665,w:86,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0424",frame:{x:3529,y:2491,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0425",frame:{x:2345,y:2886,w:80,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0426",frame:{x:370,y:3213,w:73,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0427",frame:{x:1136,y:3337,w:74,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0428",frame:{x:1944,y:2707,w:73,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0429",frame:{x:1766,y:2293,w:83,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0430",frame:{x:2904,y:3080,w:83,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0431",frame:{x:580,y:2296,w:83,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0432",frame:{x:2920,y:3380,w:66,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0433",frame:{x:380,y:1169,w:88,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0434",frame:{x:842,y:2330,w:81,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0435",frame:{x:687,y:2843,w:68,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0436",frame:{x:2740,y:2665,w:86,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0437",frame:{x:2204,y:3411,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-63.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0438",frame:{x:1235,y:2467,w:78,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0439",frame:{x:2470,y:2431,w:80,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0440",frame:{x:1555,y:3396,w:71,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0441",frame:{x:2553,y:2432,w:80,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0442",frame:{x:2204,y:3177,w:78,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-58.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0443",frame:{x:3763,y:3030,w:80,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-61.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0444",frame:{x:2920,y:3311,w:71,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-60.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0445",frame:{x:1166,y:3256,w:61,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-72.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0446",frame:{x:1629,y:3399,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0447",frame:{x:3062,y:2333,w:81,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0448",frame:{x:1057,y:3081,w:79,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-60.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0449",frame:{x:824,y:2413,w:80,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0450",frame:{x:3024,y:3463,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0451",frame:{x:1705,y:3083,w:80,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-59.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0452",frame:{x:3927,y:2983,w:68,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0453",frame:{x:974,y:2496,w:76,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0454",frame:{x:3059,y:3076,w:78,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0455",frame:{x:2082,y:3485,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0456",frame:{x:1414,y:3241,w:77,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0457",frame:{x:814,y:2495,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0458",frame:{x:1812,y:3508,w:62,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0459",frame:{x:3296,y:2413,w:80,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0460",frame:{x:1869,y:2861,w:67,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-78.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0461",frame:{x:2662,y:3117,w:64,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0462",frame:{x:3244,y:2746,w:78,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-68.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0463",frame:{x:1168,y:3463,w:63,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-62.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"HustlerGraphics0464",frame:{x:894,y:2495,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-74.8,w:100,h:109},sourceSize:{w:100,h:109}},{filename:"LevelIconGraphics0000",frame:{x:290,y:894,w:42,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelIconGraphics0001",frame:{x:3293,y:1516,w:62,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelIconGraphics0002",frame:{x:2967,y:2438,w:42,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelTextGraphics0000",frame:{x:4082,y:27,w:4,h:4},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-2,w:4,h:4},sourceSize:{w:4,h:4}},{filename:"LevelsMapButton0000",frame:{x:1562,y:899,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:.2,y:.8,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"LevelsMapButton0001",frame:{x:702,y:902,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:.2,y:.8,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"LevelsMapButton0002",frame:{x:885,y:902,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:.2,y:.8,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"LoserBouncer0000",frame:{x:2798,y:527,w:249,h:287},rotated:!1,trimmed:!0,spriteSourceSize:{x:-5,y:-24.9,w:249,h:287},sourceSize:{w:249,h:287}},{filename:"LoserHustler0000",frame:{x:3887,y:3,w:192,h:217},rotated:!1,trimmed:!0,spriteSourceSize:{x:-6.4,y:-4.3,w:192,h:217},sourceSize:{w:192,h:217}},{filename:"MenuButtonGraphics0000",frame:{x:3181,y:2628,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MenuButtonGraphics0001",frame:{x:294,y:3006,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MenuButtonGraphics0002",frame:{x:3181,y:2628,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MonitorGraphics0000",frame:{x:1087,y:1618,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MonitorGraphics0001",frame:{x:2263,y:1945,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MonitorGraphics0002",frame:{x:703,y:2026,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MusicButtonGraphics0000",frame:{x:83,y:3009,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0001",frame:{x:1436,y:3014,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0002",frame:{x:1892,y:3015,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0003",frame:{x:3559,y:3030,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"NicheGraphics0000",frame:{x:993,y:2903,w:75,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.1,y:-36.7,w:75,h:73},sourceSize:{w:75,h:73}},{filename:"Plank10Graphics0000",frame:{x:1525,y:1751,w:50,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:50,h:20},sourceSize:{w:50,h:20}},{filename:"Plank11Graphics0000",frame:{x:984,y:1084,w:51,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:51,h:20},sourceSize:{w:51,h:20}},{filename:"Plank2Graphics0000",frame:{x:654,y:3570,w:150,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-75,y:-10,w:150,h:20},sourceSize:{w:150,h:20}},{filename:"Plank3Graphics0000",frame:{x:864,y:3590,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank4Graphics0000",frame:{x:3470,y:3591,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank5Graphics0000",frame:{x:2789,y:3592,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank6Graphics0000",frame:{x:630,y:651,w:71,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10,w:71,h:21},sourceSize:{w:71,h:21}},{filename:"Plank7Graphics0000",frame:{x:3243,y:3576,w:71,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10,w:71,h:20},sourceSize:{w:71,h:20}},{filename:"Plank8Graphics0000",frame:{x:2014,y:1290,w:70,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10.1,w:70,h:21},sourceSize:{w:70,h:21}},{filename:"Plank9Graphics0000",frame:{x:3,y:1561,w:50,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:50,h:20},sourceSize:{w:50,h:20}},{filename:"PlankGraphics0000",frame:{x:3317,y:3568,w:150,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-75,y:-10.1,w:150,h:21},sourceSize:{w:150,h:21}},{filename:"PlayGameButton0000",frame:{x:3802,y:2756,w:142,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:0,w:143,h:41},sourceSize:{w:143,h:41}},{filename:"PlayGameButton0001",frame:{x:219,y:2732,w:143,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:0,w:143,h:41},sourceSize:{w:143,h:41}},{filename:"PlayGameButton0002",frame:{x:219,y:2732,w:143,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:0,w:143,h:41},sourceSize:{w:143,h:41}},{filename:"ReplayButtonGraphics0000",frame:{x:159,y:3045,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"ReplayButtonGraphics0001",frame:{x:1503,y:3172,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"ReplayButtonGraphics0002",frame:{x:159,y:3045,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SkipButton0000",frame:{x:3382,y:2205,w:65,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SkipButton0001",frame:{x:307,y:3576,w:65,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SkipButton0002",frame:{x:307,y:3576,w:65,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SoundButtonGraphics0000",frame:{x:1905,y:3188,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0001",frame:{x:3345,y:3234,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0002",frame:{x:1230,y:3256,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0003",frame:{x:403,y:3282,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"StoolGraphics0000",frame:{x:3062,y:2288,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"Tip10Graphics0000",frame:{x:3,y:786,w:122,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-88.5,w:122,h:87},sourceSize:{w:122,h:87}},{filename:"Tip1Graphics0000",frame:{x:1698,y:2192,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-68.2,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip2Graphics0000",frame:{x:757,y:2195,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-68.2,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip3Graphics0000",frame:{x:1077,y:794,w:93,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:1.1,y:-110.9,w:93,h:110},sourceSize:{w:93,h:110}},{filename:"Tip4Graphics0000",frame:{x:3651,y:1697,w:74,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:8.7,y:-106.9,w:74,h:107},sourceSize:{w:74,h:107}},{filename:"Tip5Graphics0000",frame:{x:785,y:2104,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.6,y:-90.1,w:80,h:88},sourceSize:{w:80,h:88}},{filename:"Tip6Graphics0000",frame:{x:1800,y:783,w:123,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.2,y:-44.7,w:123,h:87},sourceSize:{w:123,h:87}},{filename:"Tip7Graphics0000",frame:{x:1926,y:783,w:123,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.2,y:-43.7,w:123,h:87},sourceSize:{w:123,h:87}},{filename:"Tip8Graphics0000",frame:{x:3206,y:2822,w:79,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:3.8,y:-75.7,w:79,h:71},sourceSize:{w:79,h:71}},{filename:"Tip9Graphics0000",frame:{x:805,y:2577,w:65,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:1.1,y:-93,w:65,h:92},sourceSize:{w:65,h:92}},{filename:"ToiletGraphics0000",frame:{x:2221,y:3502,w:67,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.3,y:-23.3,w:67,h:60},sourceSize:{w:67,h:60}},{filename:"WaterSplashGraphics0000",frame:{x:1755,y:795,w:42,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0001",frame:{x:4049,y:2527,w:44,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0002",frame:{x:1413,y:3572,w:45,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0003",frame:{x:3948,y:3569,w:46,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-62.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0004",frame:{x:950,y:2151,w:43,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0005",frame:{x:4013,y:3568,w:45,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0006",frame:{x:3,y:3560,w:46,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0007",frame:{x:3012,y:2346,w:47,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0008",frame:{x:3122,y:3392,w:48,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0009",frame:{x:1356,y:2854,w:48,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0010",frame:{x:1182,y:3533,w:48,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0011",frame:{x:127,y:3560,w:49,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-61.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0012",frame:{x:2586,y:3565,w:50,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-58.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0013",frame:{x:259,y:3574,w:45,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.2,y:-57.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0014",frame:{x:2263,y:2357,w:47,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.2,y:-56.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0015",frame:{x:1779,y:3573,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-56.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0016",frame:{x:1728,y:3573,w:48,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-59.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0017",frame:{x:2097,y:3550,w:50,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.2,y:-61.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0018",frame:{x:2997,y:3219,w:51,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0019",frame:{x:361,y:1844,w:51,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"_beam0000",frame:{x:3050,y:882,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_beam0001",frame:{x:2998,y:3593,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_beam0002",frame:{x:967,y:3595,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_bigElevBack0000",frame:{x:2382,y:3583,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"_bigElevatorFront0000",frame:{x:1268,y:655,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0001",frame:{x:2892,y:3592,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0002",frame:{x:3317,y:3592,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0003",frame:{x:375,y:3593,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0004",frame:{x:481,y:3593,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0005",frame:{x:654,y:3593,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_burg10000",frame:{x:2333,y:770,w:101,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45.2,y:-55.7,w:101,h:114},sourceSize:{w:101,h:114}},{filename:"_burg20000",frame:{x:2649,y:770,w:101,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48.2,y:-56.8,w:101,h:112},sourceSize:{w:101,h:112}},{filename:"_burg30000",frame:{x:2437,y:770,w:98,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53.3,y:-53.7,w:98,h:117},sourceSize:{w:98,h:117}},{filename:"_burgersBackground0000",frame:{x:1195,y:675,w:245,h:166},rotated:!1,trimmed:!0,spriteSourceSize:{x:-121.9,y:-78.7,w:245,h:166},sourceSize:{w:245,h:166}},{filename:"_buttonTop0000",frame:{x:4068,y:591,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0001",frame:{x:1755,y:862,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0002",frame:{x:2052,y:870,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0003",frame:{x:2075,y:870,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0004",frame:{x:2846,y:908,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0005",frame:{x:3440,y:968,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_cogwheel0000",frame:{x:1173,y:794,w:18,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9,y:-8.9,w:18,h:18},sourceSize:{w:18,h:18}},{filename:"_cogwheel20000",frame:{x:1173,y:815,w:18,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9,y:-9,w:18,h:18},sourceSize:{w:18,h:18}},{filename:"_elevatorBack0000",frame:{x:1195,y:653,w:70,h:17},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-8.5,w:70,h:17},sourceSize:{w:70,h:17}},{filename:"_elevatorFront0000",frame:{x:888,y:1066,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0001",frame:{x:1634,y:1164,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0002",frame:{x:689,y:1850,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0003",frame:{x:617,y:1938,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0004",frame:{x:3,y:2479,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0005",frame:{x:3,y:2493,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_levelCompletedSign0000",frame:{x:1412,y:531,w:483,h:141},rotated:!1,trimmed:!0,spriteSourceSize:{x:-241.6,y:-3.6,w:483,h:141},sourceSize:{w:483,h:141}},{filename:"_levelFailedSign0000",frame:{x:709,y:532,w:483,h:141},rotated:!1,trimmed:!0,spriteSourceSize:{x:-241.6,y:-3.6,w:483,h:141},sourceSize:{w:483,h:141}},{filename:"_mainMenuButton0000",frame:{x:2944,y:952,w:180,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.6,w:180,h:54},sourceSize:{w:180,h:54}},{filename:"_mainMenuButton0001",frame:{x:1268,y:953,w:180,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.6,w:180,h:54},sourceSize:{w:180,h:54}},{filename:"_mainMenuButton0002",frame:{x:3127,y:953,w:180,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.6,w:180,h:54},sourceSize:{w:180,h:54}},{filename:"_nextButton0000",frame:{x:2023,y:880,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:0,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_nextButton0001",frame:{x:2333,y:890,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:0,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_nextButton0002",frame:{x:336,y:893,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:0,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_pushButtonBase0000",frame:{x:744,y:893,w:23,h:5},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11.9,y:-2.3,w:23,h:5},sourceSize:{w:23,h:5}},{filename:"_replayButton0000",frame:{x:107,y:894,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:.4,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_replayButton0001",frame:{x:519,y:894,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:.4,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_replayButton0002",frame:{x:519,y:894,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:.4,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_triggerBase0000",frame:{x:1374,y:655,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0001",frame:{x:2296,y:1013,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0002",frame:{x:2755,y:1215,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0003",frame:{x:2321,y:1552,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0004",frame:{x:1005,y:1559,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0005",frame:{x:2321,y:1569,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerHandle0000",frame:{x:2516,y:890,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0001",frame:{x:2516,y:907,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0002",frame:{x:2516,y:924,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0003",frame:{x:1735,y:957,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0004",frame:{x:3418,y:1001,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0005",frame:{x:3638,y:1002,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_walkthroughButton0000",frame:{x:2975,y:894,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:0,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_walkthroughButton0001",frame:{x:1379,y:895,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:0,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_walkthroughButton0002",frame:{x:3158,y:895,w:180,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:0,w:180,h:55},sourceSize:{w:180,h:55}},{filename:"_walkthroughButtonBig0000",frame:{x:1451,y:957,w:180,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.4,w:180,h:54},sourceSize:{w:180,h:54}},{filename:"_walkthroughButtonBig0001",frame:{x:593,y:960,w:180,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.4,w:180,h:54},sourceSize:{w:180,h:54}},{filename:"_walkthroughButtonBig0002",frame:{x:593,y:960,w:180,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.4,w:180,h:54},sourceSize:{w:180,h:54}},{filename:"cbtnArrow0000",frame:{x:772,y:1151,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnChange0000",frame:{x:89,y:1167,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnChange0001",frame:{x:282,y:1170,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnGrab0000",frame:{x:3801,y:1172,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cmcActiveSign0000",frame:{x:4068,y:572,w:25,h:16},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12.5,y:6.5,w:25,h:16},sourceSize:{w:25,h:16}},{filename:"cmcAnim10000",frame:{x:3,y:534,w:266,h:249},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:8,w:266,h:249},sourceSize:{w:266,h:249}},{filename:"cmcAnim20000",frame:{x:272,y:534,w:236,h:249},rotated:!1,trimmed:!0,spriteSourceSize:{x:244.5,y:8,w:236,h:249},sourceSize:{w:236,h:249}},{filename:"cmcAnim30000",frame:{x:1898,y:531,w:205,h:249},rotated:!1,trimmed:!0,spriteSourceSize:{x:487.5,y:8,w:205,h:249},sourceSize:{w:205,h:249}},{filename:"cmcAnim40000",frame:{x:3589,y:258,w:348,h:254},rotated:!1,trimmed:!0,spriteSourceSize:{x:7.5,y:264,w:348,h:254},sourceSize:{w:348,h:254}},{filename:"cmcAnim50000",frame:{x:3589,y:515,w:331,h:254},rotated:!1,trimmed:!0,spriteSourceSize:{x:361.5,y:264,w:331,h:254},sourceSize:{w:331,h:254}},{filename:"cmcAnim60000",frame:{x:3199,y:3,w:685,h:252},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:7,w:685,h:252},sourceSize:{w:685,h:252}},{filename:"cmcAnim70000",frame:{x:2457,y:515,w:338,h:252},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:266,w:338,h:252},sourceSize:{w:338,h:252}},{filename:"cmcAnim80000",frame:{x:2115,y:515,w:339,h:252},rotated:!1,trimmed:!0,spriteSourceSize:{x:353,y:266,w:339,h:252},sourceSize:{w:339,h:252}},{filename:"cmcBonusBag0000",frame:{x:3260,y:3507,w:54,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:10,y:0,w:54,h:66},sourceSize:{w:54,h:66}},{filename:"cmcBonusHighlight0000",frame:{x:432,y:1731,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44.9,y:-44.8,w:89,h:89},sourceSize:{w:89,h:89}},{filename:"cmcCreditsDialog0000",frame:{x:2813,y:3,w:383,h:521},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45.4,y:-3.6,w:383,h:521},sourceSize:{w:383,h:521}},{filename:"cmcLevelSelectBG0000",frame:{x:3,y:3,w:703,h:528},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.5,w:703,h:528},sourceSize:{w:703,h:528}},{filename:"cmcLock0000",frame:{x:716,y:863,w:25,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2.4,y:-2.4,w:25,h:35},sourceSize:{w:25,h:35}},{filename:"cmcMainMenuBack0000",frame:{x:2115,y:3,w:695,h:509},rotated:!1,trimmed:!0,spriteSourceSize:{x:3,y:9,w:695,h:509},sourceSize:{w:695,h:509}},{filename:"cmcPauseDialog0000",frame:{x:3199,y:258,w:387,h:418},rotated:!1,trimmed:!0,spriteSourceSize:{x:-78.2,y:-3.6,w:387,h:418},sourceSize:{w:387,h:418}},{filename:"cmcYouNeed0000",frame:{x:2716,y:1944,w:141,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-1,w:141,h:52},sourceSize:{w:141,h:52}},{filename:"crossPoint0000",frame:{x:2909,y:1100,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"crossPoint0001",frame:{x:2149,y:1463,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"crossPoint0002",frame:{x:923,y:1475,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"grabbedObject0000",frame:{x:2521,y:1578,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"hamburgers0000",frame:{x:3,y:3,w:0,h:0},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.8,y:-.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0001",frame:{x:3310,y:953,w:28,h:30},rotated:!1,trimmed:!0,spriteSourceSize:{x:.2,y:-.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0002",frame:{x:3887,y:223,w:48,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2.8,y:-1.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0003",frame:{x:3771,y:3346,w:48,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:-3.8,y:-12.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"platformCenter0000",frame:{x:785,y:2066,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"platformLeft0000",frame:{x:3365,y:2073,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"platformRight0000",frame:{x:868,y:2104,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"singleTile0000",frame:{x:1032,y:2234,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomCenter0000",frame:{x:2348,y:2416,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomLeft0000",frame:{x:3049,y:2755,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomRight0000",frame:{x:1494,y:2779,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenter0000",frame:{x:1663,y:2840,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenterLeft0000",frame:{x:2490,y:2891,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenterRight0000",frame:{x:3168,y:2897,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopCenter0000",frame:{x:2306,y:2915,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopLeft0000",frame:{x:343,y:2917,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopRight0000",frame:{x:3408,y:2918,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformBottom0000",frame:{x:3168,y:2935,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformCenter0000",frame:{x:2128,y:2951,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformTop0000",frame:{x:3490,y:2976,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"Objects.png",format:"RGBA8888",size:{w:4096,h:4096},scale:"1"}},e}(),ObjectsLayouts=function(){function e(){}return e.data=[{name:"BigElevatorGraphics",children:[{mc:"_bigElevBack",name:"",x:0,y:0},{mc:"_cogwheel",name:"cogwheel1",x:-14,y:0},{mc:"_cogwheel2",name:"cogwheel2",x:14,y:0},{mc:"_bigElevatorFront",name:"front",x:0,y:-4}]},{name:"cmcCredits",children:[{mc:"cmcCreditsDialog",name:"",x:0,y:0}]},{name:"cmcJoypadLeft",children:[{mc:"cbtnArrow",name:"right",x:55,y:0,degrees:90},{mc:"cbtnArrow",name:"left",x:-55,y:0,degrees:-90}]},{name:"cmcJoypadRight",children:[{mc:"cbtnArrow",name:"up",x:54,y:0},{mc:"cbtnArrow",name:"down",x:-54,y:0,degrees:180},{mc:"cbtnGrab",name:"grab",x:-54,y:-108},{mc:"cbtnChange",name:"change",x:54,y:-108}]},{name:"cmcLevelSelect",children:[{mc:"cmcLevelSelectBG",name:"",x:-2,y:0},{mc:"_walkthroughButtonBig",name:"walkthroughButton",x:454,y:443},{mc:"_mainMenuButton",name:"menuButton",x:63,y:444},{mc:"cmcBonusHighlight",name:"bonusHighlight",x:566,y:160},{mc:"cmcBonusBag",name:"bonusBag",x:527,y:121},{mc:"cmcLock",name:"lock",x:531,y:160},{mc:"LevelIconGraphics",name:"l1",x:71,y:347},{mc:"LevelIconGraphics",name:"l2",x:161,y:339},{mc:"LevelIconGraphics",name:"l3",x:248,y:352},{mc:"LevelIconGraphics",name:"l4",x:335,y:338},{mc:"LevelIconGraphics",name:"l5",x:424,y:355},{mc:"LevelIconGraphics",name:"l6",x:502,y:341},{mc:"LevelIconGraphics",name:"l7",x:567,y:305},{mc:"LevelIconGraphics",name:"l8",x:574,y:236},{mc:"LevelIconGraphics",name:"l9",x:490,y:210},{mc:"LevelIconGraphics",name:"l10",x:405,y:202},{mc:"LevelIconGraphics",name:"l11",x:311,y:217},{mc:"LevelIconGraphics",name:"l12",x:232,y:245},{mc:"LevelIconGraphics",name:"l13",x:150,y:234},{mc:"LevelIconGraphics",name:"l14",x:67,y:203},{mc:"LevelIconGraphics",name:"l15",x:53,y:130},{mc:"LevelIconGraphics",name:"l16",x:119,y:86},{mc:"LevelIconGraphics",name:"l17",x:184,y:61},{mc:"LevelIconGraphics",name:"l18",x:271,y:73},{mc:"LevelIconGraphics",name:"l19",x:345,y:62},{mc:"LevelIconGraphics",name:"l20",x:429,y:61}]},{name:"cmcMainMenu",children:[{mc:"CreditsButton",name:"creditsButton",x:291,y:356},{mc:"PlayGameButton",name:"playButton",x:266,y:297,scaleX:1.0999755859375,scaleY:1.0999755859375},{mc:"cmcMainMenuBack",name:"",x:3,y:3}]},{name:"cmcPause",children:[{mc:"cmcPauseDialog",name:"",x:0,y:0},{mc:"LevelsMapButton",name:"menuButton",x:27,y:156},{mc:"BackButton",name:"backButton",x:59,y:337}]},{name:"cmcYouLose",children:[{mc:"LoserBouncer",name:"loserBouncer",x:-292,y:159},{mc:"LoserHustler",name:"loserHustler",x:812,y:188},{mc:"_levelFailedSign",name:"levelFailed",x:354,y:-203},{mc:"_walkthroughButton",name:"walkthroughButton",x:465,y:618},{mc:"_replayButton",name:"replayButton",x:271,y:618},{mc:"LevelsMapButton",name:"levelsButton",x:74,y:618}]},{name:"cmcYouWin",children:[{mc:"_levelCompletedSign",name:"levelCompleted",x:354,y:-203},{mc:"LevelsMapButton",name:"levelsButton",x:76,y:608},{mc:"_replayButton",name:"replayButton",x:269,y:608},{mc:"_nextButton",name:"nextButton",x:464,y:608},{mc:"_burgersBackground",name:"burgerBG",x:350,y:223},{mc:"_burg1",name:"b1",x:282,y:237},{mc:"_burg2",name:"b2",x:348,y:203},{mc:"_burg3",name:"b3",x:418,y:236}]},{name:"ElevatorGraphics",children:[{mc:"_elevatorBack",name:"",x:0,y:1},{mc:"_cogwheel",name:"cogwheel1",x:-8,y:2},{mc:"_cogwheel2",name:"cogwheel2",x:8,y:2},{mc:"_elevatorFront",name:"front",x:0,y:-2}]},{name:"PushButtonGraphics",children:[{mc:"_buttonTop",name:"top",x:0,y:-1},{mc:"_pushButtonBase",name:"",x:0,y:4}]},{name:"TopPanelBonusGraphics",children:[{mc:"MenuButtonGraphics",name:"menuButton",x:539,y:4},{mc:"ReplayButtonGraphics",name:"replayButton",x:580,y:4},{mc:"SoundButtonGraphics",name:"soundButton",x:621,y:4},{mc:"MusicButtonGraphics",name:"musicButton",x:661,y:5}]},{name:"TopPanelGraphics",children:[{mc:"MenuButtonGraphics",name:"menuButton",x:539,y:4},{mc:"ReplayButtonGraphics",name:"replayButton",x:580,y:4},{mc:"SoundButtonGraphics",name:"soundButton",x:621,y:4},{mc:"MusicButtonGraphics",name:"musicButton",x:661,y:5},{mc:"BurgerIndicator",name:"burgerPanel",x:6,y:6},{mc:"_walkthroughButton",name:"walkthroughButton",x:273,y:4,scaleX:.75,scaleY:.75},{mc:"BurgerSmallGraphics",name:"b1",x:30,y:23},{mc:"BurgerSmallGraphics",name:"b2",x:61,y:23},{mc:"BurgerSmallGraphics",name:"b3",x:92,y:23}]},{name:"TriggerGraphics",children:[{mc:"_triggerHandle",name:"handle",x:2,y:5,scaleX:.999969482421875,scaleY:.999969482421875},{mc:"_triggerBase",name:"base",x:0,y:6}]}],e}(),PreloaderObjects=function(){function e(){}return e.data={frames:[{filename:"BigMenuButtonGraphics0000",frame:{x:1963,y:415,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMenuButtonGraphics0001",frame:{x:1965,y:315,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMenuButtonGraphics0002",frame:{x:1963,y:415,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0000",frame:{x:1883,y:315,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0001",frame:{x:1808,y:438,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0002",frame:{x:1863,y:438,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0003",frame:{x:1918,y:468,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigReplayButtonGraphics0000",frame:{x:1973,y:468,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigReplayButtonGraphics0001",frame:{x:1876,y:3,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigReplayButtonGraphics0002",frame:{x:1973,y:468,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0000",frame:{x:1876,y:56,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0001",frame:{x:1876,y:109,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0002",frame:{x:1876,y:162,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0003",frame:{x:1931,y:3,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"LeftCurtainGraphics0000",frame:{x:1409,y:531,w:385,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.7,y:-.2,w:385,h:526},sourceSize:{w:385,h:526}},{filename:"MusicButtonGraphics0000",frame:{x:1876,y:215,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0001",frame:{x:1914,y:215,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0002",frame:{x:1931,y:56,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0003",frame:{x:1931,y:92,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"RightCurtainGraphics0000",frame:{x:1140,y:3,w:421,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:-420,y:-.1,w:421,h:525},sourceSize:{w:421,h:525}},{filename:"SoundButtonGraphics0000",frame:{x:1965,y:368,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0001",frame:{x:2003,y:368,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0002",frame:{x:1808,y:491,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0003",frame:{x:1846,y:491,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"cbtnPlay0000",frame:{x:1728,y:315,w:152,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.5,y:-1.6,w:152,h:66},sourceSize:{w:152,h:66}},{filename:"cbtnPlay0001",frame:{x:1564,y:355,w:152,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.5,y:-1.6,w:152,h:66},sourceSize:{w:152,h:66}},{filename:"cbtnPlay0002",frame:{x:1564,y:355,w:152,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.5,y:-1.6,w:152,h:66},sourceSize:{w:152,h:66}},{filename:"cmcFinalAnimationBG0000",frame:{x:706,y:532,w:700,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:700,h:525},sourceSize:{w:700,h:525}},{filename:"cmcIntroAnimationBG0000",frame:{x:3,y:532,w:700,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:700,h:525},sourceSize:{w:700,h:525}},{filename:"cmcKizi0000",frame:{x:1564,y:265,w:161,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:1.7,w:161,h:87},sourceSize:{w:161,h:87}},{filename:"cmcLoaderBar0000",frame:{x:1719,y:415,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0001",frame:{x:1564,y:438,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0002",frame:{x:1564,y:461,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0003",frame:{x:1564,y:484,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0004",frame:{x:1564,y:507,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0005",frame:{x:1797,y:530,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0006",frame:{x:1797,y:553,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0007",frame:{x:1797,y:576,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0008",frame:{x:1797,y:599,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0009",frame:{x:1797,y:622,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0010",frame:{x:1797,y:645,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBarBack0000",frame:{x:1719,y:384,w:243,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:8,y:9.3,w:243,h:28},sourceSize:{w:243,h:28}},{filename:"cmcLoaderBarFront0000",frame:{x:1728,y:265,w:259,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:259,h:47},sourceSize:{w:259,h:47}},{filename:"cmcPreloaderBG0000",frame:{x:3,y:3,w:701,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.7,w:701,h:526},sourceSize:{w:701,h:526}},{filename:"cmcSidePad0000",frame:{x:707,y:3,w:430,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:-430,y:0,w:430,h:525},sourceSize:{w:430,h:525}},{filename:"cmcTitlePreloader0000",frame:{x:1564,y:3,w:309,h:259},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:309,h:259},sourceSize:{w:309,h:259}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"PreloaderObjects.png",format:"RGBA8888",size:{w:2048,h:2048},scale:"1"}},e}(),PreloaderObjectsLayouts=function(){function e(){}return e.data=[{name:"cmcPreloader",children:[{mc:"cmcPreloaderBG",name:"bg",x:0,y:0},{mc:"cbtnPlay",name:"btnPlay",x:279,y:423},{mc:"cmcLoaderBarBack",name:"barBack",x:222,y:432},{mc:"MusicButtonGraphics",name:"btnMusic",x:659,y:9},{mc:"SoundButtonGraphics",name:"btnSound",x:622,y:9},{mc:"cmcTitlePreloader",name:"title",x:197,y:136},{mc:"cmcLoaderBar",name:"bar",x:222,y:432},{mc:"cmcLoaderBarFront",name:"barFront",x:222,y:432},{mc:"cmcKizi",name:"sponsor",x:273,y:41}]}],e}(),WinningObjects=function(){function e(){}return e.data={frames:[{filename:"cmcBouncerWin0000",frame:{x:1616,y:232,w:169,h:279},rotated:!1,trimmed:!0,spriteSourceSize:{x:-202,y:191,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0001",frame:{x:791,y:693,w:159,h:265},rotated:!1,trimmed:!0,spriteSourceSize:{x:-101.9,y:155,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0002",frame:{x:1767,y:705,w:154,h:251},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9.9,y:117,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0003",frame:{x:3,y:722,w:153,h:240},rotated:!1,trimmed:!0,spriteSourceSize:{x:87.1,y:77,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0004",frame:{x:1401,y:235,w:185,h:248},rotated:!1,trimmed:!0,spriteSourceSize:{x:160,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0005",frame:{x:3,y:480,w:179,h:239},rotated:!1,trimmed:!0,spriteSourceSize:{x:164,y:32,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0006",frame:{x:1788,y:244,w:187,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:161,y:33,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0007",frame:{x:3,y:240,w:190,h:237},rotated:!1,trimmed:!0,spriteSourceSize:{x:161,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0008",frame:{x:1187,y:237,w:193,h:234},rotated:!1,trimmed:!0,spriteSourceSize:{x:161,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0009",frame:{x:1830,y:3,w:199,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:166,y:27,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0010",frame:{x:1187,y:3,w:211,h:231},rotated:!1,trimmed:!0,spriteSourceSize:{x:162,y:31,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0011",frame:{x:746,y:3,w:219,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:162,y:28,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0012",frame:{x:503,y:3,w:240,h:229},rotated:!1,trimmed:!0,spriteSourceSize:{x:164,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0013",frame:{x:3,y:3,w:247,h:234},rotated:!1,trimmed:!0,spriteSourceSize:{x:162,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0014",frame:{x:253,y:3,w:247,h:227},rotated:!1,trimmed:!0,spriteSourceSize:{x:166,y:36,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0015",frame:{x:1401,y:3,w:212,h:229},rotated:!1,trimmed:!0,spriteSourceSize:{x:163,y:36,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0016",frame:{x:1616,y:3,w:211,h:226},rotated:!1,trimmed:!0,spriteSourceSize:{x:164,y:40,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0017",frame:{x:968,y:3,w:216,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:164,y:39,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0018",frame:{x:253,y:233,w:205,h:227},rotated:!1,trimmed:!0,spriteSourceSize:{x:172,y:51,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0019",frame:{x:196,y:463,w:195,h:226},rotated:!1,trimmed:!0,spriteSourceSize:{x:179,y:60,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0020",frame:{x:185,y:692,w:189,h:223},rotated:!1,trimmed:!0,spriteSourceSize:{x:185,y:73,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0021",frame:{x:1136,y:701,w:177,h:221},rotated:!1,trimmed:!0,spriteSourceSize:{x:194,y:84,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0022",frame:{x:461,y:235,w:171,h:272},rotated:!1,trimmed:!0,spriteSourceSize:{x:199,y:93,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0023",frame:{x:635,y:244,w:167,h:268},rotated:!1,trimmed:!0,spriteSourceSize:{x:203,y:99,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0024",frame:{x:1599,y:514,w:165,h:256},rotated:!1,trimmed:!0,spriteSourceSize:{x:199,y:114,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0025",frame:{x:953,y:701,w:180,h:219},rotated:!1,trimmed:!0,spriteSourceSize:{x:189,y:157,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0026",frame:{x:1003,y:474,w:195,h:224},rotated:!1,trimmed:!0,spriteSourceSize:{x:149,y:162,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0027",frame:{x:1201,y:474,w:194,h:224},rotated:!1,trimmed:!0,spriteSourceSize:{x:150,y:162,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0028",frame:{x:805,y:465,w:195,h:225},rotated:!1,trimmed:!0,spriteSourceSize:{x:151,y:164,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0029",frame:{x:805,y:244,w:205,h:218},rotated:!1,trimmed:!0,spriteSourceSize:{x:144,y:168,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0030",frame:{x:1788,y:485,w:201,h:217},rotated:!1,trimmed:!0,spriteSourceSize:{x:148,y:169,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0031",frame:{x:1398,y:486,w:198,h:219},rotated:!1,trimmed:!0,spriteSourceSize:{x:150,y:167,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0032",frame:{x:394,y:510,w:196,h:221},rotated:!1,trimmed:!0,spriteSourceSize:{x:151,y:165,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0033",frame:{x:593,y:515,w:195,h:221},rotated:!1,trimmed:!0,spriteSourceSize:{x:152,y:165,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcHustlerWin0000",frame:{x:179,y:1099,w:154,h:187},rotated:!1,trimmed:!0,spriteSourceSize:{x:714,y:216.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0001",frame:{x:3,y:1276,w:152,h:184},rotated:!1,trimmed:!0,spriteSourceSize:{x:632,y:177.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0002",frame:{x:1533,y:1321,w:152,h:179},rotated:!1,trimmed:!0,spriteSourceSize:{x:549,y:144.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0003",frame:{x:1644,y:1138,w:160,h:180},rotated:!1,trimmed:!0,spriteSourceSize:{x:456,y:103.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0004",frame:{x:159,y:918,w:174,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:358,y:63.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0005",frame:{x:3,y:1099,w:173,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:355,y:64.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0006",frame:{x:1637,y:959,w:174,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:350,y:63.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0007",frame:{x:856,y:1100,w:175,h:171},rotated:!1,trimmed:!0,spriteSourceSize:{x:347,y:61.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0008",frame:{x:953,y:923,w:178,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:342,y:59.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0009",frame:{x:681,y:961,w:172,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:343,y:57.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0010",frame:{x:1475,y:1138,w:166,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:347,y:56.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0011",frame:{x:677,y:1140,w:165,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:348,y:55.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0012",frame:{x:995,y:1291,w:161,h:172},rotated:!1,trimmed:!0,spriteSourceSize:{x:350,y:55.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0013",frame:{x:1369,y:1315,w:161,h:172},rotated:!1,trimmed:!0,spriteSourceSize:{x:350,y:56.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0014",frame:{x:1204,y:1148,w:162,h:175},rotated:!1,trimmed:!0,spriteSourceSize:{x:349,y:57.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0015",frame:{x:506,y:1156,w:162,h:175},rotated:!1,trimmed:!0,spriteSourceSize:{x:349,y:58.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0016",frame:{x:336,y:1159,w:162,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:349,y:60.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0017",frame:{x:1807,y:1142,w:163,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:348,y:61.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0018",frame:{x:158,y:1289,w:160,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:350,y:73.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0019",frame:{x:671,y:1317,w:157,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:351,y:85.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0020",frame:{x:1688,y:1321,w:152,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:352,y:92.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0021",frame:{x:1843,y:1321,w:149,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:353,y:108.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0022",frame:{x:1316,y:708,w:147,h:250},rotated:!1,trimmed:!0,spriteSourceSize:{x:352,y:117.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0023",frame:{x:377,y:734,w:149,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:348,y:131.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0024",frame:{x:529,y:739,w:149,h:231},rotated:!1,trimmed:!0,spriteSourceSize:{x:347,y:140.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0025",frame:{x:845,y:1274,w:147,h:191},rotated:!1,trimmed:!0,spriteSourceSize:{x:349,y:185.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0026",frame:{x:1013,y:244,w:168,h:198},rotated:!1,trimmed:!0,spriteSourceSize:{x:361,y:185.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0027",frame:{x:1466,y:773,w:168,h:188},rotated:!1,trimmed:!0,spriteSourceSize:{x:361,y:195.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0028",frame:{x:1134,y:925,w:168,h:183},rotated:!1,trimmed:!0,spriteSourceSize:{x:361,y:200.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0029",frame:{x:1034,y:1111,w:167,h:177},rotated:!1,trimmed:!0,spriteSourceSize:{x:362,y:206.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0030",frame:{x:506,y:975,w:168,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:361,y:205.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0031",frame:{x:1814,y:959,w:169,h:180},rotated:!1,trimmed:!0,spriteSourceSize:{x:360,y:203.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0032",frame:{x:1305,y:964,w:167,h:181},rotated:!1,trimmed:!0,spriteSourceSize:{x:362,y:202.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0033",frame:{x:336,y:975,w:167,h:181},rotated:!1,trimmed:!0,spriteSourceSize:{x:362,y:202.3,w:526,h:348},sourceSize:{w:526,h:348}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"WinningObjects.png",format:"RGBA8888",size:{w:2048,h:2048},scale:"1"}},e}(),WinningObjectsLayouts=function(){function e(){}return e.data=[],e}();!function(r){var o,e;(e=o||(o={})).PAUSED="Paused",e.RESUMED="Resumed";var t=function(){function e(){this.contentStatus=o.RESUMED}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.init=function(){var e=new h5ads.GameDistribution("c035e676ef654227b1537dabbf194e00");h5ads.adWrapper.setAdProvider(e),window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA&&(h5branding.Utils.ASSET_LOCATION="assets/")},e.prototype.showAd=function(e,t,i){var n=this;r.LoaderHelper.show(),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){r.LoaderHelper.hide(),i&&i.call(n),n.contentStatus=o.PAUSED,r.PauseHandler.getInstance().pause()}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){r.LoaderHelper.hide(),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED),n.contentStatus=o.RESUMED,r.PauseHandler.getInstance().resume(),t&&t.call(n)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},e.prototype.isAdPlaying=function(){return this.contentStatus===o.PAUSED},e}();r.AdHandler=t}(Fabrique||(Fabrique={})),function(e){var t=function(){function e(){}return e.show=function(){var e=document.getElementById("loader");e&&(e.style.display="block")},e.hide=function(){var e=document.getElementById("loader");e&&(e.style.display="none")},e}();e.LoaderHelper=t}(Fabrique||(Fabrique={})),function(e){var t=function(){function t(e){this.game=e,this.focused=!0}return t.getInstance=function(e){return t.instance||(t.instance=new t(e)),t.instance},t.prototype.init=function(){var e=this;this.game.stage.disableVisibilityChange=!0,this.onPauseCallback=new Phaser.Signal,h5branding.Utils.isOnDevice()&&(document.addEventListener("pause",function(){return e.onPause()}),document.addEventListener("resume",function(){return e.onResume()})),this.game.onBlur.add(this.onBlur,this),this.game.onFocus.add(this.onFocus,this),this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},t.prototype.onBlur=function(){this.focused=!1,this.game.onPause.dispatch()},t.prototype.onFocus=function(){this.focused=!0,e.AdHandler.getInstance().isAdPlaying()||this.game.onResume.dispatch()},t.prototype.onPause=function(){this.game.sound.setMute(),this.onPauseCallback&&this.onPauseCallback.dispatch()},t.prototype.onResume=function(){this.game.sound.unsetMute()},t.prototype.pause=function(){this.game.onPause.dispatch()},t.prototype.resume=function(){this.hasFocus&&this.game.onResume.dispatch()},Object.defineProperty(t.prototype,"hasFocus",{get:function(){return this.focused},enumerable:!1,configurable:!0}),t}();e.PauseHandler=t}(Fabrique||(Fabrique={}));var Fabrique,test={getBoundingClientRect:function(){return{left:0,top:0,width:window.innerWidth,height:window.innerHeight}}};!function(e){var t=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.resize=function(e){if(e.device.desktop&&!h5branding.Hosts.isYandex()){var t=window.innerWidth-Constants.WIDTH/Constants.HEIGHT*window.innerHeight;600<=window.innerHeight&&240<=t?(this.leftBanner||(this.leftBanner=h5ads.adWrapper.loadBanner(h5ads.GameDistributionBannerSize.Skyscraper),this.leftBanner&&this.leftBanner.alignIn(test,h5ads.GameDistributionAlignment.CenterLeft)),this.rightBanner||(this.rightBanner=h5ads.adWrapper.loadBanner(h5ads.GameDistributionBannerSize.Skyscraper),this.rightBanner&&this.rightBanner.alignIn(test,h5ads.GameDistributionAlignment.CenterRight))):this.leftBanner?(this.leftBanner.destroy(),this.leftBanner=null):this.rightBanner&&(this.rightBanner.destroy(),this.rightBanner=null)}},e}();e.SideBanners=t}(Fabrique||(Fabrique={}));var TranslatedMMText=function(l){function e(e,t,i,n,r,o,a){void 0===o&&(o=void 0),void 0===a&&(a=void 0);var s=this,p={font:r+"px sc_gum_kidsregular",stroke:"#101742",strokeThickness:9};return(s=l.call(this,e,t,i,n,p)||this).anchor.set(.5),s.setFillToGradient(),s.setShadow(0,-2.5,"rgba(255, 255, 0, 1)",0,!0,!1),void 0!==o&&(s.inputEnabled=!0,s.events.onInputOver.add(s.onOver,s),s.events.onInputOut.add(s.onOut,s),s.events.onInputDown.add(o,a)),s}return __extends(e,l),e.prototype.onOver=function(){this.fill="#ffff00",this.scale.set(1.01)},e.prototype.onOut=function(){this.setFillToGradient(),this.scale.set(1)},e.prototype.setFillToGradient=function(){var e=this.context.createLinearGradient(0,0,0,this.height);e.addColorStop(0,"#ffffff"),e.addColorStop(1,"#b3fffc"),this.fill=e},e}(PhaserI18n.TranslatedText),TweenMax=function(){function d(){this.dummy=0}return d.Init=function(e){d.game=e},d.delayedCall=function(e,t,i){var n=new d;return e*=1e3,n.tween=this.game.add.tween(n).to({dummy:1},e,Phaser.Easing.Linear.None,!0),n.tween.onComplete.add(t,i),n},d.to=function(e,t,i){var n=new d,r=0;i.delay&&(r=i.delay,delete i.delay);var o=!1;i.yoyo&&(o=i.yoyo,delete i.yoyo);var a=0;i.repeat&&(a=i.repeat,delete i.repeat);var s=0;i.repeatDelay&&(s=i.repeatDelay,delete i.repeatDelay);var p=null;i.onComplete&&(p=i.onComplete,delete i.onComplete);var l=e;i.onCompleteContext&&(l=i.onCompleteContext,delete i.onCompleteContext);var h=Phaser.Easing.Linear.None;if(i.ease){var u=i.ease;"Linear.easeNone"==u?h=Phaser.Easing.Linear.None:"Quad.easeOut"==u?h=Phaser.Easing.Quadratic.Out:"Quad.easeIn"==u?h=Phaser.Easing.Quadratic.In:"Back.easeOut"==u?h=Phaser.Easing.Back.Out:"Back.easeIn"==u&&(h=Phaser.Easing.Back.In),delete i.ease}return n.tween=this.game.add.tween(e).to(i,1e3*t,h,!0,1e3*r,a,o),p&&n.tween.onComplete.add(p,l),0!=s&&(n.tween.repeatDelay(1e3*s),o&&n.tween.yoyoDelay(1e3*s)),n},d.pauseAll=function(){d.game.tweens.pauseAll()},d.resumeAll=function(){d.game.tweens.resumeAll()},d.prototype.pause=function(){this.tween.pause()},d.prototype.paused=function(){return this.tween.isPaused},d.prototype.resume=function(){this.tween.resume()},d.prototype.kill=function(){this.tween.stop()},d}();!function(t){var e=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._rotation=0,i._bodyType=null,i._body=null,i._shape=null,i._material=null,i._beginContactCallEnabled=!1,i._endContactCallEnabled=!1,i._visible=!0,i.points=null,t.rotation&&(i.rotation=t.rotation),i}return __extends(e,n),e.prototype.addPhysics=function(){this._nape=Constants.levelState._nape,this.defineBody(),this.createBody(),this.createMaterial(),this.createShape(),this.createFilter(),this.createConstraint()},e.prototype.destroy=function(){e.space.bodies.remove(this._body)},e.prototype.handlePreContact=function(e){return nape.callbacks.PreFlag.ACCEPT},e.prototype.handleBeginContact=function(e){},e.prototype.handleEndContact=function(e){},e.prototype.defineBody=function(){this._bodyType=nape.phys.BodyType.DYNAMIC},e.prototype.createBody=function(){if(this._body=new nape.phys.Body(this._bodyType,new nape.geom.Vec2(this._x,this._y)),(this._body.userData.myData=this).view){var e=0,t=0,i=0,n=0;if("topLeft"==this.registration){var r=Math.round((this.view.degrees+360)%360/90);"TriggerGraphics"==this.view.mc?1==r?(i=-5,n=-2):3==r&&(i=-4):"PushButtonGraphics"==this.view.mc?(2==r&&(n=-1),3==r&&(i=n=-7)):(e=-this.width/2,t=-this.height/2)}this._body.rotate(new nape.geom.Vec2(this._x+e,this._y+t),this.view.degrees*Math.PI/180),0!=i&&(this.x+=i),0!=n&&(this.y+=n)}this._body.rotate(new nape.geom.Vec2(this._x,this._y),this._rotation)},e.prototype.createMaterial=function(){this._material=new nape.phys.Material(.65,.57,1.2,1,0)},e.prototype.createShape=function(){if(null!=this.points&&1<this.points.length){for(var e=new nape.geom.Vec2List,t=0,i=this.points;t<i.length;t++){var n=i[t];e.push(new nape.geom.Vec2(n.x,n.y))}var r=new nape.shape.Polygon(e,this._material),o=r.validity();if(o!=nape.shape.ValidationResult.VALID){if(o!=nape.shape.ValidationResult.CONCAVE)throw new Error("Invalid polygon/polyline");return void new nape.geom.GeomPoly(e).convexDecomposition().foreach(function(e){this._body.shapes.add(new nape.shape.Polygon(e))})}this._shape=r}else 0!=this._radius?this._shape=new nape.shape.Circle(this._radius,null,this._material):this._shape=new nape.shape.Polygon(nape.shape.Polygon.box(this._width,this._height),this._material);this._body.shapes.add(this._shape)},e.prototype.createFilter=function(){this._body.setShapeFilters(new nape.dynamics.InteractionFilter(t.PhysicsCollisionCategories.Get("Level"),t.PhysicsCollisionCategories.GetAll()))},e.prototype.createConstraint=function(){this._body.space=e.space,this._body.cbTypes.add(e.PHYSICS_OBJECT)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._body?this._body.position.x:this._x},set:function(e){if(this._x=e,this._body){var t=this._body.position;t.x=this._x,this._body.position=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._body?this._body.position.y:this._y},set:function(e){if(this._y=e,this._body){var t=this._body.position;t.y=this._y,this._body.position=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._body?180*this._body.rotation/Math.PI:180*this._rotation/Math.PI},set:function(e){this._rotation=e*Math.PI/180,this._body&&(this._body.rotation=this._rotation)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e,this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},enumerable:!1,configurable:!0}),e.prototype.getBody=function(){return this._body},Object.defineProperty(e.prototype,"velocity",{get:function(){return[this._body.velocity.x,this._body.velocity.y,0]},set:function(e){this._body.velocity.setxy(e[0],e[1])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"beginContactCallEnabled",{get:function(){return this._beginContactCallEnabled},set:function(e){this._beginContactCallEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endContactCallEnabled",{get:function(){return this._endContactCallEnabled},set:function(e){this._endContactCallEnabled=e},enumerable:!1,configurable:!0}),e.prototype.draw=function(){this.view&&(this.view.degrees=this.rotation,this.view.x=this.x+this.offsetX,this.view.y=this.y+this.offsetY)},e.PHYSICS_OBJECT=new nape.callbacks.CbType,e}(t.CitrusObject);t.NapePhysicsObject=e}(objects||(objects={}));var NapeBody=nape.phys.Body;!function(e){var t=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._vec=new Vec2,i.registration="topLeft",Constants.levelState.addObject(i),i}return __extends(e,n),e.prototype.hit=function(e){},e.prototype.action=function(){},e.prototype.moveHorizontally=function(e,t){(0<t&&e.velocity.x<t||t<0&&e.velocity.x>t)&&(e.velocity.x=t)},e.prototype.createMaterial=function(){n.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.density=1,this._material.staticFriction=.1,this._material.dynamicFriction=1},e.prototype.destroy=function(){n.prototype.destroy.call(this),Constants.levelState.removeObject(this)},e}(e.NapePhysicsObject);e.LevelObject=t}(objects||(objects={}));var Vec2=nape.geom.Vec2;!function(e){var t=function(i){function e(e){var t=i.call(this,"ball",{view:e,radius:17,x:+e.x+18,y:+e.y-18,group:4})||this;return t.beginContactCallEnabled=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=2,this._material.density=1.4,this._material.staticFriction=.5,this._material.dynamicFriction=1},e.prototype.handleBeginContact=function(e){},e}(e.LevelObject);e.BasketBall=t}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"bigBox",{view:e,width:e.width,height:e.height,x:+e.x+e.width/2,y:+e.y-e.height/2,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=.1,this._material.density=.9,this._material.staticFriction=.1,this._material.dynamicFriction=.35},e.prototype.handleBeginContact=function(e){22<this._body.velocity.y&&(SoundManager.getInstance().playSound("BoxDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,this.isReadyToPlaySoundTrue,this))},e.prototype.isReadyToPlaySoundTrue=function(){this._isReadyToPlaySound=!0},e}(e.LevelObject);e.BigBox=t}(objects||(objects={}));var NBody=nape.phys.Body;!function(e){var t=function(n){function e(e,t){void 0===t&&(t=null);var i=n.call(this,e,t)||this;return i.acceleration=30,i.maxVelocity=240,i.jumpHeight=330,i.inputChannel=0,i._groundContacts=[],i._groundContactsCount=0,i._onGround=!1,i._dynamicFriction=.5,i._playerMovingHero=!1,i._controlsEnabled=!0,i._isMoveKeyPressed=!1,i._isJustJumped=!1,i.registration="center",i.updateCallEnabled=!0,i.beginContactCallEnabled=!0,i.endContactCallEnabled=!0,i}return __extends(e,n),Object.defineProperty(e.prototype,"controlsEnabled",{get:function(){return this._controlsEnabled},set:function(e){this._controlsEnabled=e,this._body.velocity=Vec2.weak()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onGround",{get:function(){return this._onGround},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamicFriction",{get:function(){return this._dynamicFriction},set:function(e){this._material.dynamicFriction=this._dynamicFriction=e},enumerable:!1,configurable:!0}),e.prototype.update=function(e){n.prototype.update.call(this,e);var t=this._body.velocity;this._controlsEnabled&&(this._isMoveKeyPressed=!1,this._ce.input.isDoing("right",this.inputChannel)?(t.x+=this.acceleration,this._isMoveKeyPressed=!0,this.inverted=!1):this._ce.input.isDoing("left",this.inputChannel)?(t.x-=this.acceleration,this._isMoveKeyPressed=!0,this.inverted=!0):t.x*=.75,this._isMoveKeyPressed&&!this._playerMovingHero?(this._playerMovingHero=!0,this._material.dynamicFriction=0):!this._isMoveKeyPressed&&this._playerMovingHero&&(this._playerMovingHero=!1,this._material.dynamicFriction=this._dynamicFriction),this._onGround&&this._ce.input.isDoing("jump",this.inputChannel)&&(this._isMoveKeyPressed=!0,"bouncer"==name?0<this._groundContacts.length&&this._groundContacts[0]==Constants.hustler.body&&0==Constants.hustler.onGround||(t.y=-this.jumpHeight,this.jump()):0<this._groundContacts.length&&this._groundContacts[0]==Constants.bouncer.body&&0==Constants.bouncer.onGround||(t.y=-this.jumpHeight,this.jump())),t.x>this.maxVelocity?t.x=this.maxVelocity:t.x<-this.maxVelocity&&(t.x=-this.maxVelocity),this._body.velocity=t),this.updateAnimation(e)},e.prototype.createBody=function(){n.prototype.createBody.call(this),this._body.allowRotation=!1},e.prototype.createMaterial=function(){n.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.staticFriction=0},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);if(0<e.arbiters.length&&e.arbiters.at(0).collisionArbiter){var i=Math.round(180*e.arbiters.at(0).collisionArbiter.normal.angle/Math.PI);(45<=i&&i<=135||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&(this._groundContacts.push(t.body),this._onGround=!0)}},e.prototype.handleEndContact=function(e){var t=NapeUtils.CollisionGetOther(this,e),i=this._groundContacts.indexOf(t.body);-1!=i&&(this._groundContacts.splice(i,1),0==this._groundContacts.length&&(this._onGround=!1))},e.prototype.jump=function(){this._isJustJumped=!0,this._onGround=!1},e.prototype.updateAnimation=function(e){},e}(e.LevelObject);e.Hero=t}(objects||(objects={}));var Shape=nape.shape.Shape,PivotJoint=nape.constraint.PivotJoint,InteractionFilter=nape.dynamics.InteractionFilter;!function(t){var e=function(n){function e(e){var t=n.call(this,"bouncer",{view:e,width:48,height:55,x:+e.x+33,y:+e.y-24,group:4})||this;t.burgers=0,t._clip=e;var i=new MovieClip("grabbedObject",0,-74);return t.view.addChild(i),t._grabbedVisual=i,t._grabbedVisual.visible=!1,t.initialize2(),t}return __extends(e,n),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,(Constants.bouncer=this).inputChannel=Constants.bouncerInputChannel,this.jumpHeight=170,this.maxVelocity=39,this.acceleration=22,this._niche=null,this._idleTime=0,this._isReadyToPlayStepSound=!0,this._isReadyToPlayPushSound=!0,this._isReadyToGrab=!0,this.offsetY=28,this._clip.addAnimation("Stand",1,50,30,!0),this._clip.addAnimation("Walk",51,85,50,!0),this._clip.addAnimation("JumpUp",86,96,35),this._clip.addAnimation("JumpDown",97,103,35),this._clip.addAnimation("Push",104,121,40,!0),this._clip.addAnimation("GiveUp",122,122,1),this._clip.addAnimation("Hiding1",123,123,1),this._clip.addAnimation("Hiding2",124,124,1),this._clip.addAnimation("Hiding3",125,125,1),this._clip.addAnimation("Hiding4",126,126,1),this._clip.addAnimation("Idle1",127,279,40,!1,this.stand,this),this._clip.addAnimation("Idle2",280,400,40,!1,this.stand,this),this._clip.addAnimation("Grab",401,415,40,!1,this.stand,this),this._clip.addAnimation("WalkGrabbed",425,460,50,!0),this._clip.addAnimation("StandGrabbed",425,425,1),this._clip.addAnimation("JumpGrabbedUp",461,471,35),this._clip.addAnimation("JumpGrabbedDown",472,478,35),this._clip.addAnimation("Throw",479,496,50,!1,this.stand,this),this._clip.addAnimation("Balance",497,573,40),this._clip.playAnimation("Stand")},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"niche"==t.name&&(this._niche=t)},e.prototype.handleEndContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"niche"==t.name&&(this._niche=null),this._lastGrabbedObject&&t==this._lastGrabbedObject&&this._isReadyToDrop&&(TweenMax.delayedCall(.1,function(){this._isReadyToGrab=!0},this),this._isReadyToDrop=!1,this._lastGrabbedObject.body.setShapeFilters(new InteractionFilter(1,-1,1,-1)),"box"!=this._lastGrabbedObject.name&&"removable"!=this._lastGrabbedObject.name||(this._lastGrabbedObject.body.allowRotation=!0),this._lastGrabbedObject=null,this._material.density/=3)},e.prototype.jump=function(){this._isJustJumped||(this._grabbedObject?this._clip.playAnimation("JumpGrabbedUp"):this._clip.playAnimation("JumpUp"),SoundManager.getInstance().playSound("BouncerJumpSound"),this._isJustJumped=!0,TweenMax.delayedCall(.1,function(){this._isJustJumped=!1},this),this._onGround=!1)},e.prototype.hide=function(){this.isHidden||this._niche.isOccupied||(this._occupiedNiche=this._niche,this._niche.isOccupied=!0,this.controlsEnabled=!1,this.isHidden=!0,TweenMax.to(this.view,.3,{tintRed:27,tintGreen:36,tintBlue:62}),TweenMax.to(this,.3,{x:this._niche.x}),TweenMax.to(this,.3,{offsetY:this.offsetY-3}),this._clip.playAnimation("Hiding"+String(Math.round(3*Math.random()+1))),this._shape.filter=this._nicheFilter,Constants.levelState.groupSprites[0].addChild(this.view),TweenMax.delayedCall(.31,function(){this.controlsEnabled=!0},this))},e.prototype.unhide=function(){this.isHidden&&(this._occupiedNiche.isOccupied=!1,this._occupiedNiche=null,this.isHidden=!1,TweenMax.to(this.view,.1,{tintRed:255,tintGreen:255,tintBlue:255}),this.offsetY+=3,this._shape.filter=this._filter,Constants.levelState.groupSprites[this.group].addChild(this.view))},e.prototype.giveUp=function(){this._grabbedObject&&this.drop(),this._isGaveUp=!0,this._clip.playAnimation("GiveUp"),this.controlsEnabled=!1,this._body.velocity.x=0},e.prototype.stand=function(){this._grabbedObject?this._clip.playAnimation("StandGrabbed"):this._clip.playAnimation("Stand")},e.prototype.grab=function(e){"fixedBox"==e.name||"hustler"==e.name||e instanceof t.Door||e instanceof t.Elevator||"sprite"==e.name||"tile"==e.name||"plank"==e.name||(this._isReadyToGrab=!1,this._isReadyToDrop=!1,e.body.setShapeFilters(new InteractionFilter(1,t.PhysicsCollisionCategories.GetAllExcept("bouncer"),1,-1)),"removable"==e.name&&e.action(),this._grabbedObject=e,this._grabbedObject.body.angularVel=0,this._grabbedObject.body.allowRotation=!1,this._grabbedObject.body.shapes.at(0).castShape.sensorEnabled=!0,this._joint=new PivotJoint(this.body,e.body,Vec2.get(0,-24),Vec2.get(0,0)),this._joint.space=this._body.space,this._material.density*=3,this._clip.playAnimation("Grab"),this._grabbedObject.x<this.x&&(this.inverted=!0),this.controlsEnabled=!1,TweenMax.delayedCall(.39,function(){this._grabbedObject&&(this._grabbedObject.view.x=this._grabbedObject.view.y=0,this._grabbedObject.view.degrees=this._grabbedObject.rotation,this._grabbedVisual.visible=!0,this._grabbedVisualParent=this._grabbedObject.view.parent,this._grabbedVisual.addChild(this._grabbedObject.view),this.controlsEnabled=!0)},this))},e.prototype.drop=function(e){void 0===e&&(e=!1),e?(this._grabbedObject.body.position.x+=this.inverted?-25:25,this._grabbedObject.body.position.y+=10,this._grabbedObject.body.velocity.y=-50):(this._grabbedObject.body.velocity.x=this.inverted?-80:80,this._grabbedObject.body.velocity.y=-240),this._joint.space=null,this._joint=null,this._grabbedObject.body.shapes.at(0).castShape.sensorEnabled=!1,this._grabbedVisualParent&&this._grabbedVisualParent.addChild(this._grabbedObject.view),this._grabbedObject.view.degrees=0,this._isReadyToDrop=!0,this._lastGrabbedObject=this._grabbedObject,this._grabbedObject=null,this._grabbedVisual.visible=!1},e.prototype.createFilter=function(){this._nicheFilter=new InteractionFilter(1,t.PhysicsCollisionCategories.Get("tile"),1,t.PhysicsCollisionCategories.Get("tile")),this._filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("bouncer"),t.PhysicsCollisionCategories.GetAllExcept("enemy")),this._shape.filter=this._filter,this._enemySensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.Get("enemy")),this._pushSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("tile","hidden")),this._balanceLeftSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden")),this._balanceRightSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden"))},e.prototype.createMaterial=function(){n.prototype.createMaterial.call(this),this._material.density=1.2},e.prototype.createShape=function(){this._shape=new Polygon([new Vec2(-this._width/2,-this._height/2+16),new Vec2(-this._width/2+9,-this._height/2),new Vec2(this._width/2-9,-this._height/2),new Vec2(this._width/2,-this._height/2+16),new Vec2(this._width/2,this._height/2-6),new Vec2(this._width/2-13,this._height/2),new Vec2(-this._width/2+13,this._height/2),new Vec2(-this._width/2,this._height/2-6)],this._material),this._body.shapes.add(this._shape),this._enemySensor=new Polygon([new Vec2(-this._width/2,-this._height/2+16),new Vec2(this._width/2,-this._height/2+16),new Vec2(this._width/2,this._height/2-4),new Vec2(-this._width/2,this._height/2-4)],this._material),this._enemySensor.sensorEnabled=!0,this._enemySensor.group=CollisionHelper.nonCollidable,this._body.shapes.add(this._enemySensor),this._pushSensor=new Polygon([new Vec2(-this._width/2-2,-2),new Vec2(this._width/2+2,-2),new Vec2(this._width/2+2,2),new Vec2(this._width/2-10,this._height/2-6),new Vec2(-this._width/2+10,this._height/2-6),new Vec2(-this._width/2-2,2)],this._material),this._pushSensor.sensorEnabled=!0,this._body.shapes.add(this._pushSensor),this._pushSensor.group=CollisionHelper.nonCollidable,this._balanceLeftSensor=new Polygon([new Vec2(-this._width/2+1,this.height/2+2),new Vec2(-2,this.height/2+2),new Vec2(-2,this.height/2+5),new Vec2(-this._width/2+1,this.height/2+5)],this._material),this._balanceLeftSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceLeftSensor),this._balanceLeftSensor.group=CollisionHelper.nonCollidable,this._balanceRightSensor=new Polygon([new Vec2(2,this.height/2+2),new Vec2(this._width/2-1,this.height/2+2),new Vec2(this._width/2-1,this.height/2+5),new Vec2(2,this.height/2+5)],this._material),this._balanceRightSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceRightSensor),this._balanceRightSensor.group=CollisionHelper.nonCollidable},e.prototype.checkCollisions=function(){this._isObstacleOnLeft=!1,this._isObstacleOnRight=!1,this._isLeftBalanceSensor=!1,this._isRightBalanceSensor=!1;for(var e=this._groundContactsCount=0;e<this._body.arbiters.length;e++){var t=this._body.arbiters.at(e);t.shape1==this._pushSensor?this._isReadyToGrab&&(this._ce.input.justDid("grab",this.inputChannel)||this._ce.input.justDid("grabDown",this.inputChannel))?this.grab(t.body2.userData.myData):t.body2.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0:t.shape2==this._pushSensor&&(this._isReadyToGrab&&(this._ce.input.justDid("grab",this.inputChannel)||this._ce.input.justDid("grabDown",this.inputChannel))?this.grab(t.body1.userData.myData):t.body1.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0),t.shape1==this._balanceLeftSensor||t.shape2==this._balanceLeftSensor?this._isLeftBalanceSensor=!0:t.shape1!=this._balanceRightSensor&&t.shape2!=this._balanceRightSensor||(this._isRightBalanceSensor=!0),t.shape1==this._shape?this.checkGround(t,t.body2):t.shape2==this._shape&&this.checkGround(t,t.body1)}0==this._groundContactsCount&&(this._onGround=!1)},e.prototype.checkGround=function(e,t){if(e.collisionArbiter){var i=Math.round(180*e.collisionArbiter.normal.angle/Math.PI);if(t==Constants.hustler.body&&!Constants.hustler.onGround)return;(15<=i&&i<=175||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&this._body.position.y<t.position.y-15&&(this._groundContactsCount++,this._onGround=!0)}},e.prototype.update=function(e){this.checkCollisions(),n.prototype.update.call(this,e),!this._isGaveUp&&this._controlsEnabled&&(this._grabbedObject&&(this._ce.input.justDid("grab",this.inputChannel)?this.drop():this._ce.input.justDid("grabDown",this.inputChannel)&&this.drop(!0)),!this.isHidden&&!this._isMoveKeyPressed&&this._body.velocity.length<.1&&null==this._grabbedObject&&this._niche?this.hide():this.isHidden&&this._isMoveKeyPressed&&this.unhide())},e.prototype.updateAnimation=function(e){if(!this._isGaveUp&&"Grab"!=this._clip.currentAnimation&&"Throw"!=this._clip.currentAnimation){this._isMoveKeyPressed?this._idleTime=0:this._idleTime+=e,17<this._idleTime&&!this.isHidden&&null==this._grabbedObject&&(.5<Math.random()?(this._idleTime=0,SoundManager.getInstance().playSound("BouncerIdleSound1"),this._clip.playAnimation("Idle1")):(this._idleTime=0,SoundManager.getInstance().playSound("BouncerIdleSound2"),this._clip.playAnimation("Idle2")));var t=this._body.velocity.x;this._onGround&&!this._isJustJumped?null==this._grabbedObject&&(this._ce.input.isDoing("right",this.inputChannel)&&this._isObstacleOnRight||this._ce.input.isDoing("left",this.inputChannel)&&this._isObstacleOnLeft)?(this._isReadyToPlayPushSound&&(this._isReadyToPlayPushSound=!1,TweenMax.delayedCall(2,function(){this._isReadyToPlayPushSound=!0},this),SoundManager.getInstance().playSound("BouncerPushSound")),this._clip.playAnimation("Push")):t<-1||1<t?this._isMoveKeyPressed&&(this._grabbedObject?(SoundManager.getInstance().stopSound("BouncerPushSound"),this._clip.playAnimation("WalkGrabbed")):(SoundManager.getInstance().stopSound("BouncerIdleSound2"),SoundManager.getInstance().stopSound("BouncerIdleSound1"),SoundManager.getInstance().stopSound("BouncerPushSound"),this._clip.playAnimation("Walk")),this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.4,function(){this._isReadyToPlayStepSound=!0},this),SoundManager.getInstance().playSound("BouncerStepSound"))):"Idle1"==this._clip.currentAnimation||"Idle2"==this._clip.currentAnimation||this.isHidden||(SoundManager.getInstance().stopSound("BouncerPushSound"),this._grabbedObject?this._clip.playAnimation("StandGrabbed"):this._isLeftBalanceSensor&&!this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!0):!this._isLeftBalanceSensor&&this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!1):(this.inverted=!1,this._clip.playAnimation("Stand"))):"JumpDown"!=this._clip.currentAnimation&&"JumpGrabbedDown"!=this._clip.currentAnimation&&.2<this._body.velocity.y&&(this._grabbedObject?this._clip.playAnimation("JumpGrabbedDown"):this._clip.playAnimation("JumpDown"))}},e.prototype.goTo=function(e){this._grabbedObject&&this.drop(),this._isGaveUp=!0,this.body.space=null,this._clip.playAnimation("Walk"),this.inverted=this.x>e,TweenMax.to(this,.5,{x:e,ease:"Linear.easeNone",onComplete:function(){Constants.bouncer.view.visible=!1}})},e}(t.Hero);t.Bouncer=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"box",{view:e,width:33,height:33,x:+e.x+16.5,y:+e.y-16.5,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.density=1.5},e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("BoxDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,this.isReadyToPlaySoundTrue,this))},e.prototype.isReadyToPlaySoundTrue=function(){this._isReadyToPlaySound=!0},e}(e.LevelObject);e.Box=t}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"burger",{view:e,radius:12,x:+e.x+14,y:+e.y-12,group:4})||this;return t._shape.sensorEnabled=!0,t.beginContactCallEnabled=!0,t._body.setShapeFilters(new InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(e,i),e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"bouncer"!=t.name&&"hustler"!=t.name||Constants.levelState.topPanel.collectBurger(this)},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Burger=e}(objects||(objects={}));var Ray=nape.geom.Ray,RayResult=nape.geom.RayResult;!function(r){var e=function(n){function e(e){var t=n.call(this,"camera",{view:e,width:20,height:20,x:+e.x+13,y:+e.y-13,group:4})||this;t._shape.sensorEnabled=!0,t.updateCallEnabled=!0,e.stop(),t._camera=new MovieClip("CameraGun",0,0),t._crossPoint=new MovieClip("crossPoint",-18,0),t._rayClip=new MovieClip("_beam",-18,0),t.view.addChild(t._camera),t._camera.addChild(t._rayClip),t.view.parent.addChild(t._crossPoint),t._filter=new InteractionFilter(1,r.PhysicsCollisionCategories.GetAllExcept("hidden")),t._minAngle=-parseFloat(e.params.minAngle),t._maxAngle=-parseFloat(e.params.maxAngle),t._delay=parseFloat(e.params.delay);var i=1;return e.params.speedX&&(i=parseFloat(e.params.speedX)),t._camera.degrees=t._minAngle,t._motionTween=TweenMax.to(t._camera,Math.abs(t._minAngle-t._maxAngle)/6/i,{degrees:t._maxAngle,repeat:-1,yoyo:!0,repeatDelay:t._delay}),t.relax(),t}return __extends(e,n),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.relax=function(){this._state="relax",this._rayClip.gotoAndStop(e.GREEN_BEAM),this._crossPoint.gotoAndStop(e.GREEN_CROSS),this._motionTween.resume(),this._dangerTween&&(this._dangerTween.kill(),this._dangerTween=null),this._relaxTween=null},e.prototype.danger=function(){this._state="danger",SoundManager.getInstance().playSound("YellowCameraSound"),this._rayClip.gotoAndStop(e.YELLOW_BEAM),this._crossPoint.gotoAndStop(e.YELLOW_CROSS),this._motionTween.pause(),this._relaxTween&&this._relaxTween.kill(),this._relaxTween=null,this._dangerTween&&this._dangerTween.paused()?this._dangerTween.resume():this._dangerTween=TweenMax.delayedCall(.5,this.alert,this)},e.prototype.suspect=function(){this._state="suspect",this._dangerTween.pause(),this._relaxTween||(this._relaxTween=TweenMax.delayedCall(1,this.relax,this))},e.prototype.alert=function(){this._state="red",SoundManager.getInstance().playSound("RedCameraSound"),this._rayClip.gotoAndStop(e.RED_BEAM),this._crossPoint.gotoAndStop(e.RED_CROSS),Constants.hustler.giveUp(),Constants.bouncer.giveUp(),Constants.levelState.failLevel()},e.prototype.update=function(e){if(n.prototype.update.call(this,e),this._ray=new Ray(this._body.worldCOM,Vec2.fromPolar(1,(this._camera.degrees+180)/180*Math.PI)),this._ray.maxDistance=1e3,this._rayResult=this._body.space.rayCast(this._ray,!1,this._filter),this._rayResult){var t=this._ray.at(this._rayResult.distance);this._crossPoint.x=t.x,this._crossPoint.y=t.y,this._rayClip.scale.x=(this._rayResult.distance-15.75)/100;var i=this._rayResult.shape.body.userData.myData.name;"bouncer"==i||"hustler"==i||"guardian"==i&&this._rayResult.shape.body.userData.myData.isWounded?"relax"!=this._state&&"suspect"!=this._state||this.danger():"danger"==this._state&&this.suspect()}},e.prototype.destroy=function(){n.prototype.destroy.call(this),this._motionTween&&this._motionTween.kill(),this._dangerTween&&this._dangerTween.kill(),this._relaxTween&&this._relaxTween.kill()},e.RED_CROSS=1,e.RED_BEAM=1,e.YELLOW_CROSS=3,e.YELLOW_BEAM=2,e.GREEN_CROSS=2,e.GREEN_BEAM=3,e}(r.LevelObject);r.Camera=e}(objects||(objects={})),function(e){var t=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._registration="topLeft",1<i.view.totalFrames()&&i.view.playLoop(),i}return __extends(e,n),e}(e.CitrusObject);e.CitrusSprite=t}(objects||(objects={})),function(s){var e=function(o){function a(e){var t=this,i=e._degrees,n=e.rotation=0;e.params.type&&(n=Math.round(parseFloat(e.params.type))),0==n&&(n=1);var r="subject"+n;return e.gotoAndStop(n),(t=o.call(this,r,{view:e,rotation:i,width:20,height:69,x:+e.x+10*Math.cos(i/180*Math.PI)+35*Math.sin(i/180*Math.PI),y:+e.y-35*Math.cos(i/180*Math.PI)+10*Math.sin(i/180*Math.PI),group:2})||this)._isGlass=0<=e.frameName.indexOf("GlassDoorGraphics"),i=(i%360+360)%360,0==Math.round(i)?t._direction=a.UP:180==Math.round(i)?t._direction=a.DOWN:90==Math.round(i)?t._direction=a.LEFT:270==Math.round(i)&&(t._direction=a.RIGHT),t._initX=t.x,t._initY=t.y,t.updateCallEnabled=!0,t._isGlass&&t._body.setShapeFilters(new InteractionFilter(s.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(a,o),a.prototype.action=function(){this._isOpened?this._isOpened=!1:this._isOpened=!0,this._isMoving=!0,SoundManager.getInstance().playSound("OpenDoorSound")},a.prototype.stop=function(){this._isMoving=!1,this.body.velocity.x=0,this.body.velocity.y=0},a.prototype.defineBody=function(){this._bodyType=BodyType.KINEMATIC},a.prototype.update=function(e){o.prototype.update.call(this,e),this._isMoving&&(this._direction==a.UP?this._isOpened?this.y<=this._initY-69.5?this.stop():this._body.velocity.y=-50:this.y>=this._initY-.5?this.stop():this._body.velocity.y=50:this._direction==a.DOWN?this._isOpened?this.y>=this._initY+69.5?this.stop():this._body.velocity.y=50:this.y<=this._initY+.5?this.stop():this._body.velocity.y=-50:this._direction==a.LEFT?this._isOpened?this.x<=this._initX-69.5?this.stop():this._body.velocity.x=-50:this.x>=this._initX-.5?this.stop():this._body.velocity.x=50:this._direction==a.RIGHT&&(this._isOpened?this.x>=this._initX+69.5?this.stop():this._body.velocity.x=50:this.x<=this._initX+.5?this.stop():this._body.velocity.x=-50))},a.UP=1,a.DOWN=2,a.LEFT=3,a.RIGHT=4,a}(s.LevelObject);s.Door=e}(objects||(objects={})),function(e){var t=function(o){function a(e){var t=this,i=0;e.params.type&&(i=Math.round(parseFloat(e.params.type))),0==i&&(i=1);var n="subject"+String(i),r=!1;return"BigElevatorGraphics"==e.mc&&(r=!0),(t=o.call(this,n,{view:e,width:+(r?102:70),height:+(r?20:16),x:+e.x+ +(r?104:70)/2,y:+e.y-(r?10:12),group:4})||this).view.getChild("front").gotoAndStop(i),t._isBig=r,t._distanceX=parseFloat(e.params.distanceX),t._distanceY=parseFloat(e.params.distanceY),t._speedX=parseFloat(e.params.speedX),t._speedY=parseFloat(e.params.speedY),t._speedY<0?t._direction=a.UP:0<t._speedY?t._direction=a.DOWN:t._speedX<0?t._direction=a.LEFT:0<t._speedX&&(t._direction=a.RIGHT),t._initX=t.x,t._initY=t.y,t.updateCallEnabled=!0,t}return __extends(a,o),a.prototype.action=function(){this._isMovingToTarget?this._isMovingToTarget=!1:this._isMovingToTarget=!0,this._isMoving=!0},a.prototype.defineBody=function(){this._bodyType=BodyType.KINEMATIC},a.prototype.createShape=function(){o.prototype.createShape.call(this),this._isBig?(this._sensor1=new Polygon(OzUtil.verticesArrayToVec2([[56,0],[56,13],[10,13],[10,0]]),this._material),this._sensor2=new Polygon(OzUtil.verticesArrayToVec2([[-56,0],[-56,13],[-10,13],[-10,0]]),this._material)):(this._sensor1=new Polygon(OzUtil.verticesArrayToVec2([[40,0],[40,13],[10,13],[10,0]]),this._material),this._sensor2=new Polygon(OzUtil.verticesArrayToVec2([[-40,0],[-40,13],[-10,13],[-10,0]]),this._material)),this._sensor3=new Polygon(OzUtil.verticesArrayToVec2([[-33,0],[-33,13],[33,13],[33,0]]),this._material),this._sensor1.sensorEnabled=!0,this._sensor2.sensorEnabled=!0,this._sensor3.sensorEnabled=!0,this._body.shapes.add(this._sensor1),this._body.shapes.add(this._sensor2),this._body.shapes.add(this._sensor3)},a.prototype.createMaterial=function(){o.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.dynamicFriction=8},a.prototype.pause=function(){this._isPaused=!0,this.body.velocity.x=0,this.body.velocity.y=0},a.prototype.stop=function(){this._isMoving=!1,this.body.velocity.x=0,this.body.velocity.y=0},a.prototype.update=function(e){if(this._isPaused=!1,this._isMoving){for(var t=0;t<this._body.arbiters.length;t++){var i=this._body.arbiters.at(t);this._direction==a.LEFT&&!this._isMovingToTarget||this._direction==a.RIGHT&&this._isMovingToTarget?i.shape1==this._sensor1?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor1&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause():this._direction==a.LEFT&&this._isMovingToTarget||this._direction==a.RIGHT&&!this._isMovingToTarget?i.shape1==this._sensor2?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor2&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause():(this._direction==a.DOWN&&this._isMovingToTarget||this._direction==a.UP&&!this._isMovingToTarget)&&(i.shape1==this._sensor3?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor3&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause())}this._direction==a.UP?this._isMovingToTarget?this.y<=this._initY-this._distanceY?this.stop():this._isPaused||(this._body.velocity.y=this._speedY):this.y>=this._initY?this.stop():this._isPaused||(this._body.velocity.y=-this._speedY):this._direction==a.DOWN?this._isMovingToTarget?this.y>=this._initY+this._distanceY?this.stop():this._isPaused||(this._body.velocity.y=this._speedY):this.y<=this._initY?this.stop():this._isPaused||(this._body.velocity.y=-this._speedY):this._direction==a.LEFT?this._isMovingToTarget?this.x<=this._initX-this._distanceX?this.stop():this._isPaused||(this._body.velocity.x=this._speedX):this.x>=this._initX?this.stop():this._isPaused||(this._body.velocity.x=-this._speedX):this._direction==a.RIGHT&&(this._isMovingToTarget?this.x>=this._initX+this._distanceX?this.stop():this._isPaused||(this._body.velocity.x=this._speedX):this.x<=this._initX?this.stop():this._isPaused||(this._body.velocity.x=-this._speedX))}0!=this.body.velocity.x||0!=this.body.velocity.y?(this._isMovingToTarget?(this.view.getChild("cogwheel1").degrees-=6,this.view.getChild("cogwheel2").degrees+=6):(this.view.getChild("cogwheel1").degrees+=6,this.view.getChild("cogwheel2").degrees-=6),this._isPlayingSound||(SoundManager.getInstance().playSound("ElevatorSound"),this._isPlayingSound=!0)):this._isPlayingSound&&(SoundManager.getInstance().stopSound("ElevatorSound"),this._isPlayingSound=!1),o.prototype.update.call(this,e)},a.prototype.destroy=function(){o.prototype.destroy.call(this),SoundManager.getInstance().stopSound("ElevatorSound")},a.UP=1,a.DOWN=2,a.LEFT=3,a.RIGHT=4,a}(e.LevelObject);e.Elevator=t}(objects||(objects={}));var BodyType=nape.phys.BodyType;!function(i){var e=function(t){function e(e){return t.call(this,"limiter",{width:15,height:15,x:+e.x+7.5,y:+e.y-7.5})||this}return __extends(e,t),e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(i.PhysicsCollisionCategories.Get("limiter"),i.PhysicsCollisionCategories.Get("enemy"),i.PhysicsCollisionCategories.Get("limiter"),i.PhysicsCollisionCategories.Get("enemy")))},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(i.LevelObject);i.EnemyLimiter=e}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=this;return e.stop(),(t=i.call(this,"exit",{view:e,width:80,height:20,x:+e.x+35,y:+e.y-35+30})||this).offsetY=-30,t._shape.sensorEnabled=!0,t.beginContactCallEnabled=!0,t.endContactCallEnabled=!0,t._body.group=CollisionHelper.nonCollidable,t._body.setShapeFilters(new InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(e,i),e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"bouncer"==t.name?Constants.bouncer.isAtLevelExit=!0:"hustler"==t.name&&(Constants.hustler.isAtLevelExit=!0)},e.prototype.handleEndContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"bouncer"==t.name?Constants.bouncer.isAtLevelExit=!1:"hustler"==t.name&&(Constants.hustler.isAtLevelExit=!1)},e.prototype.getBrothers=function(e,t){void 0===t&&(t=null),this.view.currentFrameNumber=1,TweenMax.to(this.view,.5,{currentFrameNumber:24,onComplete:this.delaySecondExitAnim,onCompleteContext:this}),Constants.bouncer.goTo(this.x+22),Constants.hustler.goTo(this.x-15),TweenMax.delayedCall(1.4,e,t),SoundManager.getInstance().playSound("ExitSound")},e.prototype.delaySecondExitAnim=function(){var e=this.view.totalFrames();this.view.currentFrameNumber=25,TweenMax.to(this.view,.8,{currentFrameNumber:e})},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Exit=e}(objects||(objects={})),function(i){var e=function(t){function e(e){return t.call(this,"fixedBox",{width:+e.width,height:+e.height,x:+(e.x+e.width/2),y:+(e.y+e.height/2)})||this}return __extends(e,t),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(i.PhysicsCollisionCategories.Get("tile"),i.PhysicsCollisionCategories.GetAll(),i.PhysicsCollisionCategories.Get("tile"),i.PhysicsCollisionCategories.GetAll()))},e}(i.LevelObject);i.FixedBox=e}(objects||(objects={})),function(t){var e=function(r){function e(e,t,i,n){return r.call(this,"fixedBox",{width:+i,height:+n,x:+(+e+ +i/2),y:+(+t+ +n/2)})||this}return __extends(e,r),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll(),t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll()))},e}(t.LevelObject);t.FixedBox2=e}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"guardian",{view:e,width:38,height:48,x:+e.x+28,y:+e.y-24,group:4})||this;return t.WALK_SPEED=25,t.RUN_SPEED=40,t._clip=e,t._body.allowRotation=!1,t.initialize2(),t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,this.updateCallEnabled=!0,this.beginContactCallEnabled=!0,this._isReadyToPlayStepSound=!0,this._timeNotMoving=0,this._direction=1,this.offsetX=0,this.offsetY=25,0<=this.view.frameName.indexOf("Guardian2Graphics")?(this.WALK_SPEED=20,this._clip.addAnimation("Stand",1,41,30,!0),this._clip.addAnimation("Walk",42,66,40,!0),this._clip.addAnimation("Run",67,82,40,!0),this._clip.addAnimation("Wound",83,99,40),this._clip.addAnimation("WoundStatic",98,98,1),this._isWeak=!0):0<=this.view.frameName.indexOf("GuardianGraphics")?(this._clip.addAnimation("Stand",1,43,30,!0),this._clip.addAnimation("Walk",44,68,40,!0),this._clip.addAnimation("Run",69,84,40,!0),this._clip.addAnimation("Wound",85,101,40),this._clip.addAnimation("WoundStatic",100,100,1),this._isWeak=!0):(this._clip.addAnimation("Stand",1,37,30,!0),this._clip.addAnimation("Walk",38,57,40,!0),this._clip.addAnimation("Run",58,71,40,!0),this._clip.addAnimation("Wound",72,131,35,!1,this.wakeUp,this)),this._taskManager=new TaskManager(!0),this.assignTasks()},e.prototype.woundStatic=function(){this._clip.playAnimation("WoundStatic")},e.prototype.assignTasks=function(){this._taskManager.removeAllTasks(),this._taskManager.addTask(this,this.wait),this._taskManager.addPause(80),this._taskManager.addInstantTask(this,this.startPatrol),this._taskManager.addTask(this,this.patrol)},e.prototype.handleBeginContact=function(e){if(!this.isWounded){var t=NapeUtils.CollisionGetOther(this,e);if(("box"==t.name||"removable"==t.name)&&30<t.body.normalImpulse(this.body,!0).xy(!0).length&&t.y<this.y)this._taskManager.addUrgentInstantTask(this,this.wound);else if("bouncer"==t.name&&!Constants.bouncer.isHidden||"hustler"==t.name&&!Constants.hustler.isHidden){this._taskManager.removeAllTasks(),this._clip.playAnimation("Stand"),this.isWounded=!0,Constants.hustler.giveUp(),Constants.bouncer.giveUp();var i=new MovieClip("FightingGraphics",0,0);i.playOnce(),i.y=this.y,i.x=this.x+.7*(t.x-this.x),this.view.parent.addChild(i),SoundManager.getInstance().playSound("AttackSound"),TweenMax.delayedCall(1,Constants.levelState.failLevel,Constants.levelState)}}},e.prototype.handleEndContact=function(e){i.prototype.handleEndContact.call(this,e);NapeUtils.CollisionGetOther(this,e)},e.prototype.createShape=function(){this._shape=new Polygon([new Vec2(-this._width/2,-this._height/2+3),new Vec2(0,-this._height/2-2),new Vec2(this._width/2,-this._height/2+3),new Vec2(this._width/2,this._height/2-8),new Vec2(this._width/2-6,this._height/2),new Vec2(-this._width/2+6,this._height/2),new Vec2(-this._width/2,this._height/2-8)],this._material),this._body.shapes.add(this._shape)},e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.density=1,this._material.staticFriction=.01,this._material.dynamicFriction=.01},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("enemy"),t.PhysicsCollisionCategories.GetAllExcept("enemy"),t.PhysicsCollisionCategories.Get("enemy"),t.PhysicsCollisionCategories.GetAllExcept("enemy")))},e.prototype.wait=function(){return SoundManager.getInstance().stopSound("GuardianStepSound"),SoundManager.getInstance().stopSound("GuardianRunSound"),SoundManager.getInstance().stopSound("CriminalStepSound"),SoundManager.getInstance().stopSound("CriminalRunSound"),this._clip.playAnimation("Stand"),!0},e.prototype.startPatrol=function(){this.moveHorizontally(this._body,this.WALK_SPEED*this._direction),0<this._direction?this.inverted=!1:this.inverted=!0},e.prototype.patrol=function(){return this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.32,function(){this._isReadyToPlayStepSound=!0},this),this._isWeak?SoundManager.getInstance().playSound("GuardianStepSound"):SoundManager.getInstance().playSound("CriminalStepSound")),"Walk"!=this._clip.currentAnimation&&this._clip.playAnimation("Walk"),Math.abs(this._body.velocity.x)<=.05&&.05<this._timeNotMoving?(this._direction=-this._direction,!0):(this.moveHorizontally(this._body,this.WALK_SPEED*this._direction),!1)},e.prototype.pursue=function(){return this._target.x<this.x?(this.inverted=!0,this.moveHorizontally(this._body,-this.RUN_SPEED)):(this.inverted=!1,this.moveHorizontally(this._body,this.RUN_SPEED)),1.5<this._timeNotMoving?this._clip.playAnimation("Stand"):"Run"!=this._clip.currentAnimation?this._clip.playAnimation("Run"):this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.45,function(){this._isReadyToPlayStepSound=!0},this),this._isWeak?SoundManager.getInstance().playSound("GuardianRunSound"):SoundManager.getInstance().playSound("CriminalRunSound")),!1},e.prototype.wound=function(){this.isWounded||(this._clip.playAnimation("Wound"),this.isWounded=!0,this._taskManager.removeAllTasks(),this._isWeak?(SoundManager.getInstance().playSound("GuardianHurtSound"),TweenMax.delayedCall(.3,this.playGuardianStarsSound,this),this._body.space=null,Constants.levelState.groupSprites[0].addChild(this.view),TweenMax.delayedCall(3,this.woundStatic,this),TweenMax.to(this.view,.3,{tintRed:27,tintGreen:36,tintBlue:62})):SoundManager.getInstance().playSound("CriminalBoomSound"))},e.prototype.playGuardianStarsSound=function(){SoundManager.getInstance().playSound("GuardianStarsSound")},e.prototype.wakeUp=function(){this.isWounded=!1,this.assignTasks()},e.prototype.update=function(e){i.prototype.update.call(this,e),this.isWounded||(Math.abs(this._body.velocity.x)<=.05?this._timeNotMoving+=e:this._timeNotMoving=0,this._taskManager.update(),!Constants.bouncer.isHidden&&Math.abs(this.y-Constants.bouncer.y)<70&&(this._body.velocity.x<.5&&this.x-Constants.bouncer.x<150&&-10<this.x-Constants.bouncer.x||-.5<this._body.velocity.x&&Constants.bouncer.x-this.x<150&&-10<Constants.bouncer.x-this.x)?(this._target=Constants.bouncer,this._taskManager.currentTask!=this.pursue&&this._taskManager.addUrgentTask(this,this.pursue)):!Constants.hustler.isHidden&&Math.abs(this.y-Constants.hustler.y)<70&&(this._body.velocity.x<.5&&this.x-Constants.hustler.x<155&&-10<this.x-Constants.hustler.x||-.5<this._body.velocity.x&&Constants.hustler.x-this.x<155&&-10<Constants.hustler.x-this.x)?(this._target=Constants.hustler,this._taskManager.currentTask!=this.pursue&&this._taskManager.addUrgentTask(this,this.pursue)):this._taskManager.currentTask==this.pursue&&this.assignTasks())},e}(t.LevelObject);t.Guardian=e}(objects||(objects={}));var Polygon=nape.shape.Polygon,Arbiter=nape.dynamics.Arbiter;!function(t){var e=function(i){function e(e){var t=i.call(this,"hustler",{view:e,width:31,height:47,x:+e.x+23,y:+e.y-24,group:4})||this;return t._clip=e,t.dynamicFriction=0,t._container=e.parent.parent,t.initialize2(),t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,(Constants.hustler=this).inputChannel=Constants.hustlerInputChannel,this.jumpHeight=225,this.maxVelocity=80,this.acceleration=26,this._idleTime=0,this._isReadyToPlayStepSound=!0,this._isReadyToPlayPushSound=!0,this._niche=null,this.offsetY=24,this._clip.addAnimation("Stand",1,22,30,!0),this._clip.addAnimation("Walk",23,36,30,!0),this._clip.addAnimation("Sit",37,37,1),this._clip.addAnimation("SitWalk",37,55,40,!0),this._clip.addAnimation("JumpUp",56,64,30),this._clip.addAnimation("JumpDown",65,72,30),this._clip.addAnimation("Deceleration",82,95,40),this._clip.addAnimation("Push",96,112,15,!0),this._clip.addAnimation("GiveUp",113,113,1),this._clip.addAnimation("Hiding1",114,114,1),this._clip.addAnimation("Hiding2",115,115,1),this._clip.addAnimation("Hiding3",116,116,1),this._clip.addAnimation("Hiding4",117,117,1),this._clip.addAnimation("Idle1",118,253,40,!1,this.stand,this),this._clip.addAnimation("Idle2",254,391,40,!1,this.stand,this),this._clip.addAnimation("Balance",393,465,40,!0),this._clip.playAnimation("Stand")},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"niche"==t.name&&(this._niche=t)},e.prototype.handleEndContact=function(e){"niche"==NapeUtils.CollisionGetOther(this,e).name&&(this._niche=null)},e.prototype.jump=function(){this._isJustJumped||(this._clip.playAnimation("JumpUp"),SoundManager.getInstance().playSound("HustlerJumpSound"),this._isJustJumped=!0,TweenMax.delayedCall(.1,function(){this._isJustJumped=!1},this),this._onGround=!1)},e.prototype.stand=function(){this._clip.playAnimation("Stand")},e.prototype.hide=function(){this.isHidden||this._niche.isOccupied||(this._occupiedNiche=this._niche,this._occupiedNiche.isOccupied=!0,this.controlsEnabled=!1,this.isHidden=!0,TweenMax.to(this.view,.3,{tintRed:27,tintGreen:36,tintBlue:62}),TweenMax.to(this,.3,{x:this._niche.x}),TweenMax.to(this,.3,{offsetY:this.offsetY-3}),this._clip.playAnimation("Hiding"+String(Math.round(3*Math.random()+1))),this._shape.filter=this._nicheFilter,Constants.levelState.groupSprites[0].addChild(this.view),TweenMax.delayedCall(.31,function(){this.controlsEnabled=!0},this))},e.prototype.unhide=function(){this.isHidden&&(this._occupiedNiche.isOccupied=!1,this._occupiedNiche=null,this.isHidden=!1,TweenMax.to(this.view,.1,{tintRed:255,tintGreen:255,tintBlue:255}),this.offsetY=this.offsetY+3,this._shape.filter=this._filter,Constants.levelState.groupSprites[this.group].addChild(this.view))},e.prototype.giveUp=function(){this._isGaveUp=!0,this._clip.playAnimation("GiveUp"),this.controlsEnabled=!1,this._body.velocity.x=0},e.prototype.createFilter=function(){this._nicheFilter=new InteractionFilter(1,t.PhysicsCollisionCategories.Get("tile"),1,t.PhysicsCollisionCategories.Get("tile")),this._filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("hero"),t.PhysicsCollisionCategories.GetAllExcept("enemy")),this._shape.filter=this._filter,this._enemySensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.Get("enemy")),this._topShape.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,-1),this._pushSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("tile","hidden")),this._balanceLeftSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden")),this._balanceRightSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden"))},e.prototype.createShape=function(){this._shape=new Polygon([new Vec2(-this._width/2,-8),new Vec2(this._width/2,-8),new Vec2(this._width/2,this._height/2-5),new Vec2(this._width/2-8,this._height/2),new Vec2(-this._width/2+8,this._height/2),new Vec2(-this._width/2,this._height/2-5)],this._material),this._body.shapes.add(this._shape),this._enemySensor=new Polygon([new Vec2(-this._width/2,-8),new Vec2(this._width/2,-8),new Vec2(this._width/2,this._height/2-5),new Vec2(this._width/2-5,this._height/2),new Vec2(-this._width/2+5,this._height/2),new Vec2(-this._width/2,this._height/2-5)],this._material),this._enemySensor.sensorEnabled=!0,this._enemySensor.group=CollisionHelper.nonCollidable,this._body.shapes.add(this._enemySensor),this._topShape=new Polygon([new Vec2(-this._width/2+2,-20),new Vec2(this._width/2-2,-20),new Vec2(this._width/2-2,-8),new Vec2(-this._width/2+2,-8)],this._material),this._topShape.sensorEnabled=!0,this._body.shapes.add(this._topShape),this._topShape.group=CollisionHelper.nonCollidable,this._pushSensor=new Polygon([new Vec2(-this._width/2-2,-4),new Vec2(this._width/2+2,-4),new Vec2(this._width/2+2,0),new Vec2(-this._width/2-2,0)],this._material),this._pushSensor.sensorEnabled=!0,this._body.shapes.add(this._pushSensor),this._pushSensor.group=CollisionHelper.nonCollidable,this._balanceLeftSensor=new Polygon([new Vec2(-this._width/2+1,this.height/2+2),new Vec2(-2,this.height/2+2),new Vec2(-2,this.height/2+5),new Vec2(-this._width/2+1,this.height/2+5)],this._material),this._balanceLeftSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceLeftSensor),this._balanceLeftSensor.group=CollisionHelper.nonCollidable,this._balanceRightSensor=new Polygon([new Vec2(2,this.height/2+2),new Vec2(this._width/2-1,this.height/2+2),new Vec2(this._width/2-1,this.height/2+5),new Vec2(2,this.height/2+5)],this._material),this._balanceRightSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceRightSensor),this._balanceRightSensor.group=CollisionHelper.nonCollidable},e.prototype.checkCollisions=function(){this._isObstacleOnLeft=!1,this._isObstacleOnRight=!1,this._isLeftBalanceSensor=!1,this._isRightBalanceSensor=!1;for(var e=this._groundContactsCount=0;e<this._body.arbiters.length;e++){var t=this._body.arbiters.at(e);if(t.shape1==this._topShape||t.shape2==this._topShape){var i=t.shape1;t.shape1==this._topShape&&(i=t.shape2),i.sensorEnabled||(this._isDuck=!0)}t.shape1==this._pushSensor?t.body2.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0:t.shape2==this._pushSensor&&(t.body1.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0),t.shape1==this._balanceLeftSensor||t.shape2==this._balanceLeftSensor?this._isLeftBalanceSensor=!0:t.shape1!=this._balanceRightSensor&&t.shape2!=this._balanceRightSensor||(this._isRightBalanceSensor=!0),t.shape1==this._shape?this.checkGround(t,t.body2):t.shape2==this._shape&&this.checkGround(t,t.body1)}0==this._groundContactsCount&&(this._onGround=!1)},e.prototype.checkGround=function(e,t){if(e.collisionArbiter){var i=Math.round(180*e.collisionArbiter.normal.angle/Math.PI);if(t==Constants.bouncer.body&&!Constants.bouncer.onGround)return;(15<=i&&i<=175||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&this._body.position.y<t.position.y-15&&(this._groundContactsCount++,this._onGround=!0)}},e.prototype.update=function(e){this.checkCollisions(),i.prototype.update.call(this,e),this._isGaveUp||(this._ce.input.isDoing("down",this.inputChannel)?this._isDuck=!0:this._isDuck=!1,!this.isHidden&&!this._isMoveKeyPressed&&this._body.velocity.length<.1&&this._niche?this.hide():this.isHidden&&this._isMoveKeyPressed&&this.unhide())},e.prototype.updateAnimation=function(e){if(!this._isGaveUp){this._isMoveKeyPressed||this._isDuck?this._idleTime=0:this._idleTime+=e,14<this._idleTime&&!this.isHidden&&(.5<Math.random()?(this._idleTime=0,SoundManager.getInstance().playSound("HustlerIdleSound1"),this._clip.playAnimation("Idle1")):(this._idleTime=0,SoundManager.getInstance().playSound("HustlerIdleSound2"),this._clip.playAnimation("Idle2")));var t=this._body.velocity.x;this._onGround&&!this._isJustJumped?this._ce.input.isDoing("right",this.inputChannel)&&this._isObstacleOnRight||this._ce.input.isDoing("left",this.inputChannel)&&this._isObstacleOnLeft?(this._isReadyToPlayPushSound&&(this._isReadyToPlayPushSound=!1,TweenMax.delayedCall(2,function(){this._isReadyToPlayPushSound=!0},this),SoundManager.getInstance().playSound("HustlerPushSound")),this._clip.playAnimation("Push")):t<-1||1<t?(SoundManager.getInstance().stopSound("HustlerPushSound"),this._isDuck?this._clip.playAnimation("SitWalk"):this._isMoveKeyPressed?(SoundManager.getInstance().stopSound("HustlerIdleSound2"),SoundManager.getInstance().stopSound("HustlerIdleSound1"),this._clip.playAnimation("Walk")):this._clip.playAnimation("Deceleration"),"Deceleration"==this._clip.currentAnimation?SoundManager.getInstance().isPlaying("HustlerSlideSound")||SoundManager.getInstance().playSound("HustlerSlideSound"):this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.2,function(){this._isReadyToPlayStepSound=!0},this),SoundManager.getInstance().playSound("HustlerStepSound"))):"Idle1"==this._clip.currentAnimation||"Idle2"==this._clip.currentAnimation||this.isHidden||(SoundManager.getInstance().stopSound("HustlerPushSound"),this._isDuck?this._clip.playAnimation("Sit"):(SoundManager.getInstance().stopSound("HustlerSlideSound"),this._isLeftBalanceSensor&&!this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!0):!this._isLeftBalanceSensor&&this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!1):(this.inverted=!1,this._clip.playAnimation("Stand")))):"JumpDown"!=this._clip.currentAnimation&&.2<this._body.velocity.y&&this._clip.playAnimation("JumpDown")}},e.prototype.goTo=function(e){this._isGaveUp=!0,this.body.space=null,this._clip.playAnimation("Walk"),this.inverted=this.x>e,TweenMax.to(this,.5,{x:e,ease:"Linear.easeNone",onComplete:function(){Constants.hustler.view.visible=!1}})},e}(t.Hero);t.Hustler=e}(objects||(objects={})),function(e){var t=function(n){function e(e){var t=n.call(this,"levelText",{view:e,x:+e.x+116,y:+e.y-45-13})||this;t.game=PhaserGameHelper.getInstance().game;var i={font:"22px sc_gum_kidsregular",fill:"#F7E35C",boundsAlignH:"center",boundsAlignV:"middle"};t.text0=t.game.add.translatedText(0,0,"level",i),t.text0.stroke="#824E26",t.text0.strokeThickness=4,t.text0.setTextBounds(-96,-26,192,33),t.text1=t.game.add.text(t.text0.x+t.text0.width/2+20,0,Constants.currentLevel+":",i),t.text1.stroke="#824E26",t.text1.strokeThickness=4,t.text1.setTextBounds(-96,-26,192,33);return t.text2=t.game.add.translatedText(0,0,t.view.params.name,{font:"22px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"top"}),t.text2.stroke="#824E26",t.text2.strokeThickness=4,t.text2.setTextBounds(-116,-2,232,64),t.view.addChild(t.text0),t.view.addChild(t.text1),t.view.addChild(t.text2),Constants.levelState.addObject(t),t}return __extends(e,n),e.prototype.destroy=function(){n.prototype.destroy.call(this),Constants.levelState.removeObject(this)},e}(e.CitrusSprite);e.LevelText=t}(objects||(objects={}));var InteractionGroup=nape.dynamics.InteractionGroup;!function(n){var e=function(i){function e(e){var t=i.call(this,"removable",{view:e,width:33,height:33,x:+e.x+16.5,y:+e.y-16.5,group:4})||this;return e.stop(),t.beginContactCallEnabled=!0,t}return __extends(e,i),e.prototype.action=function(){if(this._body.type==BodyType.STATIC){this._body.space=null,this._body.type=BodyType.DYNAMIC,this._body.space=this._nape.space,this.view.gotoAndStop(2);var e=new MovieClip("ElectroSplashGraphics");this.fountain=new n.CitrusObject("electro",{view:e,x:this.x-1,y:this.y+14}),e.playLoop(),Constants.levelState.addObject(this.fountain),SoundManager.getInstance().playSound("ElectricitySound"),TweenMax.delayedCall(1,this.removeFountain,this)}},e.prototype.removeFountain=function(){this.fountain.kill=!0},e.prototype.createBody=function(){this._bodyType=BodyType.STATIC,i.prototype.createBody.call(this)},e.prototype.handleBeginContact=function(e){if(100<NapeUtils.CollisionGetOther(this,e).body.normalImpulse(this.body,!0).xy(!0).length&&this._body.type==BodyType.DYNAMIC){this.view.gotoAndStop(3),this.beginContactCallEnabled=!1,SoundManager.getInstance().playSound("MonitorCrashSound");var t=new InteractionGroup(!0);this._body.group=t,this.fragment1=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment1Graphics"),registration:"topLeft",x:this.x+5,y:this.y-2,width:18,height:4,group:2}),Constants.levelState.addObject(this.fragment1),this.fragment1.body.group=t,this.fragment1.body.applyImpulse(Vec2.weak(3*Math.random(),-12)),this.fragment1.body.applyAngularImpulse(40*Math.random()),this.fragment2=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment2Graphics"),registration:"topLeft",x:this.x-4,y:this.y,width:14,height:4,group:2}),Constants.levelState.addObject(this.fragment2),this.fragment2.body.group=t,this.fragment2.body.applyImpulse(Vec2.weak(-3*Math.random(),-10)),this.fragment2.body.applyAngularImpulse(-40*Math.random()),this.fragment3=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment3Graphics"),registration:"topLeft",x:this.x-4,y:this.y,width:14,height:4,group:2}),Constants.levelState.addObject(this.fragment3),this.fragment3.body.group=t,this.fragment3.body.applyImpulse(Vec2.weak(-.5*Math.random(),-10)),this.fragment3.body.applyAngularImpulse(35*Math.random()),this.fragment1.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),this.fragment2.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),this.fragment3.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),TweenMax.delayedCall(2.5,this.removeFragments,this)}},e.prototype.removeFragments=function(){this.fragment1.kill=!0,this.fragment2.kill=!0,this.fragment3.kill=!0},e}(n.LevelObject);n.Monitor=e}(objects||(objects={}));var MovieClip=function(p){function l(e,t,i,n,r,o){void 0===e&&(e=null),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=""),void 0===r&&(r=null),void 0===o&&(o=null);var a=p.call(this,PhaserGameHelper.getInstance().game,t,i,null)||this;a.game=PhaserGameHelper.getInstance().game,r||(r="Objects"),o||(o=ObjectsLayouts.data);var s=OzUtil.PE(o,null,"name",e);return e&&(s?a.createLayout(o,e,r):a.loadTexture(r,e+"0000")),a.mc=e,a.name=n,a.params={},a.spriteSheetName=r,a._currentFrameNumber=1,a._degrees=a.rotation=0,a.butFrameOffset=0,a}return __extends(l,p),l.RegisterSpritesheet=function(e,t){l.SpriteSheetDatas||(l.SpriteSheetDatas={}),l.SpriteSheetDatas[e]=t},l.FrameRate=function(e){return e<0?40:Math.round(60*e/40)},Object.defineProperty(l.prototype,"tintRed",{get:function(){return this.tint>>16&255},set:function(e){this.tint=(Math.round(Math.min(255,Math.max(0,e)))<<16)+(65535&this.tint)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"tintGreen",{get:function(){return this.tint>>8&255},set:function(e){this.tint=(Math.round(Math.min(255,Math.max(0,e)))<<8)+(this.tint&510<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"tintBlue",{get:function(){return 255&this.tint},set:function(e){this.tint=Math.round(Math.min(255,Math.max(0,e)))+(16776960&this.tint)},enumerable:!1,configurable:!0}),l.prototype.generateDefaultAnimation=function(){var e=Phaser.Animation.generateFrameNames(this.mc,0,this.totalFrames(),"",4);this.animations.add("_null",e,l.FrameRate(-1))},l.prototype.playLoop=function(){this.animations.getAnimation("_null")||this.generateDefaultAnimation(),this.play("_null",l.FrameRate(-1),!0)},l.prototype.playOnce=function(){this.animations.getAnimation("_null")||this.generateDefaultAnimation(),this.play("_null",l.FrameRate(-1),!1)},Object.defineProperty(l.prototype,"scaleX",{get:function(){return this.scale.x},set:function(e){this.scale.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"scaleY",{get:function(){return this.scale.y},set:function(e){this.scale.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"degrees",{get:function(){return 180*this.rotation/Math.PI},set:function(e){this._degrees=e,this.rotation=e*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"currentFrameNumber",{get:function(){return this._currentFrameNumber},set:function(e){this.gotoAndStop(Math.round(e))},enumerable:!1,configurable:!0}),l.prototype.totalFrames=function(){for(var e=0;;){var t=this.mc+l.getPaddedNumber(e,4),i=l.SpriteSheetDatas[this.spriteSheetName];if(!OzUtil.PE(i,"frames","filename",t))break;e++}return e},l.getPaddedNumber=function(e,t){for(var i=""+Math.round(e),n=t-i.length,r=0;r<n;r++)i="0"+i;return i},l.prototype.addAnimation=function(e,t,i,n,r,o,a){void 0===r&&(r=!1),void 0===o&&(o=null),void 0===a&&(a=null);var s=Phaser.Animation.generateFrameNames(this.mc,t-1,i-1,"",4),p=this.animations.add(e,s,l.FrameRate(n),r);o&&p.onComplete.add(o,a)},l.prototype.playAnimation=function(e){this.currentAnimation=e;this.animations.play(e)},l.prototype.gotoAndStop=function(e){this._currentFrameNumber=e,e--;var t=this.mc;t+=l.getPaddedNumber(e,4),this.frameName=t},l.prototype.stop=function(){this.animations.stop()},l.prototype.getChild=function(e){for(var t=0,i=this.children;t<i.length;t++){var n=i[t];if(n instanceof l){var r=n;if(r.name==e)return r}}return null},l.prototype.clickedLevelSelect=function(){PhaserGameHelper.getInstance().game.state.getCurrentState().levelSelectClick(this)},l.prototype.makeButton=function(e,t,i,n){void 0===t&&(t=!0),void 0===i&&(i=null),void 0===n&&(n=!0),i||(i=this),this.inputEnabled=!0,this.input.useHandCursor=!0,this.events.onInputDown.add(e,i),t&&(GameController.Touch()?(this.events.onInputDown.add(this.changeFrame2,this),this.events.onInputUp.add(this.changeFrame1,this)):(this.events.onInputOver.add(this.changeFrame2,this),this.events.onInputOut.add(this.changeFrame1,this),n&&this.events.onInputOver.add(this.mouseOverSound,this)),n&&this.events.onInputDown.add(this.mouseClickSound,this))},l.prototype.mouseOverSound=function(){SoundManager.getInstance().playSound("MouseOverSound")},l.prototype.mouseClickSound=function(){SoundManager.getInstance().playSound("MouseClickSound")},l.prototype.getButFrameOffset=function(){return this.butFrameOffset},l.prototype.changeButtonFrameOffset=function(e){var t=e-this.butFrameOffset;this.butFrameOffset=e,this.currentFrameNumber=this.currentFrameNumber+t},l.prototype.changeFrame1=function(){this.currentFrameNumber=1+this.butFrameOffset},l.prototype.changeFrame2=function(){this.currentFrameNumber=2+this.butFrameOffset},l.prototype.makeMusicButton=function(){this.butFrameOffset=SoundManager.muteMusic?2:0,this.changeFrame1(),this.makeButton(this.toggleMuteMusic,!0,this,!1)},l.prototype.toggleMuteMusic=function(){SoundManager.ToggleMuteMusic(),this.changeButtonFrameOffset(1<this.getButFrameOffset()?0:2)},l.prototype.makeSoundButton=function(){this.butFrameOffset=SoundManager.muteSound?2:0,this.changeFrame1(),this.makeButton(this.toggleMuteSound,!0,this,!1)},l.prototype.toggleMuteSound=function(){SoundManager.ToggleMuteSound(),this.changeButtonFrameOffset(1<this.getButFrameOffset()?0:2)},l.prototype.createLayout=function(e,t,i){for(var n=OzUtil.PE(e,null,"name",t),r=OzUtil.ARR(n.children),o=0;o<r.length;o++){var a=r[o],s=new l(a.mc,a.x,a.y,a.name,i,e);a.degrees&&(s.degrees=a.degrees),a.scaleX&&(s.scale.x=a.scaleX),a.scaleY&&(s.scale.y=a.scaleY),a.alpha&&(s.alpha=a.alpha),this.addChild(s)}},l.prototype.changeChildByName=function(e,t,i,n){var r=this.getChild(e);this.removeChild(r);var o=new l(t,r.x,r.y,r.name,i,n);this.addChild(o)},l}(Phaser.Sprite),Space=nape.space.Space;!function(t){var e=function(i){function e(e){var t=i.call(this,e,{})||this;return t.timeStep=.05,t.velocityIterations=8,t.positionIterations=8,t._gravity=new Vec2(0,450),t.updateCallEnabled=!0,t}return __extends(e,i),e.prototype.initialize=function(e){void 0===e&&(e=null),i.prototype.initialize.call(this),this._space=new Space(this._gravity),this._contactListener=new t.NapeContactListener(this._space),t.NapePhysicsObject.space=this._space,t.PhysicsCollisionCategories.Add("GoodGuys"),t.PhysicsCollisionCategories.Add("BadGuys"),t.PhysicsCollisionCategories.Add("Level"),t.PhysicsCollisionCategories.Add("Items")},e.prototype.destroy=function(){this._contactListener.destroy(),this._space.clear(),i.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"space",{get:function(){return this._space},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gravity",{get:function(){return this._gravity},set:function(e){this._gravity=e,this._space&&(this._space.gravity=this._gravity)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contactListener",{get:function(){return this._contactListener},enumerable:!1,configurable:!0}),e.prototype.update=function(e){i.prototype.update.call(this,e),this._space.step(this.timeStep,this.velocityIterations,this.positionIterations)},e}(t.CitrusObject);t.Nape=e}(objects||(objects={}));var InteractionListener=nape.callbacks.InteractionListener,InteractionType=nape.callbacks.InteractionType,CbType=nape.callbacks.CbType,CbEvent=nape.callbacks.CbEvent;!function(e){var t=function(){function e(e){this._space=e,this._space.listeners.add(new InteractionListener(nape.callbacks.CbEvent.BEGIN,InteractionType.ANY,CbType.ANY_BODY,CbType.ANY_BODY,this.onInteractionBegin)),this._space.listeners.add(new InteractionListener(nape.callbacks.CbEvent.END,InteractionType.ANY,CbType.ANY_BODY,CbType.ANY_BODY,this.onInteractionEnd))}return e.prototype.destroy=function(){this._space.listeners.clear()},e.prototype.onInteractionBegin=function(e){var t=e.int1.userData.myData,i=e.int2.userData.myData;t.beginContactCallEnabled&&t.handleBeginContact(e),i.beginContactCallEnabled&&i.handleBeginContact(e)},e.prototype.onInteractionEnd=function(e){var t=e.int1.userData.myData,i=e.int2.userData.myData;t.endContactCallEnabled&&t.handleEndContact(e),i.endContactCallEnabled&&i.handleEndContact(e)},e}();e.NapeContactListener=t}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"niche",{view:e,width:4,height:20,x:+e.x+ +e.width/2,y:+e.y-e.height/2+25})||this;return t.isOccupied=!1,t._shape.sensorEnabled=!0,t.offsetY=-25,t._body.group=CollisionHelper.nonCollidable,t._body.setShapeFilters(new nape.dynamics.InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"),-1)),t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Niche=e}(objects||(objects={})),function(e){var t=function(){function a(){}return a.Has=function(e,t){return Boolean(e&t)},a.Add=function(e){if(15==a._numCategories)throw new Error("You can only have 15 categories.");a._categoryNames[e]||(a._categoryNames[e]=a._categoryIndexes[a._numCategories],a._allCategories|=a._categoryIndexes[a._numCategories],a._numCategories++)},a.Get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=0,r=e;n<r.length;n++){var o=r[n];0!=a._categoryNames[o]&&(i|=a._categoryNames[o])}return i},a.GetAll=function(){return a._allCategories},a.GetAllExcept=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=a._allCategories,n=0,r=e;n<r.length;n++){var o=r[n];0!=a._categoryNames[o]&&(i&=~a._categoryNames[o])}return i},a.GetNone=function(){return 0},a._allCategories=0,a._numCategories=0,a._categoryIndexes=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384],a._categoryNames={},a}();e.PhysicsCollisionCategories=t}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"plank",{view:e,width:+e.width,height:20,x:+e.x+105,y:+e.y-10,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.density=.8,this._material.staticFriction=.3,this._material.dynamicFriction=.65},e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("PlankDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(e.LevelObject);e.Plank=t}(objects||(objects={})),function(r){var e=function(n){function e(e){var t=n.call(this,e.name,{view:e,width:24,height:11,x:+e.x+12,y:+e.y-5.5,group:5})||this,i=t._touchingObjects=0;return e.params.type&&(i=Math.round(parseFloat(e.params.type))),0==i&&(i=1),t._name="subject"+String(i),e.getChild("top").gotoAndStop(i),t.beginContactCallEnabled=!0,t.endContactCallEnabled=!0,t._shape.sensorEnabled=!0,t}return __extends(e,n),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.handleBeginContact=function(e){if(this._touchingObjects++,1==this._touchingObjects){this._targets||(this._targets=Constants.levelState.getObjectsByName(this._name));for(var t=0,i=this._targets;t<i.length;t++){var n=i[t];if(n instanceof r.LevelObject)n.action()}this.view.totalFrames();TweenMax.to(this.view.getChild("top"),.3,{y:3}),SoundManager.getInstance().playSound("PushButtonSound")}},e.prototype.handleEndContact=function(e){if(this._touchingObjects--,0==this._touchingObjects){for(var t=0,i=this._targets;t<i.length;t++){var n=i[t];if(n instanceof r.LevelObject)n.action()}TweenMax.to(this.view.getChild("top"),.3,{y:-1}),SoundManager.getInstance().playSound("PushButtonSound")}},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(r.PhysicsCollisionCategories.Get("hidden"),-1,r.PhysicsCollisionCategories.Get("hidden"),-1))},e}(r.LevelObject);r.PushButton=e}(objects||(objects={}));var objects,states,InteractionCallback=nape.callbacks.InteractionCallback;!function(e){var t=function(i){function e(e){var t=i.call(this,"box",{view:e,width:+e.width-2,height:+e.height-3,x:+e.x+e.width/2,y:+e.y-e.height/2,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("StoolDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(e.LevelObject);e.Stool=t}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"fixedBox",{width:35,height:35,x:+(+e.x+17.5),y:+(+e.y-17.5)})||this;return t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll(),t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll()))},e}(t.LevelObject);t.Tile=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"tile",{view:e,x:+e.x,y:+e.y,group:3})||this;return Constants.levelState.addObject(t),t}return __extends(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),Constants.levelState.removeObject(this)},e}(e.CitrusSprite);e.TileVisual=t}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"removable",{view:e,width:33,height:33,x:+e.x+16.5+2,y:+e.y-16.5,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.action=function(){if(this._body.type==BodyType.STATIC){this._body.space=null,this._body.type=BodyType.DYNAMIC,this._body.space=n.NapePhysicsObject.space,SoundManager.getInstance().playSound("ToiletSound"),SoundManager.getInstance().playSound("WaterSound");var e=new MovieClip("WaterSplashGraphics"),t=new n.CitrusObject("water",{view:e,x:this.x-1,y:this.y+16});e.playLoop(),Constants.levelState.addObject(t)}},e.prototype.createBody=function(){this._bodyType=BodyType.STATIC,i.prototype.createBody.call(this)},e.prototype.handleBeginContact=function(e){10<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("ToiletSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(n.LevelObject);n.Toilet=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"sprite",{view:e,width:+e.width,height:+e.height,x:+e.x+ +e.width/2,y:+e.y-e.height/2,group:4})||this;return t._shape.sensorEnabled=!0,t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(e.LevelObject);e.TopDecoration=t}(objects||(objects={})),function(o){var e=function(n){function e(e){var t=n.call(this,e.name,{view:e,width:22,height:22,x:+e.x+12.5,y:+e.y-10,group:5})||this,i=0;return e.params.type&&(i=Math.round(parseFloat(e.params.type))),0==i&&(i=1),t._name="subject"+String(i),e.getChild("handle").gotoAndStop(i),e.getChild("base").gotoAndStop(i),e.stop(),t.beginContactCallEnabled=!0,t._shape.sensorEnabled=!0,t}return __extends(e,n),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);if("hustler"==t.name||"bouncer"==t.name){this._targets||(this._targets=Constants.levelState.getObjectsByName(this._name));for(var i=0,n=this._targets;i<n.length;i++){var r=n[i];if(r instanceof o.LevelObject)r.action()}this._isActivated=!this._isActivated,SoundManager.getInstance().playSound("TriggerSound"),this._isActivated?TweenMax.to(this.view.getChild("handle"),.5,{degrees:90}):TweenMax.to(this.view.getChild("handle"),.5,{degrees:0})}},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(o.PhysicsCollisionCategories.Get("hidden"),-1,o.PhysicsCollisionCategories.Get("hidden"),-1))},e}(o.LevelObject);o.Trigger=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"levelText",{view:e,x:+e.x+e.width/2,y:+e.y-e.height/2-2})||this;return Constants.levelState.addObject(t),t}return __extends(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),Constants.levelState.removeObject(this)},e}(e.CitrusSprite);e.Txt=t}(objects||(objects={})),function(e){var t=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this;return e._sounds=[null,"Comix1Sound","Comix2Sound","Comix3Sound","Comix4Sound","Comix5Sound","Comix6Sound","Comix7Sound","Comix8Sound",null],e._delays=[0,6,3.5,3.5,4.5,5,4,6,6],e}return __extends(r,n),r.prototype.create=function(){if(n.prototype.create.call(this),this.delayedCalls=new Array,SoundManager.getInstance().playSound("AnimationMusic"),this.mc=new MovieClip,this.game.world.addChild(this.mc),0==r.ID_ANIMATION){this._currentFrame=0,this._finalFrame=6,this.mc.addChild(new MovieClip("cmcIntroAnimationBG",0,0,"bg","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.makeButton(this.playFrame,!1,this,!1),this.mc.input.useHandCursor=!1;for(var e=this._finalFrame-1;e>this._currentFrame;e--)this.mc.addChild(new MovieClip("cmcAnim"+e,0,0,"anim"+e))}else{this._currentFrame=5,this._finalFrame=9,this.mc.addChild(new MovieClip("cmcFinalAnimationBG",0,0,"bg","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.makeButton(this.playFrame,!1,this,!1),this.mc.input.useHandCursor=!1;for(e=this._finalFrame-1;e>this._currentFrame;e--)this.mc.addChild(new MovieClip("cmcAnim"+e,0,0,"anim"+e))}for(e=0;e<this._delays.length;e++){var t=this.mc.getChild("anim"+e);t&&(t.alpha=0)}var i=new TranslatedMMText(this.game,600,480,"skip",36,this.endThis,this);this.mc.addChild(i);this.sub=this.game.add.translatedText(250,450,"",{font:"24px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"top"}),this.sub.stroke="#824E26",this.sub.anchor.set(.5),this.sub.strokeThickness=2,this.sub.wordWrap=!0,this.sub.wordWrapWidth=400,this.delayedCalls.push(TweenMax.delayedCall(1.3,this.playFrame,this))},r.prototype.clearDelayedCalls=function(){for(var e=0;e<this.delayedCalls.length;e++){var t=this.delayedCalls[e];t&&t.kill()}this.delayedCalls=[]},r.prototype.playFrame=function(){if(this.clearDelayedCalls(),this._currentFrame>=this._finalFrame)this.endThis();else{this._currentFrame++;var e=this.mc.getChild("anim"+(this._currentFrame-1));if(e&&(e.alpha=1),this._currentFrame<this._finalFrame){var t=this._sounds[this._currentFrame-1];t&&SoundManager.getInstance().stopSound(t);var i=this._sounds[this._currentFrame];i&&(this.sub.text=(this._currentFrame-1).toString(),SoundManager.getInstance().playSound(i));var n=this.mc.getChild("anim"+this._currentFrame);n&&this.delayedCalls.push(TweenMax.to(n,1,{alpha:1})),this.delayedCalls.push(TweenMax.delayedCall(this._delays[this._currentFrame],this.playFrame,this))}else this.delayedCalls.push(TweenMax.delayedCall(3,this.playFrame,this))}},r.prototype.endThis=function(){this.clearDelayedCalls(),0==r.ID_ANIMATION?Constants.stateSwitcher.switchToPlay():Constants.stateSwitcher.switchToLevelSelect(),Constants.isIntroAnimationPlayed=!0,StorageHelper.saveCookies()},r.prototype.shutdown=function(){for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&SoundManager.getInstance().stopSound(this._sounds[e])},r.ID_ANIMATION=0,r}(e.OzState);e.AnimationState=t}(states||(states={})),function(e){var t=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.init=function(){var t=this;Constants.maxLevel=21,Constants.currentLevel=1,GameController.LEFT_CURTAIN_OPEN_X=-386,GameController.RIGHT_CURTAIN_OPEN_X=Constants.WIDTH+422,StorageHelper.readCookies(),PhaserGameHelper.getInstance().init(this.game),TweenMax.Init(this.game),MovieClip.RegisterSpritesheet("Objects",Objects.data),MovieClip.RegisterSpritesheet("PreloaderObjects",PreloaderObjects.data),MovieClip.RegisterSpritesheet("WinningObjects",WinningObjects.data),this.game.load.cacheBuster="undefined"==typeof version?null:version,Fabrique.PauseHandler.getInstance(this.game).init(),"none"!==h5branding.Utils.LANGUAGE?this.game.i18n.setLanguage(h5branding.Utils.LANGUAGE):this.game.i18n.setLanguage(languageDetector.detect(["navigator"])),this.game.stage.backgroundColor=0,this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.scale.windowConstraints.right="layout",this.game.scale.windowConstraints.bottom="visual",this.initializeHelpers(),this.game.canvas.oncontextmenu=function(e){e.preventDefault()},this.game.scale.setGameSize(window.innerWidth,window.innerHeight),this.game.scale.setUserScale(1,1,0,0),window.addEventListener("resize",function(e){t.orientationChange(),t.onSizeChange(),-1===t.game.state.current.indexOf("boot")&&-1===t.game.state.current.indexOf("splash")&&window.innerWidth<window.innerHeight&&Fabrique.SideBanners.getInstance().resize(t.game)})},i.prototype.onSizeChange=function(){i.inSplash||i.InW==Math.round(window.innerWidth)&&i.InH==Math.round(window.innerHeight)&&3<i.NUMRESIZE||(i.InW=Math.round(window.innerWidth),i.InH=Math.round(window.innerHeight),GameController.JoypadLeft&&i.NUMRESIZE++,this.adjustWorld(),i.PADH=Math.round(-this.camera.x),GameController.AdjustJoypad(),GameController.AdjustPad(),GameController.JoypadLeft)},i.prototype.orientationChange=function(){window.innerWidth<window.innerHeight?(this.game.paused=!0,document.getElementById("orientation").style.display="block",document.getElementById("content").style.display="none",GameController.Touch()&&GameController.JoypadLeft&&(GameController.JoypadLeft.visible=!1,GameController.JoypadRight.visible=!1)):(this.game.paused=!1,document.getElementById("orientation").style.display="none",document.getElementById("content").style.display="block",GameController.Touch()&&GameController.JoypadLeft&&(GameController.JoypadLeft.visible=!0,GameController.JoypadRight.visible=!0))},i.prototype.preload=function(){var t=this;Fabrique.LoaderHelper.hide(),this.game.load.onFileComplete.add(function(e){h5branding.SplashLoader.getInstance().setLoadProgress(e)}),this.game.load.onLoadComplete.add(function(){h5branding.SplashLoader.getInstance().setLoadProgress(100)}),h5branding.SplashLoader.getInstance().setButtonCallback(function(){var e;h5branding.SplashLoader.getInstance().destroy(),(null===(e=window._azerionIntegration)||void 0===e?void 0:e.cp)&&h5CrossPromo.HBlock.setList(t.game.cache.getJSON("moreGames").more_games),i.inSplash=!1,SoundManager.decodeSounds(),h5branding.Utils.inGDGameZone()||t.game.device.cordova?(Fabrique.LoaderHelper.hide(),t.game.state.start("MainMenu"),t.adjustWorld()):Fabrique.AdHandler.getInstance().showAd("splash",function(){t.game.state.start("MainMenu"),t.adjustWorld()})}),this.load.image("AzerionLogo","assets/images/AZERION_logo_txt_stencil_white.png"),this.load.image("Exit_RU","assets/images/Exit_RU.png"),this.load.image("Space_RU","assets/images/Space_RU.png"),this.load.image("Wait_here_RU","assets/images/Wait_here_RU.png"),this.load.image("Russian_title","assets/images/Russian_title.png"),this.load.image("rotateDevice","assets/images/rotateDevice.png"),this.load.atlas("PreloaderObjects","assets/images/PreloaderObjects.png",null,PreloaderObjects.data),this.game.load.atlas("Objects","assets/images/Objects.png",null,Objects.data),this.game.load.atlas("WinningObjects","assets/images/WinningObjects.png",null,WinningObjects.data),this.game.load.atlas("AtlasUI","assets/images/AtlasUI.png",null,AtlasUI.data),this.game.load.json("moreGames","assets/mjson/moreGames.json"),SoundManager.Preload(),this.game.load.crossOrigin="anonymous",h5branding.Utils.getBrandingDomain()!==h5branding.BrandingDomain.Neutral&&this.game.load.image("branding_logo",h5branding.Branding.brandingLogoUrl)},i.prototype.initializeHelpers=function(){SoundManager.Init(),Constants.levelParser=new LevelParseSystem,Constants.stateSwitcher=new StateSwitchSystem,CollisionHelper.initCollisionCategories()},i.InW=-1,i.InH=-1,i.PADH=0,i.NUMRESIZE=0,i.inSplash=!0,i}(e.OzState);e.Boot=t}(states||(states={})),function(e){var t=function(l){function h(){return null!==l&&l.apply(this,arguments)||this}return __extends(h,l),h.prototype.create=function(){h.NumShown++,SoundManager.getInstance().playSound("MenuMusic"),this.mc=new MovieClip("cmcLevelSelect"),this.game.world.addChild(this.mc);var e=new Phaser.Sprite(this.game,0,0,"branding_logo");e.x=Constants.WIDTH/2,e.y=Constants.HEIGHT-e.height,e.scale.set(.75),e.inputEnabled=!0,e.events.onInputDown.add(Constants.sponsor),e.anchor.set(.5),h5branding.Branding.outGoingLinksAllowed()||(e.visible=!1),this.mc.addChild(e),this.game.add.sprite(.2*Constants.WIDTH,.9*Constants.HEIGHT,"AtlasUI","buttons.png").anchor.set(.5),this.mc.removeChild(this.mc.getChild("menuButton"));var t=new TranslatedMMText(this.game,.2*Constants.WIDTH,.9*Constants.HEIGHT,"main_menu",24,this.goToMenu,this);this.game.add.existing(t),this.mc.getChild("walkthroughButton").makeButton(Constants.walkthrough,!0,this),this.mc.getChild("walkthroughButton").visible=!1;var i=60<=StorageHelper.totalPoints(),n=this.game.add.sprite(.61*Constants.WIDTH,.31*Constants.HEIGHT,"AtlasUI","60_money_bag.png");n.scale.set(1.7,1.4),n.anchor.set(.5);var r=this.game.add.translatedText(.6*Constants.WIDTH,.31*Constants.HEIGHT,"60_bags",{font:"24px sc_gum_kidsregular",fill:"#ffff00",boundsAlignH:"center",boundsAlignV:"middle"});r.wordWrapWidth=n.width-10,r.wordWrap=!0,r.anchor.set(.5);this.burgerText=PhaserGameHelper.getInstance().game.add.text(0,0,"bubu",{font:"22px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"middle"}),this.burgerText.stroke="#08296E",this.burgerText.strokeThickness=4,this.burgerText.setTextBounds(575,6,108,36),this.burgerText.text=StorageHelper.totalPoints()+(i?" / 140":" / 60"),this.mc.addChild(this.burgerText),l.prototype.create.call(this),this.buts=new Array;for(var o=1;o<21;o++){var a=new MovieClip("hamburgers",2,29),s=this.mc.getChild("l"+o);s.addChild(a),a.gotoAndStop(1+Constants.burgers[o]),this.buts.push(s),Constants.levelsComplete[o]?(s.gotoAndStop(3),s.makeButton(s.clickedLevelSelect,!1,s)):Constants.levelsComplete[o-1]?(s.gotoAndStop(2),s.makeButton(s.clickedLevelSelect,!1,s)):s.gotoAndStop(1),2==s.currentFrameNumber?s.hitArea=new Phaser.Rectangle(0,0,62,50):3==s.currentFrameNumber&&(s.hitArea=new Phaser.Rectangle(0,0,42,50))}if(i){this.mc.getChild("lock").visible=!1;var p=this.mc.getChild("bonusBag");p.name="l21",p.makeButton(p.clickedLevelSelect,!1,p),p.hitArea=new Phaser.Rectangle(0,0,75,75),this.buts.push(p),TweenMax.to(this.mc.getChild("bonusHighlight"),5,{degrees:360,repeat:-1})}},h.prototype.levelSelectClick=function(e){for(var t=0;t<this.buts.length;t++)this.buts[t]==e&&(Constants.currentLevel=t+1);Constants.stateSwitcher.switchToPlay()},h.prototype.goToMenu=function(){Fabrique.AdHandler.getInstance().showAd("menuLevelSelect",function(){Constants.stateSwitcher.switchToMainMenu()})},h.NumShown=0,h}(e.OzState);e.LevelSelectState=t}(states||(states={})),function(i){var e=function(t){function u(){var e=null!==t&&t.apply(this,arguments)||this;return e.cnt=0,e}return __extends(u,t),u.prototype.preload=function(){i.Boot.inSplash=!1,this.initGameController(),this.onSizeChange(),this.game.scale.refresh()},u.prototype.create=function(){var e;this.cnt=0,u.NumShown++,SoundManager.getInstance().playSound("MenuMusic"),this.mc=new MovieClip("cmcMainMenu"),this.game.world.addChild(this.mc);var t=new MovieClip("cmcPreloaderBG",0,0,"bg","PreloaderObjects",PreloaderObjectsLayouts.data);this.mc.addChildAt(t,0);var i=new Phaser.Sprite(this.game,0,0,"branding_logo");if(i.x=Constants.WIDTH-i.width-10,i.y=Constants.HEIGHT-i.height-10,i.inputEnabled=!0,i.events.onInputDown.add(Constants.sponsor),i.anchor.set(0),i.scale.set(.75),h5branding.Branding.outGoingLinksAllowed()||(i.visible=!1),this.mc.addChild(i),(null===(e=window._azerionIntegration)||void 0===e?void 0:e.cp)&&h5CrossPromo.HBlock.show(i18next.t("more_games"),{fontFamily:"sc_gum_kidsregular"}),"ru"===i18next.language){this.mc.removeChild(this.mc.getChild(""));var n=new Phaser.Sprite(this.game,6.5,10,"Russian_title");this.mc.addChild(n)}this.mc.removeChild(this.mc.getChild("playButton"));var r=new TranslatedMMText(this.game,Constants.WIDTH/2,.55*Constants.HEIGHT,"play_game",36,this.goLevels,this);this.game.add.existing(r),this.mc.removeChild(this.mc.getChild("creditsButton"));var o=new TranslatedMMText(this.game,Constants.WIDTH/2,.7*Constants.HEIGHT,"credits",36,this.showCredits,this);if(this.game.add.existing(o),this.mc.addChild(new MovieClip("SoundButtonGraphics",622,9,"btnSound","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.addChild(new MovieClip("MusicButtonGraphics",660,9,"btnMusic","PreloaderObjects",PreloaderObjectsLayouts.data)),GameController.Touch()){this.mc.changeChildByName("btnSound","BigSoundButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this.mc.changeChildByName("btnMusic","BigMusicMenuButton","PreloaderObjects",PreloaderObjectsLayouts.data);var a=this.mc.getChild("btnMusic"),s=this.mc.getChild("btnSound");a.x=646,a.y=3,s.x=590,s.y=3}this.mc.getChild("btnMusic").makeMusicButton(),this.mc.getChild("btnSound").makeSoundButton(),this.creditsSprite=new MovieClip("cmcCredits",203,-556),this.game.world.addChild(this.creditsSprite),this.creditsSprite.visible=!1;var p=new Phaser.Sprite(this.game,150,515,"AtlasUI","buttons.png");p.anchor.set(.5),this.creditsSprite.addChild(p);var l=new TranslatedMMText(this.game,0,0,"back",24,this.unShowCredits,this);if(p.addChild(l),this.game.device.cordova){var h=this.game.add.image(10,0,"AzerionLogo");h.y=this.game.height-h.height-10}},u.prototype.update=function(){t.prototype.update.call(this),1==this.cnt&&t.prototype.create.call(this),this.cnt++},u.prototype.goLevels=function(){var e;Constants.isIntroAnimationPlayed?Constants.stateSwitcher.switchToLevelSelect():(i.AnimationState.ID_ANIMATION=0,Constants.stateSwitcher.switchToAnimation()),(null===(e=window._azerionIntegration)||void 0===e?void 0:e.cp)&&h5CrossPromo.HBlock.hide()},u.prototype.onSizeChange=function(){i.Boot.inSplash||i.Boot.InW==Math.round(window.innerWidth)&&i.Boot.InH==Math.round(window.innerHeight)&&3<i.Boot.NUMRESIZE||(i.Boot.InW=Math.round(window.innerWidth),i.Boot.InH=Math.round(window.innerHeight),GameController.JoypadLeft&&i.Boot.NUMRESIZE++,this.adjustWorld(),i.Boot.PADH=Math.round(-this.camera.x),GameController.AdjustJoypad(),GameController.AdjustPad(),GameController.JoypadLeft)},u.prototype.showCredits=function(){this.creditsSprite.visible||(this.creditsSprite.visible=!0,this.disableInput(),TweenMax.to(this.creditsSprite,.4,{y:-25,ease:"Quad.easeOut"}))},u.prototype.unShowCredits=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("creditsBack",function(){TweenMax.to(e.creditsSprite,.25,{y:-556,onComplete:e.hideCredits,onCompleteContext:e})})},u.prototype.hideCredits=function(){this.creditsSprite.visible=!1,this.enableInput()},u.prototype.depressButtons=function(){this.mc.getChild("playButton").changeFrame1(),this.mc.getChild("creditsButton").changeFrame1()},u.prototype.disableInput=function(){},u.prototype.enableInput=function(){},u.prototype.initGameController=function(){GameController.PadLeft||(GameController.CurtainContainer=new MovieClip,this.game.stage.addChild(GameController.CurtainContainer),GameController.LeftCurtain=new MovieClip("LeftCurtainGraphics",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),GameController.LeftCurtain.x=GameController.LEFT_CURTAIN_OPEN_X,GameController.CurtainContainer.addChild(GameController.LeftCurtain),GameController.RightCurtain=new MovieClip("RightCurtainGraphics",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),GameController.RightCurtain.x=GameController.RIGHT_CURTAIN_OPEN_X,GameController.CurtainContainer.addChild(GameController.RightCurtain),GameController.PadLeft=new MovieClip("cmcSidePad",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),GameController.PadLeft.x=0,this.game.stage.addChild(GameController.PadLeft),GameController.PadRight=new MovieClip("cmcSidePad",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),GameController.PadRight.x=Constants.WIDTH,GameController.PadRight.scaleX=-1,this.game.stage.addChild(GameController.PadRight),GameController.AdjustPad())},u.NumShown=0,u}(i.OzState);i.MainMenuState=e}(states||(states={}));var ExternalLink,CitrusEngine=function(){function e(){this._playing=!0,this.input=Input.Init(),this.input.addKeyAction("jump",Phaser.Keyboard.UP,Constants.bouncerInputChannel),this.input.addKeyAction("right",Phaser.Keyboard.RIGHT,Constants.bouncerInputChannel),this.input.addKeyAction("left",Phaser.Keyboard.LEFT,Constants.bouncerInputChannel),this.input.addKeyAction("grab",Phaser.Keyboard.SPACEBAR,Constants.bouncerInputChannel),this.input.addKeyAction("grabDown",Phaser.Keyboard.DOWN,Constants.bouncerInputChannel),this.input.addKeyAction("down",Phaser.Keyboard.S,Constants.hustlerInputChannel),this.input.addKeyAction("jump",Phaser.Keyboard.W,Constants.hustlerInputChannel),this.input.addKeyAction("right",Phaser.Keyboard.D,Constants.hustlerInputChannel),this.input.addKeyAction("left",Phaser.Keyboard.A,Constants.hustlerInputChannel),this.input.addKeyAction("restart",Phaser.Keyboard.R),this.input.addKeyAction("pause",Phaser.Keyboard.P),this.input.addKeyAction("next",Phaser.Keyboard.SPACEBAR),this.input.addKeyAction("change",Phaser.Keyboard.C),this.input.addKeyAction("previousLevel",Phaser.Keyboard.ONE),this.input.addKeyAction("nextLevel",Phaser.Keyboard.TWO)}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.Init=function(){return e.instance=new e},Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},set:function(e){this._playing=e},enumerable:!1,configurable:!0}),e.instance=null,e}(),CollisionHelper=function(){function e(){}return e.initCollisionCategories=function(){objects.PhysicsCollisionCategories.Add("grab"),objects.PhysicsCollisionCategories.Add("hidden"),objects.PhysicsCollisionCategories.Add("enemy"),objects.PhysicsCollisionCategories.Add("limiter"),objects.PhysicsCollisionCategories.Add("tile"),objects.PhysicsCollisionCategories.Add("hero"),objects.PhysicsCollisionCategories.Add("bouncer"),this.nonCollidable=new InteractionGroup(!0)},e}();!function(e){var t=function(){function e(){}return e.openCampaignLink=function(e,t,i){if(h5branding.Utils.isOnDevice()||h5branding.Branding.isContracted()||h5branding.Branding.isSpecial())return null;var n=h5branding.Utils.getSourceSite(),r=i;return window.op3n("http://www.kizi.com/?utm_source="+n+"&utm_medium=html5&utm_term="+t+"&utm_content="+r+"&utm_campaign=sponsored_games","_blank")},e}();e.Utils=t}(ExternalLink||(ExternalLink={}));var Boot=states.Boot,GameController=function(){function t(){}return t.Touch=function(){var e=PhaserGameHelper.getInstance().game;return t.isTouchInitted||(t.isTouchInitted=!0,t.isTouch=!e.device.desktop&&e.device.touch),t.isTouch},t.AdjustPad=function(){t.PadLeft&&(t.PadLeft.x=Math.floor(Boot.PADH+1.9),t.PadLeft.y=0,t.PadRight.x=Boot.PADH+Constants.WIDTH,t.PadRight.y=0,t.CurtainContainer.x=Boot.PADH)},t.AdjustJoypad=function(){var e=PhaserGameHelper.getInstance().game;t.JoypadLeft&&(t.JoypadLeft.x=120,t.JoypadLeft.y=Constants.HEIGHT-55,t.JoypadRight.x=e.width-120,t.JoypadRight.y=Constants.HEIGHT-55,t.Touch()||t.HideJoypad())},t.HideJoypad=function(){t.JoypadLeft&&(t.JoypadLeft.visible=t.JoypadRight.visible=!1)},t.ShowJoypad=function(){t.JoypadLeft&&(t.JoypadLeft.visible=t.JoypadRight.visible=!0)},t.isTouchInitted=!1,t.isTouch=!1,t.JoypadLeft=null,t.JoypadRight=null,t.PadLeft=null,t.PadRight=null,t.CurtainContainer=null,t.LeftCurtain=null,t.RightCurtain=null,t}(),Input=function(){function t(){this.channels=new Array;for(var e=0;e<t.NUM_CHANNELS;e++)this.channels[e]={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.Init=function(){return t.instance=new t},t.prototype.addKeyAction=function(e,t,i){void 0===i&&(i=0),this.channels[i][e]=-1;var n=PhaserGameHelper.getInstance().game.input.keyboard.addKey(t);n.onDown.add(function(){this.channels[i][e]=Constants.frame},this),n.onUp.add(function(){this.channels[i][e]=-1},this)},t.prototype.setDoing=function(e,t,i){i?this.channels[e][t]<0&&(this.channels[e][t]=Constants.frame):this.channels[e][t]=-1},t.prototype.isDoing=function(e,t){return void 0===t&&(t=0),0<=this.channels[t][e]},t.prototype.justDid=function(e,t){void 0===t&&(t=0);var i=this.channels[t][e];return 0<=i&&Constants.frame-i==1},t.NUM_CHANNELS=20,t.instance=null,t}(),LevelParseSystem=function(){function m(){this.data=[{test:{"@name":"mamba","@gugu":"one"}},{test:[{"@name":"mamba","@gugu":"two"}]}],this._objectsList=[]}return m.prototype.parse=function(e){},m.prototype.parseFromJSON=function(e){var t=OzUtil.PE(Levels.data,null,"@level",""+e);if(this._map=t,this.parseTileset("tiles"),this.parseTileset("decor"),this.parseTileset("active"),this.parseTileset("passive"),t.imagelayer){var i=t.imagelayer.image["@source"].split(".")[0],n=new MovieClip(i);this.createLevelObject(n)}if(OzUtil.PE(t,"objectgroup","@name","decorations")&&this.parseObjectGroup("decorations"),OzUtil.PE(t,"objectgroup","@name","active")&&this.parseObjectGroup("active"),OzUtil.PE(t,"objectgroup","@name","tiles")){var r=null,o=OzUtil.PE(t,"objectgroup","@name","tiles").properties;o&&(r=OzUtil.PE(o,"property","@name","physics")),r?this.parseObjectGroup("tiles",!0):this.parseObjectGroup("tiles")}OzUtil.PE(t,"objectgroup","@name","characters")&&this.parseObjectGroup("characters")},m.prototype.parseTileset=function(e){for(var t=OzUtil.PE(this._map,"tileset","@name",e),i=parseInt(t["@firstgid"]),n=0,r=OzUtil.ARR(t,"tile");n<r.length;n++){var o=r[n];this._objectsList[parseInt(o["@id"])+i]=o.image["@source"].split(".")[0]}},m.prototype.parseObjectGroup=function(e,t){void 0===t&&(t=!1);for(var i=OzUtil.PE(this._map,"objectgroup","@name",e),n=null,r=0,o=OzUtil.ARR(i,"object");r<o.length;r++){var a=o[r],s=parseInt(a["@gid"]),p=0<(s&m.FLIPPED_HORIZONTALLY_MASK),l=0<(s&m.FLIPPED_VERTICALLY_MASK);if(0==(s&=~(m.FLIPPED_HORIZONTALLY_MASK|m.FLIPPED_VERTICALLY_MASK)))new objects.FixedBox2(a["@x"],a["@y"],a["@width"],a["@height"]);else{this._objectsList[s]="Decor18Graphics"===this._objectsList[s]?"Decor12Graphics":this._objectsList[s],(n=new MovieClip(this._objectsList[s])).x=a["@x"],n.y=a["@y"],p&&(n.params.flippedHorizontally=!0),l&&(n.params.flippedVertically=!0);var h=a["@rotation"];h&&(n.degrees=parseFloat(h)),(y=a["@name"])&&(n.name=y);var u=a["@type"];u&&(n.params.type=u);var d=a.properties;if(d)for(var c=0,_=OzUtil.ARR(d,"property");c<_.length;c++){var y,x=_[c];"target"==(y=x["@name"])?n.params.target=x["@value"]:"target2"==y?n.params.target2=x["@value"]:"target3"==y?n.params.target3=x["@value"]:"speedX"==y?n.params.speedX=x["@value"]:"speedY"==y?n.params.speedY=x["@value"]:"distanceX"==y?n.params.distanceX=x["@value"]:"distanceY"==y?n.params.distanceY=x["@value"]:"minAngle"==y?n.params.minAngle=x["@value"]:"maxAngle"==y?n.params.maxAngle=x["@value"]:"delay"==y?n.params.delay=x["@value"]:"text"==y&&(n.params.name=x["@value"])}t&&new objects.Tile(n),this.createLevelObject(n)}}},m.prototype.createLevelObject=function(e){var t=e.mc;if("ru"===i18next.language&&("Decor7Graphics"===t&&(e.loadTexture("Exit_RU"),e.totalFrames=function(){return 0},e.anchor.set(0,1)),"Tip6Graphics"===t&&(e.loadTexture("Space_RU"),e.anchor.set(.5)),"Tip5Graphics"===t&&(e.loadTexture("Wait_here_RU"),e.anchor.set(0,1))),0<=["HustlerGraphics"].indexOf(t))new objects.Hustler(e);else if(0<=["BouncerGraphics"].indexOf(t))new objects.Bouncer(e);else if(0<=["BlockGraphics"].indexOf(t))new objects.FixedBox(e);else if(0<=["DoorGraphics","GlassDoorGraphics"].indexOf(t))new objects.Door(e);else if(0<=["BoxGraphics"].indexOf(t))new objects.Box(e);else if(0<=["PlankGraphics","Plank2Graphics","Plank3Graphics","Plank4Graphics","Plank5Graphics","Plank6Graphics","Plank7Graphics","Plank8Graphics","Plank9Graphics","Plank10Graphics","Plank11Graphics","BigPlankGraphics"].indexOf(t))new objects.Plank(e);else if(0<=["StoolGraphics"].indexOf(t))new objects.Stool(e);else if(0<=["ToiletGraphics"].indexOf(t))new objects.Toilet(e);else if(0<=["MonitorGraphics"].indexOf(t))new objects.Monitor(e);else if(0<=["BasketBallGraphics"].indexOf(t))new objects.BasketBall(e);else if(0<=["BigBoxGraphics"].indexOf(t))new objects.BigBox(e);else if(0<=["PushButtonGraphics"].indexOf(t))new objects.PushButton(e);else if(0<=["TriggerGraphics"].indexOf(t))new objects.Trigger(e);else if(0<=["ElevatorGraphics","BigElevatorGraphics"].indexOf(t))new objects.Elevator(e);else if(0<=["ExitGraphics"].indexOf(t))new objects.Exit(e);else if(0<=["NicheGraphics"].indexOf(t))new objects.Niche(e);else if(0<=["CameraGraphics"].indexOf(t))new objects.Camera(e);else if(0<=["BurgerGraphics"].indexOf(t))new objects.Burger(e);else if(0<=["EnemyLimiterGraphics"].indexOf(t))new objects.EnemyLimiter(e);else if(0<=["GuardianGraphics","Guardian2Graphics","Guardian3Graphics","Guardian4Graphics"].indexOf(t))new objects.Guardian(e);else if(0<=["Tip6Graphics","Tip7Graphics"].indexOf(t))new objects.TopDecoration(e);else if(0<=["platformCenter","platformLeft","platformRight","singleTile","tileBottomCenter","tileBottomLeft","tileBottomRight","tileCenter","tileCenterLeft","tileCenterRight","tileTopCenter","tileTopLeft","tileTopRight","verticalPlatformBottom","verticalPlatformCenter","verticalPlatformTop"].indexOf(t))new objects.TileVisual(e);else if("LevelTextGraphics"==t)new objects.LevelText(e);else if("TxtGraphics"==t)new objects.Txt(e);else{var i=new objects.CitrusSprite("sprite",{view:e,x:+e.x,y:+e.y});Constants.levelState.addObject(i)}},m.FLIPPED_HORIZONTALLY_MASK=2147483648,m.FLIPPED_VERTICALLY_MASK=1073741824,m}(),NapeUtils=function(){function e(){}return e.CollisionGetOther=function(e,t){return e==t.int1.userData.myData?t.int2.userData.myData:t.int1.userData.myData},e.CollisionGetSelf=function(e,t){return e==t.int1.userData.myData?t.int1.userData.myData:t.int2.userData.myData},e}(),OzUtil=function(){function e(){}return e.PE=function(e,t,i,n){if(e)if(e instanceof Array)for(var r=0,o=e;r<o.length;r++){if((l=o[r])[i]==n)return l}else if(e instanceof Object){var a=e[t];if(a instanceof Array)for(var s=0,p=a;s<p.length;s++){var l;if((l=p[s])[i]==n)return l}else if(a instanceof Object&&a[i]==n)return e}return null},e.ARR=function(e,t){if(void 0===t&&(t=null),e instanceof Array)return e;if(e instanceof Object){var i=e[t];if(i instanceof Array)return i;if(i instanceof Object)return[i]}return null},e.verticesArrayToVec2=function(e){for(var t=new Array,i=0,n=e;i<n.length;i++){var r=n[i];t.push(new Vec2(r[0],r[1]))}return t},e.GetURL=function(e){window.op3n(e,"_blank")},e}(),PhaserGameHelper=function(){function e(){}return e.prototype.init=function(e){this.game=e},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.instance=null,e}(),SoundManager=function(){function r(){}return r.AddSound=function(e,t){PhaserGameHelper.getInstance().game.load.audio(e,["assets/sounds/"+e+".mp3","assets/sounds/"+e+".ogg"]),this.dicSounds[e]={},t.music?this.dicSounds[e].music=!0:this.dicSounds[e].music=!1,10<t.loops?this.dicSounds[e].loops=!0:this.dicSounds[e].loops=!1,t.volume?this.dicSounds[e].volume=t.volume:this.dicSounds[e].volume=1,r.NumSounds++},r.Init=function(){r.AllDecoded=!1,r.NumSounds=0,r.muteMusic=!1,r.muteSound=!1,r.curMusic=null,r.arrSounds=new Array},r.decodeSounds=function(){var t=PhaserGameHelper.getInstance().game;Object.keys(r.dicSounds).forEach(function(e){r.dicSounds[e].sound=t.add.audio(e)})},r.Preload=function(){r.AddSound("GameMusic",{music:!0,loops:9999,volume:.5}),r.AddSound("MenuMusic",{music:!0,loops:9999,volume:.7}),r.AddSound("AnimationMusic",{music:!0,loops:9999,volume:.7}),r.AddSound("MouseClickSound",{}),r.AddSound("MouseOverSound",{volume:.6}),r.AddSound("ExitSound",{}),r.AddSound("LevelCompleteAnimationSound",{}),r.AddSound("LevelWinSound",{}),r.AddSound("LevelFailedSound",{}),r.AddSound("BoxDownSound",{volume:.6}),r.AddSound("PlankDownSound",{}),r.AddSound("ElectricitySound",{}),r.AddSound("Hamburger1Sound",{}),r.AddSound("Hamburger2Sound",{}),r.AddSound("Hamburger3Sound",{}),r.AddSound("GetHamburger1Sound",{}),r.AddSound("GetHamburger2Sound",{}),r.AddSound("GetHamburger3Sound",{}),r.AddSound("BrickWallOpenSound",{}),r.AddSound("BrickWallCloseSound",{}),r.AddSound("MonitorCrashSound",{}),r.AddSound("WaterSound",{}),r.AddSound("YellowCameraSound",{}),r.AddSound("RedCameraSound",{}),r.AddSound("OpenDoorSound",{volume:1}),r.AddSound("ElevatorSound",{loops:9999,volume:.4}),r.AddSound("ToiletSound",{}),r.AddSound("TriggerSound",{}),r.AddSound("PushButtonSound",{}),r.AddSound("AttackSound",{}),r.AddSound("StoolDownSound",{}),r.AddSound("Comix1Sound",{}),r.AddSound("Comix2Sound",{}),r.AddSound("Comix3Sound",{}),r.AddSound("Comix4Sound",{}),r.AddSound("Comix5Sound",{}),r.AddSound("Comix6Sound",{}),r.AddSound("Comix7Sound",{}),r.AddSound("Comix8Sound",{}),r.AddSound("AchievementUnlockedSound",{}),r.AddSound("BouncerJumpSound",{}),r.AddSound("BouncerStepSound",{}),r.AddSound("BouncerThrowSound",{}),r.AddSound("BouncerGetSound",{}),r.AddSound("BouncerPushSound",{volume:.8}),r.AddSound("BouncerIdleSound2",{volume:.5}),r.AddSound("BouncerIdleSound1",{volume:.5}),r.AddSound("HustlerJumpSound",{}),r.AddSound("HustlerStepSound",{volume:.5}),r.AddSound("HustlerSlideSound",{volume:.5}),r.AddSound("HustlerPushSound",{volume:.5}),r.AddSound("HustlerIdleSound1",{volume:.5}),r.AddSound("HustlerIdleSound2",{volume:.5}),r.AddSound("GuardianStepSound",{volume:.5}),r.AddSound("GuardianRunSound",{volume:.5}),r.AddSound("GuardianHurtSound",{}),r.AddSound("GuardianStarsSound",{}),r.AddSound("CriminalStepSound",{volume:.5}),r.AddSound("CriminalRunSound",{volume:.5}),r.AddSound("CriminalBoomSound",{})},r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.stopMusic=function(){},r.prototype.playSound=function(e){var t=r.dicSounds[e];if(t)if(t.music){if(r.playingMusic&&r.playingMusic!=e){var i=r.dicSounds[r.playingMusic];i.sound&&i.sound.stop()}r.curMusic!=e&&e&&(r.playingMusic=r.muteMusic?null:(r._playSound(e,t.volume,t.loops),e),r.curMusic=e)}else r.muteSound||(this.isPlaying(e)&&this.stopSound(e),r._playSound(e,t.volume,t.loops))},r.prototype.stopSound=function(e){var t=r.dicSounds[e];t&&(t.sound.stop(),r.playingMusic==e&&(r.playingMusic=null))},r.prototype.isPlaying=function(e){var t=r.dicSounds[e];return!(!t||!t.sound)&&t.sound.isPlaying},r.ToggleMuteMusic=function(){if(r.muteMusic=!r.muteMusic)r.playingMusic&&(e=r.dicSounds[r.playingMusic]).sound&&e.sound.pause();else if(r.curMusic)if(r.playingMusic){var e;(e=r.dicSounds[r.playingMusic]).sound&&e.sound.resume()}else{var t=r.dicSounds[r.curMusic];r._playSound(r.curMusic,t.volume,t.loops),r.playingMusic=r.curMusic}},r._playSound=function(e,t,i){var n=r.dicSounds[e].sound;i?(n.loopFull(t),n.onLoop.getNumListeners()<1&&n.onLoop.add(r._loopSound,r,0,e,t)):n.play("",0,t)},r._loopSound=function(e,t,i){e.loopFull(i)},r.ToggleMuteSound=function(){if(r.muteSound=!r.muteSound)for(var e in r.dicSounds){var t=r.dicSounds[e];if(!t.music){var i=t.sound;i&&i.isPlaying&&i.stop()}}},r.instance=null,r.dicSounds={},r}(),StateSwitchSystem=function(){function e(){this.game=PhaserGameHelper.getInstance().game,this._ce=CitrusEngine.getInstance(),this._isSwitchingState=!1}return e.prototype.delayLevelCompleteAnimationSound=function(){SoundManager.getInstance().playSound("LevelCompleteAnimationSound")},e.prototype.delayLevelWinSound=function(){SoundManager.getInstance().playSound("LevelWinSound")},e.prototype.delayHamburger1Sound=function(){SoundManager.getInstance().playSound("Hamburger1Sound")},e.prototype.delayHamburger2Sound=function(){SoundManager.getInstance().playSound("Hamburger2Sound")},e.prototype.delayHamburger3Sound=function(){SoundManager.getInstance().playSound("Hamburger3Sound")},e.prototype.switchToLevelCompleted=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.showWin))},e.prototype.showWin=function(){this.winSprite=new MovieClip("cmcYouWin"),GameController.CurtainContainer.addChild(this.winSprite),this.winSprite.removeChild(this.winSprite.getChild("levelCompleted")),this.levelCompleted=new Phaser.Sprite(this.game,Constants.WIDTH/2,.1*Constants.HEIGHT,"AtlasUI","Level_failed_completed.png"),this.levelCompleted.anchor.set(.5),this.winSprite.addChild(this.levelCompleted),this.levelCompletedText=new TranslatedMMText(this.game,Constants.WIDTH/2,.125*Constants.HEIGHT,"level_completed",48),this.levelCompletedText.onOver(),this.winSprite.addChild(this.levelCompletedText),this.winSprite.removeChild(this.winSprite.getChild("levelsButton")),this.winSprite.removeChild(this.winSprite.getChild("replayButton")),this.winSprite.removeChild(this.winSprite.getChild("nextButton")),this.levelsButton=new Phaser.Sprite(this.game,.2*Constants.WIDTH,.85*Constants.HEIGHT,"AtlasUI","buttons.png"),this.levelsButton.anchor.set(.5),this.winSprite.addChild(this.levelsButton),this.levelsButtonText=new TranslatedMMText(this.game,.2*Constants.WIDTH,.85*Constants.HEIGHT,"levels_map",24,this.goLevelSelectFromWin,this),this.winSprite.addChild(this.levelsButtonText),this.replayButton=new Phaser.Sprite(this.game,.5*Constants.WIDTH,.85*Constants.HEIGHT,"AtlasUI","buttons.png"),this.replayButton.anchor.set(.5),this.winSprite.addChild(this.replayButton),this.replayButtonText=new TranslatedMMText(this.game,.5*Constants.WIDTH,.85*Constants.HEIGHT,"replay",24,this.goRestartFromWin,this),this.winSprite.addChild(this.replayButtonText),this.nextButton=new Phaser.Sprite(this.game,.8*Constants.WIDTH,.85*Constants.HEIGHT,"AtlasUI","buttons.png"),this.nextButton.anchor.set(.5),this.winSprite.addChild(this.nextButton),this.nextButtonText=new TranslatedMMText(this.game,.8*Constants.WIDTH,.85*Constants.HEIGHT,"next_level",18,this.showAdOnWin,this),this.winSprite.addChild(this.nextButtonText),Constants.currentLevel>=Constants.NUMLEVELS-1&&(this.nextButton.visible=!1,this.nextButtonText.visible=!1,this.replayButton.x=this.nextButton.x,this.replayButtonText.x=this.nextButtonText.x),this.winSprite.getChild("burgerBG").visible=!1,this.winSprite.getChild("b1").visible=!1,this.winSprite.getChild("b2").visible=!1,this.winSprite.getChild("b3").visible=!1,this.winSprite.addChild(new MovieClip("cmcHustlerWin",0,0,"winnerHustler","WinningObjects",null)),this.winSprite.addChild(new MovieClip("cmcBouncerWin",0,0,"winnerBouncer","WinningObjects",null)),this.winSprite.getChild("winnerHustler").addAnimation("win",1,34,27,!1,this.showWin2,this),this.winSprite.getChild("winnerBouncer").addAnimation("win",1,34,27,!1),this.winSprite.getChild("winnerHustler").playAnimation("win"),this.winSprite.getChild("winnerBouncer").playAnimation("win"),this.delayLevelCompleteAnimationSound(),TweenMax.delayedCall(1.8,this.delayLevelWinSound,this)},e.prototype.showWin2=function(){var e=this.winSprite.getChild("burgerBG"),t=this.winSprite.getChild("b1"),i=this.winSprite.getChild("b2"),n=this.winSprite.getChild("b3");e.visible=!0,e.scaleX=e.scaleY=0,TweenMax.to(e,.2,{scaleX:1,scaleY:1,ease:"Back.easeOut"}),(21==Constants.currentLevel&&26<Constants.bouncer.burgers||Constants.currentLevel<21&&0<Constants.bouncer.burgers)&&(t.visible=!0,t.scaleX=t.scaleY=0,TweenMax.to(t,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut"}),TweenMax.delayedCall(.05,this.delayHamburger1Sound,this)),(21==Constants.currentLevel&&54<Constants.bouncer.burgers||Constants.currentLevel<21&&1<Constants.bouncer.burgers)&&(i.visible=!0,i.scaleX=i.scaleY=0,TweenMax.to(i,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut",delay:.15}),TweenMax.delayedCall(.2,this.delayHamburger2Sound,this)),(21==Constants.currentLevel&&79<Constants.bouncer.burgers||Constants.currentLevel<21&&2<Constants.bouncer.burgers)&&(n.visible=!0,n.scaleX=n.scaleY=0,TweenMax.to(n,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut",delay:.3}),TweenMax.delayedCall(.35,this.delayHamburger3Sound,this)),TweenMax.to(this.winSprite.getChild("winnerBouncer"),.6,{x:-138,ease:"Back.easeOut"}),TweenMax.to(this.winSprite.getChild("winnerHustler"),.6,{x:138,ease:"Back.easeOut"})},e.prototype.goLevelSelectFromWin=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("winLevelSelect",function(){e.hideWin(e.directToLevelSelect)})},e.prototype.goRestartFromWin=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("winRestart",function(){e.hideWin(e.directToPlay)})},e.prototype.showAdOnWin=function(){var e=this,t=!1;Constants.currentLevel<=19&&(Constants.currentLevel++,t=!0),Fabrique.AdHandler.getInstance().showAd("nextLevel",function(){e.goNextFromWin(t)})},e.prototype.goNextFromWin=function(e){e?this.hideWin(this.directToPlay):this.hideWin(this.directToLevelSelect)},e.prototype.hideWin=function(e){TweenMax.to(this.winSprite.getChild("winnerHustler"),.5,{x:400,ease:"Back.easeIn"}),TweenMax.to(this.winSprite.getChild("winnerBouncer"),.5,{y:618,ease:"Back.easeIn",onComplete:this.removeWin,onCompleteContext:this}),this.levelCompleted.visible=!1,this.levelCompletedText.visible=!1,this.levelsButton.visible=!1,this.levelsButtonText.visible=!1,this.replayButton.visible=!1,this.replayButtonText.visible=!1,this.nextButton.visible=!1,this.nextButtonText.visible=!1;var t=this.winSprite.getChild("b1"),i=this.winSprite.getChild("b2"),n=this.winSprite.getChild("b3");TweenMax.to(t,.2,{scaleX:0,scaleY:0}),TweenMax.to(i,.2,{scaleX:0,scaleY:0,delay:.1}),TweenMax.to(n,.2,{scaleX:0,scaleY:0,delay:.2}),TweenMax.to(this.winSprite.getChild("burgerBG"),.2,{scaleX:0,scaleY:0,delay:.3}),TweenMax.delayedCall(.55,e,this)},e.prototype.removeWin=function(){this.winSprite&&(this.winSprite.visible=!1,GameController.CurtainContainer.removeChild(this.winSprite),this.winSprite=null)},e.prototype.switchToLose=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.showLose),SoundManager.getInstance().playSound("LevelFailedSound"))},e.prototype.showLose=function(){this.loseSprite=new MovieClip("cmcYouLose"),GameController.CurtainContainer.addChild(this.loseSprite),this.loseSprite.getChild("walkthroughButton").visible=!1,this.loseSprite.removeChild(this.loseSprite.getChild("levelFailed")),this.levelFailed=new Phaser.Sprite(this.game,Constants.WIDTH/2,.1*Constants.HEIGHT,"AtlasUI","Level_failed_completed.png"),this.levelFailed.anchor.set(.5),this.loseSprite.addChild(this.levelFailed),this.levvelFailedText=new TranslatedMMText(this.game,Constants.WIDTH/2,.125*Constants.HEIGHT,"level_failed",48),this.levvelFailedText.onOver(),this.loseSprite.addChild(this.levvelFailedText),this.loseSprite.removeChild(this.loseSprite.getChild("levelsButton")),this.loseSprite.removeChild(this.loseSprite.getChild("replayButton")),this.levvelFailedLevelsButton=new Phaser.Sprite(this.game,.2*Constants.WIDTH,.85*Constants.HEIGHT,"AtlasUI","buttons.png"),this.levvelFailedLevelsButton.anchor.set(.5),this.loseSprite.addChild(this.levvelFailedLevelsButton),this.levvelFailedLevelsButtonText=new TranslatedMMText(this.game,.2*Constants.WIDTH,.85*Constants.HEIGHT,"levels_map",24,this.goLevelsFromLose,this),this.loseSprite.addChild(this.levvelFailedLevelsButtonText),this.levvelFailedReplayButton=new Phaser.Sprite(this.game,.5*Constants.WIDTH,.85*Constants.HEIGHT,"AtlasUI","buttons.png"),this.levvelFailedReplayButton.anchor.set(.5),this.loseSprite.addChild(this.levvelFailedReplayButton),this.levvelFailedReplayButtonText=new TranslatedMMText(this.game,.5*Constants.WIDTH,.85*Constants.HEIGHT,"replay",24,this.goRestartFromLose,this),this.loseSprite.addChild(this.levvelFailedReplayButtonText);TweenMax.to(this.loseSprite.getChild("loserBouncer"),.5,{x:8,ease:"Back.easeOut"}),TweenMax.to(this.loseSprite.getChild("loserHustler"),.5,{x:512,ease:"Back.easeOut"})},e.prototype.goRestartFromLose=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("loseRestart",function(){e.hideLose(e.directToPlay)})},e.prototype.goLevelsFromLose=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("loseLevelSelect",function(){e.hideLose(e.directToLevelSelect)})},e.prototype.hideLose=function(e){this.levelFailed.visible=!1,this.levvelFailedText.visible=!1,this.levvelFailedLevelsButton.visible=!1,this.levvelFailedLevelsButtonText.visible=!1,this.levvelFailedReplayButton.visible=!1,this.levvelFailedReplayButtonText.visible=!1,this.loseSprite.getChild("walkthroughButton").visible=!1,TweenMax.to(this.loseSprite.getChild("loserHustler"),.5,{x:812,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("loserBouncer"),.5,{y:618,ease:"Back.easeIn",onComplete:this.removeLoss,onCompleteContext:this}),TweenMax.delayedCall(.55,e,this)},e.prototype.removeLoss=function(){this.loseSprite&&(this.loseSprite.visible=!1,GameController.CurtainContainer.removeChild(this.loseSprite),this.loseSprite=null)},e.prototype.switchToAnimation=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToAnimation))},e.prototype.switchToMainMenu=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToMainMenu))},e.prototype.switchToLevelSelect=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToLevelSelect))},e.prototype.switchToPlay=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToPlay))},e.prototype.directToPlay=function(){this.game.state.start("Level")},e.prototype.directToLevelSelect=function(){this.game.state.start("LevelSelect")},e.prototype.directToMainMenu=function(){this.game.state.start("MainMenu")},e.prototype.directToAnimation=function(){this.game.state.start("Animation")},e.prototype.closeCurtains=function(e){void 0===e&&(e=null),e!=this.directToPlay&&GameController.HideJoypad(),GameController.LeftCurtain.visible=GameController.RightCurtain.visible=!0,GameController.LeftCurtain.x=GameController.LEFT_CURTAIN_OPEN_X,GameController.RightCurtain.x=GameController.RIGHT_CURTAIN_OPEN_X,SoundManager.getInstance().playSound("BrickWallCloseSound"),TweenMax.to(GameController.LeftCurtain,.5,{x:0,ease:"Quad.easeOut"}),TweenMax.to(GameController.RightCurtain,.5,{x:Constants.WIDTH,onComplete:e,onCompleteContext:this,ease:"Quad.easeOut"})},e.prototype.openCurtains=function(e){TweenMax.delayedCall(e,this.delayBrickWallOpenSound,this),TweenMax.to(GameController.LeftCurtain,.5,{x:GameController.LEFT_CURTAIN_OPEN_X,ease:"Quad.easeIn",delay:e}),TweenMax.to(GameController.RightCurtain,.5,{x:GameController.RIGHT_CURTAIN_OPEN_X,ease:"Quad.easeIn",delay:e,onComplete:this.dispose})},e.prototype.delayBrickWallOpenSound=function(){SoundManager.getInstance().playSound("BrickWallOpenSound")},e.prototype.dispose=function(){GameController.LeftCurtain.visible=GameController.RightCurtain.visible=!1,Constants.stateSwitcher._isSwitchingState=!1},e}(),StorageHelper=function(){function t(){}return t.LS=function(e){return e+t.LocalStorageName},t.initCookies=function(){},t.readCookies=function(){if(t.storageAvailable){var e=localStorage.getItem(t.LS("levelsComplete"));e?(Constants.levelsComplete=JSON.parse(localStorage.getItem(t.LS("levelsComplete"))),Constants.burgers=JSON.parse(localStorage.getItem(t.LS("burgers"))),Constants.isIntroAnimationPlayed=JSON.parse(localStorage.getItem(t.LS("isIntroAnimationPlayed"))),Constants.isFinalAnimationPlayed=JSON.parse(localStorage.getItem(t.LS("isFinalAnimationPlayed")))):t.clearProgress()}},t.saveCookies=function(){t.storageAvailable&&(localStorage.setItem(t.LS("levelsComplete"),JSON.stringify(Constants.levelsComplete)),localStorage.setItem(t.LS("burgers"),JSON.stringify(Constants.burgers)),localStorage.setItem(t.LS("isIntroAnimationPlayed"),JSON.stringify(Constants.isIntroAnimationPlayed)),localStorage.setItem(t.LS("isFinalAnimationPlayed"),JSON.stringify(Constants.isFinalAnimationPlayed)))},t.totalPoints=function(){for(var e=0,t=1;t<=Constants.NUMLEVELS;t++)e+=Constants.burgers[t];return e},t.clearProgress=function(){Constants.isIntroAnimationPlayed=!1,Constants.isFinalAnimationPlayed=!1,Constants.burgers=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Constants.levelsComplete=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],t.saveCookies()},t.isLocalStorageSupport=function(){try{if("object"==typeof localStorage)return localStorage.setItem("testingLocalStorage","foo"),localStorage.removeItem("testingLocalStorage"),!0}catch(e){return!1}return!1},t.LocalStorageName="DODGERS1",t.storageAvailable=t.isLocalStorageSupport(),t}(),TaskManager=function(){function e(e){void 0===e&&(e=!1),this._tasks=[],this._pauseCount=0,this.isStarted=!1,this.isPaused=!1,this.cycle=e}return Object.defineProperty(e.prototype,"currentTask",{get:function(){return 0<this._tasks.length?this._tasks[0].func:null},enumerable:!1,configurable:!0}),e.prototype.addTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.push({func:t,params:i,ignoreCycle:n,context:e}),this.start()},e.prototype.addInstantTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.push({func:t,params:i,ignoreCycle:n,isInstant:!0,context:e}),this.start()},e.prototype.addUrgentTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.unshift({func:t,params:i,ignoreCycle:n,context:e}),this.start()},e.prototype.addUrgentInstantTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.unshift({func:t,params:i,ignoreCycle:n,isInstant:!0,context:e}),this.start()},e.prototype.addPause=function(e,t){void 0===t&&(t=!1),this.addTask(this,this.timerFrame,[e],t)},e.prototype.timerFrame=function(e){this._pauseCount++,this._pauseCount>=e&&(this._pauseCount=0,this.nextTask())},e.prototype.removeAllTasks=function(){this._tasks=new Array},e.prototype.nextTask=function(e){void 0===e&&(e=!1),this.cycle&&!e?this._tasks.push(this._tasks.shift()):this._tasks.shift()},e.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.isPaused=!1)},e.prototype.stop=function(){this.isStarted=!1},e.prototype.update=function(){var e=this._tasks[0];e?(this.result=e.func.call(e.context,e.params),e==this._tasks[0]&&(e.isInstant||this.result)&&this.nextTask(e.ignoreCycle)):stop()},Object.defineProperty(e.prototype,"pause",{get:function(){return this.isPaused},set:function(e){e&&!this.isPaused?this.isPaused=!0:this._tasks[0]&&this.isPaused&&(this.isPaused=!1)},enumerable:!1,configurable:!0}),e.prototype.tasksNum=function(){return this._tasks.length},e.ALL_TASKS_DONE="allTasksDone",e}(),TopPanel=function(){function e(){this.game=PhaserGameHelper.getInstance().game,21==Constants.currentLevel?this._view=new MovieClip("TopPanelBonusGraphics"):this._view=new MovieClip("TopPanelGraphics"),this.game.world.addChild(this._view)}return e.prototype.depressButtons=function(){this._view.getChild("musicButton").changeFrame1(),this._view.getChild("soundButton").changeFrame1(),this._view.getChild("replayButton").changeFrame1(),this._view.getChild("menuButton").changeFrame1(),Constants.currentLevel!=Constants.NUMLEVELS&&this._view.getChild("walkthroughButton").changeFrame1()},e.prototype.disableInput=function(){this._view.getChild("musicButton").inputEnabled=!1,this._view.getChild("soundButton").inputEnabled=!1,this._view.getChild("replayButton").inputEnabled=!1,this._view.getChild("menuButton").inputEnabled=!1,Constants.currentLevel!=Constants.NUMLEVELS&&(this._view.getChild("walkthroughButton").inputEnabled=!1),TweenMax.delayedCall(.1,this.depressButtons,this)},e.prototype.enableInput=function(){this._view.getChild("musicButton").inputEnabled=!0,this._view.getChild("soundButton").inputEnabled=!0,this._view.getChild("replayButton").inputEnabled=!0,this._view.getChild("menuButton").inputEnabled=!0,Constants.currentLevel!=Constants.NUMLEVELS&&(this._view.getChild("walkthroughButton").inputEnabled=!0)},e.prototype.init=function(){if(GameController.Touch()){this._view.changeChildByName("musicButton","BigMusicMenuButton","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("soundButton","BigSoundButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("replayButton","BigReplayButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("menuButton","BigMenuButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data);var e=this._view.getChild("musicButton"),t=this._view.getChild("soundButton"),i=this._view.getChild("replayButton"),n=this._view.getChild("menuButton");e.x=646,e.y=3,t.x=590,t.y=3,i.x=534,i.y=3,n.x=478,n.y=3}if(21==Constants.currentLevel){GameController.Touch()&&(e.alpha=.7,t.alpha=.7,i.alpha=.7,n.alpha=.7),this._secondsLeft=45,GameController.Touch()&&(this._secondsLeft=50),this._maxBonusHearts=Constants.levelState.getObjectsByName("burger").length;this.heartsText=this.game.add.text(0,0,"Level "+Constants.currentLevel+":",{font:"24px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"middle"}),this.heartsText.stroke="#4F2E1F",this.heartsText.strokeThickness=4,this.heartsText.setTextBounds(-7,4,105,36),this.heartsText.text="00 / "+String(this._maxBonusHearts),this._view.addChild(this.heartsText);this.timerText1=this.game.add.text(0,0,"Level "+Constants.currentLevel+":",{font:"24px sc_gum_kidsregular",fill:"#FFFF00",boundsAlignH:"right",boundsAlignV:"middle"}),this.timerText1.stroke="#4F2E1F",this.timerText1.strokeThickness=4,this.timerText1.setTextBounds(334,7,60,36),this.timerText1.text="30.",this._view.addChild(this.timerText1);this.timerText2=this.game.add.text(0,0,"Level "+Constants.currentLevel+":",{font:"18px sc_gum_kidsregular",fill:"#FFFF00",boundsAlignH:"left",boundsAlignV:"middle"}),this.timerText2.stroke="#4F2E1F",this.timerText2.strokeThickness=4,this.timerText2.setTextBounds(390,12,48,30),this.timerText2.text="00",this._view.addChild(this.timerText2),this._lastTime=this.game.time.totalElapsedSeconds()}else this._view.getChild("b1").scaleX=this._view.getChild("b1").scaleY=0,this._view.getChild("b2").scaleX=this._view.getChild("b2").scaleY=0,this._view.getChild("b3").scaleX=this._view.getChild("b3").scaleY=0},e.prototype.tick=function(){if(21==Constants.currentLevel){var e=this.game.time.totalElapsedSeconds();this._secondsLeft-=e-this._lastTime,this._secondsLeft=Math.max(0,this._secondsLeft),this._lastTime=e,this.timerText1.text=String(Math.floor(this._secondsLeft))+".",this.timerText2.text=String(this._secondsLeft-Math.floor(this._secondsLeft)).substr(2,2),0<this._secondsLeft||Constants.levelState.failLevel()}},e.prototype.getHeartX=function(){return 21==Constants.currentLevel?31:0==Constants.bouncer.burgers?this._view.getChild("b1").x:1==Constants.bouncer.burgers?this._view.getChild("b2").x:this._view.getChild("b3").x},e.prototype.getHeartY=function(){return 21==Constants.currentLevel?19:this._view.getChild("b1").y},e.prototype.collectBurger=function(e){var i=new MovieClip("BurgerSmallGraphics");i.x=e.x,i.y=e.y,this._view.addChild(i),TweenMax.to(i,.6,{x:this.getHeartX(),y:this.getHeartY(),rotation:360,onComplete:function(){i&&i.parent&&i.parent.removeChild(i);if(21==Constants.currentLevel){var e=String(n);e.length<2&&(e="0"+e),Constants.levelState.topPanel.heartsText.text=e+" / "+String(Constants.levelState.topPanel._maxBonusHearts)}else{var t=Constants.levelState.topPanel._view;1==n?t.getChild("b1").scaleX=t.getChild("b1").scaleY=1:2==n?t.getChild("b2").scaleX=t.getChild("b2").scaleY=1:3==n&&(t.getChild("b3").scaleX=t.getChild("b3").scaleY=1)}}}),Constants.bouncer.burgers++,e.kill=!0,1==Constants.bouncer.burgers?SoundManager.getInstance().playSound("GetHamburger1Sound"):2==Constants.bouncer.burgers?SoundManager.getInstance().playSound("GetHamburger2Sound"):SoundManager.getInstance().playSound("GetHamburger3Sound");var n=Constants.bouncer.burgers},e.prototype.dispose=function(){},e}();